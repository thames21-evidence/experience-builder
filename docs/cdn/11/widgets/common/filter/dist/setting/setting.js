System.register(["jimu-core/emotion","jimu-core","jimu-for-builder","jimu-ui/advanced/setting-components","jimu-ui","jimu-ui/advanced/data-source-selector","jimu-ui/advanced/sql-expression-builder","jimu-ui/advanced/resource-selector","jimu-ui/basic/sql-expression-runtime","jimu-ui/basic/list-tree","jimu-layouts/layout-runtime"],function(e,t){var i={},s={},o={},a={},r={},n={},l={},g={},I={},c={},p={};return{setters:[function(e){i.jsx=e.jsx,i.jsxs=e.jsxs},function(e){s.APP_FRAME_NAME_IN_BUILDER=e.APP_FRAME_NAME_IN_BUILDER,s.AllDataSourceTypes=e.AllDataSourceTypes,s.ClauseDisplayType=e.ClauseDisplayType,s.ClauseLogic=e.ClauseLogic,s.DataSourceComponent=e.DataSourceComponent,s.DataSourceManager=e.DataSourceManager,s.Immutable=e.Immutable,s.React=e.React,s.appConfigUtils=e.appConfigUtils,s.classNames=e.classNames,s.css=e.css,s.dataSourceUtils=e.dataSourceUtils,s.defaultMessages=e.defaultMessages,s.getAppStore=e.getAppStore,s.polished=e.polished,s.urlUtils=e.urlUtils},function(e){o.getAppConfigAction=e.getAppConfigAction},function(e){a.SettingRow=e.SettingRow,a.SettingSection=e.SettingSection,a.SidePopper=e.SidePopper},function(e){r.AdvancedButtonGroup=e.AdvancedButtonGroup,r.Alert=e.Alert,r.Button=e.Button,r.Checkbox=e.Checkbox,r.Dropdown=e.Dropdown,r.DropdownButton=e.DropdownButton,r.DropdownItem=e.DropdownItem,r.DropdownMenu=e.DropdownMenu,r.Icon=e.Icon,r.Label=e.Label,r.Switch=e.Switch,r.TextArea=e.TextArea,r.TextInput=e.TextInput,r.Tooltip=e.Tooltip,r.defaultMessages=e.defaultMessages},function(e){n.DataSourceSelector=e.DataSourceSelector},function(e){l.GroupSqlExpressionBuilderPopup=e.GroupSqlExpressionBuilderPopup,l.SqlExpressionBuilderPopup=e.SqlExpressionBuilderPopup},function(e){g.IconPicker=e.IconPicker},function(e){I.getJimuFieldNamesBySqlExpression=e.getJimuFieldNamesBySqlExpression,I.getShownClauseNumberByExpression=e.getShownClauseNumberByExpression,I.getUpdatedGroupExpression=e.getUpdatedGroupExpression},function(e){c.List=e.List,c.TreeItemActionType=e.TreeItemActionType},function(e){p.LayoutItemSizeModes=e.LayoutItemSizeModes}],execute:function(){e((()=>{var e={4108:e=>{"use strict";e.exports=o},9869:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M1.5 11a.5.5 0 0 0 .5-.5V2h8.5a.5.5 0 0 0 0-1H2a1 1 0 0 0-1 1v8.5a.5.5 0 0 0 .5.5M5 4h9a1 1 0 0 1 1 1v9a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1m0 1v9h9V5z" clip-rule="evenodd"></path></svg>'},12204:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M0 0h14v1.207l-5.5 5.5V8h-1V6.293L12.793 1H1.207L6.5 6.293v8.914l-1-1v-7.5L0 1.207z"></path><path fill="#000" fill-rule="evenodd" d="M10.271 10.437a1.81 1.81 0 1 1 2.56 2.56 1.81 1.81 0 0 1-2.56-2.56m1.28.47a.81.81 0 1 0 0 1.621.81.81 0 0 0 0-1.621" clip-rule="evenodd"></path><path fill="#000" fill-rule="evenodd" d="M11.52 7.5h.005q.388 0 .77.07a.5.5 0 0 1 .393.366l.15.572q.303.127.578.31l.623-.162a.5.5 0 0 1 .48.132c.39.393.697.86.905 1.373a.5.5 0 0 1-.096.526l-.403.437c.056.33.063.666.02.998l.418.441a.5.5 0 0 1 .11.509c-.176.504-.447.97-.799 1.372a.5.5 0 0 1-.487.159l-.588-.134q-.373.283-.808.454l-.154.555a.5.5 0 0 1-.393.36 4 4 0 0 1-.721.065h-.002a4 4 0 0 1-.905-.102.5.5 0 0 1-.368-.35l-.172-.604a3.4 3.4 0 0 1-.666-.403l-.57.146a.5.5 0 0 1-.504-.159 4.2 4.2 0 0 1-.814-1.474.5.5 0 0 1 .106-.483l.452-.502q-.03-.352.016-.703l-.422-.44a.5.5 0 0 1-.11-.513c.197-.554.509-1.06.915-1.485a.5.5 0 0 1 .482-.14l.617.154a3.5 3.5 0 0 1 .457-.266l.161-.598a.5.5 0 0 1 .358-.353c.315-.082.64-.125.966-.128m.007 1q-.225.002-.445.038l-.144.532a.5.5 0 0 1-.298.334 2.5 2.5 0 0 0-.641.373.5.5 0 0 1-.434.095l-.55-.137q-.234.296-.394.636l.37.387a.5.5 0 0 1 .129.451c-.06.28-.068.568-.022.85a.5.5 0 0 1-.122.413l-.405.45q.135.328.338.618l.5-.128a.5.5 0 0 1 .462.114c.23.21.5.374.793.482a.5.5 0 0 1 .308.333l.153.537a3 3 0 0 0 .637.015l.135-.49a.5.5 0 0 1 .341-.348c.333-.097.64-.268.899-.5a.5.5 0 0 1 .444-.115l.522.118q.183-.255.314-.539l-.37-.39a.5.5 0 0 1-.126-.448 2.4 2.4 0 0 0-.022-1.083.5.5 0 0 1 .116-.462l.351-.381a3 3 0 0 0-.369-.555l-.558.144a.5.5 0 0 1-.433-.09 2.4 2.4 0 0 0-.741-.393.5.5 0 0 1-.33-.35l-.13-.499a3 3 0 0 0-.278-.012" clip-rule="evenodd"></path></svg>'},13089:e=>{"use strict";e.exports=n},14321:e=>{"use strict";e.exports=r},23662:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M7.5 0a.5.5 0 0 0-.5.5V7H.5a.5.5 0 0 0 0 1H7v6.5a.5.5 0 0 0 1 0V8h6.5a.5.5 0 0 0 0-1H8V.5a.5.5 0 0 0-.5-.5"></path></svg>'},30655:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M2.146 4.653a.485.485 0 0 1 .708 0L8 10.24l5.146-5.587a.485.485 0 0 1 .708 0 .54.54 0 0 1 0 .738l-5.5 5.956a.485.485 0 0 1-.708 0l-5.5-5.956a.54.54 0 0 1 0-.738" clip-rule="evenodd"></path></svg>'},31027:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M12 6.5c0 .527-.074 1.036-.212 1.518l.912.438a6.5 6.5 0 1 0-6.586 4.533l-.077-1.008A5.5 5.5 0 1 1 12 6.5m-9 0a3.5 3.5 0 0 0 2.88 3.445L5.8 8.901a2.501 2.501 0 1 1 3.194-2.224l.949.456A3.5 3.5 0 1 0 3 6.5M15.5 11l-5 1-3 4-1-9.5zm-5.57.094-1.702 2.269-.542-5.152 4.76 2.38z" clip-rule="evenodd"></path></svg>'},35636:(e,t,i)=>{var s={"./trigger_button.svg":94390,"./trigger_toggle.svg":54246};function o(e){var t=a(e);return i(t)}function a(e){if(!i.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}o.keys=function(){return Object.keys(s)},o.resolve=a,e.exports=o,o.id=35636},35809:e=>{"use strict";e.exports=g},37378:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M14 0H0v1.207l5.5 5.5v4.5l2.146 2.147A.5.5 0 0 0 8.5 13V6.707l5.5-5.5zM6.5 6.293 1.207 1h11.586L7.5 6.293v5.5l-1-1z" clip-rule="evenodd"></path><path fill="#000" d="M15 2.793V2h1v1.207l-4.5 4.5V15.5a.5.5 0 0 1-.854.354L10 15.207v-1.414l.5.5v-7z"></path></svg>'},39528:e=>{e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjY4cHgiIGhlaWdodD0iNjhweCIgdmlld0JveD0iMCAwIDY4IDY4IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDxnIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPg0KICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTM1Ni4wMDAwMDAsIC0zMzYuMDAwMDAwKSIgZmlsbC1ydWxlPSJub256ZXJvIj4NCiAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNTYuMDAwMDAwLCAzMzYuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPGc+DQogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMCwxNCBMMTIsMTYgTDYzLDE2IEM2My41NTIyODQ3LDE2IDY0LDE2LjQ0NzcxNTMgNjQsMTcgTDY0LDYzIEM2NCw2My41NTIyODQ3IDYzLjU1MjI4NDcsNjQgNjMsNjQgTDUsNjQgQzQuNDQ3NzE1MjUsNjQgNCw2My41NTIyODQ3IDQsNjMgTDQsMTcgQzQsMTYuNDQ3NzE1MyA0LjQ0NzcxNTI1LDE2IDUsMTYgTDgsMTYgTDEwLDE0IFoiIGZpbGw9IiMyODI4MjgiPjwvcGF0aD4NCiAgICAgICAgICAgICAgICAgICAgPHJlY3QgZmlsbD0iIzM2MzYzNiIgeD0iOCIgeT0iMjAiIHdpZHRoPSI1MiIgaGVpZ2h0PSIxOSIgcng9IjEiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICAgICAgPHBvbHlnb24gZmlsbD0iIzZBNkE2QSIgcG9pbnRzPSIxMCAyMyAxNCAyMyAxMiAyNSI+PC9wb2x5Z29uPg0KICAgICAgICAgICAgICAgICAgICA8cmVjdCBmaWxsPSIjMzYzNjM2IiB4PSI4IiB5PSI0MiIgd2lkdGg9IjUyIiBoZWlnaHQ9IjgiIHJ4PSIxIj48L3JlY3Q+DQogICAgICAgICAgICAgICAgICAgIDxyZWN0IGZpbGw9IiMzNjM2MzYiIHg9IjgiIHk9IjUzIiB3aWR0aD0iNTIiIGhlaWdodD0iNyIgcng9IjEiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICAgICAgPHBvbHlnb24gZmlsbD0iIzZBNkE2QSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTIuMDAwMDAwLCA1Ni4wMDAwMDApIHJvdGF0ZSgtOTAuMDAwMDAwKSB0cmFuc2xhdGUoLTEyLjAwMDAwMCwgLTU2LjAwMDAwMCkgIiBwb2ludHM9IjEwIDU1IDE0IDU1IDEyIDU3Ij48L3BvbHlnb24+DQogICAgICAgICAgICAgICAgICAgIDxyZWN0IGZpbGw9IiM1MjUyNTIiIHg9IjExIiB5PSIyOSIgd2lkdGg9IjQ2IiBoZWlnaHQ9IjIiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICAgICAgPHJlY3QgZmlsbD0iIzUyNTI1MiIgeD0iMTEiIHk9IjM0IiB3aWR0aD0iMzUiIGhlaWdodD0iMiI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICA8cmVjdCBmaWxsPSIjNkE2QTZBIiB4PSI2IiB5PSI0IiB3aWR0aD0iOCIgaGVpZ2h0PSI4IiByeD0iMiI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgIDwvZz4NCiAgICAgICAgPC9nPg0KICAgIDwvZz4NCjwvc3ZnPg=="},41496:e=>{"use strict";e.exports=p},45508:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2M6.5 7.5A.5.5 0 0 1 7 7h1.5v4.5h1a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1h1V8H7a.5.5 0 0 1-.5-.5"></path><path fill="#000" fill-rule="evenodd" d="M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14" clip-rule="evenodd"></path></svg>'},54246:e=>{e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjcwcHgiIGhlaWdodD0iNTBweCIgdmlld0JveD0iMCAwIDcwIDUwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDxnIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPg0KICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTE5NS4wMDAwMDAsIC00ODMuMDAwMDAwKSI+DQogICAgICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMTgwLjAwMDAwMCwgMzYuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTUuMDAwMDAwLCA0NDcuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgICAgIDxnPg0KICAgICAgICAgICAgICAgICAgICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNTMuMDAwMDAwLCA1LjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IGZpbGw9IiM2QTZBNkEiIHg9IjAiIHk9IjAiIHdpZHRoPSIxMiIgaGVpZ2h0PSI2IiByeD0iMyI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IGZpbGw9IiMxODE4MTgiIHg9IjciIHk9IjEiIHdpZHRoPSI0IiBoZWlnaHQ9IjQiIHJ4PSIyIj48L3JlY3Q+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBmaWxsPSIjNkE2QTZBIiBmaWxsLXJ1bGU9Im5vbnplcm8iIHg9IjUiIHk9IjYiIHdpZHRoPSI0MiIgaGVpZ2h0PSI0Ij48L3JlY3Q+DQogICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBmaWxsPSIjNkE2QTZBIiBmaWxsLXJ1bGU9Im5vbnplcm8iIHg9IjUiIHk9IjE0IiB3aWR0aD0iNDIiIGhlaWdodD0iNCI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgZmlsbD0iIzZBNkE2QSIgZmlsbC1ydWxlPSJub256ZXJvIiB4PSI1IiB5PSIyMiIgd2lkdGg9IjQyIiBoZWlnaHQ9IjQiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IGZpbGw9IiM2QTZBNkEiIGZpbGwtcnVsZT0ibm9uemVybyIgeD0iNSIgeT0iMzAiIHdpZHRoPSI0MiIgaGVpZ2h0PSI0Ij48L3JlY3Q+DQogICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBmaWxsPSIjNkE2QTZBIiBmaWxsLXJ1bGU9Im5vbnplcm8iIHg9IjUiIHk9IjM4IiB3aWR0aD0iMzEiIGhlaWdodD0iNCI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgPC9nPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+"},62838:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m8.745 8 6.1 6.1a.527.527 0 1 1-.745.746L8 8.746l-6.1 6.1a.527.527 0 1 1-.746-.746l6.1-6.1-6.1-6.1a.527.527 0 0 1 .746-.746l6.1 6.1 6.1-6.1a.527.527 0 0 1 .746.746z"></path></svg>'},63369:e=>{e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjcwcHgiIGhlaWdodD0iNzBweCIgdmlld0JveD0iMCAwIDcwIDcwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDxnIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPg0KICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTI3NS4wMDAwMDAsIC0zMzUuMDAwMDAwKSIgZmlsbC1ydWxlPSJub256ZXJvIj4NCiAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEyNzUuMDAwMDAwLCAzMzUuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPGc+DQogICAgICAgICAgICAgICAgICAgIDxyZWN0IGZpbGw9IiMyODI4MjgiIHg9IjUiIHk9IjUiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcng9IjEiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICAgICAgPHJlY3QgZmlsbD0iIzZBNkE2QSIgeD0iOSIgeT0iOSIgd2lkdGg9IjE1IiBoZWlnaHQ9IjgiIHJ4PSIyIj48L3JlY3Q+DQogICAgICAgICAgICAgICAgICAgIDxyZWN0IGZpbGw9IiM1MjUyNTIiIHg9IjI2IiB5PSI5IiB3aWR0aD0iMTkiIGhlaWdodD0iOCIgcng9IjIiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE3LDE5IEwxOSwyMS4xMjc2NTk2IEw1MiwyMS4xMjc2NTk2IEM1Mi41NTIyODQ3LDIxLjEyNzY1OTYgNTMsMjEuNTc1Mzc0OCA1MywyMi4xMjc2NTk2IEw1Myw0Mi4xMjc2NTk2IEM1Myw0Mi42Nzk5NDQzIDUyLjU1MjI4NDcsNDMuMTI3NjU5NiA1Miw0My4xMjc2NTk2IEwxMCw0My4xMjc2NTk2IEM5LjQ0NzcxNTI1LDQzLjEyNzY1OTYgOSw0Mi42Nzk5NDQzIDksNDIuMTI3NjU5NiBMOSwyMi4xMjc2NTk2IEM5LDIxLjU3NTM3NDggOS40NDc3MTUyNSwyMS4xMjc2NTk2IDEwLDIxLjEyNzY1OTYgTDE1LDIxLjEyNzY1OTYgTDE3LDE5IFoiIGZpbGw9IiMzNjM2MzYiPjwvcGF0aD4NCiAgICAgICAgICAgICAgICAgICAgPHJlY3QgZmlsbD0iIzUyNTI1MiIgeD0iMTMiIHk9IjI1IiB3aWR0aD0iMzYiIGhlaWdodD0iMiI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICA8cmVjdCBmaWxsPSIjNTI1MjUyIiB4PSIxMyIgeT0iMzEiIHdpZHRoPSIzNiIgaGVpZ2h0PSIyIj48L3JlY3Q+DQogICAgICAgICAgICAgICAgICAgIDxyZWN0IGZpbGw9IiM1MjUyNTIiIHg9IjEzIiB5PSIzNyIgd2lkdGg9IjI3IiBoZWlnaHQ9IjIiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICAgICAgPHJlY3QgZmlsbD0iIzZBNkE2QSIgeD0iNDciIHk9IjkiIHdpZHRoPSIxNCIgaGVpZ2h0PSI4IiByeD0iMiI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgIDwvZz4NCiAgICAgICAgPC9nPg0KICAgIDwvZz4NCjwvc3ZnPg=="},67386:e=>{"use strict";e.exports=i},70537:e=>{e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjY4cHgiIGhlaWdodD0iNjhweCIgdmlld0JveD0iMCAwIDY4IDY4IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDxnIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPg0KICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTE5Ni4wMDAwMDAsIC0zMzYuMDAwMDAwKSIgZmlsbC1ydWxlPSJub256ZXJvIj4NCiAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDExOTYuMDAwMDAwLCAzMzYuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPGc+DQogICAgICAgICAgICAgICAgICAgIDxyZWN0IGZpbGw9IiMyODI4MjgiIHg9IjQiIHk9IjQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcng9IjEiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICAgICAgPHJlY3QgZmlsbD0iIzM2MzYzNiIgeD0iOCIgeT0iNTIiIHdpZHRoPSI1MiIgaGVpZ2h0PSI4IiByeD0iMSI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4LjAwMDAwMCwgOC4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IGZpbGw9IiMzNjM2MzYiIHg9IjAiIHk9IjAiIHdpZHRoPSI1MiIgaGVpZ2h0PSIxOSIgcng9IjEiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IGZpbGw9IiM1MjUyNTIiIHg9IjMiIHk9IjgiIHdpZHRoPSI0NiIgaGVpZ2h0PSIyIj48L3JlY3Q+DQogICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBmaWxsPSIjNTI1MjUyIiB4PSIzIiB5PSIxMyIgd2lkdGg9IjM1IiBoZWlnaHQ9IjIiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxwb2x5Z29uIGZpbGw9IiM2QTZBNkEiIHBvaW50cz0iMiAzIDYgMyA0IDUiPjwvcG9seWdvbj4NCiAgICAgICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgICAgICAgICA8cmVjdCBmaWxsPSIjMzYzNjM2IiB4PSI4IiB5PSI0MSIgd2lkdGg9IjUyIiBoZWlnaHQ9IjgiIHJ4PSIxIj48L3JlY3Q+DQogICAgICAgICAgICAgICAgICAgIDxyZWN0IGZpbGw9IiMzNjM2MzYiIHg9IjgiIHk9IjMwIiB3aWR0aD0iNTIiIGhlaWdodD0iOCIgcng9IjEiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICAgICAgPHBvbHlnb24gZmlsbD0iIzZBNkE2QSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTIuMDAwMDAwLCA0NS4wMDAwMDApIHJvdGF0ZSgtOTAuMDAwMDAwKSB0cmFuc2xhdGUoLTEyLjAwMDAwMCwgLTQ1LjAwMDAwMCkgIiBwb2ludHM9IjEwIDQ0IDE0IDQ0IDEyIDQ2Ij48L3BvbHlnb24+DQogICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgPC9nPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+"},71442:e=>{"use strict";e.exports=l},76117:e=>{"use strict";e.exports=I},79244:e=>{"use strict";e.exports=s},79298:e=>{"use strict";e.exports=a},94390:e=>{e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjY4cHgiIGhlaWdodD0iNDhweCIgdmlld0JveD0iMCAwIDY4IDQ4IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPg0KICAgIDxnIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPg0KICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTI3Ni4wMDAwMDAsIC00ODQuMDAwMDAwKSIgZmlsbD0iIzZBNkE2QSIgZmlsbC1ydWxlPSJub256ZXJvIj4NCiAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDExODAuMDAwMDAwLCAzNi4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5Ni4wMDAwMDAsIDQ0OC4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICAgICAgPGc+DQogICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCB4PSI0IiB5PSI1IiB3aWR0aD0iNjAiIGhlaWdodD0iNCI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgeD0iNCIgeT0iMTMiIHdpZHRoPSI2MCIgaGVpZ2h0PSI0Ij48L3JlY3Q+DQogICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCB4PSI0IiB5PSIyMSIgd2lkdGg9IjYwIiBoZWlnaHQ9IjQiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IHg9IjQiIHk9IjI5IiB3aWR0aD0iMzIiIGhlaWdodD0iNCI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgeD0iNDQiIHk9IjM2IiB3aWR0aD0iMjAiIGhlaWdodD0iOCIgcng9IjQiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICAgICAgPC9nPg0KICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgIDwvZz4NCiAgICAgICAgPC9nPg0KICAgIDwvZz4NCjwvc3ZnPg=="},97896:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M15 1.53V0H1v1.53h.07l5.374 5.288v6.121l2.26 2.224a.5.5 0 0 0 .852-.356V6.825l5.382-5.295zM2 1h12v.049L8.556 6.406l-.001 7.207-1.111-1.093V6.399L2 1.042z" clip-rule="evenodd"></path></svg>'},98640:e=>{"use strict";e.exports=c}},t={};function d(i){var s=t[i];if(void 0!==s)return s.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,d),o.exports}d.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return d.d(t,{a:t}),t},d.d=(e,t)=>{for(var i in t)d.o(t,i)&&!d.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},d.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),d.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.p="";var u={};return d.p=window.jimuConfig.baseUrl,(()=>{"use strict";d.r(u),d.d(u,{__set_webpack_public_path__:()=>ne,default:()=>re});var e,t,i,s=d(67386),o=d(79244),a=d(4108),r=d(79298),n=d(14321),l=d(13089),g=d(71442);!function(e){e.Block="BLOCK",e.Inline="INLINE",e.Popper="POPPER"}(e||(e={})),function(e){e.Toggle="TOGGLE",e.Button="BUTTON"}(t||(t={})),function(e){e.Single="SINGLE",e.Group="GROUP",e.Custom="CUSTOM"}(i||(i={}));var I=d(35809),c=d(45508),p=d.n(c),m=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i};const h=e=>{const t=window.SVG,{className:i}=e,a=m(e,["className"]),r=(0,o.classNames)("jimu-icon jimu-icon-component",i);return t?(0,s.jsx)(t,Object.assign({className:r,src:p()},a)):(0,s.jsx)("svg",Object.assign({className:r},a))},C=(0,o.Immutable)([o.AllDataSourceTypes.FeatureLayer,o.AllDataSourceTypes.SceneLayer,o.AllDataSourceTypes.BuildingComponentSubLayer,o.AllDataSourceTypes.OrientedImageryLayer,o.AllDataSourceTypes.ImageryLayer,o.AllDataSourceTypes.SubtypeGroupLayer,o.AllDataSourceTypes.SubtypeSublayer]);class A extends o.React.PureComponent{constructor(e){super(e),this.dsManager=(window&&window.jimuConfig&&window.jimuConfig.isBuilder,o.DataSourceManager.getInstance()),this.showSqlExprPopup=()=>{this.setState({isSqlExprShow:!0})},this.toggleSqlExprPopup=()=>{this.setState({isSqlExprShow:!this.state.isSqlExprShow})},this.nameChange=e=>{const t=e.target.value;this.setState({itemLabel:t})},this.nameAccept=e=>{(e=""===(e=null==e?void 0:e.trim())?this.props.name:e)!==this.state.itemLabel&&this.setState({itemLabel:e}),this.props.optionChange("name",e)},this.autoApplyChange=()=>{this.props.optionChange("autoApplyWhenWidgetOpen",!this.props.autoApplyWhenWidgetOpen)},this.collapseChange=()=>{this.props.optionChange("collapseFilterExprs",!this.props.collapseFilterExprs)},this.getSelectedDss=()=>{const e=[],t=this.props.sqlExprObjForGroup||this.props.useDataSources;return null==t||t.forEach(t=>{this.props.dataSources[t.dataSourceId]&&e.push(this.props.dataSources[t.dataSourceId])}),e},this.getMainDsLabelTips=e=>{const{sqlExprObjForGroup:t,i18nMessage:i}=this.props;if(!t||!e)return null;let o=[e.getLabel(),i("default")];if(e.isDataView){const t="selection"===e.dataViewId?i("selectionDataView"):e.getLabel();o=[e.getMainDataSource().getLabel(),t]}const a=i("mainValue",{value:o.join(" | ")});return(0,s.jsx)(r.SettingRow,{label:a,truncateLabel:!0,flow:"wrap",className:"font-italic"})},this.disableRemove=(e,t)=>{if(!e&&(null==t?void 0:t.length)>1){const e=t.map(e=>e.mainDataSourceId);return 1===Array.from(new Set(e)).length}return!0},this.state={isSqlExprShow:!1,itemLabel:this.props.name||""}}componentDidUpdate(e,t){this.props.name!==e.name&&this.setState({itemLabel:this.props.name||""})}render(){const{useDataSources:e,type:t,sqlExprObj:a,sqlExprObjForGroup:c,i18nMessage:p}=this.props,d=this.getSelectedDss(),u=void 0===e||d.length!==(null==e?void 0:e.length);return(0,s.jsx)("div",{className:"w-100 h-100",css:(m=this.props.theme,o.css`
    .filter-item-panel{
      .setting-header {
        padding: ${o.polished.rem(10)} ${o.polished.rem(16)} ${o.polished.rem(0)} ${o.polished.rem(16)}
      }

      .setting-title {
        font-size: ${o.polished.rem(16)};
        .filter-item-label{
          color: ${m.ref.palette.neutral[1e3]};
        }
      }

      .setting-container {
        .title-desc{
          color: ${m.ref.palette.neutral[800]};
        }
      }
    }
  `),children:(0,s.jsx)("div",{className:"w-100 h-100 filter-item-panel",children:(0,s.jsxs)("div",{className:"setting-container",children:[(0,s.jsx)(r.SettingSection,{className:"pt-0",title:(0,s.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,s.jsx)("div",{className:"text-truncate",children:p("data")}),t===i.Group&&(0,s.jsx)(n.Tooltip,{showArrow:!0,placement:"bottom",title:p("dsRemoveTips"),children:(0,s.jsx)(n.Button,{icon:!0,type:"tertiary",size:"sm",className:"ml-2 p-0 jimu-outline-inside",disableHoverEffect:!0,disableRipple:!0,children:(0,s.jsx)(h,{})})})]}),children:(0,s.jsx)(r.SettingRow,{children:(0,s.jsx)(l.DataSourceSelector,{types:C,useDataSources:(null==e?void 0:e.length)>0&&d[0]?(0,o.Immutable)(e.map(e=>e.asMutable({deep:!0}))):(0,o.Immutable)([]),mustUseDataSource:!0,onChange:this.props.dataSourceChange,closeDataSourceListOnChange:t===i.Single,isMultiple:t!==i.Single,isBatched:t===i.Custom,hideTabs:t===i.Single?null:(0,o.Immutable)(["OUTPUT"]),disableDataView:t===i.Custom,isMultipleDataView:t===i.Group,disableRemove:()=>this.disableRemove(t===i.Single,e)})})}),(0,s.jsx)(r.SettingSection,{title:p("label"),children:(0,s.jsx)(r.SettingRow,{children:(0,s.jsx)(n.TextInput,{size:"sm",type:"text",className:"w-100",value:this.state.itemLabel,onChange:this.nameChange,onAcceptValue:this.nameAccept,"aria-label":p("label")})})}),(0,s.jsx)(r.SettingSection,{children:(0,s.jsx)(r.SettingRow,{role:"group",label:this.props.intl.formatMessage({id:"icon",defaultMessage:o.defaultMessages.icon}),"aria-label":this.props.intl.formatMessage({id:"icon",defaultMessage:o.defaultMessages.icon}),children:(0,s.jsx)(I.IconPicker,{icon:this.props.icon?this.props.icon:null,customIcons:this.props.customIcons,onChange:e=>{this.props.optionChange("icon",e)},configurableOption:"none",setButtonUseColor:!1})})}),t!==i.Custom&&(0,s.jsxs)(o.React.Fragment,{children:[(0,s.jsxs)(r.SettingSection,{title:p("sqlExpr"),role:"group","aria-label":p("sqlExpr"),children:[(0,s.jsx)(r.SettingRow,{label:p(t===i.Group?"addSqlExprForGroup":"addSqlExprForFilter"),flow:"wrap"}),(0,s.jsx)("div",{id:"sql-expr-desc",className:"sr-only",children:p(t===i.Group?"addSqlExprForGroup":"addSqlExprForFilter")}),(0,s.jsx)(r.SettingRow,{children:(0,s.jsx)("div",{className:"d-flex justify-content-between w-100 align-items-center",children:(0,s.jsx)(n.Button,{className:"w-100 set-link-btn",type:u?"secondary":"primary",disabled:u,onClick:this.showSqlExprPopup,title:p(t===i.Group?"sqlExpressionBuilderForGroup":"sqlExpressionBuilder"),"aria-describedby":"sql-expr-desc",children:(0,s.jsx)("div",{className:"w-100 px-2 text-truncate",children:p(t===i.Group?"sqlExpressionBuilderForGroup":"sqlExpressionBuilder")})})})}),t===i.Group?this.getMainDsLabelTips(null==d?void 0:d[0]):(0,s.jsx)(r.SettingRow,{children:(0,s.jsx)(n.TextArea,{height:80,className:"w-100",spellCheck:!1,placeholder:p("addSqlExprFirst"),value:o.dataSourceUtils.getArcGISSQL(a,d[0]).displaySQL,onClick:e=>{e.currentTarget.select()},readOnly:!0})})]}),(0,s.jsxs)(r.SettingSection,{role:"group",className:"border-0",title:p("options"),"aria-label":p("options"),children:[(0,s.jsx)(r.SettingRow,{tag:"label",label:p("autoApplyWhenWidgetOpen"),children:(0,s.jsx)(n.Switch,{checked:!!this.props.autoApplyWhenWidgetOpen,onChange:this.autoApplyChange})}),(0,s.jsx)(r.SettingRow,{tag:"label",label:p("collapseFilterExprs"),children:(0,s.jsx)(n.Switch,{checked:!!this.props.collapseFilterExprs,onChange:this.collapseChange})})]}),!u&&t===i.Single&&(0,s.jsx)(g.SqlExpressionBuilderPopup,{dataSource:d[0],isOpen:this.state.isSqlExprShow,toggle:this.toggleSqlExprPopup,expression:a,onChange:this.props.onSqlExprBuilderChange}),!u&&t===i.Group&&(0,s.jsx)(g.GroupSqlExpressionBuilderPopup,{dataSources:d,isOpen:this.state.isSqlExprShow,toggle:this.toggleSqlExprPopup,expression:c,onChange:this.props.onGroupSqlExprBuilderChange})]})]})})});var m}}var S=d(76117);class x extends o.React.PureComponent{constructor(){super(...arguments),this.onDataSourceCreated=e=>{this.props.onCreateDataSourceCreatedOrFailed(this.props.useDataSource.dataSourceId,e)},this.onCreateDataSourceFailed=()=>{this.props.onCreateDataSourceCreatedOrFailed(this.props.useDataSource.dataSourceId,null)}}render(){return(0,s.jsx)(o.DataSourceComponent,{useDataSource:this.props.useDataSource,onDataSourceCreated:this.onDataSourceCreated,onCreateDataSourceFailed:this.onCreateDataSourceFailed})}}var y=d(98640);const j=e=>{const{omitInternalStyle:t,filterItems:s}=e;if(!t||0===s.length)return!0;let a=!1;return s.some(e=>(a=e.type===i.Custom||(e.type===i.Single?!e.sqlExprObj||1!==(0,S.getShownClauseNumberByExpression)(e.sqlExprObj):!e.sqlExprObjForGroup||e.sqlExprObjForGroup[0].clause.displayType===o.ClauseDisplayType.None),a)),a},w=(e,t)=>{let i=null;return o.dataSourceUtils.getSortedDataViewIds(t.mainDataSourceId).some(s=>e.some(e=>e.dataSourceId===s&&e.dataSourceId!==t.dataSourceId&&(i=e,!0))),i},D=(e,t,i)=>{let s=i;const a=M(e,t);return v(a,t,i)&&i.some((e,r)=>e.dataSourceId===t&&(s=i.set(r,(0,o.Immutable)(e).set("fields",a)),!0)),s},b=(e,t,i)=>{let s=i;return t.forEach(t=>{const i=D(e,t.dataSourceId,s);i&&(s=i)}),s},f=(e,t,i)=>{let s=i;return t.forEach(t=>{const i=N(e,t.dataSourceId,s);i&&(s=i)}),s},M=(e,t)=>{let i=[];return e.forEach(e=>{e.useDataSources.some(e=>!(e.dataSourceId!==t||!e.fields)&&(i=i.concat(e.fields),!0))}),i=Array.from(new Set(i)).sort(),i},v=(e,t,i)=>{var s,o;const a=(null===(o=null===(s=i.filter(e=>t===e.dataSourceId)[0])||void 0===s?void 0:s.fields)||void 0===o?void 0:o.asMutable({deep:!0}))||[];return JSON.stringify(e)!==JSON.stringify(a)},N=(e,t,i)=>P(e,t)?D(e,t,i):i.filter(e=>e.dataSourceId!==t),P=(e,t)=>{let i=!1;return e.some(e=>e.useDataSources.filter(e=>e.dataSourceId===t).length>0&&(i=!0,!0)),i};var T=d(41496),O=d(31027),G=d.n(O),E=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i};const B=e=>{const t=window.SVG,{className:i}=e,a=E(e,["className"]),r=(0,o.classNames)("jimu-icon jimu-icon-component",i);return t?(0,s.jsx)(t,Object.assign({className:r,src:G()},a)):(0,s.jsx)("svg",Object.assign({className:r},a))};var Z=d(62838),F=d.n(Z),z=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i};const L=e=>{const t=window.SVG,{className:i}=e,a=z(e,["className"]),r=(0,o.classNames)("jimu-icon jimu-icon-component",i);return t?(0,s.jsx)(t,Object.assign({className:r,src:F()},a)):(0,s.jsx)("svg",Object.assign({className:r},a))};var H=d(23662),W=d.n(H),R=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i};const k=e=>{const t=window.SVG,{className:i}=e,a=R(e,["className"]),r=(0,o.classNames)("jimu-icon jimu-icon-component",i);return t?(0,s.jsx)(t,Object.assign({className:r,src:W()},a)):(0,s.jsx)("svg",Object.assign({className:r},a))};var Q=d(30655),J=d.n(Q),U=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i};const V=e=>{const t=window.SVG,{className:i}=e,a=U(e,["className"]),r=(0,o.classNames)("jimu-icon jimu-icon-component",i);return t?(0,s.jsx)(t,Object.assign({className:r,src:J()},a)):(0,s.jsx)("svg",Object.assign({className:r},a))};var q=d(9869),Y=d.n(q),K=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i};const _=e=>{const t=window.SVG,{className:i}=e,a=K(e,["className"]),r=(0,o.classNames)("jimu-icon jimu-icon-component",i);return t?(0,s.jsx)(t,Object.assign({className:r,src:Y()},a)):(0,s.jsx)("svg",Object.assign({className:r},a))};var X=function(e,t,i,s){return new(i||(i=Promise))(function(o,a){function r(e){try{l(s.next(e))}catch(e){a(e)}}function n(e){try{l(s.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,n)}l((s=s.apply(e,t||[])).next())})};const $=d(97896),ee=d(37378),te=d(12204),ie=Object.assign({},{selectTemplateTip:"Select a template",selectAnotherTemplateTip:"Select another template",filtersDesc:"Add new filters, groups, or custom filters and customize the options.",newFilter:"New filter",customFilter:"Custom filter",customFilterName:"Custom filter {num}",newCustomFilter:"New custom filter",setFilterItem:"Create new filter",setFilterItemForGroup:"Create new group",setFilterItemForCustom:"Create new custom filter",dsRemoveTips:"Removing all the main field associated data views will reset all SQL expressions for the group.",autoApplyWhenWidgetOpen:"Apply this filter automatically",collapseFilterExprs:"Collapse filter details (if any) automatically",arrangeAndStyle:"Arrangement style",activationMethods:"Activation style",toggleTooltip:"Toggle switch",buttonTooltip:"Button",omitInternalStyle:"Exclude activation styles for single clause",omitInternalStyleTip:"If there is only one clause in each filter, and it is asking for values (or displaying label), this option allows you to exclude the activation styles (along with the label and the icon), display the clause content directly, and auto-apply it.",wrapFilters:"Wrap items",advancedTools:"Advanced tools",blankStatusMsg:'Click the "New filter", "New group", or "New custom filter" button to add and configure filters.',i18nFilterItemLabel:"Item label"},o.defaultMessages,n.defaultMessages),se=(0,o.Immutable)({svg:$,properties:{color:"",filename:"",originalName:"filter.svg",inlineSvg:!0,size:14}}),oe=(0,o.Immutable)({svg:ee,properties:{color:"",filename:"",originalName:"filter-group.svg",inlineSvg:!0,size:14}}),ae=(0,o.Immutable)({svg:te,properties:{color:"",filename:"",originalName:"filter-custom.svg",inlineSvg:!0,size:14}});class re extends o.React.PureComponent{constructor(l){super(l),this.sidePopperTrigger=o.React.createRef(),this.i18nMessage=(e,t)=>this.props.intl.formatMessage({id:e,defaultMessage:ie[e]},t),this.onShowFilterItemPanel=(e,t,i)=>{this.settSidePopperAnchor(e,t),e===this.index?this.setState({showFilterItemPanel:!this.state.showFilterItemPanel}):(this.setState({showFilterItemPanel:!0,refreshFilterItemPanel:!this.state.refreshFilterItemPanel}),this.index=e),this.setState({typeForItemPanel:i})},this.settSidePopperAnchor=(e,t=!1)=>{let i;i=t?this.sidePopperTrigger.current.getElementsByClassName("add-filter-btn")[0]:this.sidePopperTrigger.current.getElementsByClassName("jimu-tree-item__body")[e],this.setState({popperFocusNode:i})},this.onCloseFilterItemPanel=()=>{this.setState({showFilterItemPanel:!1}),this.index=0},this.updateConfigForOptions=(e,t,i)=>{const s={id:this.props.id,config:this.props.config.set(e,t)};this.onSettingChange(s,i)},this.onSettingChange=(e,t=!0)=>{if(t){const t=j(e.config);e.config=e.config.set("turnOffAll",!!e.config.turnOffAll&&t)}this.props.onSettingChange(e)},this.duplicateFilterItem=e=>{const t=this.props.config.filterItems.asMutable({deep:!0});t.push(t[e]);const i={id:this.props.id,config:this.props.config.set("filterItems",t)};this.onSettingChange(i)},this.removeFilterItem=e=>{this.index===e&&this.onCloseFilterItemPanel();const t=this.props.config.filterItems.asMutable({deep:!0});t.splice(e,1);const i=this.props.config.set("filterItems",t),s={id:this.props.id,config:i},o=this.props.config.filterItems[e];s.useDataSources=f(t,o.useDataSources,this.props.useDataSources),this.onSettingChange(s),this.index>e&&this.index--},this.optionChangeForFI=(e,t)=>{if(this.props.config.filterItems[this.index]){const i=this.props.config.filterItems.asMutable({deep:!0}),s=(0,o.Immutable)(i[this.index]).set(e,t);i.splice(this.index,1,s.asMutable({deep:!0}));const a={id:this.props.id,config:this.props.config.set("filterItems",i)};this.onSettingChange(a,!1)}},this.optionChangeByDrag=e=>{const t={id:this.props.id,config:this.props.config.set("filterItems",e)};this.onSettingChange(t,!1)},this.getDataSourcesByUseDss=e=>e.map(e=>this.state.dataSources[e.dataSourceId]),this.removeDsForGroupFilterItem=e=>{var t;const s=this.props.config.filterItems,a=s[this.index],r=(null==a?void 0:a.type)===i.Group&&a.useDataSources.length>e.length;if(!r)return!1;let n,l=null,g=!0;const I=e.map(e=>e.dataSourceId),c=a.useDataSources.filter(e=>!I.includes(e.dataSourceId));if(a.sqlExprObjForGroup)if(g=void 0===c.find(e=>e.dataSourceId===a.sqlExprObjForGroup[0].dataSourceId),g)l=(0,S.getUpdatedGroupExpression)(a.sqlExprObjForGroup,c,!1),n=e;else{if(e.filter(e=>e.mainDataSourceId===c[0].mainDataSourceId).length>0){const i=w(e,c[0]),s=(null===(t=i.fields)||void 0===t?void 0:t.length)>0?i.fields:a.sqlExprObjForGroup[0].fieldList;l=[{fieldList:s,dataSourceId:i.dataSourceId,logicalOperator:a.sqlExprObjForGroup.find(e=>e.dataSourceId===i.dataSourceId).logicalOperator,clause:Object.assign(Object.assign({},a.sqlExprObjForGroup[0].clause),{jimuFieldName:s[0]})},...a.sqlExprObjForGroup.slice(1).filter(e=>e.dataSourceId!==i.dataSourceId)],n=e.map(e=>e.dataSourceId===i.dataSourceId?Object.assign(Object.assign({},i),{fields:s}):e)}else n=e.map(e=>(0,o.Immutable)(e).without("fields"))}else n=e;const p=a.set("sqlExprObjForGroup",l).set("useDataSources",n).set("icon",g?a.icon:this.getIconResultByType(i.Group)).set("autoApplyWhenWidgetOpen",!!g&&a.autoApplyWhenWidgetOpen).set("collapseFilterExprs",!!g&&a.collapseFilterExprs),d=s.set(this.index,p),u={id:this.props.id,config:this.props.config.set("filterItems",d)};return u.useDataSources=b(d,(0,o.Immutable)(n),this.props.useDataSources),u.useDataSources=f(d,(0,o.Immutable)(c),u.useDataSources),this.onSettingChange(u,!1),r},this.getIconResultByType=e=>{let t=this.state.filterIconResult;return e===i.Group?t=this.state.filterIconResultForGroup:e===i.Custom&&(t=this.state.filterIconResultForCustom),t},this.getIconByType=e=>{let t=$;return e===i.Group?t=ee:e===i.Custom&&(t=te),t},this.getTitleByType=e=>{let t="setFilterItem";return e===i.Group?t="setFilterItemForGroup":e===i.Custom&&(t="setFilterItemForCustom"),this.i18nMessage(t)},this.dataSourceChangeForFI=e=>X(this,void 0,void 0,function*(){if(!e)return;if(this.removeDsForGroupFilterItem(e))return;const t=this.props.config.filterItems,s=t[this.index],a=this.state.typeForItemPanel;let r;if(a===i.Single){r=(yield this.dsManager.createDataSourceByUseDataSource((0,o.Immutable)(e[0]))).getLabel()}else r=((e,t,s,a)=>{let r;if(t)r=t.name;else{let t=1;const n=s===i.Group?"groupName":"customFilterName";if(e){const i=[];e.filter(e=>e.type===s).forEach(e=>{const t=a(n,{num:""}).trim(),[s,r]=o.appConfigUtils.parseUniqueLabel(e.name);t===s&&r&&i.push(r)}),i.length&&(t=Math.max(...i)+1)}r=a(n,{num:t})}return r})(t,s,a,this.i18nMessage);let n,l={type:a,name:r,useDataSources:e.map(e=>(0,o.Immutable)(e))};if(a===i.Group){const t=null==s?void 0:s.useDataSources.find(e=>{var t;return e.dataSourceId===(null===(t=s.sqlExprObjForGroup)||void 0===t?void 0:t[0].dataSourceId)}),i=(null==s?void 0:s.useDataSources.map(e=>e.dataSourceId))||[],r=e.find(e=>!i.includes(e.dataSourceId)),n=e.length>1?((e,t,i)=>{if(!t)return null;let s;if(i.mainDataSourceId===t.mainDataSourceId)s=t.fields;else{const t=w(e,i);s=(null==t?void 0:t.fields)||null}return s})(e,t,r):null;l=Object.assign(Object.assign({},l),{icon:s?s.icon:this.getIconResultByType(a),sqlExprObjForGroup:(0,S.getUpdatedGroupExpression)(null==s?void 0:s.sqlExprObjForGroup,[r],!0,n),autoApplyWhenWidgetOpen:(null==s?void 0:s.autoApplyWhenWidgetOpen)||!1,collapseFilterExprs:(null==s?void 0:s.collapseFilterExprs)||!1,useDataSources:n?e.map(e=>e.dataSourceId===r.dataSourceId?o.Immutable.set(e,"fields",n):(0,o.Immutable)(e)):l.useDataSources})}else a===i.Single&&(l=s&&o.dataSourceUtils.areDerivedFromSameMain(s.useDataSources[0].dataSourceId,e[0].dataSourceId)?Object.assign(Object.assign({},l),{icon:s.icon,sqlExprObj:s.sqlExprObj,autoApplyWhenWidgetOpen:s.autoApplyWhenWidgetOpen,collapseFilterExprs:s.collapseFilterExprs}):Object.assign(Object.assign({},l),{icon:this.getIconResultByType(a),sqlExprObj:null,autoApplyWhenWidgetOpen:!1,collapseFilterExprs:!1}));if(s){const e=t.asMutable({deep:!0});e.splice(this.index,1,l),n=(0,o.Immutable)(e)}else n=t.concat((0,o.Immutable)([l]));const g={id:this.props.id,config:this.props.config.set("filterItems",n)};g.useDataSources=((e,t,s,a)=>{let r=s||(0,o.Immutable)([]);if(a)if(a.type===i.Group)a.useDataSources.forEach(t=>{r=D(e,t.dataSourceId,r)});else{const t=a.useDataSources[0].dataSourceId;r=N(e,t,s)}return t.forEach(e=>{r.filter(t=>e.dataSourceId===t.dataSourceId).length>0||(r=r.concat(e))}),r})(n,e,this.props.useDataSources,s),this.onSettingChange(g,this.state.typeForItemPanel!==i.Custom)}),this.sqlExprBuilderChange=e=>{var t;let i=[];(null===(t=null==e?void 0:e.parts)||void 0===t?void 0:t.length)>0?i=(0,S.getJimuFieldNamesBySqlExpression)(e):e=null;const s=this.props.config.filterItems[this.index].useDataSources[0],a=[Object.assign(Object.assign({},s),{fields:i})],r=this.props.config.filterItems.asMutable({deep:!0}),n=Object.assign({},r[this.index],{sqlExprObj:e,useDataSources:a});r.splice(this.index,1,n);const l={id:this.props.id,config:this.props.config.set("filterItems",(0,o.Immutable)(r))};l.useDataSources=D(r,a[0].dataSourceId,this.props.useDataSources),this.onSettingChange(l)},this.groupSqlExprBuilderChange=e=>{const t=this.props.config.filterItems[this.index],i=[];e.forEach((s,o)=>{t.useDataSources.some(t=>t.dataSourceId===s.dataSourceId&&(i.push(t.set("fields",e[o].fieldList)),!0))});const s=this.props.config.filterItems.set(this.index,t.set("sqlExprObjForGroup",e).set("useDataSources",i)),o={id:this.props.id,config:this.props.config.set("filterItems",s)};o.useDataSources=b(s,t.useDataSources,this.props.useDataSources),this.onSettingChange(o)},this.getDataSourceById=(e,t)=>{const i=e.filter(e=>e.dataSourceId===t);return(0,o.Immutable)(i[0])},this.changeAndOR=e=>{this.updateConfigForOptions("logicalOperator",e,!1)},this.changeUseWrap=e=>{this.updateConfigForOptions("wrap",e,!1)},this.changeArrangeType=t=>{const{arrangeType:i}=this.props.config;t!==i&&(this.updateConfigForOptions("arrangeType",t,!1),this.updateSizeByType(i,t)),this.props.controllerWidgetId&&(0,a.getAppConfigAction)().editWidgetProperty(this.props.id,"offPanel",t===e.Popper).exec()},this.querySelector=e=>{var t;const i=document.querySelector(`iframe[name="${o.APP_FRAME_NAME_IN_BUILDER}"]`);if(i){return(null!==(t=i.contentDocument)&&void 0!==t?t:i.contentWindow.document).querySelector(e)}return null},this.updateSizeByType=(t,i)=>{var s,r,n;if(t!==e.Popper&&i!==e.Popper)return;const l=(0,o.getAppStore)().getState().appStateInBuilder,g=null===(s=null==l?void 0:l.appRuntimeInfo)||void 0===s?void 0:s.selection,I=null===(r=l.appConfig.layouts)||void 0===r?void 0:r[null==g?void 0:g.layoutId],c=null===(n=null==I?void 0:I.content)||void 0===n?void 0:n[null==g?void 0:g.layoutItemId];if(!I||!c)return;let p,d=null;if(i===e.Popper)p=T.LayoutItemSizeModes.Auto;else{p=T.LayoutItemSizeModes.Custom;const e=`div.layout[data-layoutid=${g.layoutId}]`,t=this.querySelector(e),{clientWidth:i=100}=t||{};d=35e3/i+"%"}(0,a.getAppConfigAction)().editLayoutItemProperty(g,"setting.autoProps",{width:p,height:T.LayoutItemSizeModes.Auto}).editLayoutItemProperty(g,"bbox",c.bbox.set("width",d)).exec()},this.changeTriggerType=e=>{this.updateConfigForOptions("triggerType",e,!1)},this.changeOmitInternalStyle=e=>{this.updateConfigForOptions("omitInternalStyle",e,!0)},this.onCreateDataSourceCreatedOrFailed=(e,t)=>{this.setState(i=>{const s=Object.assign({},i.dataSources);return s[e]=t,{dataSources:s}})},this.isDataSourceCreated=e=>null!==this.state.dataSources[e]&&this.props.useDataSources.filter(t=>e===t.dataSourceId).length>0,this.CreateFilterItemElement=(e,t)=>{var i;return(0,s.jsxs)("div",{className:"filter-item align-items-center",children:[e.icon&&(0,s.jsx)("div",{className:"filter-item-icon",children:(0,s.jsx)(n.Icon,{icon:e.icon.svg,size:14})}),(0,s.jsx)("div",{className:"filter-item-name flex-grow-1",children:e.name}),!this.isDataSourceCreated(null===(i=this.props.config.filterItems[t])||void 0===i?void 0:i.useDataSources[0].dataSourceId)&&(0,s.jsx)(n.Alert,{variant:"text",form:"tooltip",size:"small",type:"error",text:this.i18nMessage("dataSourceCreateError")}),(0,s.jsx)(n.Button,{size:"sm",type:"tertiary",icon:!0,disableRipple:!0,disableHoverEffect:!0,className:"p-0 ml-2 mr-2 flex-shrink-0",title:this.i18nMessage("duplicate"),"aria-label":this.i18nMessage("duplicate"),onClick:e=>{e.stopPropagation(),this.duplicateFilterItem(t)},onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.stopPropagation())},onKeyUp:e=>{"Enter"!==e.key&&" "!==e.key||(e.stopPropagation(),this.duplicateFilterItem(t))},children:(0,s.jsx)(_,{})}),(0,s.jsx)(n.Button,{size:"sm",type:"tertiary",icon:!0,disableRipple:!0,disableHoverEffect:!0,className:"p-0 flex-shrink-0",title:this.i18nMessage("delete"),"aria-label":this.i18nMessage("delete"),onClick:e=>{e.stopPropagation(),this.removeFilterItem(t)},onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.stopPropagation())},onKeyUp:e=>{"Enter"!==e.key&&" "!==e.key||(e.stopPropagation(),this.removeFilterItem(t))},children:(0,s.jsx)(L,{})})]},t)},this.createFilterItems=e=>(0,s.jsxs)("div",{className:"filter-items-container "+(this.props.config.filterItems.length>1?"mt-2":"mt-4"),children:[(0,s.jsx)(y.List,{className:"setting-ui-unit-list",itemsJson:this.props.config.filterItems.asMutable().map((e,t)=>({itemStateDetailContent:e,itemKey:`${t}`,itemStateChecked:this.state.showFilterItemPanel&&this.index===t})),dndEnabled:!0,onDidDrop:(e,t)=>{const{itemJsons:[,i]}=t.props;this.optionChangeByDrag(i.map(e=>e.itemStateDetailContent))},onClickItemBody:(e,t)=>{const{itemJsons:i}=t.props,s=i[0],o=i[1].indexOf(s);this.onShowFilterItemPanel(o,!1,this.props.config.filterItems[o].type)},overrideItemBlockInfo:({itemBlockInfo:e})=>({name:y.TreeItemActionType.RenderOverrideItem,children:[{name:y.TreeItemActionType.RenderOverrideItemDroppableContainer,children:[{name:y.TreeItemActionType.RenderOverrideItemDraggableContainer,children:[{name:y.TreeItemActionType.RenderOverrideItemBody,children:[{name:y.TreeItemActionType.RenderOverrideItemDragHandle},{name:y.TreeItemActionType.RenderOverrideItemMainLine}]}]}]}]}),renderOverrideItemMainLine:(e,t)=>{const{itemJsons:i}=t.props,s=i[0],o=i[1];return this.CreateFilterItemElement(s.itemStateDetailContent,o.indexOf(s))}}),e&&(0,s.jsx)(y.List,{className:"mt-1",itemsJson:[{itemKey:this.index+"",itemStateChecked:!0,itemStateIcon:()=>({icon:this.getIconByType(this.state.typeForItemPanel),size:14}),itemStateTitle:"......",itemStateCommands:[]}],dndEnabled:!1,isItemFocused:()=>!0,overrideItemBlockInfo:e=>({name:y.TreeItemActionType.RenderOverrideItem,children:[{name:y.TreeItemActionType.RenderOverrideItemDroppableContainer,children:[{name:y.TreeItemActionType.RenderOverrideItemDraggableContainer,children:[{name:y.TreeItemActionType.RenderOverrideItemBody,children:[{name:y.TreeItemActionType.RenderOverrideItemMainLine,children:[{name:y.TreeItemActionType.RenderOverrideItemDragHandle},{name:y.TreeItemActionType.RenderOverrideItemIcon},{name:y.TreeItemActionType.RenderOverrideItemTitle}]}]}]}]}]})})]}),this.getArrangementAndActivationContent=()=>{const{arrangeType:i,wrap:o,triggerType:a,omitInternalStyle:l}=this.props.config;return(0,s.jsxs)(r.SettingSection,{className:"arrange-style-container",title:this.i18nMessage("arrangeAndStyle"),role:"radiogroup","aria-label":this.i18nMessage("arrangeAndStyle"),children:[(0,s.jsxs)(r.SettingRow,{className:"arrange_container",children:[(0,s.jsx)(n.Tooltip,{title:this.i18nMessage("vertical"),placement:"bottom",children:(0,s.jsx)(n.Button,{onClick:()=>{this.changeArrangeType(e.Block)},icon:!0,size:"sm",type:"tertiary",role:"radio",active:i===e.Block,"aria-checked":i===e.Block,"aria-label":this.i18nMessage("vertical"),children:(0,s.jsx)(n.Icon,{width:68,height:68,icon:d(70537),autoFlip:!0})})}),(0,s.jsx)(n.Tooltip,{title:this.i18nMessage("horizontal"),placement:"bottom",children:(0,s.jsx)(n.Button,{onClick:()=>{this.changeArrangeType(e.Inline)},icon:!0,size:"sm",type:"tertiary",role:"radio",active:i===e.Inline,"aria-checked":i===e.Inline,"aria-label":this.i18nMessage("horizontal"),children:(0,s.jsx)(n.Icon,{width:68,height:68,icon:d(63369),autoFlip:!0})})}),(0,s.jsx)(n.Tooltip,{title:this.i18nMessage("icon"),placement:"bottom",children:(0,s.jsx)(n.Button,{onClick:()=>{this.changeArrangeType(e.Popper)},icon:!0,size:"sm",type:"tertiary",role:"radio",active:i===e.Popper,"aria-checked":i===e.Popper,"aria-label":this.i18nMessage("icon"),children:(0,s.jsx)(n.Icon,{width:68,height:68,icon:d(39528),autoFlip:!0})})})]}),i===e.Inline&&(0,s.jsx)(r.SettingRow,{tag:"label",label:this.i18nMessage("wrapFilters"),children:(0,s.jsx)(n.Switch,{checked:o,"aria-label":this.i18nMessage("wrapFilters"),onChange:()=>{this.changeUseWrap(!o)}})}),(0,s.jsx)(r.SettingRow,{className:"trigger_container",label:this.i18nMessage("activationMethods"),flow:"wrap",role:"radiogroup","aria-label":this.i18nMessage("activationMethods"),children:[{type:t.Toggle,icon:"toggle"},{type:t.Button,icon:"button"}].map((e,t)=>(0,s.jsx)(n.Tooltip,{title:this.i18nMessage(`${e.icon}Tooltip`),placement:"bottom",children:(0,s.jsx)(n.Button,{onClick:()=>{this.changeTriggerType(e.type)},icon:!0,size:"sm",type:"tertiary",role:"radio",active:e.type===a,"aria-checked":e.type===a,"aria-label":this.i18nMessage(`${e.icon}Tooltip`),children:(0,s.jsx)(n.Icon,{width:70,height:50,icon:d(35636)(`./trigger_${e.icon}.svg`),autoFlip:!0})})},t))}),(0,s.jsxs)(r.SettingRow,{className:"w-100 d-flex justify-content-between",children:[(0,s.jsxs)(n.Label,{children:[(0,s.jsx)(n.Checkbox,{style:{cursor:"pointer",marginTop:"2px"},checked:l,"aria-label":this.i18nMessage("omitInternalStyle"),onChange:()=>{this.changeOmitInternalStyle(!l)}}),(0,s.jsx)("div",{className:"m-0 ml-2 flex-grow-1 omit-label",children:this.i18nMessage("omitInternalStyle")})]}),(0,s.jsx)(n.Tooltip,{title:this.i18nMessage("omitInternalStyleTip"),showArrow:!0,placement:"left",children:(0,s.jsx)(n.Button,{icon:!0,type:"tertiary",disableRipple:!0,disableHoverEffect:!0,size:"sm",className:"ml-2 p-0 flex-shrink-0",children:(0,s.jsx)(h,{})})})]})]})},this.getAdvancedTools=()=>{const{resetAll:e,turnOffAll:t}=this.props.config,i=!j(this.props.config);return(0,s.jsxs)(r.SettingSection,{title:this.i18nMessage("advancedTools"),role:"group","aria-label":this.i18nMessage("advancedTools"),children:[(0,s.jsx)(r.SettingRow,{tag:"label",label:this.i18nMessage("resetAllFilters"),children:(0,s.jsx)(n.Switch,{checked:e,onChange:()=>{this.updateConfigForOptions("resetAll",!e,!1)}})}),(0,s.jsx)(r.SettingRow,{tag:"label",label:this.i18nMessage("turnOffAllFilters"),children:(0,s.jsx)(n.Switch,{checked:t,disabled:i,onChange:()=>{this.updateConfigForOptions("turnOffAll",!t,!1)}})})]})},this.index=0,this.dsManager=o.DataSourceManager.getInstance(),this.state={popperFocusNode:null,showFilterItemPanel:!1,typeForItemPanel:null,refreshFilterItemPanel:!1,dataSources:{},filterIconResult:se.setIn(["properties","filename"],this.i18nMessage("filter")),filterIconResultForGroup:oe.setIn(["properties","filename"],this.i18nMessage("groupFilter")),filterIconResultForCustom:ae.setIn(["properties","filename"],this.i18nMessage("customFilter"))}}render(){var e,t;const{filterItems:a,logicalOperator:l}=this.props.config,g=a.length===this.index&&this.state.showFilterItemPanel,I=a.length>0||g;return(0,s.jsxs)("div",{className:"jimu-widget-setting widget-setting-filter h-100",css:(c=this.props.theme,o.css`
    .and-or-group .max-width-50{
      max-width: 50%;
    }
    .filter-item {
      display: flex;
      flex: 1;
      padding: 0.375rem 0.25rem;
      cursor: pointer;

      .filter-item-icon{
        width: 14px;
        margin-right: 0.5rem;
      }
      .filter-item-name{
        /* word-break: break-word; */
        overflow: hidden;
        text-overflow: ellipsis;
        display: -webkit-box;
        -webkit-box-orient: vertical;
        word-break: break-word;
        -webkit-line-clamp: 2;
        line-height: 1.3;
      }
    }

    .empty-placeholder {
      display: flex;
      flex-flow: column;
      justify-content: center;
      height: calc(100vh - 500px);
      overflow: hidden;
      .empty-placeholder-inner {
        padding: 0px 16px;
        flex-direction: column;
        align-items: center;
        display: flex;

        .empty-placeholder-text {
          color: ${c.ref.palette.neutral[1e3]};
          font-size: ${o.polished.rem(14)};
          margin-top: 16px;
          text-align: center;
        }
        .empty-placeholder-icon {
          color: ${c.ref.palette.neutral[800]};
        }
      }
    }

    .arrange-style-container{

      .arrange_container, .trigger_container{
        margin-top: 10px;
        display: flex;
        justify-content: space-between;
        .jimu-btn {
          padding: 0;
          background: ${c.ref.palette.neutral[300]};
          &.active{
            border: 2px solid ${c.sys.color.primary.light};
          }
        }
      }
      .trigger_container{
        justify-content: flex-start;
        .jimu-btn:last-of-type{
          margin-left: 0.5rem;
        }
      }

      .omit-label{
        color: ${c.ref.palette.neutral[900]};
      }
    }

    .options-container {
      .use-wrap{
        .jimu-widget-setting--row-label{
          margin-right: 5px;
        }
      }
    }
  `),children:[null===(e=this.props.useDataSources)||void 0===e?void 0:e.map((e,t)=>(0,s.jsx)(x,{useDataSource:e,onCreateDataSourceCreatedOrFailed:this.onCreateDataSourceCreatedOrFailed},t)),(0,s.jsx)(r.SettingSection,{className:I?"":"border-0",role:"group",children:(0,s.jsxs)("div",{ref:this.sidePopperTrigger,children:[(0,s.jsx)(r.SettingRow,{label:(0,s.jsx)("span",{id:"newFilterDesc",children:this.i18nMessage("filtersDesc")}),flow:"wrap"}),(0,s.jsxs)(r.SettingRow,{className:"mt-2",children:[(0,s.jsx)(n.Button,{type:"primary",className:"w-100 text-default add-filter-btn flex-shrink-1","aria-label":this.i18nMessage("newFilter"),"aria-describedby":"newFilterDesc filter-blank-msg",onClick:()=>{this.onShowFilterItemPanel(a.length,!0,i.Single)},children:(0,s.jsxs)("div",{className:"w-100 px-2 text-truncate",children:[(0,s.jsx)(k,{className:"mr-1"}),this.i18nMessage("newFilter")]})}),(0,s.jsxs)(n.Dropdown,{className:"ml-1",children:[(0,s.jsx)(n.DropdownButton,{icon:!0,arrow:!1,type:"primary",title:this.i18nMessage("newGroup"),children:(0,s.jsx)(V,{className:"group-dropdown-icon"})}),(0,s.jsxs)(n.DropdownMenu,{children:[(0,s.jsx)(n.DropdownItem,{a11yFocusBack:!1,onClick:()=>{this.onShowFilterItemPanel(a.length,!0,i.Group)},children:(0,s.jsxs)("div",{children:[(0,s.jsx)(k,{className:"group-plus-icon mr-2"}),this.i18nMessage("newGroup")]})}),(0,s.jsx)(n.DropdownItem,{a11yFocusBack:!1,onClick:()=>{this.onShowFilterItemPanel(a.length,!0,i.Custom)},children:(0,s.jsxs)("div",{children:[(0,s.jsx)(k,{className:"group-plus-icon mr-2"}),this.i18nMessage("newCustomFilter")]})})]})]})]}),I&&(0,s.jsxs)(o.React.Fragment,{children:[a.length>1&&(0,s.jsx)(r.SettingRow,{children:(0,s.jsxs)(n.AdvancedButtonGroup,{className:"w-100 and-or-group",children:[(0,s.jsx)(n.Button,{onClick:()=>{this.changeAndOR(o.ClauseLogic.And)},className:"btn-secondary max-width-50",size:"sm",active:l===o.ClauseLogic.And,children:(0,s.jsx)("div",{className:"text-truncate",children:this.i18nMessage("and")})}),(0,s.jsx)(n.Button,{onClick:()=>{this.changeAndOR(o.ClauseLogic.Or)},className:"btn-secondary max-width-50",size:"sm",active:l===o.ClauseLogic.Or,children:(0,s.jsx)("div",{className:"text-truncate",children:this.i18nMessage("or")})})]})}),this.createFilterItems(g)]})]})}),a.length>0?(0,s.jsxs)(o.React.Fragment,{children:[this.getArrangementAndActivationContent(),this.getAdvancedTools()]}):(0,s.jsx)(o.React.Fragment,{children:g||window.isExpressBuilder?null:(0,s.jsx)("div",{className:"empty-placeholder w-100",children:(0,s.jsxs)("div",{className:"empty-placeholder-inner",children:[(0,s.jsx)("div",{className:"empty-placeholder-icon",children:(0,s.jsx)(B,{size:48})}),(0,s.jsx)("div",{className:"empty-placeholder-text",id:"filter-blank-msg",children:this.i18nMessage("blankStatusMsg")})]})})}),(0,s.jsx)(r.SidePopper,{position:"right",title:this.getTitleByType(this.state.typeForItemPanel),isOpen:this.state.showFilterItemPanel&&!o.urlUtils.getAppIdPageIdFromUrl().pageId,trigger:null===(t=this.sidePopperTrigger)||void 0===t?void 0:t.current,backToFocusNode:this.state.popperFocusNode,toggle:this.onCloseFilterItemPanel,children:(0,s.jsx)(A,Object.assign({},a[this.index],{type:this.state.typeForItemPanel,intl:this.props.intl,theme:this.props.theme,customIcons:[this.getIconResultByType(this.state.typeForItemPanel).asMutable({deep:!0})],dataSources:this.state.dataSources,dataSourceChange:this.dataSourceChangeForFI,optionChange:this.optionChangeForFI,onSqlExprBuilderChange:this.sqlExprBuilderChange,onGroupSqlExprBuilderChange:this.groupSqlExprBuilderChange,i18nMessage:this.i18nMessage}))})]});var c}}function ne(e){d.p=e}})(),u})())}}});