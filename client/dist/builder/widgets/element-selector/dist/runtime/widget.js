System.register(["jimu-core","jimu-core/emotion","jimu-for-builder","jimu-layouts/layout-builder","jimu-layouts/layout-runtime","jimu-theme","jimu-ui"],function(e,t){var s={},a={},i={},o={},n={},r={},l={};return{setters:[function(e){s.APP_FRAME_NAME_IN_BUILDER=e.APP_FRAME_NAME_IN_BUILDER,s.AppMode=e.AppMode,s.BrowserSizeMode=e.BrowserSizeMode,s.GuideLevels=e.GuideLevels,s.GuideManager=e.GuideManager,s.LayoutItemType=e.LayoutItemType,s.LayoutParentType=e.LayoutParentType,s.PagePart=e.PagePart,s.React=e.React,s.ReactRedux=e.ReactRedux,s.WidgetType=e.WidgetType,s.classNames=e.classNames,s.createSelector=e.createSelector,s.css=e.css,s.defaultMessages=e.defaultMessages,s.focusElementInKeyboardMode=e.focusElementInKeyboardMode,s.getAppStore=e.getAppStore,s.injectIntl=e.injectIntl,s.isKeyboardMode=e.isKeyboardMode,s.polished=e.polished},function(e){a.jsx=e.jsx,a.jsxs=e.jsxs},function(e){i.getAppConfigAction=e.getAppConfigAction,i.helpUtils=e.helpUtils,i.utils=e.utils},function(e){o.appendItemToApp=e.appendItemToApp},function(e){n.searchUtils=e.searchUtils},function(e){r.styled=e.styled,r.withTheme=e.withTheme},function(e){l.Button=e.Button,l.CollapsablePanel=e.CollapsablePanel,l.Collapse=e.Collapse,l.Icon=e.Icon,l.Label=e.Label,l.Loading=e.Loading,l.LoadingType=e.LoadingType,l.Popper=e.Popper,l.Tab=e.Tab,l.Tabs=e.Tabs,l.TextInput=e.TextInput,l.defaultMessages=e.defaultMessages}],execute:function(){e((()=>{var e={170:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0m-1.27 4.936a6.5 6.5 0 1 1 .707-.707l4.136 4.137a.5.5 0 1 1-.707.707z" clip-rule="evenodd"></path></svg>'},655:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M2.146 4.653a.485.485 0 0 1 .708 0L8 10.24l5.146-5.587a.485.485 0 0 1 .708 0 .54.54 0 0 1 0 .738l-5.5 5.956a.485.485 0 0 1-.708 0l-5.5-5.956a.54.54 0 0 1 0-.738" clip-rule="evenodd"></path></svg>'},1245:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 32 32"><path fill="#000" fill-rule="evenodd" d="M2.596 6.357c.39-.59.944-1.055 1.595-1.337L15.544.094a1.14 1.14 0 0 1 .91 0L30 5.97V23.66a3.6 3.6 0 0 1-.596 1.983 3.65 3.65 0 0 1-1.595 1.337l-11.353 4.927a1.14 1.14 0 0 1-.91 0L2 26.029V8.34a3.6 3.6 0 0 1 .596-1.984m3.419 15.162q.014.024.037.038l9.594 5.351a.72.72 0 0 0 .705 0l9.144-5.103a1 1 0 0 0 .37-.356.95.95 0 0 0 .135-.488v-9.89a.85.85 0 0 0-.122-.438.9.9 0 0 0-.331-.32l-9.497-5.3a.1.1 0 0 0-.104 0l-2.415 1.348a.1.1 0 0 0-.026.025.066.066 0 0 0 .026.092l8.947 4.992c.39.218.716.532.941.91.226.378.345.807.345 1.243v5.514q0 .121-.062.226a.46.46 0 0 1-.172.165l-5.633 3.145a3.9 3.9 0 0 1-1.899.49c-.666 0-1.32-.169-1.898-.49L8.972 19.81a1.46 1.46 0 0 1-.542-.524 1.4 1.4 0 0 1-.198-.715V11.76a.07.07 0 0 1 .07-.068q.018 0 .035.009l7.651 4.268q.076.043.121.117a.3.3 0 0 1 .045.16v2.526q0 .019.009.034a.07.07 0 0 0 .06.033.1.1 0 0 0 .035-.009l1.972-1.1c.28-.156.511-.38.673-.651.161-.27.247-.577.247-.89v-.964c0-.278-.076-.55-.22-.79-.144-.241-.35-.44-.598-.58L9.65 9.011a.89.89 0 0 0-.86 0L6.052 10.54a.104.104 0 0 0-.052.088v10.842q0 .027.015.05" clip-rule="evenodd"></path></svg>'},1496:e=>{"use strict";e.exports=n},1824:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#fff" d="M.586 2.586A2 2 0 0 1 2 2h7a2 2 0 0 1 2 2h-.057c-.34 0-.662.098-.943.272V4a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h7.006c.025.345.123.68.288.978A2 2 0 0 1 9 16H2a2 2 0 0 1-2-2V4a2 2 0 0 1 .586-1.414"></path><path fill="#fff" d="M3.5 13.5A.5.5 0 0 1 4 13h3a.5.5 0 0 1 0 1H4a.5.5 0 0 1-.5-.5M12.5 13a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1z"></path><path fill="#fff" fill-rule="evenodd" d="M11.7 5c-.476 0-.915.219-1.226.578A2 2 0 0 0 10 6.885v7.23a2 2 0 0 0 .474 1.307c.311.36.75.578 1.226.578h2.6c.476 0 .915-.219 1.226-.578A2 2 0 0 0 16 14.115v-7.23a2 2 0 0 0-.474-1.307A1.63 1.63 0 0 0 14.3 5zm-.47 1.233A.63.63 0 0 1 11.7 6h2.6c.16 0 .332.073.47.233a1 1 0 0 1 .23.652v7.23a1 1 0 0 1-.23.652.63.63 0 0 1-.47.233h-2.6a.63.63 0 0 1-.47-.233 1 1 0 0 1-.23-.652v-7.23a1 1 0 0 1 .23-.652" clip-rule="evenodd"></path></svg>'},1888:e=>{"use strict";e.exports=r},2018:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M3 2h10a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1M1 3a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2zm3 2h8V4H4zm8 3H4V7h8zm-8 3h6v-1H4z" clip-rule="evenodd"></path></svg>'},2918:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 32 32"><path fill="#000" d="M2.15 24 19.3 13.974h8.896c.274 0 .52.207.52.489 0 .23-.108.334-.245.411l-8.426 4.744c-.549.31-.739.927-.739 1.388l-.009 2.99H30V6.618a.6.6 0 0 0-.052-.242.6.6 0 0 0-.149-.204.69.69 0 0 0-.482-.17h-10.21L2 15.979v8.019h.15z"></path></svg>'},4064:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M13.854 11.347a.486.486 0 0 1-.708 0L8 5.76l-5.146 5.587a.485.485 0 0 1-.708 0 .54.54 0 0 1 0-.738l5.5-5.956a.485.485 0 0 1 .708 0l5.5 5.956a.54.54 0 0 1 0 .738" clip-rule="evenodd"></path></svg>'},4108:e=>{"use strict";e.exports=i},4321:e=>{"use strict";e.exports=l},5478:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#DCDCDC" fill-rule="evenodd" d="M1 13a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1h13a1 1 0 0 1 1 1v1h-1V3H1v9h8v1zm8.01 2H4.5a.5.5 0 0 0 0 1h4.827a2.4 2.4 0 0 1-.317-1" clip-rule="evenodd"></path><path fill="#DCDCDC" fill-rule="evenodd" d="M10.474 5.578c.311-.36.75-.578 1.226-.578h2.6c.476 0 .915.219 1.226.578A2 2 0 0 1 16 6.885v7.23a2 2 0 0 1-.474 1.307c-.311.36-.75.578-1.226.578h-2.6c-.476 0-.915-.219-1.226-.578A2 2 0 0 1 10 14.115v-7.23a2 2 0 0 1 .474-1.307M11.7 6a.63.63 0 0 0-.47.233 1 1 0 0 0-.23.652v7.23a1 1 0 0 0 .23.652c.138.16.31.233.47.233h2.6c.16 0 .332-.073.47-.233a1 1 0 0 0 .23-.652v-7.23a1 1 0 0 0-.23-.652A.63.63 0 0 0 14.3 6zm.3 7.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5" clip-rule="evenodd"></path></svg>'},5508:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2M6.5 7.5A.5.5 0 0 1 7 7h1.5v4.5h1a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1h1V8H7a.5.5 0 0 1-.5-.5"></path><path fill="#000" fill-rule="evenodd" d="M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14" clip-rule="evenodd"></path></svg>'},5856:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#DCDCDC" fill-rule="evenodd" d="M1 13a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1h13a1 1 0 0 1 1 1v1.292A1.8 1.8 0 0 0 14.017 4H14V3H1v9h5v1zm5.01 2H4.5a.5.5 0 0 0 0 1h1.827a2.4 2.4 0 0 1-.317-1" clip-rule="evenodd"></path><path fill="#DCDCDC" fill-rule="evenodd" d="M7.474 5.578C7.785 5.218 8.224 5 8.7 5h5.6c.476 0 .915.219 1.226.578A2 2 0 0 1 16 6.885v7.23a2 2 0 0 1-.474 1.307c-.311.36-.75.578-1.226.578H8.7c-.476 0-.915-.219-1.226-.578A2 2 0 0 1 7 14.115v-7.23a2 2 0 0 1 .474-1.307M8.7 6a.63.63 0 0 0-.47.233 1 1 0 0 0-.23.652v7.23a1 1 0 0 0 .23.652c.138.16.31.233.47.233h5.6c.16 0 .332-.073.47-.233a1 1 0 0 0 .23-.652v-7.23a1 1 0 0 0-.23-.652A.63.63 0 0 0 14.3 6zm1.3 7.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5" clip-rule="evenodd"></path></svg>'},5879:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M1 3a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H8.5v1.5H12a.5.5 0 0 1 0 1H4a.5.5 0 0 1 0-1h3.5V12H3a2 2 0 0 1-2-2zm2-1h10a1 1 0 0 1 1 1v5.5H2V3a1 1 0 0 1 1-1M2 9.5v.5a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1v-.5z" clip-rule="evenodd"></path></svg>'},6055:e=>{"use strict";e.exports=o},6745:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0m1 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-7.676 2.228H7.34c-.213-1.138.621-2.13 1.375-3.025C9.28 6.532 9.8 5.914 9.8 5.328 9.8 4.5 9.2 3.9 7.976 3.9c-.816 0-1.572.36-2.268 1.092l-.648-.6C5.852 3.552 6.788 3 8.096 3c1.692 0 2.772.864 2.772 2.244 0 .864-.652 1.628-1.3 2.387-.71.831-1.413 1.655-1.244 2.597m.3 2.172c0 .48-.348.792-.768.792-.432 0-.78-.312-.78-.792s.348-.804.78-.804c.42 0 .768.324.768.804" clip-rule="evenodd"></path></svg>'},7386:e=>{"use strict";e.exports=a},7781:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M3.086 1.586A2 2 0 0 1 4.5 1h7a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V3a2 2 0 0 1 .586-1.414M4.5 2a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1zM6 12.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5" clip-rule="evenodd"></path></svg>'},8739:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M4.974 2.078c.311-.36.75-.578 1.226-.578h3.6c.476 0 .915.219 1.226.578a2 2 0 0 1 .474 1.307v9.23a2 2 0 0 1-.474 1.307c-.311.36-.75.578-1.226.578H6.2c-.476 0-.915-.219-1.226-.578a2 2 0 0 1-.474-1.307v-9.23a2 2 0 0 1 .474-1.307M6.2 2.5a.63.63 0 0 0-.47.233 1 1 0 0 0-.23.652v9.23a1 1 0 0 0 .23.652c.138.16.31.233.47.233h3.6c.16 0 .332-.073.47-.233a1 1 0 0 0 .23-.652v-9.23a1 1 0 0 0-.23-.652.63.63 0 0 0-.47-.233zm.3 9.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1H7a.5.5 0 0 1-.5-.5" clip-rule="evenodd"></path></svg>'},9044:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M6 6.5a.5.5 0 0 1 1 0v6a.5.5 0 0 1-1 0zM9.5 6a.5.5 0 0 0-.5.5v6a.5.5 0 0 0 1 0v-6a.5.5 0 0 0-.5-.5"></path><path fill="#000" fill-rule="evenodd" d="M11 0H5a1 1 0 0 0-1 1v2H.5a.5.5 0 0 0 0 1h1.6l.81 11.1a1 1 0 0 0 .995.9h8.19a1 1 0 0 0 .995-.9L13.9 4h1.6a.5.5 0 0 0 0-1H12V1a1 1 0 0 0-1-1m0 3V1H5v2zm1.895 1h-9.79l.8 11h8.19z" clip-rule="evenodd"></path></svg>'},9244:e=>{"use strict";e.exports=s}},t={};function c(s){var a=t[s];if(void 0!==a)return a.exports;var i=t[s]={exports:{}};return e[s](i,i.exports,c),i.exports}c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},c.d=(e,t)=>{for(var s in t)c.o(t,s)&&!c.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.p="";var p={};return c.p=window.jimuConfig.baseUrl,(()=>{"use strict";c.r(p),c.d(p,{__set_webpack_public_path__:()=>Ye,default:()=>Qe});var e=c(7386),t=c(9244),s=c(4321),a=c(4108),i=c(1888),o=c(2018),n=c.n(o),r=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(s[a[i]]=e[a[i]])}return s};const l=s=>{const a=window.SVG,{className:i}=s,o=r(s,["className"]),l=(0,t.classNames)("jimu-icon jimu-icon-component",i);return a?(0,e.jsx)(a,Object.assign({className:l,src:n()},o)):(0,e.jsx)("svg",Object.assign({className:l},o))},d=t.css`
  position: absolute;
  user-select: none;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  background: transparent;
  cursor: default;

  &.can-drag {
    cursor: pointer;

    &:active {
      cursor: grabbing;
    }
  }
`;class u extends t.React.PureComponent{constructor(s){super(s),this.onSelectItem=e=>{this.stopBubble(e),this.props.onSelect&&this.props.onSelect(this.props.item)},this.beginDrag=e=>{if(this.props.appMode!==t.AppMode.Design)return;const{item:s}=this.props;if(e.dataTransfer&&e.dataTransfer.setData("exbWidget",s.name||s.id),window._dragging_widget_item=Object.assign(Object.assign({},s),{count:this.uniqueId}),this.uniqueId++,!this.appFrameDoc){const e=document.querySelector(`iframe[name="${t.APP_FRAME_NAME_IN_BUILDER}"]`);this.appFrameDoc=e.contentDocument||e.contentWindow.document}this.appFrameDoc&&this.appFrameDoc.documentElement.classList.add("exb-h5-dragging")},this.endDrag=e=>{window._dragging_widget_item=null,this.appFrameDoc&&this.appFrameDoc.documentElement.classList.remove("exb-h5-dragging")},this.MemoChildFunctionComponent=t.React.memo(({item:t,fullLine:s})=>this.props.children?(0,e.jsx)("div",{className:"w-100 h-100",children:this.props.children(t,s)}):null),this.uniqueId=0}stopBubble(e){e&&e.stopPropagation?e.stopPropagation():window.event&&(window.event.cancelBubble=!0)}render(){const{item:s,fullLine:a,appMode:i}=this.props,o=this.MemoChildFunctionComponent;return(0,e.jsxs)("div",{className:(0,t.classNames)({"col-6":!a,col:a,[this.props.className]:!!this.props.className}),draggable:i===t.AppMode.Design,onClick:this.onSelectItem,onDragStart:this.beginDrag,onDragEnd:this.endDrag,title:s.label,"data-widget-name":s.name,children:["function"==typeof this.props.children?(0,e.jsx)(o,{item:s,fullLine:a}):this.props.children,(0,e.jsx)("div",{className:(0,t.classNames)({"can-drag":i===t.AppMode.Design}),css:d})]},s.name)}}const m="This area lists widgets that have been configured but not on the current canvas. They may exist in other device modes.",h="Insert widget",g="Pending",f="About this widget",v="Take a tour",b="Widget guide",y="Other devices used",w="All devices unused",x="Used on medium and small screen devices",j="Used on large and small screen devices",I="Used on large and medium screen devices",O="Used on large screen devices",M="Used on medium screen devices",S="Used on small screen devices";var N=c(5508),L=c.n(N),P=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(s[a[i]]=e[a[i]])}return s};const C=s=>{const a=window.SVG,{className:i}=s,o=P(s,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",i);return a?(0,e.jsx)(a,Object.assign({className:n,src:L()},o)):(0,e.jsx)("svg",Object.assign({className:n},o))},T=()=>{const e={color:"#fff",bg:"#5f5fff",shadow:"0 2px 12px 0 rgba(95,95,255,0.40)"},s={color:"#fff",bg:"#4949ff"};return t.css`
    width: 240px;
    padding: 1rem;
    h1, h2, h3, h4, h5, h6 {
      color: var(--ref-palette-neutral-1000);
    }
    .btn-primary {
      min-width: 100px;
      color: ${e.color}!important;
      background-color: ${e.bg}!important;
      border: 1px solid transparent;
      box-shadow: ${e.shadow}!important;
      &:hover {
        color: ${s.color}!important;
        background-color: ${s.bg}!important;
        border: 1px solid transparent!important;
      }
    }
  `};const V=t.ReactRedux.connect(e=>{var t;return{browserSizeMode:null===(t=e.appStateInBuilder)||void 0===t?void 0:t.browserSizeMode}})((0,t.injectIntl)(function(a){var i,o;const{widgetItem:n,intl:r}=a,[l,c]=t.React.useState(!1),p=t.React.useRef(null),d=t.React.useMemo(()=>r.formatMessage({id:"widgetHelpIconLabel",defaultMessage:f}),[r]),u=t.React.useMemo(()=>r.formatMessage({id:"widgetGuideStart",defaultMessage:v}),[r]),m=t.React.useMemo(()=>r.formatMessage({id:"widgetGuideTitle",defaultMessage:b}),[r]);return(0,e.jsx)(t.React.Fragment,{children:(0,e.jsxs)(s.Button,{type:"tertiary",className:"widget-help-btn",icon:!0,size:"sm",title:d,onClick:()=>{c(!l)},ref:p,children:[(0,e.jsx)(C,{}),(0,e.jsx)("span",{className:"sr-only",children:u}),(0,e.jsxs)(s.Popper,{arrowOptions:!0,css:T,open:l,placement:"right",offsetOptions:10,reference:p.current,toggle:()=>{c(!1),(0,t.focusElementInKeyboardMode)(p.current)},role:"dialog","aria-label":m,children:[(0,e.jsx)("h5",{children:null==n?void 0:n.label}),(0,e.jsx)("p",{children:null==n?void 0:n.description}),(null===(o=null===(i=null==n?void 0:n.manifest)||void 0===i?void 0:i.properties)||void 0===o?void 0:o.hasGuide)&&a.browserSizeMode===t.BrowserSizeMode.Large&&(0,e.jsx)(s.Button,{className:"float-right",type:"primary",size:"sm",onClick:e=>{var s;t.GuideManager.getInstance().startGuide({id:n.uri,type:null===(s=n.manifest.properties)||void 0===s?void 0:s.guideType,level:t.GuideLevels.Widget}),c(!1)},children:u})]})]})})}));var A=c(1245),z=c.n(A),B=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(s[a[i]]=e[a[i]])}return s};const D=s=>{const a=window.SVG,{className:i}=s,o=B(s,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",i);return a?(0,e.jsx)(a,Object.assign({className:n,src:z()},o)):(0,e.jsx)("svg",Object.assign({className:n},o))};var R=c(2918),E=c.n(R),k=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(s[a[i]]=e[a[i]])}return s};const W=s=>{const a=window.SVG,{className:i}=s,o=k(s,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",i);return a?(0,e.jsx)(a,Object.assign({className:n,src:E()},o)):(0,e.jsx)("svg",Object.assign({className:n},o))};var G=c(6055);class H extends t.React.PureComponent{constructor(){super(...arguments),this.getListItemJSX=({item:t,appMode:s})=>{if(!t)return(0,e.jsx)("div",{className:"col-6",style:{visibility:"hidden"}});const a=this.Item;return(0,e.jsx)(u,{item:t,fullLine:!1,className:"widget-card-item mt-2",appMode:s,children:()=>(0,e.jsx)(a,{item:t,hideLabel:!1})})},this.getRequireLicenseIconTooltip=e=>this.props.intl.formatMessage({id:`${e}License`}),this.getRequireLicenseIcon=t=>{switch(t){case"Enterprise":return(0,e.jsx)(D,{});case"Autodesk":return(0,e.jsx)(W,{})}},this.getCustomWidgetItemDetailUrl=e=>{var s;const a=null===(s=(0,t.getAppStore)().getState())||void 0===s?void 0:s.portalUrl;return e&&a?`${a.replace(/\/sharing\/rest/,"").replace(/\/$/,"")}/home/item.html?id=${e}`:null},this.onItemKeyDown=e=>{(0,t.isKeyboardMode)()&&(e.target!==e.currentTarget||"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),e.stopPropagation(),(0,G.appendItemToApp)(this.props.item)))},this.Item=({item:a,hideLabel:i})=>{var o,n,r,c,p,d;const u=`${a.name}-requireEnterprise`;return(0,e.jsx)("div",{className:(0,t.classNames)("d-flex justify-content-center w-100 h-100 widget-card-item-content",{"align-items-start":!i,"align-items-center":i,"pt-0":i}),"aria-label":a.label,"aria-describedby":(null===(o=a.manifest)||void 0===o?void 0:o.requireLicense)&&u,onKeyDown:this.onItemKeyDown,tabIndex:0,role:"button",children:(0,e.jsxs)("div",{className:(0,t.classNames)("d-flex flex-column",{"h-100":!i}),children:[(null===(r=null===(n=a.manifest)||void 0===n?void 0:n.properties)||void 0===r?void 0:r.showDescription)&&(0,e.jsx)(V,{widgetItem:a}),(null===(c=a.manifest)||void 0===c?void 0:c.requireLicense)&&(0,e.jsx)(s.Button,{tag:"div",id:u,title:this.getRequireLicenseIconTooltip(a.manifest.requireLicense),type:"tertiary",className:"widget-enterprise-btn",disableHoverEffect:!0,disableRipple:!0,icon:!0,size:"sm",children:this.getRequireLicenseIcon(a.manifest.requireLicense)}),a.itemId&&(0,e.jsx)(s.Button,{type:"tertiary",className:"widget-help-btn",icon:!0,size:"sm",title:this.props.intl.formatMessage({id:"details",defaultMessage:s.defaultMessages.details}),href:this.getCustomWidgetItemDetailUrl(a.itemId),target:"_blank",children:(0,e.jsx)(l,{})}),(0,e.jsx)("div",{className:"d-flex justify-content-center",children:(0,e.jsx)("div",{className:"widget-card-image",children:a.icon&&(0,e.jsx)(s.Icon,{className:"w-100",icon:a.icon,size:20,autoFlip:null===(d=null===(p=a.manifest)||void 0===p?void 0:p.properties)||void 0===d?void 0:d.flipIcon})})}),!i&&(0,e.jsx)("div",{className:(0,t.classNames)("widget-card-name flex-grow-1 d-flex align-items-center mt-0"),children:(0,e.jsxs)("span",{className:"text-center text-truncate widget-card-name-content",children:[a.label,"\u200e"]})})]})},a.name)}}render(){return this.getListItemJSX(this.props)}}function U(e,t){return!!e&&(!t||e.toLocaleLowerCase().includes(t.toLocaleLowerCase()))}function $(e){var t,s,a,i,o,n;const r=Object.keys((null===(t=null==e?void 0:e.appRuntimeInfo)||void 0===t?void 0:t.sectionNavInfos)||{}).map(t=>{var s;return null===(s=e.appRuntimeInfo.sectionNavInfos[t])||void 0===s?void 0:s.currentViewId}),l=r[0]||"insert",c=null===(a=null===(s=null==e?void 0:e.appConfig)||void 0===s?void 0:s.widgets)||void 0===a?void 0:a["left-sidebar"];let p=!0;c&&(p=0!==c.config.defaultState);return"insert"===l&&(null!==(n=null===(o=null===(i=null==e?void 0:e.widgetsState)||void 0===i?void 0:i["left-sidebar"])||void 0===o?void 0:o.collapse)&&void 0!==n?n:p)}var _=c(4064),F=c.n(_),q=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(s[a[i]]=e[a[i]])}return s};const K=s=>{const a=window.SVG,{className:i}=s,o=q(s,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",i);return a?(0,e.jsx)(a,Object.assign({className:n,src:F()},o)):(0,e.jsx)("svg",Object.assign({className:n},o))};var X=c(655),J=c.n(X),Q=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(s[a[i]]=e[a[i]])}return s};const Y=s=>{const a=window.SVG,{className:i}=s,o=Q(s,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",i);return a?(0,e.jsx)(a,Object.assign({className:n,src:J()},o)):(0,e.jsx)("svg",Object.assign({className:n},o))};var Z=c(6745),ee=c.n(Z),te=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(s[a[i]]=e[a[i]])}return s};const se=s=>{const a=window.SVG,{className:i}=s,o=te(s,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",i);return a?(0,e.jsx)(a,Object.assign({className:n,src:ee()},o)):(0,e.jsx)("svg",Object.assign({className:n},o))},ae=a.utils.CUSTOM_GROUP;class ie extends t.React.PureComponent{isLoading(e){return!e}getGroupLabel(e){return a.utils.getWidgetsGroupLabel(e,this.props.intl)}getCommonGroups(e){const t={};return(e||[]).forEach(e=>{e.group!==ae&&(t[e.group]||(t[e.group]={label:this.getGroupLabel(e.group),groupId:e.group,itemList:[]}),t[e.group].itemList.push(e))}),t}getCustomGroup(e,t){return{label:this.getGroupLabel(ae),groupId:ae,itemList:(t||[]).concat((null==e?void 0:e.filter(e=>e.group===ae))||[])}}render(){const t=this.props.commonWidgetList||[];return(0,e.jsx)("div",{className:"flex-column bg-default d-flex w-100 h-100",children:(0,e.jsx)("div",{className:"jimu-builder-panel--content choose-widget-popup-content text-overlay",children:this.isLoading(this.props.commonWidgetList)?(0,e.jsx)("div",{className:"loading-container w-100 h-100",children:(0,e.jsx)(s.Loading,{type:s.LoadingType.Secondary})}):(0,e.jsxs)("div",{children:[Object.values(this.getCommonGroups(t.concat([a.utils.getPlaceholderItemForWidgetsList(this.props.intl),a.utils.getSectionItemForWidgetsList(this.props.intl)]))).sort((e,t)=>e.groupId-t.groupId).map((t,s)=>(0,e.jsx)(ne,{group:t,appMode:this.props.appMode,searchValue:this.props.searchValue,intl:this.props.intl},s)),a.utils.showCustomWidgets(t)&&(0,e.jsx)(ne,{group:this.getCustomGroup(t,this.props.remoteCustomWidgetList),appMode:this.props.appMode,searchValue:this.props.searchValue,isLoading:this.isLoading(this.props.remoteCustomWidgetList),intl:this.props.intl})]})})})}}class oe extends t.React.PureComponent{constructor(e){super(e),this.getCustomWidgetUrl=()=>{var e,t;(null===(e=this.props.group)||void 0===e?void 0:e.groupId)===ae&&(null===(t=a.helpUtils.getBuildAppsHelpLink("add-custom-widgets"))||void 0===t||t.then(e=>{e&&this.setState({customWidgetHref:e})}))},this.toggle=e=>{["BUTTON","A","INPUT"].includes(e.target.tagName)||e.preventDefault(),this.setState({isOpen:!this.state.isOpen})},this.getItemList=()=>U(this.props.group.label,this.props.searchValue)?this.props.group.itemList:this.props.group.itemList.filter(e=>U(e.label,this.props.searchValue)),this.state={isOpen:!0,customWidgetHref:"#"}}componentDidMount(){this.getCustomWidgetUrl()}componentDidUpdate(e){if(e.portalSelf!==this.props.portalSelf&&this.getCustomWidgetUrl(),e.searchValue!==this.props.searchValue){const e=this.getItemList();this.setState({isOpen:!this.props.searchValue||e.length>0})}}render(){if(!this.props.group)return null;const t=this.getItemList();return(0,e.jsxs)("div",{className:"container-fluid mb-5 mt-2 px-4",role:"group","aria-label":this.props.group.label,children:[(0,e.jsxs)(s.Label,{check:!0,className:"w-100 d-flex justify-content-between",children:[(0,e.jsx)("h6",{className:"new-elements-title w-75 text-break",title:this.props.group.label,children:this.props.group.label}),(0,e.jsxs)("div",{className:"d-flex justify-content-end",children:[this.props.group.groupId===ae&&(0,e.jsx)(s.Button,{icon:!0,size:"sm",type:"tertiary",title:this.props.intl.formatMessage({id:"help",defaultMessage:s.defaultMessages.help}),href:this.state.customWidgetHref,target:"_blank",children:(0,e.jsx)(se,{})}),(0,e.jsx)(s.Button,{icon:!0,size:"sm",type:"tertiary",onClick:e=>{this.toggle(e)},"aria-expanded":this.state.isOpen,"aria-label":this.state.isOpen?this.props.intl.formatMessage({id:"clickToHide",defaultMessage:s.defaultMessages.clickToHide}):this.props.intl.formatMessage({id:"clickToShow",defaultMessage:s.defaultMessages.clickToShow}),children:this.state.isOpen?(0,e.jsx)(K,{}):(0,e.jsx)(Y,{})})]})]}),(0,e.jsx)(s.Collapse,{wrapperClassName:"row no-gutters",isOpen:this.state.isOpen,children:this.props.isLoading?(0,e.jsx)("div",{className:"loading-container w-100 h-100",children:(0,e.jsx)(s.Loading,{type:s.LoadingType.Secondary})}):t.sort((e,t)=>e.order-t.order).map((t,s)=>t?(0,e.jsx)(H,{item:t,hideLabel:!1,intl:this.props.intl,appMode:this.props.appMode},s):(0,e.jsx)("div",{className:"col-6",style:{visibility:"hidden"}},s))})]})}}const ne=t.ReactRedux.connect(e=>({portalSelf:e.portalSelf}))(oe),re=(0,i.withTheme)(ie);var le=c(1496),ce=c(8739),pe=c.n(ce),de=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(s[a[i]]=e[a[i]])}return s};const ue=s=>{const a=window.SVG,{className:i}=s,o=de(s,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",i);return a?(0,e.jsx)(a,Object.assign({className:n,src:pe()},o)):(0,e.jsx)("svg",Object.assign({className:n},o))};var me=c(5879),he=c.n(me),ge=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(s[a[i]]=e[a[i]])}return s};const fe=s=>{const a=window.SVG,{className:i}=s,o=ge(s,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",i);return a?(0,e.jsx)(a,Object.assign({className:n,src:he()},o)):(0,e.jsx)("svg",Object.assign({className:n},o))};var ve=c(7781),be=c.n(ve),ye=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(s[a[i]]=e[a[i]])}return s};const we=s=>{const a=window.SVG,{className:i}=s,o=ye(s,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",i);return a?(0,e.jsx)(a,Object.assign({className:n,src:be()},o)):(0,e.jsx)("svg",Object.assign({className:n},o))};var xe=c(5478),je=c.n(xe),Ie=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(s[a[i]]=e[a[i]])}return s};const Oe=s=>{const a=window.SVG,{className:i}=s,o=Ie(s,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",i);return a?(0,e.jsx)(a,Object.assign({className:n,src:je()},o)):(0,e.jsx)("svg",Object.assign({className:n},o))};var Me=c(5856),Se=c.n(Me),Ne=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(s[a[i]]=e[a[i]])}return s};const Le=s=>{const a=window.SVG,{className:i}=s,o=Ne(s,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",i);return a?(0,e.jsx)(a,Object.assign({className:n,src:Se()},o)):(0,e.jsx)("svg",Object.assign({className:n},o))};var Pe=c(1824),Ce=c.n(Pe),Te=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(s[a[i]]=e[a[i]])}return s};const Ve=s=>{const a=window.SVG,{className:i}=s,o=Te(s,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",i);return a?(0,e.jsx)(a,Object.assign({className:n,src:Ce()},o)):(0,e.jsx)("svg",Object.assign({className:n},o))};var Ae=c(9044),ze=c.n(Ae),Be=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(s[a[i]]=e[a[i]])}return s};const De=s=>{const a=window.SVG,{className:i}=s,o=Be(s,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",i);return a?(0,e.jsx)(a,Object.assign({className:n,src:ze()},o)):(0,e.jsx)("svg",Object.assign({className:n},o))},Re=(t,i)=>{switch(t.usageInfo){case"l":return(0,e.jsx)(fe,{tabIndex:0,className:"mr-2",title:i.formatMessage({id:"usedOnL",defaultMessage:O})});case"m":return(0,e.jsx)(we,{tabIndex:0,className:"mr-2",title:i.formatMessage({id:"usedOnM",defaultMessage:M})});case"s":return(0,e.jsx)(ue,{tabIndex:0,className:"mr-2",title:i.formatMessage({id:"usedOnS",defaultMessage:S})});case"lm":return(0,e.jsx)(Le,{tabIndex:0,className:"mr-2",title:i.formatMessage({id:"usedOnLM",defaultMessage:I})});case"ls":return(0,e.jsx)(Oe,{tabIndex:0,className:"mr-2",title:i.formatMessage({id:"usedOnLS",defaultMessage:j})});case"ms":return(0,e.jsx)(Ve,{tabIndex:0,className:"mr-2",title:i.formatMessage({id:"usedOnMS",defaultMessage:x})});default:return(0,e.jsx)(s.Button,{title:i.formatMessage({id:"delete"}),onClick:()=>{(0,a.getAppConfigAction)().removeLayoutItem(t.layoutInfo,!0,!0).exec()},children:(0,e.jsx)(De,{})})}};class Ee extends t.React.PureComponent{constructor(){super(...arguments),this.getListItemJSX=()=>{var t,a;const{item:i}=this.props;if(!i)return(0,e.jsx)("div",{className:"col-6",style:{visibility:"hidden"}});const o="string"==typeof i.icon?i.icon:i.icon&&i.icon.svg;return(0,e.jsx)("div",{children:(0,e.jsxs)("div",{title:i.label,className:"d-flex align-items-center pending-elements-item px-2","aria-label":i.label,tabIndex:0,role:"button",children:[(0,e.jsxs)(u,{item:i,fullLine:!0,appMode:this.props.appMode,className:"draggable-element p-0 d-flex align-items-center",children:[(0,e.jsx)("div",{className:"pending-elements-item-icon-container d-flex justify-content-center align-items-center",children:(0,e.jsx)(s.Icon,{className:"pending-elements-item-icon",icon:o,color:"var(--ref-palette-black)",autoFlip:null===(a=null===(t=i.manifest)||void 0===t?void 0:t.properties)||void 0===a?void 0:a.flipIcon})}),(0,e.jsx)("div",{className:"text-truncate pending-elements-item-label",children:i.label})]}),(0,e.jsx)("div",{className:"ml-auto",children:Re(i,this.props.intl)})]})},i.name||i.id)}}render(){return(0,e.jsx)("div",{className:"w-100 pending-item",children:this.getListItemJSX()})}}const ke=(0,i.withTheme)(Ee);function We(e,s,a){const i=s.layouts[e];if(i){const{type:e,id:o}=i.parent;switch(e){case t.LayoutParentType.Widget:{const e=s.widgets[o];if(e){const t=e.parent[a][0];if(t){const e=s.layouts[t.layoutId].content[t.layoutItemId];return!!(null==e?void 0:e.isPending)||We(t.layoutId,s,a)}}}case t.LayoutParentType.View:{const e=s.views[o].parent,t=s.sections[e];if(t){const e=t.parent[a][0];if(e){const t=s.layouts[e.layoutId].content[e.layoutItemId];return!!(null==t?void 0:t.isPending)||We(e.layoutId,s,a)}}}}}return!1}function Ge(e,s){const a=s.layouts[e.layoutId].content[e.layoutItemId],i=[t.BrowserSizeMode.Large,t.BrowserSizeMode.Medium,t.BrowserSizeMode.Small];let o;if(a.type===t.LayoutItemType.Widget){const e=s.widgets[a.widgetId];o=e.parent}else if(a.type===t.LayoutItemType.Section){const e=s.sections[a.sectionId];o=e.parent}else{const e=s.screenGroups[a.screenGroupId];o=e.parent}let n="";return o&&i.forEach(e=>{const t=o[e];if(t)if(Array.isArray(t))t.some(t=>{if(!s.layouts[t.layoutId].content[t.layoutItemId].isPending){if(!We(t.layoutId,s,e))return n+=e.charAt(0).toLowerCase(),!0}return!1});else{const a=t;if(!s.layouts[a.layoutId].content[a.layoutItemId].isPending){We(a.layoutId,s,e)||(n+=e.charAt(0).toLowerCase())}}}),n}const He=i.styled.div`
  margin-top: -1.125rem;
  .collapse-label {
    font-weight: 600;
  }
  .draggable-element {
    max-width: 175px;
  }
  .pending-item:has(+ .pending-item) {
    margin-bottom: 0.75rem;
  }
`;class Ue extends t.React.PureComponent{constructor(){super(...arguments),this.convertLayoutItemToElementItem=(e,s)=>{var a,i,o;const n=null===(a=(0,t.getAppStore)().getState().appStateInBuilder)||void 0===a?void 0:a.appConfig,r=n.layouts[e.layoutId].content[e.layoutItemId],l=le.searchUtils.getWidgetIdThatUseTheLayoutId(n,e.layoutId);if(r.type===t.LayoutItemType.Widget){const a=r.widgetId,i=n.widgets[a];let o;o=l&&n.widgets[l].manifest.widgetType!==t.WidgetType.Layout?Object.keys(n.widgets[l].layouts).length>1&&n.layouts[e.layoutId].label?n.widgets[l].label+"-"+n.layouts[e.layoutId].label+"-"+i.label:n.widgets[l].label+"-"+i.label:i.label;const c=i&&i.icon?"string"==typeof i.icon?i.icon:i.icon.asMutable({deep:!0}):"./widgets/element-selector/dist/runtime/assets/section.svg";return{id:r.widgetId,itemType:t.LayoutItemType.Widget,layoutInfo:e,isFromCurrentSizeMode:s,label:o,uri:i&&i.uri,icon:c,isPending:!0,manifest:i&&i.manifest&&i.manifest.asMutable({deep:!0})}}if(r.type===t.LayoutItemType.Section){const a=r.sectionId,o=null===(i=n.sections)||void 0===i?void 0:i[a],l=o&&o.icon?"string"==typeof o.icon?o.icon:o.icon.asMutable({deep:!0}):"./widgets/element-selector/dist/runtime/assets/section.svg";return{id:a,itemType:t.LayoutItemType.Section,layoutInfo:e,isFromCurrentSizeMode:s,label:o&&o.label,uri:"",icon:l,isPending:!0,manifest:{properties:{}}}}if(r.type===t.LayoutItemType.ScreenGroup){const a=r.screenGroupId,i=null===(o=n.screenGroups)||void 0===o?void 0:o[a],l=i&&i.icon?"string"==typeof i.icon?i.icon:i.icon.asMutable({deep:!0}):"./widgets/element-selector/dist/runtime/assets/screen-group.svg";return{id:a,itemType:t.LayoutItemType.ScreenGroup,layoutInfo:e,isFromCurrentSizeMode:s,label:i&&i.label,uri:"",icon:l,isPending:!0,manifest:{properties:{}}}}return null}}render(){var a,i;const o=null===(a=(0,t.getAppStore)().getState().appStateInBuilder)||void 0===a?void 0:a.appConfig;if(null==o||!(null===(i=this.props.layouts)||void 0===i?void 0:i[this.props.layoutId]))return null;if(this.props.activeOptsSectionViewId&&"insert"!==this.props.activeOptsSectionViewId)return null;const n=this.props.layoutId,r=[],l=[],c=n?le.searchUtils.getPendingLayoutItemsFromOtherSizeModeInPage(o,this.props.currentPageId,this.props.browserSizeMode,this.props.activePagePart):[],p=n?le.searchUtils.getPendingLayoutItemsFromOtherSizeModeInDialog(o,this.props.currentDialogId,this.props.browserSizeMode):[],d=c.map(e=>this.convertLayoutItemToElementItem(e,!1)).concat(p.map(e=>this.convertLayoutItemToElementItem(e,!1))).filter(e=>o.layouts[e.layoutInfo.layoutId].content[e.layoutInfo.layoutItemId].type!==t.LayoutItemType.ScreenGroup);d.forEach(e=>{const t=Ge(e.layoutInfo,o);e.usageInfo=t,""===t?l.push(e):r.push(e)});const u=n?le.searchUtils.getPendingLayoutItemsInPage(o,this.props.currentPageId,this.props.browserSizeMode,this.props.activePagePart):[],h=n?le.searchUtils.getPendingLayoutItemsInDialog(o,this.props.currentDialogId,this.props.browserSizeMode):[],g=u.map(e=>this.convertLayoutItemToElementItem(e,!0)).concat(h.map(e=>this.convertLayoutItemToElementItem(e,!0)));g.forEach(e=>{const t=Ge(e.layoutInfo,o);e.usageInfo=t,""===t?l.push(e):r.push(e)}),r.length>0&&r.sort((e,t)=>e.usageInfo[0]===t.usageInfo[0]?t.usageInfo.length===e.usageInfo.length?e.label.localeCompare(t.label,this.props.intl.locale):t.usageInfo.length-e.usageInfo.length:e.usageInfo.charCodeAt(0)-t.usageInfo.charCodeAt(0)),l.length>0&&l.sort((e,t)=>e.label.localeCompare(t.label,this.props.intl.locale));const f=r.filter(e=>U(e.label,this.props.searchValue)),v=l.filter(e=>U(e.label,this.props.searchValue));return(0,e.jsxs)(He,{className:"flex-column bg-default d-flex px-4 pb-4",children:[r.length>0&&(0,e.jsx)(s.CollapsablePanel,{label:(0,e.jsx)("div",{className:"collapse-label py-3",children:this.props.intl.formatMessage({id:"otherDeviceUsed",defaultMessage:y})}),defaultIsOpen:!0,children:f.map(t=>(0,e.jsx)(ke,{item:t,intl:this.props.intl,appMode:this.props.appMode},t.id))}),l.length>0&&(0,e.jsx)(s.CollapsablePanel,{label:(0,e.jsx)("div",{className:"collapse-label py-3",children:this.props.intl.formatMessage({id:"allDeviceUnused",defaultMessage:w})}),defaultIsOpen:!0,children:v.map(t=>(0,e.jsx)(ke,{item:t,intl:this.props.intl,appMode:this.props.appMode},t.id))}),0===g.length&&0===d.length&&(0,e.jsx)("div",{className:"pt-5 text-white-50 text-left text-break",children:this.props.intl.formatMessage({id:"pendingElementsInfo",defaultMessage:m})})]})}}const $e=(0,t.createSelector)([e=>$(e),e=>{var t;return null===(t=e.appStateInBuilder)||void 0===t?void 0:t.appRuntimeInfo.currentPageId},e=>{var t;return null===(t=e.appStateInBuilder)||void 0===t?void 0:t.appRuntimeInfo.currentDialogId},e=>{var t;return null===(t=e.appStateInBuilder)||void 0===t?void 0:t.appRuntimeInfo.appMode},e=>{var t;return null===(t=e.appStateInBuilder)||void 0===t?void 0:t.browserSizeMode},e=>{var t;return null===(t=e.appStateInBuilder)||void 0===t?void 0:t.appRuntimeInfo.activePagePart},e=>{var t,s,a;return null===(a=null===(s=null===(t=e.appRuntimeInfo)||void 0===t?void 0:t.sectionNavInfos)||void 0===s?void 0:s["opts-section"])||void 0===a?void 0:a.currentViewId},e=>{var t;return null===(t=e.appStateInBuilder)||void 0===t?void 0:t.appConfig}],(e,s,a,i,o,n,r,l)=>{var c,p,d,u,m,h,g,f,v,b;if(!e||!l)return{};let y;return y=n===t.PagePart.Header?null===(p=null===(c=l.header)||void 0===c?void 0:c.layout)||void 0===p?void 0:p[o]:n===t.PagePart.Footer?null===(u=null===(d=l.footer)||void 0===d?void 0:d.layout)||void 0===u?void 0:u[o]:n===t.PagePart.Body?null===(g=null===(h=null===(m=l.pages)||void 0===m?void 0:m[s])||void 0===h?void 0:h.layout)||void 0===g?void 0:g[o]:null===(b=null===(v=null===(f=l.dialogs)||void 0===f?void 0:f[a])||void 0===v?void 0:v.layout)||void 0===b?void 0:b[o],{currentPageId:s,currentDialogId:a,appMode:i,browserSizeMode:o,activePagePart:n,layouts:l.layouts,layoutId:y,activeOptsSectionViewId:r}}),_e=t.ReactRedux.connect($e)((0,i.withTheme)(Ue));var Fe=c(170),qe=c.n(Fe),Ke=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(s[a[i]]=e[a[i]])}return s};const Xe=s=>{const a=window.SVG,{className:i}=s,o=Ke(s,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",i);return a?(0,e.jsx)(a,Object.assign({className:n,src:qe()},o)):(0,e.jsx)("svg",Object.assign({className:n},o))};class Je extends t.React.PureComponent{constructor(s){super(s),this.onSearchIconClick=e=>{this.setState({isSearchInputShown:!this.state.isSearchInputShown})},this.onSearchValueChange=e=>{this.setState({searchValue:e.target.value})},this.handleTabsChange=e=>{this.setState({activeTab:e})},this.MemoNewElements=t.React.memo(t=>(0,e.jsx)(re,{commonWidgetList:t.commonWidgetList,remoteCustomWidgetList:t.remoteCustomWidgetList,appMode:t.appMode,intl:t.intl,searchValue:t.searchValue})),this.MemoPendingElements=t.React.memo(t=>(0,e.jsx)(_e,{intl:t.intl,searchValue:t.searchValue})),this.state={commonWidgetList:null,remoteCustomWidgetList:null,isSearchInputShown:!1,searchValue:"",activeTab:"new"}}componentDidMount(){a.utils.fetchCommonWidgetList().then(e=>{this.setState({commonWidgetList:e})}),a.utils.fetchRemoteCustomWidgetList().then(e=>{this.setState({remoteCustomWidgetList:e})})}componentDidUpdate(e,s){s.isSearchInputShown!==this.state.isSearchInputShown&&this.state.isSearchInputShown&&this.searchInput&&((0,t.focusElementInKeyboardMode)(this.searchInput,!0),this.searchInput.select())}render(){const a=this.MemoNewElements,i=this.MemoPendingElements,o=this.props.intl.formatMessage({id:"search",defaultMessage:t.defaultMessages.search});return(0,e.jsx)("div",{css:(n=this.props.theme,t.css`
  .widget-builder-header-insert-elements {
    .text-dark-600{
      color: ${n.ref.palette.neutral[1e3]};
    }
    .mb-10{
      margin-bottom: ${t.polished.rem(10)};
    }
    .mb-18{
      margin-bottom: ${t.polished.rem(18)};
    }
    .title{
      padding: 18px 16px 8px 16px !important;
      font-size: 1rem !important;
      font-weight: 500;
      .search-icon{
        cursor: pointer;
        width: 30px;
      }
    }
    .search-input{
      height: 26px;
      border-radius: 2px;
    }
    .loading-container{
      position: relative;
    }
    width: 100%;
    position: absolute;
    top: 0;
    bottom: 0;
    text-align: left;
    /* border-right: 1px solid ${n.ref.palette.neutral[700]}; */
    .collapse-btn{
      cursor: pointer;
      .jimu-icon{
        vertical-align: top;
      }
    }
    .jimu-nav{
      flex-shrink: 0;
      flex-grow: 0;
    }
    .new-elements-title{
      font-weight: 600;
      color: ${n.ref.palette.neutral[1e3]};
      margin-bottom: ${t.polished.rem(8)};
    }
    .jimu-nav{
      height: ${t.polished.rem(43)} !important;
    }
    .jimu-tabs{
      height: calc(100% - 50px);
    }
    .with-search-input.jimu-tabs{
      height: calc(100% - 90px);
    }
    .tab-content{
      overflow: auto;
      padding-top: ${t.polished.rem(18)};
    }

    .draggable-element:hover{
      .pending-elements-item{
        background-color: ${n.ref.palette.neutral[600]};
      }
    }

    .pending-elements-item{
      height: ${t.polished.rem(32)};
      background: ${n.sys.color.secondary.main};

      .pending-elements-item-icon-container{
        margin-right: ${t.polished.rem(8)};
        .pending-elements-item-icon{
          width: ${t.polished.rem(16)};
          height: ${t.polished.rem(16)};
          color: ${n.ref.palette.neutral[1100]};
        }
      }
      .pending-elements-item-label{
        max-width: ${t.polished.rem(180)};
        color: var(--ref-palette-black);
        line-height: ${t.polished.rem(32)};
        font-size: ${t.polished.rem(13)};
      }
    }

    .btn{
      .jimu-icon{
        margin: 0;
      }
    }
    .jimu-builder-panel--header {
      padding: ${n.sys.spacing(2)} ${n.sys.spacing(4)};
      display: flex;
      flex-direction: row;
      align-items: center;
      h3 {
        margin: 0;
        line-height: 1.5;
        flex-grow: 1;
      }
    }
    .jimu-builder-panel--content {
      height: 100%;
      overflow: auto;
      .widget-card-item{
        height: 80px;
        font-size: 13px;

        user-select: none;
        cursor: pointer;
        .widget-card-item-content{
          position: relative;
          padding-top: 16px;
          background-color: ${n.ref.palette.neutral[500]};
        }
        &:hover .widget-card-item-content{
          background-color: ${n.ref.palette.neutral[600]};
        }
        .widget-card-image{
          width: 20px;
          height: 20px;
          &:after{
            display: none;
          }
        }

        .widget-card-name{
          max-width: 105px;
          margin: 0 auto;
          .widget-card-name-content{
            line-height: 1rem;
            max-height:2rem;
            white-space: normal;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            word-break: break-word;
            word-wrap: break-word;
          }
        }

        .widget-help-btn {
          position: absolute;
          top: 0;
          right: 0;
          z-index: 1;
        }

        .widget-enterprise-btn {
          position: absolute;
          top: 0;
          left: 0;
          z-index: 1;
        }
      }

      .row {
        .col-6:nth-of-type(2n) {
          padding-left: 3px;
        }
        .col-6:nth-of-type(2n+1) {
          padding-right: 3px;
        }

        .col {
          flex-basis: 100%;
        }
      }
    }
    &.widget-popup-hide-animation{
      transition: transform 0.3s ease-out;
      &.from-left {
        transform: translateX(-100%);
      }
      &.from-right {
        transform: translateX(100%);
      }
    }
    &.widget-popup-show-animation{
      transition: transform 0.3s ease-in;
      &.from-left {
        transform: translateX(0%);
      }
      &.from-right {
        transform: translateX(0%);
      }
    }
    &.from-left {
      left: 0;
    }
    &.from-right {
      right: 0;
    }
  }`),children:(0,e.jsxs)("div",{className:"jimu-builder-panel widget-builder-header-insert-elements from-left flex-column bg-default",children:[(0,e.jsxs)("div",{className:"jimu-builder-panel--header d-flex flex-row justify-content-between hint-paper title",children:[(0,e.jsx)("div",{className:"flex-grow-1 m-0 text-truncate text-left",title:this.props.intl.formatMessage({id:"element",defaultMessage:h}),children:this.props.intl.formatMessage({id:"element",defaultMessage:h})}),(0,e.jsx)("div",{className:"search-icon d-flex align-items-start justify-content-end",onClick:this.onSearchIconClick,children:(0,e.jsx)(s.Button,{size:"sm",icon:!0,type:"tertiary",title:o,"aria-label":o,"aria-expanded":this.state.isSearchInputShown,children:(0,e.jsx)(Xe,{size:"m"})})})]}),(0,e.jsx)("div",{className:"w-100 px-4",children:this.state.isSearchInputShown&&(0,e.jsx)("div",{children:(0,e.jsx)(s.TextInput,{value:this.state.searchValue,onChange:this.onSearchValueChange,className:"search-input my-2",placeholder:this.props.intl.formatMessage({id:"search",defaultMessage:t.defaultMessages.search}),ref:e=>{this.searchInput=e},allowClear:!0,"aria-label":this.props.intl.formatMessage({id:"search",defaultMessage:t.defaultMessages.search})})})}),(0,e.jsxs)(s.Tabs,{type:"underline",fill:!0,className:(0,t.classNames)({"with-search-input":this.state.isSearchInputShown}),defaultValue:"new",onChange:this.handleTabsChange,children:[(0,e.jsx)(s.Tab,{id:"new",className:"w-50",title:this.props.intl.formatMessage({id:"new",defaultMessage:t.defaultMessages.new}),children:(0,e.jsx)(a,{commonWidgetList:this.state.commonWidgetList,remoteCustomWidgetList:this.state.remoteCustomWidgetList,appMode:this.props.appMode,intl:this.props.intl,searchValue:this.state.searchValue})}),(0,e.jsx)(s.Tab,{id:"pending",className:"w-50",title:this.props.intl.formatMessage({id:"pending",defaultMessage:g}),children:"pending"===this.state.activeTab&&(0,e.jsx)(i,{intl:this.props.intl,searchValue:this.state.searchValue})})]})]})});var n}}Je.mapExtraStateProps=e=>{var t,s,a;return $(e)?{appMode:null===(t=e.appStateInBuilder)||void 0===t?void 0:t.appRuntimeInfo.appMode,appPath:e.appPath,browserSizeMode:null===(s=e.appStateInBuilder)||void 0===s?void 0:s.browserSizeMode,activePagePart:null===(a=e.appStateInBuilder)||void 0===a?void 0:a.appRuntimeInfo.activePagePart}:{}};const Qe=Je;function Ye(e){c.p=e}})(),p})())}}});