System.register(["jimu-core","jimu-core/emotion","jimu-for-builder","jimu-theme","jimu-ui","jimu-ui/advanced/setting-components","jimu-ui/advanced/style-setting-components","jimu-ui/basic/color-picker"],function(e,t){var o={},l={},s={},a={},n={},r={},i={},c={};return{setters:[function(e){o.Immutable=e.Immutable,o.React=e.React,o.ReactRedux=e.ReactRedux,o.ThemeThemeAlertColorKeys=e.ThemeThemeAlertColorKeys,o.ThemeThemeColorKeys=e.ThemeThemeColorKeys,o.classNames=e.classNames,o.css=e.css,o.defaultMessages=e.defaultMessages,o.focusElementInKeyboardMode=e.focusElementInKeyboardMode,o.getAppStore=e.getAppStore,o.hooks=e.hooks,o.i18n=e.i18n,o.injectIntl=e.injectIntl,o.urlUtils=e.urlUtils,o.useIntl=e.useIntl,o.utils=e.utils},function(e){l.Fragment=e.Fragment,l.jsx=e.jsx,l.jsxs=e.jsxs},function(e){s.builderAppSync=e.builderAppSync,s.getAppConfigAction=e.getAppConfigAction,s.helpUtils=e.helpUtils},function(e){a.BrandFunctionColorNames=e.BrandFunctionColorNames,a.DefaultThemeFonts=e.DefaultThemeFonts,a.TypographyVariants=e.TypographyVariants,a.colorUtils=e.colorUtils,a.createFromSource=e.createFromSource,a.getTheme2=e.getTheme2,a.getTheme2Module=e.getTheme2Module,a.isClassicSharedTheme=e.isClassicSharedTheme,a.isSharedTheme=e.isSharedTheme,a.mapping=e.mapping,a.styled=e.styled,a.useTheme=e.useTheme,a.useTheme2=e.useTheme2,a.utils=e.utils},function(e){n.AlertPopup=e.AlertPopup,n.Button=e.Button,n.Checkbox=e.Checkbox,n.CollapsablePanel=e.CollapsablePanel,n.Dropdown=e.Dropdown,n.DropdownButton=e.DropdownButton,n.DropdownItem=e.DropdownItem,n.DropdownMenu=e.DropdownMenu,n.Icon=e.Icon,n.Label=e.Label,n.Link=e.Link,n.Loading=e.Loading,n.LoadingType=e.LoadingType,n.PanelHeader=e.PanelHeader,n.Popper=e.Popper,n.Slider=e.Slider,n.Tab=e.Tab,n.Tabs=e.Tabs,n.Tag=e.Tag,n.Tooltip=e.Tooltip,n.Typography=e.Typography,n.UrlInput=e.UrlInput,n.defaultMessages=e.defaultMessages,n.hooks=e.hooks,n.useTrapFocusByBoundaryNodes=e.useTrapFocusByBoundaryNodes},function(e){r.SettingRow=e.SettingRow,r.SettingSection=e.SettingSection},function(e){i.ColorContrastWarning=e.ColorContrastWarning,i.FontFamilySelector=e.FontFamilySelector},function(e){c.ColorPicker=e.ColorPicker,c.ColorSwatch=e.ColorSwatch,c.PickerBlock=e.PickerBlock,c.Sketch=e.Sketch,c.serializeRecentColorString=e.serializeRecentColorString,c.useColorVariableTitle=e.useColorVariableTitle}],execute:function(){e((()=>{var e={655:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M2.146 4.653a.485.485 0 0 1 .708 0L8 10.24l5.146-5.587a.485.485 0 0 1 .708 0 .54.54 0 0 1 0 .738l-5.5 5.956a.485.485 0 0 1-.708 0l-5.5-5.956a.54.54 0 0 1 0-.738" clip-rule="evenodd"></path></svg>'},755:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M8.051 15q-2.939 0-4.995-2.054T1 7.958q0-2.675 1.745-4.64Q4.49 1.356 7.067 1a2 2 0 0 1 .275.02 5.3 5.3 0 0 0-.706 1.382 4.9 4.9 0 0 0-.26 1.594q0 2.349 1.645 3.99Q9.667 9.63 12.017 9.63q.84 0 1.598-.26a5 5 0 0 0 1.365-.705q.01.068.015.135.004.07.005.14-.339 2.573-2.305 4.316Q10.73 15 8.051 15"></path></svg>'},778:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8.829 2.535a.909.909 0 0 0-1.657 0L2.291 13.356a.456.456 0 0 0 .831.377L4.818 10h6.365l1.696 3.733a.456.456 0 0 0 .831-.377zM5.272 9 8 3l2.729 6z" clip-rule="evenodd"></path></svg>'},1888:e=>{"use strict";e.exports=a},2046:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M11.227 1.312c-.404-.404-1.045-.417-1.432-.03L2.49 8.587l-.48 2.674a.637.637 0 0 0 .73.73l2.673-.48 7.305-7.306c.387-.387.374-1.028-.03-1.431zm-8.114 9.575.32-1.781 4.991-4.992 1.462 1.462-4.992 4.991zm7.473-6.012 1.402-1.4-1.462-1.463-1.401 1.402z" clip-rule="evenodd"></path><path fill="#000" d="M1.5 14a.5.5 0 0 0 0 1h13a.5.5 0 0 0 0-1z"></path></svg>'},2838:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m8.745 8 6.1 6.1a.527.527 0 1 1-.745.746L8 8.746l-6.1 6.1a.527.527 0 1 1-.746-.746l6.1-6.1-6.1-6.1a.527.527 0 0 1 .746-.746l6.1 6.1 6.1-6.1a.527.527 0 0 1 .746.746z"></path></svg>'},2943:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M4.653 13.854a.485.485 0 0 1 0-.708L10.24 8 4.653 2.854a.485.485 0 0 1 0-.708.54.54 0 0 1 .738 0l5.956 5.5a.485.485 0 0 1 0 .708l-5.956 5.5a.54.54 0 0 1-.738 0" clip-rule="evenodd"></path></svg>'},3039:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M8 1a.54.54 0 0 1 .538.538v1.436a.538.538 0 0 1-1.076 0V1.538A.54.54 0 0 1 8 1m0 11.488a.54.54 0 0 1 .538.538v1.436a.538.538 0 1 1-1.076 0v-1.436A.54.54 0 0 1 8 12.488m-7-4.49a.54.54 0 0 1 .538-.538h1.436a.539.539 0 1 1 0 1.077H1.538A.54.54 0 0 1 1 7.999m11.487 0a.54.54 0 0 1 .539-.538h1.435a.539.539 0 0 1 0 1.077h-1.435a.54.54 0 0 1-.539-.538m.92-5.404a.54.54 0 0 1 0 .76L11.97 4.79a.539.539 0 1 1-.76-.76l1.435-1.436a.54.54 0 0 1 .761 0m-10.813 0a.54.54 0 0 1 .76 0l1.437 1.435a.538.538 0 0 1-.761.761L2.594 3.354a.54.54 0 0 1 0-.76m2.197 8.613a.54.54 0 0 1 0 .761l-1.436 1.436a.538.538 0 0 1-.761-.761l1.436-1.436a.54.54 0 0 1 .76 0m6.418 0a.54.54 0 0 1 .761 0l1.436 1.436a.538.538 0 1 1-.76.76l-1.437-1.435a.54.54 0 0 1 0-.76M8 4.59a3.41 3.41 0 1 0 0 6.821A3.41 3.41 0 0 0 8 4.59"></path></svg>'},4108:e=>{"use strict";e.exports=s},4321:e=>{"use strict";e.exports=n},4337:e=>{"use strict";e.exports=c},5508:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2M6.5 7.5A.5.5 0 0 1 7 7h1.5v4.5h1a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1h1V8H7a.5.5 0 0 1-.5-.5"></path><path fill="#000" fill-rule="evenodd" d="M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14" clip-rule="evenodd"></path></svg>'},5562:e=>{"use strict";e.exports=i},6300:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M15 7.5a.52.52 0 0 1-.516.527H2.976L6.473 11.6a.535.535 0 0 1 0 .746.51.51 0 0 1-.73 0L1 7.5l4.743-4.846a.51.51 0 0 1 .73 0 .535.535 0 0 1 0 .746L2.976 6.973h11.508c.285 0 .516.236.516.527"></path></svg>'},6745:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0m1 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-7.676 2.228H7.34c-.213-1.138.621-2.13 1.375-3.025C9.28 6.532 9.8 5.914 9.8 5.328 9.8 4.5 9.2 3.9 7.976 3.9c-.816 0-1.572.36-2.268 1.092l-.648-.6C5.852 3.552 6.788 3 8.096 3c1.692 0 2.772.864 2.772 2.244 0 .864-.652 1.628-1.3 2.387-.71.831-1.413 1.655-1.244 2.597m.3 2.172c0 .48-.348.792-.768.792-.432 0-.78-.312-.78-.792s.348-.804.78-.804c.42 0 .768.324.768.804" clip-rule="evenodd"></path></svg>'},7213:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M16 2.443 5.851 14 0 8.115l1.45-1.538 4.31 4.334L14.463 1z" clip-rule="evenodd"></path></svg>'},7386:e=>{"use strict";e.exports=l},9244:e=>{"use strict";e.exports=o},9298:e=>{"use strict";e.exports=r}},t={};function d(o){var l=t[o];if(void 0!==l)return l.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,d),s.exports}d.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return d.d(t,{a:t}),t},d.d=(e,t)=>{for(var o in t)d.o(t,o)&&!d.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},d.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),d.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.p="";var u={};return d.p=window.jimuConfig.baseUrl,(()=>{"use strict";d.r(u),d.d(u,{__set_webpack_public_path__:()=>zo,default:()=>Mo});var e=d(7386),t=d(9244),o=d(4108),l=d(1888);const s=l.styled.div`
  height: 100%;
  flex: 1;
  overflow: auto;
`,a=o=>{const{active:l,children:a}=o;return(0,e.jsx)(s,{className:(0,t.classNames)("stepper",{"d-none":!l}),children:l&&a})};var n=d(4321),r=d(7213),i=d.n(r),c=function(e,t){var o={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(o[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(l=Object.getOwnPropertySymbols(e);s<l.length;s++)t.indexOf(l[s])<0&&Object.prototype.propertyIsEnumerable.call(e,l[s])&&(o[l[s]]=e[l[s]])}return o};const p=o=>{const l=window.SVG,{className:s}=o,a=c(o,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",s);return l?(0,e.jsx)(l,Object.assign({className:n,src:i()},a)):(0,e.jsx)("svg",Object.assign({className:n},a))},m=o=>{var l,s;const{className:a,themeInfo:r,selectedTheme:i,onSelect:c}=o,d=r.uri===i,u=t.React.useMemo(()=>{var e,o;const l=t.i18n.findLocale(window.locale,r.translatedLocales);return null!==(o=null===(e=r.i18nLabel)||void 0===e?void 0:e[l])&&void 0!==o?o:r.label},[r]),m=null!==(s=null===(l=r.styles)||void 0===l?void 0:l.mode)&&void 0!==s?s:"light",h="themes/default/"===r.uri||"dark"===m?"#ffffff":"#000000",f=((e,o)=>t.React.useMemo(()=>t.css`
    display: flex;
    flex-direction: column;
    align-items: center;
    > .btn {
      width: 100%;
      height:auto;
      background: var(--ref-palette-neutral-300);
      border: 2px solid transparent;
      &:hover:not(.active) {
        border: 2px solid var(--sys-color-primary-light);
      }
      &:not(:disabled):not(.disabled):active,
      &:not(:disabled):not(.disabled).active {
        background: var(--ref-palette-neutral-300);
        border: 2px solid var(--sys-color-primary-light);
      }
      > .theme-preview {
        width: 100%;
        height: 140px;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        background: url(${e}) no-repeat center;
        background-size: cover;
        .theme-preview--inner {
          font-size: small;
          text-align: center;
          line-height: 1;
          > img {
            width: 100%;
          }
          label {
            margin-bottom: 0;
            line-height: 1.25;
            font-size: 1.25rem;
            font-family: inherit;
            font-weight: 500;
            color: ${o};
          }
        }
        > label {
          white-space: nowrap;
          text-overflow: ellipsis;
          overflow: hidden;
          max-width: 100%;
          margin-top: .5rem;
          margin-bottom: 1rem;
        }
      }
    }
    > label {
      margin-bottom: 0;
      margin-top: 0.25rem;
    }
    + .theme-card {
      margin-left: 1rem;
    }
    &.active {
      position: relative;
      .check-ribbon {
        position: absolute;
        padding: .25rem;
        background: var(--sys-color-primary-light);
        inline-size: inherit;
        line-height: 1;
        z-index: 1;
        right: 0px;
        top: 0px;
        color: var(--ref-palette-white);
      }
    }
  `,[e,o]))(`${t.urlUtils.getAbsoluteRootUrl()}${r.uri}thumbnail.png`,h),g=(0,t.classNames)("theme-selector-card",a,{active:d});return(0,e.jsxs)("div",{className:g,css:f,children:[d&&(0,e.jsx)("span",{className:"check-ribbon",children:(0,e.jsx)(p,{"aria-hidden":"true"})}),(0,e.jsx)(n.Button,{className:"p-0",onClick:()=>{null==c||c(r.uri)},active:d,"aria-label":u,role:"radio","aria-checked":d,children:(0,e.jsx)("div",{className:"theme-preview",title:u,children:(0,e.jsx)("div",{className:"theme-preview--inner text-break",children:(0,e.jsx)(n.Label,{className:"mx-4",children:u})})})})]})},h={chooseTheme:"Theme",customTheme:"Customize",resetTheme:"Reset",backToMainThemePanel:"Back",customPaletteTitle:"Customize palette colors",customAppElementsTitle:"App elements",surfacePage:"Page",surfaceContainer:"Container",surfaceOverlay:"Overlay",primaryTip:"The main brand color used most often in the app, especially for active buttons, menus, and highlights. Three tones will be generated based on this input color to support various states and components.",secondaryTip:"A supporting color used to complement the primary color and style secondary elements. Three tones will be generated based on this input color to support various states and components.",functionalTip:"Colors used to show status like success, error, or warnings. Defaults follow common conventions and usually don\u2019t need to be changed. Three tones will be generated based on each input color to support various states and components.",neutralTip:"Neutral colors define the base tone of your application and apply to the surface colors and certain interactive elements.",optimizeColorChoices:"Optimize my color choices",optimizeColorChoicesTip:"This option adjusts your chosen brand and function colors, generating theme color tones for optimized contrast and display.",advancedColorSetting:"Advanced color setting",advancedColorSettingDescription:"Change color defaults to the themed elements across your app.",surfacePageTip:"Applies to pages, sections, and the main stage of the screen group.",surfaceContainerTip:"Applies to containers such as the widget container, card, list item, and table cells.",surfaceOverlayTip:"Applies to overlays, such as windows, tooltips, modals, or pop-ups.",interactiveElementDefaultTip:"Indicates the regular state of interactive elements, such as default buttons, dropdown buttons, and pagination.",interactiveElementSelectedTip:"Indicates the selected state of interactive elements, such as an active tab in a menu, or a toggled-on switch.",interactiveElementFocusTip:"Uses as the keyboard focus indicator color.",fontTip:"Used to control the font family used in headings and body.",headingTip:"Applies to titles and section headers configured with text headings.",bodyTip:"Applies to all other regular text content, such as form labels or descriptions.",addGoogleFonts:"Add Google Fonts",addGoogleFontTip:"You can add fonts by using a Google Fonts static URL.",exploreGoogleFonts:"Explore all font families on Google Fonts.",googleFontPlaceholder:"Enter a font URL. For example:",invalidGoogleFontTip:"Please enter a valid Google Font URL.",googleFontExistTip:"This Google Font already exists.",htmlSizeTip:"Adjust the overall text size to make reading easier or accommodate more content.",borderRadiusTip:"Control the overall style of the elements' border radius, such as containers, buttons, or input boxes.",definedByTheme:"Defined by theme",shadowTip:"Generally adds depth and layering to your app by applying shadows to elements' like widgets containers, pop-ups, or buttons.",componentsTip:"More customization specs for individual components.",buttonTip:"Customize the color and shape of primary and default buttons. By default, primary buttons use the primary theme color, while default buttons use the default state color of action elements.",inputFieldTip:"Applies to the colors of an input field, such as a text input, select, search box, or the regular state of checkboxes, radio buttons, and toggle switches.",linkTip:"Applies to link style and color.",yourCurrentTheme:"Your current theme",newThemes:"New themes",changeToNewThemeWarning:"You are selecting a new theme. Applying it will discard all your previous theme configurations. You can manually customize your settings again after switching to the new theme.",resetThemeWarningTitle:"Reset theme warning",resetThemeWarningTip:"Are you sure you want to reset the theme settings? This will discard all your current configurations and restore the theme to default settings."};var f=d(6745),g=d.n(f),y=function(e,t){var o={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(o[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(l=Object.getOwnPropertySymbols(e);s<l.length;s++)t.indexOf(l[s])<0&&Object.prototype.propertyIsEnumerable.call(e,l[s])&&(o[l[s]]=e[l[s]])}return o};const v=o=>{const l=window.SVG,{className:s}=o,a=y(o,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",s);return l?(0,e.jsx)(l,Object.assign({className:n,src:g()},a)):(0,e.jsx)("svg",Object.assign({className:n},a))},x=t.React.forwardRef((l,s)=>{const a=(0,t.useIntl)(),r=t.hooks.useTranslation(n.defaultMessages)("help"),[i,c]=t.React.useState("#");return t.React.useEffect(()=>{o.helpUtils.getBuildAppsHelpLink("change-app-theme").then(e=>{c(e)})},[]),(0,e.jsx)(n.Link,{ref:s,size:"sm",icon:!0,type:"tertiary",title:r,disableHoverEffect:!0,"aria-label":r,href:i,target:"_blank",className:(0,t.classNames)("theme-help-link p-0"),children:(0,e.jsx)(v,{autoFlip:!t.i18n.isSameLanguage(null==a?void 0:a.locale,"he")})})}),b=t.React.forwardRef((o,l)=>{const s=t.hooks.useTranslation(h,n.defaultMessages)("chooseTheme");return(0,e.jsxs)("div",{className:"d-flex justify-content-between align-items-center w-100",children:[(0,e.jsx)(n.Typography,{variant:"title1",className:"text-truncate mr-2",title:s,children:s}),(0,e.jsx)(x,{ref:l})]})}),j=l.styled.div`
  display: flex;
  flex-direction: column;
  height: 100%;
  .themes-pane {
    display: flex;
    flex-direction: column;
    height: 100%;
    overflow: auto;
    flex: 1 1 0%;
    > .themes-selectors {
      display: flex;
      flex-direction: column;
      > .theme-selector-card + .theme-selector-card {
        margin-top: 1rem;
      }
    }
  }
  > .btn-container {
    display: flex;
    > button {
      font-size: 1rem;
    }
  }
  .theme-help-link {
    color: var(--ref-palette-neutral-1000);
  }
  .theme-help-link:hover {
    color: var(--ref-palette-black);
  }
`,w=o=>{const{className:l,themeListInfo:s,disabled:a,selectedTheme:r,onChange:i,onCustomize:c}=o,d=t.hooks.useTranslation(h,n.defaultMessages),u=t.React.useMemo(()=>s.filter(e=>!e.isNewTheme),[s]),p=e=>{r!==e&&(null==i||i(e))};return(0,e.jsxs)(j,{className:(0,t.classNames)("classic-theme-selector",l),children:[(0,e.jsx)(n.PanelHeader,{className:"px-4 pt-4",title:(0,e.jsx)(b,{}),showClose:!1}),u&&(0,e.jsx)("div",{className:"themes-pane px-4 mt-4",children:(0,e.jsx)("div",{className:"themes-selectors",role:"radiogroup","aria-label":d("chooseTheme"),children:u.map(t=>(0,e.jsx)(m,{selectedTheme:r,themeInfo:t,onSelect:p},t.name))})}),u&&(0,e.jsx)("div",{className:"btn-container w-100 p-4",children:(0,e.jsx)(n.Button,{type:"primary",className:"flex-fill theme-setting--customize-btn text-truncate",onClick:()=>{null==c||c(r)},disabled:a,"aria-label":d("customTheme"),children:d("customTheme")})}),!u&&(0,e.jsx)("div",{className:"loading",children:d("loading")})]})};var C=d(3039),T=d.n(C),O=function(e,t){var o={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(o[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(l=Object.getOwnPropertySymbols(e);s<l.length;s++)t.indexOf(l[s])<0&&Object.prototype.propertyIsEnumerable.call(e,l[s])&&(o[l[s]]=e[l[s]])}return o};const N=o=>{const l=window.SVG,{className:s}=o,a=O(o,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",s);return l?(0,e.jsx)(l,Object.assign({className:n,src:T()},a)):(0,e.jsx)("svg",Object.assign({className:n},a))};var k=d(755),S=d.n(k),R=function(e,t){var o={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(o[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(l=Object.getOwnPropertySymbols(e);s<l.length;s++)t.indexOf(l[s])<0&&Object.prototype.propertyIsEnumerable.call(e,l[s])&&(o[l[s]]=e[l[s]])}return o};const I=o=>{const l=window.SVG,{className:s}=o,a=R(o,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",s);return l?(0,e.jsx)(l,Object.assign({className:n,src:S()},a)):(0,e.jsx)("svg",Object.assign({className:n},a))};var P=function(e,t){var o={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(o[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(l=Object.getOwnPropertySymbols(e);s<l.length;s++)t.indexOf(l[s])<0&&Object.prototype.propertyIsEnumerable.call(e,l[s])&&(o[l[s]]=e[l[s]])}return o};const F=(0,l.styled)("div")(({styleState:e,theme:t})=>({"--theme-primary":e.primary,"--theme-secondary":e.secondary,boxSizing:"content-box",border:`2px solid ${e.selected?t.sys.color.action.selected.default:t.sys.color.surface.paper}`,borderRadius:t.sys.shape.shape1,background:"dark"===e.mode?"#292525":"#fff",boxShadow:e.selected?t.sys.shadow.shadow2:t.sys.shadow.shadow1,cursor:"pointer",transition:t.sys.transitions.create(["border","box-shadow"]),width:"100%",height:"140px",outline:"none",position:"relative","&:hover":{border:`2px solid ${t.sys.color.action.selected.default}`,boxShadow:t.sys.shadow.shadow2}})),M=(0,l.styled)("div")(({theme:e})=>({position:"absolute",top:"-2px",right:"-2px",color:e.sys.color.action.selected.text,backgroundColor:e.sys.color.action.selected.default,border:`1px solid ${e.sys.color.action.selected.default}`,boxShadow:e.sys.shadow.shadow1,borderRadius:e.sys.shape.shape1,display:"flex",alignItems:"center",justifyContent:"center",width:22,height:22,zIndex:1})),z=(0,l.styled)(n.Typography)(({styleState:e})=>({position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",color:"dark"===e.mode?"#fff":"#000",textAlign:"center",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"})),B=(0,l.styled)("div")(({theme:e})=>({position:"absolute",left:0,bottom:0,background:"rgb(5 5 5 / 50%)",boxShadow:e.sys.shadow.shadow1,width:22,height:22,display:"flex",alignItems:"center",justifyContent:"center",zIndex:1})),A=e=>e.replace(/(fill|stroke|color)="(?!.*(none|var\(--theme-primary\)|var\(--theme-secondary\))).*?"/g,(e,t)=>e.includes("url")?e:`${t}="currentColor"`),D=o=>{var{className:l,src:s,primary:a="#007ADE",secondary:r="#876e90",mode:i="light",selected:c=!1,onSelect:d,info:u,themeModeVisible:m=!0}=o,h=P(o,["className","src","primary","secondary","mode","selected","onSelect","info","themeModeVisible"]);const f=t.React.useMemo(()=>{var e,o;const l=t.i18n.findLocale(window.locale,u.translatedLocales);return null!==(o=null===(e=u.i18nLabel)||void 0===e?void 0:e[l])&&void 0!==o?o:u.label},[u]);return(0,e.jsxs)(F,Object.assign({className:(0,t.classNames)("theme-setting-theme-card",l),styleState:{primary:a,secondary:r,selected:c,mode:i},tabIndex:0,onClick:d,role:"button","aria-pressed":c},h,{children:[c&&(0,e.jsx)(M,{children:(0,e.jsx)(p,{"aria-hidden":"true"})}),s&&(0,e.jsx)(n.Icon,{preProcessor:A,currentColor:!1,color:a,className:"w-100 h-100",icon:s}),f&&(0,e.jsx)(z,{styleState:{primary:a,secondary:r,selected:c,mode:i},variant:"title1",children:f}),m&&(0,e.jsx)(B,{children:"dark"===i?(0,e.jsx)(I,{size:16,"aria-label":"Dark mode"}):(0,e.jsx)(N,{size:16,"aria-label":"Light mode"})})]}))},E=(0,l.styled)("div")(({theme:e})=>({display:"flex",flexDirection:"column",height:"100%",".themes-pane":{display:"flex",flexDirection:"column",height:"100%",overflow:"auto",flex:"1 1 0%","> .theme-cards":{display:"flex",flexDirection:"column",gap:e.sys.spacing(4),"> .theme-selector-card + .theme-selector-card":{marginTop:e.sys.spacing(4)}}},"> .btn-container":{"> button":{fontSize:e.sys.typography.title2.fontSize}}})),L=o=>{var s;const{className:a,themeInfoList:r,selectedTheme:i,onChange:c,onCustomize:d}=o,u=t.hooks.useTranslation(h,n.defaultMessages),[p,m]=t.React.useState(""),f=(0,l.useTheme2)(),g=f.uri===i,y=(0,l.isSharedTheme)(i)||(0,l.isClassicSharedTheme)(i),[v,x]=t.React.useMemo(()=>(e=>{var t,o,s;const a=null===(s=null===(o=null===(t=e.mixin)||void 0===t?void 0:t.sharedTheme)||void 0===o?void 0:o.button)||void 0===s?void 0:s.bg;let n;if(a){const e=(0,l.createFromSource)({color:a,harmonize:!0});n=l.colorUtils.hexFromArgb(e.secondary.keyColor.toInt())}return[a,n]})(f),[f]),j=t.React.useMemo(()=>r.find(e=>!e.isNewTheme&&e.uri===i),[r,i]),w=t.React.useMemo(()=>r.filter(e=>e.isNewTheme),[r]),C=t.React.useMemo(()=>{var e;const t=r.find(e=>e.uri===i);return null===(e=null==t?void 0:t.themeCustomizable)||void 0===e||e},[i,r]),T=!g||y||!j&&!C,O=e=>{j&&j.uri!==e?m(e):c(e)};return(0,e.jsxs)(E,{className:(0,t.classNames)("new-theme-selector",a),children:[(0,e.jsx)("div",{className:"px-4 pt-4",children:(0,e.jsx)(b,{})}),j&&(0,e.jsxs)("div",{className:"px-4 mt-4",children:[(0,e.jsx)(n.Typography,{variant:"title2",children:u("yourCurrentTheme")}),(0,e.jsx)(D,{className:"mt-2",selected:!0,info:j,themeModeVisible:!1,mode:null!==(s=j.styles.mode)&&void 0!==s?s:"light",src:`../${j.uri}thumbnail.png`,onSelect:()=>{O(j.uri)}},j.name)]}),(0,e.jsxs)("div",{className:"themes-pane px-4 mt-4",children:[j&&(0,e.jsx)(n.Typography,{variant:"title2",children:u("newThemes")}),(0,e.jsx)("div",{className:"theme-cards mt-2",role:"radiogroup","aria-label":u("chooseTheme"),children:w.map(t=>{var o,s,a,n,r;const c=`../${t.uri}${t.thumbnail}`,d=(0,l.isSharedTheme)(t.uri),u=d?v:f.uri===t.uri?null!==(s=null===(o=f.src)||void 0===o?void 0:o.primary.color)&&void 0!==s?s:f.sys.color.primary.main:t.styles.primary,p=d?x:f.uri===t.uri?null!==(n=null===(a=f.src)||void 0===a?void 0:a.secondary.color)&&void 0!==n?n:f.sys.color.secondary.main:t.styles.secondary;return(0,e.jsx)(D,{info:t,primary:u,secondary:p,mode:null!==(r=t.styles.mode)&&void 0!==r?r:"light",selected:i===t.uri,src:c,themeModeVisible:!(0,l.isSharedTheme)(t.uri),onSelect:()=>{O(t.uri)}},t.name)})})]}),(0,e.jsx)("div",{className:"btn-container p-4 w-100",children:(0,e.jsx)(n.Button,{color:"primary",block:!0,variant:"outlined",onClick:()=>{null==d||d(i)},disabled:T,"aria-label":u("customTheme"),children:(0,e.jsx)("div",{className:"w-100 text-truncate",children:u("customTheme")})})}),!(null==w?void 0:w.length)&&(0,e.jsx)(n.Loading,{type:n.LoadingType.Secondary}),(0,e.jsx)(n.AlertPopup,{isOpen:!!p,severity:"warning",closable:!1,withIcon:!0,title:u("variableColorWarning"),onClickClose:()=>{m("")},onClickOk:()=>{c(p,!0),m("")},description:u("changeToNewThemeWarning")})]})},$=o=>{const{className:s,themeListInfo:a,selectedTheme:r,onChange:i,onCustomize:c}=o,d=n.hooks.useClassicThemeSelector(),u=(e,t)=>{r!==e&&(null==i||i(e,t))},p=()=>{null==c||c(r)};return(0,e.jsxs)(e.Fragment,{children:[d&&(0,e.jsx)(w,{className:(0,t.classNames)("theme-selector",s),themeListInfo:a,selectedTheme:r,onChange:u,disabled:(0,l.isClassicSharedTheme)(r),onCustomize:p}),!d&&(0,e.jsx)(L,{className:(0,t.classNames)("theme-selector",s),themeInfoList:a,selectedTheme:r,onChange:u,onCustomize:p})]})};var V=d(9298),U=d(2046),G=d.n(U),H=function(e,t){var o={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(o[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(l=Object.getOwnPropertySymbols(e);s<l.length;s++)t.indexOf(l[s])<0&&Object.prototype.propertyIsEnumerable.call(e,l[s])&&(o[l[s]]=e[l[s]])}return o};const K=o=>{const l=window.SVG,{className:s}=o,a=H(o,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",s);return l?(0,e.jsx)(l,Object.assign({className:n,src:G()},a)):(0,e.jsx)("svg",Object.assign({className:n},a))};var W=d(4337),_=function(e,t){var o={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(o[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(l=Object.getOwnPropertySymbols(e);s<l.length;s++)t.indexOf(l[s])<0&&Object.prototype.propertyIsEnumerable.call(e,l[s])&&(o[l[s]]=e[l[s]])}return o};const q=(0,l.styled)(W.ColorPicker)(e=>{var t;return`\n    width: 3rem;\n    height: 3rem;\n    box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.15);\n    transition: box-shadow 0.15s ease-out;\n    border-radius: 100%;\n    outline: 0;\n    color: white;\n    background-color: ${null!==(t=e.color)&&void 0!==t?t:"var(--light-500)"};\n    &:hover {\n      box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.5);\n    }\n  `}),Y=o=>{const{className:l}=o,s=_(o,["className"]),a=(0,t.classNames)(l,"primary-color-picker");return(0,e.jsx)(q,Object.assign({className:a,icon:(0,e.jsx)(K,{}),type:"icon-only"},s))},Q=o=>{const{className:l,label:s,value:a,onChange:n}=o,r=(0,t.classNames)("single-color-configurator",l,"d-flex flex-column");return(0,e.jsxs)("div",{className:r,children:[(0,e.jsx)("div",{className:"jumbo-color-picker",children:(0,e.jsx)(Y,{className:"mx-auto mb-2",color:a,"aria-label":s,onChange:n})}),(0,e.jsx)("label",{children:s})]})};var X=d(5562);const J=l.styled.div(({theme:e})=>{var t,o,l,s,a,n,r;return`\n    position: relative;\n    padding-bottom: 1.5rem;\n    > i {\n      font-style: normal;\n      min-width: 1.25rem;\n      text-align: center;\n    }\n    .slider-rules {\n      position: absolute;\n      bottom: 0;\n      left: 2.25rem;\n      right: 2.25rem;\n      font-size: ${null===(o=null===(t=null==e?void 0:e.typography)||void 0===t?void 0:t.sizes)||void 0===o?void 0:o.body2};\n      color: ${null===(s=null===(l=null==e?void 0:e.colors)||void 0===l?void 0:l.palette)||void 0===s?void 0:s.dark[400]};\n      > span {\n        display: inline-block;\n        position: absolute;\n        bottom: 0;\n        &.active {\n          color: ${null===(a=null==e?void 0:e.body)||void 0===a?void 0:a.color};\n          font-size: ${null===(r=null===(n=null==e?void 0:e.typography)||void 0===n?void 0:n.sizes)||void 0===r?void 0:r.body1};\n          margin-bottom: -1px;\n        }\n      }\n    }\n  `});class Z extends t.React.PureComponent{constructor(){super(...arguments),this.onFontSizeChange=e=>{const t=e.currentTarget.value,o=this.props.options[t-1];this.props&&this.props.onChange&&this.props.onChange(o)},this.i18n=e=>{const t=this.props.intl;return t?t.formatMessage({id:e,defaultMessage:n.defaultMessages[e]}):e}}render(){const{fontSize:o,options:l,className:s}=this.props,a=(0,t.classNames)("setting--fontsize-selector",s,"d-flex align-items-center"),r=null===window||void 0===window?void 0:window._appState.appContext.isRTL,i=l?l.length:1,c=l.length>1?100/(l.length-1):0;let d=1;return l&&l.some((e,t)=>e===o&&(d=t+1,!0)),(0,e.jsx)(J,{className:a,children:(null==l?void 0:l.length)>0?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("i",{style:{fontSize:r?"18px":"12px"},children:"A"}),(0,e.jsx)(n.Slider,{title:this.i18n("variableFontSizeBase"),"aria-label":this.i18n("variableFontSizeBase"),min:1,max:i,value:d,className:"mx-4",onChange:this.onFontSizeChange}),(0,e.jsx)("div",{className:"slider-rules",children:l.map((o,l)=>(0,e.jsx)("span",{className:d===l+1?"active":void 0,style:{left:l*c+"%",transform:"translateX(-50%)"},children:t.utils.formatPercentageNumber(o)},l))}),(0,e.jsx)("i",{style:{fontSize:r?"12px":"18px"},children:"A"})]}):null})}}Z.defaultProps={options:["87.5%","100%","125%"]};const ee=(0,t.injectIntl)(Z),te=["75%","87.5%","100%","125%"];class oe extends t.React.PureComponent{constructor(){super(...arguments),this.onFontChange=e=>{this.props.onChange({typography:{fontFamilyBase:e}})},this.onFontSizeChange=e=>{this.props.onChange({typography:{fontSizeRoot:e}})},this.i18n=e=>{const t=this.props.intl;return t?t.formatMessage({id:e,defaultMessage:n.defaultMessages[e]}):e}}render(){var o,l;const{className:s,themeVariables:a}=this.props,n=(0,t.classNames)("jimu-builder-theme-fontset-configurator",s,"w-100");let r=null===(o=null==a?void 0:a.typography)||void 0===o?void 0:o.fontFamilyBase;return"string"==typeof r&&(r=r.split(",")[0].replace(/['"]+/g,"")),(0,e.jsxs)("div",{className:n,children:[(0,e.jsx)(V.SettingRow,{children:(0,e.jsx)(X.FontFamilySelector,{font:r,"aria-label":this.i18n("themeSettingThemeFont"),onChange:e=>{this.onFontChange(e)}})}),(0,e.jsx)(V.SettingRow,{children:(0,e.jsx)(ee,{className:"w-100",fontSize:null===(l=null==a?void 0:a.typography)||void 0===l?void 0:l.fontSizeRoot,options:te,onChange:e=>{this.onFontSizeChange(e)}})})]})}}const le=(0,t.injectIntl)(oe);var se=d(2943),ae=d.n(se),ne=function(e,t){var o={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(o[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(l=Object.getOwnPropertySymbols(e);s<l.length;s++)t.indexOf(l[s])<0&&Object.prototype.propertyIsEnumerable.call(e,l[s])&&(o[l[s]]=e[l[s]])}return o};const re=o=>{const l=window.SVG,{className:s}=o,a=ne(o,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",s);return l?(0,e.jsx)(l,Object.assign({className:n,src:ae()},a)):(0,e.jsx)("svg",Object.assign({className:n},a))};var ie=d(6300),ce=d.n(ie),de=function(e,t){var o={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(o[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(l=Object.getOwnPropertySymbols(e);s<l.length;s++)t.indexOf(l[s])<0&&Object.prototype.propertyIsEnumerable.call(e,l[s])&&(o[l[s]]=e[l[s]])}return o};const ue=o=>{const l=window.SVG,{className:s}=o,a=de(o,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",s);return l?(0,e.jsx)(l,Object.assign({className:n,src:ce()},a)):(0,e.jsx)("svg",Object.assign({className:n},a))},pe=l.styled.div`
  display: flex;
  flex-direction: column;
  height: 100%;
  .theme-quick-style {
    height: 100%;
    flex: 1 1 0%;
    overflow: auto;
  }
  .back-main-btn {
    font-size: 1rem;
    font-weight: 500;
    > svg {
      position: relative;
      top: -2px;
    }
  }
  .focus-indicator {
    width: unset;
    height: unset;
    padding: 0px;
    border-radius: 100%;
    .color-block {
      width: unset;
      height: unset;
      border-radius: 100%;
      .color-presenter {
        width: 20px;
        height: 20px;
        border-width: 0;
        border-radius: 100%;
        outline: 1px solid rgba(255,255,255, 0.15);
        margin: -2px;
      }
    }
  }
`,me=o=>{var l,s;const{className:a,theme:r,onChange:i,onReset:c,onBack:d,onAdvance:u}=o,p=t.hooks.useTranslation(h,n.defaultMessages),m=(0,t.classNames)("jimu-builder-theme-quickstyler",a),f=t.React.useRef(null),g=t.React.useRef(null);t.React.useEffect(()=>{(0,t.focusElementInKeyboardMode)(f.current)},[]),(0,n.useTrapFocusByBoundaryNodes)(f,g);return(0,e.jsxs)(pe,{className:m,children:[(0,e.jsx)("div",{className:"jimu-widget-setting--header px-1 pb-0",children:(0,e.jsxs)(n.Button,{ref:f,className:"back-main-btn",type:"tertiary",onClick:d,"aria-label":p("backToMainThemePanel"),children:[(0,e.jsx)(ue,{className:"mr-1",autoFlip:!0}),p("backToMainThemePanel")]})}),r&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"theme-quick-style",children:[(0,e.jsxs)(V.SettingSection,{title:p("themeSettingThemeColors"),role:"group","aria-label":p("themeSettingThemeColors"),children:[(0,e.jsx)(V.SettingRow,{flow:"wrap",className:"justify-content-center",children:(0,e.jsx)(Q,{label:p("variableColorPrimary"),"aria-label":p("variableColorPrimary"),value:null===(l=null==r?void 0:r.colors)||void 0===l?void 0:l.primary,className:"m-auto",onChange:e=>{((e,t)=>{null==i||i({colors:{[e]:t}})})("primary",e)}})}),(0,e.jsx)(V.SettingRow,{children:(0,e.jsxs)(n.Button,{type:"tertiary",className:"w-100 p-0 d-flex justify-content-between align-items-center",onClick:u,"aria-label":p("themeSettingThemeColorAdvanced"),children:[p("themeSettingThemeColorAdvanced"),(0,e.jsx)(re,{className:"m-0",autoFlip:!0})]})}),(0,e.jsx)(V.SettingRow,{label:p("focusIndicator"),children:(0,e.jsx)(W.ColorPicker,{className:"focus-indicator ml-3",placement:"right-end",color:null===(s=null==r?void 0:r.focusedStyles)||void 0===s?void 0:s.color,title:p("focusIndicator"),"aria-label":p("focusIndicator"),onChange:e=>{var t,o;t="color",o=e,null==i||i({focusedStyles:{[t]:o}})}})})]}),(0,e.jsx)(V.SettingSection,{title:p("themeSettingThemeFont"),children:(0,e.jsx)(V.SettingRow,{children:(0,e.jsx)(le,{themeVariables:r,onChange:i})})})]}),(0,e.jsx)(V.SettingSection,{className:"d-flex",children:(0,e.jsx)(n.Button,{ref:g,className:"flex-fill",type:"secondary",onClick:c,"aria-label":p("resetTheme"),children:p("resetTheme")})})]})]})};var he=d(655),fe=d.n(he),ge=function(e,t){var o={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(o[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(l=Object.getOwnPropertySymbols(e);s<l.length;s++)t.indexOf(l[s])<0&&Object.prototype.propertyIsEnumerable.call(e,l[s])&&(o[l[s]]=e[l[s]])}return o};const ye=o=>{const l=window.SVG,{className:s}=o,a=ge(o,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",s);return l?(0,e.jsx)(l,Object.assign({className:n,src:fe()},a)):(0,e.jsx)("svg",Object.assign({className:n},a))},ve=l.styled.div(({color:e})=>`\n    width: 2rem;\n    height: 1.25rem;\n    background: ${e};\n    margin-left: -1px;\n  `),xe=o=>{const{colors:l,hideAlertColors:s,darkTheme:a}=o,n=t.React.useMemo(()=>{const o=[];let n,r;return Object.keys(t.ThemeThemeColorKeys).forEach((a,i)=>{const c=Object.keys(t.ThemeThemeAlertColorKeys);s&&c.includes(a)||("Dark"===a?n=i:"Light"===a&&(r=i),o.push((0,e.jsx)(ve,{className:"color-palette-block border border-light-800",color:l[t.ThemeThemeColorKeys[a]]},a)))}),a&&n>-1&&r>-1&&([o[n],o[r]]=[o[r],o[n]]),o},[l,a,s]);return(0,e.jsx)(e.Fragment,{children:l?(0,e.jsx)("div",{className:"color-palette d-flex flex-fill",children:n}):(0,e.jsx)("span",{children:"---"})})};class be extends t.React.PureComponent{constructor(o){super(o),this._optionsToKeep=(0,t.Immutable)([]),this.getColorPaletteOptions=o=>{const l=[];let s=!1;const a=this.props.isDarkTheme;if(a&&(o=o.merge({light:o.dark,dark:o.light})),this._optionsToKeep.concat(je).forEach((t,r)=>{const i=o.merge(t);let c=!1;s||(s=this.arePalettesEqual(o,i),s&&(c=!0)),l.push((0,e.jsx)(n.DropdownItem,{className:"py-2",onClick:()=>{this.onPaletteClick(i)},active:c,"aria-label":`${this.i18n("customColors")} ${r+1}`,children:(0,e.jsx)(xe,{colors:i,hideAlertColors:!1,darkTheme:a})},r+1))}),!s){const s=(0,e.jsx)(n.DropdownItem,{className:"py-2",onClick:()=>{this.onPaletteClick(o)},active:!0,children:(0,e.jsx)(xe,{colors:o,hideAlertColors:!1,darkTheme:a})},0);l.splice(0,0,s),this._optionsToKeep=(0,t.Immutable)([o])}return l},this.i18n=e=>{const t=this.props.intl;return t?t.formatMessage({id:e,defaultMessage:n.defaultMessages[e]}):e},this.state={menuOpened:!1}}onPaletteClick(e){this.props&&this.props.onChange&&this.props.onChange(e)}arePalettesEqual(e,t){if(!e||!t)return!1;return!Object.keys(e).some(o=>e[o].toLowerCase()!==t[o].toLowerCase())}render(){const{colors:o,className:l,style:s}=this.props,a=(0,t.classNames)("setting--palette-selector",l);return(0,e.jsxs)(n.Dropdown,{style:s,direction:"right",menuRole:"listbox",isOpen:this.state.menuOpened,toggle:e=>{this.setState({menuOpened:!this.state.menuOpened})},className:a,activeIcon:!0,menuItemCheckMode:"singleCheck","aria-label":this.i18n("variableCustomPalette"),children:[(0,e.jsx)(n.DropdownButton,{type:"tertiary",className:"p-0",role:"combobox",arrow:(0,e.jsx)(ye,{})}),(0,e.jsx)(n.DropdownMenu,{children:this.getColorPaletteOptions(o)})]})}}const je=(0,t.Immutable)([{primary:"#0a77c6",secondary:"#ecf1f8",info:"#4aa0e2",success:"#7ed321",warning:"#f8e71c",danger:"#f6143a",light:"#f8f8f8",dark:"#080808"},{primary:"#ff7121",secondary:"#2d1754",info:"#09acf8",success:"#00cca5",warning:"#ffab21",danger:"#f6146f",light:"#fff",dark:"#333"},{primary:"#21cfca",secondary:"#242933",info:"#00b7ff",success:"#07ea58",warning:"#f8e71c",danger:"#d0021b",light:"#fff",dark:"#000"},{primary:"#f74d61",secondary:"#153054",info:"#00b7ff",success:"#07ea58",warning:"#f8e71c",danger:"#ff001f",light:"#fff",dark:"#111"},{primary:"#4ccded",secondary:"#1b476d",info:"#00b7ff",success:"#07ea58",warning:"#f8e71c",danger:"#d0021b",light:"#fff",dark:"#111"},{primary:"#442b57",secondary:"#ffd11c",info:"#09acf8",success:"#00cca5",warning:"#ffab21",danger:"#f6146f",light:"#fff",dark:"#2d3235"}]),we=(0,t.injectIntl)(be);var Ce=function(e,t){var o={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(o[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(l=Object.getOwnPropertySymbols(e);s<l.length;s++)t.indexOf(l[s])<0&&Object.prototype.propertyIsEnumerable.call(e,l[s])&&(o[l[s]]=e[l[s]])}return o};const Te=(0,l.styled)("div",{shouldForwardProp:e=>"color"!==e})(e=>t.css`
    width: 20px;
    height: 28px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: space-between;
    color: ${e.color};
    .color-picker-block {
      width: unset;
      height: unset;
      padding: 0px;
      border-radius: 100%;
      .color-block {
        border-radius: 100%;
        width: unset;
        height: unset;
        .color-presenter {
          outline: 1px solid rgba(255,255,255, 0.15);
          transition: outline .15s ease-out;
          border-radius: 100%;
          margin: -2px;
          width: 20px;
          height: 20px;
          border-width: 0;
          &:hover {
            outline: 3px solid rgba(255,255,255,.5);
          }
        }
      }
    }
    .cert {
      display: block;
      width: 0;
      height: 0;
      border: 5px solid transparent;
      border-top-color: currentColor;
      border-bottom-width: 0;
    }
  `),Oe=t.React.forwardRef((o,l)=>{const{className:s,color:a}=o,n=Ce(o,["className","color"]);return(0,e.jsxs)(Te,{className:(0,t.classNames)("custom-color-picker",s),color:a,children:[(0,e.jsx)(W.ColorPicker,Object.assign({color:a},n,{ref:l})),(0,e.jsx)("span",{className:"cert"})]})}),Ne=l.styled.div`
  display: flex;
  justify-content: space-between;
  .custom-color-picker {
    margin-right: 6px;
    margin-bottom: 10px;
  }
  .theme-color-configurator--shades {
    width: 1.25rem;
    border: 1px solid var(--light-500);
    > span {
      display: block;
      width: 100%;
      height: 1.25rem;
      background: currentColor;
      &.main-color-shade {
        &::after {
          content: ' ';
          display: block;
          width: 0;
          height: 0;
          border: 4px solid transparent;
          border-left-color: var(--dark-500);
          position: relative;
          left: -5px;
          top: 50%;
          transform: translateY(-50%);
        }
      }
    }
  }
`,ke=o=>{const{colors:l,onChange:s}=o,a=null==l?void 0:l.palette,r=t.React.useMemo(()=>{let e=(0,t.Immutable)({});return Object.keys(t.ThemeThemeColorKeys).forEach(o=>{e=e.set(t.ThemeThemeColorKeys[o],l[t.ThemeThemeColorKeys[o]])}),e},[l]),i=t.hooks.useTranslation(n.defaultMessages);return(0,e.jsx)(Ne,{children:Object.keys(r).map(t=>{const o=i(`variableColor${t.charAt(0).toUpperCase()+t.slice(1)}`),l="light"===t?"100":"dark"===t?"900":"500",c="string"==typeof t?i(`variableColor${t.charAt(0).toUpperCase()+t.slice(1)}`):"";return(0,e.jsxs)("div",{className:"theme-color-configurator--column",children:[(0,e.jsx)(n.Tooltip,{showArrow:!0,placement:"top",title:c,children:(0,e.jsx)(Oe,{style:{color:r[t]},id:`colorConfigurator_colorPicker_${t}`,color:r[t],"aria-label":c,onChange:e=>{s(t,e)}})}),(0,e.jsx)("div",{className:"theme-color-configurator--shades",children:a&&Object.keys(a[t]).map(s=>(0,e.jsx)("span",{title:`${o}-${s}${s===l?` (${o})`:""}: ${a[t][s]}`,className:s===l?"main-color-shade":void 0,style:{color:a[t][s]}},`${t}-${s}`))})]},t)})})},Se=l.styled.div`
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  width: 100%;
  height: 100%;
  .back-main-btn {
    font-size: 1rem;
    font-weight: 500;
    > svg {
      position: relative;
      top: -2px;
    }
  }
  .palette-selector {
    display: flex;
  }
  .setting--palette-selector {
    margin-top: -2px;
  }
`,Re=o=>{const{className:l,theme:s,onChange:a,onBack:r,onReset:i}=o,c=t.React.useId(),d=t.hooks.useTranslation(h,n.defaultMessages),u=t.React.useRef(null),p=t.React.useRef(null);t.React.useEffect(()=>{(0,t.focusElementInKeyboardMode)(u.current)},[]),(0,n.useTrapFocusByBoundaryNodes)(u,p);const m=t.React.useMemo(()=>{let e=(0,t.Immutable)({});return Object.keys(t.ThemeThemeColorKeys).forEach(o=>{e=e.set(t.ThemeThemeColorKeys[o],null==s?void 0:s.colors[t.ThemeThemeColorKeys[o]])}),e},[null==s?void 0:s.colors]),f=(0,t.classNames)("theme-color-configurator",l);return(0,e.jsxs)(Se,{className:f,children:[(0,e.jsx)("div",{className:"jimu-widget-setting--header px-1 pb-0",children:(0,e.jsxs)(n.Button,{ref:u,className:"back-main-btn",type:"tertiary",onClick:r,"aria-label":d("backToMainThemePanel"),children:[(0,e.jsx)(ue,{className:"mr-1",autoFlip:!0}),d("backToMainThemePanel")]})}),(0,e.jsxs)(V.SettingSection,{title:d("themeSettingThemeColors"),role:"group","aria-label":d("themeSettingThemeColors"),"aria-describedby":c,className:"widget-builder-themes--pane flex-fill",children:[(0,e.jsx)("p",{id:c,className:"text-dark-400 text-break",children:d("themeSettingThemeColorsDescription")}),(0,e.jsxs)("div",{className:"palette-selector",children:[(0,e.jsx)(ke,{colors:null==s?void 0:s.colors,onChange:(e,t)=>{null==a||a({colors:{[e]:t}})}}),(0,e.jsx)(we,{className:"d-block",colors:m,isDarkTheme:s.darkTheme,onChange:e=>{null==a||a({colors:e})}})]})]}),(0,e.jsx)(V.SettingSection,{className:"d-flex",children:(0,e.jsx)(n.Button,{ref:p,className:"flex-fill",type:"secondary",onClick:i,"aria-label":d("resetTheme"),children:d("resetTheme")})})]})};var Ie=function(e,t){var o={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(o[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(l=Object.getOwnPropertySymbols(e);s<l.length;s++)t.indexOf(l[s])<0&&Object.prototype.propertyIsEnumerable.call(e,l[s])&&(o[l[s]]=e[l[s]])}return o};const Pe=(0,l.styled)(W.ColorPicker)(({styleState:e})=>{const{color:t}=e;return{width:"20px",height:"20px",backgroundColor:t,borderRadius:"50%"}}),Fe=["#FF6F61","#6B5B95","#88B04B","#F7CAC9","#92A8D1","#955251","#B565A7","#009B77","#DD4124","#45B8AC"],Me=t.React.forwardRef((o,l)=>{const{color:s,onChange:a,showIcon:n=!0}=o,r=Ie(o,["color","onChange","showIcon"]),i=t.React.useRef(null),c=t.hooks.useForkRef(i,l);return(0,e.jsx)(Pe,Object.assign({ref:c,color:s,styleState:o,icon:n?(0,e.jsx)(K,{size:"m"}):null,type:"icon-only",placement:"bottom-start",className:"widget-theme-setting-color-selector",onChange:a,presetColors:Fe},r))});var ze=d(5508),Be=d.n(ze),Ae=function(e,t){var o={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(o[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(l=Object.getOwnPropertySymbols(e);s<l.length;s++)t.indexOf(l[s])<0&&Object.prototype.propertyIsEnumerable.call(e,l[s])&&(o[l[s]]=e[l[s]])}return o};const De=o=>{const l=window.SVG,{className:s}=o,a=Ae(o,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",s);return l?(0,e.jsx)(l,Object.assign({className:n,src:Be()},a)):(0,e.jsx)("svg",Object.assign({className:n},a))};var Ee=function(e,t){var o={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(o[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(l=Object.getOwnPropertySymbols(e);s<l.length;s++)t.indexOf(l[s])<0&&Object.prototype.propertyIsEnumerable.call(e,l[s])&&(o[l[s]]=e[l[s]])}return o};const Le=o=>{const{className:l,size:s="default",tag:a="button",tooltip:r,enterDelay:i=300}=o,c=Ee(o,["className","size","tag","tooltip","enterDelay"]),d=(0,t.useIntl)();return(0,e.jsx)(n.Tooltip,Object.assign({title:r,enterDelay:i},c,{children:(0,e.jsx)(n.Button,{size:s,variant:"text",icon:!0,tag:a,className:(0,t.classNames)("widget-theme-setting-help-tooltip p-0",l),disableRipple:!0,disableHoverEffect:!0,children:(0,e.jsx)(De,{size:"sm"===s?"s":"lg"===s?"l":"m",autoFlip:!t.i18n.isSameLanguage(null==d?void 0:d.locale,"he")})})}))},$e=(0,l.styled)("div")(({theme:e})=>({width:"100%",display:"flex",flexDirection:"column",".label-row-header":{width:"100%",display:"flex",alignItems:"center"},".label-row-content":{width:"100%",flexGrow:1,marginTop:e.sys.spacing(2)}})),Ve=o=>{const{className:l,size:s="default",label:a,tooltip:r,variant:i="title2",color:c,children:d}=o;return(0,e.jsxs)($e,{className:(0,t.classNames)("label-row",l),children:[(0,e.jsxs)("div",{className:"label-row-header",children:[(0,e.jsx)(n.Typography,{className:(0,t.classNames)({"flex-grow-1":"sm"!==s}),variant:i,color:c,children:a}),r&&(0,e.jsx)(Le,{className:"ml-2 flex-shrink-0",size:s,tooltip:r})]}),(0,e.jsx)("div",{className:"label-row-content",children:d})]})};var Ue=d(778),Ge=d.n(Ue),He=function(e,t){var o={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(o[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(l=Object.getOwnPropertySymbols(e);s<l.length;s++)t.indexOf(l[s])<0&&Object.prototype.propertyIsEnumerable.call(e,l[s])&&(o[l[s]]=e[l[s]])}return o};const Ke=o=>{const l=window.SVG,{className:s}=o,a=He(o,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",s);return l?(0,e.jsx)(l,Object.assign({className:n,src:Ge()},a)):(0,e.jsx)("svg",Object.assign({className:n},a))},We={light:0,main:1,dark:2,text:3},_e=(0,l.styled)("div")(({theme:e,styleState:t})=>({display:"flex",gap:`${t.gap}px`,height:"20px","> div":{flex:"1 1 auto",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",lineHeight:1},"> div:first-of-type":{borderTopLeftRadius:e.sys.shape.shape1,borderBottomLeftRadius:e.sys.shape.shape1},"> div:last-of-type":{borderTopRightRadius:e.sys.shape.shape1,borderBottomRightRadius:e.sys.shape.shape1}})),qe=["text"],Ye=o=>{const{className:l,gap:s=1,contrastText:a=!1,contrastTextColor:r,exclude:i=qe,value:c}=o,d=t.hooks.useTranslation(n.defaultMessages),u=Object.assign({gap:s},o);return(0,e.jsx)(_e,{className:(0,t.classNames)("color-setting-color-strip",l),styleState:u,children:(p=Object.entries(c),p.sort((e,t)=>{var o,l;return(null!==(o=We[e[0]])&&void 0!==o?o:0)-(null!==(l=We[t[0]])&&void 0!==l?l:0)})).filter(([e])=>!i.includes(e)).map(([t,o])=>{const l=["light","main","dark","text"].includes(t)?d(`${t}Color`):t;return(0,e.jsx)("div",{title:l,style:{backgroundColor:o,color:r},children:a&&"A"},t)})});var p},Qe=(0,l.styled)("div")(({theme:e})=>({display:"flex",justifyContent:"space-between",".jimu-typography":{width:"calc(100% - 152px)"},".color-setting-controls":{display:"flex",width:"144px",marginLeft:e.sys.spacing(2),".color-setting-color-strip":{marginLeft:e.sys.spacing(1),flexGrow:1}}})),Xe=o=>{var l,s;const{className:a,label:r,value:i,displayValue:c,stripColors:d,disableAlpha:u=!0,onChange:p,onReset:m}=o,h=null!==(l=null==i?void 0:i.color)&&void 0!==l?l:null==c?void 0:c.color,f=null===(s=null==i?void 0:i.harmonize)||void 0===s||s;return(0,e.jsxs)(Qe,{className:(0,t.classNames)("widget-theme-setting-color-setting",a),children:[(0,e.jsx)(n.Typography,{className:"text-truncate",variant:"title3",color:"paperHint",title:r,children:r}),(0,e.jsxs)("div",{className:"color-setting-controls",children:[(0,e.jsx)(Me,{color:h,showIcon:!1,resettable:!0,disableAlpha:u,onChange:e=>{p({color:e,harmonize:f})},onReset:m}),(0,e.jsx)(Ye,{contrastText:!0,contrastTextColor:d.text,value:d,gap:0})]})]})},Je=["#777777","#FF6F61","#6B5B95","#88B04B","#F7CAC9","#92A8D1","#955251","#B565A7","#009B77","#45B8AC"],Ze=(0,l.styled)("div")(({theme:e})=>({display:"flex",alignItems:"center",padding:e.sys.spacing(2),backgroundColor:e.sys.color.action.disabled.default,borderRadius:e.sys.shape.shape1,".widget-theme-setting-color-selector":{width:"20px",height:"20px",borderRadius:"50%"},".color-setting-color-strip":{flexGrow:1,height:"16px"}})),et=t.React.forwardRef((o,l)=>{var s,a;const{className:n,value:r,displayValue:i,stripColors:c,onChange:d,onReset:u}=o,p=null!==(s=null==r?void 0:r.color)&&void 0!==s?s:null==i?void 0:i.color,m=null===(a=null==r?void 0:r.harmonize)||void 0===a||a;return(0,e.jsxs)(Ze,{ref:l,className:(0,t.classNames)("widget-theme-setting-neutral-color-setting",n),children:[(0,e.jsx)(Me,{showIcon:!1,resettable:!0,disableAlpha:!0,presetColors:Je,color:p,onChange:e=>{d({color:e,harmonize:m})},onReset:u}),(0,e.jsx)(Ye,{className:"px-1",gap:0,value:c})]})});var tt=function(e,t){var o={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(o[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(l=Object.getOwnPropertySymbols(e);s<l.length;s++)t.indexOf(l[s])<0&&Object.prototype.propertyIsEnumerable.call(e,l[s])&&(o[l[s]]=e[l[s]])}return o};const ot=(e,t)=>{if(null!=e&&""!==e)return`var(--ref-palette-${e}-${t})`},lt=o=>{const{className:s,name:a,size:n=15,colors:r,value:i,onChange:c}=o,d=tt(o,["className","name","size","colors","value","onChange"]),u=t.hooks.useTranslation(),p=t.React.useMemo(()=>Object.entries(r).map(([e,t])=>({color:t,label:`${t}, ${u(`variableColor${l.utils.uppercaseFirstLetter(a)}`)}-${e}`,value:ot(a,e)})),[a,r,u]);return(0,e.jsx)(W.ColorSwatch,Object.assign({className:s,size:n,fill:!0,shape:"rounded",color:i,colors:p,onChange:c},d))};var st=function(e,t){var o={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(o[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(l=Object.getOwnPropertySymbols(e);s<l.length;s++)t.indexOf(l[s])<0&&Object.prototype.propertyIsEnumerable.call(e,l[s])&&(o[l[s]]=e[l[s]])}return o};const at=(e,t)=>{if(null!=e&&""!==e)return`var(--sys-color-${e}-${t})`},nt=o=>{const{className:s,colorScheme:a,size:n=20,value:r,onChange:i}=o,c=st(o,["className","colorScheme","size","value","onChange"]),d=t.hooks.useTranslation(),u=t.React.useMemo(()=>l.BrandFunctionColorNames.map(e=>{const t=a[e].main;return{color:t,label:`${t}, ${d(`variableColor${l.utils.uppercaseFirstLetter(e)}`)}`,value:at(e,"main")}}),[a,d]);return(0,e.jsx)(W.ColorSwatch,Object.assign({className:s,size:n,fill:!1,shape:"rounded",color:r,colors:u,onChange:i},c))};var rt=function(e,t){var o={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(o[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(l=Object.getOwnPropertySymbols(e);s<l.length;s++)t.indexOf(l[s])<0&&Object.prototype.propertyIsEnumerable.call(e,l[s])&&(o[l[s]]=e[l[s]])}return o};const it="exb-theme-color-picker",ct=(0,l.styled)("div")(({theme:e})=>({width:"275px",padding:e.sys.spacing(2,4),color:e.sys.color.surface.overlayText,".jimu-color-picker-sketch":{backgroundColor:"transparent"}})),dt=o=>{const{className:s,color:a,value:r,onReset:i,onChange:c,standardColors:d,resettable:u=!0,recentColorsVisibility:p=!0,themeMainColorVisibility:m=!0,specificTheme:h}=o,f=rt(o,["className","color","value","onReset","onChange","standardColors","resettable","recentColorsVisibility","themeMainColorVisibility","specificTheme"]),g=t.hooks.useTranslation(n.defaultMessages),y=(0,l.useTheme2)(),v=null!=h?h:y,x=v.ref.palette,b=v.sys.color,j=t.React.useRef(r),w=t.React.useRef(!1),[C,T]=t.React.useState();t.React.useEffect(()=>{var e,o;const l=null!==(e=t.utils.readLocalStorage(it))&&void 0!==e?e:"";let s=""!==l?null===(o=l.split("|"))||void 0===o?void 0:o.slice(0,8):[];s=s.filter(e=>e&&"undefined"!==e);const a=s.map(e=>({label:e,value:e,color:e}));T(a)},[]),t.hooks.useUnmount(()=>{if(w.current&&r!==j.current){let e=(0,W.serializeRecentColorString)(a);e=""!==e?`${a}|`+e:a,t.utils.setLocalStorage(it,e)}});const O=e=>{w.current=!1,null==c||c(e)};return(0,e.jsxs)(ct,Object.assign({className:(0,t.classNames)("simple-theme-color-panel",s)},f,{children:[(0,e.jsxs)(Ve,{label:g("themeColor"),tooltip:g("themeColorTip"),children:[m&&(0,e.jsx)(nt,{value:r,colorScheme:b,onChange:O}),(0,e.jsx)(lt,{className:(0,t.classNames)({"mt-3":m}),name:"neutral",value:r,colors:x.neutral,onChange:O})]}),!!(null==d?void 0:d.length)&&(0,e.jsx)(Ve,{className:"mt-3",label:g("standardColor"),tooltip:g("standardColorTip"),children:(0,e.jsx)(W.ColorSwatch,{color:r,shape:"rounded",onChange:c,colors:d,"aria-label":g("standardColor")})}),p&&(null==C?void 0:C.length)>0&&(0,e.jsx)(Ve,{className:"mt-3",label:g("recentColor"),children:(0,e.jsx)(W.ColorSwatch,{color:r,shape:"rounded",onChange:c,colors:C,"aria-label":g("recentColor")})}),(0,e.jsx)(W.Sketch,{className:"mt-3",resettable:u,color:a,onChange:e=>{w.current=!0,null==c||c(e)},onReset:i})]}))};var ut=function(e,t){var o={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(o[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(l=Object.getOwnPropertySymbols(e);s<l.length;s++)t.indexOf(l[s])<0&&Object.prototype.propertyIsEnumerable.call(e,l[s])&&(o[l[s]]=e[l[s]])}return o};const pt={fallbackAxisSideDirection:"start"},mt=(0,l.styled)(W.PickerBlock)(({theme:e})=>({width:"32px"})),ht=o=>{const{onReset:s,onClick:a,onChange:r,resettable:i,standardColors:c,value:d,showArrow:u=!0,title:p,placement:m="bottom","aria-label":h,themeMainColorVisibility:f=!0,specificTheme:g}=o,y=ut(o,["onReset","onClick","onChange","resettable","standardColors","value","showArrow","title","placement","aria-label","themeMainColorVisibility","specificTheme"]),v=(0,l.useTheme2)(),x=null!=g?g:v,[b,j]=t.React.useState(!1),w=t.React.useRef(null),C=t.hooks.useTranslation(n.defaultMessages),T=(0,W.useColorVariableTitle)(d),O=p||T;let N=null!=h?h:C("color");N=`${N}. ${T}`;const k=((e,o)=>t.React.useMemo(()=>l.colorUtils.parseThemeVariable(e,o),[e,o]))(d,x);return(0,e.jsxs)(t.React.Fragment,{children:[(0,e.jsx)(mt,Object.assign({ref:w},y,{title:O,color:k,onClick:e=>{j(e=>!e),null==a||a(e)},"aria-label":N})),null!=w.current&&(0,e.jsx)(n.Popper,{"aria-label":C("themeColor"),flipOptions:pt,arrowOptions:u,placement:m,open:b,autoUpdate:!0,reference:w.current,toggle:e=>{j(e=>!e),"Escape"===(null==e?void 0:e.key)&&(0,t.focusElementInKeyboardMode)(w.current)},children:(0,e.jsx)(dt,{value:d,color:k,resettable:i,standardColors:c,specificTheme:x,recentColorsVisibility:!0,themeMainColorVisibility:f,onChange:r,onReset:s})})]})},ft=(0,l.styled)("div")(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"space-between",".label-row":{flexGrow:1,width:"calc(100% - 94px)"},".widget-theme-setting-element-color-setting-colors":{display:"flex",alignItems:"center",justifyContent:"flex-end",width:"92px"}})),gt=t.React.forwardRef((o,s)=>{const{className:a,label:n,textColor:r,color:i,tooltip:c,supportTextColor:d=!0,themeMainColorVisibility:u=!0,onTextColorChange:p,onColorChange:m,onColorReset:h,onTextColorReset:f}=o,g=(0,l.useTheme2)();return(0,e.jsxs)(ft,{ref:s,className:(0,t.classNames)("widget-theme-setting-element-color-setting",a),children:[(0,e.jsx)(Ve,{variant:"label2",label:n,tooltip:c,size:"sm"}),(0,e.jsxs)("div",{className:(0,t.classNames)("widget-theme-setting-element-color-setting-colors",{"has-text-color":d}),children:[(0,e.jsx)(X.ColorContrastWarning,{backgroundColor:i,foregroundColor:r,theme:g}),(0,e.jsx)(ht,{specificTheme:g,themeMainColorVisibility:u,value:i,onChange:m,onReset:h}),d&&(0,e.jsx)(ht,{specificTheme:g,themeMainColorVisibility:u,className:"ml-1",value:r,type:"with-icon",icon:(0,e.jsx)(Ke,{size:"s"}),onChange:p,onReset:f})]})]})});(0,l.styled)(n.CollapsablePanel)({".collapse-label":{maxWidth:"calc(100% - 22px)"}});const yt=o=>{const{className:s,thickness:a="1px",style:n}=o,r=(0,l.useTheme)();return(0,e.jsx)("hr",{className:(0,t.classNames)("widget-theme-setting-divider",s),style:Object.assign({border:"none",borderTop:`${a} solid ${r.sys.color.divider.primary}`,margin:r.sys.spacing(3,0)},n)})},vt=(0,t.Immutable)({}),xt=(0,t.Immutable)({}),bt=(0,t.Immutable)({}),jt=(0,t.Immutable)({}),wt=(0,t.Immutable)({}),Ct=(0,t.Immutable)({}),Tt=(0,t.Immutable)({}),Ot=(0,t.Immutable)({}),Nt=(0,t.Immutable)({}),kt=(0,t.Immutable)({}),St=(0,t.Immutable)({}),Rt=((0,t.Immutable)({}),(0,t.Immutable)({})),It=((0,t.Immutable)({}),(0,t.Immutable)({})),Pt={sys:{color:{mode:"light",light:{surface:{header:"var(--ref-palette-neutral-100)",headerText:"var(--ref-palette-neutral-1300)",headerHint:"var(--ref-palette-neutral-1100)",background:"var(--ref-palette-neutral-300)",backgroundText:"var(--ref-palette-neutral-1300)",backgroundHint:"var(--ref-palette-neutral-1100)",paper:"var(--ref-palette-neutral-200)",paperText:"var(--ref-palette-neutral-1200)",paperHint:"var(--ref-palette-neutral-1000)",overlay:"var(--ref-palette-neutral-100)",overlayText:"var(--ref-palette-neutral-1100)",overlayHint:"var(--ref-palette-neutral-900)",footer:"var(--ref-palette-neutral-300)",footerText:"var(--ref-palette-neutral-1300)",footerHint:"var(--ref-palette-neutral-900)"},divider:{primary:"var(--ref-palette-neutral-600)",secondary:"var(--ref-palette-neutral-500)",tertiary:"var(--ref-palette-neutral-400)",inputField:"var(--ref-palette-neutral-600)",switch:"var(--ref-palette-neutral-700)"},action:{default:"var(--ref-palette-neutral-100)",hover:"var(--ref-palette-neutral-400)",pressed:"var(--ref-palette-neutral-500)",text:"var(--ref-palette-neutral-1300)",disabled:{default:"var(--ref-palette-neutral-400)",text:"var(--ref-palette-neutral-600)"},focus:"var(--sys-color-primary-light)",selected:{default:"var(--sys-color-primary-main)",hover:"var(--sys-color-primary-dark)",text:"var(--sys-color-primary-text)"},link:{default:"var(--sys-color-primary-main)",hover:"var(--sys-color-primary-dark)",visited:"var(--ref-palette-neutral-1000)"},inputField:{default:"var(--ref-palette-neutral-100)",text:"var(--ref-palette-neutral-1300)",placeholder:"var(--ref-palette-neutral-800)"}}},dark:{surface:{header:"var(--ref-palette-neutral-1100)",headerText:"var(--ref-palette-neutral-100)",headerHint:"var(--ref-palette-neutral-500)",background:"var(--ref-palette-neutral-1200)",backgroundText:"var(--ref-palette-neutral-300)",backgroundHint:"var(--ref-palette-neutral-500)",paper:"var(--ref-palette-neutral-1100)",paperText:"var(--ref-palette-neutral-200)",paperHint:"var(--ref-palette-neutral-400)",overlay:"var(--ref-palette-neutral-1000)",overlayText:"var(--ref-palette-neutral-100)",overlayHint:"var(--ref-palette-neutral-300)",footer:"var(--ref-palette-neutral-1200)",footerText:"var(--ref-palette-neutral-300)",footerHint:"var(--ref-palette-neutral-600)"},divider:{primary:"var(--ref-palette-neutral-700)",secondary:"var(--ref-palette-neutral-800)",tertiary:"var(--ref-palette-neutral-900)",inputField:"var(--ref-palette-neutral-700)",switch:"var(--ref-palette-neutral-600)"},action:{default:"var(--ref-palette-neutral-1000)",hover:"var(--ref-palette-neutral-900)",pressed:"var(--ref-palette-neutral-1100)",text:"var(--ref-palette-neutral-100)",disabled:{default:"var(--ref-palette-neutral-800)",text:"var(--ref-palette-neutral-600)"},focus:"var(--sys-color-primary-light)",selected:{default:"var(--sys-color-primary-main)",hover:"var(--sys-color-primary-dark)",text:"var(--sys-color-primary-text)"},link:{default:"var(--sys-color-primary-main)",hover:"var(--sys-color-primary-dark)",visited:"var(--ref-palette-neutral-1000)"},inputField:{default:"var(--ref-palette-neutral-1200)",text:"var(--ref-palette-neutral-100)",placeholder:"var(--ref-palette-neutral-800)"}}}}}},Ft=o=>{var s,a,r,i,c,d,u,p,m,f,g,y;const{className:v,onChange:x}=o,b=t.hooks.useTranslation(n.defaultMessages,h),j=(0,l.useTheme2)(),w=j.sys.color.mode,C=t.ReactRedux.useSelector(e=>{var t;return null!==(t=e.appStateInBuilder.appConfig.customThemeOptions)&&void 0!==t?t:vt}),T=null!==(s=null==C?void 0:C.sys)&&void 0!==s?s:bt,O=null!==(c=null===(i=null===(r=null===(a=C.sys)||void 0===a?void 0:a.color)||void 0===r?void 0:r[w])||void 0===i?void 0:i.surface)&&void 0!==c?c:kt;let N=null!==(d=T.color)&&void 0!==d?d:Ct;const k=(e,t,o)=>{N.mode||(N=N.set("mode",w));let s=null;if("color"===t){const t=l.colorUtils.getReadableThemeColor(o,j),a=l.colorUtils.lightenTextColor(t,j);s=O.set(e,o).set(`${e}Text`,t).set(`${e}Hint`,a)}else{const t=l.colorUtils.lightenTextColor(o,j);s=O.set(`${e}Text`,o).set(`${e}Hint`,t)}N=N.setIn([w,"surface"],s);const a=C.set("sys",T.set("color",N));x(a.asMutable({deep:!0}))},S=(e,t)=>{let o;if("color"===t){if(!O[e])return;o=O.without(e).without(`${e}Text`).without(`${e}Hint`)}else if("text"===t){if(!O[`${e}Text`])return;o=O.without(`${e}Text`).without(`${e}Hint`)}N=N.setIn([w,"surface"],o);const l=C.set("sys",T.set("color",N));x(l.asMutable({deep:!0}))};return(0,e.jsxs)(Ve,{className:(0,t.classNames)("widget-theme-setting-background-setting",v),label:b("variableSurface"),children:[(0,e.jsx)(gt,{className:"mt-2",themeMainColorVisibility:!1,label:b("surfacePage"),tooltip:b("surfacePageTip"),color:null!==(u=null==O?void 0:O.background)&&void 0!==u?u:Pt.sys.color[w].surface.background,textColor:null!==(p=null==O?void 0:O.backgroundText)&&void 0!==p?p:Pt.sys.color[w].surface.backgroundText,onColorReset:()=>{S("background","color")},onTextColorReset:()=>{S("background","text")},onColorChange:e=>{k("background","color",e)},onTextColorChange:e=>{k("background","text",e)}}),(0,e.jsx)(gt,{className:"mt-2",themeMainColorVisibility:!1,label:b("surfaceContainer"),tooltip:b("surfaceContainerTip"),color:null!==(m=null==O?void 0:O.paper)&&void 0!==m?m:Pt.sys.color[w].surface.paper,textColor:null!==(f=null==O?void 0:O.paperText)&&void 0!==f?f:Pt.sys.color[w].surface.paperText,onColorReset:()=>{S("paper","color")},onTextColorReset:()=>{S("paper","text")},onColorChange:e=>{k("paper","color",e)},onTextColorChange:e=>{k("paper","text",e)}}),(0,e.jsx)(gt,{className:"mt-2",themeMainColorVisibility:!1,label:b("surfaceOverlay"),tooltip:b("surfaceOverlayTip"),color:null!==(g=null==O?void 0:O.overlay)&&void 0!==g?g:Pt.sys.color[w].surface.overlay,textColor:null!==(y=null==O?void 0:O.overlayText)&&void 0!==y?y:Pt.sys.color[w].surface.overlayText,onColorReset:()=>{S("overlay","color")},onTextColorReset:()=>{S("overlay","text")},onColorChange:e=>{k("overlay","color",e)},onTextColorChange:e=>{k("overlay","text",e)}})]})},Mt=(0,t.Immutable)({}),zt=o=>{var s,a,r,i,c,d,u,p,m,f,g,y;const{className:v,onChange:x}=o,b=t.hooks.useTranslation(n.defaultMessages,h),j=(0,l.useTheme2)(),w=j.sys.color.mode,C=t.ReactRedux.useSelector(e=>{var t;return null!==(t=e.appStateInBuilder.appConfig.customThemeOptions)&&void 0!==t?t:vt}),T=null!==(s=null==C?void 0:C.sys)&&void 0!==s?s:bt;let O=null!==(a=T.color)&&void 0!==a?a:Ct;const N=null!==(c=null===(i=null===(r=null==T?void 0:T.color)||void 0===r?void 0:r[w])||void 0===i?void 0:i.action)&&void 0!==c?c:Ot,k=(e,t,o)=>{if(O.mode||(O=O.set("mode",w)),"default"===e)if("color"===t){const e=l.colorUtils.augmentThemeColor(o,j),t=N.set("default",o).set("hover",e.light).set("text",e.text);O=O.setIn([w,"action"],t)}else O=O.setIn([w,"action","text"],o);else if("focus"===e)O=O.setIn([w,"action","focus"],o);else if("selected"===e)if("color"===t){const e=l.colorUtils.augmentThemeColor(o,j),t={default:o,hover:e.light,text:e.text};O=O.setIn([w,"action","selected"],t)}else O=O.setIn([w,"action","selected","text"],o);const s=C.set("sys",T.set("color",O));x(s.asMutable({deep:!0}))},S=(e,t)=>{var o;if(!N[e]&&!N.text)return;let l;if("default"===e)"color"===t?l=N.without("default").without("text").without("hover"):"text"===t&&(l=N.without("text"));else if("selected"===e){if("color"===t)l=N.without("selected");else if("text"===t){const e=null!==(o=N.selected)&&void 0!==o?o:Mt;l=N.set("selected",e.without("text"))}}else"focus"===e&&(l=N.without("focus"));O=O.setIn([w,"action"],l);const s=C.set("sys",T.set("color",O));x(s.asMutable({deep:!0}))};return(0,e.jsxs)(Ve,{className:(0,t.classNames)("widget-theme-setting-action-element-setting",v),label:b("interactiveElement"),children:[(0,e.jsx)(gt,{className:"mt-2",label:b("default"),tooltip:b("interactiveElementDefaultTip"),textColor:null!==(d=null==N?void 0:N.text)&&void 0!==d?d:Pt.sys.color[w].action.text,color:null!==(u=null==N?void 0:N.default)&&void 0!==u?u:Pt.sys.color[w].action.default,onColorReset:()=>{S("default","color")},onTextColorReset:()=>{S("default","text")},onColorChange:e=>{k("default","color",e)},onTextColorChange:e=>{k("default","text",e)}}),(0,e.jsx)(gt,{className:"mt-2",label:b("themeSelected"),tooltip:b("interactiveElementSelectedTip"),textColor:null!==(m=null===(p=null==N?void 0:N.selected)||void 0===p?void 0:p.text)&&void 0!==m?m:Pt.sys.color[w].action.selected.text,color:null!==(g=null===(f=null==N?void 0:N.selected)||void 0===f?void 0:f.default)&&void 0!==g?g:Pt.sys.color[w].action.selected.default,onColorReset:()=>{S("selected","color")},onTextColorReset:()=>{S("selected","text")},onColorChange:e=>{k("selected","color",e)},onTextColorChange:e=>{k("selected","text",e)}}),(0,e.jsx)(gt,{className:"mt-2",supportTextColor:!1,label:b("keyboardFocus"),tooltip:b("interactiveElementFocusTip"),color:null!==(y=null==N?void 0:N.focus)&&void 0!==y?y:Pt.sys.color[w].action.focus,onColorReset:()=>{S("focus","color")},onColorChange:e=>{k("focus","color",e)}})]})},Bt=(0,l.styled)("div")(({theme:e})=>({".theme-color-setting-row":{width:"100%",margin:e.sys.spacing(3,0),display:"flex",alignItems:"center",justifyContent:"space-between",".widget-theme-setting-color-setting":{width:"60%"},".widget-theme-setting-neutral-color-setting":{width:"100%"},".label-row-content":{marginTop:e.sys.spacing(1)},".optimize-color-choices-container":{width:"calc(100% - 30px)"}},".widget-theme-setting-color-setting":{marginTop:e.sys.spacing(4)}})),At=(e,t)=>{if(!e)return!1;return Object.entries(e).every(([e,o])=>{var l;return o.color===(null===(l=t.color[e])||void 0===l?void 0:l.main)})},Dt=o=>{var s,a,r,i,c,d,u,p;const{className:m,version:f,onChange:g}=o,y=t.hooks.useTranslation(h,t.defaultMessages),v=(0,l.useTheme2)(),x=v.src,b=v.ref,j=v.sys,w=t.React.useMemo(()=>(0,l.getTheme2Module)(),[v.uri]),C=t.ReactRedux.useSelector(e=>{var t;return null!==(t=e.appStateInBuilder.appConfig.customThemeOptions)&&void 0!==t?t:vt}),T=null!==(s=C.src)&&void 0!==s?s:xt,O=null!==(a=C.sys)&&void 0!==a?a:bt;let N=null!==(r=O.color)&&void 0!==r?r:Ct;const k=null!==(p=null!==(i=N.mode)&&void 0!==i?i:null===(u=null===(d=null===(c=null==w?void 0:w.variables)||void 0===c?void 0:c.sys)||void 0===d?void 0:d.color)||void 0===u?void 0:u.mode)&&void 0!==p?p:"light";let S=N[k];const R=((e,t)=>l.BrandFunctionColorNames.every(o=>!(null==e?void 0:e[o])&&!(null==t?void 0:t[o])))(T,N),[I,P]=t.React.useState(At(T,j)),F=(e,t)=>{let o=T.set(e,t);if("primary"===e&&t.color){o=o.without("secondary").without("neutral");const e=l.colorUtils.getSecondaryColor(t.color);e&&(o=o.set("secondary",{color:e,harmonize:!0}),I&&(N.mode||(N=N.set("mode",k)),N=N.setIn([k,"secondary"],{main:e})))}I&&l.BrandFunctionColorNames.includes(e)&&(N.mode||(N=N.set("mode",k)),N=N.setIn([k,e],{main:t.color}));let s=C.set("src",o);N&&(s=s.set("sys",O.set("color",N))),g(s.asMutable({deep:!0}))},M=e=>{let t=T.without(e);"primary"===e&&(t=t.without("secondary").without("neutral")),S&&(S=S.without(e),"primary"===e&&(S=S.without("secondary")),N=N.set(k,S));let o=C.set("src",t);N&&(o=o.set("sys",O.set("color",N))),g(o.asMutable({deep:!0}))};return t.React.useEffect(()=>{var e,o;if(f){const s=(0,l.getTheme2)().sys,a=null!==(o=null===(e=(0,t.getAppStore)().getState().appStateInBuilder.appConfig.customThemeOptions)||void 0===e?void 0:e.src)&&void 0!==o?o:xt;P(At(a,s))}},[f]),(0,e.jsxs)(Bt,{className:(0,t.classNames)("theme-color-setting",m),children:[(0,e.jsxs)(Ve,{className:"px-3",label:y("brand"),children:[(0,e.jsx)(Xe,{className:"mt-1",label:y("variableColorPrimary"),stripColors:j.color.primary,displayValue:x.primary,value:null==T?void 0:T.primary,onReset:()=>{M("primary")},onChange:e=>{F("primary",e)}}),(0,e.jsx)(Xe,{label:y("variableColorSecondary"),stripColors:j.color.secondary,displayValue:x.secondary,value:null==T?void 0:T.secondary,onReset:()=>{M("secondary")},onChange:e=>{F("secondary",e)}})]}),(0,e.jsxs)(Ve,{className:"mt-3 px-3",label:y("variableColorFunction"),children:[(0,e.jsx)(Xe,{className:"mt-2",label:y("variableColorInfo"),stripColors:j.color.info,displayValue:x.info,value:null==T?void 0:T.info,onReset:()=>{M("info")},onChange:e=>{F("info",e)}}),(0,e.jsx)(Xe,{label:y("variableColorSuccess"),stripColors:j.color.success,displayValue:x.success,value:null==T?void 0:T.success,onReset:()=>{M("success")},onChange:e=>{F("success",e)}}),(0,e.jsx)(Xe,{label:y("variableColorWarning"),stripColors:j.color.warning,displayValue:x.warning,value:null==T?void 0:T.warning,onReset:()=>{M("warning")},onChange:e=>{F("warning",e)}}),(0,e.jsx)(Xe,{label:y("variableColorError"),stripColors:j.color.error,displayValue:x.error,value:null==T?void 0:T.error,onReset:()=>{M("error")},onChange:e=>{F("error",e)}})]}),(0,e.jsxs)("div",{className:"theme-color-setting-row px-3 mt-4",children:[(0,e.jsxs)(n.Typography,{component:"label",variant:"title3",className:"optimize-color-choices-container d-flex align-items-center",children:[(0,e.jsx)(n.Checkbox,{disabled:R,checked:!I,onChange:(e,t)=>{if(N.mode||(N=N.set("mode",k)),t){if(S){l.BrandFunctionColorNames.forEach(e=>{(null==T?void 0:T[e])&&(S=S.without(e))}),N=N.set(k,S);const e=C.set("sys",O.set("color",N));g(e.asMutable({deep:!0}))}}else if(S){l.BrandFunctionColorNames.forEach(e=>{(null==T?void 0:T[e])&&(N=N.setIn([k,e],{main:T[e].color}))});const e=C.set("sys",O.set("color",N));g(e.asMutable({deep:!0}))}P(!t)}}),(0,e.jsx)("div",{className:"ml-2 text-truncate",title:y("optimizeColorChoices"),children:y("optimizeColorChoices")})]}),(0,e.jsx)(Le,{className:"flex-shrink-0",tag:"div",tooltip:y("optimizeColorChoicesTip")})]}),(0,e.jsx)(yt,{}),(0,e.jsx)(Ve,{className:"mt-3 px-3",label:y("variableColorNeutral"),tooltip:y("neutralTip"),children:(0,e.jsx)("div",{className:"theme-color-setting-row my-0",children:(0,e.jsx)(et,{stripColors:b.palette.neutral,displayValue:x.neutral,value:null==T?void 0:T.neutral,onReset:()=>{const e=T.without("neutral"),t=C.set("src",e);g(t.asMutable({deep:!0}))},onChange:e=>{const t=T.set("neutral",{color:e.color,harmonize:!0}),o=C.set("src",t);g(o.asMutable({deep:!0}))}})})}),(0,e.jsx)(yt,{}),(0,e.jsxs)("div",{className:"theme-color-setting-row flex-column align-items-start px-3",children:[(0,e.jsx)(Ft,{onChange:g}),(0,e.jsx)(zt,{className:"mt-3",onChange:g})]})]})},Et=l.styled.div(({theme:e})=>({position:"relative",paddingBottom:e.sys.spacing(6),"> i":{fontStyle:"normal",minWidth:"20px",textAlign:"center"}})),Lt=(0,l.styled)("div")(({theme:e})=>({position:"absolute",top:"8px",left:"32px",right:"32px",display:"flex",".jimu-slider-marks-scale":{width:"2px",height:"12px",backgroundColor:"#585858",position:"absolute","&.active":{display:"none"}}})),$t=(0,l.styled)("div")(({theme:e})=>({position:"absolute",bottom:0,left:"32px",right:"32px",display:"flex",".jimu-slider-marks-label":{display:"none",position:"absolute",whiteSpace:"nowrap",bottom:0,color:e.sys.color.surface.backgroundText,"&.active":{display:"inline-block"}}})),Vt=o=>{const{className:l,fontSize:s,onChange:a}=o,r=(0,t.classNames)("fontsize-slider",l,"d-flex align-items-center"),{current:i}=t.React.useRef(null===window||void 0===window?void 0:window._appState.appContext.isRTL),c=t.hooks.useTranslation(t.defaultMessages,n.defaultMessages),d=t.React.useMemo(()=>[{label:c("verySmall"),value:"50%"},{label:c("small"),value:"75%"},{label:c("medium"),value:"100%"},{label:c("large"),value:"125%"},{label:c("varyLarge"),value:"150%"}],[c]),u=d.length>1?100/(d.length-1):0,p=d.findIndex(e=>e.value===s)+1;return(0,e.jsxs)(Et,{className:r,children:[(0,e.jsx)("i",{style:{fontSize:i?"1.125rem":"0.75rem"},children:"A"}),(0,e.jsxs)("div",{className:"mx-3 w-100",children:[(0,e.jsx)(Lt,{children:d.map(({value:o},l)=>(0,e.jsx)("span",{className:(0,t.classNames)("jimu-slider-marks-scale",{active:o===s}),style:{left:l*u+"%"}},o))}),(0,e.jsx)($t,{children:d.map(({value:o,label:l},a)=>(0,e.jsx)("span",{className:(0,t.classNames)("jimu-slider-marks-label",{active:o===s}),style:{left:a*u+"%",transform:"translateX(-50%)"},children:l},o))}),(0,e.jsx)(n.Slider,{min:1,value:p,max:d.length,title:c("fontSize"),runnableTrackVisibility:!1,"aria-label":c("fontSize"),onChange:e=>{const t=e.currentTarget.value,o=d[t-1].value;null==a||a(o)}})]}),(0,e.jsx)("i",{style:{fontSize:i?"0.75rem":"1.125rem"},children:"A"})]})};var Ut=function(e,t){var o={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(o[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(l=Object.getOwnPropertySymbols(e);s<l.length;s++)t.indexOf(l[s])<0&&Object.prototype.propertyIsEnumerable.call(e,l[s])&&(o[l[s]]=e[l[s]])}return o};const Gt=(0,l.styled)("ul")(({theme:e})=>({width:"100%",display:"flex",flexWrap:"wrap",gap:e.sys.spacing(1),listStyleType:"none",marginBlockStart:0,marginBlockEnd:0,marginInlineStart:0,marginInlineEnd:0,paddingInlineStart:0,padding:e.sys.spacing(1,0),margin:e.sys.spacing(1,0)})),Ht=(0,l.styled)("div")(({theme:e})=>({width:"500px"})),Kt=o=>{const l=t.hooks.useTranslation(h),{className:s,isOpen:a,onApply:r,onClose:i}=o,c=Ut(o,["className","isOpen","onApply","onClose"]),[d,u]=t.React.useState([]),[p,m]=t.React.useState(""),f=l("googleFontPlaceholder")+" https://fonts.googleapis.com/css2?family=Roboto",g=(0,t.classNames)("widget-theme-setting-custom-font",s);return(0,e.jsx)(n.AlertPopup,Object.assign({isOpen:a,severity:"info",closable:!1,withIcon:!1,hideCancel:!1,className:g,disableOK:!d.length,onClickOk:()=>{null==r||r(d)},onClickClose:i,title:l("addGoogleFonts")},c,{children:(0,e.jsxs)(Ht,{children:[(0,e.jsxs)(n.Typography,{variant:"body",className:"mb-2",children:[l("addGoogleFontTip")," ",(0,e.jsx)("a",{href:"https://fonts.google.com/",target:"_blank",children:l("exploreGoogleFonts")})]}),(0,e.jsx)(n.UrlInput,{value:p,height:80,className:"mt-2",schemes:["https"],placeholder:f,checkValidityOnAccept:e=>{let t=!!e,o="";if(t=(e=>{try{const t=new URL(e);return"https:"===t.protocol&&"fonts.googleapis.com"===t.hostname&&t.pathname.startsWith("/css2")}catch(e){return!1}})(e),t){const t=function(e){const t=new URL(e),o=t.searchParams,l=o.getAll("family");o.delete("family");const s=Array.from(o.entries());return l.map(e=>{const o=new URL(t.origin+t.pathname);return o.searchParams.set("family",e),s.forEach(([e,t])=>{o.searchParams.set(e,t)}),decodeURIComponent(o.toString())})}(e),o=t.map(e=>{const t=function(e){var t;let o=null===(t=/family=([^:&]+)/.exec(e))||void 0===t?void 0:t[1];return o=null==o?void 0:o.replace(/\+/g," "),o}(e);return{name:t,url:e}}).filter(e=>!!e.name);u(o)}else o=l("invalidGoogleFontTip"),u([]);return{valid:t,msg:o}},onChange:e=>{m(null==e?void 0:e.value)}}),!!d.length&&(0,e.jsx)(Gt,{children:d.map(t=>(0,e.jsx)(n.Tag,{color:"default",label:t.name,tag:"li"},t.name))})]})}))};var Wt=d(2838),_t=d.n(Wt),qt=function(e,t){var o={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(o[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(l=Object.getOwnPropertySymbols(e);s<l.length;s++)t.indexOf(l[s])<0&&Object.prototype.propertyIsEnumerable.call(e,l[s])&&(o[l[s]]=e[l[s]])}return o};const Yt=o=>{const l=window.SVG,{className:s}=o,a=qt(o,["className"]),n=(0,t.classNames)("jimu-icon jimu-icon-component",s);return l?(0,e.jsx)(l,Object.assign({className:n,src:_t()},a)):(0,e.jsx)("svg",Object.assign({className:n},a))};var Qt=function(e,t){var o={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(o[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(l=Object.getOwnPropertySymbols(e);s<l.length;s++)t.indexOf(l[s])<0&&Object.prototype.propertyIsEnumerable.call(e,l[s])&&(o[l[s]]=e[l[s]])}return o};const Xt=(0,l.styled)("div")(({styleState:e})=>{const{value:t}=e;return{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",fontFamily:t}}),Jt=o=>{const{className:l,value:s,deletable:a,onDelete:r}=o,i=Qt(o,["className","value","deletable","onDelete"]);return(0,e.jsxs)(Xt,Object.assign({className:(0,t.classNames)("font-selector-item",l),styleState:{value:s}},i,{children:[(0,e.jsx)("span",{className:"font-selector-item-label",children:s}),a&&(0,e.jsx)(n.Button,{icon:!0,variant:"text",onClick:e=>{e.stopPropagation(),null==r||r(s)},size:"sm",className:"font-selector-item-action",children:(0,e.jsx)(Yt,{size:"s"})})]}))},Zt=(0,l.styled)(n.DropdownButton)(({theme:e,styleState:t})=>{const{value:o}=t;return Object.assign({color:e.ref.palette.black,backgroundColor:e.ref.palette.neutral[300],fontFamily:o},"builder/themes/dark/"===e.uri&&{"&:disabled":{borderColor:e.sys.color.divider.primary,backgroundColor:"#363636"}})}),eo=o=>{var s,a;const{value:r=l.DefaultThemeFonts[0],onChange:i,onCustomFontsChange:c,"aria-label":d,style:u,className:p}=o,m=t.hooks.useTranslation(h),f=(null==r?void 0:r.includes(","))?r.split(",")[0].replace(/\"/gm,""):null==r?void 0:r.replace(/\"/gm,""),g=(0,l.useTheme2)(),y=t.ReactRedux.useSelector(e=>{var t;return null!==(t=e.appStateInBuilder.appConfig.customThemeOptions)&&void 0!==t?t:vt}),v=null===(a=null===(s=y.ref)||void 0===s?void 0:s.typeface)||void 0===a?void 0:a.customFonts,x=g.ref.typeface.customFonts,[b,j]=t.React.useState(!1),w=t.React.useMemo(()=>{var e;const t=null!==(e=null===l.DefaultThemeFonts||void 0===l.DefaultThemeFonts?void 0:l.DefaultThemeFonts.map(e=>({name:e})))&&void 0!==e?e:[];return[...x,...t]},[x]),C=e=>{var t;let o=null!==(t=null==v?void 0:v.asMutable({deep:!0}))&&void 0!==t?t:[];o=o.filter(t=>t.name!==e),c(o,!1)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.Dropdown,{size:"sm",fluid:!0,style:u,autoWidth:!0,className:(0,t.classNames)(p,"font-selector"),"aria-label":d,menuRole:"listbox",children:[(0,e.jsx)(Zt,{styleState:{value:f},size:"sm",variant:"text",title:f,role:"combobox",children:f}),(0,e.jsxs)(n.DropdownMenu,{children:[(0,e.jsx)(n.DropdownItem,{active:!1,onClick:()=>{j(!0)},children:m("addGoogleFonts")}),(0,e.jsx)(n.DropdownItem,{divider:!0}),w.map(t=>{const o="url"in t&&!!(null==v?void 0:v.find(e=>e.url===t.url));return(0,e.jsx)(n.DropdownItem,{tag:o?"div":"button",active:t.name===f,onClick:()=>{(e=>{i(e)})(t.name)},children:(0,e.jsx)(Jt,{value:t.name,deletable:o,onDelete:C})},t.name+(t.url||""))})]})]}),b&&(0,e.jsx)(Kt,{isOpen:b,onClose:()=>{j(!1)},onApply:e=>{j(!1);const t=e;null==v||v.forEach(e=>{t.find(t=>t.name===e.name)||t.push(e.asMutable())}),c(t,!0)}})]})},to=(0,l.styled)("div")(({theme:e})=>({padding:e.sys.spacing(1,2),color:e.sys.color.surface.overlayText,fontSize:e.sys.typography.body.fontSize,backgroundColor:e.sys.color.surface.overlay,boxShadow:e.sys.shadow.shadow2,borderRadius:e.sys.shape.shape1,borderColor:e.sys.color.divider.tertiary,borderWidth:"1px",borderStyle:"solid",maxWidth:"360px",textAlign:"left",wordWrap:"break-word",pointerEvents:"inherit",whiteSpace:"pre-wrap",".prefix-semibold":{fontWeight:e.sys.typography.fontWeightSemiBold}})),oo=()=>{const o=t.hooks.useTranslation(h,n.defaultMessages);return(0,e.jsxs)(to,{children:[(0,e.jsx)("span",{className:"d-block",children:o("fontTip")}),(0,e.jsxs)("span",{className:"d-inline-block prefix-semibold mr-1 mt-2",children:[o("headings"),":"]}),o("headingTip"),(0,e.jsx)("br",{}),(0,e.jsxs)("span",{className:"d-inline-block prefix-semibold mr-1 mt-2",children:[o("variableBody"),":"]}),o("bodyTip")]})},lo=(0,l.styled)("div")(({theme:e})=>({width:"100%",".label-row-content":{marginTop:e.sys.spacing(1)}})),so=o=>{var s,a,r,i,c,d,u,p,m;const{className:f,onChange:g}=o,y=(0,l.useTheme2)(),v=y.ref.typeface,x=y.sys.typography,b=t.ReactRedux.useSelector(e=>{var t;return null!==(t=e.appStateInBuilder.appConfig.customThemeOptions)&&void 0!==t?t:vt}),j=null!==(s=b.ref)&&void 0!==s?s:jt,w=null!==(a=j.typeface)&&void 0!==a?a:wt,C=null!==(r=b.sys)&&void 0!==r?r:bt,T=null!==(i=C.typography)&&void 0!==i?i:Tt,O=t.hooks.useTranslation(h,n.defaultMessages),N=(e,t)=>{let o=T;("headings"===e?["h1","h2","h3","h4","h5","h6"]:["title1","title2","title3","inputField","body","label1","label2","label3"]).forEach(e=>{o=o.setIn([e,"fontFamily"],t)});const l=b.set("sys",C.set("typography",o));g(l.asMutable({deep:!0}))},k=(e,t,o)=>{const s=w.set("customFonts",t);let a=T;if(o){("headings"===e?["h1","h2","h3","h4","h5","h6"]:["title1","title2","title3","inputField","body","label1","label2","label3"]).forEach(e=>{a=a.setIn([e,"fontFamily"],t[0].name)})}else{const e=l.DefaultThemeFonts.concat(t.map(e=>e.name));l.TypographyVariants.forEach(t=>{var o;(null===(o=a[t])||void 0===o?void 0:o.fontFamily)&&!e.includes(a[t].fontFamily)&&(a=a.setIn([t,"fontFamily"],l.DefaultThemeFonts[0]))})}const n=b.set("sys",C.set("typography",a)).set("ref",j.set("typeface",s));g(n.asMutable({deep:!0}))};return(0,e.jsxs)(lo,{className:(0,t.classNames)("widget-theme-setting-typeface-setting",f),children:[(0,e.jsx)(Ve,{className:"px-3",variant:"title2",label:O("font"),tooltip:(0,e.jsx)(oo,{})}),(0,e.jsx)(Ve,{className:"px-3 mt-1",variant:"title3",color:"paperHint",label:O("headings"),children:(0,e.jsx)(eo,{value:null!==(d=null===(c=T.h1)||void 0===c?void 0:c.fontFamily)&&void 0!==d?d:x.h1.fontFamily,onChange:e=>{N("headings",e)},onCustomFontsChange:(e,t)=>{k("headings",e,t)}})}),(0,e.jsx)(Ve,{className:"px-3 mt-3",variant:"title3",color:"paperHint",label:O("variableBody"),children:(0,e.jsx)(eo,{value:null!==(p=null===(u=T.body)||void 0===u?void 0:u.fontFamily)&&void 0!==p?p:x.body.fontFamily,onChange:e=>{N("paragraphs",e)},onCustomFontsChange:(e,t)=>{k("paragraphs",e,t)}})}),(0,e.jsx)(yt,{className:"mt-3"}),(0,e.jsx)(Ve,{className:"px-3 mt-3",variant:"title2",label:O("fontSize"),tooltip:O("htmlSizeTip"),children:(0,e.jsx)(Vt,{fontSize:null!==(m=null==w?void 0:w.htmlFontSize)&&void 0!==m?m:v.htmlFontSize,onChange:e=>{((e,t)=>{if(!e||!t)return;let o=w;o=o.set(e,t);const l=b.set("ref",j.set("typeface",o));g(l.asMutable({deep:!0}))})("htmlFontSize",e)}})})]})};var ao=function(e,t){var o={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(o[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(l=Object.getOwnPropertySymbols(e);s<l.length;s++)t.indexOf(l[s])<0&&Object.prototype.propertyIsEnumerable.call(e,l[s])&&(o[l[s]]=e[l[s]])}return o};const no=(0,l.styled)("div")(({theme:e,styleState:t})=>{const{width:o,height:l,shape:s,empty:a,shadow:n,selected:r,transparent:i}=t;return Object.assign({width:o,backgroundColor:e.ref.palette.white,padding:e.sys.spacing(2),borderRadius:"0px",".widget-theme-setting-preview-box-content":{height:l,borderRadius:null!=s?s:"0px",display:"flex",alignItems:"center",justifyContent:"center",color:e.sys.color.action.text,backgroundColor:i?"transparent":e.sys.color.action.default,backgroundImage:a?"linear-gradient(\n        to bottom right,\n        transparent calc(50% - 1px),\n        var(--sys-color-divider-secondary) calc(50% - 1px),\n        var(--sys-color-divider-secondary) calc(50% + 1px),\n        transparent calc(50% + 1px)\n      )":"none",backgroundRepeat:"no-repeat",border:i?`2px solid ${e.sys.color.divider.secondary}`:"none"},boxShadow:n,boxSizing:"border-box"},r&&{outline:`2px solid ${e.sys.color.action.selected.default}`})}),ro=o=>{const{className:l,width:s="100%",height:a="20px",selected:n=!1,shape:r,empty:i=!1,shadow:c="none",transparent:d=!1,children:u,onClick:p}=o,m=ao(o,["className","width","height","selected","shape","empty","shadow","transparent","children","onClick"]),h={width:s,height:a,shape:r,empty:i,shadow:c,selected:n,transparent:d};return(0,e.jsx)(no,Object.assign({role:"button",tabIndex:0,onClick:p,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),null==p||p(e))},className:(0,t.classNames)("widget-theme-setting-preview-box",l),styleState:h},m,{children:(0,e.jsx)("div",{className:"widget-theme-setting-preview-box-content",children:u})}))};var io=function(e,t){var o={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(o[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(l=Object.getOwnPropertySymbols(e);s<l.length;s++)t.indexOf(l[s])<0&&Object.prototype.propertyIsEnumerable.call(e,l[s])&&(o[l[s]]=e[l[s]])}return o};const co=(0,l.styled)("div")(({theme:e})=>({width:"100%",".shapes-container":{width:"100%",display:"flex",flexDirection:"row",gap:e.sys.spacing(2)}})),uo={initial:null,none:{shape1:"0px",shape2:"0px",inputField:"0px",button:"0px"},sm:{shape1:"2px",shape2:"4px",inputField:"2px",button:"2px"},md:{shape1:"3px",shape2:"6px",inputField:"3px"},lg:{shape1:"5px",shape2:"9px",inputField:"5px",button:"5px"},xl:{shape1:"7px",shape2:"13px",inputField:"50px",button:"50px"}},po={initial:"definedByTheme",none:"none",sm:"small",md:"medium",lg:"large",xl:"extraLarge"},mo=o=>{var l,s,a;const{className:r,onChange:i}=o,c=io(o,["className","onChange"]),d=t.hooks.useTranslation(h,n.defaultMessages),u=t.ReactRedux.useSelector(e=>{var t;return null!==(t=e.appStateInBuilder.appConfig.customThemeOptions)&&void 0!==t?t:vt}),p=null!==(l=u.sys)&&void 0!==l?l:bt,m=null!==(s=p.shape)&&void 0!==s?s:St,f=null!==(a=u.comp)&&void 0!==a?a:Rt,g=Object.keys(uo).find(e=>{var t,o;return m.shape1===(null===(t=uo[e])||void 0===t?void 0:t.shape1)&&m.shape2===(null===(o=uo[e])||void 0===o?void 0:o.shape2)}),y=e=>{var t,o;const l=uo[e];if(l){const e={shape1:l.shape1,shape2:l.shape2,inputField:l.inputField};let t=u.set("sys",p.set("shape",e));const o=l.button,s=f.setIn(["Button","root","vars","shape"],o);t=t.set("comp",s),i(t.asMutable({deep:!0}))}else{let e=u.set("sys",p.without("shape")),l=null===(o=null===(t=f.Button)||void 0===t?void 0:t.root)||void 0===o?void 0:o.vars;l=l?l.without("shape"):l;const s=f.setIn(["Button","root","vars"],l);e=e.set("comp",s),i(e.asMutable({deep:!0}))}};return(0,e.jsx)(co,Object.assign({className:(0,t.classNames)("theme-shape-setting px-3 mb-4",r)},c,{children:(0,e.jsx)(Ve,{variant:"title2",label:d("borderRadius"),tooltip:d("borderRadiusTip"),children:(0,e.jsxs)("div",{className:"w-100",children:[(0,e.jsx)("div",{className:"shapes-container",children:Object.keys(uo).slice(0,3).map(t=>{var o,l;return(0,e.jsx)(ro,{transparent:!0,selected:g===t,shape:null!==(l=null===(o=uo[t])||void 0===o?void 0:o.shape2)&&void 0!==l?l:"0px",empty:"initial"===t,title:d(po[t]),onClick:()=>{y(t)}},t)})}),(0,e.jsx)("div",{className:"shapes-container mt-3",children:Object.keys(uo).slice(3).map(t=>(0,e.jsx)(ro,{transparent:!0,selected:g===t,shape:uo[t].shape2,title:d(po[t]),onClick:()=>{y(t)}},t))})]})})}))};var ho=function(e,t){var o={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(o[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(l=Object.getOwnPropertySymbols(e);s<l.length;s++)t.indexOf(l[s])<0&&Object.prototype.propertyIsEnumerable.call(e,l[s])&&(o[l[s]]=e[l[s]])}return o};const fo=(0,l.styled)("div")(({theme:e,styleState:t})=>{var o,l;return{height:"26px",display:"flex",cursor:"pointer",justifyContent:"center",alignItems:"center",backgroundColor:e.ref.palette.white,textDecoration:null!==(o=t.textDecoration)&&void 0!==o?o:"none",textDecorationStyle:null!==(l=t.textDecorationStyle)&&void 0!==l?l:"solid",color:e.sys.color.action.text,"&.jimu-selected":{outline:`2px solid ${e.sys.color.action.selected.default}`},".link-comp-preview-empty-box":{margin:e.sys.spacing("auto",2),height:"14px",width:"100%",backgroundImage:"linear-gradient(\n        to bottom right,\n        transparent calc(50% - 0.5px),\n        var(--sys-color-divider-secondary) calc(50% - 0.5px),\n        var(--sys-color-divider-secondary) calc(50% + 0.5px),\n        transparent calc(50% + 0.5px)\n      )",backgroundRepeat:"no-repeat",border:"1px solid var(--sys-color-divider-secondary)"}}}),go=o=>{const{className:l,selected:s,empty:a,color:n,textDecoration:r,hoverTextDecoration:i,textDecorationStyle:c="solid",onClick:d}=o,u=ho(o,["className","selected","empty","color","textDecoration","hoverTextDecoration","textDecorationStyle","onClick"]),p={selected:s,color:n,textDecoration:r,hoverTextDecoration:i,textDecorationStyle:c};return(0,e.jsx)(fo,Object.assign({role:"button",tabIndex:0,styleState:p,onClick:d,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),null==d||d(e))},className:(0,t.classNames)("link-comp-preview",{"jimu-selected":s},l)},u,{children:a?(0,e.jsx)("div",{className:"link-comp-preview-empty-box"}):"Link"}))};var yo=function(e,t){var o={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(o[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(l=Object.getOwnPropertySymbols(e);s<l.length;s++)t.indexOf(l[s])<0&&Object.prototype.propertyIsEnumerable.call(e,l[s])&&(o[l[s]]=e[l[s]])}return o};const vo=(0,l.styled)(Ve)(({theme:e})=>({width:"100%",".theme-link-setting-styles":{display:"flex",flexDirection:"row",gap:e.sys.spacing(2),"> .link-comp-preview":{flex:"1 1 25%"}}})),xo={initial:null,"no-underline":{decoration:"none",decorationStyle:"solid",hover:{decoration:"none",decorationStyle:"solid"}},"solid-underline":{decoration:"underline",decorationStyle:"solid",hover:{decoration:"underline",decorationStyle:"solid"}},"dotted-underline":{decoration:"underline",decorationStyle:"dotted",hover:{decoration:"underline",decorationStyle:"dotted"}}},bo={initial:"definedByTheme","no-underline":"noUnderline","solid-underline":"solidUnderline","dotted-underline":"dottedUnderline"},jo=o=>{var s,a,r,i,c,d,u,p,m,f;const{className:g,onChange:y}=o,v=yo(o,["className","onChange"]),x=t.hooks.useTranslation(h,n.defaultMessages),b=t.ReactRedux.useSelector(e=>{var t;return null!==(t=e.appStateInBuilder.appConfig.customThemeOptions)&&void 0!==t?t:vt}),j=(0,l.useTheme2)(),w=j.sys.color.mode,C=null!==(s=b.sys)&&void 0!==s?s:bt;let T=null!==(a=C.color)&&void 0!==a?a:Ct;const O=null!==(i=null===(r=T[w])||void 0===r?void 0:r.action)&&void 0!==i?i:Ot,N=null!==(c=b.comp)&&void 0!==c?c:Rt;let k=null!==(p=null===(u=null===(d=N.Link)||void 0===d?void 0:d.root)||void 0===u?void 0:u.vars)&&void 0!==p?p:It;const S=Object.keys(xo).find(e=>{var t,o,l,s,a,n;return k.decoration===(null===(t=xo[e])||void 0===t?void 0:t.decoration)&&(null==k?void 0:k.decorationStyle)===(null===(o=xo[e])||void 0===o?void 0:o.decorationStyle)&&(null===(l=k.hover)||void 0===l?void 0:l.decoration)===(null===(s=xo[e])||void 0===s?void 0:s.hover.decoration)&&(null===(a=k.hover)||void 0===a?void 0:a.decorationStyle)===(null===(n=xo[e])||void 0===n?void 0:n.hover.decorationStyle)});return(0,e.jsxs)(vo,Object.assign({className:(0,t.classNames)("theme-shadow-setting",g),variant:"title3",label:x("link"),tooltip:x("linkTip")},v,{children:[(0,e.jsx)(n.Typography,{variant:"label2",children:x("style")}),(0,e.jsx)("div",{className:"theme-link-setting-styles mt-2",children:Object.keys(xo).map(t=>{var o,l,s,a;return(0,e.jsx)(go,{selected:S===t,empty:"initial"===t,color:j.sys.color.action.link.default,title:x(bo[t]),onClick:()=>{(e=>{k="initial"===e?k.without("decoration").without("decorationStyle").without("hover"):k.merge(xo[e]);const t=N.setIn(["Link","root","vars"],k),o=b.set("comp",t);y(o.asMutable({deep:!0}))})(t)},textDecoration:null===(o=xo[t])||void 0===o?void 0:o.decoration,hoverTextDecoration:null===(l=xo[t])||void 0===l?void 0:l.hover.decoration,textDecorationStyle:null!==(a=null===(s=xo[t])||void 0===s?void 0:s.hover.decorationStyle)&&void 0!==a?a:"solid"},t)})}),(0,e.jsx)(gt,{className:"mt-2",label:x("color"),supportTextColor:!1,onColorReset:()=>{if(!O.link)return;const e=O.without("link");T=T.setIn([w,"action"],e);const t=b.set("sys",C.set("color",T));y(t.asMutable({deep:!0}))},color:null!==(f=null===(m=O.link)||void 0===m?void 0:m.default)&&void 0!==f?f:Pt.sys.color[w].action.link.default,onColorChange:e=>{(e=>{T.mode||(T=T.set("mode",w));const t={default:e,hover:l.colorUtils.augmentThemeColor(e,j).light};T=T.setIn([w,"action","link"],t);const o=b.set("sys",C.set("color",T));y(o.asMutable({deep:!0}))})(e)}})]}))};var wo=function(e,t){var o={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(o[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(l=Object.getOwnPropertySymbols(e);s<l.length;s++)t.indexOf(l[s])<0&&Object.prototype.propertyIsEnumerable.call(e,l[s])&&(o[l[s]]=e[l[s]])}return o};const Co=(0,l.styled)(Ve)(({theme:e})=>({width:"100%",".theme-input-field-setting-shapes":{display:"flex",flexDirection:"row",gap:e.sys.spacing(2)}})),To=o=>{var s,a,r,i,c,d,u;const{className:p,onChange:m}=o,f=wo(o,["className","onChange"]),g=t.hooks.useTranslation(h,n.defaultMessages),y=(0,l.useTheme2)(),v=y.sys.color.mode,x=t.ReactRedux.useSelector(e=>{var t;return null!==(t=e.appStateInBuilder.appConfig.customThemeOptions)&&void 0!==t?t:vt}),b=null!==(s=x.sys)&&void 0!==s?s:bt;let j=null!==(a=b.color)&&void 0!==a?a:Ct;const w=null!==(i=null===(r=j[v])||void 0===r?void 0:r.action)&&void 0!==i?i:Ot,C=null!==(c=null==w?void 0:w.inputField)&&void 0!==c?c:Nt,T=(e,t)=>{j.mode||(j=j.set("mode",v));let o=null;if("color"===e){const e=l.colorUtils.getReadableThemeColor(t,y);o={default:t,text:e,placeholder:l.colorUtils.lightenTextColor(e,y)}}else{const e=l.colorUtils.lightenTextColor(t,y);o=C.set("text",t).set("placeholder",e)}j=j.setIn([v,"action","inputField"],o);const s=x.set("sys",b.set("color",j));m(s.asMutable({deep:!0}))},O=e=>{if(!C)return;let t;if("color"===e)t=w.without("inputField");else if("text"===e){const e=C.without("text").without("placeholder");t=w.set("inputField",e)}j=j.setIn([v,"action"],t);const o=x.set("sys",b.set("color",j));m(o.asMutable({deep:!0}))};return(0,e.jsx)(Co,Object.assign({className:(0,t.classNames)("theme-shadow-setting",p),variant:"title3",label:g("inputField"),tooltip:g("inputFieldTip")},f,{children:(0,e.jsx)(gt,{className:"mt-2",label:g("color"),textColor:null!==(d=null==C?void 0:C.text)&&void 0!==d?d:Pt.sys.color[v].action.inputField.text,color:null!==(u=null==C?void 0:C.default)&&void 0!==u?u:Pt.sys.color[v].action.inputField.default,onColorReset:()=>{O("color")},onTextColorReset:()=>{O("text")},onColorChange:e=>{T("color",e)},onTextColorChange:e=>{T("text",e)}})}))};var Oo=function(e,t){var o={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(o[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(l=Object.getOwnPropertySymbols(e);s<l.length;s++)t.indexOf(l[s])<0&&Object.prototype.propertyIsEnumerable.call(e,l[s])&&(o[l[s]]=e[l[s]])}return o};const No=(0,l.styled)("div")(({theme:e})=>({width:"100%"})),ko=o=>{const{className:l,onChange:s}=o,a=Oo(o,["className","onChange"]),r=t.hooks.useTranslation(h,n.defaultMessages);return(0,e.jsxs)(No,Object.assign({className:(0,t.classNames)("theme-shadow-setting px-3 mt-2",l)},a,{children:[(0,e.jsx)(Ve,{variant:"title2",label:r("themeComponents"),tooltip:r("componentsTip")}),(0,e.jsx)(To,{onChange:s}),(0,e.jsx)(jo,{className:"mt-2",onChange:s})]}))},So=(0,l.styled)("div")({width:"100%"}),Ro=o=>{const{className:l,onChange:s}=o;return(0,e.jsxs)(So,{className:(0,t.classNames)("widget-theme-setting-others-setting",l),children:[(0,e.jsx)(mo,{onChange:s}),(0,e.jsx)(yt,{}),(0,e.jsx)(ko,{onChange:s})]})},Io=(0,l.styled)("div")(({theme:e})=>({display:"flex",flexDirection:"column",height:"100%",".theme-setting-header":{display:"flex",alignItems:"center",justifyContent:"space-between",paddingRight:e.sys.spacing(3)},".theme-setting-content":{height:"100%",flex:"1 1 0%",overflow:"auto",".jimu-tabs":{marginTop:e.sys.spacing(2),height:`calc(100% - ${e.sys.spacing(2)})`}}})),Po=s=>{const{className:a,onBack:r}=s,i=t.hooks.useTranslation(h,n.defaultMessages),[c,d]=t.React.useState(!1),[u,p]=t.React.useState(0),m=(0,t.classNames)("jimu-builder-theme-color-shade py-3",a),f=t.React.useRef(null),g=t.React.useRef(null);t.React.useEffect(()=>{(0,t.focusElementInKeyboardMode)(f.current)},[]),(0,n.useTrapFocusByBoundaryNodes)(f,g);const y=t.ReactRedux.useSelector(e=>{var t;return null===(t=e.appStateInBuilder)||void 0===t?void 0:t.appConfig}),v=(0,l.useTheme2)(),b=e=>{(0,o.getAppConfigAction)(y).editCustomThemeOption(e).exec()};return(0,e.jsxs)(Io,{className:m,children:[(0,e.jsxs)("div",{className:"theme-setting-header",children:[(0,e.jsxs)(n.Button,{ref:f,className:"back-main-btn",type:"tertiary",onClick:r,"aria-label":i("backToMainThemePanel"),children:[(0,e.jsx)(ue,{className:"mr-1",autoFlip:!0}),i("backToMainThemePanel")]}),(0,e.jsx)(x,{})]}),v&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{className:"theme-setting-content",children:(0,e.jsxs)(n.Tabs,{defaultValue:"color",fill:!0,type:"underline",children:[(0,e.jsx)(n.Tab,{id:"color",title:i("color"),children:(0,e.jsx)(Dt,{version:u,className:"mt-3",onChange:b})}),(0,e.jsx)(n.Tab,{id:"typography",title:i("typography"),children:(0,e.jsx)(so,{className:"mt-3",onChange:b})}),(0,e.jsx)(n.Tab,{id:"more",title:i("more"),children:(0,e.jsx)(Ro,{className:"mt-3",onChange:b})})]})})}),(0,e.jsx)("div",{className:"d-flex justify-content-end mt-3",children:(0,e.jsx)(n.Button,{ref:g,className:"flex-fill mx-3",variant:"outlined",onClick:()=>{d(!0)},"aria-label":i("resetTheme"),children:i("resetTheme")})}),(0,e.jsx)(n.AlertPopup,{isOpen:c,severity:"warning",closable:!1,withIcon:!0,title:i("resetThemeWarningTitle"),onClickClose:()=>{d(!1)},onClickOk:()=>{p(u+1),(0,o.getAppConfigAction)(y).editCustomThemeOption({}).exec(),d(!1)},description:i("resetThemeWarningTip")})]})};var Fo=function(e,t,o,l){return new(o||(o=Promise))(function(s,a){function n(e){try{i(l.next(e))}catch(e){a(e)}}function r(e){try{i(l.throw(e))}catch(e){a(e)}}function i(e){var t;e.done?s(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(n,r)}i((l=l.apply(e,t||[])).next())})};const Mo=s=>{const n=t.ReactRedux.useSelector(e=>{var t;return null===(t=e.appStateInBuilder)||void 0===t?void 0:t.appConfig}),r=(0,l.useTheme2)(),[i,c]=t.React.useState(0),[d,u]=t.React.useState(null),p=(null==n?void 0:n.theme)&&r;t.React.useEffect(()=>{Fo(void 0,void 0,void 0,function*(){const e=yield fetch(`${t.urlUtils.getAbsoluteRootUrl()}themes/themes-info.json`);return yield Promise.resolve((0,t.Immutable)(yield e.json()))}).then(e=>{u(e),c(1)})},[]);const m=e=>{var l;if(!e)return;let s=null!==(l=n.customTheme)&&void 0!==l?l:(0,t.Immutable)({});s=s.merge(e,{deep:!0}),(0,o.getAppConfigAction)(n).editCustomTheme(s).exec()},h=()=>{(0,o.getAppConfigAction)(n).editCustomTheme((0,t.Immutable)({})).exec()};return(0,e.jsx)("div",{className:"jimu-widget widget-builder-themes d-flex flex-column bg-light-300 w-100 h-100",children:p&&(0,e.jsxs)(t.React.Fragment,{children:[(0,e.jsx)(a,{active:1===i,children:(0,e.jsx)($,{themeListInfo:d,selectedTheme:null==n?void 0:n.theme,onChange:(e,l)=>Fo(void 0,void 0,void 0,function*(){if(!e)return;o.builderAppSync.publishRuntimeThemeModeChangeToApp();let s=(0,o.getAppConfigAction)(n).editTheme(e).editCustomTheme((0,t.Immutable)({})).editCustomThemeOption({});l&&(s=yield s.replaceOldThemeVariables()),s.exec()}),onCustomize:()=>{const e=(0,l.getTheme2Module)(!1);l.mapping.whetherIsNewTheme(e)?c(2):c(3)}})}),(0,e.jsx)(a,{active:2===i,children:(0,e.jsx)(Po,{onChange:m,onBack:()=>{c(1)},onAdvance:()=>{c(4)}})}),(0,e.jsx)(a,{active:3===i,children:(0,e.jsx)(me,{theme:r,onChange:m,onReset:h,onBack:()=>{c(1)},onAdvance:()=>{c(4)}})}),(0,e.jsx)(a,{active:4===i,children:(0,e.jsx)(Re,{theme:r,onChange:m,onReset:h,onBack:()=>{c(3)}})})]})})};function zo(e){d.p=e}})(),u})())}}});