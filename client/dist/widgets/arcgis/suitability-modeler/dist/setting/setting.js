System.register(["jimu-core/emotion","jimu-core","jimu-ui","jimu-ui/advanced/setting-components","jimu-arcgis"],function(e,t){var s={},i={},r={},n={},o={};return{setters:[function(e){s.jsx=e.jsx,s.jsxs=e.jsxs},function(e){i.React=e.React,i.css=e.css},function(e){r.Button=e.Button,r.Checkbox=e.Checkbox,r.Icon=e.Icon,r.Label=e.Label,r.Radio=e.Radio,r.TextInput=e.TextInput},function(e){n.MapWidgetSelector=e.MapWidgetSelector,n.SettingSection=e.SettingSection},function(e){o.loadArcGISJSAPIModules=e.loadArcGISJSAPIModules}],execute:function(){e((()=>{var e={10540:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},14321:e=>{"use strict";e.exports=r},31601:e=>{"use strict";e.exports=function(e){return e[1]}},41113:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},43595:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><g fill="none" fill-rule="evenodd"><path fill="#000" d="M.304 6.016a1.03 1.03 0 0 1 1.466 0l4.398 4.451 8.062-8.16a1.03 1.03 0 0 1 1.466 0c.405.41.405 1.074 0 1.484l-8.795 8.902c-.405.41-1.062.41-1.466 0L.304 7.5a1.06 1.06 0 0 1 0-1.484"></path><path d="M0 0h16v16H0z"></path></g></svg>'},55056:(e,t,s)=>{"use strict";e.exports=function(e){var t=s.nc;t&&e.setAttribute("nonce",t)}},60748:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var i=s(31601),r=s.n(i),n=s(76314),o=s.n(n)()(r());o.push([e.id,".widget-setting-wro-section{margin-bottom:1.5rem}.widget-setting-wro-section-b{margin-bottom:1rem}.widget-setting-wro-section-b>label{display:flex}.widget-setting-wro-label{overflow-wrap:anywhere}.widget-setting-wro-checkbox-label,.widget-setting-wro-radio-label{margin:0 6px}.widget-setting-wro-note{overflow-wrap:break-word;font-size:11px;font-style:italic}.widget-setting-wro-note-br{margin-top:10px}.widget-setting-wro-search-items{list-style-type:none;max-height:200px;padding:0;margin:0;overflow-y:auto;background:var(--light-500)}.widget-setting-wro-search-item{width:100%;font-size:12px;text-align:left;overflow-wrap:break-word}.jimu-rtl .widget-setting-wro-search-item{text-align:right}.widget-setting-wro-on{display:block}.widget-setting-wro-off{display:none}",""]);const a=o},62686:e=>{"use strict";e.exports=o},67386:e=>{"use strict";e.exports=s},76314:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var s="",i=void 0!==t[5];return t[4]&&(s+="@supports (".concat(t[4],") {")),t[2]&&(s+="@media ".concat(t[2]," {")),i&&(s+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),s+=e(t),i&&(s+="}"),t[2]&&(s+="}"),t[4]&&(s+="}"),s}).join("")},t.i=function(e,s,i,r,n){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(i)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(o[l]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);i&&o[d[0]]||(void 0!==n&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=n),s&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=s):d[2]=s),r&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=r):d[4]="".concat(r)),t.push(d))}},t}},77659:e=>{"use strict";var t={};e.exports=function(e,s){var i=function(e){if(void 0===t[e]){var s=document.querySelector(e);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}t[e]=s}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(s)}},79244:e=>{"use strict";e.exports=i},79298:e=>{"use strict";e.exports=n},85072:e=>{"use strict";var t=[];function s(e){for(var s=-1,i=0;i<t.length;i++)if(t[i].identifier===e){s=i;break}return s}function i(e,i){for(var n={},o=[],a=0;a<e.length;a++){var l=e[a],c=i.base?l[0]+i.base:l[0],d=n[c]||0,h="".concat(c," ").concat(d);n[c]=d+1;var g=s(h),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==g)t[g].references++,t[g].updater(p);else{var u=r(p,i);i.byIndex=a,t.splice(a,0,{identifier:h,updater:u,references:1})}o.push(h)}return o}function r(e,t){var s=t.domAPI(t);s.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;s.update(e=t)}else s.remove()}}e.exports=function(e,r){var n=i(e=e||[],r=r||{});return function(e){e=e||[];for(var o=0;o<n.length;o++){var a=s(n[o]);t[a].references--}for(var l=i(e,r),c=0;c<n.length;c++){var d=s(n[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}n=l}}},97825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(s){!function(e,t,s){var i="";s.supports&&(i+="@supports (".concat(s.supports,") {")),s.media&&(i+="@media ".concat(s.media," {"));var r=void 0!==s.layer;r&&(i+="@layer".concat(s.layer.length>0?" ".concat(s.layer):""," {")),i+=s.css,r&&(i+="}"),s.media&&(i+="}"),s.supports&&(i+="}");var n=s.sourceMap;n&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),t.styleTagTransform(i,e,t.options)}(t,e,s)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}}},t={};function a(s){var i=t[s];if(void 0!==i)return i.exports;var r=t[s]={id:s,exports:{}};return e[s](r,r.exports,a),r.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="",a.nc=void 0;var l={};return a.p=window.jimuConfig.baseUrl,(()=>{"use strict";a.r(l),a.d(l,{__set_webpack_public_path__:()=>M,default:()=>I});var e=a(67386),t=a(79244),s=a(14321),i=a(79298),r=a(62686),n=a(43595),o=a.n(n);const c={wro_setting_description:"Suitability Modeler",wro_setting_selectMap:"Select a map",wro_setting_allowExport:"Allow export",wro_setting_lockSlider:"Lock suitability slider",wro_setting_selectImageLayer:"Select a modeling layer",wro_setting_startingState:"Starting state",wro_setting_byUrl:"Blank model",wro_setting_byItem:"Pre-configured model",wro_setting_serviceUrl:"Image service URL",wro_setting_setUrl:"Set URL",wro_setting_model:"Model",wro_setting_searchForAModel:"Search for a model",wro_setting_noneSpecified:"None specified",wro_setting_displayLabel:"Display label",wro_setting_hideRanges:"Hide numeric ranges from data class labels"};var d=a(85072),h=a.n(d),g=a(97825),p=a.n(g),u=a(77659),m=a.n(u),f=a(55056),w=a.n(f),v=a(10540),x=a.n(v),b=a(41113),y=a.n(b),S=a(60748),_={};_.styleTagTransform=y(),_.setAttributes=w(),_.insert=m().bind(null,"head"),_.domAPI=p(),_.insertStyleElement=x();h()(S.A,_);S.A&&S.A.locals&&S.A.locals;var j=function(e,t,s,i){return new(s||(s=Promise))(function(r,n){function o(e){try{l(i.next(e))}catch(e){n(e)}}function a(e){try{l(i.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(o,a)}l((i=i.apply(e,t||[])).next())})};class I extends t.React.PureComponent{constructor(e){super(e),this.handleAllowExportChange=(e,t)=>{e&&this.props.onSettingChange({id:this.props.id,config:this.props.config.set("allowExport",t)})},this.handleLockSlider=(e,t)=>{e&&this.props.onSettingChange({id:this.props.id,config:this.props.config.set("lockSlider",t)})},this.handleDisplayLabelChange=(e,t)=>{e&&this.props.onSettingChange({id:this.props.id,config:this.props.config.set("displayLabel",t)})},this.handleHideRangesChange=(e,t)=>{e&&this.props.onSettingChange({id:this.props.id,config:this.props.config.set("hideRanges",t)})},this.handleMapWidgetSelected=e=>{this.props.onSettingChange({id:this.props.id,useMapWidgetIds:e})},this.handleSearchBlur=()=>{setTimeout(()=>{this.setState({searchHasFocus:!1})},10)},this.handleSearchFocus=()=>{this.setState({searchHasFocus:!0})},this.handleSearchItemClick=e=>{const t=e.target.getAttribute("data-itemId"),s=e.target.getAttribute("data-itemTitle");this.setState({clearSearch:!0},()=>{this.setState({searchHasFocus:!1}),this.search().catch(()=>null),this.setModelProps(!1,null,t,s)})},this.nls=e=>this.props.intl?this.props.intl.formatMessage({id:e,defaultMessage:c[e]}):e,this.searchRef=t.React.createRef();let s=!0;this.props.config.serviceUrl?s=!0:this.props.config.itemId&&(s=!1),this.state={serviceUrl:this.props.config.serviceUrl,itemId:this.props.config.itemId,itemTitle:this.props.config.itemTitle,byUrl:s,searchHasFocus:!1,searchResults:null,clearSearch:!1}}componentDidMount(){this.init().catch(()=>null)}init(){return j(this,void 0,void 0,function*(){try{const e=yield(0,r.loadArcGISJSAPIModules)(["esri/portal/Portal"]),t=new(0,e[0])({url:this.props.portalUrl});yield t.load(),this.portal=t,this.search().catch(()=>null)}catch(e){console.error(e)}})}render(){return(0,e.jsxs)(i.SettingSection,{role:"group","aria-label":this.nls("wro_setting_description"),children:[(0,e.jsxs)("div",{className:"widget-setting-wro-section",children:[(0,e.jsx)(s.Label,{className:"widget-setting-wro-label",children:this.nls("wro_setting_selectMap")}),(0,e.jsx)("div",{children:(0,e.jsx)(i.MapWidgetSelector,{onSelect:this.handleMapWidgetSelected,useMapWidgetIds:this.props.useMapWidgetIds})})]}),(0,e.jsx)("div",{className:"widget-setting-wro-section-b",children:(0,e.jsxs)(s.Label,{children:[(0,e.jsx)(s.Checkbox,{checked:!!this.props.config.displayLabel,onChange:this.handleDisplayLabelChange}),(0,e.jsx)("span",{className:"widget-setting-wro-checkbox-label",children:this.nls("wro_setting_displayLabel")})]})}),(0,e.jsx)("div",{className:"widget-setting-wro-section-b",children:(0,e.jsxs)(s.Label,{children:[(0,e.jsx)(s.Checkbox,{checked:!!this.props.config.allowExport,onChange:this.handleAllowExportChange}),(0,e.jsx)("span",{className:"widget-setting-wro-checkbox-label",children:this.nls("wro_setting_allowExport")})]})}),(0,e.jsx)("div",{className:"widget-setting-wro-section-b",children:(0,e.jsxs)(s.Label,{children:[(0,e.jsx)(s.Checkbox,{checked:!!this.props.config.lockSlider,onChange:this.handleLockSlider}),(0,e.jsx)("span",{className:"widget-setting-wro-checkbox-label",children:this.nls("wro_setting_lockSlider")})]})}),(0,e.jsx)("div",{className:"widget-setting-wro-section-b",children:(0,e.jsxs)(s.Label,{children:[(0,e.jsx)(s.Checkbox,{checked:!!this.props.config.hideRanges,onChange:this.handleHideRangesChange}),(0,e.jsx)("span",{className:"widget-setting-wro-checkbox-label",children:this.nls("wro_setting_hideRanges")})]})}),this.renderModelSection()]})}renderItemSection(){const i=this.state.clearSearch;let r,n=t.css``;this.props.config.serviceUrl?r=this.props.config.serviceUrl:this.props.config.itemId&&(r=this.state.itemTitle||this.props.config.itemTitle||this.props.config.itemId),r?n=t.css`
        background-color: ${this.props.theme.sys.color.primary.main};
        padding: 2px 6px;
        width: 100%;
      `:r=this.nls("wro_setting_model");let o=[];const a=this.state.searchResults;a&&(o=a.map(t=>(0,e.jsx)("li",{children:(0,e.jsx)(s.Button,{className:"widget-setting-wro-search-item",onMouseDown:this.handleSearchItemClick,"data-itemId":t.itemId,"data-itemTitle":t.itemTitle,children:t.itemTitle})},t.itemId)));let l="widget-setting-wro-search-items";const c=this.searchRef;return document.activeElement&&document.activeElement===c.current?l+=" widget-setting-wro-on":l+=" widget-setting-wro-off",(0,e.jsxs)("div",{className:"widget-setting-wro-section",children:[(0,e.jsx)(s.Label,{className:"widget-setting-wro-label",css:n,children:r}),!i&&(0,e.jsxs)("div",{children:[(0,e.jsx)(s.TextInput,{className:"w-100",type:"text",allowClear:!0,maxLength:1024,ref:this.searchRef,placeholder:this.nls("wro_setting_searchForAModel"),onChange:e=>{const t=e.target.value;this.search(t).catch(()=>null)},onFocus:this.handleSearchFocus,onBlur:this.handleSearchBlur}),(0,e.jsx)("ul",{className:l,children:o})]})]})}renderModelSection(){const i=this.state.byUrl,r=!i;return(0,e.jsxs)(t.React.Fragment,{children:[(0,e.jsxs)("div",{className:"widget-setting-wro-section-b",children:[(0,e.jsx)(s.Label,{className:"widget-setting-wro-label",children:this.nls("wro_setting_startingState")}),(0,e.jsx)("div",{children:(0,e.jsxs)(s.Label,{children:[(0,e.jsx)(s.Radio,{name:"startingState",checked:i,onChange:()=>{this.state.byUrl||this.setModelProps(!0,null,null,null),this.setState({byUrl:!0})}}),(0,e.jsx)("span",{className:"widget-setting-wro-radio-label",children:this.nls("wro_setting_byUrl")})]})}),(0,e.jsx)("div",{children:(0,e.jsxs)(s.Label,{children:[(0,e.jsx)(s.Radio,{name:"startingState",checked:r,onChange:()=>{this.state.byUrl&&this.setModelProps(!1,null,null,null),this.setState({byUrl:!1})}}),(0,e.jsx)("span",{className:"widget-setting-wro-radio-label",children:this.nls("wro_setting_byItem")})]})})]}),i&&this.renderUrlSection(),r&&this.renderItemSection()]})}renderUrlSection(){return(0,e.jsxs)("div",{className:"widget-setting-wro-section",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)(s.Label,{className:"widget-setting-wro-label",children:this.nls("wro_setting_serviceUrl")}),(0,e.jsxs)("div",{style:{display:"flex"},children:[(0,e.jsx)(s.TextInput,{className:"w-100",type:"text",maxLength:1024,defaultValue:this.state.serviceUrl,onChange:e=>{this.setState({serviceUrl:e.target.value})}}),(0,e.jsx)(s.Button,{icon:!0,title:this.nls("wro_setting_setUrl"),onClick:()=>{this.setModelProps(!0,this.state.serviceUrl,null,null)},children:(0,e.jsx)(s.Icon,{icon:o()})})]})]}),(0,e.jsxs)("div",{className:"widget-setting-wro-note",style:{width:"100%"},children:[(0,e.jsx)("div",{className:"widget-setting-wro-note-br",children:"https://example.com/arcgis/rest/services/Example/ImageServer"}),(0,e.jsx)("div",{className:"widget-setting-wro-note-br",children:"https://utility.arcgis.com/usrsvcs/servers/24b7c7752170431a95719323a9e71a5e/rest/services/WRO_World_Ecophysiographic_Data/ImageServer"}),(0,e.jsx)("div",{className:"widget-setting-wro-note-br",children:"https://greeninfrastructuremapsdev.arcgis.com/arcgis/rest/services/GreenInfrastructure/WeightedOverlay_Geoplanner/ImageServer"})]})]})}search(e){return j(this,void 0,void 0,function*(){try{if(!this.portal)return void console.error("WRO search, Portal wasn't loaded");const t=this.searchingId=Date.now();let s=[],i='(type:"Image Service" AND typekeywords:geodesignModelerLayer)';if("string"==typeof e&&e.length>0){i=i+" AND ("+e+")";let r={query:i,num:100,sortField:"title"};for(let e=1;e<=10;e++){const e=yield this.portal.queryItems(r);if(!(e.results&&e.results.length>0))break;if(s=s.concat(e.results),r=e.nextQueryParams,-1===r.start)break;if(t!==this.searchingId)break}}const r=s.map(e=>({itemId:e.id,itemTitle:e.title}));if(t!==this.searchingId)return;this.setState({searchResults:r})}catch(e){console.error("Search error",e)}})}setModelProps(e,t,s,i){const r=e=>("string"!=typeof e&&(e=""),0===(e=e.trim()).length&&(e=null),e);e?t=r(t):(s=r(s),i=r(i));const n=this.props.config.set("serviceUrl",t).set("itemId",s).set("itemTitle",i);this.props.onSettingChange({id:this.props.id,config:n}),setTimeout(()=>{this.setState({serviceUrl:t,itemId:s,itemTitle:i,clearSearch:!1})},100)}}function M(e){a.p=e}})(),l})())}}});