/*! For license information please see arcgis_processing-templates_node_modules_arcgis_imagery-components_dist_co-656ca0.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_processing-templates_node_modules_arcgis_imagery-components_dist_co-656ca0"],{608:(e,t,i)=>{i.d(t,{a:()=>m,b:()=>y,c:()=>d,d:()=>g,e:()=>c,f:()=>o,g:()=>h,h:()=>u,i:()=>f,m:()=>n,u:()=>r});const n=10.9,r=Number.MAX_VALUE-1;function s(e,t){const i=new Date(e),{useFriendlyIsoFormat:n,intl:r,format:s}=t;if(n&&r)return r.formatDate(i,{...r.convertDateFormatToIntlOptions(s??"short-date-long-time"),timeZone:"UTC"});let a=new Date(e).toISOString();return a=`${a.slice(0,a.indexOf("."))}Z`,a}function a(e,t,i="long"){const n=new Date(2022,9,10);return n.setMonth(e-1),t.formatDate(n,{month:i})}function o(e,t,i={}){if(null==e)return"";const{intl:n,useRecurringTimeLabel:r}=i;if(r&&n&&!Array.isArray(e)){const i=t.unit?.toLowerCase().trim();if(function(e){return"StdTime"===e.name&&!!e.recurring}(t)&&("months"===i||"quarters"===i))return"months"===i?a(e,n):function(e,t){return`${a(3*(e-1)+1,t,"short")} - ${a(3*e,t,"short")}`}(e,n)}const o=t.values?.[t.values.length-1];return i.useStartOrEndForRangedValue&&Array.isArray(e)&&2===e.length&&Array.isArray(o)&&(e=e.join("-")===o.join("-")?e[1]:e[0]),m(t)?(i.useFriendlyIsoFormat&&!i.format&&(i={format:l(t),...i}),Array.isArray(e)?e.map(e=>s(e,i)).join(" - "):s(e,i)):Array.isArray(e)?e.map(e=>n?.formatNumber(e)??String(e)).join(" - "):n?.formatNumber(e)??String(e)}function l(e){let t=e.intervalUnit?.toLowerCase().trim()??"";const{extent:i}=e,n=e.interval??0,r=e.values?.length;if(!["years","months","days","hours"].includes(t)&&i?.length&&r){const e=(i[1]-i[0])/r,n=864e5;t=e>=365*n?"years":e>=28*n?"months":t}switch(t){case"months":t=n>11?"years":t;break;case"days":t=n>364?"years":n>27?"months":t;break;case"hours":t="days"}return"years"===t?"year":"months"===t?"short-month-year":"short-date"}function u(e,t){const i=t?.dimensions?.find(({name:t})=>t===e.name);if(!i?.extent)return e;const n=[...i.extent],{values:r}=e;if(r?.length){const t=r.filter(e=>Array.isArray(e)?null==n[1]||n[0]===n[1]?e[0]===n[0]:e[0]>=n[0]&&e[0]<=n[1]&&e[1]>=n[0]&&e[1]<=n[1]:e>=n[0]&&e<=n[1]);if(0===t.length){const e=r[r.length-1];Array.isArray(e)&&e[1]===n[0]&&t.push(e)}return{...e,extent:n,values:t}}return{...e,extent:n}}function c(e){const{values:t,extent:i,name:n}=e;let r=t?.[0]??i?.[0];return"stdz"===n.toLowerCase()&&!e.hasRanges&&i&&Math.abs(i[1])<=Math.abs(i[0])&&(r=t?.length?t[t.length-1]:i[1]),r}function d(e){return"imagery-tile"===e.type||"wcs"===e.type?e.multidimensionalDefinition:(e.mosaicRule??e.defaultMosaicRule)?.multidimensionalDefinition}async function h(e,t=!1){if("imagery-tile"===e.type||"wcs"===e.type)return e.serviceRasterInfo?.multidimensionalInfo;const{rasterFunction:i,version:n}=e;return t||n<=10.9||!i||"none"===i.functionName?.toLowerCase()?e.serviceRasterInfo.multidimensionalInfo:(await e.generateRasterInfo(e.rasterFunction).catch(()=>e.serviceRasterInfo)).multidimensionalInfo}function m(e,t=!1){return"StdTime"===e.name&&(t||!e.recurring)}function g(e,t,i){t=u(t,i);const n=o(e.values[0],t);if(!t.values?.some(e=>n===o(e,t))){const i=c(t);e.values=null!=i?[i]:[]}}function f(e){return Array.isArray(e[0])}function y(e){return e.variables.map(({name:e,unit:t,description:i})=>({name:e,label:t?`${e} (${t})`:e,description:i}))}},2885:(e,t,i)=>{i.r(t),i.d(t,{ArcgisImageryDimensionSlider:()=>h});var n=i(9013),r=i(5395),s=i(608),a=i(2797),o=i(3789),l=i(3722),u=i(7516),c=i(2981);const d=u.AH`@layer{.arcgis-imagery-dimension-slider{width:100%;height:100%;&.esri-value-picker__layout--vertical{&.esri-value-picker__type--slider{min-height:150px;.esri-value-picker__action-bar{min-height:150px}}}}}`;class h extends c.WF{constructor(){super(...arguments),this.sliderRef=e=>this.createOrUpdateValuePicker(e),this.handleResize=()=>{const e=!(0,s.a)(this.dimensionInfo),t=this.valuePickerConfig?.slider,{heightThresholdForCompactZ:i}=this.sliderSetting;if(!e||!t||!i)return;const{container:n,visibleElements:r}=t;if(n instanceof HTMLElement){const e=n.clientHeight>=i;r.previousButton=e,r.nextButton=e}},this.sliderSetting={playRate:2e3,tooltipPlacement:"auto"},this.arcgisChange=(0,c.lh)()}static{this.properties={dimensionInfo:0,dimensionValue:[9,{hasChanged:()=>!1}],sliderSetting:0}}static{this.styles=d}static{this.shadowRootOptions=c.Iq}get dimensionValue(){return this._dimensionValue}set dimensionValue(e){this._dimensionValue=e;const{activeValue:t,valuePickerConfig:i}=this;if(!i||null==e||e===t)return;const{slider:n,dimensionValues:r}=i,s=!!n.component.reversed;n.values=this.getSelectedSliderValue(e,r,s)}load(){this.listenOn(window,"resize",this.handleResize)}willUpdate(e){this.hasUpdated&&e.has("dimensionInfo")&&this.createOrUpdateValuePicker()}disconnectedCallback(){super.disconnectedCallback(),this.destroyValuePicker()}createValueTicks(e,t){return Array.from({length:t},(i,n)=>0===n?0:n===t-1?e.length-1:Math.round(n*(e.length-1)/(t-1)))}isReversedZ(e){let t=e[e.length-1];return Array.isArray(t)&&(t=t[t.length-1]),t<=0}createValuePickerSlider(e){const t=e.values.slice(),i=(0,s.a)(e,!0),n=!i&&this.isReversedZ(t),r=t.map((e,t)=>t),o=r.length,u=o<=4?2:i||o<=10?3:4,c=this.createValueTicks(r,u),d=Math.min(19,o>19?Math.floor(o/2):o),h=this.createValueTicks(r,d),m=[...c];return new l.default({type:"slider",min:0,max:t.length-1,steps:r,minorTicks:h,majorTicks:c,labels:m,reversed:n,visibleElements:{thumbTooltip:!this.sliderSetting.hideThumbTooltip},labelFormatFunction:(i,r)=>{const o=n?t.length-1-i:i;return"tick"===r?(0,s.f)(t[o],e,{intl:a,useRecurringTimeLabel:!0,useFriendlyIsoFormat:!0,useStartOrEndForRangedValue:!0}):(0,s.f)(t[o],e,{intl:a,useRecurringTimeLabel:!0,useFriendlyIsoFormat:!0,format:"short-date-long-time"})}})}createOrUpdateValuePicker(e){const{valuePickerConfig:t}=this;if(!t&&!e)return;const{dimensionInfo:i}=this,n=(0,s.a)(i,!0),{name:r,values:a}=i,l=!a?.length||a.length<2;if(t?.handle?.remove(),l)return this.destroyValuePicker(),void(this.valuePickerConfig=void 0);const u=a.slice(),c=!n&&this.isReversedZ(u),d=this.getSelectedSliderValue(this.dimensionValue,u,c),h=this.createValuePickerSlider(i),{sliderSetting:m}=this,g=t?.slider??new o.default({container:e,layout:n?"horizontal":"vertical"});if(g.component=h,g.values=d,g.playRate=m.playRate,g.caption=r,g.label=r,!t){const t=m.tooltipPlacement??(n?"top":"auto");"auto"!==t&&!m.hideThumbTooltip&&setTimeout(()=>{const i=e.getElementsByTagName("calcite-tooltip")[0];i&&(i.placement=t,i.overlayPositioning="fixed")},1e3),g.when(this.handleResize)}const f=g.watch("values",e=>{const t=e[0],i=c?u.length-1-t:t;this.updateDefinitionDimensionValue(r,u[i])});this.valuePickerConfig={slider:g,dimensionName:r,dimensionValues:u,handle:f}}destroyValuePicker(){const{valuePickerConfig:e}=this;e?.handle.remove(),e?.slider.destroy(),this.valuePickerConfig=void 0}getSelectedSliderValue(e,t,i){const n=null==e?0:t.findIndex(t=>Array.isArray(e)&&Array.isArray(t)?e.join("-")===t.join("-"):e===t);return[-1===n?0:i?t.length-1-n:n]}updateDefinitionDimensionValue(e,t){this.activeValue=t,this.arcgisChange.emit({dimensionName:e,value:t})}render(){return u.qy`<div class="arcgis-imagery-dimension-slider" ${(0,r.K)(this.sliderRef)}></div>`}}(0,n.c)("arcgis-imagery-dimension-slider",h)}}]);