/*! For license information please see arcgis_processing-templates_node_modules_arcgis_imagery-components_dist_co-314574.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_processing-templates_node_modules_arcgis_imagery-components_dist_co-314574"],{6250:(e,t,r)=>{r.d(t,{A:()=>i,I:()=>n,S:()=>o,a:()=>w,b:()=>N,c:()=>v,d:()=>g,e:()=>y,f:()=>l,g:()=>f,h:()=>$,i:()=>u,j:()=>h,k:()=>T,l:()=>S,m:()=>d,n:()=>C,o:()=>x,p:()=>I,q:()=>s,r:()=>k,s:()=>p});var a=r(2797),i=(e=>(e.VISIBLE="visible",e.DISPLAY_EXTENT="displayExtent",e.ALL="all",e))(i||{}),n=(e=>(e.ALL="all",e.SELECT="select",e))(n||{}),o=(e=>(e.ASC="asc",e.DESC="desc",e))(o||{}),s=(e=>(e.BRAND="brand",e.DANGER="danger",e.INFO="info",e.SUCCESS="success",e.WARNING="warning",e))(s||{});function l(e){return"object"==typeof e&&null!==e&&"name"in e&&"AbortError"===e.name}const c=new Set(["single","double"]),m=new Set(["small-integer","big-integer","integer","oid",...c]),p=new Set([...m,"date","string"]);function u(e){return m.has(e)}function d(e){return c.has(e)}function g(e){return!!e?.domain?.codedValues}function h(e){return g(e)&&"MosaicCatalogItemCategoryDomain"===e?.domain?.name}function f(e,t=!1){if(!e)return null;const r=new Date(e),a=t?r.getUTCFullYear():r.getFullYear(),i=t?r.getUTCMonth():r.getMonth(),n=t?r.getUTCDate():r.getDate(),o=t?r.getUTCHours():r.getHours(),s=t?r.getUTCMinutes():r.getMinutes(),l=t?r.getUTCSeconds():r.getSeconds();return`${a}-${b((i+1).toString(),2,"0")}-${b(n.toString(),2,"0")} ${b(o.toString(),2,"0")}:${b(s.toString(),2,"0")}:${b(l.toString(),2,"0")}`}function b(e,t,r){for(r=r||" ";e.length<t;)e=r+e;return e}function I(e,t,r){return e+t-1>r?r:e+t-1}function y(e,t,r="en"){return"string"==typeof e&&"string"==typeof t?e.localeCompare(t,r):e<t?-1:e>t?1:0}function v(e,t){if(!e||!t)return;let r=t.assetsPath;r.endsWith("/")||(r+="/"),e?.firstElementChild?.insertAdjacentHTML("beforebegin",`<link rel="stylesheet" href="${r}esri/themes/light/main.css" />`)}function w(e,t){return`${e} IN (${t.map(e=>`${e}`).join(",")})`}const $=(e,t="en")=>{const r=e.toString();if(r.includes("e")){const[e,t]=r.split("e"),a=Math.max(0,e.length-2),i=Number.parseInt(t,10);return i<0?a-i:Math.max(0,a-i)}const a=r.indexOf(".");if(-1===a)return 0;const i=r.length-a-1;return new Intl.NumberFormat(t).formatToParts(1.1).find(e=>"decimal"===e.type)?i:0};function x(e){e?.remove()}function T(e,t){const r=Math.pow(10,t);return Math.floor(e*r)/r}function S(e,t){const r=Math.pow(10,t);return Math.ceil(e*r)/r}function k(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}function C(e,t){if(null==e)return"";const r=$(e),i=a.convertNumberFormatToIntlOptions({...r>0&&{places:t&&t>0?Math.min(t,r):r,style:"decimal"},digitSeparator:!0});return a.formatNumber(e,i)}function N(e,t){return null==e?"":"date"===t?a.formatDate(e):u(t)&&"oid"!==t?C(e,4):e.toString()}},6699:(e,t,r)=>{r.r(t),r.d(t,{ArcgisImageryItemDetailsPopover:()=>m});var a=r(9013),i=r(2797),n=r(8947),o=r(2981),s=r(7516),l=r(6250);r(8423),r(2373),r(1552);const c=s.AH`.image-item-preview-wrapper{width:100%;height:300px}.image-item-info-table-wrapper{display:block;overflow-x:auto}.image-item-details-title-wrapper{display:flex;overflow-wrap:break-word;font-weight:600;justify-content:center;padding:var(--calcite-spacing-sm)}.image-item-details-body-wrapper{flex:1 1 auto;overflow-y:auto}`;class m extends o.WF{constructor(){super(...arguments),this.open=!1,this.arcgisImageItemDetailsPopoverClose=(0,o.lh)(),this.arcgisImageItemToInspectChange=(0,o.lh)()}static{this.properties={imageItemInfo:16,layer:0,view:0,messages:0,referenceElement:0,open:5,imageItemFeatureGraphic:0}}static{this.styles=c}willUpdate(e){e.has("open")&&this.open&&this.refreshImageItemInfo(this.imageItemFeatureGraphic)}getFormattedPixelType(e){const{messages:t}=this;switch(e){case"s8":return t.s8;case"s16":return t.s16;case"s32":return t.s32;case"u1":return t.u1;case"u2":return t.u2;case"u4":return t.u4;case"u8":return t.u8;case"u16":return t.u16;case"u32":return t.u32;case"f32":return t.f32;case"f64":return t.f64;case"c64":return t.c64;case"c128":return t.c128;default:return t.unknown}}async refreshImageItemInfo(e){const{layer:t}=this,r=await t.getCatalogItemRasterInfo(e?.attributes[t.objectIdField]);this.imageItemInfo=r}render(){const{messages:e,open:t,imageItemInfo:r,referenceElement:a}=this,{height:i}=this.referenceElement?.getBoundingClientRect(),l="rtl"===(0,n.Qp)(this.el);return s.qy`<calcite-popover .label=${e.imageDetails} .heading=${e.imageDetails} .referenceElement=${a} placement=auto-start overlay-positioning=fixed pointer-disabled trigger-disabled offset-distance=10 .open=${t} closable @calcitePopoverClose=${()=>{this.arcgisImageItemDetailsPopoverClose.emit()}}><calcite-panel style=${(0,o.zl)({height:i-48+"px",width:"320px"})}>${this.renderImageItemDisplayTitle()}<div class="image-item-details-body-wrapper">${this.renderImageItemPreviewView()}${r&&this.renderImageItemInfoTables()||""}</div><calcite-button style=${(0,o.zl)({paddingInlineEnd:"5px"})} width=half slot=footer appearance=outline kind=neutral .iconStart=${l?"chevron-right":"chevron-left"} @click=${()=>this.arcgisImageItemToInspectChange.emit("previous")}>${e.previous}</calcite-button><calcite-button style=${(0,o.zl)({paddingInlineStart:"5px"})} width=half slot=footer appearance=outline kind=neutral .iconEnd=${l?"chevron-left":"chevron-right"} @click=${()=>this.arcgisImageItemToInspectChange.emit("next")}>${e.next}</calcite-button></calcite-panel></calcite-popover>`}renderImageItemPreviewView(){const{messages:e,layer:t,imageItemFeatureGraphic:r}=this;return s.qy`<calcite-block collapsible expanded .heading=${e.preview}><div class="image-item-preview-wrapper"><arcgis-imagery-item-preview .previewLayerUrl=${t.url} .previewImageItemGraphic=${r} .previewRasterFunction=${t.rasterFunction}></arcgis-imagery-item-preview></div></calcite-block>`}renderImageItemInfoTables(){const{imageItemInfo:e}=this,{extent:t,statistics:r}=e??{};return s.qy`<div>${e?this.renderImageItemRasterInformationTable():null}${e?this.renderImageItemRasterMetadataTable():null}${t?this.renderImageItemExtentInfoTable():null}${e?this.renderImageItemSpatialReferenceTable():null}${r?this.renderImageItemStatisticsInfoTable():null}</div>`}renderImageItemRasterInformationTable(){const{messages:e,imageItemInfo:t}=this,r=[{accessor:"property",header:e.property},{accessor:"value",header:e.value}],{bandCount:a,height:i,width:n,pixelType:o,pixelSize:c,colormap:m,dataType:p,keyProperties:u}=t,d=Number.isFinite(c?.x)?(0,l.h)(c.x)>4?(0,l.r)(c.x,4):c.x:null,g=Number.isFinite(c?.y)?(0,l.h)(c.y)>4?(0,l.r)(c.y,4):c.y:null,h=[{property:e.columns,value:(0,l.n)(n,4),tooltip:(0,l.n)(n)},{property:e.rows,value:(0,l.n)(i,4),tooltip:(0,l.n)(i)},{property:e.bandNumber,value:(0,l.n)(a,4),tooltip:(0,l.n)(a)},{property:e.cellSizeX,value:d?(0,l.n)(d,4):null,tooltip:(0,l.n)(c.x)},{property:e.cellSizeY,value:g?(0,l.n)(g,4):null,tooltip:(0,l.n)(c.y)},{property:e.sourceType,value:u?.DataType??p},{property:e.pixelType,value:this.getFormattedPixelType(o)},{property:e.colormap,value:m}].filter(e=>!!e.value||Number.isFinite(e.value));return h.length>0&&s.qy`<calcite-block collapsible expanded .heading=${e.rasterInformation}><div class="image-item-info-table-wrapper"><arcgis-imagery-item-info-table .columns=${r} .data=${h}></arcgis-imagery-item-info-table></div></calcite-block>`||""}renderImageItemRasterMetadataTable(){const{messages:e,imageItemInfo:t}=this,r=[{accessor:"property",header:e.property},{accessor:"value",header:e.value}],a=Object.fromEntries(Object.entries(t.keyProperties).map(([e,t])=>[e.toLowerCase(),t])),{sensorname:n,productname:o,cloudcover:c,acquisitiondate:m,sunazimuth:p,sunelevation:u,ellipsoid:d}=a||{},g=m?i.formatDate(m):null,h=[{property:e.sensorName,value:n},{property:e.productName,value:o},{property:e.acquisitionDate,value:g},{property:e.cloudCover,value:(0,l.n)(c,4),tooltip:(0,l.n)(c)},{property:e.sunAzimuth,value:(0,l.n)(p,4),tooltip:(0,l.n)(p)},{property:e.sunElevation,value:(0,l.n)(u,4),tooltip:(0,l.n)(u)},{property:e.spheroid,value:d}].filter(e=>!!e.value||Number.isFinite(e.value));return h.length>0&&s.qy`<calcite-block collapsible expanded .heading=${e.rasterMetadata}><div class="image-item-info-table-wrapper"><arcgis-imagery-item-info-table .columns=${r} .data=${h}></arcgis-imagery-item-info-table></div></calcite-block>`||""}renderImageItemExtentInfoTable(){const{messages:e,imageItemInfo:t}=this,r=[{accessor:"property",header:e.property},{accessor:"value",header:e.value}],{extent:a}=t,{xmin:i,xmax:n,ymin:o,ymax:c}=a,m=[{property:e.top,value:(0,l.n)(c,4),tooltip:(0,l.n)(c)},{property:e.bottom,value:(0,l.n)(o,4),tooltip:(0,l.n)(o)},{property:e.left,value:(0,l.n)(i,4),tooltip:(0,l.n)(i)},{property:e.right,value:(0,l.n)(n,4),tooltip:(0,l.n)(n)}].filter(e=>!!e.value);return m.length>0&&s.qy`<calcite-block collapsible expanded .heading=${e.extent}><arcgis-imagery-item-info-table .columns=${r} .data=${m}></arcgis-imagery-item-info-table></calcite-block>`||""}renderImageItemStatisticsInfoTable(){const{messages:e,imageItemInfo:t}=this,r=[{accessor:"bandName",header:e.bandName},{accessor:"min",header:e.min},{accessor:"max",header:e.max},{accessor:"avg",header:e.mean},{accessor:"stddev",header:e.std}],{bandInfos:a,statistics:i}=t,n=a.map((e,t)=>{const r=i[t],a=Object.entries(r).reduce((e,[t,r])=>(e[t]=(0,l.h)(r)>4?(0,l.n)((0,l.r)(r,4),4):(0,l.n)(r),e),{});return{bandName:e.name,...a}});return n.length>0&&s.qy`<calcite-block collapsible expanded .heading=${e.statistics}><div class="image-item-info-table-wrapper"><arcgis-imagery-item-info-table .columns=${r} .data=${n}></arcgis-imagery-item-info-table></div></calcite-block>`||""}renderImageItemSpatialReferenceTable(){const{messages:e,imageItemInfo:t}=this,r=[{accessor:"property",header:e.property},{accessor:"value",header:e.value}],{keyProperties:a,spatialReference:i}=t,n=[{property:e.projectedCoordinateSystem,value:""},{property:e.projection,value:""},{property:e.wkid,value:i?.wkid??e.unknown},{property:e.datum,value:a?.DATUM},{property:e.spheroid,value:a?.ELLIPSOID}].filter(e=>!!e.value||Number.isFinite(e.value));return n.length>0&&s.qy`<calcite-block collapsible expanded .heading=${e.spatialReference}><div class="image-item-info-table-wrapper"><arcgis-imagery-item-info-table .columns=${r} .data=${n}></arcgis-imagery-item-info-table></div></calcite-block>`||""}renderImageItemDisplayTitle(){const{imageItemFeatureGraphic:e,layer:t}=this,{attributes:r}=e??{},a=r?.Name||r?.name,i=r?.[t.objectIdField];return s.qy`<div class="image-item-details-title-wrapper">${`${i}: ${a}`}</div>`}}(0,a.c)("arcgis-imagery-item-details-popover",m)},8947:(e,t,r)=>{r.d(t,{Qp:()=>s,Yt:()=>a,Zj:()=>l});const a=(e,t,r)=>(0,n(t).subscribe)(t=>{const a=t.some(t=>((e,t)=>{let r=e;for(;r;){if(r===t)return!0;if(!r.parentNode)return!1;r=r.parentNode instanceof ShadowRoot?r.parentNode.host:r.parentNode}return!1})(e,t.target));a&&r()}),i={},n=e=>{const t=e.join(","),r=i[t];if(void 0!==r)return r;const a=new Set,n=new MutationObserver(e=>a.forEach(t=>t(e)));globalThis.document&&n.observe(document.documentElement,{attributes:!0,attributeFilter:e,subtree:!0});const o={subscribe:e=>(a.add(e),()=>{a.delete(e),0===a.size&&(n.disconnect(),i[t]=void 0)})};return i[t]=o,o},o=(e,t)=>{let r=e;for(;r;){const e=r.closest?.(t);if(e)return e;const a=r.getRootNode?.();if(a===globalThis.document)return;r=a.host}};const s=e=>l(e,"dir","ltr"),l=(e,t,r)=>{const a=o(e,`[${t}]`);return a?.getAttribute(t)??r}}}]);