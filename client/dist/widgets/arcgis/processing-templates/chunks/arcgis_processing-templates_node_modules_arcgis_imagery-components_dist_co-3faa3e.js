/*! For license information please see arcgis_processing-templates_node_modules_arcgis_imagery-components_dist_co-3faa3e.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_processing-templates_node_modules_arcgis_imagery-components_dist_co-3faa3e"],{6919:(e,t,s)=>{s.d(t,{u:()=>h});var i=s(2939),l=s(9901),o=s(157);const r=(e,t,s)=>{const i=new Map;for(let l=t;l<=s;l++)i.set(e[l],l);return i},h=(0,l.u$)(class extends l.WL{constructor(e){if(super(e),e.type!==l.OA.CHILD)throw Error("repeat() can only be used in text expressions")}dt(e,t,s){let i;void 0===s?s=t:void 0!==t&&(i=t);const l=[],o=[];let r=0;for(const t of e)l[r]=i?i(t,r):r,o[r]=s(t,r),r++;return{values:o,keys:l}}render(e,t,s){return this.dt(e,t,s).values}update(e,[t,s,l]){const h=(0,o.cN)(e),{values:n,keys:d}=this.dt(t,s,l);if(!Array.isArray(h))return this.ut=d,n;const a=this.ut??=[],c=[];let u,g,p=0,f=h.length-1,m=0,v=n.length-1;for(;p<=f&&m<=v;)if(null===h[p])p++;else if(null===h[f])f--;else if(a[p]===d[m])c[m]=(0,o.lx)(h[p],n[m]),p++,m++;else if(a[f]===d[v])c[v]=(0,o.lx)(h[f],n[v]),f--,v--;else if(a[p]===d[v])c[v]=(0,o.lx)(h[p],n[v]),(0,o.Dx)(e,c[v+1],h[p]),p++,v--;else if(a[f]===d[m])c[m]=(0,o.lx)(h[f],n[m]),(0,o.Dx)(e,h[p],h[f]),f--,m++;else if(void 0===u&&(u=r(d,m,v),g=r(a,p,f)),u.has(a[p]))if(u.has(a[f])){const t=g.get(d[m]),s=void 0!==t?h[t]:null;if(null===s){const t=(0,o.Dx)(e,h[p]);(0,o.lx)(t,n[m]),c[m]=t}else c[m]=(0,o.lx)(s,n[m]),(0,o.Dx)(e,h[p],s),h[t]=null;m++}else(0,o.KO)(h[f]),f--;else(0,o.KO)(h[p]),p++;for(;m<=v;){const t=(0,o.Dx)(e,c[v+1]);(0,o.lx)(t,n[m]),c[m++]=t}for(;p<=f;){const e=h[p++];null!==e&&(0,o.KO)(e)}return this.ut=d,(0,o.mY)(e,c),i.c0}})},7325:(e,t,s)=>{s.d(t,{s:()=>i});const i=(e,t=100)=>{let s;return(...i)=>{clearTimeout(s),s=setTimeout(()=>{clearTimeout(s),e(...i)},t)}}},9725:(e,t,s)=>{s.r(t),s.d(t,{ArcgisImageryLazyLoadingList:()=>a});var i=s(9013),l=s(6919),o=s(7325),r=s(7516),h=s(5395),n=s(2981);const d=r.AH`:host{display:flex;flex-direction:column;overflow:hidden}.pop-menu{display:flex;flex-direction:column;position:absolute;max-height:100%;width:100%;overflow-y:hidden;border:1px solid var(--calcite-color-border-3);&.pop-menu-flyout{top:0;left:0;z-index:100}}.pop-list{overflow-y:auto}`;class a extends n.WF{constructor(){super(...arguments),this.refFilterNode=(0,h._)(),this.refMenuNode=(0,h._)(),this.hasSelectedScrolled=!1,this.suspendObserver=!1,this.filterHeight=56,this.itemHeight=33,this.itemHeightAdjusted=!1,this.listChange=e=>{const t=e.currentTarget.selectedItems[0];if(!t)return;const s=t.value,i=this.list.findIndex(({value:e})=>e===s);this.arcgisChange.emit({selectedValue:s,selectedIndex:i})},this.setLastNode=e=>{e&&(this.refLastNode&&this.observer?.unobserve(this.refLastNode),this.refLastNode=e)},this.setFirstNode=e=>{e&&(this.refFirstNode&&this.observer?.unobserve(this.refFirstNode),this.refFirstNode=e)},this.setSecondNode=e=>{e&&(this.refSecondNode=e)},this.setSecondLastNode=e=>{e&&(this.refSecondLastNode=e)},this.updateFilter=(0,o.s)(()=>{if(!this.refFilterNode.value)return;const e=this.refFilterNode.value.filteredItems;if(!e.length)return;const t=new Set(e.map(({label:e})=>e));this.suspendObserver=!0,this.filterList=this.list.filter(({label:e})=>t.has(e)),this.pageRanges=[0,1],this.pageId=0},100),this.pageId=0,this.selectedIndex=0,this.showFilter=!1,this.pageSize=500,this.removeOldPages=!1,this.position="auto",this.pageBufferSize=10,this.useFlyOut=!1,this.arcgisChange=(0,n.lh)()}static{this.properties={pageId:16,filterList:16,list:0,popoverProps:0,selectedIndex:9,messages:0,showFilter:5,pageSize:9,removeOldPages:5,position:1,pageBufferSize:9,useFlyOut:5}}static{this.styles=d}load(){const e=Math.floor(this.list.length/this.pageSize);e<2||(this.updatePageId(),this.setupObserver(e))}willUpdate(e){this.hasUpdated&&e.has("list")&&(this.lockedMenuPosition=void 0),this.hasUpdated&&e.has("selectedIndex")&&this.updatePageId(this.selectedIndex)}updated(){if(this.useFlyOut&&!this.itemHeightAdjusted&&this.refSelectedNode){const e=this.refSelectedNode.getBoundingClientRect().height;if(e&&this.itemHeight!==e){this.itemHeight=e;const{refMenuNode:{value:t}}=this;if(t){const{height:e,translateX:s,translateY:i}=this.getListPosition();t.style.height=`${e}px`,t.style.transform=`translate(${s}px, ${i}px)`}}this.itemHeightAdjusted=!0}requestAnimationFrame(()=>{!this.hasSelectedScrolled&&this.refSelectedNode&&(this.refSelectedNode.scrollIntoView(),this.hasSelectedScrolled=!0),this.pendingScroll&&this.pendingScroll(),requestAnimationFrame(()=>{const{observer:e,refFirstNode:t,refLastNode:s}=this;e&&(this.suspendObserver=!1,t&&e.observe(t),s&&e.observe(s))})})}disconnectedCallback(){super.disconnectedCallback(),this.observer?.disconnect()}getSelectedIndex(e=this.selectedIndex){return e>=this.list.length?0:e}getListPosition(){const{width:e,left:t,top:s,bottom:i,containerTop:l,containerBottom:o=0}=this.popoverProps,r=this.filterList??this.list,h=this.itemHeight*r.length+(this.showFilter?this.filterHeight:0),n=(o>i?o:document.body.clientHeight)-i,d=s-l;this.lockedMenuPosition||("auto"===this.position?this.lockedMenuPosition=1.5*h<=n||d/(d+n)<.618?"down":"up":this.lockedMenuPosition="down"===this.position?"down":"up");const a="down"===this.lockedMenuPosition,c=a?Math.min(h,n-2):Math.min(h,d-2);return{width:e,height:c,translateX:t,translateY:a?i:Math.max(l,s-c)}}getSubList(){const{pageRanges:e,removeOldPages:t}=this,s=e&&!t?Math.min(e[0],this.pageId):this.pageId,i=e&&!t?Math.max(e[1],this.pageId+1):this.pageId+1,l=this.filterList??this.list,{pageBufferSize:o}=this,r=l.slice(0===s?0:s*this.pageSize-o,i*this.pageSize+o);return t||(this.pageRanges=[s,i]),r}setSelectedNode(e){this.refSelectedNode=e}setNullRef(e){}setupObserver(e){this.observer=new IntersectionObserver((t,s)=>{if(this.suspendObserver)return;let i=!1;if(1===(t=t.filter(({isIntersecting:e})=>e)).length){const s=t[0];if(this.refLastNode&&"label"in s.target&&s.target.label===this.refLastNode.label)this.pageId<e&&(this.pageId++,i=!0,this.removeOldPages&&(this.pendingScroll=()=>{this.pageId>0&&this.refSecondNode?.scrollIntoView(!0)}));else if(this.pageId>0){if(this.pageId--,this.removeOldPages)this.pendingScroll=()=>{this.refSecondLastNode?.scrollIntoView(!1),this.pendingScroll=void 0};else{const e=s.target;this.pendingScroll=()=>{e.scrollIntoView(),this.pendingScroll=void 0}}i=!0}}else if(2===t.length&&this.pageId===e){if(this.pageId--,!this.removeOldPages){const e=this.refLastNode;this.pendingScroll=()=>{e?.scrollIntoView(),this.pendingScroll=void 0}}i=!0}i&&(this.refLastNode&&s.unobserve(this.refLastNode),this.refFirstNode&&s.unobserve(this.refFirstNode))})}updatePageId(e=this.selectedIndex){e=this.getSelectedIndex(e);const t=Math.floor(e/this.pageSize);t!==this.pageId&&(this.pageId=t)}render(){let e;if(this.suspendObserver=!0,this.useFlyOut){const{width:t,height:s,translateX:i,translateY:l}=this.getListPosition();e={width:`${t}px`,height:`${s}px`,transform:`translate(${i}px, ${l}px)`}}const t=this.list.map(({label:e})=>({label:e}));return r.qy`<div class=${(0,n.CP)(this.useFlyOut?"pop-menu pop-menu-flyout":"pop-menu")} style=${(0,n.zl)(e)} ${(0,h.K)(this.refMenuNode)}>${this.showFilter&&r.qy`<div><calcite-filter .items=${t} .messageOverrides=${this.messages} @calciteFilterChange=${this.updateFilter} ${(0,h.K)(this.refFilterNode)}></calcite-filter></div>`||""}<div class="pop-list">${this.renderList()}</div></div>`}renderList(){const{pageBufferSize:e}=this,t=Math.floor(e/2),s=this.getSubList(),i=this.getSelectedIndex(),o=this.list[i];return r.qy`<calcite-list .label=${this.messages.label} selection-mode=single-persist display-mode=nested @calciteListChange=${this.listChange} scale=s>${(0,l.u)(s,({label:e})=>e,({value:i,label:l},n)=>r.qy`<calcite-list-item .value=${i} .label=${l} .selected=${i===o.value} ${(0,h.K)(this.hasSelectedScrolled||l!==o.label?n===s.length-t?this.setLastNode:n===s.length-e?this.setSecondLastNode:n===t?this.setFirstNode:n===e?this.setSecondNode:this.setNullRef:this.setSelectedNode)}></calcite-list-item>`)}</calcite-list>`}}(0,i.c)("arcgis-imagery-lazy-loading-list",a)}}]);