System.register(["jimu-core/emotion","jimu-core","jimu-arcgis","jimu-ui","jimu-theme"],function(e,t){var a={},s={},n={},r={},i={};return{setters:[function(e){a.jsx=e.jsx,a.jsxs=e.jsxs},function(e){s.AppMode=e.AppMode,s.React=e.React,s.ReactRedux=e.ReactRedux,s.WidgetState=e.WidgetState,s.appActions=e.appActions,s.classNames=e.classNames,s.css=e.css,s.focusElementInKeyboardMode=e.focusElementInKeyboardMode,s.getAppStore=e.getAppStore,s.hooks=e.hooks,s.loadArcGISJSAPIModules=e.loadArcGISJSAPIModules},function(e){n.JimuMapViewComponent=e.JimuMapViewComponent},function(e){r.Button=e.Button,r.Icon=e.Icon,r.Loading=e.Loading,r.LoadingType=e.LoadingType,r.Paper=e.Paper,r.Popper=e.Popper,r.Select=e.Select,r.Typography=e.Typography,r.WidgetPlaceholder=e.WidgetPlaceholder,r.defaultMessages=e.defaultMessages},function(e){i.Global=e.Global}],execute:function(){e((()=>{var e={1888:e=>{"use strict";e.exports=i},9044:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M6 6.5a.5.5 0 0 1 1 0v6a.5.5 0 0 1-1 0zM9.5 6a.5.5 0 0 0-.5.5v6a.5.5 0 0 0 1 0v-6a.5.5 0 0 0-.5-.5"></path><path fill="#000" fill-rule="evenodd" d="M11 0H5a1 1 0 0 0-1 1v2H.5a.5.5 0 0 0 0 1h1.6l.81 11.1a1 1 0 0 0 .995.9h8.19a1 1 0 0 0 .995-.9L13.9 4h1.6a.5.5 0 0 0 0-1H12V1a1 1 0 0 0-1-1m0 3V1H5v2zm1.895 1h-9.79l.8 11h8.19z" clip-rule="evenodd"></path></svg>'},14321:e=>{"use strict";e.exports=r},62686:e=>{"use strict";e.exports=n},67386:e=>{"use strict";e.exports=a},79244:e=>{"use strict";e.exports=s},86604:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"><path fill="#000" fill-rule="evenodd" d="M4 17.062.5 11l15.589-9 3.5 6.062zm-2.134-5.696 13.856-8 2.5 4.33-1.299.75-1-1.732-.866.5 1 1.732-1.732 1-1-1.732-.866.5 1 1.732-1.732 1-1.5-2.598-.866.5 1.5 2.598-1.732 1-1-1.732-.866.5 1 1.732-1.732 1-1-1.732-.866.5 1 1.732-1.299.75z" clip-rule="evenodd"></path></svg>'}},t={};function l(a){var s=t[a];if(void 0!==s)return s.exports;var n=t[a]={exports:{}};return e[a](n,n.exports,l),n.exports}l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var a in t)l.o(t,a)&&!l.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.p="";var o={};return l.p=window.jimuConfig.baseUrl,(()=>{"use strict";l.r(o),l.d(o,{__set_webpack_public_path__:()=>k,default:()=>R});var e,t=l(67386),a=l(79244),s=l(62686),n=l(14321);!function(e){e.Classic="CLASSIC",e.Toolbar="TOOLBAR"}(e||(e={}));const r=[{key:"unitsLabelMetric",value:"metric"},{key:"unitsLabelImperial",value:"imperial"}];var i=l(9044),c=l.n(i),u=function(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(a[s[n]]=e[s[n]])}return a};const d=e=>{const s=window.SVG,{className:n}=e,r=u(e,["className"]),i=(0,a.classNames)("jimu-icon jimu-icon-component",n);return s?(0,t.jsx)(s,Object.assign({className:i,src:c()},r)):(0,t.jsx)("svg",Object.assign({className:i},r))},m=[...r,{key:"unitsInches",value:"inches"},{key:"unitsLabelFeet",value:"feet"},{key:"unitsLabelYards",value:"yards"},{key:"unitsLabelMiles",value:"miles"},{key:"unitsLabelNauticalMiles",value:"nautical-miles"},{key:"unitsLabelFeetUS",value:"us-feet"},{key:"unitsLabelMeters",value:"meters"},{key:"unitsLabelKilometers",value:"kilometers"}],p=[...r,{key:"unitsLabelSquareInches",value:"square-inches"},{key:"unitsLabelSquareFeet",value:"square-feet"},{key:"unitsLabelSquareYards",value:"square-yards"},{key:"unitsLabelSquareMiles",value:"square-miles"},{key:"unitsLabelSquareNauticalMiles",value:"square-nautical-miles"},{key:"unitsLabelSquareFeetUS",value:"square-us-feet"},{key:"unitsLabelSquareMeters",value:"square-meters"},{key:"unitsLabelSquareKilometers",value:"square-kilometers"},{key:"unitsLabelAcres",value:"acres"},{key:"unitsLabelAres",value:"ares"},{key:"unitsLabelHectares",value:"hectares"}],v=a.css`
&.measure-toolbar {
  height: 40px;
  .measure-tools {
    height: 24px;
    .measure-tool {
      &.active {
        color: var(--sys-color-action-selected-text);
        background-color: var(--sys-color-action-selected);
      }
    }
  }
  .measure-unit-clear {
    height: 24px;
    flex-grow: 1;
    border-left: 1px solid var(--sys-color-divider-secondary);
    .measure-unit {
      flex-grow: 1;
    }
  }
}
`,g=a.React.forwardRef((s,r)=>{const{config:i,context:l,activeButton:o,translate:c,onSelectTool:u,onChangeUnit:g,onClear:f}=s,{enableDistance:b=!0,defaultDistanceUnit:h="metric",enableArea:y=!0,defaultAreaUnit:x="metric",arrangement:w=e.Classic}=i,[M,S]=a.React.useState(h),[j,R]=a.React.useState(x);a.React.useEffect(()=>{"measureDistance"===o&&S(h),"measureArea"===o&&R(x)},[o,x,h]);const k=a.React.useCallback(e=>{S(e.target.value),g(e.target.value)},[g]),A=a.React.useCallback(e=>{R(e.target.value),g(e.target.value)},[g]),C=w===e.Toolbar,L=[{name:"measureDistance",icon:`${l.folderUrl}dist/runtime/assets/measure-distance.svg`,enabled:b},{name:"measureArea",icon:`${l.folderUrl}dist/runtime/assets/measure-area.svg`,enabled:y}];return(0,t.jsxs)("div",{ref:r,className:"measure-toolbar d-flex justify-content-between p-2",css:v,children:[(0,t.jsx)("div",{className:"measure-tools d-flex",role:"group",children:L.filter(e=>e.enabled).map(e=>(0,t.jsx)(n.Button,{icon:!0,type:"tertiary",title:c(e.name),className:(0,a.classNames)("measure-tool p-0 mr-1",{active:o===e.name}),onClick:()=>{u(e)},"aria-label":c(e.name),"aria-pressed":o===e.name,"aria-describedby":"selectToStart",children:(0,t.jsx)(n.Icon,{className:"m-0",icon:e.icon})},e.name))}),C&&(0,t.jsxs)("div",{className:"measure-unit-clear d-flex align-items-center",children:["measureDistance"===o&&b&&(0,t.jsx)(n.Select,{size:"sm",value:M,className:"measure-unit ml-1",onChange:k,"aria-label":c("defaultUnit"),children:m.map(e=>(0,t.jsx)("option",{value:e.value,children:c(e.key)},e.key))}),"measureArea"===o&&y&&(0,t.jsx)(n.Select,{size:"sm",value:j,className:"measure-unit ml-1",onChange:A,"aria-label":c("defaultUnit"),children:p.map(e=>(0,t.jsx)("option",{value:e.value,children:c(e.key)},e.key))}),""===o&&(0,t.jsx)(n.Select,{size:"sm",value:"measureUnit",disabled:!0,className:"measure-unit ml-1",children:(0,t.jsx)("option",{value:"measureUnit",children:c("measureUnit")})}),(0,t.jsx)(n.Button,{icon:!0,type:"tertiary",className:"p-0 ml-1",disabled:""===o,onClick:f,"aria-label":c("clearMeasurement"),children:(0,t.jsx)(d,{className:"m-0"})})]})]})});var f=l(1888);const b=e=>a.css`
&.measure-panel {
  border-top: 1px solid var(--sys-color-divider-secondary);
  overflow: auto;
  .measure-clear {
    padding: 0 15px 12px 15px;
    button {
      width: 100%;
      height: 32px;
    }
  }
  .esri-widget {
    background-color: transparent !important;
  }
  ${["disabled","ready"].includes(e)?a.css`
    height: calc(100% - 42px);
    .esri-widget--panel {
      height: 100%;
      .esri-measurement-widget-content {
        height: 100%;
        .esri-measurement-widget-content__hint {
          height: 100%;
          display: grid;
          place-items: center;
          text-align: center;
        }
      }
    }`:""}
}
`,h={rootBoundary:"viewport",padding:0},y={fallbackPlacements:["top-start"]};function x(s){const{id:r,config:i,activeButton:l,jimuMapView:o,activeTool:c,setActiveTool:u,rootRef:d,translate:m,onClear:p}=s,{defaultDistanceUnit:v="metric",defaultAreaUnit:g="metric",disableSnapping:x=!1,arrangement:w=e.Classic}=i,[M,S]=a.React.useState(!1),[j,R]=a.React.useState(null);a.React.useEffect(()=>{S(!0),(0,a.loadArcGISJSAPIModules)(["esri/widgets/DistanceMeasurement2D","esri/widgets/AreaMeasurement2D","esri/widgets/DirectLineMeasurement3D","esri/widgets/AreaMeasurement3D","esri/core/reactiveUtils"]).then(e=>{const[t,a,s,n,r]=e;R({DistanceMeasurement2D:t,AreaMeasurement2D:a,DirectLineMeasurement3D:s,AreaMeasurement3D:n,reactiveUtils:r}),S(!1)})},[]);const k=a.React.useRef(null),A=a.React.useRef(null),C=a.React.useRef({}),L=a.React.useRef(null);a.React.useEffect(()=>{Object.values(C.current).forEach(e=>{e.measureDistance&&(e.measureDistance.viewModel.unit=v),e.measureArea&&(e.measureArea.viewModel.unit=g)})},[v,g]);const N=w===e.Toolbar,D=N?A:k,[I,O]=a.React.useState("disabled"),T=a.hooks.useLatest(o);a.React.useEffect(()=>{var e,t,a,s;const n=T.current;if(!(null==n?void 0:n.view)||!D.current||!j)return;const i=c;"object"==typeof(null==i?void 0:i.container)&&null!==(null==i?void 0:i.container)&&(i.container.style.visibility="hidden",i.container.style.height="0",i.container.style.overflow="hidden");const o=null===(e=null==i?void 0:i.viewModel)||void 0===e?void 0:e.state;let m,p;["ready","measuring"].includes(o)&&i.viewModel.clear(),L.current&&(null===(a=null===(t=L.current)||void 0===t?void 0:t.remove)||void 0===a||a.call(t),L.current=null);const{DistanceMeasurement2D:f,AreaMeasurement2D:b,DirectLineMeasurement3D:h,AreaMeasurement3D:y,reactiveUtils:w}=j,M=C.current[n.id]||(C.current[n.id]={});if("measureDistance"===l)m="2d"===n.view.type?f:h,p=v;else{if("measureArea"!==l)return void O("disabled");m="2d"===n.view.type?b:y,p=g}M[l]||m&&p&&(M[l]=new m({id:`${r}-${n.id}-${l}`,container:document.createElement("div"),view:n.view,unit:p,visible:!0}));const S=M[l];u(S),"object"==typeof(null==S?void 0:S.container)&&null!==(null==S?void 0:S.container)&&(S.container.style.visibility="visible",S.container.style.height="",S.container.style.overflow="");const R=null===(s=null==S?void 0:S.viewModel)||void 0===s?void 0:s.state;O(R||"disabled"),"measured"!==R&&S&&S.viewModel.start(),S&&(D.current.prepend(S.container),L.current=w.watch(()=>{var e;return null===(e=null==S?void 0:S.viewModel)||void 0===e?void 0:e.state},e=>{if(O(e||"disabled"),"ready"===e&&"2d"===n.view.type&&"snappingOptions"in S){if(x)return void(S.snappingOptions={enabled:!1});const e={enabled:!0,selfEnabled:!0,gridEnabled:!0,featureEnabled:!0,featureSources:n.getSnappingLayers().map(e=>({enabled:!0,layer:e}))};S.snappingOptions=e}},{initial:!0})),d.current&&A.current&&(A.current.style.width=d.current.offsetWidth+"px")},[r,l,T,D,c,u,d,v,g,j,x]);const P=a.React.useMemo(()=>{var e;return null===(e=null==o?void 0:o.isClickHighlightEnabled)||void 0===e?void 0:e.call(o)},[o]);a.React.useEffect(()=>{P&&(["ready","measuring"].includes(I)?o.disableClickHighlight():o.enableClickHighlight())},[o,I,P]);const U=a.ReactRedux.useSelector(e=>e.appRuntimeInfo.appMode===a.AppMode.Design),_=a.ReactRedux.useSelector(e=>e.appRuntimeInfo.currentPageId),E=_!==a.React.useRef(_).current,q=a.React.useCallback(()=>{Object.values(C.current).forEach(e=>{var t,a,s,n;null===(a=null===(t=e.measureDistance)||void 0===t?void 0:t.destroy)||void 0===a||a.call(t),e.measureDistance=null,null===(n=null===(s=e.measureArea)||void 0===s?void 0:s.destroy)||void 0===n||n.call(s),e.measureArea=null})},[]),B=a.ReactRedux.useSelector(e=>e.appContext.isInBuilder);a.hooks.useUpdateEffect(()=>{B&&(q(),O("disabled"))},[o,w,B]),a.React.useEffect(()=>()=>{q(),u(null)},[q,u]);const W=a.React.useCallback(()=>{if(d.current){const e=d.current.querySelector(".measure-tool.active");e&&(0,a.focusElementInKeyboardMode)(e)}null==p||p()},[p,d]);return(0,t.jsxs)(a.React.Fragment,{children:[M&&(0,t.jsx)(n.Loading,{type:n.LoadingType.Secondary}),!M&&!N&&(0,t.jsxs)("div",{ref:k,className:"measure-panel",css:b(I),children:[""===l&&(0,t.jsx)("div",{"aria-label":m("selectToStart"),className:"esri-widget esri-widget--panel",role:"presentation",children:(0,t.jsx)("div",{className:"esri-measurement-widget-content",children:(0,t.jsx)("section",{className:"esri-measurement-widget-content__hint",children:(0,t.jsx)(n.Typography,{component:"p",variant:"label1",id:"selectToStart",className:"esri-measurement-widget-content__hint-text",children:m("selectToStart")})})})}),""!==l&&["measuring","measured"].includes(I)&&(0,t.jsx)("div",{className:"measure-clear",children:(0,t.jsx)(n.Button,{type:"secondary",onClick:W,"aria-label":m("clearMeasurement"),children:m("clearMeasurement")})})]}),!M&&N&&!U&&(0,t.jsxs)(n.Popper,{className:(0,a.classNames)("bg-paper border-0",{"d-none":E}),overflowHidden:!0,reference:d.current,placement:"bottom-start",open:""!==l,keepMount:!0,shiftOptions:h,flipOptions:y,offsetOptions:5,children:[(0,t.jsx)("div",{ref:A,className:"measure-popper"}),(0,t.jsx)(f.Global,{styles:a.css`
        .measure-popper {
          .esri-measurement-widget-content__settings {
            display: ${N?"none":"block"};
          }
        }
      `})]})]})}const w={_widgetLabel:"Measurement",selectToStart:"Select a tool to start measure.",measureDistance:"Measure distance",measureArea:"Measure area",clearMeasurement:"Clear measurement",measureUnit:"Measure unit"};var M=l(86604),S=l.n(M);const j=a.css`
  min-width: 270px;
  min-height: 40px;
  overflow: auto;
`;const R=function(r){const{id:i,useMapWidgetIds:l,context:o,config:c}=r,{enableDistance:u=!0,enableArea:d=!0,arrangement:m=e.Classic}=c,p=null==l?void 0:l[0],[v,f]=a.React.useState(null),[b,h]=a.React.useState(!0),y=a.React.useCallback(()=>{h(!1)},[]),[M,R]=a.React.useState(""),k=a.ReactRedux.useSelector(e=>e.appRuntimeInfo.appMode===a.AppMode.Design),A=a.ReactRedux.useSelector(e=>e.widgetsRuntimeInfo[i].state===a.WidgetState.Closed);a.React.useEffect(()=>{R("")},[k,u,d,m,A,l,v]);const C=a.ReactRedux.useSelector(e=>{var t;return(null===(t=e.mapWidgetsInfo[p])||void 0===t?void 0:t.autoControlWidgetId)===i});a.React.useEffect(()=>{C||R("")},[C]);const L=a.React.useRef(null),[N,D]=a.React.useState(null),I=a.React.useCallback(e=>{N&&(N.unit=e)},[N]),O=a.React.useCallback(()=>{N&&N.viewModel.clear()},[N]),T=p&&(u||d),P=a.hooks.useTranslation(n.defaultMessages,w);return(0,t.jsxs)(n.Paper,{shape:"none",className:"jimu-widget widget-measurement",css:j,children:[!T&&(0,t.jsx)("div",{className:"w-100 h-100",children:(0,t.jsx)(n.WidgetPlaceholder,{className:"w-100 placeholder-wrapper",icon:S(),name:P("_widgetLabel")})}),T&&(0,t.jsxs)(a.React.Fragment,{children:[(0,t.jsxs)("div",{className:(0,a.classNames)("h-100",{"d-none":b}),children:[(0,t.jsx)(g,{ref:L,config:c,context:o,activeButton:M,activeTool:N,translate:P,onSelectTool:e=>{if(e.name===M){R("");const e=a.appActions.releaseAutoControlMapWidget(p);(0,a.getAppStore)().dispatch(e)}else{R(e.name);const t=a.appActions.requestAutoControlMapWidget(p,i);(0,a.getAppStore)().dispatch(t)}},onChangeUnit:I,onClear:O}),(0,t.jsx)(x,{id:i,config:c,jimuMapView:v,activeButton:M,activeTool:N,setActiveTool:D,rootRef:L,translate:P,onClear:O})]}),(0,t.jsx)(s.JimuMapViewComponent,{useMapWidgetId:p,onViewsCreate:y,onActiveViewChange:f}),p&&b&&(0,t.jsx)(n.Loading,{type:n.LoadingType.Secondary})]})]})};function k(e){l.p=e}})(),o})())}}});