System.register(["jimu-core/emotion","jimu-core","jimu-arcgis","jimu-ui","jimu-ui/advanced/map"],function(e,n){var o={},i={},a={},t={},l={};return{setters:[function(e){o.jsx=e.jsx,o.jsxs=e.jsxs},function(e){i.BaseVersionManager=e.BaseVersionManager,i.React=e.React,i.classNames=e.classNames,i.css=e.css,i.useIntl=e.useIntl},function(e){a.JimuMapViewComponent=e.JimuMapViewComponent,a.SnappingUtils=e.SnappingUtils},function(e){t.WidgetPlaceholder=e.WidgetPlaceholder},function(e){l.JimuDraw=e.JimuDraw,l.SnappingMode=e.SnappingMode}],execute:function(){e((()=>{var e={7074:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"><path fill="#000" fill-rule="evenodd" d="M4.921 15.425a1 1 0 0 0 .1-.371c.009-.296.061-.59.157-.87a7.7 7.7 0 0 1-2.55-1.595A4.2 4.2 0 0 1 1.25 9.562C1.261 6.5 5.055 3.95 9.888 3.752l.26-.002a2.3 2.3 0 0 1 1.713.561 2.53 2.53 0 0 1 .414 1.981L12.19 7.48l1.254.15c.477-.328 1.007-.694 1.55-1.07q-.475-.062-.95-.117l-.521-.06a3.65 3.65 0 0 0-.755-2.933 3.5 3.5 0 0 0-2.647-.95l-.284.006C4.245 2.732.014 5.766 0 9.556a5.43 5.43 0 0 0 1.75 3.923 9.1 9.1 0 0 0 3.171 1.945M8.75 5a1.25 1.25 0 1 0 0 2.5 1.25 1.25 0 0 0 0-2.5m0 1.75a.5.5 0 1 1 0-1 .5.5 0 0 1 0 1M5 11.25a1.25 1.25 0 1 1 2.5 0 1.25 1.25 0 0 1-2.5 0m1.25.5a.5.5 0 1 1 0-1 .5.5 0 0 1 0 1m13.209.286a3.37 3.37 0 0 0 .137-3.426 2.5 2.5 0 0 0-.32-.448q-.432.414-.907.877.067.072.122.156a2.13 2.13 0 0 1-.104 2.199c-.998 1.655-3.606 2.837-6.193 3.337l-1.084.966a3 3 0 0 1-.071.465c3.249-.338 7.004-1.778 8.42-4.126M6.25 7.5a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0M5 7a.5.5 0 1 1 0 1 .5.5 0 0 1 0-1m3.209 6.534 1.656 1.945s.121 1.496-1.935 2.41a4.08 4.08 0 0 1-3.689-.137s1.993-1.03 2.03-2.67c.038-1.66 1.938-1.548 1.938-1.548m-1.24 3.373c.342-.538.533-1.16.552-1.797a.255.255 0 0 1 .168-.258l.841.988c-.254.42-.645.74-1.107.905q-.222.098-.454.162m8.302-6.595S19.396 6.265 20 5.775l-.314-.389L19.369 5c-.604.485-5.363 3.757-5.363 3.757l-4.581 4.088 1.284 1.535z" clip-rule="evenodd"></path></svg>'},14321:e=>{"use strict";e.exports=t},48993:e=>{"use strict";e.exports=l},62686:e=>{"use strict";e.exports=a},67386:e=>{"use strict";e.exports=o},79244:e=>{"use strict";e.exports=i}},n={};function d(o){var i=n[o];if(void 0!==i)return i.exports;var a=n[o]={exports:{}};return e[o](a,a.exports,d),a.exports}d.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return d.d(n,{a:n}),n},d.d=(e,n)=>{for(var o in n)d.o(n,o)&&!d.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},d.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),d.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.p="";var r={};return d.p=window.jimuConfig.baseUrl,(()=>{"use strict";d.r(r),d.d(r,{__set_webpack_public_path__:()=>h,default:()=>b});var e,n,o,i,a=d(67386),t=d(79244),l=d(62686),s=d(14321);!function(e){e.Panel="Panel",e.Toolbar="Toolbar"}(e||(e={})),function(e){e.Continuous="continuous",e.Update="update"}(n||(n={})),function(e){e.Point="point",e.Polyline="polyline",e.Polygon="polygon",e.Rectangle="rectangle",e.Circle="circle",e.Text="text",e.FreehandPolyline="freehandPolyline",e.FreehandPolygon="freehandPolygon"}(o||(o={})),function(e){e.Show="show",e.Hide="hide"}(i||(i={}));var c=d(48993);class u extends t.BaseVersionManager{constructor(){super(...arguments),this.versions=[{version:"1.12.0",description:"support decimal places in measurements #13051",upgrader:e=>e=e.setIn(["measurementsInfo"],{decimalPlaces:{point:5,line:3,area:3}})},{version:"1.16.0",description:"support text #14881",upgrader:e=>e=e.setIn(["layerListMode"],i.Hide)}]}}const p=new u,g="Draw";var f=d(7074),v=d.n(f),w=function(e,n,o,i){return new(o||(o=Promise))(function(a,t){function l(e){try{r(i.next(e))}catch(e){t(e)}}function d(e){try{r(i.throw(e))}catch(e){t(e)}}function r(e){var n;e.done?a(e.value):(n=e.value,n instanceof o?n:new o(function(e){e(n)})).then(l,d)}r((i=i.apply(e,n||[])).next())})};function m(n){var i,d,r,u,p,f,m,b,h,y,O,E,M,x,T;const[P,S]=t.React.useState(null),j={};j.createTools={point:n.config.drawingTools.includes(o.Point),polyline:n.config.drawingTools.includes(o.Polyline),polygon:n.config.drawingTools.includes(o.Polygon),rectangle:n.config.drawingTools.includes(o.Rectangle),circle:n.config.drawingTools.includes(o.Circle),customText:n.config.drawingTools.includes(o.Text),freehandPolyline:n.config.drawingTools.includes(o.FreehandPolyline),freehandPolygon:n.config.drawingTools.includes(o.FreehandPolygon)};const I=!!(null===(i=n.config.drawOptions)||void 0===i?void 0:i.defaultGeometryGuidesEnabled)||!!(null===(d=n.config.drawOptions)||void 0===d?void 0:d.defaultFeatureToFeatureEnabled)||!!(null===(r=n.config.drawOptions)||void 0===r?void 0:r.defaultGridEnabled);(e=>{var o,i,a,t,l,d,r,s,u;let p=!1,g=null===(o=n.config.drawOptions)||void 0===o?void 0:o.segmentLabelEnabled;"2d"===(null===(i=null==P?void 0:P.view)||void 0===i?void 0:i.type)&&(g=!1),n.config.drawOptions&&(null===(a=n.config.drawOptions)||void 0===a?void 0:a.snappingMode)!==c.SnappingMode.Prescriptive?(null===(l=n.config.drawOptions)||void 0===l?void 0:l.snappingMode)===c.SnappingMode.Flexible&&(p=(null===(d=n.config.drawOptions)||void 0===d?void 0:d.tooltipEnabled)||g||(null===(r=n.config.drawOptions)||void 0===r?void 0:r.geometryGuidesEnabled)||(null===(s=n.config.drawOptions)||void 0===s?void 0:s.featureToFeatureEnabled)||(null===(u=n.config.drawOptions)||void 0===u?void 0:u.gridEnabled)):p=(null===(t=n.config.drawOptions)||void 0===t?void 0:t.tooltipEnabled)||g,e.settingsMenu=p})(j),j.tooltipsToggle=null===(u=n.config.drawOptions)||void 0===u?void 0:u.tooltipEnabled,j.labelsToggle=null===(p=n.config.drawOptions)||void 0===p?void 0:p.segmentLabelEnabled,(e=>{var o,i,a,t,l,d,r;const s=(null===(o=n.config.drawOptions)||void 0===o?void 0:o.snappingMode)===c.SnappingMode.Prescriptive,u=!s&&(null===(i=n.config.drawOptions)||void 0===i?void 0:i.geometryGuidesEnabled),p=!s&&(null===(a=n.config.drawOptions)||void 0===a?void 0:a.featureToFeatureEnabled),g=!s&&(null===(t=n.config.drawOptions)||void 0===t?void 0:t.gridEnabled),f=!s&&((null===(l=n.config.drawOptions)||void 0===l?void 0:l.geometryGuidesEnabled)||(null===(d=n.config.drawOptions)||void 0===d?void 0:d.featureToFeatureEnabled)||(null===(r=n.config.drawOptions)||void 0===r?void 0:r.gridEnabled)),v=f;e.snappingControlsElements={enabledToggle:f,selfEnabledToggle:u,featureEnabledToggle:p,gridEnabledToggle:g,gridControls:g,layerList:v}})(j);const[C,L]=t.React.useState(null);t.React.useEffect(()=>{(()=>{w(this,void 0,void 0,function*(){var e;const o=yield l.SnappingUtils.getSnappingFeatureSourcesCollection(P,null===(e=n.config.drawOptions)||void 0===e?void 0:e.defaultSnappingLayers);L(o)})})()},[P,null===(f=n.config.drawOptions)||void 0===f?void 0:f.defaultSnappingLayers]);const[F,W]=t.React.useState(!1);t.React.useEffect(()=>{var e,o,i;const a=(null===(e=n.config.drawOptions)||void 0===e?void 0:e.snappingMode)!==c.SnappingMode.Prescriptive&&((null===(o=n.config.drawOptions)||void 0===o?void 0:o.gridEnabled)&&(null===(i=n.config.drawOptions)||void 0===i?void 0:i.defaultGridEnabled));W(a)},[n.config.drawOptions]);const[_,G]=t.React.useState(!1);t.React.useEffect(()=>{let o=n.autoWidth;n.controllerWidgetId&&(o=n.config.arrangement===e.Toolbar),G(o)},[n.controllerWidgetId,n.autoWidth,n.config.arrangement]);const R=!P,D=(0,t.useIntl)().formatMessage({id:"_widgetLabel",defaultMessage:g});return(0,a.jsxs)("div",{className:"draw-widget-container h-100",css:t.css`
    .placeholder-wrapper { /* larger placeholder size ,#11524 */
      display: flex;
      align-items: center;
      min-width: 468px;
      min-height: 444px;
    }

    .placeholder-wrapper.in-controller { /* smaller placeholder size ,#22767 */
      min-width: 270px;
      min-height: 44px;
    }
  `,children:[R&&(0,a.jsx)("div",{className:"w-100 h-100",children:(0,a.jsx)(s.WidgetPlaceholder,{className:(0,t.classNames)("w-100 placeholder-wrapper",{"in-controller":!!n.controllerWidgetId}),icon:v(),widgetId:n.id,name:D})}),!R&&(0,a.jsx)(c.JimuDraw,{jimuMapView:P,operatorWidgetId:n.id,isDisplayCanvasLayer:n.config.isDisplayCanvasLayer,drawingOptions:{creationMode:n.config.drawMode,visibleElements:j,layerListMode:n.config.layerListMode,updateOnGraphicClick:!0,drawingElevationMode3D:n.config.drawingElevationMode3D,snappingOptions:{enabled:I,selfEnabled:(null===(m=n.config.drawOptions)||void 0===m?void 0:m.geometryGuidesEnabled)&&(null===(b=n.config.drawOptions)||void 0===b?void 0:b.defaultGeometryGuidesEnabled),featureEnabled:(null===(h=n.config.drawOptions)||void 0===h?void 0:h.featureToFeatureEnabled)&&(null===(y=n.config.drawOptions)||void 0===y?void 0:y.defaultFeatureToFeatureEnabled),gridEnabled:F,featureSources:C},tooltipOptions:{enabled:(null===(O=n.config.drawOptions)||void 0===O?void 0:O.tooltipEnabled)&&(null===(E=n.config.drawOptions)||void 0===E?void 0:E.defaultTooltipEnabled)},labelOptions:{enabled:(null===(M=n.config.drawOptions)||void 0===M?void 0:M.segmentLabelEnabled)&&(null===(x=n.config.drawOptions)||void 0===x?void 0:x.defaultSegmentLabelEnabled)}},uiOptions:{arrangement:n.config.arrangement,isAutoWidth:_,isAutoHeight:n.autoHeight,isShape:!1},measurementsInfo:n.config.measurementsInfo.asMutable(),measurementsUnitsInfos:n.config.measurementsUnitsInfos.asMutable()}),(0,a.jsx)(l.JimuMapViewComponent,{useMapWidgetId:null===(T=n.useMapWidgetIds)||void 0===T?void 0:T[0],onActiveViewChange:e=>{S(e)}})]})}m.versionManager=p;const b=m;function h(e){d.p=e}})(),r})())}}});