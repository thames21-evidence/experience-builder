/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-fb3591.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-fb3591"],{23208:(e,l,a)=>{a.d(l,{a:()=>o,b:()=>f,c:()=>c,d:()=>I,g:()=>y,r:()=>n,s:()=>g,u:()=>t});const r={facilityLayer:{facilityIdField:"FACILITY_ID",siteIdField:"SITE_ID",nameField:"NAME"},levelLayer:{levelIdField:"LEVEL_ID",facilityIdField:"FACILITY_ID",longNameField:"NAME",shortNameField:"NAME_SHORT",levelNumberField:"LEVEL_NUMBER",verticalOrderField:"VERTICAL_ORDER"},siteLayer:{siteIdField:"SITE_ID",nameField:"NAME"}};let s;const i=e=>{const l=e?.map;return s=s||l?.floorInfo||{...r},s.siteLayer=s?.siteLayer?.layerId?s.siteLayer:null,s},o=e=>{const l=e?.map,a=i(e);l&&d(a)?l.set("floorInfo",a):n(e)},t=(e,l)=>{const a=i(l),{name:s}=e,t=e.layer;if(t&&"floorInfo"in t&&"levelLayer"===s){const e={floorField:r.levelLayer.levelIdField};t.floorInfo=e}if(t){const e="sublayer"===t.type;a[s]={...r[s]},a[s]&&(a[s].layerId=e?t.layer?.id:t.id,a[s].sublayerId=e?t.id:void 0)}else a[s]=void 0;o(l)},n=e=>{const l=e?.map;l&&(l.floorInfo=null)},d=e=>!(!e?.facilityLayer?.layerId||!e?.levelLayer?.layerId||e?.siteLayer&&!e?.siteLayer.layerId),c=e=>{const l=r[e];return Object.values(l)},y=e=>{const{map:l}=e,a=l?.allLayers;let r=[];return a?.forEach(e=>{const{type:l,floorInfo:a}=e;"map-image"===l?r=r.concat(e.allSublayers.filter(e=>e.fieldsIndex&&!e?.floorInfo).toArray()):!a&&["feature","oriented-imagery"].includes(l)&&r.push(e)}),r},f=async e=>{const{map:l}=e,a=l?.allLayers?.map(async e=>await m(e)).filter(e=>"failed"!==e?.loadStatus),r=a?await Promise.all(a):[];let s=[];return r.forEach(e=>{const{type:l,geometryType:a}=e;"map-image"===l?s=s.concat(e.allSublayers.filter(e=>e.fieldsIndex&&"esriGeometryPolygon"===e.sourceJSON?.geometryType).toArray()):"feature"===l&&"polygon"===a&&s.push(e)}),s},m=async e=>(typeof e.loadAll<"u"?await e.loadAll():await e.load(),e),I=(e,l)=>{const a=l.map?.allLayers,r=i(l),s=r?.[e]?.layerId,o=r?.[e]?.sublayerId;let t=s?a?.find(e=>e.id===s):null;return"map-image"===t?.type&&(t=t.allSublayers.find(e=>e.id===o)),t},g=e=>{const{layer:l}=e;let a;if(a="arcgis-field-list"===e?.localName||"arcgis-map-config-floor-field-list"===e?.localName?Object.values(e.selection)[0]:e?.field,a){const e=l.floorInfo||{};e.floorField=a.name,l.set("floorInfo",e)}}},94163:(e,l,a)=>{a.r(l),a.d(l,{ArcgisMapConfigFloorAddLayers:()=>t});var r=a(73679),s=a(4395),i=a(23208),o=a(73801);class t extends o.WF{constructor(){super(...arguments),this.arcgisAddLayersListChange=(0,o.lh)()}static{this.properties={_messages:0,view:0}}render(){return s.qy`<arcgis-map-config-floor-layer-list .layers=${(0,i.g)(this.view)} multiple ._messages=${this._messages} @arcgisLayerListChange=${e=>{this.arcgisAddLayersListChange.emit(e.detail)}}></arcgis-map-config-floor-layer-list>`}}(0,r.c)("arcgis-map-config-floor-add-layers",t)}}]);