/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-8dcdbb.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-8dcdbb"],{931:(e,t,n)=>{n.d(t,{l:()=>l});var i=n(93814);const l=async(e,t)=>(await i.e.exports.loadModules(e,t)).map(e=>e.__esModule&&e.default?e.default:e)},4429:(e,t,n)=>{n.d(t,{a:()=>a,b:()=>d,c:()=>s,d:()=>c,e:()=>l,f:()=>i,g:()=>h,i:()=>v,m:()=>o,t:()=>r,u:()=>u});const i=(e,t)=>{let n,i="idle";const l=(...l)=>new Promise(s=>{switch(i){case"flushed":i="idle",n?(clearTimeout(n),s(e(...l))):s(null);break;case"invoked":clearTimeout(n),i="idle",s(e(...l));break;case"cancelled":clearTimeout(n),i="idle",s(null);break;default:n&&clearTimeout(n),i="pending",n=setTimeout(()=>(i="idle",s(e(...l))),t)}});return l.flush=function(...e){return i="flushed",l(...e)},l.invoke=function(...e){return i="invoked",l(...e)},l.cancel=function(...e){return i="cancelled",l(...e)},l.getStatus=function(){return i},l};function l(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function s(e){return null!=e}async function o(e,t){return await Promise.all([e,r(t)]),e}function r(e){return new Promise(t=>setTimeout(t,e))}const a=(e,t)=>Object.fromEntries((e||[]).map(e=>{const{key:n,data:i}=t(e);return[n,i]})),c=(e,t)=>e.length===t.length&&e.reduce((e,n)=>e&&t.indexOf(n)>-1,!0);function u(e,t){const n=[],i={};return e.forEach(e=>{const l=t(e);null==i[l]&&(i[l]=e,n.push(e))}),n}function d(e){const t={boolean:{},number:{},string:{}},n=[];return e.filter(e=>{let i=typeof e;return i in t?!t[i].hasOwnProperty(e)&&(t[i][e]=!0):!(n.indexOf(e)>=0)&&n.push(e)})}const h=(e,t)=>[...Array(Math.ceil(e.length/t))].map((n,i)=>e.slice(t*i,t+t*i)),v=(e,t)=>e.includes(t)},12192:(e,t,n)=>{n.d(t,{a:()=>o,g:()=>c});var i=n(15332),l=n(94984),s=n(87849);function o(e){var t,n,s;const o=null!==(t=(0,i.c)(e,"[lang]"))&&void 0!==t?t:null===(s=null===(n=e.shadowRoot)||void 0===n?void 0:n.ownerDocument)||void 0===s?void 0:s.documentElement,r=((null==o?void 0:o.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return l.l.has(r)?l.l.get(r):l.l.has(r.slice(0,2))?l.l.get(r.slice(0,2)):"en"}const r={};function a(e,t){const n=`${e}${t}`;return r[n]||(r[n]=function(e,t){return new Promise((n,i)=>{fetch((0,s.d)(`../arcgis-app-assets/i18n/${e}.i18n.${t}.json`)).then(e=>{e.ok?n(e.json()):i()},()=>i())})}(e,t)),r[n]}async function c(e,t){const n=t||e.tagName.toLowerCase(),s=o(e),r=function(e){var t,n,s;const o=null!==(t=(0,i.c)(e,"[lang]"))&&void 0!==t?t:null===(s=null===(n=e.shadowRoot)||void 0===n?void 0:n.ownerDocument)||void 0===s?void 0:s.documentElement,r=((null==o?void 0:o.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return l.l.has(r)?l.l.get(r):l.l.has(r.slice(0,2))?r:"en"}(e);let c;try{c=await a(n,s)}catch(e){console.warn(`no locale for ${n} (${s}) loading default locale en.`),c=await a(n,"en")}return[c,s,r]}},27072:(e,t,n)=>{n.r(t),n.d(t,{arcgis_delete_folder:()=>h});var i=n(87849),l=n(59317),s=n(94984),o=n(12192),r=n(96295),a=n(41473),c=n(83692);n(37762),n(15332),n(931),n(93814),n(54251);const u=async(e,t)=>(0,c.r)(`${e.userContentUrl}/${t.id}`);async function d(e,t,n,i){try{const l=`${(0,a.g)(e)}search`;return{result:(await(0,c.r)(l,{q:`owner:${t.username} ownerfolder:${n.id} ${i||""}`,num:1})).total}}catch(e){return{result:0}}}const h=class{constructor(e){(0,i.r)(this,e),this.arcgisDeleteFolderClose=(0,i.c)(this,"arcgisDeleteFolderClose",7),this.arcgisDeleteFolderSuccess=(0,i.c)(this,"arcgisDeleteFolderSuccess",7),this.arcgisDeleteFolderFail=(0,i.c)(this,"arcgisDeleteFolderFail",7),this.updateItems=async()=>{var e;const t=await u(null!==(e=this.user)&&void 0!==e?e:l.c.user,this.folder);this.items=t.items},this.renderMessage=()=>{var e;const{i18n:t,folder:n,mode:l,folderTotal:o,portal:r,lang:a,items:c}=this,{text:u,description:d}=(null===(e=null==r?void 0:r.sourceJSON)||void 0===e?void 0:e.recycleBinEnabled)?(()=>{let e="",i="";switch(l){case"UNPROTECTED":e=t.message.recycleAll.replace("${title}",n.title);break;case"UNRECYCLABLE":case"UNRECYCLABLE_UNPROTECTED":e=t.message.canBeEmptied.replace("${title}",n.title);break;case"PROTECTED_UNRECYCLABLE":case"PROTECTED_UNPROTECTED":case"PROTECTED_UNRECYCLABLE_UNPROTECTED":e=t.message.mustBeEmpty.replace("${title}",n.title),i=t.message.aFewCannotBeDeleted;break;case"PROTECTED":e=t.message.cannotBeDeleted.replace("${title}",n.title)}return{text:e,description:i}})():(()=>{let e="";if("PROTECTED"===l)e=t.message.cannotBeDeleted.replace("${title}",n.title);else e=(0,s.a)(a,t.disabledMessage,o||(null==c?void 0:c.length)||0,{label:n.title});return{text:e,description:null}})();return(0,i.h)(i.F,null,u&&(0,i.h)("p",{innerHTML:u}),d&&(0,i.h)("p",null,d))},this.handlePostDeleteItems=async()=>{var e;0===(await u(null!==(e=this.user)&&void 0!==e?e:l.c.user,this.folder)).total?await this.handleDeleteFolder():this.arcgisDeleteFolderFail.emit(this.i18n.deleteProtectedItemsInFolder)},this.handleDeleteFolder=async()=>{var e;(await(async(e,t,n)=>{const i=`${(null!=n?n:t.user).userContentUrl}/${e.id}/delete`;return await(0,c.r)(i,{},{},"post")})(this.folder,this.portal,null!==(e=this.user)&&void 0!==e?e:l.c.user)).success&&this.arcgisDeleteFolderSuccess.emit(this.i18n.success.replace("${title}",this.folder.title))},this.portal=void 0,this.user=void 0,this.folder=void 0,this.active=!0,this.mode=void 0,this.items=void 0}async componentWillLoad(){var e,t;const n=await(0,o.g)(this.el);this.i18n=n[0],this.lang=n[1];const i=null!==(e=this.user)&&void 0!==e?e:l.c.user,s=null!==(t=this.portal)&&void 0!==t?t:l.c.portal;this.isEmpty=(await async function(e,t,n){return{result:0===(await d(e,t,n)).result}}(s,i,this.folder)).result,this.folderTotal=(await async function(e,t,n){return{result:(await d(e,t,n,r.H)).result}}(s,i,this.folder)).result,this.updateItems()}render(){var e;const{portal:t,user:n,active:l,i18n:s,folder:o,items:r,mode:a,isEmpty:c}=this;if(o)return c?(0,i.h)("calcite-modal",{widthScale:"s",open:l,kind:"danger",onCalciteModalClose:()=>this.arcgisDeleteFolderClose.emit()},(0,i.h)("div",{slot:"header"},s.deleteFolder),(0,i.h)("div",{slot:"content",innerHTML:s.message.empty.replace("${title}",o.title)}),(0,i.h)("calcite-button",{slot:"secondary",appearance:"outline-fill","data-id":"cancelButton",onClick:()=>{this.arcgisDeleteFolderClose.emit(),this.active=!1},width:"full"},s.cancel),(0,i.h)("calcite-button",{slot:"primary",appearance:"solid",kind:"danger","data-id":"nextButton",onClick:async()=>{await this.handleDeleteFolder(),this.active=!1},width:"full"},s.delete)):(0,i.h)("arcgis-delete-items",{items:r,portal:t,user:n,active:l,showSelectedItemsCount:!1,primaryBucket:"protectedItems",allowPermanentlyDeleteDeselect:!1,showConfirmDeleteMessage:"PROTECTED"===a&&(null===(e=null==t?void 0:t.sourceJSON)||void 0===e?void 0:e.recycleBinEnabled),closeOnConfirm:!1,onArcgisDeleteItemsModeChange:e=>{this.mode=e.detail},onArcgisDeleteItemsClose:()=>{this.arcgisDeleteFolderClose.emit(),this.active=!1},onArcgisDeleteItemsDelete:async()=>{await this.handlePostDeleteItems(),this.active=!1}},(0,i.h)("div",{slot:"header"},s.deleteFolder),(0,i.h)("div",{slot:"message"},this.renderMessage()))}get el(){return(0,i.a)(this)}}},54251:(e,t,n)=>{n.d(t,{g:()=>l});var i=n(59317);function l(e){var t,n,l,s;return null!=e||(e=null===i.c||void 0===i.c?void 0:i.c.portal),(null===(t=null==e?void 0:e.credential)||void 0===t?void 0:t.token)||(null==e?void 0:e.token)||(null===(l=null===(n=null==e?void 0:e.user)||void 0===n?void 0:n.credential)||void 0===l?void 0:l.token)||(null===(s=null==e?void 0:e.portalUser)||void 0===s?void 0:s.token)||""}},83692:(e,t,n)=>{n.d(t,{a:()=>m,b:()=>p,c:()=>v,f:()=>d,g:()=>y,i:()=>h,p:()=>w,r:()=>g});var i=n(59317),l=n(4429),s=n(931),o=n(41473),r=n(54251);const a={},c={},u={};async function d(e,t,n,i){var l,s,o,r;const d=null===(s=null===(l=u[t])||void 0===l?void 0:l[n])||void 0===s?void 0:s.expireAt,h=!!d&&(new Date).getTime()>d;if((null===(o=a[t])||void 0===o?void 0:o[n])&&!h)return a[t][n];c[t]||(c[t]={}),c[t][n]&&!h||(c[t][n]=e());const v=await c[t][n];if(a[t]||(a[t]={}),u[t]||(u[t]={}),a[t][n]=v,i){const{expireAfter:e,getExpireAfterFromResult:l}=i,s=l||e?(new Date).getTime()+(null!==(r=null==l?void 0:l(v))&&void 0!==r?r:e):null;u[t][n]=Object.assign(Object.assign({},u[t][n]),{expireAt:s})}return v}function h(e,t){var n;return null===(n=null==a?void 0:a[e])||void 0===n?void 0:n[t]}const v=(e,t)=>{var n,i;t?(null===(n=a[e])||void 0===n||delete n[t],null===(i=c[e])||void 0===i||delete i[t]):(delete a[e],delete c[e])};function p(e){var t,n;return null!==(t=null==e?void 0:e.id)&&void 0!==t?t:null===(n=null==e?void 0:e.sourceJSON)||void 0===n?void 0:n.id}async function m(e,t,n={},i){const[l]=await(0,s.l)(["esri/request"]);e.includes("f=")||t.append("f","json");const o=(0,r.g)();return o&&!t.has("token")&&t.append("token",o),new Promise((s,o)=>{l(e,Object.assign(Object.assign({body:t},n),{timeout:n.timeout||0,method:i||"auto"})).then(e=>{s(e.data)}).catch(e=>o(e))})}async function g(e,t={},n={},l,o){const[r]=await(0,s.l)(["esri/request"]),{api:a,portal:c}=i.c,{customToken:u,addTokenManually:d,addSSL:h,useProxy:v}=n,p=Object.assign({},t);if(e.includes("f=")||!0===(null==o?void 0:o.excludeJson)||(p.f="json"),u)p.token=u;else if(!1!==d){const e=await y(c);e&&(p.token=e)}const m=!1===h?e:function(e){var t;const{config:n}=i.c;return"https:"===window.location.protocol||!0===(null===(t=null==n?void 0:n.self)||void 0===t?void 0:t.allSSL)?e.replace("http:","https:"):e}(e);if(3===a){const e=Object.assign({url:m,content:p,timeout:n.timeout||0},null==o?void 0:o.v3Request);n.withCredentials&&(e.withCredentials=n.withCredentials);return r(e,"post"===l?Object.assign({usePost:!0},n):n)}{const e=Object.assign(Object.assign(Object.assign({query:p,method:l||"auto"},n),{timeout:n.timeout||0,useProxy:v}),(null==n?void 0:n.disableIdentityLookup)?{authMode:"anonymous"}:{});return(await r(m,e)).data}}const f=[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,15,15,30,30,30,30,30,30,30,30,30,30,120];const w=async(e,t,n)=>{var i,s;const o=null!==(i=null==t?void 0:t.pendingStatuses)&&void 0!==i?i:["processing","partial","Pending","InProgress","EXECUTING"],r=null!==(s=null==t?void 0:t.successStatuses)&&void 0!==s?s:["completed","Completed","COMPLETED"];let a=0;const c=async()=>{const i=await g(e,null==t?void 0:t.requestParams,{},n),s=i.status||i.jobStatus;if(o.includes(s))return await(0,l.t)((u=a++,1e3*f[u>-1&&u<f.length-1?u:f.length-1])),c();if(r.includes(s)||"failed"===s||"esriJobFailed"===s)return i;throw i;var u};try{return c()}catch(e){throw console.error(e),e}},y=async e=>{var t;if(!(null==e?void 0:e.isPortal)||!(0,o.i)(e))return(0,r.g)(e);if(!(null==e?void 0:e.user)&&!(null==e?void 0:e.portalUser)&&(0,o.i)(e))return;const{token:n}=await d(()=>b(e),"platformSelf",null!==(t=p(e.user))&&void 0!==t?t:e.id,{getExpireAfterFromResult:e=>e.expires_in});return n},b=async e=>{const t=await(async e=>{var t,n;const[i]=await(0,s.l)(["esri/identity/IdentityManager"]);return null!==(n=null===(t=(await d(()=>i.getCredential((0,o.g)(e),{oAuthPopupConfirmation:!1}),"credential",p(e.user))).oAuthState)||void 0===t?void 0:t.appId)&&void 0!==n?n:"arcgisonline"})(e),n={"X-Esri-Auth-Client-Id":t,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")};return g(`${(0,o.g)(e)}/oauth2/platformSelf`,{},{disableIdentityLookup:!0,headers:n,addTokenManually:!1,withCredentials:!0},"post",{v3Request:{headers:n}})}},94984:(e,t,n)=>{n.d(t,{C:()=>r,a:()=>d,b:()=>u,f:()=>a,g:()=>o,l:()=>s,s:()=>v});var i=n(15332),l=n(931);const s=new Map([["ar","ar"],["bg","bg"],["bs","bs"],["ca","ca"],["cs","cs"],["da","da"],["de","de"],["el","el"],["en","en"],["es","es"],["et","et"],["fi","fi"],["fr","fr"],["he","he"],["hr","hr"],["hu","hu"],["id","id"],["it","it"],["ja","ja"],["ko","ko"],["lt","lt"],["lv","lv"],["nb","no"],["no","no"],["nl","nl"],["pl","pl"],["pt-br","pt-BR"],["pt-pt","pt-PT"],["ro","ro"],["ru","ru"],["sk","sk"],["sl","sl"],["sr","sr"],["sv","sv"],["th","th"],["tr","tr"],["uk","uk"],["vi","vi"],["zh-cn","zh-CN"],["zh-hk","zh-HK"],["zh-tw","zh-TW"]]);function o(e){return function(e,t,n){const l=(0,i.c)(e,`[${t}]`);return l?l.getAttribute(t):n}(e,"dir","ltr")}const r={rtl:"arcgis--rtl"};async function a(e,t){const{api:n,type:i,places:s}=t||{};if(3===n){const[n]=await(0,l.l)(["dojo/number"]);return n.format(e,{type:i,places:s,pattern:null==t?void 0:t.pattern})}const[o]=await(0,l.l)(["esri/intl"]),r=o.convertNumberFormatToIntlOptions({places:s,style:i,digitSeparator:!0});return o.formatNumber(e,Object.assign(Object.assign({},r),{style:i}))}const c={};function u(e,t){let n=document.documentElement.lang;const i="bs"===n;if(i&&(n="hr"),t){const t=`${n}-full`,i={dateStyle:"full",timeStyle:"long"};return c[t]||(c[t]=new Intl.DateTimeFormat(n,i)),c[t].format(e)}const l={year:"numeric",month:i?"numeric":"short",day:"numeric"};return c[n]||(c[n]=new Intl.DateTimeFormat(n,l)),c[n].format(e)}function d(e,t,n,i){const l=null!=e?e:"en";let s=t.unknown;return(1===n||["id","ja","ko","th","vi","zh-cn","zh-hk","zh-tw"].includes(l))&&(s=t.single),1!==n&&["en","ca","da","de","el","es","et","fi","hi","hu","it","nb","nl","pt-pt","sv","tr"].includes(l)&&(s=t.multiple),v(s,Object.assign(Object.assign({},i),{number:n}))}const h=/\$\{([^}]+)\}/g;function v(e,t,n=h){let i=e;try{i=e.replace(n,(e,n)=>function(e,t){const n=e.split(".").reduce((e,t)=>e[t],t);return"string"==typeof n||"number"==typeof n?n:e}(n,t).toString())}catch(e){console.error(e)}return i}},96295:(e,t,n)=>{n.d(t,{H:()=>i,R:()=>l});const i='-typekeywords:("MapAreaPackage") -type:("Map Area" OR "Indoors Map Configuration" OR "Code Attachment")',l="Indoors Map Configuration,Code Attachment"}}]);