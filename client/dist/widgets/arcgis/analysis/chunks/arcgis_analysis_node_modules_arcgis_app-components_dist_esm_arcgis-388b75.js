/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-388b75.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-388b75"],{3826:(t,i,e)=>{e.d(i,{a:()=>s,b:()=>n,c:()=>r,d:()=>a});const a=(0,e(37762).c)({typeKeywords:[],customParameters:[],analyzedLocationTypes:[],allowStoredAuth:!0,isSecured:null,checkAuth:!1}),s=a.state,n=a.state,r=a.state},12192:(t,i,e)=>{e.d(i,{a:()=>r,g:()=>c});var a=e(15332),s=e(94984),n=e(87849);function r(t){var i,e,n;const r=null!==(i=(0,a.c)(t,"[lang]"))&&void 0!==i?i:null===(n=null===(e=t.shadowRoot)||void 0===e?void 0:e.ownerDocument)||void 0===n?void 0:n.documentElement,o=((null==r?void 0:r.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return s.l.has(o)?s.l.get(o):s.l.has(o.slice(0,2))?s.l.get(o.slice(0,2)):"en"}const o={};function l(t,i){const e=`${t}${i}`;return o[e]||(o[e]=function(t,i){return new Promise((e,a)=>{fetch((0,n.d)(`../arcgis-app-assets/i18n/${t}.i18n.${i}.json`)).then(t=>{t.ok?e(t.json()):a()},()=>a())})}(t,i)),o[e]}async function c(t,i){const e=i||t.tagName.toLowerCase(),n=r(t),o=function(t){var i,e,n;const r=null!==(i=(0,a.c)(t,"[lang]"))&&void 0!==i?i:null===(n=null===(e=t.shadowRoot)||void 0===e?void 0:e.ownerDocument)||void 0===n?void 0:n.documentElement,o=((null==r?void 0:r.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return s.l.has(o)?s.l.get(o):s.l.has(o.slice(0,2))?o:"en"}(t);let c;try{c=await l(e,n)}catch(t){console.warn(`no locale for ${e} (${n}) loading default locale en.`),c=await l(e,"en")}return[c,n,o]}},66951:(t,i,e)=>{e.r(i),e.d(i,{arcgis_new_item_classification:()=>l});var a=e(87849),s=e(59317),n=e(12192),r=e(6591),o=e(3826);e(37762),e(15332),e(94984),e(931),e(93814),e(83692),e(41473),e(54251);const l=class{constructor(t){(0,a.r)(this,t),this.classificationValueChange=(0,a.c)(this,"classificationValueChange",7),this.retrieveClassificationSchema=async()=>{const t=`${s.c.portal.restUrl}/portals/self/classification/classificationSchema`,{result:i,error:e}=await(0,r.r)(t);i?(r.i.itemClassificationSchema=i,i.attributeCategories&&this.setAttributeCategory(i.attributeCategories[0]),this.primaryAttribute=i.classificationMetadata.primaryAttribute,this.retrieveFavoriteClassifications()):this.handleDisplayNotificationModal({alertIndicatorActive:!0,alertIndicatorType:"danger",alertIndicatorIcon:"exclamation-mark-triangle",alertIndicatorInfo:null==e?void 0:e.message})},this.retrieveFavoriteClassifications=async()=>{const t=`${s.c.portal.restUrl}/community/users/${s.c.user.username}/resources/classification_favorites`,{result:i,error:e}=await(0,r.a)(t);if(this.setClassificationValue(),e){if("COM_1177"===e.code)return;this.handleDisplayNotificationModal({alertIndicatorActive:!0,alertIndicatorType:"danger",alertIndicatorIcon:"exclamation-mark-triangle",alertIndicatorInfo:this.i18n.retrieveClassificationFavoriteError})}else r.i.favoriteClassifications=i.favorites},this.setClassificationValue=async()=>{const{itemClassificationSchema:t,itemClassificationValue:i}=r.i;if(null==i?void 0:i.banner){const{error:t}=await(0,r.v)(i);t&&this.handleDisplayNotificationModal({alertIndicatorActive:!0,alertIndicatorType:"danger",alertIndicatorIcon:"exclamation-mark-triangle",alertIndicatorInfo:t.details.raw.messages.join(", ")})}r.i.itemClassificationValueWithDefaults=(0,r.d)(i,this.primaryAttribute,t),r.i.itemClassificationValue=(0,r.c)(i,this.primaryAttribute,t)},this.generateBannerText=async()=>{const{itemClassificationSchema:t,itemClassificationValueWithDefaults:i}=r.i,e=await(0,r.g)(t,i);i.banner=e;const a=await(0,r.l)(t,i);o.a.classification=a,this.emitClassificationValue(a)},this.emitClassificationValue=t=>{this.classificationValueChange.emit(Object.assign(Object.assign({},t),this.getEditInfo(s.c.user.username,r.i)))},this.setAttributeCategory=t=>{this.attributeCategory=t},this.setItemClassificationValue=t=>{const{itemClassificationSchema:i}=r.i,e=(0,r.m)(t,r.i.itemClassificationValueWithDefaults,this.primaryAttribute);r.i.itemClassificationValueWithDefaults=(0,r.n)(i,e),r.i.itemClassificationValue=e},this.handleItemClassificationChange=async()=>{const{itemClassificationSchema:t,itemClassificationValueWithDefaults:i,classificationErrors:e,activeAttributeId:a}=r.i;this.currSelectionText=await(0,r.e)(t,i),r.i.currSelectionText=this.currSelectionText,this.generateBannerText(),this.isEnableAttribute=await(0,r.f)(t,i);const s=await(0,r.h)(t,i,e,a);r.i.classificationErrors.conflictsError=s;const n=(0,r.j)({isEnableAttribute:this.isEnableAttribute,i18n:this.i18n,itemClassificationSchema:t,itemClassificationValue:i,classificationErrors:e,activeAttributeId:a});r.i.classificationErrors.requiredError=n,this.hasError=!!s.length||!!n.length},this.getEditInfo=(t,i)=>{const e=Date.now(),{createdUser:a=t,createdDate:s=e}=i.itemClassificationValueWithDefaults;return{createdUser:a,createdDate:s,lastEditedUser:t,lastEditedDate:e}},this.renderHeader=()=>{var t,i;const e=null===(t=r.i.itemClassificationSchema)||void 0===t?void 0:t.helpUrl,s=null===(i=r.i.itemClassificationSchema)||void 0===i?void 0:i.helpTooltip;return(0,a.h)("div",{role:"heading",class:"classification-section-label","aria-label":this.i18n.classificationSectionLabel},this.i18n.classificationSectionLabel,!!s&&(0,a.h)("arcgis-item-classification-header-help-tooltip",{helpUrl:e,helpTooltip:s}))},this.renderContent=()=>{const{itemClassificationSchema:t,itemClassificationValue:i,itemClassificationValueWithDefaults:e}=r.i;return(0,a.h)("div",{class:"portal-item-classification-content"},(0,a.h)("item-classification-info",{i18n:this.i18n,primaryAttribute:this.primaryAttribute,currSelectionText:this.currSelectionText}),!!t&&!!e&&(0,a.h)("item-classification-content",{i18n:this.i18n,primaryAttribute:this.primaryAttribute,currSelectionText:this.currSelectionText,itemClassificationValue:i,itemClassificationValueWithDefaults:e,attributeCategory:this.attributeCategory,onAttributeCategoryChange:t=>{this.setAttributeCategory(t.detail)},onArcgisItemClassificationContentDisplayNotification:t=>this.handleDisplayNotificationModal(t.detail),hasError:this.hasError}))},this.renderApp=()=>this.renderContent(),this.handleDisplayNotificationModal=t=>{this.alertIndicator=t},this.handleCloseNotificationModal=()=>this.alertIndicator=null,this.attributeCategory="General",this.primaryAttribute=void 0,this.currSelectionText=void 0,this.isEnableAttribute=[],this.hasError=!1,this.alertIndicator={alertIndicatorActive:!1,alertIndicatorType:"danger",alertIndicatorIcon:"exclamation-mark-triangle",alertIndicatorInfo:""}}async componentWillLoad(){r.o.reset();const t=await(0,n.g)(this.el);this.i18n=t[0],this.retrieveClassificationSchema(),r.o.onChange("itemClassificationValue",t=>{t&&this.handleItemClassificationChange()})}disconnectedCallback(){r.o.reset()}async handleSelectedFavoriteClassificationChange(t){const i=t.detail[this.primaryAttribute];r.i.selectedFavoriteClassificationName=t.detail.name,r.i.itemClassificationValueWithDefaults=(0,r.d)(i,this.primaryAttribute,r.i.itemClassificationSchema),r.i.itemClassificationValue=(0,r.c)(i,this.primaryAttribute,r.i.itemClassificationSchema),this.checkAllAttributesInputErrors()}async handleFavoriteClassificationChange(t){r.i.favoriteClassifications=t.detail}handleAttributeValueChange(t){const i=t.detail;r.i.activeAttributeId=i.attributeId,i.attributeId!==this.primaryAttribute?(r.i.itemClassificationValueWithDefaults=Object.assign(Object.assign({},i.classificationWithDefaults),this.getEditInfo(s.c.user.username,r.i)),r.i.itemClassificationValue=i.classification):this.setItemClassificationValue(i.classification[this.primaryAttribute])}async checkAllAttributesInputErrors(){const{itemClassificationSchema:t,itemClassificationValueWithDefaults:i,classificationErrors:e}=r.i,a=[];Object.entries(t.attributes).forEach(([e,{attributeCategory:s}])=>{if((0,r.p)(e,this.isEnableAttribute,t,i)){const i=t.attributes[e].label;a.push({attributeId:e,attributeLabel:i,attributeCategory:s,errorMessage:this.i18n.fieldSelectionError})}}),r.i.classificationErrors.requiredError=a,this.hasError=!0;return(0,r.q)(this.i18n,e)}render(){return(0,a.h)(a.F,{key:"58f66e2680cd5a5ddb81b53a74c644a5f4b66dc9"},this.renderHeader(),this.renderApp(),(0,a.h)("item-classification-notification",{key:"25b5f7c4e81ff51e8b03b70aaa658a90c772a9c4",i18n:this.i18n,alertIndicator:this.alertIndicator,onArcgisItemClassificationNotificationClose:()=>{this.handleCloseNotificationModal()}}))}get el(){return(0,a.a)(this)}};l.style=".item-classification-error{margin:1.25rem}.classification-section-label{margin-bottom:0.5rem;font-weight:700}#classification-tooltip-button{padding-inline-start:0.25rem}"},94984:(t,i,e)=>{e.d(i,{C:()=>o,a:()=>h,b:()=>u,f:()=>l,g:()=>r,l:()=>n,s:()=>f});var a=e(15332),s=e(931);const n=new Map([["ar","ar"],["bg","bg"],["bs","bs"],["ca","ca"],["cs","cs"],["da","da"],["de","de"],["el","el"],["en","en"],["es","es"],["et","et"],["fi","fi"],["fr","fr"],["he","he"],["hr","hr"],["hu","hu"],["id","id"],["it","it"],["ja","ja"],["ko","ko"],["lt","lt"],["lv","lv"],["nb","no"],["no","no"],["nl","nl"],["pl","pl"],["pt-br","pt-BR"],["pt-pt","pt-PT"],["ro","ro"],["ru","ru"],["sk","sk"],["sl","sl"],["sr","sr"],["sv","sv"],["th","th"],["tr","tr"],["uk","uk"],["vi","vi"],["zh-cn","zh-CN"],["zh-hk","zh-HK"],["zh-tw","zh-TW"]]);function r(t){return function(t,i,e){const s=(0,a.c)(t,`[${i}]`);return s?s.getAttribute(i):e}(t,"dir","ltr")}const o={rtl:"arcgis--rtl"};async function l(t,i){const{api:e,type:a,places:n}=i||{};if(3===e){const[e]=await(0,s.l)(["dojo/number"]);return e.format(t,{type:a,places:n,pattern:null==i?void 0:i.pattern})}const[r]=await(0,s.l)(["esri/intl"]),o=r.convertNumberFormatToIntlOptions({places:n,style:a,digitSeparator:!0});return r.formatNumber(t,Object.assign(Object.assign({},o),{style:a}))}const c={};function u(t,i){let e=document.documentElement.lang;const a="bs"===e;if(a&&(e="hr"),i){const i=`${e}-full`,a={dateStyle:"full",timeStyle:"long"};return c[i]||(c[i]=new Intl.DateTimeFormat(e,a)),c[i].format(t)}const s={year:"numeric",month:a?"numeric":"short",day:"numeric"};return c[e]||(c[e]=new Intl.DateTimeFormat(e,s)),c[e].format(t)}function h(t,i,e,a){const s=null!=t?t:"en";let n=i.unknown;return(1===e||["id","ja","ko","th","vi","zh-cn","zh-hk","zh-tw"].includes(s))&&(n=i.single),1!==e&&["en","ca","da","de","el","es","et","fi","hi","hu","it","nb","nl","pt-pt","sv","tr"].includes(s)&&(n=i.multiple),f(n,Object.assign(Object.assign({},a),{number:e}))}const d=/\$\{([^}]+)\}/g;function f(t,i,e=d){let a=t;try{a=t.replace(e,(t,e)=>function(t,i){const e=t.split(".").reduce((t,i)=>t[i],i);return"string"==typeof e||"number"==typeof e?e:t}(e,i).toString())}catch(t){console.error(t)}return a}}}]);