/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_com-266ca8.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_com-266ca8"],{4265:(e,t,o)=>{o.d(t,{a:()=>r,d:()=>i,t:()=>s});const i=(e,t)=>{let o,i="idle";const r=async(...r)=>await new Promise(s=>{switch(i){case"flushed":i="idle",o?(clearTimeout(o),s(e(...r))):s(null);break;case"invoked":clearTimeout(o),i="idle",s(e(...r));break;case"cancelled":clearTimeout(o),i="idle",s(null);break;default:o&&clearTimeout(o),i="pending",o=setTimeout(()=>{i="idle",s(e(...r))},t)}});return r.flush=async function(...e){return i="flushed",await r(...e)},r.invoke=async function(...e){return i="invoked",await r(...e)},r.cancel=async function(...e){return i="cancelled",await r(...e)},r.getStatus=function(){return i},r},r=(e,t)=>{let o;return async(...i)=>await new Promise(r=>{o||(o=setTimeout(()=>{clearTimeout(o),o=void 0,r(e(...i))},t))})};function s(e){return new Promise(t=>setTimeout(t,e))}},36486:(e,t,o)=>{o.d(t,{u:()=>s});var i=o(83552),r=o(73679);const s=(0,i.yr)(r.g)},39839:(e,t,o)=>{o.d(t,{A:()=>A,B:()=>F,C:()=>r,D:()=>x,E:()=>P,F:()=>w,G:()=>I,H:()=>q,I:()=>s,a:()=>f,b:()=>a,c:()=>B,d:()=>d,e:()=>p,f:()=>O,g:()=>m,h:()=>c,i:()=>n,j:()=>E,k:()=>M,l:()=>g,m:()=>S,n:()=>T,o:()=>z,p:()=>y,q:()=>h,r:()=>u,s:()=>l,t:()=>b,u:()=>v,v:()=>k,w:()=>$,x:()=>C,y:()=>R,z:()=>L});var i=o(56451);const r={autoAdjustLabel:"auto-adjust-label",styleDropdown:"style-dropdown",arrowDropdown:"arrow-dropdown",iconDropdown:"icon-dropdown",iconDropdownSelected:"icon-dropdown--selected",iconDropdownItemContent:"icon-dropdown-item-content",colorRampFlipper:"color-ramp-flipper",scroller:"scroller",colorRampSelection:"color-ramp-selection",autoAdjustCheckbox:"auto-adjust-checkbox",contentGroup:"content-group",message:"message",container:"container",label:"label",symbol:"symbol",changeSymbolTrigger:"change-symbol-trigger",changeSymbolTriggerDisabled:"change-symbol-trigger-disabled"},s={all:["*"],light:["light"],dark:["dark"],redsAndYellows:["oranges","reds","yellows"],greens:["greens"],blues:["blues"],purplesAndPinks:["purples","pinks"],browns:["browns"],grays:["grays"],bright:["bright"],subdued:["subdued"],colorblindFriendly:["colorblind-friendly"]},l=["none","begin","end","begin-end"],a=["solid","dash","dot","dash-dot","long-dash-dot-dot","short-dash","short-dot","short-dash-dot","short-dash-dot-dot","long-dash","long-dash-dot"],n={size:!0,preview:!0,rotation:!0,alignment:!0},c={style:!0,arrow:!0,width:!0,autoStrokeAdjust:!1},m={suggestedColors:!0,customColor:!0,transparency:!0},p={colorRamps:!0,transparency:!0},d={extra:!0},h="arcgis-symbol-styler-storage-colors",y={size:24,maxSize:24},g={size:{width:60,height:2}},b=100,u=0,S=18,f=0,C=360,$=0,k=150,v=1,w=200,I=0,x=100,P=0,M=10,R=200,L=0,A=100,F=0,T=20,z=0;function O(e,t=!1){return t?function(e){const t=Math.sqrt(e.length),o=q(e).reverse(),i=[];for(let e=0;e<t;e++){const t=[];o.forEach(o=>t.push(o[e])),i.push(t)}return function(e){let t=[];e=e.slice().map(e=>e.slice());const o="HH".split(""),i=o[0],r=o[1];"L"===i&&e.reverse();const s="H"===r;return e.forEach(e=>{s&&e.slice().reverse(),t=t.concat(e)}),t}(i).reverse()}(e):e.slice().reverse()}function q(e,t){const o=[],i=Math.sqrt(e.length),r="HH".split(""),s=r[0],l="H"!==r[1];for(let t=0;t<i;t++){const r=[];for(let o=0;o<i;o++){const s=t*i+o;r.push(e[s])}l&&r.reverse(),o.push(r)}return"L"===s&&o.reverse(),o}const j=[0,0,0,0];function B(e,t=!1){const o=e??j;return t?i.default.fromJSON(o):new i.default(o)}function E({r:e,g:t,b:o,a:i}){return 0===e&&0===t&&0===o&&0===i}},42855:(e,t,o)=>{o.d(t,{a:()=>l,f:()=>i,l:()=>r,s:()=>s});var i=(e=>(e.expression="expression/",e.raster="Raster.",e.relationship="relationships/",e))(i||{}),r=(e=>(e.cluster="cluster",e.feature="feature",e.mapNotes="mapNotes",e))(r||{}),s=(e=>(e.catalog="catalog",e.catalogFootprint="catalog-footprint",e.csv="csv",e.feature="feature",e.geojson="geojson",e.imagery="imagery",e.imageryTile="imagery-tile",e.knowledgeGraphSublayer="knowledge-graph-sublayer",e.mapImage="map-image",e.ogcFeature="ogc-feature",e.orientedImagery="oriented-imagery",e.parquet="parquet",e.scene="scene",e.stream="stream",e.subtype="subtype",e.tile="tile",e.voxel="voxel",e.wcs="wcs",e.wfs="wfs",e.wms="wms",e))(s||{}),l=(e=>(e.bigInteger="big-integer",e.blob="blob",e.date="date",e.dateOnly="date-only",e.double="double",e.globalId="global-id",e.guid="guid",e.integer="integer",e.long="long",e.number="number",e.oid="oid",e.single="single",e.smallInteger="small-integer",e.string="string",e.timeOnly="time-only",e.timestampOffset="timestamp-offset",e))(l||{})},46317:(e,t,o)=>{o.d(t,{D:()=>l});var i=o(85282),r=o(34670),s=o(42466);const l=(0,r.u$)(class extends r.WL{constructor(){super(...arguments),this.key=i.s6}render(e,t){return this.key=e,t}update(e,[t,o]){return t!==this.key&&((0,s.mY)(e),this.key=t),o}})},60300:(e,t,o)=>{function i(e){return e?e/72*96:0}function r(e){return e?72*e/96:0}o.d(t,{a:()=>r,p:()=>i})},66228:(e,t,o)=>{o.d(t,{a:()=>S,b:()=>x,c:()=>L,d:()=>I,e:()=>P,f:()=>F,g:()=>b,h:()=>u,i:()=>y,j:()=>g,k:()=>$,l:()=>A,m:()=>v,n:()=>d,o:()=>k,p:()=>O,q:()=>R,r:()=>z,s:()=>C,t:()=>w,u:()=>f});var i=o(63438),r=o(18423),s=o(96086),l=o(91813),a=o(21255),n=o(13078),c=o(21303),m=o(12627),p=o(42855);const d=["feature","scene","geojson","csv","subtype-sublayer","oriented-imagery","catalog-footprint","sublayer"],h=["feature"];function y(e){return null!=e}function g(e,t,o){const i=t.fieldName;if(i.includes(p.f.expression)){const e=o.get(i);return e?.title?e.title:i}return C(e)&&e.getFieldConfiguration(i)?e.getFieldAlias(i)||i:t.label||i}async function b(e){return new Map((await $(e)).filter(e=>e.visible).map(e=>[e.name,e]))}function u(e){const t=new Map;return e?.expressionInfos&&e.expressionInfos.forEach(e=>{const o=`${p.f.expression}${e.name}`;t.set(o,e)}),t}function S(e){return"map-image"===e?.layer?.type?p.s.mapImage:"subtype-sublayer"===e?.type?p.s.subtype:"tile"===e?.layer?.type?p.s.tile:"scene"===e?.type?p.s.scene:"ogc-feature"===e?.type?p.s.ogcFeature:"imagery"===e?.type?p.s.imagery:"imagery-tile"===e?.type?p.s.imageryTile:"wfs"===e?.type?p.s.wfs:"wcs"===e?.type?p.s.wcs:"wms"===e?.layer?.type?p.s.wms:"csv"===e?.type?p.s.csv:"geojson"===e?.type?p.s.geojson:"stream"===e?.type?p.s.stream:"oriented-imagery"===e?.type?p.s.orientedImagery:"catalog"===e?.type?p.s.catalog:"catalog-footprint"===e?.type?p.s.catalogFootprint:"knowledge-graph-sublayer"===e?.type?p.s.knowledgeGraphSublayer:"voxel"===e?.type?p.s.voxel:"parquet"===e?.type?p.s.parquet:p.s.feature}function f(e){const t=S(e);let o;return t===p.s.wms||t===p.s.mapImage?o=e?.layer.version:(t===p.s.imagery||t===p.s.feature||t===p.s.scene)&&(o=e.version),Number.parseFloat(o)}function C(e){return"fieldConfigurations"in e&&h.includes(e.type)}async function $(e){return await new Promise((t,o)=>{switch(S(e)){case p.s.feature:case p.s.ogcFeature:case p.s.stream:t(e.fields);break;case p.s.mapImage:{const i=e,r=i?.layer;r?.portalItem&&r.url.includes("https://demographics")&&r.url.includes(".arcgis.com")?r.portalItem?.fetchData().then(e=>{if(e?.thematicGroup){const o=new Map(i.fields.map(e=>[e.name,e])),r=e.thematicGroup.fieldNames,s=[];r.forEach(e=>{o.has(e)&&s.push(o.get(e))}),t(s)}else t(i.fields)}).catch(e=>{o(new Error(e))}):t(i.fields);break}case p.s.imagery:case p.s.imageryTile:case p.s.wcs:t(e.rasterFields);break;default:t("fields"in e?e.fields??[]:[])}})}function k(e){if(e)switch(e.type){case"point":return e;case"extent":return e.center;case"polygon":return e.centroid;case"multipoint":case"polyline":return e.extent?.center;default:return}}function v(e){return Number((100*(1-e)).toFixed(1))}function w(e){return Number((1-e/100).toFixed(3))}const I=(e,t)=>{const o=[];return e?.fieldInfos?.forEach(e=>{e.fieldName?.includes(p.f.expression)||o.push({name:e.fieldName,alias:e.label,type:"string"})}),o},x=async(e,t)=>{const o=new m.default;return o.geometry=t.extent,o.mapExtent=t.extent,o.returnGeometry=!0,o.tolerance=6,o.layerOption="popup",o.width=t.width,o.height=t.height,o.layerIds=[e.id],(await c.identify(e.layer.url,o))?.results?.[0]?.feature},P=async(e,t,o)=>{const i=await(await e.whenLayerView(t)).queryAggregates();return await M(o,i.features?.[0])},M=async(e,t)=>{let o;if(t)o=t.clone();else{o=new i.default;const t=I(e);if(t?.length){const e={};t.forEach(t=>{e[t.name]=""}),o.attributes=e}const s=new r.default;o.geometry=s}return o};function R(e,t){const o=t.startsWith("#"),i=t.startsWith(".");for((i||o)&&(t=t.slice(1));e;){if(o){if(e.id===t)return e}else if(i){if(e.classList.contains(t))return e}else if(e.tagName.toLowerCase()===t.toLowerCase())return e;e=e.parentElement??e.getRootNode()?.host??void 0}}async function L(e){if(S(e)===p.s.stream)return await Promise.resolve("point");if(e.geometryType)return await Promise.resolve(e.geometryType);if(S(e)===p.s.mapImage&&e?.layer?.sourceJSON?.layers){const t=e.layer?.sourceJSON.layers.find(t=>{if(t.id===e.id)return t})?.geometryType?.toLowerCase();if(t)return t.indexOf("point")>-1?await Promise.resolve("point"):t.indexOf("line")>-1?await Promise.resolve("polyline"):t.indexOf("polygon")>-1?await Promise.resolve("polygon"):await Promise.resolve(t);{const t=e?.layer?.findSublayerById(e.id);if(t){const e=await(t?.createFeatureLayer());return e?(await e.load(),await Promise.resolve(e?.geometryType)):void await Promise.resolve()}return void await Promise.resolve()}}await Promise.resolve()}function A(e,t,o){let i="";if(/^raster.(?:item|service)pixelvalue/iu.test(e))i="number";else if(t.has(e)){const o=t.get(e);i=o.type?o.type.toLowerCase():""}else if(o.has(e)){const t=o.get(e);i=t.returnType?t.returnType.toLowerCase():""}else i="number";return i}async function F(e,t){try{const o=S(e);if(o===p.s.mapImage&&e.layer.version>=10.5&&!e.layer.capabilities?.operations?.supportsQuery&&e.layer.capabilities?.operations?.supportsIdentify)return{features:[await x(e,t)||await T(e,t)]};if(o===p.s.scene&&!e.capabilities?.operations?.supportsQuery)return{features:[await T(e,t)]};const i=o===p.s.ogcFeature||o===p.s.stream?await t.whenLayerView(e):e,r=i.createQuery();r.where=i.definitionExpression||"1=1",r.outFields=["*"],r.returnM="hasM"in e&&e.hasM,r.returnZ="hasZ"in e&&e.hasZ,r.outSpatialReference=t.spatialReference,r.returnGeometry=!0,(i.sourceJSON?.advancedQueryCapabilities?.supportsPagination||o===p.s.ogcFeature)&&(r.start=0,r.num=1),r.outSpatialReference=t.spatialReference;const s=await i.queryFeatures(r);return s?.features?.length||(s.features[0]=await T(e,t)),s}catch(e){console.error(e)}}async function T(e,t){return await new Promise(o=>{const r=new i.default;if(e.fields?.length){const t={};e.fields.forEach(e=>{t[e.name]=e.defaultValue}),r.attributes=t}const c=t.extent;let m;"polygon"===e.geometryType?m=a.default.fromExtent(c):"point"===e.geometryType?m=c.center.clone():"multipoint"===e.geometryType?m=new s.default({points:[[c.center.x,c.center.y]],spatialReference:c.center.spatialReference.clone()}):"polyline"===e.geometryType?(m=new l.default({spatialReference:t.spatialReference.clone()}),m.addPath([[c.xmin,c.ymin],[c.xmax,c.ymax]])):"mesh"===e.geometryType&&(m=n.default.createBox(c.center.clone(),{size:{width:50,height:50,depth:50}})),r.geometry=m,o(r)})}function z(e){return S(e)===p.s.tile&&"url"in e&&"sublayer"===e.type&&-1===e.url?.indexOf(e.parent.url)&&!!e.fields?.length}function O(e){return S(e)===p.s.tile&&"url"in e&&"sublayer"===e.type&&-1!==e.url?.indexOf(e.parent.url)&&!!e.fields?.length}},89779:(e,t,o)=>{function i(e){return"cim"===e.type&&e.data.symbol?"CIMLineSymbol"===e.data.symbol.type?"line":"CIMPolygonSymbol"===e.data.symbol.type?"polygon":"point":"simple-marker"===e.type||"picture-marker"===e.type?"point":"simple-line"===e.type?"line":"polygon"}function r(e){return"cim"===e?.type}function s(e){return"simple-marker"===e?.type}function l(e){return"picture-marker"===e?.type}function a(e){return"simple-line"===e?.type}function n(e){return"simple-fill"===e?.type}function c(e){return!!e.data.symbol&&"CIMPointSymbol"===e.data.symbol.type}function m(e){return!!e.data.symbol&&"CIMLineSymbol"===e.data.symbol.type}function p(e){return!!e.data.symbol&&"CIMPolygonSymbol"===e.data.symbol.type}o.d(t,{a:()=>s,b:()=>n,c:()=>a,d:()=>l,e:()=>p,f:()=>c,g:()=>i,h:()=>m,i:()=>r})},91886:(e,t,o)=>{o.r(t),o.d(t,{ArcgisMapConfigSymbolStyler:()=>U});var i=o(73679),r=o(46317),s=o(23054),l=o(32513),a=o(39839),n=o(89779),c=o(60300),m=o(56451),p=o(83930),d=o(83552),h=o(66228),y=o(4265),g=o(4395),b=o(85643),u=o(73801),S=o(36486),f=o(16161),C=o(52797),$=o(41810),k=o(5294),v=o(10281);function w(e,t,o=!1,i=!0){if(!e||!t)return!1;const r=e.every((e,i)=>{const r=t[i];return e.r===r.r&&e.g===r.g&&e.b===r.b&&(!o||e.a===r.a)});return i?r||w(e.slice().reverse(),t,o,!1):r}function I(e,t){return x(e,t)}function x(e,t){if(Array.isArray(e)){for(let o=0;o<e.length;o++){const i=x(e[o],t);if(void 0!==i)return i}return}const o=t(e);return void 0!==o?o:"cim"===e?.type?x(e.data.symbol,t):"CIMSymbolReference"===e?.type||"CIMMarkerGraphic"===e?.type?x(e.symbol,t):"CIMPointSymbol"===e?.type||"CIMPolygonSymbol"===e?.type||"CIMLineSymbol"===e?.type?x(e.symbolLayers,t):"CIMHatchFill"===e?.type?x(e.lineSymbol,t):"CIMVectorMarker"===e?.type?x(e.markerGraphics,t):void 0}function P(e,t,o){const i=t.toJSON();I(e,e=>{"fill"===o&&("CIMSolidFill"===e?.type&&(e.color=i),("CIMPictureFill"===e?.type||"CIMPictureMarker"===e?.type)&&(e.tintColor=i)),"stroke"===o&&("CIMSolidStroke"===e?.type&&(e.color=i),"CIMPictureStroke"===e?.type&&(e.tintColor=i))})}function M(e){return e.animations?.length?e:I(e,e=>{if(e.animations?.length)return e})}function R(e,t){const o=I(e,e=>{if("fill"===t){if("CIMSolidFill"===e?.type)return e.color;if("CIMPictureFill"===e?.type||"CIMPictureMarker"===e?.type)return e.tintColor}if("stroke"===t){if("CIMSolidStroke"===e?.type)return e.color;if("CIMPictureStroke"===e?.type)return e.tintColor}});return m.default.fromJSON(o)}function L(){return{min:a.a,max:a.m}}function A(e,t){return 0===e.a&&(t.a=1),t}function F(e){return(0,n.i)(e)&&(G(e)||function(e){return!!p.getCIMSymbolColor(e)}(e))||(0,n.a)(e)&&!z(e)||(0,n.b)(e)}function T(e){return(0,n.i)(e)&&G(e)||(0,n.a)(e)||(0,n.c)(e)||(0,n.b)(e)}function z(e){return"simple-marker"===e?.type&&("x"===e.style||"cross"===e.style)}function O(e,t=e.size){return{...e,size:void 0!==t?B((0,c.a)(t)):0}}function q(e){const t=Number.isInteger(e)?0:2;return Number(e.toFixed(t))}function j(e){const t=Number.isInteger(e)?0:2;return Number(e.toFixed(t))}function B(e){const t=Number.isInteger(e)?0:3;return Number(e.toFixed(t))}function E(e,t){return Number.isNaN(e)?t:q((0,c.p)(e))}function V(e){return e&&"simple-line"!==e.type&&"simple-fill"!==e.type?(0,n.i)(e)?p.getCIMSymbolRotation(e,!0):e.angle??0:0}function N(e){return"CIMTextSymbol"===e.type}function G(e){if(N(e.data.symbol))return!1;const{symbolLayers:t}=e.data.symbol;if(1===t?.length){const[e]=t;if("CIMVectorMarker"!==e.type||e.colorLocked)return!1;const{markerGraphics:o}=e;return 1===o.length&&!N(o[0].symbol)&&D(o[0].symbol.symbolLayers)}if(2===t?.length){const[e,o]=t;if("CIMVectorMarker"!==e.type||"CIMVectorMarker"!==o.type||e.colorLocked||e.size>o.size)return!1;const i=e.markerGraphics,r=o.markerGraphics;if(1!==i.length||1!==r.length)return!1;const[{symbol:s}]=i,[{symbol:l}]=r;return s&&l&&!N(s)&&!N(l)&&D(s.symbolLayers)&&function(e){return function(e){return!!e?.find(({type:e})=>"CIMSolidFill"===e)}(e)&&_(e)}(l.symbolLayers)}return!1}function D(e){return function(e){return!!function(e){return e?.find(({type:e,colorLocked:t})=>"CIMSolidFill"===e&&!t)}(e)}(e)&&_(e)}function _(e){return!!function(e){return e?.find(({type:e})=>"CIMSolidStroke"===e)}(e)}function H(e){return e&&function(e){return a.s.includes(e?.placement)&&"arrow"===e?.style}(e)?e.placement:"none"}function W(e){if("none"!==e)return{style:"arrow",placement:e}}function J(e,t){if(e&&t&&function(e){return"color-ramp"===e?.type&&"2d"===e.style}(e)){const o=function(e,t){const o=t.map(e=>e.stops),i=4;let r=e.map(e=>e.clone()),s=0,l=!1;for(let e=0;e<i;e++){if(o.some(e=>w(r,e,!0,!1))){l=!0;break}r=(0,a.f)(r,!0),s++}return l?(i-s)%i:null}(t.color,e.colorRamps);if(null!==o&&o>0)return e.colorRamps.map(e=>{const t={...e};for(let e=0;e<o;e++)t.stops=(0,a.f)(t.stops,!0);return t})}return e?.colorRamps}const K=g.AH`:host{min-width:220px;height:min-content;display:flex;flex:1 1 auto;flex-flow:column nowrap;align-items:stretch}button{overflow:hidden;align-items:center;border:none;border-radius:0;box-sizing:border-box;cursor:pointer;display:flex;font-family:inherit;gap:8px;height:100%;justify-content:center;outline-color:transparent;outline-offset:0;padding:3px 0;padding-inline:3px 8px;position:relative;text-decoration:none;user-select:none;text-align:center;-webkit-appearance:none;width:100%;&:focus{outline:2px solid var(--calcite-color-brand);outline-offset:2px}&:hover{text-decoration:none}}calcite-dropdown{width:100%}calcite-flow{height:100%}.content{background-color:var(--calcite-color-foreground-1)}.color-locked-info{display:flex;gap:4px;margin:8px 0;align-items:center;calcite-icon{color:var(--calcite-color-text-3)}}.icon-dropdown{padding:.25rem 0 0;width:100%;background-color:var(--calcite-color-foreground-1);height:2.25rem;border:1px solid #a9a9a9;box-shadow:inset 0 1px 2px #00000013}.icon-dropdown--selected{cursor:pointer;margin-left:12px;height:3px;width:100%}.icon-dropdown-item-content,.icon-dropdown--selected{background-position:center;background-clip:content-box;background-origin:content-box;padding-left:0;padding-right:0}.icon-dropdown-item-content{height:30px;width:200px}:dir(rtl){.icon-dropdown--selected{margin-right:12px}}.style-dropdown{[slot=trigger]{width:100%;display:flex;justify-content:space-between;align-items:center;calcite-icon{margin:8px;background-color:#fff}}[slot=trigger],.icon-dropdown-item-content{background-repeat:repeat-x}}.arrow-dropdown{[slot=trigger]{width:100%;display:flex;justify-content:space-between;align-items:center;.icon-dropdown--selected{height:30px;background-size:100% 119px}calcite-icon{margin:8px;background-color:#fff}}[slot=trigger] .icon-dropdown--selected,.icon-dropdown-item-content{background-repeat:no-repeat;&[data-arrow=none]{background-position:0 0}&[data-arrow=begin]{background-position:0 -32px}&[data-arrow=end]{background-position:0 -61px}&[data-arrow=begin-end]{background-position:0 -91px}}}.content-group{display:flex;flex-direction:column;label{margin:8px 0 0}}.color-ramp-selection{padding:4px}.section-toggle--disabled{pointer-events:none;opacity:.5}.swatch-item{box-sizing:border-box;height:16px;width:16px;border-radius:2px;box-shadow:0 0 0 1px #00000054}calcite-input[disabled]{[data-adjustment]{pointer-events:none}}arcgis-map-config-symbol-styler-section{calcite-block{overflow:visible;margin:0 -12px;&[open]:before :not(.no-top-margin){content:"";height:16px;display:flex;background-color:var(--calcite-color-foreground-2)}&:nth-of-type(n+1){border-bottom:1px solid #f0f0f0}&:last-child{border-bottom:none}arcgis-map-config-symbol-styler-section:nth-of-type(2){margin-top:12px}}}calcite-panel{overflow:visible;margin-top:0}.input-color{flex-wrap:nowrap;gap:8px;align-items:center}calcite-tooltip{max-width:250px;&:not([open]){visibility:hidden;pointer-events:none}}.message{margin-top:8px}arcgis-map-config-symbol-styler-symbol-preview[slot=icon],arcgis-map-config-symbol-styler-symbol-preview.gradient-margin{width:32px;height:32px;padding:2px;display:flex;align-items:center;justify-content:center}.container{display:flex;padding:8px 12px;align-items:center;justify-content:center;width:100%;gap:8px;flex-grow:1}.symbol{height:32px;display:flex;justify-content:center;align-items:center}.label{flex-grow:1;display:flex;justify-content:flex-start}.animation-label{font-weight:var(--calcite-font-weight-medium)}.change-symbol-trigger{border:1px solid var(--calcite-color-border-input)}.change-symbol-trigger-disabled{border:1px solid var(--calcite-color-border-ghost)}.symbol-selection-panel{min-height:min(100vh - 200px,500px);display:flex;flex-direction:column}arcgis-color-input{margin-top:calc(-1 * var(--calcite-spacing-xxs));padding-bottom:var(--calcite-spacing-md)}.animation-panel{min-height:min(100vh - 200px,500px);display:flex;flex-direction:column}.animation-checkbox-container{display:flex;align-items:center;padding-bottom:var(--calcite-spacing-sm)}.animation-checkbox-container-text{margin:0px var(--calcite-spacing-sm)}.offset-div{align-items:center;display:flex;justify-content:space-between;gap:16px;margin-bottom:var(--calcite-spacing-md)}.offset-animation-content-margin,.gradient-margin,.effects-margin{margin-bottom:var(--calcite-spacing-md)}.gradient-color-inputs{display:flex;gap:var(--calcite-spacing-md);width:100%;justify-content:space-between}.gradient-color-inputs arcgis-color-input{max-width:64px}.scale-animation-wrapper{margin:var(--calcite-spacing-md) 0px}.scale-animation-slider-labels{display:flex;justify-content:space-between}`;class U extends u.WF{constructor(){super(),this._direction=(0,d.jH)(),this.resizeObserver=new ResizeObserver(e=>{const t=e.pop();t&&(this.narrow=t.contentRect.width<=275)}),this.windowResizeObserver=new ResizeObserver(()=>this.checkPopoverMaxHeight()),this.builtInStrings=(0,S.u)({blocking:!0}),this.mergedStrings=(0,S.u)({blocking:!0}),this.autoOpenFirstBlock=!1,this.autoCalcHeight=!1,this.colorInputEl=[],this.manualBlockOpen=!1,this.symbolPickerElement=(0,b._)(),this.updatePreviewSymbol=(0,y.a)(()=>{const e=this.symbol.clone();this.syncSymbolProps(e,{symbolState:{marker:this.marker,fill:this.fill,stroke:this.stroke}}),this.previewSymbol=e},150),this.onFillColorRampCategoryChange=e=>{const t=e.target.selectedOption.value,o=this.sections?.fill;this.sections={...this.sections,fill:{...o,activeCategory:t}},e.stopPropagation()},this.onStrokeColorRampCategoryChange=e=>{const t=e.target.selectedOption.value,o=this.sections?.stroke;this.sections={...this.sections,stroke:{...o,activeCategory:t}},e.stopPropagation()},this.onAutoAdjustStrokeChange=e=>{const t=e.currentTarget.checked,{stroke:o}=this,i={...o,autoAdjusted:t};this.stroke=i,this.arcgisStrokeChange.emit(O(i)),this.emitEdit(this.symbol),e.stopPropagation()},this.onAutoAdjustSizeChange=e=>{const t=e.currentTarget.checked,{marker:o}=this,i={...o,autoAdjusted:t};this.marker=i,this.arcgisMarkerChange.emit(O(i)),this.emitEdit(this.symbol),e.stopPropagation()},this.emitEdit=(0,y.d)(async(e,t)=>{const o=e.clone(),i={},{editGeometry:r}=this,s="point"===r,l=!z(e)&&"point"===r||"polygon"===r;s&&(i.marker={...O(this.marker),symbol:o}),l&&(i.fill={...this.fill}),i.stroke={...O(this.stroke)},this.arcgisEdit.emit({symbol:o,info:i,symbolSwitch:t})},300),this.flipFillColorRamps=()=>{const e=this.sections?.fill,t=this.fill,o="2d"===e.style,i={color:(0,a.f)(t.color,o)};this.sections={...this.sections,fill:{...e,colorRamps:e.colorRamps.map(({stops:e,tags:t,name:i})=>({stops:(0,a.f)(e,o),tags:t,name:i}))}},this.fill=i,this.arcgisFillChange.emit(i),this.emitEdit(this.symbol)},this.flipStrokeColorRamps=()=>{const e=this.sections?.stroke,t=this.stroke,o="2d"===e.style,i={...t,color:(0,a.f)(t.color,o)};this.sections={...this.sections,stroke:{...e,colorRamps:e.colorRamps.map(({stops:e,tags:t,name:i})=>({stops:(0,a.f)(e,o),tags:t.slice(),name:i}))}},this.stroke=i,this.arcgisStrokeChange.emit(O(i)),this.emitEdit(this.symbol)},this._messages=(0,S.u)(),this.narrow=!1,this.preppingEdit=!0,this.tempStrokeColorRampStateActiveCategory="all",this.pickerReRenderFlag=!1,this.state="editing",this.config={},this.mode="default",this.arcgisEdit=(0,u.lh)(),this.arcgisFillChange=(0,u.lh)(),this.arcgisFillEnabledChange=(0,u.lh)(),this.arcgisMarkerChange=(0,u.lh)(),this.arcgisSourceIdChange=(0,u.lh)(),this.arcgisStrokeChange=(0,u.lh)(),this.arcgisStrokeEnabledChange=(0,u.lh)(),this.listen("calciteFlowItemBack",this.onPanelBack)}static{this.properties={cimStrokeWidthBounds:16,stylerProps:16,editGeometry:16,fill:16,marker:16,narrow:16,preppingEdit:16,previewSymbol:16,sections:16,stroke:16,symbol:16,tempStrokeColorRampStateActiveCategory:16,pickerReRenderFlag:16,activeSymbol:16,activeSymbolItem:16,state:16,config:0,popoverProps:0,initialSourceId:1,portal:0,stringOverrides:0,mode:1,activeSourceId:1}}static{this.styles=K}async edit(e,t){const o=(i=e)?"text"===i.type||"picture-fill"===i.type?`editing symbol of type ${i.type} is not supported`:null:"missing symbol to edit";var i;if(o)throw new Error(`[symbol-styler] ${o}`);e=await this.checkLineOnlySymbol(e,t),this.portalOrInterceptor=t.portal||this.portal||l.default.getDefault(),this.preppingEdit=!0,this.autoOpenFirstBlock=!0;const r=t.sections?.marker,s=t.sections?.fill,c=t.sections?.stroke;this.symbolFilter=t.symbolFilter||("all"===r?.markerType?void 0:r?.markerType),this.editGeometry=(0,n.g)(e);const m=F(e=e.clone()),p=T(e);((0,n.a)(e)||(0,n.b)(e))&&(e.outline?e.outline.color||(e.outline.color=(0,a.c)(null)):e.outline={type:"simple-line",color:(0,a.c)(null)});const d={autoAdjusted:!1,...t.stroke,size:void 0!==t.stroke?.size?E(t.stroke.size,2):2,style:a.b.includes(t.stroke?.style)?t.stroke?.style:"solid"};t.stroke?.marker&&(d.marker=t.stroke.marker),this.sections={marker:{backgroundStyle:"light",optional:!1,enabled:!1,open:r?.open||!1,symbolsOpen:r&&(!("symbolsOpen"in r)||r.symbolsOpen)||!1,sizeOpen:r&&(!("sizeOpen"in r)||r.sizeOpen)||!1,rotationOpen:r&&(!("rotationOpen"in r)||r.rotationOpen)||!1,keepChoice:r?.keepChoice||!1,parts:{...a.i,...r?.parts}},fill:{activeCategory:"all",open:s?.open||!1,optional:s?.optional||!1,enabled:m&&(t.fillEnabled??!0)&&!(0,n.i)(e)&&"color"===s?.type&&!!this.toColorPickerValue(t.fill?.color),type:s?.type,style:s?.style,suggestedColorsOpen:s?.suggestedColorsOpen||!1,customColorOpen:s?.customColorOpen||!1,colorRampsOpen:s?.colorRampsOpen||!1,colorRamps:J(s,t.fill),transparencyOpen:s?.transparencyOpen||!1,parts:{...a.g,...a.e,...s?.parts}},stroke:{activeCategory:"all",optional:c?.optional||!1,open:c?.open||!1,enabled:p&&(t.strokeEnabled??!0)&&!(0,n.i)(e)&&"color"===c?.type&&!!this.toColorPickerValue(t.stroke?.color),type:c?.type,style:c?.style,suggestedColorsOpen:c?.suggestedColorsOpen||!1,customColorOpen:c?.customColorOpen||!1,colorRampsOpen:c?.colorRampsOpen||!1,colorRamps:J(c,t.stroke),transparencyOpen:c?.transparencyOpen||!1,extraOpen:c?.extraOpen||!1,extraParts:{...a.h,...c?.extraParts},parts:{...a.g,...a.e,...a.d,...c?.parts}}},this.marker={...t.marker,size:t.marker?.size?E(t.marker.size,0):0,angle:V(e),autoAdjusted:t.marker?.autoAdjusted||!1,symbol:e},this.fill={...t.fill},this.stroke=d,this.activeSymbol=e,this.activeSourceId=r?.keepChoice?this.activeSourceId:void 0,this.activeSymbolItem=r?.keepChoice?this.activeSymbolItem:void 0,this.stylerProps=t,(0,n.i)(e)&&(this.isFillColorRamp()||this.isStrokeColorRamp())&&this.syncSymbolProps(e,{cimChangeContext:"root"}),(0,n.i)(e)&&(this.cimStrokeWidthBounds=L()),this.setInternalSymbol(e,!1),this.preppingEdit=!1}async setSize(e,t){"stroke"===e&&this.setStrokeWidth(j((0,c.p)(t)),!1),"marker"===e&&this.setSymbolSize(j((0,c.p)(t)),!1)}connectedCallback(){super.connectedCallback(),this.resizeObserver.observe(this.el),this.windowResizeObserver.observe(document.body)}async load(){this.elementDir=this._direction;const e=new Intl.NumberFormat(C.getLocale(),{style:"percent"}).format(0);this.percentLabelFlip="rtl"===this.elementDir?e.endsWith("%"):e.startsWith("%"),this.mergedStrings={...this.builtInStrings,...this.stringOverrides}}shouldUpdate(e){return[...e.entries()].some(([e])=>{const t=this[e];return"preppingEdit"!==e||!t})}willUpdate(e){(e.has("builtInStrings")||e.has("stringOverrides"))&&(this.mergedStrings={...this.builtInStrings,...this.stringOverrides})}updated(){if(this.autoOpenFirstBlock&&!this.preppingEdit){const e=this.el.shadowRoot?.querySelector("calcite-block");e&&(this.autoOpenFirstBlock=!1,this.manualBlockOpen=!0,e.expanded=!0)}}disconnectedCallback(){super.disconnectedCallback(),this.resizeObserver.disconnect(),this.windowResizeObserver.disconnect()}onPanelBack(e){e.stopPropagation()}async checkLineOnlySymbol(e,t){return z(e)?(e=new s.default,t.fill?.color&&(Array.isArray(t.fill.color)?e.color=t.fill.color[t.fill.color.length-1]:e.color=t.fill.color),t.stroke?.color&&(t.stroke.color=e.outline.color.clone()),(t.stroke?.size||0===t.stroke?.size)&&(t.stroke.size=e.outline.width),t.marker?.size&&(e.size=t.marker.size),this.marker={...t.marker,size:t.marker?.size?E(t.marker.size,0):0,angle:V(e),autoAdjusted:t.marker?.autoAdjusted||!1,symbol:e},this.emitEdit(e),await Promise.resolve(e)):await Promise.resolve(e)}setRampInputRef(e){this.rampInputEl=e}setColorInputRef(e){e&&this.colorInputEl?.push(e)}getLinePatternStyle(e){return{backgroundImage:`url(${(0,i.g)(`./assets/map-config-symbol-styler/line-patterns/${e}.png`)})`}}getSelectedArrowPatternStyle(){return{backgroundImage:`url(${(0,i.g)("./assets/map-config-symbol-styler/arrow-pattern-spritesheet.png")})`}}getArrowPatternOptionStyle(){return{backgroundImage:`url(${(0,i.g)("./assets/map-config-symbol-styler/arrow-pattern-options-spritesheet.png")})`}}hasActiveLineOnlySimpleMarkerSymbol(){const{marker:e,symbol:t}=this;return!!e&&z(t)}hasActivePictureMarkerSymbol(){return"picture-marker"===this.symbol?.type||"picture-marker"===this.activeSymbol?.type}onColorRampFillTransparencyChange(e){const t=(0,h.t)(e),o={color:this.fill.color?.map(e=>(0,a.c)({...e,a:t}))};this.fill=o,this.arcgisFillChange.emit(o),this.setInternalSymbol(this.syncSymbolProps(this.symbol,{cimChangeContext:"root"}),!0)}onColorFillTransparencyChange(e){const t=(0,h.t)(e),{fill:o}=this,i={color:(0,a.c)({...o?.color,a:t})};this.fill=i,this.arcgisFillChange.emit(i),this.setInternalSymbol(this.syncSymbolProps(this.symbol),!0)}onColorStrokeTransparencyChange(e){const{stroke:t}=this,o=(0,h.t)(e),i={...t,color:(0,a.c)({...t?.color,a:o})};this.stroke=i,this.arcgisStrokeChange.emit(O(i)),this.setInternalSymbol(this.syncSymbolProps(this.symbol),!0)}onColorRampStrokeTransparencyChange(e){const t=(0,h.t)(e),o=this.stroke,i={...o,color:o.color?.map(e=>(0,a.c)({...e,a:t}))};this.stroke=i,this.arcgisStrokeChange.emit(O(i)),this.setInternalSymbol(this.syncSymbolProps(this.symbol,{cimChangeContext:"root"}),!0)}onStrokeStyleChange(e){const t=e.currentTarget.selectedItems[0].getAttribute("data-style"),{stroke:o}=this,i={...o,style:t};this.stroke=i,this.arcgisStrokeChange.emit(O(i)),this.setInternalSymbol(this.syncSymbolProps(this.symbol),!0),e.stopPropagation()}onStrokeArrowChange(e){const t=e.currentTarget.selectedItems[0].getAttribute("data-arrow"),{stroke:o}=this,i={...o,marker:W(t)};this.stroke=i,this.arcgisStrokeChange.emit(O(i)),this.setInternalSymbol(this.syncSymbolProps(this.symbol),!0),e.stopPropagation()}onStrokeWidthChange(e){return this.setStrokeWidth(e)}setStrokeWidth(e,t=!0){const{stroke:o}=this,i={...o,size:e<0?0:j(e)};this.stroke=i,t&&this.arcgisStrokeChange.emit(O(i,e)),this.setInternalSymbol(this.syncSymbolProps(this.symbol,{cimChangeContext:"root"}),t)}syncSymbolProps(e,t){const o=t?.symbolState||{marker:this.marker,fill:this.fill,stroke:this.stroke},i=t?.cimChangeContext,r=(0,n.g)(e);return"point"===r?this.syncPointSymbolProps(e,o,i):"line"===r?this.syncLineSymbolProps(e,o,i):this.syncPolygonSymbolProps(e,o,i)}isFillColorRamp(){return"color-ramp"===this.stylerProps?.sections?.fill?.type}isStrokeColorRamp(){return"color-ramp"===this.stylerProps?.sections?.stroke?.type}getSampleFillColorRampColor(){const e=this.sections?.fill,t=this.fill;return this.getSampleColorRampColor(e,t.color)}getSampleStrokeColorRampColor(){const e=this.sections?.stroke,t=this.stroke;return this.getSampleColorRampColor(e,t.color)}getSampleColorRampColor(e,t){const o=t.length;return"2d"===e.style||"discrete"===e.style?t[o-1]:t[Math.floor(o/2)]}syncPointSymbolProps(e,{fill:t,marker:o,stroke:i},r){const{sections:s}=this,l=void 0!==o?.size?B((0,c.a)(o?.size)):0;if((0,n.a)(e)){const o=z(e);o||(this.isFillColorRamp()?e.color=this.getSampleFillColorRampColor():e.color=s?.fill?.enabled&&t?.color?t.color:(0,a.c)(null)),e.outline&&(this.isStrokeColorRamp()?e.outline.color=this.getSampleStrokeColorRampColor():o&&this.isFillColorRamp()?e.outline.color=this.getSampleFillColorRampColor():e.outline.color=s?.stroke?.enabled&&i?.color?i.color:(0,a.c)(null),e.outline.marker=i?.marker,e.outline.style=i?.style,e.outline.width=void 0!==i?.size?B((0,c.a)(i.size)):0),e.size=l}else(0,n.d)(e)&&(e.height=Math.round(e.height/e.width*l*100)/100,e.width=l);const m=o?.angle?Math.abs(o.angle):0;return(0,n.i)(e)?(r&&["root","original-root"].includes(r)?(p.applyCIMSymbolRotation(e,m,!0),p.scaleCIMSymbolTo(e,l)):e.data.symbol.angle=m,this.isFillColorRamp()?p.applyCIMSymbolColor(e,this.getSampleFillColorRampColor(),{layersToColor:"fill"}):this.isStrokeColorRamp()&&p.applyCIMSymbolColor(e,this.getSampleStrokeColorRampColor(),{layersToColor:"outline"})):e.angle=m,e}syncLineSymbolProps(e,{stroke:t},o){const{sections:i}=this,r=void 0!==t?.size?B((0,c.a)(t?.size)):0;return(0,n.c)(e)?(this.isStrokeColorRamp()?e.color=this.getSampleStrokeColorRampColor():e.color=i?.stroke?.enabled&&t?.color?t.color:(0,a.c)(null),"original-root"!==o&&(e.marker=t?.marker,e.style=t?.style,e.width=r)):(0,n.i)(e)&&("root"===o&&p.scaleCIMSymbolTo(e,r),this.isStrokeColorRamp()&&p.applyCIMSymbolColor(e,this.getSampleStrokeColorRampColor())),e}syncPolygonSymbolProps(e,{fill:t,stroke:o},i){const{sections:r}=this,s=void 0!==o?.size?B((0,c.a)(o?.size)):0;return(0,n.b)(e)?(this.isFillColorRamp()?e.color=this.getSampleFillColorRampColor():e.color=r?.fill?.enabled&&t?.color?t.color:(0,a.c)(null),this.isStrokeColorRamp()?e.outline.color=this.getSampleStrokeColorRampColor():e.outline.color=r?.stroke?.enabled&&o?.color?o.color:(0,a.c)(null),"original-root"!==i&&(e.outline.width=s,e.outline.style=o?.style)):(0,n.i)(e)&&(this.isFillColorRamp()?p.applyCIMSymbolColor(e,this.getSampleFillColorRampColor(),{layersToColor:"fill"}):this.isStrokeColorRamp()&&p.applyCIMSymbolColor(e,this.getSampleStrokeColorRampColor(),{layersToColor:"outline"}),"root"===i&&((0,n.e)(e)?function(e,t){e.data.symbol?.symbolLayers?.forEach(e=>{["CIMSolidStroke","CIMPictureStroke"].includes(e.type)&&(e.width=t)})}(e,s):p.scaleCIMSymbolTo(e,s))),e}onStrokeEnabledChange(e){const{sections:t}=this,o=z(this.activeSymbol);this.sections={...t,stroke:{...t?.stroke,enabled:!!o||e}},!o&&(this.arcgisStrokeEnabledChange.emit({enabled:e,stroke:O(this.stroke)}),this.setInternalSymbol(this.syncSymbolProps(this.symbol),!0))}onFillEnabledChange(e){const{fill:t,sections:o}=this,i=z(this.activeSymbol);this.sections={...o,fill:{...o?.fill,enabled:!i&&e}},!i&&(this.arcgisFillEnabledChange.emit({enabled:e,fill:t}),this.setInternalSymbol(this.syncSymbolProps(this.symbol),!0))}onSymbolSizeChange(e){return this.setSymbolSize(e)}onSymbolRotationChange(e){const{marker:t,fill:o,stroke:i}=this,r={...t,angle:e,symbol:this.syncSymbolProps(this.symbol,{cimChangeContext:"root",symbolState:{marker:{...t,angle:e},fill:o,stroke:i}})};this.marker=r,this.setInternalSymbol(r.symbol,!0),this.arcgisMarkerChange.emit(O(r))}handleAngleAlignmentChange(e){const{symbol:t}=this;t.data.symbol.angleAlignment=e,this.setInternalSymbol(t,!0)}setSymbolSize(e,t=!0){const{marker:o,fill:i,stroke:r,symbol:s}=this,l={...o,symbol:this.syncSymbolProps(s,{cimChangeContext:"root",symbolState:{marker:{...o,size:e},fill:i,stroke:r}}),size:e};this.marker=l,this.setInternalSymbol(l.symbol,t),t&&this.arcgisMarkerChange.emit(O(l,e))}onSymbolSelect(e){const{fill:t,marker:o,sections:i,stroke:r}=this,s="picture-marker"===this.activeSymbol?.type&&"simple-marker"===e.type,l=z(this.activeSymbol),a=z(e),c=l&&!a,m=!l&&a;this.autoOpenFirstBlock=!0;const d=F(e),h=T(e),y={},g=(0,n.i)(this.activeSymbol)&&!(0,n.i)(e);if(g){if((0,n.a)(e)||(0,n.b)(e)){if(d&&"color"===i?.fill?.type&&(y.fill={...t,color:e.color.clone()}),h&&"color"===i?.stroke?.type){const t=e.outline.color.clone();m&&(t.a=1),y.stroke={...r,color:t},(0,n.b)(e)&&(y.stroke.size=e.outline.width,y.stroke.style=e.outline.style)}}else if((0,n.c)(e)&&h&&"color"===i?.stroke?.type){const t=e;y.stroke={...r,size:t.width,color:t.color.clone()}}}else if((0,n.i)(e)){const o=p.getCIMSymbolColor(e);"color"===i?.fill?.type&&(y.fill={...t,color:o}),y.stroke={...r},"line"===this.editGeometry&&(y.stroke.size=B(p.getCIMSymbolSize(e))),"color"===i?.stroke?.type&&(y.stroke.color=o),this.cimStrokeWidthBounds=L()}else if("color-ramp"===i?.fill?.type&&"color"===i?.stroke?.type)a?(this.tempStrokeColorRampStateActiveCategory=i.fill.activeCategory,this.tempStrokeColorRampStateStops=t?.color,this.tempStrokePreviousColorBeforeColorRampSwitch=r?.color,y.stroke={...r,color:this.tempStrokeColorRampStateStops}):c&&(y.fill={...t,color:this.tempStrokeColorRampStateStops},y.stroke={...r,color:this.tempStrokePreviousColorBeforeColorRampSwitch},this.tempStrokeColorRampStateActiveCategory=void 0,this.tempStrokeColorRampStateStops=void 0);else if("color"===i?.fill?.type&&"color-ramp"===i?.stroke?.type){if(m){const e=r?.color?.map(e=>(e.a=1,e));y.stroke={...r,color:e}}}else if("color"===i?.fill?.type&&"color"===i?.stroke?.type&&m){const e=r?.color?.clone();m&&e&&(e.a=1),y.stroke={...r,color:e}}this.sections={...i,fill:{...i?.fill,open:!a&&i?.fill?.open,enabled:d&&(!a||(0,n.i)(e)||c||s||i?.fill?.enabled)},stroke:{...i?.stroke,enabled:h&&((0,n.i)(e)||m||g&&!a||s||i?.stroke?.enabled)}};const b=y.fill||t,u=y.stroke||r,S={...o,symbol:this.syncSymbolProps(e,{cimChangeContext:"original-root",symbolState:{marker:o,fill:b,stroke:u}})};this.fill=b,this.stroke=u,this.marker=S,this.activeSymbol=e,this.setInternalSymbol(S.symbol,!0,!0),this.arcgisMarkerChange.emit(O(S))}async addStyles(){const{portal:e,portalOrInterceptor:t,editGeometry:o,mergedStrings:i}=this;if(document.querySelector("arcgis-map-config-symbol-styler-browse-styles"))return;const r=(0,u.dN)(g.qy`<arcgis-map-config-symbol-styler-browse-styles .editGeometry=${o} .portal=${t?.portal||t||e||l.default.getDefault()} ._messages=${i} .excludeItemIds=${await(this.symbolPickerElement.value?.getStyleItemIds())||[]} @arcgisSymbolStylerBrowseStylesClose=${e=>{r.remove(),e.detail?.length&&(this.activeSourceId=e.detail[0],this.pickerReRenderFlag=!this.pickerReRenderFlag)}}></arcgis-map-config-symbol-styler-browse-styles>`);document.body.appendChild(r)}setInternalSymbol(e,t,o){if(this.symbol=e,"animation"===this.state){let e=this.symbol.data.symbol;if("root-symbol"===this.currentAnimationInfo.symbolLayerKey)this.currentAnimationSymbolLayer=e;else{const t=this.currentAnimationInfo.symbolLayerKey.split("__");for(let o=0;o<t.length;o++)if("symbol-layers"===t[o])e=e.symbolLayers;else if("symbol-layer"===t[o]){const i=t[o+1];e=e[Number.parseInt(i)],o++}"picture-marker"===this.currentAnimationInfo.symbolLayerType?this.currentAnimationSymbolLayer=e:this.currentAnimationSymbolLayer=M(e)}}this.updatePreviewSymbol(),t&&this.emitEdit(e,o)}toColorPickerValue(e,t){if(e&&!(0,a.j)(e)){if(t){const t=(0,h.i)(e.toRgba()[3])?(255*e.toRgba()[3]).toString(16).padStart(2,"0"):"";return`${e.toHex()}${t}`}return e.toHex()}}getStrokeString(e){return this.mergedStrings["line"===this.editGeometry?e:`stroke${t=e,t.charAt(0).toUpperCase()+t.slice(1)}`];var t}isSupportedSymbolLayerType(e){return"CIMVectorMarker"===e||"CIMSolidFill"===e||"CIMSolidStroke"===e||"CIMHatchFill"===e||"CIMPictureFill"===e||"CIMPictureStroke"===e||"CIMPictureMarker"===e||"CIMGradientFill"===e||"CIMGradientStroke"===e}getSymbolLayerPreviewSymbol(e,t){const o={data:{type:"CIMSymbolReference",symbol:{type:"point"===t?"CIMPointSymbol":"line"===t?"CIMLineSymbol":"CIMPolygonSymbol",symbolLayers:[e]}}};return"CIMVectorMarker"===e.type&&((o.data?.symbol).angle=e.rotation??0),new f.default(o)}setMarkerSymbolLayerSize(e,t){(0,n.f)(this.activeSymbol)?(e.data.symbol?.symbolLayers?.[0]).size=B((0,c.a)(t)):p.scaleCIMSymbolTo(e,B((0,c.a)(t)))}sanitizePointPreviewSymbolLayer(e){return{...e,markerPlacement:void 0}}onBlockToggle(e){this.manualBlockOpen?this.manualBlockOpen=!1:(e.currentTarget.expanded,this.rampInputEl?.close(),this.colorInputEl?.forEach(async e=>await(e?.close())))}showingRampOptionsInStroke(){const e=this.stylerProps?.sections?.stroke,t=z(this.activeSymbol),o=this.sections?.fill?.type;return t&&"color-ramp"===o&&"color"===e.type}flowRefHandler(e){this.flowEl=e,queueMicrotask(()=>this.checkPopoverMaxHeight())}checkPopoverMaxHeight(){if(this.flowEl&&this.popoverProps&&(!this.popoverProps.maxHeight||this.autoCalcHeight)){this.autoCalcHeight=!0;const e=this.flowEl.getBoundingClientRect(),t=window.innerHeight||document.documentElement?.clientHeight||document.body?.clientHeight||0,o=t&&e?.top?t-e.top-30:0;this.popoverProps.maxHeight=Math.max(o||e.height,250)-(this.popoverProps.offsetDistance??0)-5+"px"}}getAnimationBlockHeadingInfo(e){const{mergedStrings:t}=this;switch(e){case"CIMSymbolAnimationColor":return{heading:t.animations.color,icon:"styling"};case"CIMSymbolAnimationOffset":return{heading:t.animations.offset,icon:"relative-direction"};case"CIMSymbolAnimationRotation":return{heading:t.animations.rotation,icon:"rotate"};case"CIMSymbolAnimationScale":return{heading:t.animations.scale,icon:"stretch"};case"CIMSymbolAnimationSize":return{heading:t.animations.size,icon:"dimensions-unit"};case"CIMSymbolAnimationTransparency":return{heading:t.animations.transparency,icon:"transparency"};default:return{heading:t.animation,icon:"play"}}}waitOnUser(e,t,o){const i=e.target;this.typingHandle&&(clearTimeout(this.typingHandle),this.typingHandle=void 0);const r=i.value,s=Number.parseFloat(r);r?(0,h.i)(i.min)&&(0,h.i)(i.max)&&(i.min>s||i.max<s)?this.typingHandle=setTimeout(()=>{this.typingHandle=void 0,i.min>s?(i.value=`${i.min}`,t(i)):i.max<s&&(i.value=`${i.max}`,t(i))},750):(!r.startsWith("-")||0!==s&&!Number.isNaN(s))&&t(i):this.typingHandle=setTimeout(()=>{this.typingHandle=void 0,i.value=`${o}`,t(i)},2e3)}render(){if(this.preppingEdit)return"";const{sections:e}=this.stylerProps,t=(0,n.i)(this.activeSymbol);return g.qy`<calcite-flow ${(0,b.K)(this.flowRefHandler)}><calcite-flow-item .selected=${"editing"===this.state}><div class="content">${[!1!==e?.marker?.parts?.rotation||!1!==e?.marker?.parts?.preview||!1!==e?.marker?.parts?.size||!1!==e?.marker?.parts?.alignment||!1!==e?.marker?.parts?.baseWidth||"minimal"===this.mode||this.config.displaySymbolsSelectionOnly?this.renderSymbolBlock():null,t||!e?.fill||this.config.displaySymbolsSelectionOnly?null:this.renderFillBlock(),t||!e?.stroke||this.config.displaySymbolsSelectionOnly?null:this.renderStrokeBlock()]}</div></calcite-flow-item>${"choosing-symbol"===this.state?this.renderSymbolSelectionPanel():""}${"animation"===this.state?this.renderAnimationPanel():""}</calcite-flow>`}renderSymbolBlock(){const{marker:e,stroke:t}=this.sections,{parts:o}=e,{editGeometry:i,symbol:r}=this,s=(0,n.i)(r),l=[];if((o.preview||this.config.displaySymbolsSelectionOnly)&&l.push({content:this.renderSymbolsSelection()}),this.config.displaySymbolsSelectionOnly)return this.renderSection({key:"marker-symbols",sectionContent:l});if(s&&(this.isFillColorRamp()?l.push({content:this.renderColorRampFillBlock(!0)}):this.isStrokeColorRamp()&&l.push({content:this.renderColorRampStrokeBlock(!0)})),"minimal"===this.mode&&(o.color&&l.push({content:this.renderRootCIMSymbolColorContent()}),o.transparency&&l.push({content:this.renderRootCIMSymbolTransparencyContent()})),"point"===i){if(o.size&&l.push({content:s?this.renderRootCIMSymbolSizeContent():this.renderSymbolSizeContent()}),o.rotation&&l.push({content:this.renderSymbolRotationContent()}),o.alignment&&s){const e=r.data.symbol;l.push({content:this.renderAngleAlignmentContent(e.angleAlignment??"Display")})}if(o.baseWidth&&s){const e=r.data.symbol;l.push({content:this.renderBaseWidthContent(e)})}}else s&&t?.extraParts?.width&&(!(0,n.e)(r)||(0,n.e)(r)&&(a=r,a.data.symbol?.symbolLayers?.find(({type:e})=>["CIMSolidStroke","CIMPictureStroke"].includes(e))))&&l.push({content:this.renderRootCIMSymbolWidthContent()});var a;if(s){const e=r.data.symbol;"CIMPointSymbol"===e.type&&e.animations&&l.push({content:this.renderCIMAnimationEntryPoint(e,"root-symbol","point")}),l.push({content:this.renderRootCIMSymbolContent(r)})}return l.length?this.renderSection({key:"marker-symbols",sectionContent:l}):""}renderRootCIMSymbolContent(e){const t=this.renderCIMSymbolLayersContent(e.data.symbol,"root-symbol");return t.length>a.k?[...t.slice(0,a.k),g.qy`<div class=${(0,u.CP)(a.C.message)}>${this.mergedStrings.additionalSymbolLayersNotShown.replace("${count}",a.k.toString())}</div>`]:t}renderCIMSymbolLayersContent({symbolLayers:e},t,o=!1,i){return e.filter(({type:e})=>this.isSupportedSymbolLayerType(e)).map((e,r)=>{const s=`${t}__symbol-layers__symbol-layer__${r.toString()}`;return"CIMVectorMarker"===e.type?this.renderCIMVectorMarkerSymbolLayerBlocks(e,s):"CIMPictureMarker"===e.type?this.renderCIMPictureMarkerSymbolLayerBlock(e,s,o):"CIMSolidStroke"===e.type?this.renderCIMSolidStrokeSymbolLayerBlock(e,s,o,i):"CIMPictureStroke"===e.type?this.renderCIMPictureStrokeSymbolLayerBlock(e,s,o):"CIMGradientStroke"===e.type?this.renderCIMGradientSymbolLayerBlock(e,s,o,"stroke"):"CIMSolidFill"===e.type?this.renderCIMSolidFillSymbolLayerBlock(e,s,o):"CIMHatchFill"===e.type?this.renderCIMHatchFillSymbolLayerBlocks(e,s):"CIMPictureFill"===e.type?this.renderCIMPictureFillSymbolLayerBlock(e,s,o):"CIMGradientFill"===e.type?this.renderCIMGradientSymbolLayerBlock(e,s,o,"fill"):""}).filter(Boolean).flat()}renderSymbolsSelection(){const e=this.previewSymbol,t=e?v.getContrastingBackgroundTheme(e,245):"light",o="rtl"===this._direction,i=1===this.filteredSources?.length&&1===this.activeSymbolItems?.length;return g.qy`<calcite-label style=${(0,u.zl)({"--symbol-styler-inline-input-trigger-background-color":"dark"===t?"#f3f3f3":""})}>${this.mergedStrings.currentSymbol}<button class=${(0,u.CP)(a.C.changeSymbolTrigger)} .disabled=${i} @click=${()=>this.state="choosing-symbol"} type=button><div class=${(0,u.CP)(a.C.container)} tabindex=0><div class=${(0,u.CP)(a.C.symbol)}><arcgis-map-config-symbol-styler-symbol-preview .symbol=${e} .options=${"point"===this.editGeometry?a.p:"line"===this.editGeometry?a.l:void 0}></arcgis-map-config-symbol-styler-symbol-preview></div><div class=${(0,u.CP)(a.C.label)}>${function(e,t){if(e){if("picture-marker"===e.type||"simple-marker"===e.type)return t.basicPoint;if("simple-line"===e.type)return t.basicLine;if("simple-fill"===e.type)return t.basicPolygon;if("CIMPointSymbol"===e.data.symbol?.type)return t.vectorPoint;if("CIMLineSymbol"===e.data.symbol?.type)return t.vectorLine;if("CIMPolygonSymbol"===e.data.symbol?.type)return t.vectorPolygon;throw new Error("unsupported symbol provided")}}(e,this.mergedStrings)}</div></div><calcite-icon .icon=${i?void 0:"chevron-"+(o?"left":"right")} scale=s></calcite-icon></button></calcite-label>`}renderAnimationPanel(){const{mergedStrings:e,currentAnimationSymbolLayer:t}=this,o=t,i="CIMPictureMarker"===o.type?o.animations??[{animatedSymbolProperties:o.animatedSymbolProperties,type:"default"}]:o.animations;return g.qy`<calcite-flow-item class="animation-panel" .heading=${e.animation} .selected=${"animation"===this.state} .beforeBack=${async()=>{this.state="editing"}}>${i.map((t,o)=>{const i=this.getAnimationBlockHeadingInfo(t.type),r=t.animatedSymbolProperties;return g.qy`<calcite-block .iconStart=${i.icon} class="animation-block" .heading=${i.heading} collapsible .expanded=${0===o}>${this.renderAnimationSpecificProperty(t)}<div class="animation-checkbox-container"><calcite-checkbox .checked=${r.playAnimation} @calciteCheckboxChange=${e=>{const{checked:t}=e.currentTarget;r.playAnimation=t,this.setInternalSymbol(this.symbol,!0)}}></calcite-checkbox><div class="animation-checkbox-container-text">${e.playAnimation}</div></div><div class="animation-checkbox-container"><calcite-checkbox .checked=${r.reverseAnimation} @calciteCheckboxChange=${e=>{const{checked:t}=e.currentTarget;r.reverseAnimation=t,this.setInternalSymbol(this.symbol,!0)}}></calcite-checkbox><div class="animation-checkbox-container-text">${e.reverseAnimation}</div></div><calcite-label>${e.startTimeOffset}<calcite-segmented-control @calciteSegmentedControlChange=${e=>{const t=e.currentTarget.value;r.randomizeStartTime="random"===t,this.setInternalSymbol(this.symbol,!0)}}><calcite-segmented-control-item value=random .checked=${r.randomizeStartTime}>${e.randomized}</calcite-segmented-control-item><calcite-segmented-control-item value=manual .checked=${!r.randomizeStartTime}>${e.manualOffset}</calcite-segmented-control-item></calcite-segmented-control></calcite-label><calcite-label>${e.manualOffset}<arcgis-slider-input .disabled=${r.randomizeStartTime} .max=${a.n} .min=${a.o} @arcgisValueChange=${e=>{const t=e.detail;r.startTimeOffset=t,this.setInternalSymbol(this.symbol,!0)}} step=1 .value=${r.startTimeOffset??0} .withSteppers=${!this.narrow} .label=${e.manualOffset}></arcgis-slider-input></calcite-label><calcite-label>${e.duration}<arcgis-slider-input .max=${a.n} .min=${a.o} @arcgisValueChange=${e=>{const t=e.detail;r.duration=t,this.setInternalSymbol(this.symbol,!0)}} step=1 .value=${r.duration??0} .withSteppers=${!this.narrow} .label=${e.duration}></arcgis-slider-input></calcite-label><calcite-label>${e.repeatType}<calcite-segmented-control @calciteSegmentedControlChange=${e=>{const t=e.currentTarget.value;r.repeatType=t,this.setInternalSymbol(this.symbol,!0)}}><calcite-segmented-control-item value=None .checked=${"None"===r.repeatType}>${e.none}</calcite-segmented-control-item><calcite-segmented-control-item value=Loop .checked=${"Loop"===r.repeatType}>${e.loop}</calcite-segmented-control-item><calcite-segmented-control-item value=Oscillate .checked=${"Oscillate"===r.repeatType}>${e.oscillate}</calcite-segmented-control-item></calcite-segmented-control></calcite-label><calcite-label>${e.repeatDelay}<arcgis-slider-input .max=${a.n} .min=${a.o} @arcgisValueChange=${e=>{const t=e.detail;r.repeatDelay=t,this.setInternalSymbol(this.symbol,!0)}} step=1 .value=${r.repeatDelay??0} .withSteppers=${!this.narrow} .label=${e.repeatDelay}></arcgis-slider-input></calcite-label>${r.easing?g.qy`<calcite-label>${e.animations.easingType}</calcite-label><calcite-combobox selection-mode=single-persist clear-disabled .label=${e.animations.easingType} @calciteComboboxChange=${e=>{const t=e.currentTarget.value;r.easing=t,this.setInternalSymbol(this.symbol,!0)}}><calcite-combobox-item value=Linear .heading=${e.animations.linear} .selected=${"Linear"===r.easing}></calcite-combobox-item><calcite-combobox-item value=EaseIn .heading=${e.animations.easeIn} .selected=${"EaseIn"===r.easing}></calcite-combobox-item><calcite-combobox-item value=EaseOut .heading=${e.animations.easeOut} .selected=${"EaseOut"===r.easing}></calcite-combobox-item><calcite-combobox-item value=EaseInOut .heading=${e.animations.easeInOut} .selected=${"EaseInOut"===r.easing}></calcite-combobox-item></calcite-combobox>`:""}</calcite-block>`})}<calcite-button width=full slot=footer @click=${async()=>await(this.flowEl?.back())}>${e.done}</calcite-button></calcite-flow-item>`}renderAnimationSpecificProperty(e){const{mergedStrings:t}=this;switch(e.type){case"CIMSymbolAnimationColor":{const o=new m.default(e.toColor),i={...this.popoverProps,offsetDistance:(this.popoverProps?.offsetDistance??10)+50};return g.qy`<calcite-label>${t.animations.toColor}</calcite-label><arcgis-color-input .color=${this.toColorPickerValue(o)} @arcgisChange=${t=>{const o=t.currentTarget.color,i=(0,a.c)(o),r=new m.default(i).toRgb();e.toColor=[...r,255],this.setInternalSymbol(this.symbol,!0)}} .popoverProps=${i} .storageId=${a.q} ${(0,b.K)(this.setColorInputRef)}></arcgis-color-input>`}case"CIMSymbolAnimationSize":return g.qy`<calcite-label>${t.animations.size}<arcgis-slider-input min=1 max=150 step=1 .unitsLabel=${t.px} .value=${j((0,c.p)(e.toSize))} @arcgisValueChange=${t=>{const o=(0,c.a)(t.detail);e.toSize=o,this.setInternalSymbol(this.symbol,!0)}} .withSteppers=${!this.narrow} .label=${t.animations.size}></arcgis-slider-input></calcite-label>`;case"CIMSymbolAnimationRotation":return g.qy`<div class="animation-checkbox-container"><calcite-checkbox .checked=${!!e.rotateClockwise} @calciteCheckboxChange=${t=>{const{checked:o}=t.currentTarget;e.rotateClockwise=o,e.toRotation&&(e.toRotation=360-e.toRotation),this.setInternalSymbol(this.symbol,!0)}}></calcite-checkbox><div class="animation-checkbox-container-text">${t.animations.rotateClockwise}</div></div><calcite-label>${t.rotation}<arcgis-slider-input min=0 max=360 step=1 units-label=\u00BA .flipLabels=${"rtl"===this.elementDir} .value=${e.toRotation?e.rotateClockwise?360-e.toRotation:e.toRotation:0} @arcgisValueChange=${t=>{const o=e.rotateClockwise?360-t.detail:t.detail;e.toRotation=o,this.setInternalSymbol(this.symbol,!0)}} .withSteppers=${!this.narrow} .label=${t.rotation}></arcgis-slider-input></calcite-label>`;case"CIMSymbolAnimationOffset":return g.qy`<calcite-label>${t.animations.offset}</calcite-label><div class="offset-div"><arcgis-map-config-xy-slider .x=${Math.round((0,c.p)(e.offsetX))} .y=${-Math.round((0,c.p)(e.offsetY))} min-x=-20 min-y=-20 max-x=20 max-y=20 step=1 snappable @arcgisInput=${t=>{t.stopPropagation();const o=t.currentTarget;e.offsetX=(0,c.a)(o.x),e.offsetY=-(0,c.a)(o.y),this.setInternalSymbol(this.symbol,!0)}}></arcgis-map-config-xy-slider><div><calcite-label scale=s>${t.animations.xOffset}<calcite-input-number scale=s .placeholder=${t.animations.xOffset} .value=${`${Math.round((0,c.p)(e.offsetX))}`} inputmode=decimal min=-20 max=20 @calciteInputNumberInput=${t=>{const o=t.currentTarget;this.waitOnUser(t,()=>{e.offsetX=(0,c.a)(Number.parseInt(o.value)),this.setInternalSymbol(this.symbol,!0)},0)}}></calcite-input-number></calcite-label><calcite-label scale=s>${t.animations.yOffset}<calcite-input-number scale=s .placeholder=${t.animations.yOffset} .value=${`${Math.round((0,c.p)(e.offsetY))}`} inputmode=decimal min=-20 max=20 @calciteInputNumberInput=${t=>{const o=t.currentTarget;this.waitOnUser(t,()=>{e.offsetY=(0,c.a)(Number.parseInt(o.value)),this.setInternalSymbol(this.symbol,!0)},0)}}></calcite-input-number></calcite-label></div></div>`;case"CIMSymbolAnimationScale":return g.qy`<div class="scale-animation-wrapper"><calcite-label>${t.animations.scaleFactor}</calcite-label><calcite-slider min=0 max=3.5 step=0.01 .minLabel=${t.animations.small} .maxLabel=${t.animations.large} .value=${e.scaleFactor} @calciteSliderInput=${t=>{const o=t.target.value;e.scaleFactor=o,this.setInternalSymbol(this.symbol,!0)}}></calcite-slider><div class="scale-animation-slider-labels" aria-hidden=true><calcite-label>${t.animations.small}</calcite-label><calcite-label>${t.animations.large}</calcite-label></div></div>`;case"CIMSymbolAnimationTransparency":return g.qy`<calcite-label>${t.transparency}<arcgis-slider-input .flipLabels=${this.percentLabelFlip} min=0 max=100 step=1 units-label=% .value=${Math.round(e.toTransparency)} @arcgisValueChange=${t=>{e.toTransparency=t.detail,this.setInternalSymbol(this.symbol,!0)}} .withSteppers=${!this.narrow} .label=${t.transparency}></arcgis-slider-input></calcite-label>`;default:return""}}renderSymbolSelectionPanel(){const{mergedStrings:e}=this,t=!this.config.hideAddStyles&&window.customElements?.get("arcgis-item-browser");return g.qy`<calcite-flow-item class="symbol-selection-panel" .heading=${e.changeSymbol} .selected=${"choosing-symbol"===this.state} .beforeBack=${async()=>{this.state="editing"}}>${t&&g.qy`<calcite-action slot=header-actions-end .text=${e.addStyles} icon=plus @click=${async()=>await this.addStyles()}><calcite-tooltip slot=tooltip>${e.addStyles}</calcite-tooltip></calcite-action>`||""}${(0,r.D)(`${this.pickerReRenderFlag}`,g.qy`<arcgis-map-config-symbol-picker .hideSvgUploadSymbols=${this.config.hideSvgUploadSymbols} .hideClassicSymbols=${this.config.hideClassicSymbols} @arcgisActiveSymbolChange=${e=>{const{detail:t}=e;this.onSymbolSelect(t),e.stopPropagation()}} @arcgisActiveSourceIdChange=${({detail:e})=>{this.activeSourceId=e,this.arcgisSourceIdChange.emit(e)}} @arcgisActiveSymbolItemChange=${({detail:e})=>{this.activeSymbolItem=e}} @arcgisSymbolSourcesChange=${({detail:e})=>this.filteredSources=e} @arcgisActiveSourceItemsChange=${({detail:e})=>this.activeSymbolItems=e} .activeSymbolItem=${this.activeSymbolItem} .activeSourceId=${this.activeSourceId||this.initialSourceId} .portal=${this.portalOrInterceptor} style=${(0,u.zl)({"--scroller-max-height":"var(--symbol-scroller-max-height)"})} .symbolFilter=${this.symbolFilter} .symbol=${this.activeSymbol} ${(0,b.K)(this.symbolPickerElement)}></arcgis-map-config-symbol-picker>`)}<calcite-button width=full slot=footer @click=${async()=>await(this.flowEl?.back())}>${e.done}</calcite-button></calcite-flow-item>`}renderRootCIMSymbolColorContent(){const e=p.getCIMSymbolColor(this.symbol);return(0,h.i)(e)?g.qy`<calcite-label>${this.mergedStrings.color}</calcite-label><arcgis-color-input .color=${this.toColorPickerValue(e)} clearable @arcgisChange=${t=>{const o=t.currentTarget.color,i=(0,a.c)(o);!(0,a.j)(i)&&!(0,a.j)(e)&&(i.a=e.a),p.applyCIMSymbolColor(this.symbol,i),this.setInternalSymbol(this.syncSymbolProps(this.symbol.clone(),{cimChangeContext:"point"===this.editGeometry?"root":"original-root"}),!0),t.stopPropagation()}} .popoverProps=${this.popoverProps} .storageId=${a.q} ${(0,b.K)(this.setColorInputRef)}></arcgis-color-input>`:""}renderRootCIMSymbolTransparencyContent(){const e=p.getCIMSymbolColor(this.symbol);return(0,h.i)(e)?g.qy`<calcite-label>${this.mergedStrings.transparency}<arcgis-slider-input .flipLabels=${this.percentLabelFlip} min=0 max=100 step=1 units-label=% .value=${Math.round((0,h.m)(e.a??1))} @arcgisValueChange=${t=>{const o=t.detail,i=(0,h.t)(o);e.a=i,p.applyCIMSymbolColor(this.symbol,e),this.setInternalSymbol(this.syncSymbolProps(this.symbol.clone(),{cimChangeContext:"point"===this.editGeometry?"root":"original-root"}),!0),t.stopPropagation()}} .withSteppers=${!this.narrow} .label=${this.mergedStrings.transparency}></arcgis-slider-input></calcite-label>`:""}renderRootCIMSymbolSizeContent(){const{sections:e,marker:t}=this,o=e?.marker?.parts?.size,i="object"==typeof o&&o?.autoSizeAdjust,r=p.getCIMSymbolSize(this.symbol);return g.qy`<div class=${(0,u.CP)(a.C.contentGroup)}><calcite-label>${this.mergedStrings.symbolSize}<arcgis-slider-input .disabled=${i&&"editable"!==i&&t?.autoAdjusted} .min=${1} .max=${150} step=1 .unitsLabel=${this.mergedStrings.px} .value=${j((0,c.p)(r))} @arcgisValueChange=${e=>this.onSymbolSizeChange(e.detail)} .withSteppers=${!this.narrow} .label=${this.mergedStrings.symbolSize}></arcgis-slider-input></calcite-label>${i?this.renderAutoAdjust(this.marker?.autoAdjusted||!1,this.mergedStrings.autoAdjustSize,this.onAutoAdjustSizeChange):null}</div>`}renderRootCIMSymbolWidthContent(){const e=this.symbol,{sections:t,stroke:o}=this,i=t?.stroke?.extraParts?.autoStrokeAdjust,r=(0,n.e)(e)?(s=e,(s.data.symbol?.symbolLayers?.find(e=>["CIMSolidStroke","CIMPictureStroke"].includes(e.type))).width??0):p.getCIMSymbolSize(this.symbol);var s;let l=this.getStrokeString("width"),m=this.cimStrokeWidthBounds?.min,d=this.cimStrokeWidthBounds?.max;return(0,n.h)(e)&&e?.data?.symbol?.symbolLayers?.some(e=>["CIMVectorMarker","CIMPictureMarker"].includes(e.type))&&(l=this.mergedStrings.symbolSize,m=a.u,d=a.v),g.qy`<div class=${(0,u.CP)(a.C.contentGroup)}><calcite-label>${l}<arcgis-slider-input .disabled=${i&&"editable"!==i&&o?.autoAdjusted} .min=${m} .max=${d} step=1 .unitsLabel=${this.mergedStrings.px} .value=${j((0,c.p)(r))} @arcgisValueChange=${e=>this.onStrokeWidthChange(e.detail)} .withSteppers=${!this.narrow} .label=${l}></arcgis-slider-input></calcite-label>${i?this.renderAutoAdjust(this.stroke?.autoAdjusted||!1,this.mergedStrings.autoAdjustStroke,this.onAutoAdjustStrokeChange):null}</div>`}renderSymbolSizeContent(){const{sections:e,marker:t}=this,o=e?.marker?.parts?.size,i="object"==typeof o&&o?.autoSizeAdjust;return g.qy`<div class=${(0,u.CP)(a.C.contentGroup)}><calcite-label>${this.mergedStrings.symbolSize}<arcgis-slider-input .disabled=${i&&"editable"!==i&&t?.autoAdjusted} .min=${1} .max=${150} step=1 .unitsLabel=${this.mergedStrings.px} .value=${t?.size} @arcgisValueChange=${e=>this.onSymbolSizeChange(e.detail)} .withSteppers=${!this.narrow} .label=${this.mergedStrings.symbolSize}></arcgis-slider-input></calcite-label>${i?this.renderAutoAdjust(t?.autoAdjusted??!1,this.mergedStrings.autoAdjustSize,this.onAutoAdjustSizeChange):null}</div>`}renderAutoAdjust(e,t,o){return g.qy`<calcite-label class=${(0,u.CP)(a.C.autoAdjustLabel)} layout=inline><calcite-checkbox .checked=${e} class=${(0,u.CP)(a.C.autoAdjustCheckbox)} @calciteCheckboxChange=${o}></calcite-checkbox>${t}</calcite-label>`}renderSymbolRotationContent(){const{marker:e,mergedStrings:t}=this;return g.qy`<calcite-label>${t.rotation}<arcgis-slider-input .min=${0} .max=${360} step=1 units-label=\u00BA .flipLabels=${"rtl"===this.elementDir} .value=${e?.angle} @arcgisValueChange=${e=>this.onSymbolRotationChange(e.detail)} .withSteppers=${!this.narrow} .label=${t.rotation}></arcgis-slider-input></calcite-label>`}renderAngleAlignmentContent(e){const{mergedStrings:t}=this;return g.qy`<calcite-label>${t.alignment}<calcite-radio-button-group name=angle-alignment layout=horizontal @calciteRadioButtonGroupChange=${e=>{const t=e.currentTarget.selectedItem.value;this.handleAngleAlignmentChange(t)}}><calcite-label layout=inline><calcite-radio-button value=Display .checked=${"Display"===e}></calcite-radio-button>${t.display}</calcite-label><calcite-label layout=inline><calcite-radio-button value=Map .checked=${"Map"===e}></calcite-radio-button>${t.map}</calcite-label></calcite-radio-button-group></calcite-label>`}renderBaseWidthContent(e){const{mergedStrings:t}=this,o=e.effects?.find(e=>"CIMGeometricEffectTaperedPolygon"===e.type);return g.qy`<calcite-label>${t.baseWidth}<arcgis-slider-input min=1 max=10 step=0.1 .unitsLabel=${t.px} .flipLabels=${this.percentLabelFlip} .value=${o?.fromWidth??10} @arcgisValueChange=${e=>{const t=e.detail;o.fromWidth=t,this.setInternalSymbol(this.symbol,!0)}} .withSteppers=${!this.narrow} .label=${t.baseWidth}></arcgis-slider-input></calcite-label>`}renderFillBlock(){if(!this.stylerProps?.sections)return g.qy`<div>;</div>`;const{sections:e}=this.stylerProps,{fill:t}=e;return"color"===t?.type?this.renderColorFillBlock():this.renderColorRampFillBlock()}renderColorFillBlock(){const e=this.sections?.fill,{parts:t}=e,o=[];return(t.suggestedColors||t.customColor)&&o.push({content:this.renderFillColorContent()}),t.transparency&&o.push({content:g.qy`<arcgis-map-config-symbol-styler-section embedded .disabled=${!e.enabled}>${this.renderColorFillTransparencyContent(this.mergedStrings.fillTransparency,!e.enabled)}</arcgis-map-config-symbol-styler-section>`}),this.renderSection({key:"color-fill",disabled:"non-editable"===e.optional||this.hasActivePictureMarkerSymbol()||this.hasActiveLineOnlySimpleMarkerSymbol(),sectionContent:o})}renderFillColorContent(){const e=this.sections?.fill,t=e?.enabled?this.toColorPickerValue(this.fill?.color):void 0;return g.qy`<calcite-label>${this.mergedStrings.fillColor}</calcite-label><arcgis-color-input .color=${t} .clearable=${!1!==e?.optional} @arcgisChange=${t=>{const o=t.currentTarget.color;if(!o)return void this.onFillEnabledChange(!1);e?.enabled||this.onFillEnabledChange(!0);const i=(0,a.c)(o),{color:r}=this.fill,s=A(r,{...r,...i,a:r.a}),l={color:(0,a.c)(s)};this.fill=l,this.arcgisFillChange.emit(l),this.setInternalSymbol(this.syncSymbolProps(this.symbol),!0),t.stopPropagation()}} .popoverProps=${this.popoverProps} .storageId=${a.q} ${(0,b.K)(this.setColorInputRef)}></arcgis-color-input>`}renderCIMVectorMarkerSymbolLayerBlocks(e,t){if("minimal"===this.mode)return"";const{sections:o,marker:i,mergedStrings:r}=this,s=o?.marker?.parts.size,l=o?.marker?.parts.rotation,n=o?.stroke?.extraParts?.autoStrokeAdjust,m="object"==typeof s&&s?.autoSizeAdjust,d=this.getSymbolLayerPreviewSymbol(e,"point"),y=M(e),S=p.getCIMSymbolSize(d),f=p.getCIMSymbolRotation(d,!0),C=function(e){const t=new Set;let o=I(e,e=>{if("CIMSolidFill"===e?.type||"CIMHatchFill"===e?.type||"CIMPictureFill"===e?.type||"CIMPictureMarker"===e?.type)return"fill"});return o&&t.add(o),o=I(e,e=>{if("CIMSolidStroke"===e?.type||"CIMPictureStroke"===e?.type)return"stroke"}),o&&t.add(o),Array.from(t).filter(Boolean)}(e),$=[];if(C.includes("fill")&&(!this.isFillColorRamp()||e.colorLocked)){const t=R(e,"fill"),o=[g.qy`<calcite-label>${1===C.length?r.color:r.fillColor}</calcite-label><div class="input-color"><arcgis-color-input .color=${this.toColorPickerValue(t)} clearable @arcgisChange=${o=>{const i=(0,a.c)(o.currentTarget.color);!(0,a.j)(i)&&!(0,a.j)(t)&&(i.a=t.a),P(e,i,"fill"),this.setInternalSymbol(this.symbol,!0),o.stopPropagation()}} .popoverProps=${this.popoverProps} .storageId=${a.q} ${(0,b.K)(this.setColorInputRef)}></arcgis-color-input></div>`,g.qy`<calcite-label>${1===C.length?r.transparency:r.fillTransparency}<arcgis-slider-input .min=${a.r} .max=${a.t} step=1 units-label=% .flipLabels=${this.percentLabelFlip} .value=${Math.round((0,h.m)(t.a))} @arcgisValueChange=${o=>{const i=o.detail,r=(0,h.t)(i),s=t.clone();s.a=r,P(e,s,"fill"),this.setInternalSymbol(this.symbol,!0)}} .withSteppers=${!this.narrow} .label=${1===C.length?r.transparency:r.fillTransparency}></arcgis-slider-input></calcite-label>`];$.push(o)}if(C.includes("stroke")){const t=R(e,"stroke"),o=function(e){let t=0;return I(e,e=>{("CIMSolidStroke"===e?.type||"CIMPictureStroke"===e?.type)&&void 0!==e.width&&e.width>t&&(t=e.width)}),t}(e),i=[g.qy`<calcite-label>${1===C.length?r.color:r.strokeColor}</calcite-label><div class="input-color"><arcgis-color-input .color=${this.toColorPickerValue(t)} clearable @arcgisChange=${o=>{const i=(0,a.c)(o.currentTarget.color);!(0,a.j)(i)&&!(0,a.j)(t)&&(i.a=t.a),P(e,i,"stroke"),this.setInternalSymbol(this.symbol,!0),o.stopPropagation()}} .popoverProps=${this.popoverProps} .storageId=${a.q} ${(0,b.K)(this.setColorInputRef)}></arcgis-color-input></div>`,g.qy`<calcite-label>${1===C.length?r.transparency:r.strokeTransparency}<arcgis-slider-input .min=${a.r} .max=${a.t} step=1 units-label=% .flipLabels=${this.percentLabelFlip} .value=${Math.round((0,h.m)(t.a))} @arcgisValueChange=${o=>{const i=o.detail,r=(0,h.t)(i),s=t.clone();s.a=r,P(e,s,"stroke"),this.setInternalSymbol(this.symbol,!0)}} .withSteppers=${!this.narrow} .label=${1===C.length?r.transparency:r.strokeTransparency}></arcgis-slider-input></calcite-label>`,g.qy`<calcite-label>${1===C.length?r.width:r.strokeWidth}<arcgis-slider-input .disabled=${n&&"editable"!==n&&this.stroke?.autoAdjusted} .min=${this.cimStrokeWidthBounds?.min} .max=${this.cimStrokeWidthBounds?.max} step=1 .unitsLabel=${r.px} .value=${j((0,c.p)(o))} @arcgisValueChange=${t=>{const o=t.detail;(function(e,t){I(e,e=>{("CIMSolidStroke"===e?.type||"CIMPictureStroke"===e?.type)&&(e.width=t)})})(e,B((0,c.a)(o))),this.setInternalSymbol(this.symbol,!0)}} .withSteppers=${!this.narrow} .label=${1===C.length?r.width:r.strokeWidth}></arcgis-slider-input></calcite-label>`];$.push(i)}const k=g.qy`<div class=${(0,u.CP)(a.C.contentGroup)}>${[...$]}${s&&g.qy`<calcite-label>${r.symbolSize}<arcgis-slider-input .disabled=${m&&"editable"!==m&&i?.autoAdjusted} .min=${a.u} .max=${a.v} step=1 .unitsLabel=${r.px} .value=${j((0,c.p)(S))} @arcgisValueChange=${e=>{const t=e.detail;this.setMarkerSymbolLayerSize(d,t),this.setInternalSymbol(this.symbol,!0)}} .withSteppers=${!this.narrow} .label=${r.symbolSize}></arcgis-slider-input></calcite-label>`||""}${l&&g.qy`<calcite-label>${r.rotation}<arcgis-slider-input .min=${a.w} .max=${a.x} step=1 units-label=\u00BA .flipLabels=${"rtl"===this.elementDir} .value=${q(f)} @arcgisValueChange=${e=>{const t=e.detail;p.applyCIMSymbolRotation(d,q(t),!0),this.setInternalSymbol(this.symbol,!0)}} .withSteppers=${!this.narrow} .label=${r.rotation}></arcgis-slider-input></calcite-label>`||""}${this.renderCIMMarkerPlacementSection(e)}${this.renderCIMEffectsSection(e)}${this.renderCIMAnimationEntryPoint(y,t,"vector-marker")}</div>`,v=this.getSymbolLayerPreviewSymbol(this.sanitizePointPreviewSymbolLayer(e),"point");return this.renderBlock({icon:g.qy`<arcgis-map-config-symbol-styler-symbol-preview contrast .symbol=${v} .options=${a.p} slot=icon></arcgis-map-config-symbol-styler-symbol-preview>`,key:`${t}__symbol-layer`,heading:r.vectorMarker,content:k})}renderCIMSolidFillSymbolLayerBlock(e,t,o=!1){if("minimal"===this.mode)return"";const i=(0,a.c)(e.color,!0),r=(0,a.j)(i);let s=null,l=null;(!this.isFillColorRamp()||e.colorLocked)&&(s=g.qy`<calcite-label>${this.mergedStrings.fillColor}</calcite-label><div class="input-color"><arcgis-color-input .color=${this.toColorPickerValue(i)} clearable @arcgisChange=${t=>{const o=(0,a.c)(t.currentTarget.color);if(!(0,a.j)(o)&&!r&&(o.a=i.a),e.color=o.toJSON(),this.sections?.stroke?.extraParts?.hideColor){const e=this.symbol.data.symbol.symbolLayers?.find(e=>"CIMSolidStroke"===e.type);e&&(e.color=[o.r,o.g,o.b,255])}this.setInternalSymbol(this.symbol,!0),t.stopPropagation()}} .popoverProps=${this.popoverProps} .storageId=${a.q} ${(0,b.K)(this.setColorInputRef)}></arcgis-color-input></div>`,l=g.qy`<calcite-label>${this.mergedStrings.fillTransparency}<arcgis-slider-input .flipLabels=${this.percentLabelFlip} .min=${a.r} .max=${a.t} step=1 units-label=% .value=${Math.round((0,h.m)(i.a))} .disabled=${r} @arcgisValueChange=${t=>{const o=t.detail,r=(0,h.t)(o),s=i.clone();s.a=r,e.color=s.toJSON(),this.setInternalSymbol(this.symbol,!0)}} .withSteppers=${!this.narrow} .label=${this.mergedStrings.fillTransparency}></arcgis-slider-input></calcite-label>`);const n=s||l?g.qy`<arcgis-map-config-symbol-styler-section embedded>${s}<arcgis-map-config-symbol-styler-section embedded .disabled=${r}>${l}${this.renderCIMEffectsSection(e)}${this.renderCIMAnimationEntryPoint(e,t,"solid-fill")}</arcgis-map-config-symbol-styler-section></arcgis-map-config-symbol-styler-section>`:g.qy`<calcite-label>${this.mergedStrings.emptySymbolLayerMsg}</calcite-label>`;if(o)return n;const c=this.getSymbolLayerPreviewSymbol(e,"polygon");return this.renderBlock({icon:g.qy`<arcgis-map-config-symbol-styler-symbol-preview contrast .symbol=${c} slot=icon></arcgis-map-config-symbol-styler-symbol-preview>`,heading:this.mergedStrings.solidFill,key:`${t}__solid-fill-symbol-layer`,content:n})}renderCIMSolidStrokeSymbolLayerBlock(e,t,o=!1,i){if("minimal"===this.mode)return"";const r=(0,a.c)(e.color,!0),s="CIMHatchFill"===i?.type,l=s&&this.isFillColorRamp(),n=this.sections?.stroke?.extraParts.autoStrokeAdjust,m=(0,a.j)(r),p=this.sections?.stroke?.extraParts?.hideColor,d=this.sections?.stroke?.extraParts?.hideTransparency;let y=null,u=null;(!this.isStrokeColorRamp()||e.colorLocked)&&(y=g.qy`<calcite-label>${o?this.mergedStrings.strokeColor:this.mergedStrings.color}</calcite-label><div class="input-color"><arcgis-color-input .color=${this.toColorPickerValue(r)} clearable @arcgisChange=${t=>{const o=(0,a.c)(t.currentTarget.color);!(0,a.j)(o)&&!m&&(o.a=r.a),e.color=o.toJSON(),this.setInternalSymbol(this.symbol,!0),t.stopPropagation()}} .popoverProps=${this.popoverProps} .storageId=${a.q} ${(0,b.K)(this.setColorInputRef)}></arcgis-color-input></div>`,u=g.qy`<calcite-label>${o?this.mergedStrings.strokeTransparency:this.mergedStrings.transparency}<arcgis-slider-input .flipLabels=${this.percentLabelFlip} .min=${a.r} .max=${a.t} step=1 units-label=% .value=${Math.round((0,h.m)(r.a))} .disabled=${m} @arcgisValueChange=${t=>{const o=t.detail,i=(0,h.t)(o),s=r.clone();s.a=i,e.color=s.toJSON(),this.setInternalSymbol(this.symbol,!0)}} .withSteppers=${!this.narrow} .label=${o?this.mergedStrings.strokeTransparency:this.mergedStrings.transparency}></arcgis-slider-input></calcite-label>`);const S=g.qy`<arcgis-map-config-symbol-styler-section embedded>${l||p?null:y}<arcgis-map-config-symbol-styler-section embedded .disabled=${m}>${l||d?null:u}<calcite-label>${o?this.mergedStrings.strokeWidth:this.mergedStrings.width}<arcgis-slider-input .disabled=${m||n&&"editable"!==n&&this.stroke?.autoAdjusted} .min=${this.cimStrokeWidthBounds?.min} .max=${this.cimStrokeWidthBounds?.max} step=1 .unitsLabel=${this.mergedStrings.px} .value=${void 0!==e.width?j((0,c.p)(e.width)):0} @arcgisValueChange=${t=>{const o=t.detail;e.width=B((0,c.a)(o)),this.setInternalSymbol(this.symbol,!0)}} .withSteppers=${!this.narrow} .label=${o?this.mergedStrings.strokeWidth:this.mergedStrings.width}></arcgis-slider-input></calcite-label></arcgis-map-config-symbol-styler-section>${s?this.renderCIMEffectsSection(i):this.renderCIMEffectsSection(e)}${s?this.renderCIMHatchFillPatternSection(i):null}${this.renderCIMAnimationEntryPoint(e,t,"solid-stroke")}</arcgis-map-config-symbol-styler-section>`;if(o)return S;const f=s?this.getSymbolLayerPreviewSymbol({...i,lineSymbol:{type:"CIMLineSymbol",symbolLayers:[e]}},"polygon"):this.getSymbolLayerPreviewSymbol(e,"line");return this.renderBlock({icon:g.qy`<arcgis-map-config-symbol-styler-symbol-preview contrast .symbol=${f} slot=icon></arcgis-map-config-symbol-styler-symbol-preview>`,heading:s?this.mergedStrings.hatchFill:this.mergedStrings.solidStroke,key:`${t}__solid-stroke-symbol-layer`,content:S})}renderCIMHatchFillSymbolLayerBlocks(e,t){return this.renderCIMSymbolLayersContent(e.lineSymbol,`${t}__hatch-symbol-fill-symbol-layers`,!1,e).flat()}renderCIMHatchFillPatternSection(e){const{mergedStrings:t}=this,o=e.offsetX??0;return g.qy`<calcite-block-section .text=${t.pattern}><calcite-label>${t.rotation}<arcgis-slider-input .flipLabels=${"rtl"===this.elementDir} .max=${a.x} .min=${a.w} @arcgisValueChange=${t=>{const o=t.detail;e.rotation=Math.abs(o),this.setInternalSymbol(this.symbol,!0)}} step=1 units-label=\u00BA .value=${e.rotation??0} .withSteppers=${!this.narrow} .label=${t.rotation}></arcgis-slider-input></calcite-label><calcite-label>${t.separation}<arcgis-slider-input .flipLabels=${"rtl"===this.elementDir} .max=${a.y} .min=${a.z} @arcgisValueChange=${t=>{const o=t.detail;e.separation=o,this.setInternalSymbol(this.symbol,!0)}} step=1 .value=${e.separation??0} .unitsLabel=${t.px} .withSteppers=${!this.narrow} .label=${t.separation}></arcgis-slider-input></calcite-label><calcite-label>${t.offset}<arcgis-slider-input .flipLabels=${"rtl"===this.elementDir} .max=${a.A} .min=${a.B} @arcgisValueChange=${t=>{const o=t.detail;e.offsetX=o,e.offsetY=o,this.setInternalSymbol(this.symbol,!0)}} step=1 .value=${o} .unitsLabel=${t.px} .withSteppers=${!this.narrow} .label=${t.offset}></arcgis-slider-input></calcite-label></calcite-block-section>`}renderCIMPictureMarkerSymbolLayerBlock(e,t,o=!1){if("minimal"===this.mode)return"";const i=(0,a.c)(e.tintColor,!0),{sections:r,marker:s}=this,l=r?.marker?.parts.size,n="object"==typeof l&&l?.autoSizeAdjust,m=this.getSymbolLayerPreviewSymbol(e,"point"),p=(0,a.j)(i),d=g.qy`<div><arcgis-map-config-symbol-styler-section embedded><calcite-label>${this.mergedStrings.fillColor}</calcite-label><div class="input-color"><arcgis-color-input .color=${this.toColorPickerValue(i)} clearable @arcgisChange=${t=>{const o=(0,a.c)(t.currentTarget.color);!(0,a.j)(o)&&!p&&(o.a=i.a),e.tintColor=o.toJSON(),this.setInternalSymbol(this.symbol,!0),t.stopPropagation()}} .popoverProps=${this.popoverProps} .storageId=${a.q} ${(0,b.K)(this.setColorInputRef)}></arcgis-color-input></div><arcgis-map-config-symbol-styler-section embedded .disabled=${p}><calcite-label>${this.mergedStrings.fillTransparency}<arcgis-slider-input .flipLabels=${this.percentLabelFlip} .min=${a.r} .max=${a.t} step=1 units-label=% .value=${Math.round((0,h.m)(i.a))} .disabled=${p} @arcgisValueChange=${t=>{const o=t.detail,r=(0,h.t)(o),s=i.clone();s.a=r,e.tintColor=s.toJSON(),this.setInternalSymbol(this.symbol,!0)}} .withSteppers=${!this.narrow} .label=${this.mergedStrings.fillTransparency}></arcgis-slider-input></calcite-label><calcite-label>${this.mergedStrings.symbolSize}<arcgis-slider-input .disabled=${p||n&&"editable"!==n&&s?.autoAdjusted} .min=${a.u} .max=${a.v} step=1 .unitsLabel=${this.mergedStrings.px} .value=${void 0!==e.size?j((0,c.p)(e.size)):0} @arcgisValueChange=${e=>{const t=e.detail;this.setMarkerSymbolLayerSize(m,t),this.setInternalSymbol(this.symbol,!0)}} .withSteppers=${!this.narrow} .label=${this.mergedStrings.symbolSize}></arcgis-slider-input></calcite-label>${this.renderCIMAnimationEntryPoint(e,t,"picture-marker")}</arcgis-map-config-symbol-styler-section></arcgis-map-config-symbol-styler-section>${this.renderCIMMarkerPlacementSection(e)}</div>`;if(o)return d;const y=this.getSymbolLayerPreviewSymbol(this.sanitizePointPreviewSymbolLayer(e),"point");return this.renderBlock({icon:g.qy`<arcgis-map-config-symbol-styler-symbol-preview contrast .symbol=${y} .options=${a.p} slot=icon></arcgis-map-config-symbol-styler-symbol-preview>`,heading:this.mergedStrings.pictureMarker,key:`${t}__picture-marker-symbol-layer`,content:d})}renderCIMPictureStrokeSymbolLayerBlock(e,t,o=!1){if("minimal"===this.mode)return"";const i=(0,a.c)(e.tintColor,!0),{sections:r,marker:s}=this,l=r?.marker?.parts.size,n="object"==typeof l&&l?.autoSizeAdjust,m=(0,a.j)(i),p=g.qy`<arcgis-map-config-symbol-styler-section embedded><calcite-label>${this.mergedStrings.fillColor}</calcite-label><div class="input-color"><arcgis-color-input .color=${this.toColorPickerValue(i)} clearable @arcgisChange=${t=>{const o=(0,a.c)(t.currentTarget.color);!(0,a.j)(o)&&!m&&(o.a=i.a),e.tintColor=o.toJSON(),this.setInternalSymbol(this.symbol,!0),t.stopPropagation()}} .popoverProps=${this.popoverProps} .storageId=${a.q} ${(0,b.K)(this.setColorInputRef)}></arcgis-color-input></div><arcgis-map-config-symbol-styler-section embedded .disabled=${m}><calcite-label>${this.mergedStrings.fillTransparency}<arcgis-slider-input .flipLabels=${this.percentLabelFlip} .min=${a.r} .max=${a.t} step=1 units-label=% .value=${Math.round((0,h.m)(i.a))} .disabled=${m} @arcgisValueChange=${t=>{const o=t.detail,r=(0,h.t)(o),s=i.clone();s.a=r,e.tintColor=s.toJSON(),this.setInternalSymbol(this.symbol,!0)}} .withSteppers=${!this.narrow} .label=${this.mergedStrings.fillTransparency}></arcgis-slider-input></calcite-label><calcite-label>${this.mergedStrings.symbolSize}<arcgis-slider-input .disabled=${m||n&&"editable"!==n&&s?.autoAdjusted} .min=${a.u} .max=${a.v} step=1 .unitsLabel=${this.mergedStrings.px} .value=${void 0!==e.width?j((0,c.p)(e.width)):0} @arcgisValueChange=${t=>{const o=t.detail;e.width=B((0,c.a)(o)),this.setInternalSymbol(this.symbol,!0)}} .withSteppers=${!this.narrow} .label=${this.mergedStrings.symbolSize}></arcgis-slider-input></calcite-label></arcgis-map-config-symbol-styler-section></arcgis-map-config-symbol-styler-section>`;if(o)return p;const d=this.getSymbolLayerPreviewSymbol(e,"line");return this.renderBlock({icon:g.qy`<arcgis-map-config-symbol-styler-symbol-preview contrast .symbol=${d} slot=icon></arcgis-map-config-symbol-styler-symbol-preview>`,heading:this.mergedStrings.pictureStroke,key:`${t}__picture-stroke-symbol-layer`,content:p})}renderCIMPictureFillSymbolLayerBlock(e,t,o=!1){if("minimal"===this.mode)return"";const i=(0,a.c)(e.tintColor,!0),{sections:r,marker:s}=this,l=r?.marker?.parts.size,n="object"==typeof l&&l?.autoSizeAdjust,m=(0,a.j)(i),p=g.qy`<arcgis-map-config-symbol-styler-section embedded><calcite-label>${this.mergedStrings.fillColor}</calcite-label><div class="input-color"><arcgis-color-input .color=${this.toColorPickerValue(i)} clearable @arcgisChange=${t=>{const o=(0,a.c)(t.currentTarget.color);!(0,a.j)(o)&&!m&&(o.a=i.a),e.tintColor=o.toJSON(),this.setInternalSymbol(this.symbol,!0),t.stopPropagation()}} .popoverProps=${this.popoverProps} .storageId=${a.q} ${(0,b.K)(this.setColorInputRef)}></arcgis-color-input></div><arcgis-map-config-symbol-styler-section embedded .disabled=${m}><calcite-label>${this.mergedStrings.fillTransparency}<arcgis-slider-input .flipLabels=${this.percentLabelFlip} .min=${a.r} .max=${a.t} step=1 units-label=% .value=${Math.round((0,h.m)(i.a))} .disabled=${m} @arcgisValueChange=${t=>{const o=t.detail,r=(0,h.t)(o),s=i.clone();s.a=r,e.tintColor=s.toJSON(),this.setInternalSymbol(this.symbol,!0)}} .withSteppers=${!this.narrow} .label=${this.mergedStrings.fillTransparency}></arcgis-slider-input></calcite-label><calcite-label>${this.mergedStrings.symbolSize}<arcgis-slider-input .disabled=${m||n&&"editable"!==n&&s?.autoAdjusted} .min=${a.u} .max=${a.v} step=1 .unitsLabel=${this.mergedStrings.px} .value=${void 0!==e.height?j((0,c.p)(e.height)):0} @arcgisValueChange=${t=>{const o=t.detail;e.height=B((0,c.a)(o)),this.setInternalSymbol(this.symbol,!0)}} .withSteppers=${!this.narrow} .label=${this.mergedStrings.symbolSize}></arcgis-slider-input></calcite-label></arcgis-map-config-symbol-styler-section></arcgis-map-config-symbol-styler-section>`;if(o)return p;const d=this.getSymbolLayerPreviewSymbol(e,"polygon");return this.renderBlock({icon:g.qy`<arcgis-map-config-symbol-styler-symbol-preview contrast .symbol=${d} slot=icon></arcgis-map-config-symbol-styler-symbol-preview>`,heading:this.mergedStrings.pictureFill,key:`${t}__picture-fill-symbol-layer`,content:p})}renderCIMGradientSymbolLayerBlock(e,t,o=!1,i){const{mergedStrings:r,sections:s,stroke:l}=this;if("minimal"===this.mode)return"";const a="rtl"===this._direction,n=this.getSymbolLayerPreviewSymbol(e,"fill"===i?"polygon":"line"),m=s?.stroke?.extraParts?.autoStrokeAdjust,p=this.cimStrokeWidthBounds?.min,d=this.cimStrokeWidthBounds?.max,h="fill"===i&&s?.fill?.parts?.hideColorRamp||"stroke"===i&&s?.stroke?.parts?.hideColorRamp,y=g.qy`<arcgis-map-config-symbol-styler-section embedded>${!h&&g.qy`<calcite-block expanded>${this.renderGradientColorRampsContent(e,i)}</calcite-block>`||""}<calcite-block .heading=${r.gradient.pattern} collapsible expanded class="no-top-margin">${"fill"===i&&g.qy`<div class="gradient-margin"><calcite-label>${r.gradient.direction}</calcite-label><calcite-combobox selection-mode=single-persist clear-disabled .label=${r.gradient.direction} @calciteComboboxChange=${t=>{const o=t.currentTarget.value;e.gradientMethod=o,this.setInternalSymbol(this.symbol,!0)}}><calcite-combobox-item value=Linear .heading=${r.gradient.linear} .selected=${"Linear"===e.gradientMethod}></calcite-combobox-item><calcite-combobox-item value=Rectangular .heading=${r.gradient.rectangular} .selected=${"Rectangular"===e.gradientMethod}></calcite-combobox-item><calcite-combobox-item value=Circular .heading=${r.gradient.circular} .selected=${"Circular"===e.gradientMethod}></calcite-combobox-item></calcite-combobox></div>`||""}${"fill"===i&&"Circular"!==e.gradientMethod&&g.qy`<calcite-label>${r.gradient.angle}<arcgis-slider-input min=0 max=360 step=1 units-label=\u00BA .flipLabels=${"rtl"===this.elementDir} .value=${e.angle} @arcgisValueChange=${t=>{const o=t.detail;e.angle=o,this.setInternalSymbol(this.symbol,!0)}} .withSteppers=${!this.narrow} .label=${r.gradient.angle}></arcgis-slider-input></calcite-label>`||""}${"stroke"===i&&g.qy`<calcite-label>${r.width}<arcgis-slider-input .disabled=${m&&"editable"!==m&&l?.autoAdjusted} .min=${p} .max=${d} step=1 .unitsLabel=${this.mergedStrings.px} .value=${j((0,c.p)(e.width))} @arcgisValueChange=${t=>{e.width=B((0,c.a)(t.detail)),this.setInternalSymbol(this.symbol,!0)}} .withSteppers=${!this.narrow} .label=${r.width}></arcgis-slider-input></calcite-label>`||""}<div class="gradient-margin"><calcite-label>${r.gradient.type}</calcite-label><calcite-combobox selection-mode=single-persist clear-disabled .label=${r.gradient.type} @calciteComboboxChange=${t=>{const o=t.currentTarget.value;e.gradientType=o,this.setInternalSymbol(this.symbol,!0)}}><calcite-combobox-item value=Continuous .heading=${r.gradient.continuous} .selected=${"Continuous"===e.gradientType}></calcite-combobox-item><calcite-combobox-item value=Discrete .heading=${r.gradient.discrete} .selected=${"Discrete"===e.gradientType}></calcite-combobox-item></calcite-combobox></div>${"Discrete"===e.gradientType&&g.qy`<calcite-label>${r.gradient.interval}<arcgis-slider-input max=100 min=1 @arcgisValueChange=${t=>{e.interval=t.detail,this.setInternalSymbol(this.symbol,!0)}} step=1 .value=${e.interval} .withSteppers=${!this.narrow} .label=${r.gradient.interval}></arcgis-slider-input></calcite-label>`||""}<div class="gradient-margin"><calcite-label>${r.gradient.extent}</calcite-label><calcite-combobox selection-mode=single-persist clear-disabled .label=${r.gradient.extent} @calciteComboboxChange=${t=>{const o=t.currentTarget.value;"Relative"===o&&e.gradientSize&&e.gradientSize>100&&(e.gradientSize=100),e.gradientSizeUnits=o,this.setInternalSymbol(this.symbol,!0)}}><calcite-combobox-item value=Absolute .heading=${r.gradient.absolute} .selected=${"Absolute"===e.gradientSizeUnits}></calcite-combobox-item><calcite-combobox-item value=Relative .heading=${r.gradient.relative} .selected=${"Relative"===e.gradientSizeUnits}></calcite-combobox-item></calcite-combobox></div><calcite-label>${r.gradient.size}${"Relative"===e.gradientSizeUnits?g.qy`<arcgis-slider-input max=100 min=1 @arcgisValueChange=${t=>{e.gradientSize=t.detail,this.setInternalSymbol(this.symbol,!0)}} step=1 .value=${e.gradientSize} .flipLabels=${this.percentLabelFlip} units-label=% .withSteppers=${!this.narrow} .label=${r.gradient.size}></arcgis-slider-input>`:g.qy`<calcite-input-number .label=${r.gradient.size} scale=s inputmode=decimal min=1 .max=${Number.MAX_SAFE_INTEGER} step=1 .value=${`${j((0,c.p)(e.gradientSize??75))}`} .numberButtonType=${this.narrow?"none":"vertical"} .prefixText=${a?r.px:""} .suffixText=${a?"":r.px} @calciteInputNumberInput=${t=>{const o=t.currentTarget;this.waitOnUser(t,()=>{e.gradientSize=(0,c.a)(Number.parseInt(o.value)),this.setInternalSymbol(this.symbol,!0)},0)}}></calcite-input-number>`}</calcite-label></calcite-block>${this.renderCIMEffectsSection(e)}</arcgis-map-config-symbol-styler-section>`;return o?y:this.renderBlock({icon:g.qy`<arcgis-map-config-symbol-styler-symbol-preview contrast .symbol=${n} slot=icon></arcgis-map-config-symbol-styler-symbol-preview>`,heading:"fill"===i?r.gradient.gradientFill:r.gradient.gradientStroke,key:`${t}__gradient-${i}-symbol-layer`,content:y})}renderCIMAnimationEntryPoint(e,t,o){if(!e)return"";const{mergedStrings:i,config:r}=this,{hideAnimation:s}=r,l="rtl"===this._direction;return e.animations?.length??("CIMPictureMarker"===e.type&&e.animatedSymbolProperties)?g.qy`<calcite-label><button .disabled=${s} class=${(0,u.CP)(s?a.C.changeSymbolTriggerDisabled:a.C.changeSymbolTrigger)} @click=${()=>{this.currentAnimationSymbolLayer=e,this.currentAnimationInfo={symbolLayerKey:t,symbolLayerType:o},this.state="animation"}} type=button><div class=${(0,u.CP)(a.C.container)} tabindex=0><div class=${`${a.C.label} animation-label`}>${i.animation}</div></div><calcite-icon .icon=${"chevron-"+(l?"left":"right")} scale=s></calcite-icon></button></calcite-label>`:""}renderCIMMarkerPlacementSection(e){const{mergedStrings:t}=this,{markerPlacement:o}=e;return"CIMMarkerPlacementInsidePolygon"!==o?.type||"Random"!==o?.gridType&&"Fixed"!==o?.gridType?"":g.qy`<calcite-block-section .text=${t.markerPlacement}><calcite-label>${t.gridType}<calcite-segmented-control @calciteSegmentedControlChange=${e=>{const t=e.currentTarget.value;o.gridType=t,this.setInternalSymbol(this.symbol,!0)}}><calcite-segmented-control-item value=Fixed .checked=${"Fixed"===o.gridType}>${t.fixed}</calcite-segmented-control-item><calcite-segmented-control-item value=Random .checked=${"Random"===o.gridType}>${t.random}</calcite-segmented-control-item></calcite-segmented-control></calcite-label><calcite-label>${t.randomness}<arcgis-slider-input .disabled=${"Fixed"===o.gridType} .flipLabels=${this.percentLabelFlip} .max=${a.D} .min=${a.E} @arcgisValueChange=${e=>{const t=e.detail;o.randomness=t,this.setInternalSymbol(this.symbol,!0)}} step=1 .value=${o.randomness} units-label=% .withSteppers=${!this.narrow} .label=${t.randomness}></arcgis-slider-input></calcite-label><calcite-label>${t.stepX}<arcgis-slider-input .max=${a.F} .min=${a.G} @arcgisValueChange=${e=>{const t=e.detail;o.stepX=B((0,c.a)(t)),this.setInternalSymbol(this.symbol,!0)}} step=1 .value=${void 0!==o.stepX?j((0,c.p)(o.stepX)):0} .unitsLabel=${t.px} .withSteppers=${!this.narrow} .label=${t.stepX}></arcgis-slider-input></calcite-label><calcite-label>${t.stepY}<arcgis-slider-input .max=${a.F} .min=${a.G} @arcgisValueChange=${e=>{const t=e.detail;o.stepY=B((0,c.a)(t)),this.setInternalSymbol(this.symbol,!0)}} step=1 .unitsLabel=${t.px} .value=${void 0!==o.stepY?j((0,c.p)(o.stepY)):0} .withSteppers=${!this.narrow} .label=${t.stepY}></arcgis-slider-input></calcite-label><calcite-label layout=inline><calcite-checkbox .checked=${o.shiftOddRows&&"Fixed"===o.gridType} .disabled=${"Random"===o.gridType} @calciteCheckboxChange=${e=>{const{checked:t}=e.currentTarget;o.shiftOddRows=t,this.setInternalSymbol(this.symbol,!0)}}></calcite-checkbox>${t.shiftOddRows}</calcite-label></calcite-block-section>`}renderColorFillTransparencyContent(e,t){const{fill:o}=this;return g.qy`<calcite-label>${e}<arcgis-slider-input .flipLabels=${this.percentLabelFlip} .min=${0} .max=${100} step=1 units-label=% .value=${Math.round((0,h.m)(o?.color?.a??1))} @arcgisValueChange=${e=>this.onColorFillTransparencyChange(e.detail)} .withSteppers=${!this.narrow} .disabled=${t} .label=${e}></arcgis-slider-input></calcite-label>`}renderColorRampFillBlock(e=!1){const t=this.sections?.fill,{parts:o}=t;if(this.hasActivePictureMarkerSymbol()||this.hasActiveLineOnlySimpleMarkerSymbol())return"";const i=[];return o.colorRamps&&i.push({content:this.renderFillColorRampsContent()}),o.transparency&&i.push({content:this.renderColorRampFillTransparencyContent()}),this.renderSection({key:"color-ramp-fill",disabled:"non-editable"===t.optional,embedded:e,sectionContent:i})}renderFillColorRampsContent(){const{style:e}=this.stylerProps?.sections?.fill,{activeCategory:t,colorRamps:o}=this.sections?.fill;return this.renderRampsContent({style:e,activeCategory:t,colorRampStops:this.fill?.color,colorRamps:o,heading:this.mergedStrings.colors,onCategoryChange:this.onFillColorRampCategoryChange,isSelected:t=>{const o=this.fill?.color;return w(o,t.stops,"2d"===e)},onSelect:e=>{const{detail:t}=e,o=t.stops.slice(),{fill:i}=this,r={...i,color:o};this.fill=r,this.tempStrokeColorRampStateStops=o,this.arcgisFillChange.emit(r),this.setInternalSymbol(this.syncSymbolProps(this.symbol,{cimChangeContext:"root"}),!0),e.stopPropagation()},onFlip:this.flipFillColorRamps})}renderGradientColorRampsContent(e,t){const{activeCategory:o}="fill"===t?this.sections?.fill:this.sections?.stroke,i="fill"===t?this.sections.fill:this.sections.stroke;let r=e.colorRamp,s=[],l=["CIMLinearContinuousColorRamp","CIMPolarContinuousColorRamp"].includes(r.type);if("CIMMultipartColorRamp"===r.type&&1===r.colorRamps.length&&(l=!0,r=r.colorRamps[0]),l){const e=k.clone(r.fromColor),t=k.clone(r.toColor);e[3]=e[3]/255,t[3]=t[3]/255,s=[new m.default(e),new m.default(t)]}else{s=r.colorRamps.map(e=>new m.default(e.fromColor));const e=r.colorRamps[r.colorRamps.length-1];s.push(new m.default(e.toColor))}if("stroke"===t&&this.sections?.stroke&&!this.sections.stroke.colorRamps||"fill"===t&&this.sections?.fill&&!this.sections.fill.colorRamps){const e=$.all().filter(e=>e.colors.length<=10).map(e=>({name:e.name,tags:e.tags,stops:l?[e.colors[0],e.colors[e.colors.length-1]]:e.colors}));i.colorRamps=e}const n=i.colorRamps;return g.qy`${this.renderRampsContent({style:"continuous",activeCategory:o,colorRampStops:s,colorRamps:n,allowTransparency:!0,heading:"fill"===t?this.mergedStrings.colors:this.getStrokeString("color"),onCategoryChange:"fill"===t?this.onFillColorRampCategoryChange:this.onStrokeColorRampCategoryChange,isSelected:e=>w(s,e.stops),onSelect:o=>{const{detail:i}=o,r=i.stops.slice(),{fill:s,stroke:l}=this,a="fill"===t?{...s,color:r}:{...l,color:r};"fill"===t?(this.fill=a,this.arcgisFillChange.emit(a)):(this.stroke=a,this.arcgisStrokeChange.emit(a));const n="fill"===t?this.fill:this.stroke;if(2===n.color.length){const t=n.color;"CIMMultipartColorRamp"===e.colorRamp.type?(e.colorRamp.colorRamps[0].fromColor=t[0].toJSON(),e.colorRamp.colorRamps[0].toColor=t[1].toJSON()):(e.colorRamp.fromColor=t[0].toJSON(),e.colorRamp.toColor=t[t.length-1].toJSON())}else{const t=[];for(let e=0;e<a.color.length-1;e++)t.push({type:"CIMLinearContinuousColorRamp",fromColor:a.color[e].toJSON(),toColor:a.color[e+1].toJSON()});const o={type:"CIMMultipartColorRamp",colorRamps:t,weights:new Array(t.length).fill(1/t.length)};e.colorRamp=o}if(this.sections?.stroke?.extraParts?.hideColor){const e=this.symbol.data.symbol.symbolLayers?.find(e=>"CIMSolidStroke"===e.type);if(e){const t=r[0];e.color=[t.r,t.g,t.b,255]}}this.setInternalSymbol(this.symbol,!0),o.stopPropagation()},onFlip:()=>{const o=e.colorRamp,i="fill"===t?this.fill:this.stroke,r=(0,a.f)(s,!1);if(["CIMLinearContinuousColorRamp","CIMLinearContinuousColorRamp","CIMPolarContinuousColorRamp"].includes(o.type))o.fromColor=r[0].toJSON(),o.toColor=r[r.length-1].toJSON();else{const e=[];for(let t=0;t<r.length-1;t++)e.push({type:"CIMLinearContinuousColorRamp",fromColor:r[t].toJSON(),toColor:r[t+1].toJSON()});o.colorRamps=e,o.weights=new Array(e.length).fill(1/e.length)}if(this.sections?.stroke?.extraParts?.hideColor){const e=this.symbol.data.symbol.symbolLayers?.find(e=>"CIMSolidStroke"===e.type);if(e){const t=r[0];e.color=[t.r,t.g,t.b,255]}}this.setInternalSymbol(this.symbol,!0),i.color=r,"fill"===t?this.flipFillColorRamps():this.flipStrokeColorRamps()}})}${2===s.length?g.qy`<div class="gradient-color-inputs"><arcgis-color-input .color=${this.toColorPickerValue(s[1],!0)} @arcgisChange=${t=>{const o=t.currentTarget.color,i=(0,a.c)(o),r=new m.default(i).toRgba();r[3]=255*r[3],"CIMMultipartColorRamp"===e.colorRamp.type?e.colorRamp.colorRamps[0].toColor=r:e.colorRamp.toColor=r,this.setInternalSymbol(this.symbol,!0)}} .popoverProps=${this.popoverProps} .storageId=${a.q} hide-recent-colors show-transparency ${(0,b.K)(this.setColorInputRef)}></arcgis-color-input><arcgis-color-input .color=${this.toColorPickerValue(s[0],!0)} @arcgisChange=${t=>{const o=t.currentTarget.color,i=(0,a.c)(o),r=new m.default(i).toRgba();if(r[3]=255*r[3],"CIMMultipartColorRamp"===e.colorRamp.type?e.colorRamp.colorRamps[0].fromColor=r:e.colorRamp.fromColor=r,this.sections?.stroke?.extraParts?.hideColor){const e=this.symbol.data.symbol.symbolLayers?.find(e=>"CIMSolidStroke"===e.type);e&&(e.color=[r[0],r[1],r[2],255])}this.setInternalSymbol(this.symbol,!0)}} .popoverProps=${this.popoverProps} .storageId=${a.q} hide-recent-colors show-transparency ${(0,b.K)(this.setColorInputRef)}></arcgis-color-input></div>`:null}`}renderRampsContent(e){return g.qy`<calcite-label>${e.heading}<arcgis-map-config-symbol-styler-color-ramp-input .options=${e} ._messages=${this.mergedStrings} .popoverProps=${this.popoverProps} style=${(0,u.zl)({"--scroller-max-height":"var(--ramp-scroller-max-height)"})} ${(0,b.K)(this.setRampInputRef)}></arcgis-map-config-symbol-styler-color-ramp-input></calcite-label>`}renderColorRampFillTransparencyContent(){const{fill:e}=this,t=e.color[0],o=4===t.length?t[3]/255:t.a;return g.qy`<calcite-label>${this.mergedStrings.fillTransparency}<arcgis-slider-input .flipLabels=${this.percentLabelFlip} .min=${0} .max=${100} step=1 units-label=% .value=${Math.round((0,h.m)(o))} @arcgisValueChange=${e=>this.onColorRampFillTransparencyChange(e.detail)} .withSteppers=${!this.narrow} .label=${this.mergedStrings.fillTransparency}></arcgis-slider-input></calcite-label>`}renderBlock(e){return g.qy`<calcite-block collapsible .disabled=${e.disabled??!1} .heading=${e.heading} @calciteBlockOpen=${this.onBlockToggle} @calciteBlockClose=${this.onBlockToggle}>${e.icon}${e.content}</calcite-block>`}renderSection({disabled:e,embedded:t=!1,sectionContent:o}){return g.qy`<arcgis-map-config-symbol-styler-section .disabled=${e} .embedded=${t}>${o.map(({content:e})=>e)}</arcgis-map-config-symbol-styler-section>`}renderStrokeBlock(){return"color"===this.stylerProps?.sections?.stroke?.type?this.renderColorStrokeBlock():this.renderColorRampStrokeBlock()}renderColorStrokeBlock(){const e=this.sections?.stroke,{parts:t}=e,o=[];if((t.suggestedColors||t.customColor)&&o.push({content:this.renderStrokeColorsContent()}),t.transparency||t.extra){const i=[];t.transparency&&i.push(this.showingRampOptionsInStroke()?this.renderColorRampStrokeTransparencyContent(!e.enabled):this.renderColorStrokeTransparencyContent(!e.enabled)),t.extra&&i.push(this.renderStrokeExtraContent(!e.enabled)),o.push({content:g.qy`<arcgis-map-config-symbol-styler-section embedded .disabled=${!e.enabled}>${i}</arcgis-map-config-symbol-styler-section>`})}return this.renderSection({key:"color-stroke",disabled:"non-editable"===e.optional||this.hasActivePictureMarkerSymbol(),sectionContent:o})}renderStrokeColorRampsContent(){const{style:e}=this.stylerProps?.sections?.stroke,{activeCategory:t,colorRamps:o}=this.sections?.stroke;return this.renderRampsContent({style:e,activeCategory:t,colorRampStops:this.stroke?.color,colorRamps:o,heading:this.getStrokeString("color"),onCategoryChange:this.onStrokeColorRampCategoryChange,isSelected:e=>{const t=this.stroke?.color;return w(t,e.stops)},onSelect:e=>{const{detail:t}=e,o=t.stops.slice(),{stroke:i}=this,r={...i,color:o};this.stroke=r,this.arcgisStrokeChange.emit(O(r)),this.setInternalSymbol(this.syncSymbolProps(this.symbol,{cimChangeContext:"root"}),!0),e.stopPropagation()},onFlip:this.flipStrokeColorRamps})}renderStrokeColorsContent(){const e=this.sections?.stroke;if(this.showingRampOptionsInStroke()){const e=this.tempStrokeColorRampStateActiveCategory,{style:t}=this.stylerProps?.sections?.fill,{colorRamps:o}=this.sections?.fill;return this.renderRampsContent({style:t,activeCategory:e,colorRampStops:this.tempStrokeColorRampStateStops,colorRamps:o,heading:this.getStrokeString("color"),onCategoryChange:e=>{const t=e.currentTarget.selectedItems[0].getAttribute("data-value");this.tempStrokeColorRampStateActiveCategory=t,e.stopPropagation()},isSelected:e=>w(this.tempStrokeColorRampStateStops,e.stops),onSelect:e=>{const{detail:t}=e,o=t.stops.slice(),{stroke:i}=this,r={...i,color:o};this.stroke=r,this.tempStrokeColorRampStateStops=o,this.arcgisStrokeChange.emit(O(r)),this.setInternalSymbol(this.syncSymbolProps(this.symbol),!0),e.stopPropagation()},onFlip:this.flipFillColorRamps})}const t=e?.enabled?this.toColorPickerValue(this.stroke?.color):void 0;return g.qy`<calcite-label>${this.getStrokeString("color")}</calcite-label><arcgis-color-input .color=${t} .clearable=${!1!==e?.optional} @arcgisChange=${t=>{const o=t.currentTarget.color;if(!o)return void this.onStrokeEnabledChange(!1);e?.enabled||this.onStrokeEnabledChange(!0);const i=(0,a.c)(o),r=this.stroke?.color,{stroke:s}=this,l={...s,color:(0,a.c)(A(r,{...r,...i,a:r.a}))};this.stroke=l,this.arcgisStrokeChange.emit(O(l)),this.setInternalSymbol(this.syncSymbolProps(this.symbol),!0),t.stopPropagation()}} .popoverProps=${this.popoverProps} .storageId=${a.q} ${(0,b.K)(this.setColorInputRef)}></arcgis-color-input>`}renderColorStrokeTransparencyContent(e){const{stroke:t}=this;return g.qy`<calcite-label>${this.getStrokeString("transparency")}<arcgis-slider-input .flipLabels=${this.percentLabelFlip} .min=${0} .max=${100} step=1 units-label=% .value=${Math.round((0,h.m)((t?.color).a))} @arcgisValueChange=${e=>this.onColorStrokeTransparencyChange(e.detail)} .withSteppers=${!this.narrow} .disabled=${e} .label=${this.getStrokeString("transparency")}></arcgis-slider-input></calcite-label>`}renderStrokeExtraContent(e){const{sections:t,stroke:o}=this,i=t?.stroke?.extraParts.arrow,r=t?.stroke?.extraParts.autoStrokeAdjust,s=t?.stroke?.extraParts.style,l=t?.stroke?.extraParts.width,c="line"===this.editGeometry,m="polygon"===this.editGeometry,p=c?.1:0,d=(0,n.i)(this.symbol),h=!d&&s&&(c||m),y=!d&&i&&c,b=!d&&l,S=!d&&r,f=H(o?.marker);return g.qy`<div class=${(0,u.CP)(a.C.contentGroup)}>${b?g.qy`<calcite-label>${this.getStrokeString("width")}<arcgis-slider-input .disabled=${e||r&&"editable"!==r&&o?.autoAdjusted} .min=${p} .max=${18} step=1 .unitsLabel=${this.mergedStrings.px} .value=${o?.size} @arcgisValueChange=${e=>this.onStrokeWidthChange(e.detail)} .withSteppers=${!this.narrow} .label=${this.getStrokeString("width")}></arcgis-slider-input></calcite-label>`:null}${S?this.renderAutoAdjust(o?.autoAdjusted??!1,this.mergedStrings.autoAdjustStroke,this.onAutoAdjustStrokeChange):null}${y?g.qy`<calcite-label>${this.mergedStrings.arrow}<calcite-dropdown class=${(0,u.CP)({[a.C.iconDropdown]:!0,[a.C.arrowDropdown]:!0})} @calciteDropdownSelect=${this.onStrokeArrowChange} width-scale=l placement=top-end .overlayPositioning=${this.popoverProps?.overlayPositioning} scale=s><div role=button slot=trigger tabindex=0><div data-arrow=${f??g.s6} class=${(0,u.CP)(a.C.iconDropdownSelected)} style=${(0,u.zl)(this.getSelectedArrowPatternStyle())}></div><calcite-icon icon=chevron-down scale=s></calcite-icon></div><calcite-dropdown-group>${a.s.map(e=>g.qy`<calcite-dropdown-item .selected=${e===f} data-arrow=${e??g.s6}><div class=${(0,u.CP)(a.C.iconDropdownItemContent)} data-arrow=${e??g.s6} style=${(0,u.zl)(this.getArrowPatternOptionStyle())}></div></calcite-dropdown-item>`)}</calcite-dropdown-group></calcite-dropdown></calcite-label>`:null}${h?g.qy`<calcite-label>${this.mergedStrings.pattern}<calcite-dropdown class=${(0,u.CP)({[a.C.iconDropdown]:!0,[a.C.styleDropdown]:!0})} @calciteDropdownSelect=${this.onStrokeStyleChange} width-scale=l placement=top-end .overlayPositioning=${this.popoverProps?.overlayPositioning} scale=s max-items=7><div role=button slot=trigger tabindex=0><div class=${(0,u.CP)(a.C.iconDropdownSelected)} style=${(0,u.zl)(this.getLinePatternStyle(o?.style||"solid"))}></div><calcite-icon icon=chevron-down scale=s></calcite-icon></div><calcite-dropdown-group>${a.b.map(e=>g.qy`<calcite-dropdown-item .selected=${e===o?.style} data-style=${e??g.s6}><div style=${(0,u.zl)(this.getLinePatternStyle(e))} class=${(0,u.CP)(a.C.iconDropdownItemContent)}></div></calcite-dropdown-item>`)}</calcite-dropdown-group></calcite-dropdown></calcite-label>`:null}</div>`}renderColorRampStrokeBlock(e=!1){const t=this.sections?.stroke,o=t.parts,i=[];return o.colorRamps&&i.push({content:this.renderStrokeColorRampsContent()}),o.transparency&&i.push({content:this.renderColorRampStrokeTransparencyContent("non-editable"===t.optional||this.hasActivePictureMarkerSymbol())}),o.extra&&i.push({content:this.renderStrokeExtraContent("non-editable"===t.optional||this.hasActivePictureMarkerSymbol())}),this.renderSection({key:"color-ramp-stroke",disabled:"non-editable"===t.optional||this.hasActivePictureMarkerSymbol(),embedded:e,sectionContent:i})}renderColorRampStrokeTransparencyContent(e){const{stroke:t}=this;return g.qy`<calcite-label>${this.getStrokeString("transparency")}<arcgis-slider-input .flipLabels=${this.percentLabelFlip} .min=${0} .max=${100} step=1 units-label=% .value=${Math.round((0,h.m)(t?.color[0].a))} @arcgisValueChange=${e=>this.onColorRampStrokeTransparencyChange(e.detail)} .withSteppers=${!this.narrow} .disabled=${e} .label=${this.getStrokeString("transparency")}></arcgis-slider-input></calcite-label>`}renderCIMEffectsSection(e){const{mergedStrings:t}=this,o=(e.effects??[]).filter(e=>"CIMGeometricEffectOffset"===e.type);return o.length?g.qy`<calcite-block collapsible .heading=${t.effects.offsetEffect}>${o.map(e=>g.qy`<calcite-label>${t.offset}<arcgis-slider-input min=-100 max=100 step=1 .unitsLabel=${t.px} .value=${j((0,c.p)(e.offset))} @arcgisValueChange=${t=>{e.offset=B((0,c.a)(t.detail)),this.setInternalSymbol(this.symbol,!0)}} .withSteppers=${!this.narrow} .label=${t.width}></arcgis-slider-input></calcite-label><div class="effects-margin"><calcite-label>${t.effects.method}</calcite-label><calcite-combobox selection-mode=single-persist clear-disabled .label=${t.effects.method} @calciteComboboxChange=${t=>{const o=t.currentTarget.value;e.method=o,this.setInternalSymbol(this.symbol,!0)}}><calcite-combobox-item value=Mitered .heading=${t.effects.mitered} .selected=${!e.method||"Mitered"===e.method}></calcite-combobox-item><calcite-combobox-item value=Bevelled .heading=${t.effects.bevelled} .selected=${"Bevelled"===e.method}></calcite-combobox-item><calcite-combobox-item value=Rounded .heading=${t.effects.rounded} .selected=${"Rounded"===e.method}></calcite-combobox-item><calcite-combobox-item value=Square .heading=${t.effects.square} .selected=${"Square"===e.method}></calcite-combobox-item></calcite-combobox></div><div class="effects-margin"><calcite-label>${t.effects.options}</calcite-label><calcite-combobox selection-mode=single-persist clear-disabled .label=${t.effects.options} @calciteComboboxChange=${t=>{const o=t.currentTarget.value;e.option=o,this.setInternalSymbol(this.symbol,!0)}}><calcite-combobox-item value=Accurate .heading=${t.effects.accurate} .selected=${"Accurate"===e.option}></calcite-combobox-item><calcite-combobox-item value=Fast .heading=${t.effects.fast} .selected=${!e.option||"Fast"===e.option}></calcite-combobox-item></calcite-combobox></div>`)}</calcite-block>`:""}}(0,i.c)("arcgis-map-config-symbol-styler",U)}}]);