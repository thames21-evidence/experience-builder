"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_arcgis-raster-function-editor_-8a5f0a"],{24684:(e,t,n)=>{n.d(t,{R:()=>h});var a=n(92265),s=(n(5294),n(13661),n(18423),n(21255),n(35431),n(69843)),i=n(38949),d=(n(588),n(55448),n(2924),n(11840),n(52373),n(33752),n(440),n(66744),n(44345),n(33797));n(71802),n(36596),n(23795),n(17902),n(56451);const o="methodHelpClickHandler",r="bandHelpClickHandler",l="combinationHelpClickHandler",h=class{constructor(e){(0,a.r)(this,e),this.helpActionClickEventHandlers=new Map,this.onMethodChange=e=>{const t=e.target;this.method=Number.parseInt(t.value,10),this.widgetArgs.inputArgs?.Method&&(this.widgetArgs.inputArgs.Method.value=this.method)},this.onBandChange=e=>{const t=e.target.value,n=this.bandCombinationElement.value?.trim(),a=(0,i.i)(n)?[]:n.indexOf(",")>0?n.split(","):n.split(" ");a.push(t),this._updateBandValues(this._getBandComboFormatedValue(a))},this.onBandCombinationChange=()=>{const e=this._getBandCombinationValue();this._updateBandValues(e)}}connectedCallback(){this.widgetArgs?.rasterArgs&&(this.rasterArg=this.widgetArgs.rasterArgs.Raster,this.rasterArg?.input?.addEventListener("rfxArgumentChange",()=>{this.updateRasterArg()}))}async componentWillLoad(){({strings:this.strings,dir:this.direction}=await(0,s.c)(this.hostElement,(0,a.d)("."))),this.updateRasterArg(),this.setMethodValue()}componentDidLoad(){this.attachHelpClickEventHandlers()}setMethodValue(){this.method=this.widgetArgs.inputArgs?.Method?.value??this.widgetArgs.rasterFunctionEnums[0].key}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.widgetArgs?.inputArgs?.Method?.displayName,referenceElement:this.bandCombinationMethodContainer,helpTextID:this.widgetArgs.helpTextIDs?.extractbands_method}),t=this.widgetArgs.onHelpActionClick({heading:this.widgetArgs?.inputArgs?.BandNames?.displayName,referenceElement:this.bandCombinationBandContainer,helpTextID:this.widgetArgs.helpTextIDs?.extractbands_band}),n=this.widgetArgs.onHelpActionClick({heading:this.widgetArgs?.inputArgs?.BandWavelengths?.displayName,referenceElement:this.bandCombinationCombinationContainer,helpTextID:this.widgetArgs.helpTextIDs?.extractbands_combination});this.helpActionClickEventHandlers.set(o,e),this.helpActionClickEventHandlers.set(r,t),this.helpActionClickEventHandlers.set(l,n)}getMethodOptions(){return this.widgetArgs.rasterFunctionEnums.bandComboMethods.map(e=>({key:e.key.toString(),label:e.label}))}getBandOptions(e){if(!this.bandProperties)return[];return this.bandProperties[e].map(e=>({key:e.label.toString(),label:e.label}))}_getBandCombinationValue(){const e=this.bandCombinationElement.value?.trim();if((0,i.i)(e))return[];const t=e.indexOf(",")>0?e.split(","):e.split(" ");return this._getBandComboFormatedValue(t)}_getBandComboFormatedValue(e){return e.map(e=>{let t;return t=1===this.method?parseFloat(e):2===this.method?parseInt(e,10)-1:e.trim(),t})}_updateBandValues(e){const t=this.widgetArgs.inputArgs;t&&(0===this.method&&t.BandNames?t.BandNames.value=e:1===this.method&&t.BandWavelengths?t.BandWavelengths.value=e:2===this.method&&t.BandIds&&(t.BandIds.value=e)),this.widgetArgs={...this.widgetArgs,inputArgs:t}}async updateRasterArg(){const e=this.rasterArg&&this.rasterArg.input;this.layer=await(e?.getSelectedLayer?.()),await this.updateBands()}async updateBands(){this.layer&&(this.layer.loaded?await this.updateBandsOnLayerLoad():this.layer.when(async()=>{await this.updateBandsOnLayerLoad(),this._setupValues()}))}_setupValues(){const e=this.widgetArgs.inputArgs;e&&e.Method&&void 0!==e.Method.value?this.method=e.Method.value:!e.BandIds||e.BandNames||e.BandWavelengths?!e.BandNames||e.BandIds||e.BandWavelengths?!e.bandWavelengths||e.BandIds||e.BandNames||(this.method=1):this.method=0:this.method=2}async updateBandsOnLayerLoad(){let e=[],t=[];const n=await(this.layer?.generateRasterInfo(this.layer.rasterFunction)),a=n?.keyProperties;if(a?.BandProperties?.forEach((n,a)=>{e.push({label:String(a+1)}),t.push({label:n.BandName??`Band_${a+1}`})}),!a.BandProperties||a.BandProperties&&!a.BandProperties.length){const a=this._getDefaultBandProperties(n.bandCount);t=a.bandNames,e=a.bandIds}this.bandProperties={bandIds:e,bandNames:t,bandWavelengths:[{label:"200"},{label:"400"},{label:"600"}]}}_getDefaultBandProperties(e){const t=[],n=[];for(let a=1;a<=e;a++)t.push({label:String(a)}),n.push({label:`Band_${a}`});return{bandNames:n,bandIds:t}}getBandCombinationValue(){const e=this.widgetArgs.inputArgs;return 0===this.method&&e.BandNames&&e.BandNames.value&&e.BandNames.value.length?e.BandNames.value.join(" "):1===this.method&&e.BandWavelengths&&e.BandWavelengths.value&&e.BandWavelengths.value.length?e.BandWavelengths.value.join(" "):2===this.method&&e.BandIds&&e.BandIds.value&&e.BandIds.value.length?e.BandIds.value.map(function(e){return+e+1}).join(" "):void 0}render(){const e=this.getMethodOptions(),t=this.getBandCombinationValue(),n=0===this.method?"bandNames":1===this.method?"bandWavelengths":"bandIds",s=this.getBandOptions(n);return(0,a.h)("div",{key:"76645510601b959ed54437206a5965dde7c1054f"},(0,a.h)("calcite-label",{key:"f9f1135cd0a27cd2613bf7e17c2d0a9c785d6093",alignment:"start",scale:i.s.scale??d.U.Scale,layout:"default",ref:e=>{this.bandCombinationMethodContainer=e}},(0,a.h)("rfx-label",{key:"aed396896d09efbda7e80b59ac6a31b806cca4a7",label:this.strings.method,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(o)()}),(0,a.h)("rfx-dtex-common-select",{key:"3a61404bb0c3a40c8c986d52dde30bcb0c54bffe",mode:this.widgetArgs.mode,options:e,value:this.method.toString(),onRfxArgumentChange:this.onMethodChange})),(0,a.h)("calcite-label",{key:"c94486e7e079e8323c4cccfec354891617af61e6",alignment:"start",scale:i.s.scale??d.U.Scale,layout:"default",ref:e=>{this.bandCombinationBandContainer=e}},(0,a.h)("rfx-label",{key:"be05a95a0e83bf09dd6b99cf55d3add9d522ea42",label:this.strings.band,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(r)()}),(0,a.h)("rfx-dtex-common-select",{key:"bd560189367f1a3c42005f2918055b1e83827bae",mode:this.widgetArgs.mode,options:s,onRfxArgumentChange:this.onBandChange,value:void 0})),(0,a.h)("calcite-label",{key:"daa87d4a6f3a7afb1f5b2826d09cc0bbbf04454d",alignment:"start",scale:i.s.scale??d.U.Scale,layout:"default",ref:e=>{this.bandCombinationCombinationContainer=e}},(0,a.h)("rfx-label",{key:"f2f310c87e2c17a940346b812f0fab6c692787ee",label:this.strings.combination,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(l)()}),(0,a.h)("calcite-input-text",{key:"d4e96ab445d52edd555a107e08b8b0d301b3894b",scale:i.s.scale??d.U.Scale,dir:this.direction,status:"idle",alignment:"start","prefix-text":"","suffix-text":"",value:t,onCalciteInputTextChange:this.onBandCombinationChange,ref:e=>{this.bandCombinationElement=e}})))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,a.a)(this)}}},33797:(e,t,n)=>{n.d(t,{C:()=>s,U:()=>a,a:()=>i,u:()=>d});const a={Scale:"s",PopoverTimer:60},s={s:"s",m:"m",l:"l"},i={absolute:"absolute",fixed:"fixed"},d=e=>e===s.s?s.m:s.l},45994:(e,t,n)=>{n.r(t),n.d(t,{rfx_cte_band_combination_editor:()=>a.R});var a=n(24684);n(92265),n(5294),n(13661),n(18423),n(21255),n(35431),n(69843),n(38949),n(32513),n(33752),n(44345),n(588),n(55448),n(2924),n(11840),n(52373),n(440),n(66744),n(33797),n(71802),n(36596),n(23795),n(17902),n(56451)},69843:(e,t,n)=>{n.d(t,{D:()=>o,S:()=>a,a:()=>u,b:()=>r,c:()=>c,f:()=>g,g:()=>h});const a={Arabic:"ar",Bosnian:"bs",Bulgarian:"bg",Catalan:"ca",Czech:"cs",Danish:"da",German:"de",Greek:"el",English:"en",EnglishUSA:"en-US",Spanish:"es",Estonian:"et",Finnish:"fi",French:"fr",Hebrew:"he",Hindi:"hi",Croatian:"hr",Hungarian:"hu",Indonesian:"id",Italian:"it",Japanese:"ja",Korean:"ko",Lithuanian:"lt",Latvian:"lv",Norwegian:"no",Dutch:"nl",Polish:"pl",PortugueseBrazil:"pt-BR",PortuguesePortugal:"pt-PT",Romanian:"ro",Russian:"ru",Serbian:"sr",Slovenian:"sl",Slovak:"sk",Swedish:"sv",Thai:"th",Turkish:"tr",Ukrainian:"uk",Vietnamese:"vi",ChineseChina:"zh-CN",ChineseHongKong:"zh-HK",ChineseTaiwan:"zh-TW"},s=["ar","de","es","fr","it","ja","ko","ru","pl","pt-br","zh-cn"],i={"ar-BH":"ar","en-AU":"en","en-CA":"en","en-GB":"en","en-US":"en","es-ES":"es","es-MX":"es","de-CH":"de","de-AT":"de","de-DE":"de","fr-CA":"fr","fr-CH":"fr","fr-FR":"fr","it-CH":"it","it-IT":"it",nb:"no",nn:"no","nn-no":"no",ind:"id",ukr:"uk"},d=[a.Arabic,a.Hebrew],o=a.English;function r(e){return!0===e?"rtl":"ltr"}function l(e,t){const n=o;let s=e?.toLowerCase();if(void 0!==s&&-1!==s.indexOf("-")){const[e,t]=s.split("-");s=`${e}-${t.toUpperCase()}`}if(!s)return n;const d=Object.keys(i);if(!0===d.includes(s))return t[s];const r=Object.values(a);if(!1===r.includes(s)){const e=function(e){const t=e?.match(/^([a-z]{2})-([A-Z]{1,2})$/);let n=a.English;return null!=t&&t?.length>1?n=t[1]:2===e?.length&&e.toLowerCase()===e&&(n=e),n}(s);!0===r.includes(e)?s=e:!0===d.includes(e)&&(s=t[e])}return s}function h(e=document.documentElement){const t=(n="[lang]",function e(t){let a;return a=void 0===t||t===document||t===window?null:t.closest(n)||e(t.getRootNode().host),a}(e));var n;const s=t?.lang??window.navigator.language,r=Object.values(a),h=o,c=l(s,i);return{locale:r.includes(c)?c:h,rtl:d.includes(s)}}async function c(e,t){const n=e.tagName.toLowerCase(),{locale:a,rtl:s}=h(e),i=await async function(e){const{path:t,locale:n,baseURL:a}=e;let s={};try{const e=await fetch(`${a}t9n/${t}.t9n.${n}.json`);s=await e.json()}catch(e){const n=await fetch(`${a}t9n/${t}.t9n.${o}.json`);s=await n.json()}return s}({path:n,locale:a,baseURL:t});return{strings:i,dir:r(s),locale:a}}function u(e,t){if(!1===/^(?:[a-z]+:)?\/\//i.test(e)){const n=window.location.href,a=new URL(n).origin,s=new URL(t).origin;a!==s&&(e=`${s}${e}`)}return e}function g(e,t="en"){let n=t;!0===Object.keys(i).includes(t)&&(n=i[t]);const a=n.toLocaleLowerCase();return!0===s.includes(a)&&(e=e.replace(/^https?:\/\/[^/]+\/en/,e=>e.replace("en",a))),e}}}]);