/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-new-ite-133667.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-new-ite-133667"],{3826:(e,t,a)=>{a.d(t,{a:()=>i,b:()=>s,c:()=>n,d:()=>r});const r=(0,a(37762).c)({typeKeywords:[],customParameters:[],analyzedLocationTypes:[],allowStoredAuth:!0,isSecured:null,checkAuth:!1}),i=r.state,s=r.state,n=r.state},8412:(e,t,a)=>{a.d(t,{g:()=>i});var r=a(83692);async function i(e){var t;const a=` ${null===(t=e[0])||void 0===t?void 0:t.url}/admin/services/types/customdataproviders`;try{return await(0,r.r)(a,"post")}catch(e){console.warn(e)}}},33547:(e,t,a)=>{a.d(t,{a:()=>p,b:()=>d,c:()=>u,e:()=>l,f:()=>g,i:()=>o});var r=a(59317),i=a(3826);const s="create feature layer",n="my content",c=e=>{switch(e){case"build":return"blank";case"existing":return"fs";case"template":return"template";case"link":return"url"}},l=e=>{const t=r.c.telemetry;null==t||t.stepWorkflow(s,"enable "+("captureGPS"===e?"gps":"enableZDefaults"===e?"z":"m"),{category:s,attribute:c(i.a.addFeatureLayerType),pageName:n})},o=e=>{const t=r.c.telemetry;null==t||t.stepWorkflow(s,`expand ${e} details`,{category:s,attribute:c(i.a.addFeatureLayerType),pageName:n})},d=()=>{const e=r.c.telemetry;null==e||e.stepWorkflow(s,"filter",{category:s,attribute:c(i.a.addFeatureLayerType),pageName:n})},u=e=>{const t=c(e),a=r.c.telemetry;null==a||a.stepWorkflow(s,"from option",{category:s,attribute:t,pageName:n})},p=()=>{const{addFeatureLayerType:e,serviceInfo:t}=i.a,a=t,l=r.c.telemetry;null==l||l.endWorkflow(s,{category:s,attribute:c(e),pageName:n,count:a.layers.length,number:a.tables.length})},g=e=>{var t;null===(t=r.c.telemetry)||void 0===t||t.logError({category:s,error:e})}},46904:(e,t,a)=>{a.d(t,{a:()=>n,b:()=>s,c:()=>o,d:()=>d,e:()=>u,f:()=>p,g:()=>g,i:()=>c,u:()=>l});a(93814);var r=a(41473);function i(e){var t;return!!(null===(t=e.owner)||void 0===t?void 0:t.toLowerCase().includes("esri"))}function s(e){var t;return i(e)&&!!(null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Requires Credits"))}function n(e){var t;return i(e)&&!!(null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Requires Subscription"))}function c(e,t){return e.owner===t.username}function l(e,t){return c(e,t)||function(e,t){var a;if(null!=e.isAdmin)return!!e.isAdmin;const r=e.owner,i="admin"===e.itemControl,s=["esri_livingatlas","esri_demographics","esri_boundaries"];if((null===(a=e.portal)||void 0===a?void 0:a.isPortal)&&!c(e,t)&&i&&r.includes("esri_")&&!s.includes(r))return!1;return i}(e,t)}const o=(e,t)=>!!t.orgId&&e.every(e=>e.isOrgItem),d=(e,t)=>`${(0,r.a)(t)}item.html?id=${e}`,u=(e,t)=>`${(0,r.g)(t)}/content/users/${e}`,p=e=>e.reduce((e,t)=>(e[t.owner]=e[t.owner]?[...e[t.owner],t.id]:[t.id],e),{}),g=(e,t)=>`${(0,r.a)(t)}content/items/${e}`},59285:(e,t,a)=>{a.r(t),a.d(t,{arcgis_new_item_pages_feature_layer_select:()=>p});var r=a(87849),i=a(72257),s=a(3826),n=a(95878),c=a(33547),l=a(59317),o=a(8412),d=a(10578),u=a(29599);a(37762),a(86562),a(15332),a(83692),a(931),a(93814),a(41473),a(54251),a(1654),a(46904);const p=class{constructor(e){(0,r.r)(this,e),this.newItemUpdatePage=(0,r.c)(this,"newItemUpdatePage",7),this.options={build:{icon:"layer",page:"featureLayerFromScratch"},existing:{icon:"layers",page:"featureLayerFromExisting"},template:{icon:"add-layer",page:"featureLayerFromTemplate"},link:{icon:"link",page:"featureLayerFromURL"},custom:{icon:"layer-connection",page:"featureLayerFromCustomDataProvider"},file:{icon:"upload-to",page:"featureLayerUpload"}},this.selected="build",this.openCDPAlert=void 0,this.hasCDPPrivileges=void 0}async componentWillLoad(){const{user:e,portal:t}=l.c;n.u.onlyHosted=!1,s.a.enablePublishing=!1,s.a.newItemMode="featureLayer",s.a.type="Feature Service",i.i.tags=[],i.i.snippet="",s.a.serviceInfo=null,s.a.selectedServiceInfoLayersNames=null;const a=(await(0,u.b)(e,t)).filter(function(e){return"HOSTING_SERVER"===e.serverRole.toUpperCase()});if(this.selected=s.a.addFeatureLayerType||"build",this.i18n=n.u.i18n.featureLayerSelect,a&&(l.c.hostingServer=a,t.isPortal)){this.hasCDPPrivileges=await this.canPublishCustomDataProvider(e,t);const r=await(0,o.g)(a);this.hasCustomDataProviders=r&&Object.keys(r).length>0}}handleNext(){const e=this.selected;s.a.addFeatureLayerType=e,s.a.enablePublishing=!0,n.u.onlyHosted="file"===e,(0,c.c)(e),this.openCDPAlert="custom"===this.selected&&!this.hasCustomDataProviders,this.openCDPAlert||this.newItemUpdatePage.emit(this.options[this.selected].page)}async canPublishCustomDataProvider(e,t){const a=await(0,d.m)(e),r=await(0,d.d)(e,t);return a&&r}render(){const{i18n:e,options:t}=this,{portal:a,config:{helpBase:i,helpMap:s}}=l.c;return(0,r.h)("div",{key:"c5ee727d4d7bfe037e06c045c0cd86bc083e5536"},(0,r.h)("arcgis-new-item-description",{key:"86fe144dbbc60cc38a8dd35417b0441d8d5ca398",header:e.heading}),(0,r.h)("calcite-tile-select-group",{key:"c2a66253a94880478dfd36b39cba42b27d90abc0",layout:"vertical",class:"tile-select"},Object.keys(t).map(i=>{const{icon:s}=t[i];if(("custom"!==i||this.hasCDPPrivileges&&a.isPortal)&&("data"!==i||l.c.allowedModes.includes("file")))return(0,r.h)("calcite-tile-select",{checked:this.selected===i,heading:e.options[i].title,description:e.options[i].description,icon:s,name:"feature-layer-create-mode","input-enabled":!0,width:"full",type:"radio",value:i,onCalciteTileSelectChange:e=>{this.selected=e.target.value}})})),(0,r.h)("calcite-alert",{key:"4a4db55c60357e415e2b4abcbb6f010886218298",icon:"exclamation-mark-triangle",open:this.openCDPAlert,label:this.i18n.alertTitle,kind:"danger",onCalciteAlertClose:()=>this.openCDPAlert=!1},(0,r.h)("div",{key:"2a4e83a6f8bc8ff1258c4d889b741ea0c22002e2",slot:"title"},e.alertTitle," "),(0,r.h)("div",{key:"60361c887c988ca9d24c1c98707a300131740006",slot:"message"},e.alertDesc),(0,r.h)("calcite-link",{key:"663e11879bc90d84aac542a4cd599fc81cb53813",slot:"link",href:`${i}${s[120004964]}`,target:"_blank"},e.learnMore)))}get el(){return(0,r.a)(this)}};p.style=".tile-select{margin-top:1.25rem}"},72257:(e,t,a)=>{a.d(t,{a:()=>s,g:()=>l,i:()=>n});var r=a(37762),i=a(86562);const s=(0,r.c)({title:"",snippet:"",tags:[],categories:[]}),n=s.state,c=new Map;function l(e){return(0,i.g)({el:e,tag:"arcgis-item-properties",cache:c})}},86562:(e,t,a)=>{a.d(t,{g:()=>i});var r=a(15332);function i(e){const{el:t,tag:a,cache:i}=e,s=(0,r.c)(t,a),n=i.get(s);return n||(s?(i.set(s,s.store),s.store):null)}},95878:(e,t,a)=>{a.d(t,{a:()=>r,u:()=>i});const r=(0,a(37762).c)({nextText:"next",cancelText:"cancel",workflow:"content",scale:"m",disableScroll:!1,onlyHosted:!1,featureFlags:{}}),i=r.state}}]);