/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-513899.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-513899"],{931:(e,t,r)=>{r.d(t,{l:()=>i});var n=r(93814);const i=async(e,t)=>(await n.e.exports.loadModules(e,t)).map(e=>e.__esModule&&e.default?e.default:e)},3470:(e,t,r)=>{r.d(t,{a:()=>u,b:()=>d,c:()=>h,d:()=>p,f:()=>c,g:()=>v});var n=r(96295),i=r(83692),o=r(15332),s=r(41473),a=r(54251),l=r(31581);async function c(e,t,r){const n=`${r?"https://www.arcgis.com/sharing/rest/":(0,s.g)(t)}community/users/${e}`,o=(null==n?void 0:n.includes("www.arcgis.com"))&&t.isPortal,a=(null==n?void 0:n.includes(".arcgis.com"))&&!t.isPortal&&!t.user,l=o||a?{disableIdentityLookup:!0,addTokenManually:!1}:{};return(0,i.f)(async()=>{try{return await(0,i.r)(n,{},l)}catch(t){return{username:e}}},"user",n)}async function u(e,t,r,n){var i,s;if("public_authoritative"===(null==e?void 0:e.contentStatus)||"public_authoritative"===(null===(i=e.sourceJSON)||void 0===i?void 0:i.contentStatus)){const i=await(0,l.f)(e,r,t,n);if(!i)return c(e.owner,t,n);const{description:a,name:u,thumbnail:d,url:h}=i;return{description:a?(0,o.s)(a):"",fullName:u,username:e.owner,thumbnail:d,id:e.orgId||(null===(s=e.portal)||void 0===s?void 0:s.id),url:h}}return c(e.owner,t,n)}async function d(e,t,r){const n=r?"https://www.arcgis.com/sharing/rest/":(0,s.g)(t),o=r?{disableIdentityLookup:!0,addTokenManually:!1}:{};return(0,i.f)(async()=>(0,i.r)(`${n}community/groups`,{q:`(owner:"${e}")`,num:100},o),"userGroups",e)}async function h(e,t,r){const o=r?"https://www.arcgis.com/sharing/rest/":(0,s.g)(t),a=r?{disableIdentityLookup:!0,addTokenManually:!1}:{};return(0,i.f)(async()=>(await(0,i.r)(`${o}search`,{q:`(owner:"${e}") ${n.H}`,num:1},a)).total,"userItemsTotal",e)}function p(e,t,r=!1){if(null==e?void 0:e.thumbnailUrl)return e.thumbnailUrl;if(!(null==e?void 0:e.thumbnail))return null;if(e.thumbnail.startsWith("http"))return e.thumbnail;const n=(0,a.g)(t);return`${r?"https://www.arcgis.com/sharing/rest/":(0,s.g)(t)}community/users/${e.username}/info/${e.thumbnail}${n&&!r?`?token=${n}`:""}`}function v(e,t){const{fullName:r,firstName:n,lastName:i,username:o}=e;return r||(n&&i?"ja"===t?`${i} ${n}`:`${n} ${i}`:o)}},4429:(e,t,r)=>{r.d(t,{a:()=>l,b:()=>d,c:()=>o,d:()=>c,e:()=>i,f:()=>n,g:()=>h,i:()=>p,m:()=>s,t:()=>a,u:()=>u});const n=(e,t)=>{let r,n="idle";const i=(...i)=>new Promise(o=>{switch(n){case"flushed":n="idle",r?(clearTimeout(r),o(e(...i))):o(null);break;case"invoked":clearTimeout(r),n="idle",o(e(...i));break;case"cancelled":clearTimeout(r),n="idle",o(null);break;default:r&&clearTimeout(r),n="pending",r=setTimeout(()=>(n="idle",o(e(...i))),t)}});return i.flush=function(...e){return n="flushed",i(...e)},i.invoke=function(...e){return n="invoked",i(...e)},i.cancel=function(...e){return n="cancelled",i(...e)},i.getStatus=function(){return n},i};function i(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function o(e){return null!=e}async function s(e,t){return await Promise.all([e,a(t)]),e}function a(e){return new Promise(t=>setTimeout(t,e))}const l=(e,t)=>Object.fromEntries((e||[]).map(e=>{const{key:r,data:n}=t(e);return[r,n]})),c=(e,t)=>e.length===t.length&&e.reduce((e,r)=>e&&t.indexOf(r)>-1,!0);function u(e,t){const r=[],n={};return e.forEach(e=>{const i=t(e);null==n[i]&&(n[i]=e,r.push(e))}),r}function d(e){const t={boolean:{},number:{},string:{}},r=[];return e.filter(e=>{let n=typeof e;return n in t?!t[n].hasOwnProperty(e)&&(t[n][e]=!0):!(r.indexOf(e)>=0)&&r.push(e)})}const h=(e,t)=>[...Array(Math.ceil(e.length/t))].map((r,n)=>e.slice(t*n,t+t*n)),p=(e,t)=>e.includes(t)},12192:(e,t,r)=>{r.d(t,{a:()=>s,g:()=>c});var n=r(15332),i=r(94984),o=r(87849);function s(e){var t,r,o;const s=null!==(t=(0,n.c)(e,"[lang]"))&&void 0!==t?t:null===(o=null===(r=e.shadowRoot)||void 0===r?void 0:r.ownerDocument)||void 0===o?void 0:o.documentElement,a=((null==s?void 0:s.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return i.l.has(a)?i.l.get(a):i.l.has(a.slice(0,2))?i.l.get(a.slice(0,2)):"en"}const a={};function l(e,t){const r=`${e}${t}`;return a[r]||(a[r]=function(e,t){return new Promise((r,n)=>{fetch((0,o.d)(`../arcgis-app-assets/i18n/${e}.i18n.${t}.json`)).then(e=>{e.ok?r(e.json()):n()},()=>n())})}(e,t)),a[r]}async function c(e,t){const r=t||e.tagName.toLowerCase(),o=s(e),a=function(e){var t,r,o;const s=null!==(t=(0,n.c)(e,"[lang]"))&&void 0!==t?t:null===(o=null===(r=e.shadowRoot)||void 0===r?void 0:r.ownerDocument)||void 0===o?void 0:o.documentElement,a=((null==s?void 0:s.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return i.l.has(a)?i.l.get(a):i.l.has(a.slice(0,2))?a:"en"}(e);let c;try{c=await l(r,o)}catch(e){console.warn(`no locale for ${r} (${o}) loading default locale en.`),c=await l(r,"en")}return[c,o,a]}},26854:(e,t,r)=>{r.d(t,{a:()=>l,c:()=>c,g:()=>o,h:()=>i,i:()=>s,r:()=>a});var n=r(15332);function i(e){const t=document.createElement("textarea");return t.innerHTML=e,t.innerText}function o(e){return function(e){return null==e?void 0:e.replace(/&#10;&#13;|&#10;|&#13;|\r\n|\r|\n/g,"<br>")}(function(e){return null==e?void 0:e.replace(/(?:\r)/g,"&#10;").replace(/(?:\n)/g,"&#13;")}(function(e){return null==e?void 0:e.replace(/(https?:\/\/[^\s]+)/g,e=>`<a href="${e}" target="_blank">${e}</a>`)}(function(e){return null==e?void 0:e.replace(/(?:&#10;)/g,"\r").replace(/(?:&#13;)/g,"\n")}(e))))}function s(e){return e.replace(/\$\{startSup\}/g,"<sup>").replace(/\$\{endSup\}/g,"</sup>")}function a(e,t,r){return e.replace(/\$\{startLink\}/g,`<calcite-link label="${r}" href="${t}" target="_blank">`).replace(/\$\{endLink\}/g,"</calcite-link>")}function l(e){return e.replace(/\$\{startStrong\}/g,"<strong>").replace(/\$\{endStrong\}/g,"</strong>")}function c(e){return(0,n.s)((null==e?void 0:e.trim())||"").replace(/[!*+\-&|()[\]{}^~?:"\\]/g,"\\$&")}},31581:(e,t,r)=>{r.d(t,{f:()=>o});var n=r(83692),i=r(15332);async function o(e,t,r,o){var s,a,l,c,u;const d=null!==(u=null!==(l=null!==(s=e.orgId)&&void 0!==s?s:null===(a=e.sourceJSON)||void 0===a?void 0:a.orgId)&&void 0!==l?l:null===(c=e.portal)||void 0===c?void 0:c.id)&&void 0!==u?u:null==r?void 0:r.id;return(0,n.f)(()=>async function(e,t,r,o,s){var a,l;const c=(null===(a=e.portal)||void 0===a?void 0:a.portalHostname)||(null==o?void 0:o.portalHostname)||(null===(l=null==o?void 0:o.restUrl)||void 0===l?void 0:l.replace("/sharing/rest","")),u=s?`https://www.arcgis.com/sharing/rest/portals/${t}`:`https://${c}/sharing/rest/portals/${t}`;if(!c&&!s)return null;const d=s?{disableIdentityLookup:!0,addTokenManually:!1}:{},h=await(0,n.r)(u,{},d),{urlKey:p,thumbnail:v,customBaseUrl:f}=h,m=`https://${p}.${f}/`,g=v?`${m}sharing/rest/portals/self/resources/${v}`:null;let b,w;try{const e=await(0,n.r)(`${u}/resources/localizedOrgProperties`,{start:1,num:100},d);if(e){const t=e[r]||e.default;b=t.name,w=t.description||e.description}}catch(e){}return{name:b||h.name,description:(0,i.a)(w||h.description),url:`${m}home/`,thumbnail:g}}(e,d,t,r,o),"verified",d)}},46227:(e,t,r)=>{r.d(t,{g:()=>n});const n=()=>[2,1,1,1,3].map(e=>{let t="";for(let r=0;r<e;r++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t}).join("-")},54251:(e,t,r)=>{r.d(t,{g:()=>i});var n=r(59317);function i(e){var t,r,i,o;return null!=e||(e=null===n.c||void 0===n.c?void 0:n.c.portal),(null===(t=null==e?void 0:e.credential)||void 0===t?void 0:t.token)||(null==e?void 0:e.token)||(null===(i=null===(r=null==e?void 0:e.user)||void 0===r?void 0:r.credential)||void 0===i?void 0:i.token)||(null===(o=null==e?void 0:e.portalUser)||void 0===o?void 0:o.token)||""}},83682:(e,t,r)=>{r.r(t),r.d(t,{arcgis_user_picker:()=>h});var n=r(87849),i=r(59317),o=r(4429),s=r(46227),a=r(12192),l=r(3470),c=r(41473),u=r(26854),d=r(83692);r(37762),r(15332),r(94984),r(931),r(93814),r(54251),r(31581);const h=class{constructor(e){(0,n.r)(this,e),this.arcgisUserPickerSelect=(0,n.c)(this,"arcgisUserPickerSelect",7),this.arcgisUserPickerUpdate=(0,n.c)(this,"arcgisUserPickerUpdate",7),this.uniqueId=(0,s.g)(),this.scrollToActiveItem=()=>{var e;const t=null===(e=this.list)||void 0===e?void 0:e.querySelector(`li#${this.getActiveDescendantId()}`);if(!t||!this.list)return;const r=this.list.parentElement;(t.offsetTop<r.scrollTop||t.offsetTop+t.offsetHeight>r.offsetTop+r.offsetHeight)&&t.scrollIntoView({behavior:"smooth"})},this.keydownHandler=e=>{const{key:t}=e;switch(t){case"ArrowUp":e.preventDefault(),this.shiftActiveItemIndex(-1);break;case"ArrowDown":e.preventDefault(),this.shiftActiveItemIndex(1);break;case"Home":e.preventDefault(),this.activeItemIndex=0,this.scrollToActiveItem();break;case"End":if(!this.open)return;e.preventDefault(),this.activeItemIndex=this.getResultsLength()-1,this.scrollToActiveItem();break;case"Escape":this.reset(),e.preventDefault(),this.waitAndFocusButton();break;case"Enter":const t=this.getActiveUser();t&&(this.selectedUser=t,this.arcgisUserPickerSelect.emit(t),e.preventDefault(),this.reset(),this.waitAndFocusButton())}},this.searchUsers=async()=>{const{portal:e,query:t,search:r,group:n}=this,i=await async function({portal:e,query:t,searchTerm:r,group:n,config:i}){const o=function(e){return"enterprise"===(null==e?void 0:e.provider)&&!!(null==e?void 0:e.providerGroupName)}(n)||function(e){var t;return(null===(t=null==e?void 0:e.provider)||void 0===t?void 0:t.includes("oidc_"))&&!!(null==e?void 0:e.providerGroupName)}(n),s=(0,u.c)(r),a=o?s:s?`(${s}) `:"",l=o?`${(0,c.g)(e)}community/groups/${n.id}/userlist`:`${(0,c.g)(e)}portals/self/users/search`,h=e.isPortal?"-username:esri_livingatlas -username:esri_boundaries -username:esri_demographics -username:esri_nav -username:esri_webstyles":"",p=((null==i?void 0:i.systemUsers)||[]).reduce((e,t)=>`${e} -username: ${t}`,""),v=(null==l?void 0:l.includes("www.arcgis.com"))&&e.isPortal?{disableIdentityLookup:!0,addTokenManually:!1}:{};return(0,d.r)(l,Object.assign({num:100,sortField:"relevance"},o?{name:a}:{q:`${a} ${null!=t?t:""} ${h} ${p}`}),v)}({portal:e,query:t,searchTerm:r.trim(),group:n});i.users&&!i.results&&(i.results=i.users),this.searchResults=i,this.arcgisUserPickerUpdate.emit(i),this.loading=!1,this.computeActiveItemIndex(),this.open=!0},this.computeActiveItemIndex=()=>{var e,t,r;(null===(t=null===(e=this.searchResults)||void 0===e?void 0:e.results)||void 0===t?void 0:t.length)?this.activeItemIndex=Math.max(null===(r=this.searchResults.results)||void 0===r?void 0:r.findIndex(e=>{var t;return e.username===(null===(t=this.selectedUser)||void 0===t?void 0:t.username)}),0):this.activeItemIndex=0},this.inputHandler=(0,o.f)(this.searchUsers,300),this.renderUser=(e,t)=>{const{portal:r,selectedUser:i,activeItemIndex:o}=this,s=this.formatUniqueUserId(e);return(0,n.h)("li",{"aria-selected":(null==i?void 0:i.username)===e.username,key:s,id:s,role:"option",tabindex:"-1",class:{"list-item":!0,"list-item--active":o===t},onClick:()=>{this.selectedUser=e,this.arcgisUserPickerSelect.emit(e),this.reset()}},(0,n.h)("arcgis-user-avatar",{class:"user-avatar",user:e,scale:"m",portal:r,showName:!0,description:e.username}))},this.portal=void 0,this.query="",this.group=void 0,this.config=void 0,this.selectedUser=void 0,this.selection="single",this.status="idle",this.overlayPositioning="absolute",this.search="",this.activeItemIndex=0,this.searchResults=void 0,this.open=!1,this.loading=!0,this.width=void 0}async componentWillLoad(){var e;const t=await(0,a.g)(this.el);this.i18n=t[0],this.lang=t[1],null!==(e=this.config)&&void 0!==e||(this.config=null===i.c||void 0===i.c?void 0:i.c.config)}async setFocus(){var e;null===(e=this.input)||void 0===e||e.focus()}reset(){this.search="",this.computeActiveItemIndex(),this.open=!1,this.loading=!0}getResultsLength(){var e,t;return(null===(t=null===(e=this.searchResults)||void 0===e?void 0:e.results)||void 0===t?void 0:t.length)||0}getActiveUser(){var e,t;return null===(t=null===(e=this.searchResults)||void 0===e?void 0:e.results)||void 0===t?void 0:t[this.activeItemIndex]}getActiveDescendantId(){const e=this.getActiveUser();return this.formatUniqueUserId(e)}formatUniqueUserId(e){return(null==e?void 0:e.username)?`${e.username.replace(".","")}-${this.uniqueId}`:""}shiftActiveItemIndex(e){const t=this.getResultsLength(),r=(this.activeItemIndex+t+e)%t;this.activeItemIndex=r,this.scrollToActiveItem()}async waitAndFocusButton(){var e;await(0,o.t)(200),null===(e=this.button)||void 0===e||e.focus()}render(){var e;const{i18n:t,portal:r,selectedUser:i,referenceElement:s,uniqueId:a,open:c,loading:u,lang:d,status:h}=this;return(0,n.h)(n.H,{key:"f634fadb45c888f59cdc7eff9f4f343bc440a106"},(0,n.h)("div",{key:"dd58b08a33c507e6b1fe53dddc5707ec66815ae2",class:"wrapper"},c||!i?(0,n.h)("div",{class:"search-wrapper"},(0,n.h)("calcite-icon",{icon:"search",scale:"s",class:"search"}),(0,n.h)("label",{class:"screen-readers-only",htmlFor:`input-${a}`,id:`label-${a}`},t.selectUser),(0,n.h)("input",{ref:e=>{var t;this.width=null===(t=this.el)||void 0===t?void 0:t.clientWidth,this.input=e},class:"input",id:`input-${a}`,role:"combobox","aria-autocomplete":"none","aria-expanded":"false","aria-controls":`listbox-${a}`,"aria-activedescendant":this.getActiveDescendantId(),onInput:e=>{this.search=e.currentTarget.value,this.loading=!0,this.open=!0,this.inputHandler()},onBlur:async()=>{await(0,o.t)(300),this.open=!1},onFocus:()=>{!this.search&&this.searchResults||this.searchUsers()},onKeyDown:this.keydownHandler,placeholder:this.i18n.searchMembers,type:"text",value:this.search,onClick:e=>{this.open=!0,e.stopPropagation()}}),!!this.search&&(0,n.h)("button",{class:"x","aria-label":this.i18n.clear,onClick:()=>{this.search="",this.searchUsers()},tabIndex:-1},(0,n.h)("calcite-icon",{icon:"x",scale:"m",class:"x--icon"}))):(0,n.h)("button",{class:{edit:!0,invalid:"invalid"===h},onClick:()=>{this.open=!0,this.searchUsers(),setTimeout(()=>{var e;null===(e=this.input)||void 0===e||e.focus()},200)},"aria-label":i?t.editSelection.replace("${name}",(0,l.g)(i,d)):t.selectUser,ref:e=>this.button=e},i?(0,n.h)(n.F,null,(0,n.h)("arcgis-user-avatar",{class:"user-avatar",user:i,scale:"m",portal:r,showName:!0,description:i.username}),(0,n.h)("calcite-icon",{icon:"pencil",scale:"s"})):(0,n.h)(n.F,null,t.searchMembers,(0,n.h)("calcite-icon",{icon:"chevron-down",scale:"s"}))),(0,n.h)("div",{key:"c0ff4ec8095c27d54992ce2e3e0be556577dbf1b",class:"reference-element",ref:e=>this.referenceElement=e}),(0,n.h)("slot",{key:"9b762e0779a450891bc7992a93394cfea6e713c8",name:"input-message"})),(0,n.h)("calcite-popover",{key:"25d8c1dadedec44cb670badf3954bda0ca824b00",class:"popover",label:t.selectUser,pointerDisabled:!0,referenceElement:s,placement:"bottom-start",open:c&&(u||!!this.getResultsLength()),focusTrapDisabled:!0,offsetDistance:2,overlayPositioning:this.overlayPositioning},(0,n.h)("div",{key:"fa391cf05f5f2b38b6593b9cf1996e1ce1f4d6dc",class:"list-wrapper",style:this.width?{width:`${this.width}px`}:{}},u?(0,n.h)("calcite-loader",{label:"Loading",class:"loader"}):(0,n.h)("ul",{ref:e=>this.list=e,"aria-label":t.members,"aria-multiselectable":"false",class:"list",id:`listbox-${a}`,role:"listbox",tabIndex:-1},null===(e=this.searchResults)||void 0===e?void 0:e.results.map(this.renderUser)))))}get el(){return(0,n.a)(this)}};h.style=":host{position:relative;display:block;width:100%}.edit{border:1px solid var(--calcite-color-border-input);font-family:inherit;margin-bottom:0.75rem;box-sizing:border-box;display:flex;width:100%;cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;align-items:center;justify-content:space-between;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;background-color:var(--calcite-color-foreground-1);padding-left:0.75rem;padding-right:0.75rem;padding-top:0.75rem;padding-bottom:0.75rem;color:var(--calcite-color-text-1);text-decoration-line:none;outline-color:transparent;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.edit:hover{background-color:var(--calcite-color-background)}.edit:focus{outline:2px solid var(--calcite-color-brand);outline-offset:-2px}.invalid{border-color:var(--calcite-color-status-danger)}.invalid:focus{outline-color:var(--calcite-color-status-danger)}.screen-readers-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.search-wrapper{position:relative;display:block;width:100%}.search{pointer-events:none;position:absolute;z-index:10;margin-top:1rem;font-size:0.875rem;color:var(--calcite-color-text-3);inset-inline-start:0.75rem}.x{position:absolute;top:0px;z-index:10;margin-top:0.25rem;cursor:pointer;border-style:none;padding:0.5rem;color:var(--calcite-color-text-1);outline:2px solid transparent;outline-offset:2px;inset-inline-end:0.25rem;background:transparent}.input{position:relative;z-index:0;box-sizing:border-box;display:block;height:3rem;width:100%;padding-top:0.75rem;padding-bottom:0.75rem;padding-left:2.5rem;padding-right:2.5rem;font-size:0.875rem;color:var(--calcite-color-text-1);--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-backdrop-filter;transition-duration:150ms;border:1px solid var(--calcite-color-border-input);background-color:transparent;font-family:inherit}.input::-webkit-search-cancel-button{display:none}.input::-ms-clear{display:none}.input:focus{--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);outline:2px solid var(--calcite-color-brand);outline-offset:-2px}.popover{z-index:20;width:100%}.loader{width:100%;padding-top:6rem;padding-bottom:6rem}.list-wrapper{height:auto;width:100%;overflow:auto;max-height:16rem}.list{margin:0px;width:100%;list-style-type:none;padding:0px}.list-item{box-sizing:border-box;display:block;height:3rem;width:100%;cursor:pointer;padding-top:0.5rem;padding-bottom:0.5rem;padding-left:2.5rem;padding-right:2.5rem;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-backdrop-filter;transition-duration:150ms;border-bottom:1px solid var(--calcite-color-border-3)}.list-item:hover{background-color:var(--calcite-color-background)}.list-item:last-child{border-bottom-width:0px}.list-item--active{outline:2px solid var(--calcite-color-brand);outline-offset:-2px}"},83692:(e,t,r)=>{r.d(t,{a:()=>f,b:()=>v,c:()=>p,f:()=>d,g:()=>w,i:()=>h,p:()=>b,r:()=>m});var n=r(59317),i=r(4429),o=r(931),s=r(41473),a=r(54251);const l={},c={},u={};async function d(e,t,r,n){var i,o,s,a;const d=null===(o=null===(i=u[t])||void 0===i?void 0:i[r])||void 0===o?void 0:o.expireAt,h=!!d&&(new Date).getTime()>d;if((null===(s=l[t])||void 0===s?void 0:s[r])&&!h)return l[t][r];c[t]||(c[t]={}),c[t][r]&&!h||(c[t][r]=e());const p=await c[t][r];if(l[t]||(l[t]={}),u[t]||(u[t]={}),l[t][r]=p,n){const{expireAfter:e,getExpireAfterFromResult:i}=n,o=i||e?(new Date).getTime()+(null!==(a=null==i?void 0:i(p))&&void 0!==a?a:e):null;u[t][r]=Object.assign(Object.assign({},u[t][r]),{expireAt:o})}return p}function h(e,t){var r;return null===(r=null==l?void 0:l[e])||void 0===r?void 0:r[t]}const p=(e,t)=>{var r,n;t?(null===(r=l[e])||void 0===r||delete r[t],null===(n=c[e])||void 0===n||delete n[t]):(delete l[e],delete c[e])};function v(e){var t,r;return null!==(t=null==e?void 0:e.id)&&void 0!==t?t:null===(r=null==e?void 0:e.sourceJSON)||void 0===r?void 0:r.id}async function f(e,t,r={},n){const[i]=await(0,o.l)(["esri/request"]);e.includes("f=")||t.append("f","json");const s=(0,a.g)();return s&&!t.has("token")&&t.append("token",s),new Promise((o,s)=>{i(e,Object.assign(Object.assign({body:t},r),{timeout:r.timeout||0,method:n||"auto"})).then(e=>{o(e.data)}).catch(e=>s(e))})}async function m(e,t={},r={},i,s){const[a]=await(0,o.l)(["esri/request"]),{api:l,portal:c}=n.c,{customToken:u,addTokenManually:d,addSSL:h,useProxy:p}=r,v=Object.assign({},t);if(e.includes("f=")||!0===(null==s?void 0:s.excludeJson)||(v.f="json"),u)v.token=u;else if(!1!==d){const e=await w(c);e&&(v.token=e)}const f=!1===h?e:function(e){var t;const{config:r}=n.c;return"https:"===window.location.protocol||!0===(null===(t=null==r?void 0:r.self)||void 0===t?void 0:t.allSSL)?e.replace("http:","https:"):e}(e);if(3===l){const e=Object.assign({url:f,content:v,timeout:r.timeout||0},null==s?void 0:s.v3Request);r.withCredentials&&(e.withCredentials=r.withCredentials);return a(e,"post"===i?Object.assign({usePost:!0},r):r)}{const e=Object.assign(Object.assign(Object.assign({query:v,method:i||"auto"},r),{timeout:r.timeout||0,useProxy:p}),(null==r?void 0:r.disableIdentityLookup)?{authMode:"anonymous"}:{});return(await a(f,e)).data}}const g=[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,15,15,30,30,30,30,30,30,30,30,30,30,120];const b=async(e,t,r)=>{var n,o;const s=null!==(n=null==t?void 0:t.pendingStatuses)&&void 0!==n?n:["processing","partial","Pending","InProgress","EXECUTING"],a=null!==(o=null==t?void 0:t.successStatuses)&&void 0!==o?o:["completed","Completed","COMPLETED"];let l=0;const c=async()=>{const n=await m(e,null==t?void 0:t.requestParams,{},r),o=n.status||n.jobStatus;if(s.includes(o))return await(0,i.t)((u=l++,1e3*g[u>-1&&u<g.length-1?u:g.length-1])),c();if(a.includes(o)||"failed"===o||"esriJobFailed"===o)return n;throw n;var u};try{return c()}catch(e){throw console.error(e),e}},w=async e=>{var t;if(!(null==e?void 0:e.isPortal)||!(0,s.i)(e))return(0,a.g)(e);if(!(null==e?void 0:e.user)&&!(null==e?void 0:e.portalUser)&&(0,s.i)(e))return;const{token:r}=await d(()=>y(e),"platformSelf",null!==(t=v(e.user))&&void 0!==t?t:e.id,{getExpireAfterFromResult:e=>e.expires_in});return r},y=async e=>{const t=await(async e=>{var t,r;const[n]=await(0,o.l)(["esri/identity/IdentityManager"]);return null!==(r=null===(t=(await d(()=>n.getCredential((0,s.g)(e),{oAuthPopupConfirmation:!1}),"credential",v(e.user))).oAuthState)||void 0===t?void 0:t.appId)&&void 0!==r?r:"arcgisonline"})(e),r={"X-Esri-Auth-Client-Id":t,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")};return m(`${(0,s.g)(e)}/oauth2/platformSelf`,{},{disableIdentityLookup:!0,headers:r,addTokenManually:!1,withCredentials:!0},"post",{v3Request:{headers:r}})}},94984:(e,t,r)=>{r.d(t,{C:()=>a,a:()=>d,b:()=>u,f:()=>l,g:()=>s,l:()=>o,s:()=>p});var n=r(15332),i=r(931);const o=new Map([["ar","ar"],["bg","bg"],["bs","bs"],["ca","ca"],["cs","cs"],["da","da"],["de","de"],["el","el"],["en","en"],["es","es"],["et","et"],["fi","fi"],["fr","fr"],["he","he"],["hr","hr"],["hu","hu"],["id","id"],["it","it"],["ja","ja"],["ko","ko"],["lt","lt"],["lv","lv"],["nb","no"],["no","no"],["nl","nl"],["pl","pl"],["pt-br","pt-BR"],["pt-pt","pt-PT"],["ro","ro"],["ru","ru"],["sk","sk"],["sl","sl"],["sr","sr"],["sv","sv"],["th","th"],["tr","tr"],["uk","uk"],["vi","vi"],["zh-cn","zh-CN"],["zh-hk","zh-HK"],["zh-tw","zh-TW"]]);function s(e){return function(e,t,r){const i=(0,n.c)(e,`[${t}]`);return i?i.getAttribute(t):r}(e,"dir","ltr")}const a={rtl:"arcgis--rtl"};async function l(e,t){const{api:r,type:n,places:o}=t||{};if(3===r){const[r]=await(0,i.l)(["dojo/number"]);return r.format(e,{type:n,places:o,pattern:null==t?void 0:t.pattern})}const[s]=await(0,i.l)(["esri/intl"]),a=s.convertNumberFormatToIntlOptions({places:o,style:n,digitSeparator:!0});return s.formatNumber(e,Object.assign(Object.assign({},a),{style:n}))}const c={};function u(e,t){let r=document.documentElement.lang;const n="bs"===r;if(n&&(r="hr"),t){const t=`${r}-full`,n={dateStyle:"full",timeStyle:"long"};return c[t]||(c[t]=new Intl.DateTimeFormat(r,n)),c[t].format(e)}const i={year:"numeric",month:n?"numeric":"short",day:"numeric"};return c[r]||(c[r]=new Intl.DateTimeFormat(r,i)),c[r].format(e)}function d(e,t,r,n){const i=null!=e?e:"en";let o=t.unknown;return(1===r||["id","ja","ko","th","vi","zh-cn","zh-hk","zh-tw"].includes(i))&&(o=t.single),1!==r&&["en","ca","da","de","el","es","et","fi","hi","hu","it","nb","nl","pt-pt","sv","tr"].includes(i)&&(o=t.multiple),p(o,Object.assign(Object.assign({},n),{number:r}))}const h=/\$\{([^}]+)\}/g;function p(e,t,r=h){let n=e;try{n=e.replace(r,(e,r)=>function(e,t){const r=e.split(".").reduce((e,t)=>e[t],t);return"string"==typeof r||"number"==typeof r?r:e}(r,t).toString())}catch(e){console.error(e)}return n}},96295:(e,t,r)=>{r.d(t,{H:()=>n,R:()=>i});const n='-typekeywords:("MapAreaPackage") -type:("Map Area" OR "Indoors Map Configuration" OR "Code Attachment")',i="Indoors Map Configuration,Code Attachment"}}]);