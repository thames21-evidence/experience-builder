/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_com-fbe225.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_com-fbe225"],{16608:(e,l,t)=>{t.d(l,{o:()=>a,s:()=>s});const s=["csv","feature","geojson","oriented-imagery","stream","subtype","wfs","knowledge-graph-sublayer"],a={minOffsetX:-20,minOffsetY:-20,maxOffsetX:20,maxOffsetY:20}},77798:(e,l,t)=>{t.r(l),t.d(l,{ArcgisMapConfigLabelContentStyle:()=>u});var s=t(73679),a=t(4395),i=t(52797),o=t(56451),n=t(83552),r=t(42855),c=t(66228),d=t(66505),h=t(85643),b=t(73801),p=t(16608);const m=a.AH`.popover{--calcite-popover-z-index: 100}.block-section-padding{padding-top:var(--calcite-spacing-sm)}.offset-div{align-items:center;display:flex;gap:var(--calcite-spacing-lg);justify-content:space-between}.deconfliction-toggle-padding{padding:var(--calcite-spacing-md) 0}.placement-label{margin-top:var(--calcite-spacing-md)}`;class u extends b.WF{constructor(){super(...arguments),this._direction=(0,n.jH)(),this.resizeObserver=new ResizeObserver(e=>{const l=e.pop();this.hasNarrowReferenceElement=l.contentRect.width<=275,this.requestUpdate()}),this.hasNarrowReferenceElement=!1,this.flipPercentLabels=!1,this.popoverNode=(0,h._)(),this.panelNode=(0,h._)(),this.fontNode=(0,h._)(),this.haloColorNode=(0,h._)(),this.backgroundColorNode=(0,h._)(),this.borderLineColorNode=(0,h._)(),this.borderLineSizeNode=(0,h._)(),this.placementNode=(0,h._)(),this.xySliderNode=(0,h._)(),this.offsetXNode=(0,h._)(),this.offsetYNode=(0,h._)(),this.layerDisplayType=r.l.feature,this.arcgisChange=(0,b.lh)(),this.arcgisClose=(0,b.lh)()}static{this.properties={view:0,layer:0,portal:0,_messages:0,layerDisplayType:0,serviceType:0,referenceElement:0,labelClass:1}}static{this.styles=m}async reposition(){this.popoverNode.value?.reposition()}async load(){const{layer:e,serviceType:l,portal:t}=this;this.layerGeometryType=await(0,c.c)(e),this.fontMap=l===r.s.mapImage?d.m:await(0,d.g)(t);const s=new Intl.NumberFormat(i.getLocale(),{style:"percent"}).format(0);this.flipPercentLabels="rtl"===this._direction?s.endsWith("%"):s.startsWith("%")}loaded(){this.panelNode.value?.setFocus(),this.resizeObserver.observe(this.referenceElement)}disconnectedCallback(){super.disconnectedCallback(),this.fontPickerNode?.remove(),this.resizeObserver.disconnect()}getPlacementArray(){const{layer:e,layerDisplayType:l,layerGeometryType:t}=this;return l===r.l.cluster&&"binning"===e.featureReduction?.type?[]:"point"===t||"multipoint"===t?d.p:"polyline"===t?d.a:[]}openFontPopover(){if(!this.fontPickerNode){this.panelNode.value.disabled=!0;const e=this.referenceElement.getBoundingClientRect();this.fontPickerNode=(0,b.dN)(a.qy`<arcgis-map-config-font-picker enable-map-specific-font-list .view=${this.view} .fontMap=${this.fontMap} .font=${this.labelClass?.symbol?.font} .popoverProps=${{refElement:this.referenceElement,offsetSkidding:50,overlayPositioning:"fixed",maxHeight:.8*e.height+"px"}} @arcgisClose=${()=>this.closeFontPopover()} @arcgisChange=${e=>{const l=e.detail;this.changeFont(l)}}></arcgis-map-config-font-picker>`),document.body.appendChild(this.fontPickerNode)}}closeFontPopover(){this.panelNode.value.disabled=!1,this.fontPickerNode?.remove(),this.fontPickerNode=void 0,this.panelNode.value?.setFocus()}changeFont(e){const l=this.labelClass?.symbol?.font;e&&l&&(l.family=e.family,l.weight=e.weight,l.style=e.style),this.requestUpdate(),this.arcgisChange.emit()}handleHaloToggle(){this.labelClass.symbol.haloColor?(this.tempHaloColor=this.labelClass.symbol.haloColor,this.labelClass.symbol.haloColor=null):(this.labelClass.symbol.haloColor=this.tempHaloColor??new o.default("white"),this.labelClass.symbol.haloSize=.75*(this.labelClass.symbol.haloSize||1),this.haloColorNode.value.color=this.labelClass.symbol.haloColor?.toHex()||"#ffffff")}handleBackgroundToggle(){this.labelClass.symbol.backgroundColor?(this.tempBackgroundColor=this.labelClass.symbol.backgroundColor,this.tempBorderLineColor=this.labelClass.symbol.borderLineColor,this.tempBorderLineSize=this.labelClass.symbol.borderLineSize,this.labelClass.symbol.backgroundColor=null,this.labelClass.symbol.borderLineColor=null,this.labelClass.symbol.borderLineSize=null):(this.labelClass.symbol.backgroundColor=this.tempBackgroundColor||new o.default("white"),this.backgroundColorNode.value.color=this.labelClass.symbol.backgroundColor?.toHex()||"#ffffff",this.labelClass.symbol.borderLineColor=this.tempBorderLineColor||new o.default("white"),this.borderLineColorNode.value.color=this.labelClass.symbol.borderLineColor?.toHex()||"#ffffff",this.labelClass.symbol.borderLineSize=this.tempBorderLineSize??.75,this.borderLineSizeNode.value.value=""+(this.labelClass.symbol.borderLineSize??.75)/.75)}handleOffsetChange(e){this.labelClass.symbol.xoffset=e.x,this.offsetXNode.value.value=`${this.labelClass.symbol.xoffset}`,this.xySliderNode.value.x=e.x,this.labelClass.symbol.yoffset=e.y,this.offsetYNode.value.value=`${this.labelClass.symbol.yoffset}`,this.xySliderNode.value.y=-e.y,this.arcgisChange.emit()}waitOnUser(e,l,t){const s=e.target;this.typingHandle&&(clearTimeout(this.typingHandle),this.typingHandle=void 0);const a=s.value,i=Number.parseFloat(a);a?(0,c.i)(s.min)&&(0,c.i)(s.max)&&(s.min>i||s.max<i)?this.typingHandle=setTimeout(()=>{this.typingHandle=void 0,s.min>i?(s.value=`${s.min}`,l(s)):s.max<i&&(s.value=`${s.max}`,l(s))},750):(!a.startsWith("-")||0!==i&&!Number.isNaN(i))&&l(s):this.typingHandle=setTimeout(()=>{this.typingHandle=void 0,s.value=`${t}`,l(s)},2e3)}render(){const{_messages:e,layer:l,layerDisplayType:t,layerGeometryType:s}=this,i=t===r.l.cluster&&"binning"===l.featureReduction?.type,o=!i,n=i||"polyline"!==s,c=!i&&"polyline"===s,d=this.referenceElement.getBoundingClientRect();return this.el.classList.add("js-app-flyout"),a.qy`<calcite-popover class="popover" placement=leading-start open pointer-disabled .referenceElement=${this.referenceElement} .offsetDistance=${-Math.round(d.width)} offset-skidding=50 .label=${e.labelStyle} trigger-disabled ${(0,h.K)(this.popoverNode)}><calcite-panel closable class="panel" style=${(0,b.zl)({width:d.width-2+"px",maxHeight:.8*d.height+"px"})} @calcitePanelClose=${()=>this.arcgisClose.emit()} ${(0,h.K)(this.panelNode)}><div slot=header-content>${e.labelStyle}</div><calcite-block .heading=${void 0} .label=${e.labelStyle} expanded>${this.renderFontFamilySelection()}${this.renderFontSizeSelection()}${this.renderColor()}${this.renderTransparency()}${this.renderHaloBlock()}${this.renderBackgroundBlock()}${this.renderDeconfliction()}${o&&this.renderPlacement()||""}${n&&this.renderOffset()||""}${c?a.qy`${this.renderOverrunControl()}${this.renderRepeatLabel()}${this.renderRepeatDistance()}`:null}</calcite-block></calcite-panel></calcite-popover>`}renderFontFamilySelection(){const{_messages:e}=this;return a.qy`<calcite-label>${e.font}<calcite-button alignment=icon-end-space-between appearance=outline-fill kind=neutral icon-end=chevron-down .label=${(0,d.f)(this.labelClass?.symbol?.font)} width=full @click=${()=>this.openFontPopover()} ${(0,h.K)(this.fontNode)}>${(0,d.f)(this.labelClass?.symbol?.font)}</calcite-button></calcite-label>`}renderFontSizeSelection(){const{_messages:e}=this;return a.qy`<calcite-label>${e.size}<calcite-input-number scale=s inputmode=decimal min=5 max=125 .value=${`${this.labelClass.symbol.font.size/.75||5}`} @calciteInputNumberInput=${e=>{this.waitOnUser(e,e=>{this.labelClass.symbol.font.size=.75*Number(e.value),this.arcgisChange.emit()},5)}}></calcite-input-number></calcite-label>`}renderColor(){const{_messages:e}=this;return a.qy`<calcite-label>${e.color}<arcgis-color-input .color=${this.labelClass.symbol.color?.toHex()||"#ffffff"} storage-id=arcgis-symbol-styler-storage-colors .popoverProps=${{refElement:this.panelNode.value,placement:"leading-start",offsetDistance:-Math.round(this.referenceElement.getBoundingClientRect().width),offsetSkidding:50,maxHeight:.8*this.referenceElement.getBoundingClientRect().height-52+"px"}} @arcgisChange=${e=>{e.stopPropagation();const l=e.target.color,t=this.labelClass.symbol.color.a;this.labelClass.symbol.color=new o.default(l),this.labelClass.symbol.color.a=t,this.arcgisChange.emit()}} @arcgisPickerOpen=${()=>{setTimeout(()=>{this.fontNode.value.disabled=!0,this.placementNode.value&&(this.placementNode.value.disabled=!0)},200)}} @arcgisPickerClose=${()=>{this.fontNode.value.disabled=!1,this.placementNode.value&&(this.placementNode.value.disabled=!1)}}></arcgis-color-input></calcite-label>`}renderTransparency(){const{_messages:e,flipPercentLabels:l}=this;return a.qy`<calcite-label>${e.transparency}<arcgis-slider-input min=0 max=100 step=1 units-label=% .flipLabels=${l} .value=${Math.round((0,c.m)(this.labelClass.symbol.color?.a??1))} @arcgisValueChange=${e=>{const l=e.detail,t=(0,c.t)(l);this.labelClass.symbol.color.a=t,this.arcgisChange.emit(),this.requestUpdate()}} .withSteppers=${!this.hasNarrowReferenceElement} .label=${e.transparency}></arcgis-slider-input></calcite-label>`}renderHaloBlock(){const{_messages:e}=this;return a.qy`<calcite-block-section .text=${e.halo} toggle-display=switch .expanded=${!!this.labelClass.symbol.haloColor} @calciteBlockSectionToggle=${e=>{e.stopPropagation(),this.handleHaloToggle()}}><div class="block-section-padding">${this.renderHaloColor()}${this.renderHaloTransparency()}${this.renderHaloSize()}</div></calcite-block-section>`}renderHaloColor(){const{_messages:e}=this;return a.qy`<calcite-label>${e.color}<arcgis-color-input .color=${this.labelClass.symbol.haloColor?.toHex()||"#ffffff"} storage-id=arcgis-symbol-styler-storage-colors .popoverProps=${{refElement:this.panelNode.value,placement:"leading-start",offsetDistance:-Math.round(this.referenceElement.getBoundingClientRect().width),offsetSkidding:50}} @arcgisChange=${e=>{e.stopPropagation();const l=e.target.color,t=this.labelClass.symbol.haloColor.a;this.labelClass.symbol.haloColor=new o.default(l),this.labelClass.symbol.haloColor.a=t,this.arcgisChange.emit()}} @arcgisPickerOpen=${()=>{setTimeout(()=>{this.fontNode.value.disabled=!0,this.placementNode.value&&(this.placementNode.value.disabled=!0)},200)}} @arcgisPickerClose=${()=>{this.fontNode.value.disabled=!1,this.placementNode.value&&(this.placementNode.value.disabled=!1)}} ${(0,h.K)(this.haloColorNode)}></arcgis-color-input></calcite-label>`}renderHaloTransparency(){const{_messages:e,flipPercentLabels:l}=this;return a.qy`<calcite-label>${e.transparency}<arcgis-slider-input min=0 max=100 step=1 units-label=% .flipLabels=${l} .value=${Math.round((0,c.m)(this.labelClass.symbol.haloColor?.a??1))} @arcgisValueChange=${e=>{const l=e.detail,t=(0,c.t)(l);this.labelClass.symbol.haloColor.a=t,this.arcgisChange.emit(),this.requestUpdate()}} .withSteppers=${!this.hasNarrowReferenceElement} .label=${e.transparency}></arcgis-slider-input></calcite-label>`}renderHaloSize(){const{_messages:e}=this;return a.qy`<calcite-label>${e.size}<calcite-input-number scale=s inputmode=decimal min=1 max=10 .value=${""+(this.labelClass.symbol.haloSize??.75)/.75} @calciteInputNumberInput=${e=>{this.waitOnUser(e,e=>{this.labelClass.symbol.haloSize=.75*Number(e.value),this.arcgisChange.emit()},1)}}></calcite-input-number></calcite-label>`}renderBackgroundBlock(){const{_messages:e}=this;return"polyline"===this.layerGeometryType?"":a.qy`<calcite-block-section .text=${e.background} toggle-display=switch .expanded=${!!this.labelClass.symbol.backgroundColor} @calciteBlockSectionToggle=${e=>{e.stopPropagation(),this.handleBackgroundToggle()}}><div class="block-section-padding">${this.renderBackgroundColor()}${this.renderBackgroundTransparency()}${this.renderBackgroundOutlineColor()}${this.renderBackgroundOutlineTransparency()}${this.renderBackgroundOutlineSize()}</div></calcite-block-section>`}renderBackgroundColor(){const{_messages:e}=this;return a.qy`<calcite-label>${e.color}<arcgis-color-input .color=${this.labelClass.symbol.backgroundColor?.toHex()||"#ffffff"} storage-id=arcgis-symbol-styler-storage-colors .popoverProps=${{refElement:this.panelNode.value,placement:"leading-start",offsetDistance:-Math.round(this.referenceElement.getBoundingClientRect().width),offsetSkidding:50}} @arcgisChange=${e=>{e.stopPropagation();const l=e.target.color,t=this.labelClass.symbol.backgroundColor.a;this.labelClass.symbol.backgroundColor=new o.default(l),this.labelClass.symbol.backgroundColor.a=t,this.arcgisChange.emit()}} @arcgisPickerOpen=${()=>{setTimeout(()=>{this.fontNode.value.disabled=!0,this.placementNode.value&&(this.placementNode.value.disabled=!0)},200)}} @arcgisPickerClose=${()=>{this.fontNode.value.disabled=!1,this.placementNode.value&&(this.placementNode.value.disabled=!1)}} ${(0,h.K)(this.backgroundColorNode)}></arcgis-color-input></calcite-label>`}renderBackgroundTransparency(){const{_messages:e,flipPercentLabels:l}=this;return a.qy`<calcite-label>${e.transparency}<arcgis-slider-input min=0 max=100 step=1 units-label=% .flipLabels=${l} .value=${Math.round((0,c.m)(this.labelClass.symbol.backgroundColor?.a??1))} @arcgisValueChange=${e=>{const l=e.detail,t=(0,c.t)(l);this.labelClass.symbol.backgroundColor.a=t,this.arcgisChange.emit(),this.requestUpdate()}} .withSteppers=${!this.hasNarrowReferenceElement} .label=${e.transparency}></arcgis-slider-input></calcite-label>`}renderBackgroundOutlineColor(){const{_messages:e}=this;return a.qy`<calcite-label>${e.outlineColor}<arcgis-color-input .color=${this.labelClass.symbol.borderLineColor?.toHex()||"#ffffff"} storage-id=arcgis-symbol-styler-storage-colors .popoverProps=${{refElement:this.panelNode.value,placement:"leading-start",offsetDistance:-Math.round(this.referenceElement.getBoundingClientRect().width),offsetSkidding:50}} @arcgisChange=${e=>{e.stopPropagation();const l=e.target.color,t=this.labelClass.symbol.borderLineColor.a;this.labelClass.symbol.borderLineColor=new o.default(l),this.labelClass.symbol.borderLineColor.a=t,this.arcgisChange.emit()}} @arcgisPickerOpen=${()=>{setTimeout(()=>{this.fontNode.value.disabled=!0,this.placementNode.value&&(this.placementNode.value.disabled=!0)},200)}} @arcgisPickerClose=${()=>{this.fontNode.value.disabled=!1,this.placementNode.value&&(this.placementNode.value.disabled=!1)}} ${(0,h.K)(this.borderLineColorNode)}></arcgis-color-input></calcite-label>`}renderBackgroundOutlineTransparency(){const{_messages:e,flipPercentLabels:l}=this;return a.qy`<calcite-label>${e.outlineTransparency}<arcgis-slider-input min=0 max=100 step=1 units-label=% .flipLabels=${l} .value=${Math.round((0,c.m)(this.labelClass.symbol.borderLineColor?.a??1))} @arcgisValueChange=${e=>{const l=e.detail,t=(0,c.t)(l);this.labelClass.symbol.borderLineColor.a=t,this.arcgisChange.emit(),this.requestUpdate()}} .withSteppers=${!this.hasNarrowReferenceElement} .label=${e.transparency}></arcgis-slider-input></calcite-label>`}renderBackgroundOutlineSize(){const{_messages:e}=this;return a.qy`<calcite-label>${e.outlineWidth}<calcite-input-number id=borderLineSizePicker_Id scale=s inputmode=decimal min=0 max=18 .value=${""+(this.labelClass.symbol.borderLineSize??.75)/.75} @calciteInputNumberInput=${e=>{this.waitOnUser(e,e=>{this.labelClass.symbol.borderLineSize=.75*Number(e.value),this.arcgisChange.emit()},5)}} ${(0,h.K)(this.borderLineSizeNode)}></calcite-input-number></calcite-label>`}renderDeconfliction(){const{_messages:e,labelClass:l}=this,t="none"!==l.deconflictionStrategy;return a.qy`<calcite-label class="deconfliction-toggle-padding" layout=inline-space-between>${e.enableDeconfliction}<calcite-switch .checked=${t} @calciteSwitchChange=${e=>{const t=e.currentTarget.checked;l.deconflictionStrategy=t?"static":"none"}}></calcite-switch></calcite-label>`}renderPlacement(){const{_messages:e,layerGeometryType:l,serviceType:t}=this,s=["multipoint","point","polyline"].includes(l),i=[r.s.csv,r.s.feature,r.s.geojson,r.s.mapImage,r.s.ogcFeature].includes(t);if(!s||!i)return"";const o=this.getPlacementArray();return a.qy`<calcite-label class="placement-label">${e.placement}<calcite-select .label=${e.placement} @calciteSelectChange=${e=>{this.labelClass.labelPlacement=e.currentTarget.selectedOption.value,this.arcgisChange.emit()}} ${(0,h.K)(this.placementNode)}>${o.map(l=>a.qy`<calcite-option .value=${l} .selected=${this.labelClass.labelPlacement===l}>${e[l]||l}</calcite-option>`)}</calcite-select></calcite-label>`}renderOffset(){const{_messages:e}=this;return a.qy`<div class="offset-div"><calcite-label>${e.offset}<arcgis-map-config-xy-slider .x=${this.labelClass.symbol.xoffset||0} .y=${-this.labelClass.symbol.yoffset||0} .minX=${p.o.minOffsetX} .minY=${p.o.minOffsetY} .maxX=${p.o.maxOffsetX} .maxY=${p.o.maxOffsetY} step=1 snappable @arcgisInput=${e=>{e.stopPropagation();const l=e.currentTarget;this.handleOffsetChange({x:l.x||0,y:-l.y||0})}} ${(0,h.K)(this.xySliderNode)}></arcgis-map-config-xy-slider></calcite-label><div><calcite-label scale=s>${e.offsetX}<calcite-input-number scale=s .placeholder=${e.offsetX} .value=${`${this.labelClass.symbol.xoffset||0}`} inputmode=decimal .min=${p.o.minOffsetX} .max=${p.o.maxOffsetX} @calciteInputNumberInput=${e=>this.waitOnUser(e,()=>{this.handleOffsetChange({x:Number(this.offsetXNode.value.value)||0,y:Number(this.offsetYNode.value.value)||0})},0)} ${(0,h.K)(this.offsetXNode)}></calcite-input-number></calcite-label><calcite-label scale=s>${e.offsetY}<calcite-input-number scale=s .placeholder=${e.offsetY} .value=${`${this.labelClass.symbol.yoffset||0}`} inputmode=decimal .min=${p.o.minOffsetY} .max=${p.o.maxOffsetY} @calciteInputNumberInput=${e=>this.waitOnUser(e,()=>{this.handleOffsetChange({x:Number(this.offsetXNode.value.value)||0,y:Number(this.offsetYNode.value.value)||0})},0)} ${(0,h.K)(this.offsetYNode)}></calcite-input-number></calcite-label></div></div>`}renderOverrunControl(){const{_messages:e}=this;return a.qy`<calcite-label alignment=start layout=inline-space-between>${e.allowOverrun}<calcite-switch .checked=${this.labelClass.allowOverrun} @calciteSwitchChange=${e=>{this.labelClass.allowOverrun=e.target.checked,this.arcgisChange.emit()}}></calcite-switch></calcite-label>`}renderRepeatLabel(){const{_messages:e}=this;return a.qy`<calcite-label alignment=start layout=inline-space-between>${e.repeatLabel}<calcite-switch .checked=${this.labelClass.repeatLabel} @calciteSwitchChange=${e=>{this.labelClass.repeatLabel=e.target.checked,this.requestUpdate(),this.arcgisChange.emit()}}></calcite-switch></calcite-label>`}renderRepeatDistance(){const{_messages:e}=this;return a.qy`<calcite-label>${e.labelRepeat}<calcite-input-number .disabled=${!this.labelClass.repeatLabel} scale=s inputmode=decimal min=0 .value=${`${this.labelClass.repeatLabelDistance||0}`} @calciteInputNumberInput=${e=>{this.waitOnUser(e,e=>{this.labelClass.repeatLabelDistance=Number(e.value),this.arcgisChange.emit()},0)}}></calcite-input-number></calcite-label>`}}(0,s.c)("arcgis-map-config-label-content-style",u)}}]);