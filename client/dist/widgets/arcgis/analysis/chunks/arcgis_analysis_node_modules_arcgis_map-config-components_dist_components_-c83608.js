/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-c83608.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-c83608"],{65595:(e,t,a)=>{a.d(t,{c:()=>l,u:()=>r});var s=a(20936),i=a(1225),n=(a(54312),a(44345),a(55448),a(52797),a(34031),a(63438),a(5933),a(28927),a(83368),a(89704),a(5294),a(18423),a(96086),a(91813),a(21255),a(13078),a(21303),a(12627),a(56451),a(31521),a(23054),a(5077),a(23795),a(17902),a(87420),a(30161),a(81734),a(75698),a(10628),a(59640),a(64451),a(6176),a(83552));a(77462),a(49403),a(10281),a(83930),a(66617),a(10454),a(29614),a(94916),a(52554),a(2156),a(4038),a(49851),a(75054),a(15223),a(70169),a(47207),a(70852),a(48103),a(39423),a(85681),a(18444),a(42411),a(9767),a(38218),a(91914),a(86605),a(68196),a(440),a(46547),a(6238),a(7299);function l(e){e.selectedFields=[],e.layerFields=void 0,e.fields=void 0,e.hideLayerTitle=!1,e.supportsArcade=!1,e.stringFieldsCount=-1,e.dateFieldsCount=-1,e.numberFieldsCount=-1,e.containsFlow=!0,e.oneFeatureResponseStatus=i.s.MISSING,e.selectedAttribute=void 0,e.selectedAttributeText=void 0,e.selectedTypeValue=void 0,e.selectedValue=void 0,e.lastDefault=void 0,e.lastDefaults=void 0,e.dotColorSelected=void 0,e.backgroundStyleSelected=void 0,e.lastSettings=void 0,e.classedSymbolSelectedIdx=void 0,e.allUniqueValues=void 0,e.useFeatureReduction=void 0,e.symbolStylerConfig={},e.allowTimeSeriesConfiguration=!1,e.rasterInfo=void 0}function r(){const e=(0,n.Gk)(),t=e;e.manager.onLoad(()=>{t.smartMappingState=function(e,t){const a=o.get(e);if(a)return a;const i=(0,s.el)(e,t);return i&&"store"in i?(o.set(e,i.store),i.store):null}(e.el,"arcgis-map-config-smart-mapping")})}const o=new WeakMap},87723:(e,t,a)=>{a.r(t),a.d(t,{ArcgisMapConfigSmartMappingRelationshipLegend:()=>p});var s=a(73679),i=a(4395),n=a(85643),l=a(1225),r=(a(54312),a(44345),a(55448),a(52797),a(34031),a(63438),a(5933),a(89704),a(5294),a(18423),a(96086),a(91813),a(21255),a(13078),a(21303),a(12627),a(56451),a(31521),a(23054),a(5077),a(23795),a(17902),a(87420),a(30161),a(81734),a(65595)),o=(a(77462),a(49403),a(66617),a(10628),a(59640),a(64451),a(6176),a(10454),a(29614),a(94916),a(52554),a(2156),a(4038),a(49851),a(75054),a(15223),a(70169),a(47207),a(70852),a(48103),a(39423),a(85681),a(18444),a(42411),a(9767),a(38218),a(91914),a(86605),a(68196),a(440),a(46547),a(28927),a(6238),a(7299),a(73801)),c=a(20936),d=(e=>(e.focusUp16="M8,0.29 L0.29,8 L8,15.71 L15.71,8 L8,0.29 Z M1.71,8 L5.93,3.78 L8,5.85 L10.07,3.78 L14.29,8 L8,14.29 L1.71,8 Z",e.focusRight16="M8,0.29 L0.29,8 L8,15.71 L15.71,8 L8,0.29 Z M1.71,8 L8,1.71 L12.22,5.93 L10.15,8 L12.22,10.07 L8,14.29 L1.71,8 Z",e.focusLeft16="M8,0.29 L0.29,8 L8,15.71 L15.71,8 L8,0.29 Z M3.78,10.07 L5.85,8 L3.78,5.93 L8,1.71 L14.29,8 L8,14.29 L3.78,10.07 Z",e.focusDown16="M8,0.29 L0.29,8 L8,15.71 L15.71,8 L8,0.29 Z M8,1.71 L14.29,8 L10.07,12.22 L8,10.15 L5.93,12.22 L1.71,8 L8,1.71 Z",e.code16="M6.865 13.965l-.957-.29 3.213-10.62.957.29zM15.19 8.45l-3.837-3.805-.704.71 3.131 3.104-3.135 3.19.712.702zm-9.833 3.2L2.221 8.458l3.13-3.104-.703-.71L.811 8.45l3.833 3.9z",e.fields16="M10.578 1A2.425 2.425 0 0 1 13 3.422V6c0 .552.448 1 1 1v1c-.552 0-1 .448-1 1v2.578A2.425 2.425 0 0 1 10.578 14H10v-1h.578c.785 0 1.421-.637 1.422-1.422V9c0-.574.247-1.121.679-1.5A1.995 1.995 0 0 1 12 6V3.422c0-.785-.637-1.421-1.422-1.422H10V1h.578zM6 1v1h-.578C4.637 2 4.001 2.637 4 3.422V6c0 .574-.247 1.121-.679 1.5.432.379.68.926.679 1.5v2.578c0 .785.637 1.421 1.422 1.422H6v1h-.578A2.425 2.425 0 0 1 3 11.578V9c0-.552-.448-1-1-1V7c.552 0 1-.448 1-1V3.422A2.425 2.425 0 0 1 5.422 1H6z",e))(d||{});const u=i.AH`.attribute{display:flex;padding-bottom:6px}.attributes{margin:12px 0}.attribute-name{padding:0 10px;width:calc(100% - 45px);word-break:break-all}.attribute-color-icon{width:45px;height:16px;overflow:hidden;border-radius:3px;display:flex;align-self:center}.attribute-color-icon-selection{height:16px;display:inline-block}.label{display:flex;padding:6px 0;align-items:center;div{display:flex}}.label-icon{color:#32323266;display:flex;flex-direction:column;justify-content:center;cursor:default;.rotate-45{-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}}`;class p extends o.WF{constructor(){super(...arguments),this.valueTextNodes=[],this.smartMappingState=(0,r.u)(),this.arcgisSmartMappingRelationshipLegendError=(0,o.lh)(),this.arcgisSmartMappingRelationshipLegendFocusChange=(0,o.lh)()}static{this.styles=u}load(){this.flowItemNode=(0,c.el)(this.el,"calcite-flow-item")}disconnectedCallback(){super.disconnectedCallback(),this.smartMappingState.selectedValue=void 0}listRefHandler(e){e&&queueMicrotask(()=>{e.querySelectorAll(".input").forEach(e=>{e.setFocus()}),e.querySelectorAll(".label").forEach(e=>{const t=Number.parseInt(e.getAttribute("data-value"));this.valueTextNodes[t]=e})})}getColorOrder(e){const{smartMappingState:t}=this,a=(0,l.g)(t).authoringInfo||{};let s=[];if(2===a.numClasses)switch(a.focus){case"HH":default:s=0===e?[3,1]:[3,2];break;case"HL":s=0===e?[2,0]:[2,3];break;case"LH":s=0===e?[1,3]:[1,0];break;case"LL":s=0===e?[0,2]:[0,1]}else if(3===a.numClasses)switch(a.focus){case"HH":default:s=0===e?[8,5,2]:[8,7,6];break;case"HL":s=0===e?[6,3,0]:[6,7,8];break;case"LH":s=0===e?[2,5,8]:[2,1,0];break;case"LL":s=0===e?[0,3,6]:[0,1,2]}else switch(a.focus){case"HH":default:s=0===e?[15,11,7,3]:[15,14,13,12];break;case"HL":s=0===e?[12,8,4,0]:[12,13,14,15];break;case"LH":s=0===e?[3,7,11,15]:[3,2,1,0];break;case"LL":s=0===e?[0,4,8,12]:[0,1,2,3]}return s}handleLabelTextClick(e){this.smartMappingState.selectedValue=e,this.selectedLabelText=e,this.requestUpdate()}handleLabelTextChange(e,t){const{smartMappingState:a}=this;(0,l.g)(a).uniqueValueInfos[e].label=t,this.selectedLabelText=void 0,(0,l.a4)(a),this.requestUpdate(),setTimeout(()=>{this.smartMappingState.selectedValue===e&&(this.valueTextNodes[e]?.focus(),this.smartMappingState.selectedValue=void 0)},300)}render(){const{_messages:e}=this.smartMappingState;return i.qy`<calcite-block expanded .heading=${e.relationshipLegend.legend} collapsible>${this.renderContent()}</calcite-block>`}renderContent(){return i.qy`<div><div class="attributes">${this.renderAttribute(0)}${this.renderAttribute(1)}</div>${this.renderFocus()}${this.renderLabels()}</div>`}renderAttribute(e){const{smartMappingState:t}=this,a=(0,l.g)(t).authoringInfo,s=0===e?a.field1:a.field2,n=(0,l.K)(t,s.field),r=this.getColorOrder(e);return i.qy`<div class="attribute"><div class="attribute-color-icon" aria-hidden=true>${r.map(e=>this.renderSwatch(e))}</div><div class="attribute-name">${n.label}</div></div>`}renderSwatch(e){const{smartMappingState:t}=this,a=(0,l.g)(t),s=(0,l.i)(a.uniqueValueInfos[e].symbol);return i.qy`<div class="attribute-color-icon-selection" style=${(0,o.zl)({width:100/a.authoringInfo.numClasses+"px",backgroundColor:s?.toHex()||"#ffffff"})}></div>`}renderFocus(){const e=this.flowItemNode;return i.qy`<arcgis-map-config-smart-mapping-relationship-focus-button .flowItemNode=${e} @arcgisSmartMappingRelationshipFocusButtonBeforeOpen=${()=>(0,l.f)()} @arcgisSmartMappingRelationshipFocusButtonChange=${()=>{this.arcgisSmartMappingRelationshipLegendFocusChange.emit(),this.requestUpdate()}} @arcgisSmartMappingRelationshipFocusButtonError=${({detail:e})=>this.arcgisSmartMappingRelationshipLegendError.emit(e)}></arcgis-map-config-smart-mapping-relationship-focus-button>`}renderLabels(){const{smartMappingState:e}=this,{_messages:t}=e,a=(0,l.g)(e).authoringInfo.numClasses;return i.qy`<calcite-label>${t.relationshipLegend.labels}<calcite-list .label=${t.relationshipLegend.labels} ${(0,n.K)(this.listRefHandler)}>${this.renderLabel(0)}${this.renderLabel(a-1)}${this.renderLabel(a*a-a)}${this.renderLabel(a*a-1)}</calcite-list></calcite-label>`}renderLabel(e){const{smartMappingState:t}=this,a=(0,l.g)(t).authoringInfo,s=a.numClasses,n=a.focus,r=0===e?d.focusUp16:e===("LH"===n||"HL"===n?s*s-s:s-1)?d.focusLeft16:e===("LH"===n||"HL"===n?s-1:s*s-s)?d.focusRight16:d.focusDown16;return i.qy`<calcite-list-item>${this.renderIconNode(r)}${this.renderTextNode(e)}</calcite-list-item>`}renderIconNode(e){const{smartMappingState:t}=this,a=!(0,l.g)(t).authoringInfo.focus;return i.qy`<div slot=actions-start class="label-icon"><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 16 16" width=16 height=16 class=${(0,o.CP)(a?"rotate-45":"")}>${i.JW`<path d=${e??o.s6} />`}</svg></div>`}renderTextNode(e){const{smartMappingState:t}=this,{_messages:a}=t,s=(0,l.g)(t),n=s.authoringInfo,r=n.numClasses,c=n.focus,d=s.uniqueValueInfos[e],u=0===e?a.relationshipLegend.accessibility.editLabelForTop:e===("LH"===c||"HL"===c?r*r-r:r-1)?a.relationshipLegend.accessibility.editLabelForLeft:e===("LH"===c||"HL"===c?r-1:r*r-r)?a.relationshipLegend.accessibility.editLabelForRight:a.relationshipLegend.accessibility.editLabelForBottom;return this.selectedLabelText===e?i.qy`<calcite-input slot=content class="input" scale=s .value=${d.label??void 0} @focusout=${t=>{const a=t.currentTarget;this.handleLabelTextChange(e,a.value)}} @keydown=${t=>{if(t.stopPropagation(),"Escape"===t.key||"Enter"===t.key){const a=t.currentTarget;this.handleLabelTextChange(e,a.value)}}}></calcite-input>`:i.qy`<div class="label" slot=content tabindex=0 .ariaLabel=${u} data-value=${e??o.s6} @click=${()=>this.handleLabelTextClick(e)} @keyup=${t=>{(" "===t.key||"Enter"===t.key)&&this.handleLabelTextClick(e)}}>${d.label}</div>`}}(0,s.c)("arcgis-map-config-smart-mapping-relationship-legend",p)}}]);