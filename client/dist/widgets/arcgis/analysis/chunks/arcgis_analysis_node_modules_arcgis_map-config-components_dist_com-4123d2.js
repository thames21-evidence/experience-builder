/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_com-4123d2.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_com-4123d2"],{40471:(e,t,i)=>{i.r(t),i.d(t,{ArcgisMapConfigFieldsFormatting:()=>b});var a=i(73679),l=i(4395),o=i(5294),s=i(52797),n=i(82581),r=i(72344),d=i(42855),m=i(66228),c=i(57313),f=i(31068),h=i(85643),g=i(73801),u=i(33779),F=i(51047);const p=l.AH`.popover{--calcite-popover-z-index: 100}.formatting-div{padding:var(--calcite-spacing-md);max-height:60vh}.single-line-label-switch-section{display:flex;margin:0;padding:var(--calcite-spacing-sm) 0px}.single-line-label-switch-label{display:flex;flex-flow:column nowrap;flex:1 0 0%;overflow:hidden}.single-line-label-switch-switch{flex:0 0 0%;justify-self:flex-end;margin:0;input{display:none}}.field-configs-significant-digits{display:flex;justify-content:space-between;gap:var(--calcite-spacing-sm)}`;function y(e){return e===d.a.integer||e===d.a.smallInteger||e===d.a.bigInteger?new F.default({minimumFractionDigits:0,maximumFractionDigits:0}):e===d.a.single||e===d.a.double||e===d.a.long||e===d.a.number?new F.default({minimumFractionDigits:0,maximumFractionDigits:2}):e===d.a.date||e===d.a.timestampOffset?new u.default({dateStyle:"short",timeStyle:"short",hour12:"always"}):e===d.a.dateOnly?new u.default({dateStyle:"short",hour12:"always"}):e===d.a.timeOnly?new u.default({timeStyle:"short",hour12:"always"}):void 0}const S=new Date("December 31, 1969 00:00:00");class b extends g.WF{constructor(){super(...arguments),this.usingFieldConfigs=!1,this.layerFieldsMap=new Map,this.arcadeExpMap=new Map,this.selectedFieldInfosMap=new Map,this.popoverNode=(0,h._)(),this.panelNode=(0,h._)(),this.displayNameNode=(0,h._)(),this.minSignificantDigitsNode=(0,h._)(),this.maxSignificantDigitsNode=(0,h._)(),this.thousandSeparatorSwitchNode=(0,h._)(),this.dateFormatSelectNode=(0,h._)(),this.showTimeSectionNode=(0,h._)(),this.showTimeSwitchNode=(0,h._)(),this.timeFormatSectionNode=(0,h._)(),this.timeFormatSelectNode=(0,h._)(),this.fieldConfigsTimeFormatSectionNode=(0,h._)(),this.fieldConfigsTimeFormatSelectNode=(0,h._)(),this.fieldConfigsHourFormatNode=(0,h._)(),this.hasCommonDataTypes=!0,this.fieldsAreDeletable=!1,this.lastFieldConfigsTimeSettings={timeStyle:void 0,hour12:void 0},this.deleteFieldEnabled=!1,this.arcgisChange=(0,g.lh)(),this.arcgisClose=(0,g.lh)(),this.arcgisFieldsDeleted=(0,g.lh)()}static{this.properties={mapView:0,layer:0,config:0,_messages:0,popupTemplate:0,popoverProps:0,selectedFields:0,deleteFieldEnabled:5}}static{this.styles=p}async reposition(){this.popoverNode.value?.reposition()}async setFocus(){this.panelNode.value?.setFocus()}async load(){const{layer:e,mapView:t,popupTemplate:i,selectedFields:a,deleteFieldEnabled:l}=this;if(this.usingFieldConfigs=(0,m.s)(e),this.layerFieldsMap=await(0,m.g)(e),this.arcadeExpMap=(0,m.h)(i),a.forEach(e=>{const t=i.fieldInfos.find(t=>t.fieldName===e);t&&this.selectedFieldInfosMap.set(e,{index:i.fieldInfos.indexOf(t),fieldType:(0,m.l)(e,this.layerFieldsMap,this.arcadeExpMap),fieldInfo:t})}),this.firstSelectedFieldInfo=this.selectedFieldInfosMap.get(a[0]).fieldInfo,this.firstSelectedFieldType=this.selectedFieldInfosMap.get(a[0]).fieldType,this.hasCommonDataTypes=this.checkCommonDataTypes(this.firstSelectedFieldType),this.usingFieldConfigs?this.setUpDefaultFieldConfigsFormat(this.firstSelectedFieldType):!this.firstSelectedFieldInfo.format&&this.hasCommonDataTypes&&await this.setUpDefaultFormat(this.firstSelectedFieldInfo,this.firstSelectedFieldType),l&&("feature"===e.type||"oriented-imagery"===e.type)&&e.portalItem&&(1===a?.length||a?.length>1&&this.enableMultipleDeletion(e.portalItem))){const i=e.fields.filter(e=>a.includes(e.name));if(a.some(t=>!e.fields.find(e=>e.name===t)))this.fieldsAreDeletable=!1;else{const a=await Promise.all(i.map(async i=>await(0,f.a)(t,e,i)));this.fieldsAreDeletable=!a.some(e=>!e)}}}loaded(){this.panelNode.value?.setFocus()}disconnectedCallback(){super.disconnectedCallback(),clearTimeout(this.displayNameHandle),clearTimeout(this.minSignificantDigitsHandle),clearTimeout(this.maxSignificantDigitsHandle)}enableMultipleDeletion(e){return"devext.arcgis.com"===e.portal?.portalHostname&&"1"===window.localStorage.getItem("allow-bulk-field-deletion-agol-mv")}checkCommonDataTypes(e){const{layer:t,selectedFields:i,selectedFieldInfosMap:a,usingFieldConfigs:l}=this;if(i.length>1&&l){const e=t,a=i.every(t=>!!e.getFieldConfiguration(t)),l=i.every(t=>!e.getFieldConfiguration(t));if(!a&&!l)return!1}for(let t=1;t<i.length;t++){const l=a.get(i[t]).fieldType;if(e===d.a.integer||e===d.a.smallInteger||e===d.a.bigInteger){if(![d.a.integer,d.a.smallInteger,d.a.bigInteger].includes(l))return!1}else if(e===d.a.single||e===d.a.double||e===d.a.long||e===d.a.number){if(![d.a.single,d.a.double,d.a.long,d.a.number].includes(l))return!1}else if(e===d.a.date||e===d.a.timestampOffset){if(![d.a.date,d.a.timestampOffset].includes(l))return!1}else if(e===d.a.dateOnly){if(![d.a.dateOnly].includes(l))return!1}else if(e===d.a.timeOnly&&![d.a.timeOnly].includes(l))return!1}return!0}async setUpDefaultFormat(e,t){t===d.a.integer||t===d.a.smallInteger||t===d.a.bigInteger?(e.format=new r.default({digitSeparator:!1}),this.saveFieldInfo()):t===d.a.single||t===d.a.double||t===d.a.long||t===d.a.number?(e.format=new r.default({digitSeparator:!1,places:2}),this.saveFieldInfo()):(t===d.a.date||t===d.a.dateOnly||t===d.a.timeOnly||t===d.a.timestampOffset)&&this.dateFormattingAvailable()&&(t===d.a.dateOnly?e.format=new r.default({dateFormat:"short-date"}):e.format=new r.default({dateFormat:"short-date-short-time"}),this.saveFieldInfo())}async setUpDefaultFieldConfigsFormat(e){const{layer:t,arcadeExpMap:i,firstSelectedFieldInfo:a,selectedFieldInfosMap:l}=this,s=t;l.forEach(t=>{const l=t.fieldInfo.fieldName;if(i.has(l))return void this.setUpDefaultFormat(t.fieldInfo,t.fieldType);const r=s.getFieldConfiguration(l);if(r||e!==d.a.string)if(r){if(!r.fieldFormat){const e=y(t.fieldType);r.fieldFormat=e,this.saveFieldConfigs()}}else{if(!a?.fieldFormat){const e=y(t.fieldType);a.fieldFormat=e}const i=new n.default({alias:t.fieldInfo.label||l,fieldFormat:t.fieldInfo.fieldFormat,name:l});if(e===d.a.date||e===d.a.dateOnly||e===d.a.timeOnly||e===d.a.timestampOffset){const e=o.clone(i.fieldFormat);!e.dateStyle&&!e.timeStyle&&(e.dateStyle="short",e.timeStyle="short"),i.fieldFormat=e}s.fieldConfigurations?s.fieldConfigurations.push(i):s.fieldConfigurations=[i],this.saveFieldConfigs()}});const r=s.getFieldConfiguration(a.fieldName);if(e===d.a.date||e===d.a.timestampOffset){const e=r?.fieldFormat;this.lastFieldConfigsTimeSettings.timeStyle=e?.timeStyle,this.lastFieldConfigsTimeSettings.hour12=e?.hour12}}dateFormattingAvailable(){const{layer:e}=this;return(0,m.a)(e)!==d.s.scene||null!==e.associatedLayer}handleDisplayNameChange(){const{firstSelectedFieldInfo:e,usingFieldConfigs:t}=this;if((!(0,m.i)(this.displayNameNode.value.value)||""===this.displayNameNode.value.value.trim())&&(this.displayNameNode.value.value=e.fieldName),t&&!this.arcadeExpMap.has(e.fieldName)){const{layer:e,firstSelectedFieldInfo:t}=this,i=e;let a=!1,l=i.getFieldConfiguration(t.fieldName);if(l||(l=new n.default({name:t.fieldName}),a=!0),l){if(l.alias=this.displayNameNode.value.value.trim()||t.fieldName,i.attributeTableTemplate?.elements?.length){const e=i.attributeTableTemplate?.clone(),t=e.elements.find(e=>e.fieldName===l.name);t&&(t.label=l.alias,i.attributeTableTemplate=e)}return a&&(i.fieldConfigurations?i.fieldConfigurations.push(l):i.fieldConfigurations=[l]),void this.saveFieldConfigs()}}this.arcadeExpMap.has(e.fieldName)?this.arcadeExpMap.get(e.fieldName).title=this.displayNameNode.value.value.trim():e.label=this.displayNameNode.value.value.trim(),this.saveFieldInfo()}handleThousandSeparatorChange(){const{firstSelectedFieldInfo:e,firstSelectedFieldType:t}=this;e.format&&(t===d.a.date||t===d.a.timestampOffset?this.changeDateTimeFormat():(e.format.digitSeparator=!!this.thousandSeparatorSwitchNode.value?.checked,this.saveFieldInfo()))}handleToggleShowTime(){const{layer:e,firstSelectedFieldInfo:t,firstSelectedFieldType:i,usingFieldConfigs:a}=this,l=this.showTimeSwitchNode.value.checked;if(a){const i=e.getFieldConfiguration(t.fieldName);l?(i.fieldFormat.timeStyle=this.fieldConfigsTimeFormatSelectNode.value?.selectedOption?.value??this.lastFieldConfigsTimeSettings.timeStyle??"short",i.fieldFormat.hour12=this.fieldConfigsHourFormatNode.value?.selectedOption?.value??this.lastFieldConfigsTimeSettings.hour12??"auto"):i.fieldFormat.timeStyle||i.fieldFormat.dateStyle?(this.lastFieldConfigsTimeSettings.timeStyle=i.fieldFormat.timeStyle,this.lastFieldConfigsTimeSettings.hour12=i.fieldFormat.hour12,i.fieldFormat.timeStyle=null,i.fieldFormat.hour12=null):i.fieldFormat.dateStyle="short",this.saveFieldConfigs()}else if(t.format)if(i===d.a.date||i===d.a.timestampOffset){const e=c.a.get(t.format.dateFormat)?.timeFormat;l||(this.lastTimeFormat=e??"short-time"),this.changeDateTimeFormat()}else t.format.digitSeparator=!!this.thousandSeparatorSwitchNode.value?.checked,this.saveFieldInfo()}changeDateTimeFormat(){const{firstSelectedFieldInfo:e,firstSelectedFieldType:t}=this,i=this.dateFormatSelectNode.value?.selectedOption?.value,a=this.timeFormatSelectNode.value?.selectedOption?.value??this.lastTimeFormat??"short-time";if(t===d.a.date||t===d.a.timestampOffset){const t=c.a.get(i);""===t.timeFormat?e.format.dateFormat=this.showTimeSwitchNode.value?.checked?`${i}-${a}`:`${i}`:null===t.timeFormat&&(e.format.dateFormat=`${i}`)}else t===d.a.dateOnly?e.format.dateFormat=`${i}`:t===d.a.timeOnly&&(e.format.dateFormat=`short-date-${a}`);this.saveFieldInfo(),this.popoverNode.value?.reposition()}changeFieldConfigsDateFormat(){const{layer:e,firstSelectedFieldInfo:t}=this,i=e.getFieldConfiguration(t.fieldName),a=this.dateFormatSelectNode.value?.selectedOption?.value;i.fieldFormat.dateStyle=a.dateStyle,i.fieldFormat.year=a.year,i.fieldFormat.month=a.month,i.fieldFormat.dateStyle||(i.fieldFormat.timeStyle=null,i.fieldFormat.hour12="auto"),this.saveFieldConfigs()}getTimeFormatString(e){const{_messages:t}=this;return e===c.t[0]?t.attributesFormatting.shortTime:e===c.t[1]?t.attributesFormatting.longTime:e===c.t[2]?t.attributesFormatting.shortTime24:e===c.t[3]?t.attributesFormatting.longTime24:t.attributesFormatting.shortTime24}saveFieldInfo(){const{arcadeExpMap:e,selectedFieldInfosMap:t,selectedFields:i,firstSelectedFieldInfo:a,hasCommonDataTypes:l}=this;l&&(t.forEach(e=>{e.fieldInfo.fieldName===a.fieldName?e.fieldInfo=a.clone():e.fieldInfo.format=a.format.clone()}),1===i.length&&e.has(a.fieldName)&&this.popupTemplate.expressionInfos?.forEach((t,i)=>{`${d.f.expression}${t.name}`!==a.fieldName||(this.popupTemplate.expressionInfos[i]=e.get(a.fieldName).clone())}),t.forEach(e=>{this.popupTemplate.fieldInfos[e.index]=e.fieldInfo.clone()}),Array.isArray(this.popupTemplate.content)&&this.popupTemplate.content.forEach(e=>{"fields"===e.type&&e.fieldInfos&&e.fieldInfos.forEach((i,a)=>{if(t.has(i.fieldName)){const l=t.get(i.fieldName).fieldInfo.clone();l.visible=!0,e.fieldInfos[a]=l}})}),this.arcgisChange.emit({updatedPopupTemplate:this.popupTemplate.clone()}))}saveFieldConfigs(){const{layer:e,arcadeExpMap:t,firstSelectedFieldInfo:i,selectedFieldInfosMap:a,hasCommonDataTypes:l}=this,s=e;if(!l)return;const n=i.fieldName,r=s.getFieldConfiguration(n);a.forEach(e=>{if(e.fieldInfo.fieldName!==i.fieldName){const i=e.fieldInfo.fieldName;if(t.has(i))return;s.getFieldConfiguration(i).fieldFormat=r.fieldFormat}});const d=o.clone(s.fieldConfigurations);this.arcgisChange.emit({updatedFieldConfigurations:d})}getLegacyDateTimeFormatStrings(){const{firstSelectedFieldInfo:e,firstSelectedFieldType:t}=this;return c.a.has(e.format.dateFormat)?c.a.get(e.format.dateFormat):t===d.a.dateOnly?c.a.get("short-date"):c.a.get("short-date-short-time")}render(){const{_messages:e,popoverProps:t,hasCommonDataTypes:i,selectedFields:a}=this;return this.el.classList.add("js-app-flyout"),l.qy`<calcite-popover class="popover" placement=leading-start open pointer-disabled .referenceElement=${t.refElement} offset-distance=0 offset-skidding=45 .label=${e.attributesFormatting.formattingOptions} ${(0,h.K)(this.popoverNode)}><calcite-panel closable style=${(0,g.zl)({width:`${t.refElement.getBoundingClientRect().width}px`})} @calcitePanelClose=${()=>this.arcgisClose.emit()} ${(0,h.K)(this.panelNode)}><div slot=header-content>${e.attributesFormatting.manageField}</div><div class="formatting-div">${1===a.length?this.renderDisplayName():l.qy`<h3>${e.attributesFormatting.multipleSelection.replace("${number}",`${a.length}`)}</h3>`}${i?this.renderFormattingOptions():l.qy`<h3>${e.attributesFormatting.selectCommon}</h3>`}</div>${this.renderDeleteButton()}${this.renderDoneButton()}</calcite-panel></calcite-popover>`}renderDisplayName(){const{_messages:e,arcadeExpMap:t,firstSelectedFieldInfo:i}=this;return l.qy`<calcite-label>${e.attributesFormatting.displayName}<calcite-input type=text .value=${(t.has(i.fieldName)?t.get(i.fieldName).title:i.label)??void 0} @calciteInputInput=${()=>{clearTimeout(this.displayNameHandle);const e=this.displayNameNode.value.value;e&&""!==e.trim()?this.handleDisplayNameChange():this.displayNameHandle=setTimeout(()=>{this.displayNameNode.value.value=i.fieldName,this.handleDisplayNameChange()},2e3)}} ${(0,h.K)(this.displayNameNode)}></calcite-input></calcite-label>`}renderFormattingOptions(){const{layer:e,firstSelectedFieldInfo:t,firstSelectedFieldType:i,usingFieldConfigs:a}=this;let o=null;return a&&(o=e.getFieldConfiguration(t.fieldName)),t.format||a&&o?.fieldFormat?i===d.a.integer||i===d.a.smallInteger||i===d.a.bigInteger?this.renderThousandSeparator():i===d.a.single||i===d.a.double||i===d.a.long||i===d.a.number?l.qy`<div>${this.renderSignificantDigits()}${this.renderThousandSeparator()}</div>`:i!==d.a.date&&i!==d.a.dateOnly&&i!==d.a.timeOnly&&i!==d.a.timestampOffset||!this.dateFormattingAvailable()?"":l.qy`<div>${i!==d.a.timeOnly?a?this.renderFieldConfigsDateFormat():this.renderDateFormat():null}${i!==d.a.timeOnly&&i!==d.a.dateOnly?this.renderShowTime():null}${i!==d.a.dateOnly?a?this.renderFieldConfigsTimeFormat():this.renderTimeFormat():null}</div>`:""}renderThousandSeparator(){const{_messages:e,arcadeExpMap:t,firstSelectedFieldInfo:i,usingFieldConfigs:a}=this;return a&&!t.has(i.fieldName)?this.renderFieldConfigsThousandSeparator():l.qy`<section class="single-line-label-switch-section"><calcite-label class="single-line-label-switch-label">${e.attributesFormatting.thousandSeparator}</calcite-label><calcite-switch class="single-line-label-switch-switch" .checked=${!!i.format.digitSeparator} @calciteSwitchChange=${e=>{e.stopPropagation(),this.handleThousandSeparatorChange()}} ${(0,h.K)(this.thousandSeparatorSwitchNode)}></calcite-switch></section>`}renderFieldConfigsThousandSeparator(){const{_messages:e,layer:t,firstSelectedFieldInfo:i}=this,a=t.getFieldConfiguration(i.fieldName);return l.qy`<calcite-label class="single-line-label-switch-label">${e.attributesFormatting.thousandSeparator}</calcite-label><calcite-select .label=${e.attributesFormatting.thousandSeparator} .value=${a.fieldFormat?.useGrouping??"auto"} @calciteSelectChange=${e=>{const t=e.target.selectedOption.value;a.fieldFormat.useGrouping=t,this.saveFieldConfigs()}}><calcite-option value=auto>${e.attributesFormatting.separatorLocale}</calcite-option><calcite-option value=always>${e.attributesFormatting.separatorAlways}</calcite-option><calcite-option value=never>${e.attributesFormatting.separatorNever}</calcite-option></calcite-select>`}renderSignificantDigits(){const{_messages:e,arcadeExpMap:t,firstSelectedFieldInfo:i,usingFieldConfigs:a}=this;return a&&!t.has(i.fieldName)?this.renderFieldConfigsSignificantDigits():l.qy`<section><calcite-label>${e.attributesFormatting.significantDigits}<calcite-select .label=${e.attributesFormatting.significantDigits} @calciteSelectChange=${e=>{const t=e.target;i.format.places=Number(t.selectedOption.value)||0,this.saveFieldInfo()}}>${[0,1,2,3,4,5,6,7,8].map(t=>l.qy`<calcite-option .value=${t.toString()} .selected=${i.format.places===t}>${`${t} ${e.attributesFormatting.decimalPlaces}`}</calcite-option>`)}</calcite-select></calcite-label></section>`}renderFieldConfigsSignificantDigits(){const{_messages:e,layer:t,firstSelectedFieldInfo:i}=this,a=t.getFieldConfiguration(i.fieldName);return l.qy`<section><calcite-label>${e.attributesFormatting.significantDigits}<div class="field-configs-significant-digits"><calcite-label>${e.attributesFormatting.minimum}<calcite-input-number .value=${`${a.fieldFormat?.minimumFractionDigits??0}`} min=0 .max=${Number.parseInt(this.maxSignificantDigitsNode.value?.value??"20")} step=1 @calciteInputNumberInput=${()=>{clearTimeout(this.minSignificantDigitsHandle);const e=Number.parseInt(this.minSignificantDigitsNode.value.value);a.fieldFormat.minimumFractionDigits!==e&&(!Number.isNaN(e)&&this.minSignificantDigitsNode.value.value&&e<=Number.parseInt(this.maxSignificantDigitsNode.value.value)?a.fieldFormat.minimumFractionDigits=e:this.minSignificantDigitsHandle=setTimeout(()=>this.minSignificantDigitsNode.value.value=`${a.fieldFormat?.minimumFractionDigits??0}`,2e3),this.saveFieldConfigs())}} .label=${e.attributesFormatting.minimum} ${(0,h.K)(this.minSignificantDigitsNode)}></calcite-input-number></calcite-label><calcite-label>${e.attributesFormatting.maximum}<calcite-input-number .value=${`${a.fieldFormat?.maximumFractionDigits??20}`} .min=${Number.parseInt(this.minSignificantDigitsNode.value?.value??"0")} max=20 step=1 @calciteInputNumberInput=${()=>{clearTimeout(this.maxSignificantDigitsHandle);const e=Number.parseInt(this.maxSignificantDigitsNode.value.value);a.fieldFormat.maximumFractionDigits!==e&&(!Number.isNaN(e)&&this.minSignificantDigitsNode.value.value&&Number.parseInt(this.minSignificantDigitsNode.value.value)<=e?a.fieldFormat.maximumFractionDigits=e:this.maxSignificantDigitsHandle=setTimeout(()=>this.maxSignificantDigitsNode.value.value=`${a.fieldFormat?.maximumFractionDigits??20}`,2e3),this.saveFieldConfigs())}} .label=${e.attributesFormatting.maximum} ${(0,h.K)(this.maxSignificantDigitsNode)}></calcite-input-number></calcite-label></div></calcite-label></section>`}renderDateFormat(){const{_messages:e}=this,t=this.getLegacyDateTimeFormatStrings().dateFormat;return l.qy`<section><calcite-label>${e.attributesFormatting.dateFormat}<calcite-select .label=${e.attributesFormatting.dateFormat} @calciteSelectChange=${()=>this.changeDateTimeFormat()} ${(0,h.K)(this.dateFormatSelectNode)}>${c.d.map(e=>l.qy`<calcite-option .value=${e} .selected=${t===e}>${s.formatDate(S,s.convertDateFormatToIntlOptions(e))}</calcite-option>`)}</calcite-select></calcite-label></section>`}renderFieldConfigsDateFormat(){const{layer:e,_messages:t,firstSelectedFieldInfo:i}=this,a=e.getFieldConfiguration(i.fieldName).fieldFormat,o=a.dateStyle??void 0,n=a.dateStyle?void 0:a.year,r=a.dateStyle?void 0:a.month??void 0;return l.qy`<section><calcite-label>${t.attributesFormatting.dateFormat}<calcite-select .label=${t.attributesFormatting.dateFormat} @calciteSelectChange=${()=>this.changeFieldConfigsDateFormat()} ${(0,h.K)(this.dateFormatSelectNode)}>${c.i.map(e=>l.qy`<calcite-option .value=${e} .selected=${o===e.dateStyle&&n===e.year&&r===e.month}>${s.formatDate(S,e)}</calcite-option>`)}</calcite-select></calcite-label></section>`}renderShowTime(){const{layer:e,_messages:t,firstSelectedFieldInfo:i,usingFieldConfigs:a}=this,o=a?!!e.getFieldConfiguration(i.fieldName).fieldFormat.timeStyle:!!this.getLegacyDateTimeFormatStrings().timeFormat;if(a){if(!e.getFieldConfiguration(i.fieldName).fieldFormat?.dateStyle)return""}else if(i.format.dateFormat&&["long-month-year","short-month-year","year"].includes(i.format.dateFormat))return"";return l.qy`<section class="single-line-label-switch-section" ${(0,h.K)(this.showTimeSectionNode)}><calcite-label class="single-line-label-switch-label">${t.attributesFormatting.showTime}</calcite-label><calcite-switch class="single-line-label-switch-switch" .checked=${o} @calciteSwitchChange=${e=>{e.stopPropagation(),this.handleToggleShowTime()}} ${(0,h.K)(this.showTimeSwitchNode)}></calcite-switch></section>`}renderTimeFormat(){const{_messages:e,firstSelectedFieldInfo:t}=this,i=this.getLegacyDateTimeFormatStrings().timeFormat,a=c.a.get(t.format.dateFormat);return t.format.dateFormat&&["long-month-year","short-month-year","year"].includes(t.format.dateFormat)||!a.timeFormat?"":l.qy`<section ${(0,h.K)(this.timeFormatSectionNode)}><calcite-label>${e.attributesFormatting.timeFormat}<calcite-select .label=${e.attributesFormatting.timeFormat} @calciteSelectChange=${()=>this.changeDateTimeFormat()} ${(0,h.K)(this.timeFormatSelectNode)}>${c.t.map(e=>l.qy`<calcite-option .value=${e} .selected=${i===e}>${this.getTimeFormatString(e)}</calcite-option>`)}</calcite-select></calcite-label></section>`}renderFieldConfigsTimeFormat(){const{_messages:e,layer:t,firstSelectedFieldInfo:i,firstSelectedFieldType:a}=this,o=t.getFieldConfiguration(i.fieldName).fieldFormat,n="never"===o.hour12,r=a===d.a.timeOnly?c.b.slice(0,2):c.b;return a!==d.a.timeOnly&&!o.dateStyle||!o.timeStyle?"":l.qy`<section ${(0,h.K)(this.fieldConfigsTimeFormatSectionNode)}><calcite-label>${e.attributesFormatting.hourFormat}<calcite-select .label=${e.attributesFormatting.hourFormat} @calciteSelectChange=${e=>{const t=e.target.selectedOption.value;o.hour12=t,this.saveFieldConfigs()}} ${(0,h.K)(this.fieldConfigsHourFormatNode)}><calcite-option value=auto .selected=${"auto"===o.hour12}>${e.attributesFormatting.hour12Locale}</calcite-option><calcite-option value=always .selected=${"always"===o.hour12}>${e.attributesFormatting.hour12Always}</calcite-option><calcite-option value=never .selected=${"never"===o.hour12}>${e.attributesFormatting.hour12Never}</calcite-option></calcite-select></calcite-label><calcite-label>${e.attributesFormatting.timeFormat}<calcite-select .label=${e.attributesFormatting.timeFormat} @calciteSelectChange=${e=>{const t=e.target.selectedOption.value.timeStyle;o.timeStyle=t,o.dateStyle||(o.dateStyle="short"),this.saveFieldConfigs()}} ${(0,h.K)(this.fieldConfigsTimeFormatSelectNode)}>${r.map(e=>l.qy`<calcite-option .value=${e} .selected=${o.timeStyle===e.timeStyle}>${s.formatTimeOnly(n?"18:00:00":"00:00:00",{...e,hour12:!n})}</calcite-option>`)}</calcite-select></calcite-label></section>`}renderDeleteButton(){const{layer:e,mapView:t,config:i,selectedFields:a,_messages:o,fieldsAreDeletable:s}=this;return s?l.qy`<calcite-button appearance=outline-fill slot=footer width=half kind=danger @click=${o=>{const s=o.currentTarget;s.disabled=!0;const n=(0,g.dN)(l.qy`<arcgis-portal-field-delete .layer=${e} .mapView=${t} .config=${i} .fieldNames=${a} @arcgisFieldsDeleted=${()=>{n.remove(),this.arcgisFieldsDeleted.emit(a)}} @arcgisClose=${e=>{n.remove(),e.stopPropagation(),s.disabled=!1}}></arcgis-portal-field-delete>`);document.body.append(n)}}>${1===a.length?o.attributesFormatting.deleteField:o.attributesFormatting.deleteFields}</calcite-button>`:""}renderDoneButton(){const{_messages:e,fieldsAreDeletable:t}=this;return l.qy`<calcite-button appearance=outline-fill slot=footer .width=${t?"half":"full"} @click=${()=>this.arcgisClose.emit()}>${e.attributesFormatting.done}</calcite-button>`}}(0,a.c)("arcgis-map-config-fields-formatting",b)},57313:(e,t,i)=>{i.d(t,{a:()=>n,b:()=>s,d:()=>a,i:()=>l,t:()=>o});const a=["short-date","long-month-day-year","day-short-month-year","long-date","long-month-year","short-month-year","year"],l=[{dateStyle:"short",month:void 0,year:void 0},{dateStyle:"long",month:void 0,year:void 0},{dateStyle:"medium",month:void 0,year:void 0},{dateStyle:"full",month:void 0,year:void 0},{dateStyle:void 0,month:"long",year:"numeric"},{dateStyle:void 0,month:"short",year:"numeric"},{dateStyle:void 0,month:void 0,year:"numeric"}],o=["short-time","long-time","short-time-24","long-time-24"],s=[{timeStyle:"short"},{timeStyle:"medium"},{timeStyle:"long"},{timeStyle:"full"}],n=new Map;n.set("short-date",{dateFormat:a[0],timeFormat:""}),n.set("short-date-short-time",{dateFormat:a[0],timeFormat:o[0]}),n.set("short-date-long-time",{dateFormat:a[0],timeFormat:o[1]}),n.set("short-date-short-time-24",{dateFormat:a[0],timeFormat:o[2]}),n.set("short-date-long-time-24",{dateFormat:a[0],timeFormat:o[3]}),n.set("long-month-day-year",{dateFormat:a[1],timeFormat:""}),n.set("long-month-day-year-short-time",{dateFormat:a[1],timeFormat:o[0]}),n.set("long-month-day-year-long-time",{dateFormat:a[1],timeFormat:o[1]}),n.set("long-month-day-year-short-time-24",{dateFormat:a[1],timeFormat:o[2]}),n.set("long-month-day-year-long-time-24",{dateFormat:a[1],timeFormat:o[3]}),n.set("day-short-month-year",{dateFormat:a[2],timeFormat:""}),n.set("day-short-month-year-short-time",{dateFormat:a[2],timeFormat:o[0]}),n.set("day-short-month-year-long-time",{dateFormat:a[2],timeFormat:o[1]}),n.set("day-short-month-year-short-time-24",{dateFormat:a[2],timeFormat:o[2]}),n.set("day-short-month-year-long-time-24",{dateFormat:a[2],timeFormat:o[3]}),n.set("long-date",{dateFormat:a[3],timeFormat:""}),n.set("long-date-short-time",{dateFormat:a[3],timeFormat:o[0]}),n.set("long-date-long-time",{dateFormat:a[3],timeFormat:o[1]}),n.set("long-date-short-time-24",{dateFormat:a[3],timeFormat:o[2]}),n.set("long-date-long-time-24",{dateFormat:a[3],timeFormat:o[3]}),n.set("long-month-year",{dateFormat:a[4],timeFormat:null}),n.set("short-month-year",{dateFormat:a[5],timeFormat:null}),n.set("year",{dateFormat:a[6],timeFormat:null}),n.set("default",{dateFormat:a[0],timeFormat:o[2]})}}]);