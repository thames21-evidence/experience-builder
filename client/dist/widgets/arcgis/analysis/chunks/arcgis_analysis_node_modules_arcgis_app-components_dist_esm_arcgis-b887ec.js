/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-b887ec.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-b887ec"],{931:(e,t,i)=>{i.d(t,{l:()=>s});var a=i(93814);const s=async(e,t)=>(await a.e.exports.loadModules(e,t)).map(e=>e.__esModule&&e.default?e.default:e)},12192:(e,t,i)=>{i.d(t,{a:()=>r,g:()=>h});var a=i(15332),s=i(94984),o=i(87849);function r(e){var t,i,o;const r=null!==(t=(0,a.c)(e,"[lang]"))&&void 0!==t?t:null===(o=null===(i=e.shadowRoot)||void 0===i?void 0:i.ownerDocument)||void 0===o?void 0:o.documentElement,n=((null==r?void 0:r.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return s.l.has(n)?s.l.get(n):s.l.has(n.slice(0,2))?s.l.get(n.slice(0,2)):"en"}const n={};function l(e,t){const i=`${e}${t}`;return n[i]||(n[i]=function(e,t){return new Promise((i,a)=>{fetch((0,o.d)(`../arcgis-app-assets/i18n/${e}.i18n.${t}.json`)).then(e=>{e.ok?i(e.json()):a()},()=>a())})}(e,t)),n[i]}async function h(e,t){const i=t||e.tagName.toLowerCase(),o=r(e),n=function(e){var t,i,o;const r=null!==(t=(0,a.c)(e,"[lang]"))&&void 0!==t?t:null===(o=null===(i=e.shadowRoot)||void 0===i?void 0:i.ownerDocument)||void 0===o?void 0:o.documentElement,n=((null==r?void 0:r.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return s.l.has(n)?s.l.get(n):s.l.has(n.slice(0,2))?n:"en"}(e);let h;try{h=await l(i,o)}catch(e){console.warn(`no locale for ${i} (${o}) loading default locale en.`),h=await l(i,"en")}return[h,o,n]}},31415:(e,t,i)=>{i.r(t),i.d(t,{arcgis_image_upload:()=>n,arcgis_image_upload_edit_step:()=>l,arcgis_image_upload_file_step:()=>h});var a=i(87849),s=i(931),o=i(12192),r=i(94984);i(93814),i(15332);const n=class{constructor(e){(0,a.r)(this,e),this.arcgisImageUploadCancel=(0,a.c)(this,"arcgisImageUploadCancel",7),this.arcgisImageUploadError=(0,a.c)(this,"arcgisImageUploadError",7),this.arcgisImageUploadSave=(0,a.c)(this,"arcgisImageUploadSave",7),this.arcgisImageUploadDelete=(0,a.c)(this,"arcgisImageUploadDelete",7),this.imageFormat="png",this.fileName="",this.validMapTypes=["Image Service","Feature Collection","Feature Service","Map Service","Vector Tile Service","Web Map"],this.handleCancel=()=>{this.showError=!1,this.arcgisImageUploadCancel.emit()},this.handleDelete=()=>{this.showError=!1,this.arcgisImageUploadDelete.emit()},this.handleChooseDiffClick=()=>{this.activeStep="file",this.previewSrc="",this.editExisting=!1},this.handleSaveClick=async()=>{if("file"===this.activeStep)return void this.showErrorAlert();if(this.showError=!1,this.saving=!0,"map"===this.activeStep)return void this.takeMapScreenshot();const e=await this.getCanvasImage();e&&this.arcgisImageUploadSave.emit(e)},this.takeMapScreenshot=async()=>{this.mapView._stage&&(this.mapView._stage._supersampleScreenshots=!1);const e=await this.mapView.takeScreenshot({format:"png"}),t={blob:this.dataURIToBlob(e.dataUrl),base64:e.dataUrl,format:"png",fileName:""};this.arcgisImageUploadSave.emit(t)},this.handleFromMapClick=()=>{this.activeStep="map"},this.handleMapViewLoaded=e=>{this.mapView=e.detail},this.loadPortalItem=async()=>{const[e]=await(0,s.l)(["esri/portal/PortalItem"]),t=new e({id:this.itemId,portal:this.portal});return await t.load(),t},this.modalTitle=void 0,this.sizeDescription=void 0,this.zoomToFit=!0,this.maxWidth=void 0,this.maxHeight=void 0,this.fillBackground=!1,this.active=void 0,this.height=window.innerWidth<412?200:300,this.aspectRatio=1,this.portal=void 0,this.itemId=void 0,this.jsapiUrl=void 0,this.rounded=!1,this.existingImage=void 0,this.hideCancel=!1,this.changeText=void 0,this.showDelete=!1,this.deleteText=void 0,this.previewSrc=void 0,this.saving=!1,this.editExisting=!1,this.isModified=!1,this.activeStep="file",this.showError=!1,this.errorMessage="",this.item=void 0}handleFileChange(e){const{fileName:t,dataURL:i}=e.detail;this.fileName=t,this.previewSrc=i,this.activeStep="edit",this.showError=!1}handleInvalidFile(){this.showErrorAlert(),this.arcgisImageUploadError.emit("invalid file type.")}handleSizeExceeded(){this.showErrorAlert(!0),this.arcgisImageUploadError.emit("file size exceeded.")}handleMapLoadFail(){this.arcgisImageUploadError.emit("file size exceeded."),this.errorMessage=this.strings.unableToLoadItem,this.showError=!0}handleImageChange(){this.isModified=!0}handleActiveChange(){var e;this.active?this.existingImage&&(this.previewSrc=this.existingImage,this.activeStep="edit",this.editExisting=!0):(this.activeStep="file",this.saving=!1,this.isModified=!1,this.previewSrc="",this.editExisting=!1,null===(e=this.fileStep)||void 0===e||e.resetFileInput())}async componentWillLoad(){const e=await(0,o.g)(this.el);this.strings=e[0],this.itemId&&(this.item=await this.loadPortalItem())}showErrorAlert(e){this.errorMessage=e?this.strings.imageSizeError:this.strings.imageRequired,this.showError=!0}dataURIToBlob(e){const t=atob(e.split(",")[1]),i=e.split(",")[0].split(":")[1].split(";")[0],a=new ArrayBuffer(t.length),s=new Uint8Array(a);for(let e=0;e<t.length;e++)s[e]=t.charCodeAt(e);return new Blob([a],{type:i})}drawImage({selectionX:e,selectionY:t,selectionWidth:i,selectionHeight:a,canvasWidth:s,canvasHeight:o,minWidth:r,minHeight:n,drawDimensions:l},h,c,d){this.canvasEl.width=s<r?r:s*h,this.canvasEl.height=o<n?n:o*h,this.maxWidth&&this.canvasEl.width>this.maxWidth&&(this.canvasEl.width=this.maxWidth),this.maxHeight&&this.canvasEl.height>this.maxHeight&&(this.canvasEl.height=this.maxHeight);const g=l.left*this.canvasEl.width,p=l.top*this.canvasEl.height,m=l.width*this.canvasEl.width,f=l.height*this.canvasEl.height;this.fillBackground&&!this.rounded&&(d.fillStyle="#efefef",d.fillRect(0,0,this.canvasEl.width,this.canvasEl.height)),d.drawImage(c,e,t,i,a,g,p,m,f),this.rounded&&(d.globalCompositeOperation="destination-in",d.beginPath(),d.arc(this.canvasEl.width/2,this.canvasEl.height/2,this.canvasEl.height/2,0,2*Math.PI),d.closePath(),d.fill());const u=this.canvasEl.toDataURL("image/png");return{base64:u,blob:this.dataURIToBlob(u)}}async getScaledImageData(e){const t=this.canvasEl.getContext("2d"),i=await this.editStepEl.getDrawParameters();let a;const s=()=>(t.clearRect(0,0,this.canvasEl.width,this.canvasEl.height),this.drawImage(i,1600/e.width,e,t));try{if(a=this.drawImage(i,1,e,t),0===a.blob.size)throw{name:"NS_ERROR_FAILURE"};a.blob.size>1e7&&(a=s())}catch(e){if("NS_ERROR_FAILURE"!==e.name)return void this.arcgisImageUploadError.emit("unable to save the image provided.");a=s()}return{blob:null==a?void 0:a.blob,base64:null==a?void 0:a.base64,format:this.imageFormat,fileName:this.fileName}}getCanvasImage(){return new Promise(e=>{const t=new Image;this.previewSrc.indexOf("arcgis.com")>-1&&(t.crossOrigin="Anonymous"),t.onload=()=>{Math.abs(this.aspectRatio-t.width/t.height)<.01&&!this.isModified?e({blob:this.dataURIToBlob(this.previewSrc),base64:this.previewSrc,format:this.imageFormat,fileName:this.fileName}):e(this.getScaledImageData(t))},t.src=this.previewSrc})}render(){var e;const t=!!this.portal&&!!this.itemId&&!!this.jsapiUrl&&this.validMapTypes.includes(null===(e=this.item)||void 0===e?void 0:e.type);return(0,a.h)("calcite-dialog",{key:"236cedaead3b27ddf7e96f4ae677ebfcc5e8b0a0",class:"image-upload__modal",open:this.active,outsideCloseDisabled:!0,heading:this.modalTitle,headingLevel:3,scale:"l",modal:!0,onCalciteDialogClose:this.handleCancel},(0,a.h)("div",{key:"9a5a9db2e9aaaa184b970f60f11d4f7d32b39a79",class:{"image-upload__content":!0,"image-upload__content--hidden":!this.active,"image-upload__content--with-map":t,"image-upload__content--no-padding":"map"===this.activeStep}},"file"===this.activeStep&&(0,a.h)("div",{key:"4d33fd484b3202749e24fc9056fc894060337450"},(0,a.h)("arcgis-image-upload-file-step",{key:"ebb0fb12cbd6f858b8fdf33dce8b6b11cbd2fe8e",ref:e=>{this.fileStep=e},strings:this.strings,sizeDescription:this.sizeDescription}),t&&(0,a.h)(a.F,{key:"bf425b1e5cc844bd58ac665ef8f266fbe69a4b37"},(0,a.h)("div",{key:"873a5f14571ebdfb542699e4da1492345d048e5d",class:"or-container"},(0,a.h)("span",{key:"57ee07fa8fcd742092290d1115a291cd233c709d",class:"or-wrapper"},this.strings.or)),(0,a.h)("div",{key:"cfa6ad31acd741698020091bd56d36c7af32448a",class:"image-upload__from-map-button",tabIndex:0,onClick:this.handleFromMapClick,onKeyDown:e=>{"Space"!==e.code&&"Enter"!==e.code||this.handleFromMapClick()}},(0,a.h)("div",{key:"87a80c65b5d5d423c7a84ac5e742318ca69ce1bf",class:"image-upload__from-map-title"},(0,a.h)("div",{key:"127b09aa16428030ef535162587aa8f0f4376023",class:"from-map-title-wrapper"},(0,a.h)("calcite-icon",{key:"3ee3b024383d165134cbec506317302cf7f5f101",icon:"map",scale:"m",class:"from-map-icon"}),this.strings.fromMap)),(0,a.h)("p",{key:"b3c9405e6aa875a614ba81053220765a7e3b9688",class:"image-upload__from-map-desc"},this.strings.fromMapDesc)))),"map"===this.activeStep&&(0,a.h)("arcgis-image-upload-from-map",{key:"d1efce1dd7591a43bb2e31927a19bb84a5b5cbbb",portal:this.portal,itemId:this.itemId,item:this.item,jsapiUrl:this.jsapiUrl,changeBasemapText:this.strings.changeBasemap,loadingText:this.strings.loading,onArcgisImageUploadFromMapReady:this.handleMapViewLoaded}),"edit"===this.activeStep&&(0,a.h)("arcgis-image-upload-edit-step",{key:"f6d739baccfc9d79bae14a8915cad0f8e20d0b5a",ref:e=>{this.editStepEl=e},strings:this.strings,height:this.height,aspectRatio:this.aspectRatio,previewSrc:this.previewSrc,zoomToFit:this.zoomToFit,rounded:this.rounded}),"edit"===this.activeStep&&(0,a.h)("canvas",{key:"116e8bf281de7934f6cf8b389471f1cd60ccc99e",ref:e=>{this.canvasEl=e},class:"image-upload__canvas"}),(0,a.h)("calcite-alert",{key:"be8feeeff350e8164720e58816c5b571876f7b17",label:this.strings.imageRequired,open:this.showError,ref:e=>{this.alertEl=e},icon:"exclamation-mark-circle",placement:"bottom",kind:"danger",onCalciteAlertClose:()=>{this.showError=!1}},(0,a.h)("div",{key:"2df79422caa464984d1f2213f9cc34a9e48f790a",slot:"message"},this.errorMessage))),!this.deleteText&&("edit"===this.activeStep||"map"===this.activeStep)&&(0,a.h)("calcite-button",{key:"18c2619f88608225cf2c2ee52d237e34ce2b5ce0",slot:"footer-start",appearance:"transparent","icon-start":"chevron-left",disabled:this.saving,onClick:this.handleChooseDiffClick,iconFlipRtl:"start"},this.changeText||this.strings.chooseDiff),"edit"===this.activeStep&&this.editExisting&&this.showDelete&&(0,a.h)("calcite-button",{key:"f7f45924de46ac387facec6dfe12daeceadaa2fa",slot:"footer-start",appearance:"outline-fill",disabled:this.saving,onClick:this.handleDelete},this.deleteText||this.strings.deleteImage),this.deleteText&&this.hideCancel&&"edit"===this.activeStep?(0,a.h)("calcite-button",{slot:"footer-end",appearance:"outline-fill",disabled:this.saving,onClick:this.handleChooseDiffClick},this.changeText||this.strings.chooseDiff):(0,a.h)("calcite-button",{slot:"footer-end",appearance:"outline-fill",disabled:this.saving,onClick:this.handleCancel},this.strings.cancel),(0,a.h)("calcite-button",{key:"1e0192a983a54f00edca2682a568038b8e92b084",slot:"footer-end",appearance:"solid",loading:this.saving,onClick:this.handleSaveClick},this.strings.save))}get el(){return(0,a.a)(this)}static get watchers(){return{active:["handleActiveChange"]}}};n.style='.image-upload__modal{--calcite-dialog-min-size-x:700px;--calcite-dialog-max-size-x:700px}.image-upload__title{margin-bottom:0px;font-size:1.25rem}.image-upload__content{box-sizing:border-box;background-color:var(--calcite-color-background);padding-left:2rem;padding-right:2rem;padding-top:1rem;padding-bottom:1.5rem;border:1px solid var(--calcite-color-border-3)}.image-upload__content--hidden{display:none}.image-upload__content--with-map{min-height:400px}.image-upload__content--no-padding{padding:0px}.image-upload__canvas{visibility:hidden;position:fixed;left:-10000px}.or-container{margin-top:1rem;margin-bottom:1rem;text-align:center;font-weight:500}.or-container:before,.or-container:after{display:inline-block;vertical-align:middle;content:"";border-top:solid 1px var(--calcite-color-border-input);width:15%;height:1px;z-index:1}.or-wrapper{padding-left:0.5rem;padding-right:0.5rem}.image-upload__from-map-button{background-color:var(--calcite-color-foreground-1);padding:1rem;text-align:center;border:1px solid var(--calcite-color-foreground-3)}.image-upload__from-map-button:hover{border:1px solid var(--calcite-color-brand)}.image-upload__from-map-title{display:inline-block}.from-map-title-wrapper{display:flex;align-items:center}.from-map-icon{margin-right:0.5rem}.image-upload__from-map-desc{margin:0px;font-size:0.875rem}';const l=class{constructor(e){(0,a.r)(this,e),this.arcgisImageUploadEditStepImageChanged=(0,a.c)(this,"arcgisImageUploadEditStepImageChanged",7),this.handleWheel=e=>{e.preventDefault();const t=e.deltaY>0?1*this.imageProperties.scale/1.1:1.1*this.imageProperties.scale;this.zoomValue=""+(50+Math.log(t)/Math.log(1.1)),this.imageProperties=Object.assign(Object.assign({},this.imageProperties),{scale:t})},this.handleDragStart=()=>{this.dragging=!0},this.handleDrag=e=>{if(!this.dragging)return;const{touches:t}=e;let{clientX:i,clientY:a}=e;if(void 0===i||void 0===a){if(!t.length)return;i=t[0].clientX,a=t[0].clientY}if(!this.previousPosition)return void(this.previousPosition={top:a,left:i});const{top:s,left:o}=this.previousPosition,r=a-s,n=i-o;this.imageProperties=Object.assign(Object.assign({},this.imageProperties),{top:this.imageProperties.top+r,left:this.imageProperties.left+n}),this.previousPosition={top:s+r,left:o+n}},this.handleDragEnd=()=>{this.dragging=!1,this.previousPosition=void 0},this.handleImageLoaded=()=>{if(this.editingExisting)return this.loadingImage=!1,this.imageProperties=Object.assign(Object.assign({},this.imageProperties),{scale:this.height/this.imageEl.width,top:0,left:0,origin:{x:"0%",y:"0%"}}),void(this.isLoading=!1);const e=this.height*this.aspectRatio,{clientWidth:t,clientHeight:i}=this.imageEl,a=(this.height+2)/i,s=(e+2)/t,o=a>s?a:s;let r=Object.assign({},this.imageProperties);r=Object.assign(Object.assign({},r),{top:Math.floor(this.height/2-i/2),left:Math.floor(this.height*this.aspectRatio/2-t/2),origin:{x:"50%",y:"50%"}}),this.zoomToFit&&(r=Object.assign(Object.assign({},r),{top:r.top-1,left:r.left-1,scale:o}),this.initiallySettingZoom=!0,this.zoomValue=""+(50+Math.log(o)/Math.log(1.1))),this.imageProperties=Object.assign({},r),this.isLoading=!1},this.handleZoomInput=e=>{this.initiallySettingZoom&&(this.initiallySettingZoom=!1),this.zoomValue=e.target.value,this.imageProperties=Object.assign(Object.assign({},this.imageProperties),{scale:Math.pow(1.1,e.target.value-50)})},this.handleImageKeydown=e=>{let t=!1;switch(e.key){case"ArrowUp":this.imageProperties=Object.assign(Object.assign({},this.imageProperties),{top:this.imageProperties.top-1}),t=!0;break;case"ArrowDown":this.imageProperties=Object.assign(Object.assign({},this.imageProperties),{top:this.imageProperties.top+1}),t=!0;break;case"ArrowLeft":this.imageProperties=Object.assign(Object.assign({},this.imageProperties),{left:this.imageProperties.left-1}),t=!0;break;case"ArrowRight":this.imageProperties=Object.assign(Object.assign({},this.imageProperties),{left:this.imageProperties.left+1}),t=!0}t&&e.preventDefault()},this.strings=void 0,this.aspectRatio=void 0,this.previewSrc=void 0,this.loadingImage=!1,this.editingExisting=!1,this.zoomToFit=!1,this.height=void 0,this.rounded=!1,this.imageProperties={scale:1,top:0,left:0,origin:{x:"50%",y:"50%"}},this.dragging=!1,this.previousPosition=void 0,this.previewStyle=void 0,this.zoomValue="50",this.initiallySettingZoom=!1,this.firstImagePropertiesChange=!0,this.isLoading=!0}componentWillLoad(){const e=this.height*this.aspectRatio,t=`${this.height+60}px`;this.thumbContainerStyle={height:t},this.translucentContainerStyle={width:`${e+60}px`,height:t},this.transparentContainerStyle={width:`${e}px`,height:`${this.height}px`},this.previewStyle={transform:`scale(${this.imageProperties.scale})`,top:`${this.imageProperties.top}px`,left:`${this.imageProperties.left}px`,transformOrigin:`${this.imageProperties.origin.x} ${this.imageProperties.origin.y}`}}componentDidLoad(){this.imageContainerEl.focus()}getImageExtent(){const e=this.imageEl.getBoundingClientRect(),t=this.imageContainerEl.getBoundingClientRect();return{left:(t.left-e.left)/e.width,right:(t.right-e.left)/e.width,top:(t.top-e.top)/e.height,bottom:(t.bottom-e.top)/e.height}}getDrawDimensions(){const e=this.imageEl.getBoundingClientRect(),t=this.imageContainerEl.getBoundingClientRect(),i=e.top-t.top>0?e.top-t.top:0,a=e.left-t.left>0?e.left-t.left:0,s=e.left<t.left?t.left:e.left,o=e.top<t.top?t.top:e.top,r=e.right>t.right?t.right:e.right,n=e.bottom>t.bottom?t.bottom:e.bottom;return{left:a/t.width,top:i/t.height,width:(r-s)/t.width,height:(n-o)/t.height}}async getDrawParameters(){const e=this.height*this.aspectRatio,t=this.height,{left:i,right:a,top:s,bottom:o}=this.getImageExtent(),r=i<0?0:i,n=s<0?0:s,l=a>1?1:a,h=o>1?1:o,c=this.getDrawDimensions(),d=this.imageEl.clientWidth,g=this.imageEl.clientHeight;return{selectionX:r*d,selectionY:n*g,selectionWidth:l*d-r*d,selectionHeight:h*g-n*g,canvasWidth:Math.abs(a)*d-Math.abs(i)*d,canvasHeight:Math.abs(o)*g-Math.abs(s)*g,minWidth:e,minHeight:t,drawDimensions:c}}handleImagePropertiesChange(){this.previewStyle={transform:`scale(${this.imageProperties.scale})`,top:`${this.imageProperties.top}px`,left:`${this.imageProperties.left}px`,transformOrigin:`${this.imageProperties.origin.x} ${this.imageProperties.origin.y}`},this.firstImagePropertiesChange?(this.firstImagePropertiesChange=!1,this.zoomToFit&&this.arcgisImageUploadEditStepImageChanged.emit()):this.arcgisImageUploadEditStepImageChanged.emit()}render(){return(0,a.h)(a.H,{key:"545ece71e5556d99b73e4409fdac506b68378639",onWheel:this.handleWheel},(0,a.h)("calcite-loader",{key:"c5253c8153bb24a97ce7d16dd4e8cae96a01fc00",class:"edit-step__loader",label:"",hidden:!this.isLoading}),(0,a.h)("div",{key:"0eb1b9a8a5238cfe61a8c279554fb46fe73245db",class:"edit-step__crop-thumb-container "+(this.isLoading?"edit-step__crop-thumb-container--hidden":""),style:this.thumbContainerStyle},(0,a.h)("div",{key:"5f331262fc6fdd8938a9d0c3eadd3f27b13bb0a3",class:{"edit-step__translucent-container":!0,"translucent-container--rounded":this.rounded},style:this.translucentContainerStyle,onMouseDown:this.handleDragStart,onTouchStart:this.handleDragStart,onMouseMove:this.handleDrag,onTouchMove:this.handleDrag,onMouseUp:this.handleDragEnd,onTouchEnd:this.handleDragEnd,onMouseOut:this.handleDragEnd},(0,a.h)("div",{key:"6b5f71abd157ebe82d681d4598f90c96ce00e15b",ref:e=>{this.imageContainerEl=e},class:"edit-step__transparent-container",tabIndex:0,style:this.transparentContainerStyle,onKeyDown:this.handleImageKeydown},(0,a.h)("img",{key:"e6e87541b7fe57480c9236981bec07227850457b",ref:e=>{this.imageEl=e},src:this.previewSrc,alt:"",class:"edit-step__preview-image "+(this.loadingImage?"edit-step__preview-image--loading":""),style:this.previewStyle,onLoad:this.handleImageLoaded})))),(0,a.h)("calcite-label",{key:"4f1c839b8ce6c676851561aef5c3e561f0da3243",class:{"edit-step__zoom-control":!0,"edit-step__zoom-control--hidden":this.isLoading}},this.strings.zoom,(0,a.h)("calcite-slider",{key:"44d0e2704e1278f0d3f79d7d52452fbf4ce4071c","aria-label":this.strings.zoom,scale:"l",min:1,max:100,value:+this.zoomValue,onCalciteSliderInput:this.handleZoomInput,mirrored:"rtl"===(0,r.g)(this.el)})),(0,a.h)("div",{key:"fff5d563266d8858fc93440c981876c89c6cc652",class:"edit-step__zoom-control-label"},(0,a.h)("div",{key:"a0a1e5aedb84601f61f01796e0201e1a9aa16527",class:"edit-step__zoom-control-icon-s"},(0,a.h)("calcite-icon",{key:"1d4e69ef3ae99f120210ecf6ee00ca4bcbd81092",icon:"image",scale:"s"})),(0,a.h)("div",{key:"f8b29d2badb47d6f499472d625633515bd15f472",class:"edit-step__zoom-control-label-spacer"}),(0,a.h)("div",{key:"5ea16465c6fb9553669061d1e28ce69d08c1a09d",class:"edit-step__zoom-control-icon-l"},(0,a.h)("calcite-icon",{key:"a0f666ad9ab599f999dd81219220635c019f0529",icon:"image",scale:"l"}))))}get el(){return(0,a.a)(this)}static get watchers(){return{imageProperties:["handleImagePropertiesChange"]}}};l.style=':host{position:relative;display:block;overflow:hidden;min-height:20.625rem}.edit-step__loader{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.edit-step__crop-thumb-container{position:relative;width:100%;overflow:hidden}.edit-step__crop-thumb-container--hidden{visibility:hidden}.edit-step__translucent-container{position:absolute;top:0px;overflow:hidden;left:50%;cursor:all-scroll;transform:translate(-50%)}.edit-step__translucent-container:after{position:absolute;top:0px;right:0px;bottom:0px;left:0px;box-sizing:border-box;height:100%;width:100%;content:"";opacity:0.9;border:1.875rem solid white}.translucent-container--rounded,.translucent-container--rounded:after{border-radius:50%}.edit-step__transparent-container{position:absolute;box-sizing:border-box;overflow-x:visible;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-1);background-color:var(--calcite-color-foreground-3);outline:2px solid transparent;outline-offset:2px;margin-right:-50%;top:50%;left:50%;transform:translate(-50%, -50%)}.edit-step__preview-image{position:absolute;left:0px;top:0px;margin:0px;transform-origin:50% 50%}.edit-step__preview-image--loading{visibility:hidden}.edit-step__transparent-container:focus .edit-step__preview-image{box-shadow:0px 0px 6px 4px var(--calcite-color-brand)}.edit-step__zoom-control{--calcite-label-margin-bottom:0}.edit-step__zoom-control--hidden{visibility:hidden}.edit-step__zoom-control-label{display:flex;height:2rem}.edit-step__zoom-control-label-spacer{flex:1 1 0%}';const h=class{constructor(e){(0,a.r)(this,e),this.arcgisImageUploadFileStepFileChange=(0,a.c)(this,"arcgisImageUploadFileStepFileChange",7),this.arcgisImageUploadFileStepInvalidFile=(0,a.c)(this,"arcgisImageUploadFileStepInvalidFile",7),this.arcgisImageUploadSizeExceeded=(0,a.c)(this,"arcgisImageUploadSizeExceeded",7),this.handleDragOver=e=>{e.preventDefault()},this.handleDrop=e=>{e.preventDefault(),this.processFile(e.dataTransfer.files[0])},this.handleFileInputChange=e=>{this.processFile(e.target.files[0])},this.strings=void 0,this.sizeDescription=void 0}async resetFileInput(){this.fileInput.value=""}processFile(e){if(e&&e){if(!this.isValidFile(e))return void this.arcgisImageUploadFileStepInvalidFile.emit();const t=10485760;if(e.size>t)return void this.arcgisImageUploadSizeExceeded.emit();const i=new FileReader;i.onload=async t=>{this.arcgisImageUploadFileStepFileChange.emit({dataURL:t.target.result,fileName:e.name||""})},i.readAsDataURL(e)}}isValidFile(e){return(null==e?void 0:e.name)&&/\.(gif|jpg|jpeg|png)$/i.test(e.name)}render(){return(0,a.h)("div",{key:"5265ff102ee7c45acdc20efd9bc8f5a1c0ced808",class:"file-step","aria-label":this.strings.dragDrop,onDragOver:this.handleDragOver,onDragEnter:this.handleDragOver,onDrop:this.handleDrop},(0,a.h)("div",{key:"c2f3fc2751a99b0a2ab4d8ea660b414d04ccb237",class:"file-step__upload-icon"},(0,a.h)("calcite-icon",{key:"2e2795b46aadf020ff4a07f65435829874eb6e27",icon:"upload"})),(0,a.h)("div",{key:"75fb2fb60171ab959c9a864047fb009352e790b3"},(0,a.h)("div",{key:"d7c09074f4dbe3eaf4b2b7ff5a7685a3dadd9a5d",class:"file-step__drag-text","aria-label":this.strings.dragDrop},this.strings.dragDrop),this.sizeDescription&&(0,a.h)("div",{key:"4d5299c719c93a9f49064cb5afdc2a919238b9a8","aria-label":this.sizeDescription},this.sizeDescription),(0,a.h)("calcite-button",{key:"71fe4d915b495ba3f189813e47d3ff366d1f2c91",class:"file-step__browse-button",appearance:"transparent",iconStart:"image",scale:"l",onClick:()=>{this.fileInput.click()}},this.strings.browse),(0,a.h)("input",{key:"c29a514ce4b891f9df7e58cbee3e5594d5d48f78",ref:e=>{this.fileInput=e},onChange:this.handleFileInputChange,class:"file-step__file-input",type:"file",accept:".jpg,.gif,.png,.jpeg"})))}get el(){return(0,a.a)(this)}};h.style=".file-step{text-align:center}.file-step__upload-icon{margin-bottom:0.5rem;margin-top:0.25rem;color:var(--calcite-color-text-3)}.file-step__upload-icon calcite-icon{width:4rem;height:4rem}.file-step__drag-text{margin-bottom:0.25rem;font-size:1.25rem}.file-step__browse-button{margin-top:1rem}.file-step__file-input{display:none}"},93814:(e,t,i)=>{i.d(t,{c:()=>a,e:()=>s});var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{},s={exports:{}};(function(e){var t={Promise:"undefined"!=typeof window?window.Promise:void 0},i="4.24",a="next";function s(e){if(e.toLowerCase()===a)return a;var t=e&&e.match(/^(\d)\.(\d+)/);return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}function o(e){return void 0===e&&(e=i),"https://js.arcgis.com/".concat(e,"/")}function r(e){void 0===e&&(e=i);var t=o(e),r=s(e);if(r!==a&&3===r.major){var n=r.minor<=10?"js/":"";return"".concat(t).concat(n,"esri/css/esri.css")}return"".concat(t,"esri/themes/light/main.css")}function n(e){var t=document.createElement("link");return t.rel="stylesheet",t.href=e,t}function l(e,t){if(t){var i=document.querySelector(t);i.parentNode.insertBefore(e,i)}else document.head.appendChild(e)}function h(e){return document.querySelector('link[href*="'.concat(e,'"]'))}function c(e){return!e||s(e)?r(e):e}function d(e,t){var i=c(e),a=h(i);return a||l(a=n(i),t),a}var g={};function p(e){var t=document.createElement("script");return t.type="text/javascript",t.src=e,t.setAttribute("data-esri-loader","loading"),t}function m(e,t,i){var a;i&&(a=f(e,i));var s=function(){t(e),e.removeEventListener("load",s,!1),a&&e.removeEventListener("error",a,!1)};e.addEventListener("load",s,!1)}function f(e,t){var i=function(a){t(a.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",i,!1)};return e.addEventListener("error",i,!1),i}function u(e){void 0===e&&(e={}),g=e}function b(){return document.querySelector("script[data-esri-loader]")}function v(){var e=window.require;return e&&e.on}function w(e){void 0===e&&(e={});var i={};[g,e].forEach(function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(i[t]=e[t])});var a=i.version,s=i.url||o(a);return new t.Promise(function(e,t){var o=b();if(o){var r=o.getAttribute("src");r!==s?t(new Error("The ArcGIS API for JavaScript is already loaded (".concat(r,")."))):v()?e(o):m(o,e,t)}else if(v())t(new Error("The ArcGIS API for JavaScript is already loaded."));else{var n=i.css;n&&d(!0===n?a:n,i.insertCssBefore),m(o=p(s),function(){o.setAttribute("data-esri-loader","loaded"),e(o)},t),document.body.appendChild(o)}})}function _(e){return new t.Promise(function(t,i){var a=window.require.on("error",i);window.require(e,function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];a.remove(),t(e)})})}function y(e,t){if(void 0===t&&(t={}),v())return _(e);var i=b(),a=i&&i.getAttribute("src");return!t.url&&a&&(t.url=a),w(t).then(function(){return _(e)})}e.utils=t,e.loadModules=y,e.getScript=b,e.isLoaded=v,e.loadScript=w,e.setDefaultOptions=u,e.loadCss=d,Object.defineProperty(e,"__esModule",{value:!0})})(s.exports)},94984:(e,t,i)=>{i.d(t,{C:()=>n,a:()=>d,b:()=>c,f:()=>l,g:()=>r,l:()=>o,s:()=>p});var a=i(15332),s=i(931);const o=new Map([["ar","ar"],["bg","bg"],["bs","bs"],["ca","ca"],["cs","cs"],["da","da"],["de","de"],["el","el"],["en","en"],["es","es"],["et","et"],["fi","fi"],["fr","fr"],["he","he"],["hr","hr"],["hu","hu"],["id","id"],["it","it"],["ja","ja"],["ko","ko"],["lt","lt"],["lv","lv"],["nb","no"],["no","no"],["nl","nl"],["pl","pl"],["pt-br","pt-BR"],["pt-pt","pt-PT"],["ro","ro"],["ru","ru"],["sk","sk"],["sl","sl"],["sr","sr"],["sv","sv"],["th","th"],["tr","tr"],["uk","uk"],["vi","vi"],["zh-cn","zh-CN"],["zh-hk","zh-HK"],["zh-tw","zh-TW"]]);function r(e){return function(e,t,i){const s=(0,a.c)(e,`[${t}]`);return s?s.getAttribute(t):i}(e,"dir","ltr")}const n={rtl:"arcgis--rtl"};async function l(e,t){const{api:i,type:a,places:o}=t||{};if(3===i){const[i]=await(0,s.l)(["dojo/number"]);return i.format(e,{type:a,places:o,pattern:null==t?void 0:t.pattern})}const[r]=await(0,s.l)(["esri/intl"]),n=r.convertNumberFormatToIntlOptions({places:o,style:a,digitSeparator:!0});return r.formatNumber(e,Object.assign(Object.assign({},n),{style:a}))}const h={};function c(e,t){let i=document.documentElement.lang;const a="bs"===i;if(a&&(i="hr"),t){const t=`${i}-full`,a={dateStyle:"full",timeStyle:"long"};return h[t]||(h[t]=new Intl.DateTimeFormat(i,a)),h[t].format(e)}const s={year:"numeric",month:a?"numeric":"short",day:"numeric"};return h[i]||(h[i]=new Intl.DateTimeFormat(i,s)),h[i].format(e)}function d(e,t,i,a){const s=null!=e?e:"en";let o=t.unknown;return(1===i||["id","ja","ko","th","vi","zh-cn","zh-hk","zh-tw"].includes(s))&&(o=t.single),1!==i&&["en","ca","da","de","el","es","et","fi","hi","hu","it","nb","nl","pt-pt","sv","tr"].includes(s)&&(o=t.multiple),p(o,Object.assign(Object.assign({},a),{number:i}))}const g=/\$\{([^}]+)\}/g;function p(e,t,i=g){let a=e;try{a=e.replace(i,(e,i)=>function(e,t){const i=e.split(".").reduce((e,t)=>e[t],t);return"string"==typeof i||"number"==typeof i?i:e}(i,t).toString())}catch(e){console.error(e)}return a}}}]);