/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-new-ite-54871b.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-new-ite-54871b"],{3826:(e,t,a)=>{a.d(t,{a:()=>r,b:()=>n,c:()=>c,d:()=>s});const s=(0,a(37762).c)({typeKeywords:[],customParameters:[],analyzedLocationTypes:[],allowStoredAuth:!0,isSecured:null,checkAuth:!1}),r=s.state,n=s.state,c=s.state},18597:(e,t,a)=>{a.r(t),a.d(t,{arcgis_new_item_pages_feature_layer_summary:()=>o});var s=a(87849),r=a(3826),n=a(95878),c=a(33547);a(37762),a(59317);const o=class{constructor(e){(0,s.r)(this,e),this.newItemUpdatePage=(0,s.c)(this,"newItemUpdatePage",7),this.featureLayerInfos=[],this.selectAll=()=>{const e={};this.featureLayerInfos.forEach(t=>{e[t.name]=!0}),this.selectedLayerInfoNames=e},this.deselectAll=()=>{this.selectedLayerInfoNames={}},this.selectOrDeselectLayer=(e,t)=>{t?this.selectedLayerInfoNames[e]=!0:delete this.selectedLayerInfoNames[e],this.selectedLayerInfoNames=Object.assign({},this.selectedLayerInfoNames)},this.selectedLayerInfoNames={},this.alertInfo=void 0}handleNext(){const{selectedLayerInfoNames:e,featureLayerInfos:t}=this;if(!Object.keys(e).some(t=>!0===e[t]))return(0,c.f)("No layer chosen"),void this.setAlertMessage("noLayer");r.a.selectedServiceInfoLayersNames=Object.assign({},e);const a=t.some(t=>"Table"!==t.type&&e[t.name]);this.newItemUpdatePage.emit(a?"featureLayerPreference":"itemProperties")}async componentWillLoad(){const{serviceInfo:e,selectedServiceInfoLayersNames:t,addFeatureLayerType:a}=r.a,{i18n:s}=n.u;this.addCreateI18n=s,this.i18n=s.featureLayerSummary,this.creationType="custom"!==a?a:"generic",this.layerName=(null==e?void 0:e.name)||r.a.sourceTitle;const c=e;this.featureLayerInfos=[...c.layers,...c.tables].sort((e,t)=>e.id-t.id);let o={};t?o=Object.assign({},t):this.featureLayerInfos.forEach(e=>{o[e.name]=!0}),this.selectedLayerInfoNames=o}setAlertMessage(e){this.alertInfo=this.i18n.error[e]}render(){const{i18n:e,addCreateI18n:t,selectedLayerInfoNames:a,featureLayerInfos:r,alertInfo:n,creationType:o,layerName:l,selectAll:i,deselectAll:d,selectOrDeselectLayer:y}=this,f=r.length>1,u=t.featureLayer,m=Object.keys(a).length<=0;return(0,s.h)(s.H,{key:"3d2a3ad3440ee5af82a4ad0a87c26afcc2f5fdf2"},(0,s.h)("arcgis-new-item-description",{key:"84c8ca9562895ca550bffc453270628e966b7260",class:"layer-description",header:u.creationType[o],content:l,leadingIconInfo:{icon:"featureLayer",scale:"s"}}),(0,s.h)("arcgis-new-item-description",{key:"5416fb3df6454d940bf20a16a080d7f8c9d61033",header:e.layerDetails,content:f?e.deselectAnyLayers:"",class:"details"}),f&&(0,s.h)("calcite-button",{key:"37ca5c0140dee8ab40c087dab785630b03b3b13e",kind:"neutral",class:"deselect-button",onClick:m?i:d},m?e.selectAll:e.deselectAll),(0,s.h)("div",{key:"732f4b6783c6289af63b833a7601eaaf13cfa86c",class:"info-container"},null==r?void 0:r.map((e,r)=>(0,s.h)("arcgis-new-item-layer-summary-item",{key:r,layerInfo:e,translatedLayerType:u.type,translatedFieldType:t.fieldType,selected:a[e.name],hideSelect:!f,onLayerSelectionChange:t=>{y(e.name,t.detail)},onExpand:e=>{const{expanded:t}=e.detail;t&&(0,c.i)("layer")}}))),(0,s.h)("arcgis-new-item-alert",{key:"e5360b7eae5ddb43ba2bc2e4bda76c2f80fcd999",heading:null==n?void 0:n.title,description:null==n?void 0:n.description,active:!!n,onAlertDismiss:()=>this.alertInfo=null}))}get el(){return(0,s.a)(this)}};o.style=".info-container{padding-bottom:1.5rem}.layer-description{display:block;margin-bottom:1.5rem}.details{display:block;padding-bottom:0.5rem}.deselect-button{margin-top:1.5rem;margin-bottom:1rem}arcgis-new-item-layer-summary-item+arcgis-new-item-layer-summary-item{border-top:none}"},33547:(e,t,a)=>{a.d(t,{a:()=>f,b:()=>d,c:()=>y,e:()=>l,f:()=>u,i:()=>i});var s=a(59317),r=a(3826);const n="create feature layer",c="my content",o=e=>{switch(e){case"build":return"blank";case"existing":return"fs";case"template":return"template";case"link":return"url"}},l=e=>{const t=s.c.telemetry;null==t||t.stepWorkflow(n,"enable "+("captureGPS"===e?"gps":"enableZDefaults"===e?"z":"m"),{category:n,attribute:o(r.a.addFeatureLayerType),pageName:c})},i=e=>{const t=s.c.telemetry;null==t||t.stepWorkflow(n,`expand ${e} details`,{category:n,attribute:o(r.a.addFeatureLayerType),pageName:c})},d=()=>{const e=s.c.telemetry;null==e||e.stepWorkflow(n,"filter",{category:n,attribute:o(r.a.addFeatureLayerType),pageName:c})},y=e=>{const t=o(e),a=s.c.telemetry;null==a||a.stepWorkflow(n,"from option",{category:n,attribute:t,pageName:c})},f=()=>{const{addFeatureLayerType:e,serviceInfo:t}=r.a,a=t,l=s.c.telemetry;null==l||l.endWorkflow(n,{category:n,attribute:o(e),pageName:c,count:a.layers.length,number:a.tables.length})},u=e=>{var t;null===(t=s.c.telemetry)||void 0===t||t.logError({category:n,error:e})}},37762:(e,t,a)=>{a.d(t,{c:()=>l});var s=a(87849);const r=e=>!("isConnected"in e)||e.isConnected,n=((e,t)=>{let a;return(...s)=>{a&&clearTimeout(a),a=setTimeout(()=>{a=0,e(...s)},t)}})(e=>{for(let t of e.keys())e.set(t,e.get(t).filter(r))},2e3),c=e=>"function"==typeof e?e():e,o=(e,t)=>{const a=e.indexOf(t);a>=0&&(e[a]=e[e.length-1],e.length--)},l=(e,t)=>{const a=((e,t=(e,t)=>e!==t)=>{const a=c(e);let s=new Map(Object.entries(null!=a?a:{}));const r={dispose:[],get:[],set:[],reset:[]},n=()=>{var t;s=new Map(Object.entries(null!==(t=c(e))&&void 0!==t?t:{})),r.reset.forEach(e=>e())},l=e=>(r.get.forEach(t=>t(e)),s.get(e)),i=(e,a)=>{const n=s.get(e);t(a,n,e)&&(s.set(e,a),r.set.forEach(t=>t(e,a,n)))},d="undefined"==typeof Proxy?{}:new Proxy(a,{get:(e,t)=>l(t),ownKeys:e=>Array.from(s.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(e,t)=>s.has(t),set:(e,t,a)=>(i(t,a),!0)}),y=(e,t)=>(r[e].push(t),()=>{o(r[e],t)});return{state:d,get:l,set:i,on:y,onChange:(t,a)=>{const s=y("set",(e,s)=>{e===t&&a(s)}),r=y("reset",()=>a(c(e)[t]));return()=>{s(),r()}},use:(...e)=>{const t=e.reduce((e,t)=>(t.set&&e.push(y("set",t.set)),t.get&&e.push(y("get",t.get)),t.reset&&e.push(y("reset",t.reset)),t.dispose&&e.push(y("dispose",t.dispose)),e),[]);return()=>t.forEach(e=>e())},dispose:()=>{r.dispose.forEach(e=>e()),n()},reset:n,forceUpdate:e=>{const t=s.get(e);r.set.forEach(a=>a(e,t,t))}}})(e,t);return a.use((()=>{if("function"!=typeof s.g)return{};const e=new Map;return{dispose:()=>e.clear(),get:t=>{const a=(0,s.g)();a&&((e,t,a)=>{const s=e.get(t);s?s.includes(a)||s.push(a):e.set(t,[a])})(e,t,a)},set:t=>{const a=e.get(t);a&&e.set(t,a.filter(s.f)),n(e)},reset:()=>{e.forEach(e=>e.forEach(s.f)),n(e)}}})()),a}},59317:(e,t,a)=>{a.d(t,{c:()=>r,o:()=>n});const s=(0,a(37762).c)({portal:null,user:null,api:4,scale:"m"}),r=s.state,n=s.onChange},95878:(e,t,a)=>{a.d(t,{a:()=>s,u:()=>r});const s=(0,a(37762).c)({nextText:"next",cancelText:"cancel",workflow:"content",scale:"m",disableScroll:!1,onlyHosted:!1,featureFlags:{}}),r=s.state}}]);