/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-3cf53b.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-3cf53b"],{46357:(t,i,e)=>{e.r(i),e.d(i,{arcgis_item_classification_attribute_tooltip:()=>r,arcgis_item_classification_header_help_tooltip:()=>n,arcgis_item_classification_input_checkbox:()=>c,arcgis_item_classification_input_date:()=>h,arcgis_item_classification_input_grouped_multiple_selection:()=>d,arcgis_item_classification_input_multiple_selection:()=>u,arcgis_item_classification_input_single_selection:()=>f,arcgis_item_classification_input_textbox:()=>b,classification_favorite:()=>m,item_classification_content:()=>v,item_classification_info:()=>p,item_classification_notification:()=>g});var a=e(87849),s=e(6591),o=e(41473),l=e(59317);e(931),e(93814),e(83692),e(54251),e(37762);const r=class{constructor(t){(0,a.r)(this,t),this.attributeId=void 0,this.label=void 0,this.labelTooltip=void 0}render(){return(0,a.h)("div",{key:"d01d0bc98c592e1bf5f565e22f9824acc2f17027",class:`info-${this.attributeId} classification-attribute-tooltip`},this.label,!!this.labelTooltip&&(0,a.h)(a.F,{key:"bd8d69757be6d621c9072308f0761e38bdd16db3"},(0,a.h)("calcite-icon",{key:"6c6f7cd1e91f560a934ecf6fd0354c543208decf",class:"classification-info-tip",scale:"s",icon:"information",id:`tooltip-button-${this.attributeId}`,textLabel:this.labelTooltip}),(0,a.h)("calcite-tooltip",{key:"d1d7bd9ae17190104b999389dedce2bc3126fdd9",referenceElement:`tooltip-button-${this.attributeId}`,placement:"right"},(0,a.h)("span",{key:"3510c0f1bb2a4282326ef9a12e630073433b7461"},this.labelTooltip))))}};r.style=".classification-attribute-tooltip{display:flex;align-items:center;justify-content:space-between}";const n=class{constructor(t){(0,a.r)(this,t),this.renderTooltipLink=()=>this.helpUrl?(0,a.h)("calcite-link",{href:this.helpUrl,target:"_blank",id:"tooltip-button"},this.helpTooltip):this.helpTooltip,this.helpUrl=void 0,this.helpTooltip=void 0}render(){return(0,a.h)("arcgis-information",{key:"b095f3f14348defbef6ab388bff34cddf2394868",label:this.helpTooltip,paddedContent:!0,placement:"bottom-end",overlayPositioning:"fixed",class:"header-help-tooltip"},this.renderTooltipLink())}};n.style=".header-help-tooltip{margin:1rem}";const c=class{constructor(t){(0,a.r)(this,t),this.attributeValueChange=(0,a.c)(this,"attributeValueChange",7),this.invalid=!1,this.toggleAttribute=t=>{this.itemClassificationValue[this.attributeId]=t.currentTarget.checked,this.itemClassificationValueWithDefaults[this.attributeId]=t.currentTarget.checked,this.attributeValueChange.emit({classification:Object.assign({},this.itemClassificationValue),classificationWithDefaults:Object.assign({},this.itemClassificationValueWithDefaults),attributeId:this.attributeId})},this.i18n=void 0,this.inputData=void 0,this.isSaving=void 0}componentWillLoad(){this.loadAttributes()}loadAttributes(){var t,i,e;this.attributeValue=this.inputData.attributeValue,this.itemClassificationValue=this.inputData.itemClassificationValue,this.itemClassificationValueWithDefaults=this.inputData.itemClassificationValueWithDefaults,this.attributeId=this.inputData.attributeId,this.labelClass=this.attributeId,this.attributeLabel=null===(t=this.attributeValue)||void 0===t?void 0:t.label,this.attributeIsRequired=!!(null===(i=this.attributeValue)||void 0===i?void 0:i.isRequired),this.isChecked=!!(null===(e=this.itemClassificationValueWithDefaults)||void 0===e?void 0:e[this.attributeId]);const{invalid:a,errorMsg:o}=(0,s.t)(this.attributeId,this.inputData.classificationErrors);this.invalid=a,this.errorMsg=o}render(){return(0,a.h)("div",{key:"2bf32e235e35a65b9b314ff0796578d9da1bbdeb",class:"classification-checkbox"},(0,a.h)("calcite-label",{class:`trailer-0 flex-1 ${this.labelClass}`,key:this.attributeId,layout:"inline"},(0,a.h)("calcite-checkbox",{key:"153930a2edf27d86898e64877685b24453feb544",id:this.attributeId,name:this.attributeLabel,scale:"m",checked:this.isChecked,onCalciteCheckboxChange:this.toggleAttribute,disabled:this.isSaving,required:this.attributeIsRequired,status:this.invalid?"invalid":"idle"}),this.attributeLabel,this.invalid&&(0,a.h)("calcite-input-message",{key:"3f44d82a341bf70836e03a0a7b5ea554aa1e2cec",icon:"exclamation-mark-triangle",status:"invalid"},this.errorMsg)))}static get watchers(){return{inputData:["loadAttributes"]}}};c.style='.input-error-message{font-size:0.875rem;line-height:1.5;padding:0.375rem 0.375rem;color:rgba(0, 0, 0, 0.75);background-color:#f3ded7;border:1px solid #e4a793;position:relative;margin-top:0.5rem;margin-bottom:0.75rem}.input-error-message:before{content:"";position:absolute;left:11px;top:-16px;width:0;height:0;pointer-events:none;border:8px solid transparent;border-bottom-color:#e4a793}.input-error-message:after{content:"";position:absolute;left:11px;top:-15px;width:0;height:0;pointer-events:none;border:8px solid transparent;border-bottom-color:#f3ded7}';const h=class{constructor(t){(0,a.r)(this,t),this.attributeValueChange=(0,a.c)(this,"attributeValueChange",7),this.invalid=!1,this.onDateChange=t=>{const i=t.currentTarget.value;i?(this.itemClassificationValue[this.attributeId]=i,this.itemClassificationValueWithDefaults[this.attributeId]=i):(delete this.itemClassificationValue[this.attributeId],delete this.itemClassificationValueWithDefaults[this.attributeId]),this.attributeValueChange.emit({classification:Object.assign({},this.itemClassificationValue),classificationWithDefaults:Object.assign({},this.itemClassificationValueWithDefaults),attributeId:this.attributeId})},this.i18n=void 0,this.inputData=void 0,this.isSaving=void 0}componentWillLoad(){this.loadAttributes()}loadAttributes(){var t,i,e,a;this.attributeValue=this.inputData.attributeValue,this.itemClassificationValue=this.inputData.itemClassificationValue,this.itemClassificationValueWithDefaults=this.inputData.itemClassificationValueWithDefaults,this.attributeId=this.inputData.attributeId,this.labelClass=this.attributeId,this.attributeLabel=null===(t=this.attributeValue)||void 0===t?void 0:t.label,this.attributeIsRequired=!!(null===(i=this.attributeValue)||void 0===i?void 0:i.isRequired),this.currentInputValue=null!==(a=null===(e=this.itemClassificationValueWithDefaults)||void 0===e?void 0:e[this.attributeId])&&void 0!==a?a:(0,s.u)(s.i.itemClassificationSchema.attributes[this.attributeId]);const{invalid:o,errorMsg:l}=(0,s.t)(this.attributeId,this.inputData.classificationErrors);this.invalid=o,this.errorMsg=l}disconnectedCallback(){const{itemClassificationValue:t}=s.i;delete t[this.attributeId],s.i.itemClassificationValue=t}render(){return(0,a.h)("div",{key:"631cb517c4907b08342fe263532a24622836da33",class:"classification-date"},(0,a.h)("calcite-label",{class:`trailer-0 flex-1 ${this.labelClass}`,key:this.attributeId},this.attributeLabel,(0,a.h)("div",{key:"abd2f7a002e6a3aa60a5ead77ed5a0239c8d173e",class:this.labelClass},(0,a.h)("calcite-input-date-picker",{key:"7ccea1b7d70dbbfa6f4e002fd054d6477ca1a226",id:this.attributeId,name:this.attributeLabel,value:this.currentInputValue,onCalciteInputDatePickerChange:this.onDateChange,disabled:this.isSaving,status:this.invalid?"invalid":"idle",required:this.attributeIsRequired,overlayPositioning:"fixed"}),this.invalid&&(0,a.h)("calcite-input-message",{key:"bf5af818184457d034230fed943bbff2c8b7ae13",icon:"exclamation-mark-triangle",status:"invalid"},this.errorMsg))))}static get watchers(){return{inputData:["loadAttributes"]}}};h.style='.input-error-message{font-size:0.875rem;line-height:1.5;padding:0.375rem 0.375rem;color:rgba(0, 0, 0, 0.75);background-color:#f3ded7;border:1px solid #e4a793;position:relative;margin-top:0.5rem;margin-bottom:0.75rem}.input-error-message:before{content:"";position:absolute;left:11px;top:-16px;width:0;height:0;pointer-events:none;border:8px solid transparent;border-bottom-color:#e4a793}.input-error-message:after{content:"";position:absolute;left:11px;top:-15px;width:0;height:0;pointer-events:none;border:8px solid transparent;border-bottom-color:#f3ded7}';const d=class{constructor(t){(0,a.r)(this,t),this.attributeValueChange=(0,a.c)(this,"attributeValueChange",7),this.invalid=!1,this.renderCombobox=()=>{let t=[];for(const i in this.valueExpressionResult){const e=this.valueExpressionResult[i],s=(0,a.h)("calcite-combobox-item",{textLabel:i,value:i,key:i},e.map(({label:t,value:i})=>{var e;const s=!!(null===(e=this.selectedValues)||void 0===e?void 0:e.includes(i));return(0,a.h)("calcite-combobox-item",{key:t,textLabel:t,value:i,selected:s})}));t=[...t,structuredClone(s)]}return t},this.onAttributesChange=t=>{const i=t.currentTarget.selectedItems.length,e=t.currentTarget.value;0===i?(delete this.itemClassificationValue[this.attributeId],delete this.itemClassificationValueWithDefaults[this.attributeId]):1===i?(this.itemClassificationValue[this.attributeId]=[e],this.itemClassificationValueWithDefaults[this.attributeId]=[e]):i>1&&(this.itemClassificationValue[this.attributeId]=[...e],this.itemClassificationValueWithDefaults[this.attributeId]=[...e]),this.attributeValueChange.emit({classification:Object.assign({},this.itemClassificationValue),classificationWithDefaults:Object.assign({},this.itemClassificationValueWithDefaults),attributeId:this.attributeId})},this.i18n=void 0,this.inputData=void 0,this.isSaving=void 0}componentWillLoad(){this.loadAttributes()}loadAttributes(){var t,i,e;this.attributeValue=this.inputData.attributeValue,this.itemClassificationValue=this.inputData.itemClassificationValue,this.itemClassificationValueWithDefaults=this.inputData.itemClassificationValueWithDefaults,this.attributeId=this.inputData.attributeId,this.valueExpressionResult=this.inputData.valueExpressionResult,this.attributeIsRequired=!!(null===(t=this.attributeValue)||void 0===t?void 0:t.isRequired),this.attributeLabel=null===(i=this.attributeValue)||void 0===i?void 0:i.label,this.selectedValues=this.itemClassificationValueWithDefaults[this.attributeId],this.attributeDescription=null===(e=this.attributeValue)||void 0===e?void 0:e.description;const{invalid:a,errorMsg:o}=(0,s.t)(this.attributeId,this.inputData.classificationErrors);this.invalid=a,this.errorMsg=o}render(){var t;return(0,a.h)("div",{key:"c77b5b9368c583d22f9f6158a2e9e190065dd229",class:"classification-multiple-group-select"},(0,a.h)("calcite-label",{key:this.attributeId,id:`${this.attributeId}-label`},this.attributeLabel,(0,a.h)("calcite-combobox",{key:"af545315ccfd7e864325eea82430a7d0b1ef539c",id:this.attributeId,label:this.i18n.multipleSelectionLabel,selectionMode:"multiple",scale:"m",onCalciteComboboxChange:this.onAttributesChange,disabled:this.isSaving,required:this.attributeIsRequired,placeholder:null!==(t=this.attributeDescription)&&void 0!==t?t:this.i18n.selectOptions,overlayPositioning:"fixed",status:this.invalid?"invalid":"idle",validationIcon:this.invalid?"exclamation-mark-triangle":"",validationMessage:this.invalid?this.errorMsg:""},this.renderCombobox())))}static get watchers(){return{inputData:["loadAttributes"]}}};d.style='.input-error-message{font-size:0.875rem;line-height:1.5;padding:0.375rem 0.375rem;color:rgba(0, 0, 0, 0.75);background-color:#f3ded7;border:1px solid #e4a793;position:relative;margin-top:0.5rem;margin-bottom:0.75rem}.input-error-message:before{content:"";position:absolute;left:11px;top:-16px;width:0;height:0;pointer-events:none;border:8px solid transparent;border-bottom-color:#e4a793}.input-error-message:after{content:"";position:absolute;left:11px;top:-15px;width:0;height:0;pointer-events:none;border:8px solid transparent;border-bottom-color:#f3ded7}';const u=class{constructor(t){(0,a.r)(this,t),this.attributeValueChange=(0,a.c)(this,"attributeValueChange",7),this.invalid=!1,this.renderCombobox=()=>{var t;return Array.isArray(this.valueExpressionResult)?null===(t=this.valueExpressionResult)||void 0===t?void 0:t.map(({label:t,value:i})=>{var e;const s=!!(null===(e=this.selectedValues)||void 0===e?void 0:e.includes(i));return(0,a.h)("calcite-combobox-item",{id:t,selected:s,key:t,value:i,textLabel:t})}):[]},this.onAttributesChange=t=>{const i=t.currentTarget.selectedItems.length,e=t.currentTarget.value;0===i?(delete this.itemClassificationValue[this.attributeId],delete this.itemClassificationValueWithDefaults[this.attributeId]):1===i?(this.itemClassificationValue[this.attributeId]=[e],this.itemClassificationValueWithDefaults[this.attributeId]=[e]):i>1&&(this.itemClassificationValue[this.attributeId]=[...e],this.itemClassificationValueWithDefaults[this.attributeId]=[...e]),this.attributeValueChange.emit({classification:Object.assign({},this.itemClassificationValue),classificationWithDefaults:Object.assign({},this.itemClassificationValueWithDefaults),attributeId:this.attributeId})},this.i18n=void 0,this.inputData=void 0,this.isSaving=void 0}componentWillLoad(){this.loadAttributes()}loadAttributes(){var t,i,e,a,o,l,r;this.attributeValue=null===(t=this.inputData)||void 0===t?void 0:t.attributeValue,this.itemClassificationValue=this.inputData.itemClassificationValue,this.itemClassificationValueWithDefaults=this.inputData.itemClassificationValueWithDefaults,this.attributeId=null===(i=this.inputData)||void 0===i?void 0:i.attributeId,this.valueExpressionResult=null===(e=this.inputData)||void 0===e?void 0:e.valueExpressionResult,this.attributeIsRequired=!!(null===(a=this.attributeValue)||void 0===a?void 0:a.isRequired),this.attributeLabel=null===(o=this.attributeValue)||void 0===o?void 0:o.label,this.attributeDescription=null===(l=this.attributeValue)||void 0===l?void 0:l.description,this.selectedValues=null===(r=this.itemClassificationValueWithDefaults)||void 0===r?void 0:r[this.attributeId];const{invalid:n,errorMsg:c}=(0,s.t)(this.attributeId,this.inputData.classificationErrors);this.invalid=n,this.errorMsg=c}render(){var t;return(0,a.h)("div",{key:"51f581534109196ecba5bf84fd0fc3475472daae",class:"classification-multiple-select"},(0,a.h)("calcite-label",{key:this.attributeId,id:`${this.attributeId}-label`},this.attributeLabel,(0,a.h)("calcite-combobox",{key:"894719b6609b0e465a3d3c3a4783439f16986ce5",id:this.attributeId,label:this.i18n.multipleSelectionLabel,overlayPositioning:"fixed",selectionMode:"multiple",scale:"m",onCalciteComboboxChange:this.onAttributesChange,disabled:this.isSaving,required:this.attributeIsRequired,placeholder:null!==(t=this.attributeDescription)&&void 0!==t?t:this.i18n.selectOptions,status:this.invalid?"invalid":"idle",validationIcon:this.invalid?"exclamation-mark-triangle":"",validationMessage:this.invalid?this.errorMsg:""},this.renderCombobox())))}static get watchers(){return{inputData:["loadAttributes"]}}};u.style='.input-error-message{font-size:0.875rem;line-height:1.5;padding:0.375rem 0.375rem;color:rgba(0, 0, 0, 0.75);background-color:#f3ded7;border:1px solid #e4a793;position:relative;margin-top:0.5rem;margin-bottom:0.75rem}.input-error-message:before{content:"";position:absolute;left:11px;top:-16px;width:0;height:0;pointer-events:none;border:8px solid transparent;border-bottom-color:#e4a793}.input-error-message:after{content:"";position:absolute;left:11px;top:-15px;width:0;height:0;pointer-events:none;border:8px solid transparent;border-bottom-color:#f3ded7}';const f=class{constructor(t){(0,a.r)(this,t),this.attributeValueChange=(0,a.c)(this,"attributeValueChange",7),this.invalid=!1,this.renderCombobox=()=>{var t;return Array.isArray(this.valueExpressionResult)?null===(t=this.valueExpressionResult)||void 0===t?void 0:t.map(({label:t,value:i})=>{const e=this.selectedValues===i;return(0,a.h)("calcite-combobox-item",{id:t,selected:e,key:t,value:i,textLabel:t})}):[]},this.onAttributeChange=t=>{const i=t.currentTarget.value;i?(this.itemClassificationValue[this.attributeId]=i,this.itemClassificationValueWithDefaults[this.attributeId]=i):(delete this.itemClassificationValue[this.attributeId],delete this.itemClassificationValueWithDefaults[this.attributeId]),this.attributeValueChange.emit({classification:Object.assign({},this.itemClassificationValue),classificationWithDefaults:Object.assign({},this.itemClassificationValueWithDefaults),attributeId:this.attributeId})},this.i18n=void 0,this.inputData=void 0,this.isSaving=void 0}componentWillLoad(){this.loadAttributes()}loadAttributes(){var t,i;this.attributeValue=this.inputData.attributeValue,this.itemClassificationValue=this.inputData.itemClassificationValue,this.itemClassificationValueWithDefaults=this.inputData.itemClassificationValueWithDefaults,this.attributeId=this.inputData.attributeId,this.valueExpressionResult=this.inputData.valueExpressionResult,this.attributeIsRequired=!!(null===(t=this.attributeValue)||void 0===t?void 0:t.isRequired),this.attributeLabel=null===(i=this.attributeValue)||void 0===i?void 0:i.label,this.selectedValues=this.itemClassificationValueWithDefaults[this.attributeId];const{invalid:e,errorMsg:a}=(0,s.t)(this.attributeId,this.inputData.classificationErrors);this.invalid=e,this.errorMsg=a}render(){return(0,a.h)("div",{key:"dd2379b0a0a84dba34f9ffddd252517a4dbb7312",class:"classification-single-select"},(0,a.h)("calcite-label",{key:this.attributeId,id:`${this.attributeId}-label`},this.attributeLabel,(0,a.h)("calcite-combobox",{key:"a0ab874186bc86a89db56b42c593462ee1184b1b",id:this.attributeId,label:this.i18n.singleSelectionLabel,selectionMode:"single",scale:"m",onCalciteComboboxChange:this.onAttributeChange,disabled:this.isSaving,required:this.attributeIsRequired,placeholder:this.i18n.selectAnOption,overlayPositioning:"fixed",status:this.invalid?"invalid":"idle",validationIcon:this.invalid?"exclamation-mark-triangle":"",validationMessage:this.invalid?this.errorMsg:""},this.renderCombobox())))}static get watchers(){return{inputData:["loadAttributes"]}}};f.style='.input-error-message{font-size:0.875rem;line-height:1.5;padding:0.375rem 0.375rem;color:rgba(0, 0, 0, 0.75);background-color:#f3ded7;border:1px solid #e4a793;position:relative;margin-top:0.5rem;margin-bottom:0.75rem}.input-error-message:before{content:"";position:absolute;left:11px;top:-16px;width:0;height:0;pointer-events:none;border:8px solid transparent;border-bottom-color:#e4a793}.input-error-message:after{content:"";position:absolute;left:11px;top:-15px;width:0;height:0;pointer-events:none;border:8px solid transparent;border-bottom-color:#f3ded7}';const b=class{constructor(t){(0,a.r)(this,t),this.attributeValueChange=(0,a.c)(this,"attributeValueChange",7),this.invalid=!1,this.getAttributeType=t=>{const i=null==t?void 0:t.type;return"string"===i?"text":["integer","float"].includes(i)?"number":"date"===i?"date":"text"},this.onAttributeChange=t=>{const i=t.currentTarget.value;i?(this.itemClassificationValue[this.attributeId]=i,this.itemClassificationValueWithDefaults[this.attributeId]=i):(delete this.itemClassificationValue[this.attributeId],delete this.itemClassificationValueWithDefaults[this.attributeId]),this.attributeValueChange.emit({classification:Object.assign({},this.itemClassificationValue),classificationWithDefaults:Object.assign({},this.itemClassificationValueWithDefaults),attributeId:this.attributeId})},this.i18n=void 0,this.inputData=void 0,this.isSaving=void 0}componentWillLoad(){this.loadAttributes()}loadAttributes(){var t,i,e,a,o;this.attributeValue=this.inputData.attributeValue,this.itemClassificationValue=this.inputData.itemClassificationValue,this.itemClassificationValueWithDefaults=this.inputData.itemClassificationValueWithDefaults,this.attributeId=this.inputData.attributeId,this.labelTooltip=null===(t=this.attributeValue)||void 0===t?void 0:t.labelTooltip,this.labelClass=this.attributeId,this.attributeLabel=null===(i=this.attributeValue)||void 0===i?void 0:i.label,this.attributeDesc=null===(e=this.attributeValue)||void 0===e?void 0:e.description,this.attributeIsRequired=!!(null===(a=this.attributeValue)||void 0===a?void 0:a.isRequired),this.currentInputValue=null===(o=this.itemClassificationValueWithDefaults)||void 0===o?void 0:o[this.attributeId],this.attributeType=this.getAttributeType(this.attributeValue);const{invalid:l,errorMsg:r}=(0,s.t)(this.attributeId,this.inputData.classificationErrors);this.invalid=l,this.errorMsg=r}render(){return(0,a.h)("div",{key:"38a99fcf8c154da425d2e2679f55209e0f4d74ad",class:"classification-textbox"},(0,a.h)("calcite-label",{class:`trailer-0 flex-1 ${this.labelClass}`,key:this.attributeId,id:`${this.attributeId}-label`},(0,a.h)("arcgis-item-classification-attribute-tooltip",{key:"1fa07fec512657904c4e856b301f690dc2781010",attributeId:this.attributeId,label:this.attributeLabel,labelTooltip:this.labelTooltip}),(0,a.h)("div",{key:"b68e71100ae92fff5dde62de115f81add6038aca",class:this.labelClass},(0,a.h)("calcite-input",{key:"7aa41a11756f3f4670ce7f568d729437a3000ded",id:this.attributeId,name:this.attributeLabel,scale:"m",type:this.attributeType,value:this.currentInputValue,numberButtonType:"vertical",placeholder:this.attributeDesc,onCalciteInputInput:this.onAttributeChange,disabled:this.isSaving,status:this.invalid?"invalid":"idle",required:this.attributeIsRequired}),this.invalid&&(0,a.h)("calcite-input-message",{key:"f5273ab3e19e40120a89e643e4ae9e0d1f32f929",icon:"exclamation-mark-triangle",status:"invalid"},this.errorMsg))))}static get watchers(){return{inputData:["loadAttributes"]}}};b.style='.input-error-message{font-size:0.875rem;line-height:1.5;padding:0.375rem 0.375rem;color:rgba(0, 0, 0, 0.75);background-color:#f3ded7;border:1px solid #e4a793;position:relative;margin-top:0.5rem;margin-bottom:0.75rem}.input-error-message:before{content:"";position:absolute;left:11px;top:-16px;width:0;height:0;pointer-events:none;border:8px solid transparent;border-bottom-color:#e4a793}.input-error-message:after{content:"";position:absolute;left:11px;top:-15px;width:0;height:0;pointer-events:none;border:8px solid transparent;border-bottom-color:#f3ded7}';const m=class{constructor(t){(0,a.r)(this,t),this.selectedFavoriteClassificationChange=(0,a.c)(this,"selectedFavoriteClassificationChange",7),this.favoriteClassificationChange=(0,a.c)(this,"favoriteClassificationChange",7),this.selectFavoriteClassification=t=>{const i=t.target.value;if(i){this.hasUpdateError=!1;const t=this.favoriteClassifications.find(({name:t})=>t===i);this.selectedFavoriteClassificationChange.emit(t)}},this.uploadFavoriteClassificationValueHandle=async t=>{const{error:i}=await(0,s.w)(`${(0,o.g)(l.c.portal)}community/users/${l.c.user.username}/addResource`,this.favoriteClassifications);i?this.handleDisplayNotificationModal({alertIndicatorActive:!0,alertIndicatorType:"danger",alertIndicatorIcon:"exclamation-mark-triangle",alertIndicatorInfo:this.i18n.uploadClassificationFavoriteError}):this.handleDisplayNotificationModal({alertIndicatorActive:!0,alertIndicatorType:"success",alertIndicatorIcon:"check",alertIndicatorInfo:t})},this.retrieveFavoriteClassificationHandle=async()=>{const{result:t,error:i}=await(0,s.a)(`${(0,o.g)(l.c.portal)}community/users/${l.c.user.username}/resources/classification_favorites`);i?this.handleDisplayNotificationModal({alertIndicatorActive:!0,alertIndicatorType:"danger",alertIndicatorIcon:"exclamation-mark-triangle",alertIndicatorInfo:this.i18n.retrieveClassificationFavoriteError}):this.favoriteClassificationChange.emit(t.favorites)},this.openSaveNewFavoriteDialog=()=>{this.showSaveClassificationDialog=!0},this.closeSaveClassificationDialog=t=>{t.stopPropagation(),this.showSaveClassificationDialog=!1},this.changeFavoriteClassificationName=t=>{const i=t.target.value;this.newFavoriteClassificationName=i,this.hasDuplicatedClassificationError=this.favoriteClassifications.some(t=>t.name===i)},this.saveNewFavoriteClassification=async()=>{const t=this.newFavoriteClassificationName;if(this.favoriteClassifications.some(i=>i.name===t))return void(this.hasDuplicatedClassificationError=!0);if(!t)return;const i=await(0,s.l)(this.itemClassificationSchema,this.classificationValue),e={name:t,classification:i};this.favoriteClassifications=[...this.favoriteClassifications,e],await this.uploadFavoriteClassificationValueHandle(this.i18n.addClassificationFavoriteSuccessMessage),await this.retrieveFavoriteClassificationHandle(),this.showSaveClassificationDialog=!1},this.updateFavoriteClassification=async()=>{this.selectedFavoriteClassificationName?(await this.addFavoriteClassification(this.selectedFavoriteClassificationName),await this.retrieveFavoriteClassificationHandle()):this.hasUpdateError=!0},this.addFavoriteClassification=async t=>{const i=await(0,s.l)(this.itemClassificationSchema,this.classificationValue),e={name:t,classification:i},a=this.favoriteClassifications.findIndex(i=>i.name===t);a>=0?this.favoriteClassifications[a].classification=i:this.favoriteClassifications=[...this.favoriteClassifications,e],await this.uploadFavoriteClassificationValueHandle(this.i18n.updateClassificationFavoriteSuccessMessage)},this.openManageClassificationDialog=()=>{this.showManageClassificationDialog=!0},this.closeManageClassificationDialog=t=>{t.stopPropagation(),this.showManageClassificationDialog=!1},this.removeFavoriteClassification=async t=>{this.favoriteClassifications=this.favoriteClassifications.filter(i=>i.name!==t),0===this.favoriteClassifications.length&&(this.showManageClassificationDialog=!1),await this.uploadFavoriteClassificationValueHandle(this.i18n.removeClassificationFavoriteSuccessMessage),await this.retrieveFavoriteClassificationHandle()},this.handleDisplayNotificationModal=t=>{this.alertIndicator=t,this.isNotificationModalActive=!0},this.handleCloseNotificationModal=()=>this.isNotificationModalActive=!1,this.i18n=void 0,this.itemClassificationSchema=void 0,this.classificationValue=void 0,this.favoriteClassifications=void 0,this.currSelectionText="",this.selectedFavoriteClassificationName="",this.newFavoriteClassificationName=this.currSelectionText,this.showManageClassificationDialog=!1,this.showSaveClassificationDialog=!1,this.hasDuplicatedClassificationError=!1,this.hasUpdateError=!1,this.alertIndicator={alertIndicatorActive:!1,alertIndicatorType:"danger",alertIndicatorIcon:"exclamation-mark-triangle",alertIndicatorInfo:""},this.isNotificationModalActive=!1}currentSelectionTextChanged(){this.newFavoriteClassificationName=this.currSelectionText}render(){return(0,a.h)(a.F,{key:"3c11d40fd30c8dabf2328cbc497aed1af3f4452c"},this.favoriteClassifications.length>0?(0,a.h)(a.F,null,(0,a.h)("calcite-label",null,(0,a.h)("div",{class:"select-favorite-label"},this.i18n.applyClassificationFavoriteLabel,(0,a.h)("calcite-link",{onClick:this.openManageClassificationDialog},this.i18n.manageClassificationFavoriteBtn)),(0,a.h)("calcite-combobox",{label:"select-calcite-combobox",selectionMode:"single",placeholder:this.i18n.selectFavoritePlaceholder,placeholderIcon:"folder-star",onCalciteComboboxChange:this.selectFavoriteClassification,status:this.hasUpdateError?"invalid":"idle",validationIcon:this.hasUpdateError?"exclamation-mark-triangle":"",validationMessage:this.hasUpdateError?this.i18n.updateWarning:""},this.favoriteClassifications.map(({name:t})=>(0,a.h)("calcite-combobox-item",{key:t,selected:this.selectedFavoriteClassificationName===t,icon:"folder-star",value:t,textLabel:t})))),(0,a.h)("div",{class:"favorite-actions"},(0,a.h)("calcite-link",{iconStart:"refresh",onClick:this.updateFavoriteClassification},this.i18n.updateClassificationFavoriteBtn),(0,a.h)("calcite-link",{iconStart:"star",onClick:this.openSaveNewFavoriteDialog},this.i18n.saveNewClassificationBtn))):(0,a.h)("div",{class:"save-new-favorite-button"},(0,a.h)("calcite-link",{iconStart:"folder-star",onClick:this.openSaveNewFavoriteDialog},this.i18n.saveNewClassificationFavoriteBtn)),(0,a.h)("calcite-dialog",{key:"e0db770ffe4b1d1433cbdad323bd277752108459",class:"classification-favorite-dialog",overlayPositioning:"fixed",heading:this.i18n.manageClassificationFavoriteLabel,open:this.showManageClassificationDialog,modal:!0,placement:"center",scale:"m",outsideCloseDisabled:!0,onCalciteDialogClose:this.closeManageClassificationDialog},(0,a.h)("calcite-list",{key:"eb049809de6857784ffbc596175f1404718878df",class:"classification-favorite-list",label:"classification-favorite-dialog-content",selectionAppearance:"border",selectionMode:"single-persist"},this.favoriteClassifications.map(({name:t})=>(0,a.h)("calcite-list-item",{key:t,label:t,value:t,class:"classification-favorite-item"},(0,a.h)("div",{slot:"content-end"},(0,a.h)("calcite-icon",{icon:"trash",scale:"s",onClick:()=>this.removeFavoriteClassification(t)}))))),(0,a.h)("calcite-button",{key:"29c471207fbad2516ca75e53b62b9d7e3ffe2313",slot:"footer-end",scale:"l",onClick:()=>this.showManageClassificationDialog=!1},(0,a.h)("div",{key:"0037415f51933a0b8bf428472128efca25297d93"},this.i18n.favoriteClassificationBtnDone))),(0,a.h)("calcite-dialog",{key:"43c956dfbfd5cf4dc5f095a1db99744260522ad5",class:"classification-favorite-dialog",overlayPositioning:"fixed",heading:this.i18n.addFavoriteDialogHeading,open:this.showSaveClassificationDialog,modal:!0,placement:"center",scale:"m",outsideCloseDisabled:!0,onCalciteDialogClose:this.closeSaveClassificationDialog},(0,a.h)("calcite-label",{key:"4ce3b34be5f5c7109269720be15a11d97b75eefa",class:"classification-favorite-input-section"},this.i18n.addClassificationFavorite,(0,a.h)("calcite-input",{key:"b1a36a783a776799d06c6bf2c59bd9a77f76a038",id:"classification-favorite-name",name:"classification-favorite-name",scale:"m",value:this.newFavoriteClassificationName,onCalciteInputInput:this.changeFavoriteClassificationName,status:!this.newFavoriteClassificationName||this.hasDuplicatedClassificationError?"invalid":"idle",validationIcon:"exclamation-mark-triangle",validationMessage:this.newFavoriteClassificationName?this.hasDuplicatedClassificationError?this.i18n.duplicatedClassificationError:"":this.i18n.emptyFavoriteError})),(0,a.h)("calcite-button",{key:"9164aa6b8b781016a5f70f78047528ea8c0e7a37",scale:"l",slot:"footer-end",onClick:this.saveNewFavoriteClassification},this.i18n.favoriteClassificationBtnDone)),this.isNotificationModalActive&&(0,a.h)("item-classification-notification",{key:"7d3d7fba9030af29fa86b0f4f65026f4091d0835",i18n:this.i18n,alertIndicator:this.alertIndicator,onArcgisItemClassificationNotificationClose:()=>{this.handleCloseNotificationModal()}}))}static get watchers(){return{currSelectionText:["currentSelectionTextChanged"]}}};m.style='.classification-favorite-dialog{--calcite-dialog-content-space:0;--calcite-dialog-background-color:"var(--calcite-color-foreground-2)"}.select-favorite-label{display:flex;align-items:center;justify-content:space-between}.favorite-actions{display:flex;align-items:center;justify-content:flex-end;gap:1.5rem}.save-new-favorite-button{margin-top:0.25rem;margin-bottom:1rem;display:flex;justify-content:flex-end}.classification-favorite-item{display:flex;justify-content:space-between;border-bottom-width:1px;border-color:var(--calcite-color-border-1);padding-top:0.5rem;padding-bottom:0.5rem}.classification-favorite-list,.classification-favorite-input-section{margin:1.75rem;margin-left:1rem;margin-right:1rem}';const v=class{constructor(t){(0,a.r)(this,t),this.attributeCategoryChange=(0,a.c)(this,"attributeCategoryChange",7),this.arcgisItemClassificationContentDisplayNotification=(0,a.c)(this,"arcgisItemClassificationContentDisplayNotification",7),this.attributeElementsCopy={},this.getFormDisplayOrder=t=>s.i.itemClassificationSchema.layouts.default.layoutElements[t].formDisplayOrder,this.createUIElements=async(t,i,e)=>{var a;let o;const{itemClassificationSchema:l}=s.i;if(e){const e=(null===(a=l.attributes[t])||void 0===a?void 0:a.uiElement)||"text",r=structuredClone(this.itemClassificationValue),n=structuredClone(this.itemClassificationValueWithDefaults),{classificationErrors:c}=s.i;if(e.includes("-select"))try{const a=await(0,s.x)(t,l,n);"multi-select"===e?o=this.renderMultiSelectElement({attributeValue:i,attributeId:t,itemClassificationValue:r,itemClassificationValueWithDefaults:n,classificationErrors:c,valueExpressionResult:a}):["multi-grouped-select","multi-grouped-select-nested"].includes(e)?o=this.renderGroupedMultiSelectElement({attributeValue:i,attributeId:t,itemClassificationValue:r,itemClassificationValueWithDefaults:n,classificationErrors:c,valueExpressionResult:a}):"single-select"===e&&(o=this.renderSingleSelectElement({attributeValue:i,attributeId:t,itemClassificationValue:r,itemClassificationValueWithDefaults:n,classificationErrors:c,valueExpressionResult:a}))}catch(t){this.arcgisItemClassificationContentDisplayNotification.emit({alertIndicatorActive:!0,alertIndicatorType:"danger",alertIndicatorIcon:"exclamation-mark-triangle",alertIndicatorInfo:null==t?void 0:t.message})}else"checkbox"===e?o=this.renderCheckbox({attributeValue:i,attributeId:t,itemClassificationValue:r,itemClassificationValueWithDefaults:n,classificationErrors:c}):"text"===e?o=this.renderInputTextBox({attributeValue:i,attributeId:t,itemClassificationValue:r,itemClassificationValueWithDefaults:n,classificationErrors:c}):"date"===e&&(o=this.renderDatePickerElement({attributeValue:i,attributeId:t,itemClassificationValue:r,itemClassificationValueWithDefaults:n,classificationErrors:c}));this.attributeElementsCopy=Object.assign(Object.assign({},this.attributeElementsCopy),{[t]:o}),this.attributeElements=structuredClone(this.attributeElementsCopy)}},this.renderGroupedMultiSelectElement=t=>(0,a.h)("arcgis-item-classification-input-grouped-multiple-selection",{i18n:this.i18n,inputData:t,isSaving:this.isSaving}),this.renderSingleSelectElement=t=>(0,a.h)("arcgis-item-classification-input-single-selection",{i18n:this.i18n,inputData:t,isSaving:this.isSaving}),this.renderCheckbox=t=>(0,a.h)("arcgis-item-classification-input-checkbox",{i18n:this.i18n,inputData:t,isSaving:this.isSaving}),this.renderInputTextBox=t=>(0,a.h)("arcgis-item-classification-input-textbox",{i18n:this.i18n,inputData:t,isSaving:this.isSaving}),this.renderDatePickerElement=t=>(0,a.h)("arcgis-item-classification-input-date",{i18n:this.i18n,inputData:t,isSaving:this.isSaving}),this.handleCategorySelectChange=t=>{this.attributeCategoryChange.emit(t.currentTarget.selectedItems[0].value)},this.renderCategoryTabs=()=>(0,a.h)("calcite-list",{label:"attribute-category-select",selectionAppearance:"border",selectionMode:"single-persist",onCalciteListChange:this.handleCategorySelectChange},s.i.itemClassificationSchema.attributeCategories.map(t=>{const{requiredError:i,conflictsError:e}=s.i.classificationErrors,o=i.filter(i=>i.attributeCategory===t).length+e.filter(i=>i.attributeCategory===t).length;return(0,a.h)("calcite-list-item",{key:t,label:t,value:t,selected:this.attributeCategory===t,description:(0,s.y)(t,s.i.classificationErrors)?`${o} ${o>1?"errors":"error"}`:void 0},(0,s.y)(t,s.i.classificationErrors)&&(0,a.h)("div",{slot:"content-end",class:"danger"},(0,a.h)("calcite-icon",{icon:"exclamation-mark-triangle",scale:"s"})))})),this.renderValidationErrors=(t,i)=>{const{requiredError:e,conflictsError:s}=i;return(e.length||s.length)&&(!t||e.some(i=>t===i.attributeCategory)||s.some(i=>t===i.attributeCategory))?(0,a.h)("calcite-notice",{open:!0,icon:"exclamation-mark-triangle",class:"error-content",kind:"danger"},(0,a.h)("div",{slot:"message"},(0,a.h)("span",{class:"error-spacing"},this.i18n.consolidatedError))):null},this.renderCategoryContent=()=>{var t,i,e;return(0,a.h)(a.F,null,this.renderValidationErrors(this.attributeCategory,s.i.classificationErrors),null===(e=null===(t=this.classificationContentArr)||void 0===t?void 0:t[null!==(i=this.attributeCategory)&&void 0!==i?i:"Default"])||void 0===e?void 0:e.map(t=>(0,a.h)("div",{id:this.attributeCategory,key:this.attributeCategory,class:"Default"!==this.attributeCategory?"classification-input-element":""},t)))},this.i18n=void 0,this.primaryAttribute=void 0,this.currSelectionText=void 0,this.itemClassificationValue=void 0,this.itemClassificationValueWithDefaults=void 0,this.attributeCategory=void 0,this.hasError=void 0,this.isSaving=void 0,this.attributeElements=null,this.classificationContentArr=null}componentWillLoad(){this.createClassificationContent()}errorCheckingHandler(){this.createClassificationContent()}async createClassificationContent(){var t;const{itemClassificationSchema:i,selectedFavoriteClassificationName:e,favoriteClassifications:o}=s.i;this.attributeElementsCopy={favorite:(0,a.h)("classification-favorite",{i18n:this.i18n,itemClassificationSchema:i,classificationValue:this.itemClassificationValueWithDefaults,favoriteClassifications:o,currSelectionText:this.currSelectionText,selectedFavoriteClassificationName:e})};const l=Object.entries(i.attributes).sort(([t],[i])=>this.getFormDisplayOrder(t)-this.getFormDisplayOrder(i));for(let e in l){const a=l[e][0],o=l[e][1];if(null===(t=i.layouts.default.layoutElements)||void 0===t?void 0:t[a])try{const t=await(0,s.z)(a,i,this.itemClassificationValueWithDefaults);await this.createUIElements(a,o,t)}catch(t){this.arcgisItemClassificationContentDisplayNotification.emit({alertIndicatorActive:!0,alertIndicatorType:"danger",alertIndicatorIcon:"exclamation-mark-triangle",alertIndicatorInfo:null==t?void 0:t.message});break}}this.handleAttributeElementsChange()}handleAttributeElementsChange(){const t=t=>{var i,e,a;const s={};this.attributeCategory&&t.attributeCategories.forEach(t=>s[t]=[]),s.Default=[];const o=null!==(e=null===(i=t.attributeCategories)||void 0===i?void 0:i[0])&&void 0!==e?e:"Default";null===(a=s[o])||void 0===a||a.push(this.attributeElements.favorite);const l=Object.entries(null==t?void 0:t.attributes).sort(([t],[i])=>this.getFormDisplayOrder(t)-this.getFormDisplayOrder(i));null==l||l.forEach(([i,e])=>{var a,o,l,r,n,c;const h=this.attributeElements[i];if(h){const d=i===this.primaryAttribute?null!==(o=null===(a=t.attributeCategories)||void 0===a?void 0:a[0])&&void 0!==o?o:"Default":null!==(n=null!==(l=null==e?void 0:e.attributeCategory)&&void 0!==l?l:null===(r=t.attributeCategories)||void 0===r?void 0:r[0])&&void 0!==n?n:"Default";null===(c=s[d])||void 0===c||c.push(h)}}),this.classificationContentArr=structuredClone(s)};this.attributeElements&&t(s.i.itemClassificationSchema)}renderMultiSelectElement(t){return(0,a.h)("arcgis-item-classification-input-multiple-selection",{i18n:this.i18n,inputData:t,isSaving:this.isSaving})}render(){var t;return(0,a.h)("div",{key:"ded18bf5daf1d9df790f6aa847b107665b8ba7b3",class:"item-classification-content"},(0,a.h)("div",{key:"13e383d9df584972f54f6cec586568b8786ddcbf",class:"item-classification-form-section"},!!this.attributeCategory&&!(null===(t=this.classificationContentArr)||void 0===t?void 0:t.Default.length)&&(0,a.h)("div",{key:"ea8b33a536b50bdd6c3c4f504df5f3e57ec49465",class:"form-section__sidebar"},this.renderCategoryTabs()),(0,a.h)("div",{key:"8769b271f2fe659998528fce7a99a951fadcbb0f",class:"form-section__main-content"},this.renderCategoryContent())))}static get watchers(){return{hasError:["errorCheckingHandler"],itemClassificationValueWithDefaults:["createClassificationContent"],currSelectionText:["createClassificationContent"]}}};v.style=".classification-input-element{margin:0.25rem}.attribute-error-icon{--calcite-ui-icon-color:var(--calcite-color-status-danger)}.item-classification-form-section{display:flex;border-top:var(--calcite-border-width-sm) solid var(--calcite-color-border-1);padding:var(--calcite-spacing-sm);flex-direction:row}.form-section__sidebar{flex:1;padding:var(--calcite-spacing-sm)}.form-section__main-content{flex:3;padding:var(--calcite-spacing-sm);max-height:50vh;overflow-y:auto}.error-content{margin-bottom:1rem}.danger{color:var(--calcite-color-status-danger)}.error-spacing{margin-block-start:unset;margin-block-end:unset}";const p=class{constructor(t){(0,a.r)(this,t),this.i18n=void 0,this.primaryAttribute=void 0,this.currSelectionText=void 0}getClassificationBgmColor(t){const{itemClassificationValue:i,itemClassificationSchema:e}=s.i,a="UNCLASSIFIED"===(null==i?void 0:i[this.primaryAttribute])?null==e?void 0:e.classificationMetadata.defaultValue:null==i?void 0:i[this.primaryAttribute],o=null==e?void 0:e.classificationMetadata.classificationValueProperties.find(({value:t})=>t==a);return null==o?void 0:o[t]}render(){return(0,a.h)("div",{key:"50f796bd2a02f8e3768a155f9af62bc8191553a7",class:"item-classification-info"},(0,a.h)("div",{key:"aba17c99de3b15f2f05eef28035da1fb9efd0645",id:"classification-info-label"},this.i18n.documentBannerPreview),(0,a.h)("div",{key:"5892d14a4dd97ee22e5a1903846055fb2fe1f7d9",id:"classification-info","aria-label":this.i18n.documentBannerPreview,style:{backgroundColor:this.getClassificationBgmColor("backgroundColor"),color:this.getClassificationBgmColor("textColor")}},this.currSelectionText))}};p.style="#classification-info{box-sizing:border-box;width:100%;left:0;text-align:center;font-family:var(--calcite-font-family);padding:var(--calcite-spacing-sm);font-size:var(--calcite-font-size);text-transform:uppercase;margin-bottom:1rem;overflow-wrap:break-word}";const g=class{constructor(t){(0,a.r)(this,t),this.arcgisItemClassificationNotificationClose=(0,a.c)(this,"arcgisItemClassificationNotificationClose",7),this.closeModal=()=>{this.arcgisItemClassificationNotificationClose.emit(!1)},this.i18n=void 0,this.alertIndicator=void 0}render(){return(0,a.h)("calcite-alert",{key:"47c4bf02c54c3c075e1399596d58e3cd8e410e36",class:"classification-notification-handler",icon:this.alertIndicator.alertIndicatorIcon,label:this.i18n.classificationNotificationHandler,scale:"m",autoClose:!0,autoCloseDuration:"medium",open:this.alertIndicator.alertIndicatorActive,kind:this.alertIndicator.alertIndicatorType,"aria-hidden":!this.alertIndicator.alertIndicatorActive,onCalciteAlertClose:this.closeModal},(0,a.h)("div",{key:"e9757bd229628202c2f5c3c5d9c623f4253aefb8",slot:"message"},this.alertIndicator.alertIndicatorInfo))}};g.style=".classification-notification-handler{position:absolute;z-index:9000}"}}]);