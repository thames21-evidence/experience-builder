/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_com-ae1e7f.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_com-ae1e7f"],{65595:(e,i,o)=>{o.d(i,{c:()=>l,u:()=>a});var t=o(20936),s=o(1225),n=(o(54312),o(44345),o(55448),o(52797),o(34031),o(63438),o(5933),o(28927),o(83368),o(89704),o(5294),o(18423),o(96086),o(91813),o(21255),o(13078),o(21303),o(12627),o(56451),o(31521),o(23054),o(5077),o(23795),o(17902),o(87420),o(30161),o(81734),o(75698),o(10628),o(59640),o(64451),o(6176),o(83552));o(77462),o(49403),o(10281),o(83930),o(66617),o(10454),o(29614),o(94916),o(52554),o(2156),o(4038),o(49851),o(75054),o(15223),o(70169),o(47207),o(70852),o(48103),o(39423),o(85681),o(18444),o(42411),o(9767),o(38218),o(91914),o(86605),o(68196),o(440),o(46547),o(6238),o(7299);function l(e){e.selectedFields=[],e.layerFields=void 0,e.fields=void 0,e.hideLayerTitle=!1,e.supportsArcade=!1,e.stringFieldsCount=-1,e.dateFieldsCount=-1,e.numberFieldsCount=-1,e.containsFlow=!0,e.oneFeatureResponseStatus=s.s.MISSING,e.selectedAttribute=void 0,e.selectedAttributeText=void 0,e.selectedTypeValue=void 0,e.selectedValue=void 0,e.lastDefault=void 0,e.lastDefaults=void 0,e.dotColorSelected=void 0,e.backgroundStyleSelected=void 0,e.lastSettings=void 0,e.classedSymbolSelectedIdx=void 0,e.allUniqueValues=void 0,e.useFeatureReduction=void 0,e.symbolStylerConfig={},e.allowTimeSeriesConfiguration=!1,e.rasterInfo=void 0}function a(){const e=(0,n.Gk)(),i=e;e.manager.onLoad(()=>{i.smartMappingState=function(e,i){const o=c.get(e);if(o)return o;const s=(0,t.el)(e,i);return s&&"store"in s?(c.set(e,s.store),s.store):null}(e.el,"arcgis-map-config-smart-mapping")})}const c=new WeakMap},75518:(e,i,o)=>{let t,s;function n(e){e.loading=!1}async function l(e,i){return function(e){e.loading=!0,s=!1,t&&clearTimeout(t),t=setTimeout(()=>{n(e),s=!0},6e4)}(i),await e.then(e=>{if(n(i),s)throw new Error("timeout");return e}).catch(e=>{throw n(i),e})}o.d(i,{r:()=>l})},78778:(e,i,o)=>{o.d(i,{a:()=>l,c:()=>a,u:()=>c});var t=o(85681),s=o(1225),n=(o(54312),o(44345),o(55448),o(52797),o(34031),o(63438),o(5933),o(89704),o(5294),o(66228));o(56451),o(31521),o(23054),o(5077),o(23795),o(17902),o(87420),o(30161),o(81734),o(83552),o(77462),o(49403),o(66617),o(10628),o(59640),o(64451),o(6176),o(10454),o(29614),o(94916),o(52554),o(2156),o(4038),o(49851),o(75054),o(15223),o(70169),o(47207),o(70852),o(48103),o(39423),o(18444),o(42411),o(9767),o(38218),o(91914),o(86605),o(68196),o(440),o(46547),o(28927),o(6238),o(7299);async function l(e,i){const{layer:o,useFeatureReduction:l,mapImageSublayer:a,mapView:c}=e,d=o,u=(0,s.d)(e);let r=i.relationshipScheme;if(!r&&["relationship","relationship-size"].includes(u)&&(r=(0,s.S)(e)),i=i||{},"relationship-size"===u){const o=(0,s.g)(e).clone(),t=o.authoringInfo,n=(0,s.p)(o,"spike");if(t&&i.fieldInfos?.length>1&&i.fieldInfos[0].field===t.field1.field&&i.fieldInfos[1].field===t.field2.field){if(o.visualVariables=(0,s.H)(o,"size"),o.authoringInfo.visualVariables=(0,s.P)(o,"size"),(0,s.o)(e)||n){const i=(0,s.e)(e),t=o.uniqueValueInfos.slice();t.forEach(e=>{const o=(0,s.i)(e.symbol);e.symbol=i.clone(),(0,s.y)(e.symbol,o)}),o.uniqueValueInfos=t}return{renderer:o}}}const f=(0,s.a)(e,(0,s.g)(e)),p={layer:d,view:c,field1:{field:i.fieldInfos[0].field},field2:{field:i.fieldInfos[1].field},classificationMethod:"quantile",numClasses:3,focus:"HH",relationshipScheme:r,outlineOptimizationEnabled:!a&&(!(0,n.i)(i.outlineOptimizationEnabled)||i.outlineOptimizationEnabled),sizeOptimizationEnabled:!a&&(!(0,n.i)(i.sizeOptimizationEnabled)||i.sizeOptimizationEnabled),legendOptions:i.legendOptions,defaultSymbolEnabled:!1,forBinning:l};return await t.createRenderer(p).then(e=>((0,s.b)(f,e.renderer),e))}async function a(e,i){const{layer:o,useFeatureReduction:l,mapImageSublayer:a,mapView:c}=e,d=o;i=i||{};const u=(0,s.g)(e),r=(0,s.d)(e),f=u.authoringInfo,p=(0,s.c)(u,"size");if(i.fieldInfos&&i.fieldInfos.length>1&&i.fieldInfos[0].field===f.field1.field&&i.normalizationField1===f.field1.normalizationField&&i.fieldInfos[1].field===f.field2.field&&i.normalizationField2===f.field2.normalizationField&&(delete i.fieldInfos,delete i.normalizationField1,delete i.normalizationField2,(0,s.O)(i)&&!p))return{renderer:u.clone()};let h=i.relationshipScheme;!h&&["relationship","relationship-size"].includes(r)&&(h=(0,s.S)(e));const m=(0,s.a)(e,u),g=i.fieldInfos?i.fieldInfos[0]:{field:f.field1.field,simpleFieldType:s.J.NUMBER},b=i.fieldInfos?i.fieldInfos[1]:{field:f.field2.field,simpleFieldType:s.J.NUMBER},F=void 0!==i.normalizationField1?i.normalizationField1:f.field1.normalizationField,v=void 0!==i.normalizationField2?i.normalizationField2:f.field2.normalizationField,w=u.uniqueValueInfos?.length?u.uniqueValueInfos[0].symbol:null,y=u.defaultSymbol,S=u.defaultLabel,I=i.numClasses?i.numClasses:f.numClasses,z={layer:d,view:c,field1:{field:g?g.field:u.field,normalizationField:F},field2:{field:b?b.field:u.field,normalizationField:v},classificationMethod:i.classificationMethod?i.classificationMethod:"manual"!==f.classificationMethod?f.classificationMethod:"quantile",numClasses:I,focus:i.focus?i.focus:f.focus,relationshipScheme:h,outlineOptimizationEnabled:!a&&((0,n.i)(i.outlineOptimizationEnabled)?i.outlineOptimizationEnabled:!!m.sizeOutlineVisVar),sizeOptimizationEnabled:!a&&((0,n.i)(i.sizeOptimizationEnabled)?i.sizeOptimizationEnabled:!!m.sizeAutoVisVar),legendOptions:i.legendOptions?i.legendOptions:u.legendOptions,defaultSymbolEnabled:(0,n.i)(i.defaultSymbolEnabled)?i.defaultSymbolEnabled:!!u.defaultSymbol,forBinning:l};return await t.createRenderer(z).then(i=>((0,s.b)(m,i.renderer),w&&i.renderer.uniqueValueInfos.forEach(e=>{const i=w.clone();(0,s.y)(i,(0,s.i)(e.symbol)),e.symbol=i}),(0,s.g)(e).uniqueValueInfos.forEach(e=>{const o=i.renderer.uniqueValueInfos.find(i=>e.value===i.value);o&&(o.label=e.label)}),y&&(i.renderer.defaultSymbol=y,i.renderer.defaultLabel=S),i))}async function c(e,i){i=i||{};const o=(0,s.g)(e),n=o.authoringInfo;return await t.updateRenderer({field1:n.field1,field2:n.field2,numClasses:i.numClasses?i.numClasses:n.numClasses,focus:i.focus?"none"===i.focus?null:i.focus:n.focus,colors:i.colors,renderer:o})}},88493:(e,i,o)=>{o.r(i),o.d(i,{ArcgisMapConfigSmartMappingRelationshipFocusButton:()=>f});var t=o(73679),s=o(4395),n=o(85643),l=(o(52797),o(54312),o(44345),o(55448),o(34031),o(63438),o(5933),o(28927),o(83368),o(75518)),a=(o(89704),o(5294),o(18423),o(96086),o(91813),o(21255),o(13078),o(21303),o(12627),o(56451),o(31521),o(23054),o(5077),o(23795),o(17902),o(87420),o(30161),o(81734),o(1225)),c=o(65595),d=(o(77462),o(49403),o(10281),o(83930),o(66617),o(10628),o(59640),o(64451),o(6176),o(10454),o(29614),o(94916),o(52554),o(2156),o(4038),o(49851),o(75054),o(15223),o(70169),o(47207),o(70852),o(48103),o(39423),o(78778)),u=(o(18444),o(42411),o(9767),o(38218),o(91914),o(86605),o(68196),o(440),o(46547),o(6238),o(7299),o(73801));const r=s.AH`.focus-button{display:flex;padding:6px;justify-content:space-between;align-items:center;border-radius:0;cursor:pointer;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-1);border-color:var(--calcite-color-foreground-3);border-width:2px;border-style:solid;box-shadow:transparent 0 0 0 1px inset}.focus-button:active{box-shadow:inset 0 0 0 1px var(--calcite-color-foreground-3)}.focus-button:focus{box-shadow:inset 0 0 0 1px var(--calcite-color-foreground-3);outline:2px solid var(--calcite-color-brand);outline-offset:2px}.focus-button.active{outline:1px solid var(--calcite-ui-focus-color, var(--calcite-color-brand))}.focus-content{justify-content:space-between;display:flex;align-items:center;width:100%}.focus-button-text{display:inline-block;padding:0 10px}.focus-button-title{font-weight:700}.focus-button-msg{font-size:80%;line-height:16px}.focus-margin{margin:12px 0}`;class f extends u.WF{constructor(){super(...arguments),this.open=!1,this.smartMappingState=(0,c.u)(),this.arcgisSmartMappingRelationshipFocusButtonBeforeOpen=(0,u.lh)(),this.arcgisSmartMappingRelationshipFocusButtonChange=(0,u.lh)(),this.arcgisSmartMappingRelationshipFocusButtonError=(0,u.lh)()}static{this.properties={selectedFocusInfo:16,flowItemNode:0}}static{this.styles=r}async setFocus(){this.buttonNode?.focus()}load(){const{_messages:e}=this.smartMappingState,i=(0,a.g)(this.smartMappingState);this.focusInfos=[{focus:"HH",title:e.relationshipFocusButton.focusHighHigh,msg:e.relationshipFocusButton.focusHighHighMsg,selected:!1,iconPath:null},{focus:"HL",title:e.relationshipFocusButton.focusHighLow,msg:e.relationshipFocusButton.focusHighLowMsg,selected:!1,iconPath:null},{focus:"LH",title:e.relationshipFocusButton.focusLowHigh,msg:e.relationshipFocusButton.focusLowHighMsg,selected:!1,iconPath:null},{focus:"LL",title:e.relationshipFocusButton.focusLowLow,msg:e.relationshipFocusButton.focusLowLowMsg,selected:!1,iconPath:null},{focus:"none",title:e.relationshipFocusButton.none,msg:e.relationshipFocusButton.focusNoneMsg,selected:!this.selectedFocusInfo,iconPath:null}],this.setSelectedFocus(i.authoringInfo.focus||"none")}divRefHandler(e){e&&(this.buttonNode=e)}closeDropdown(){this.open=!1,this.dropdownNode&&(this.dropdownNode.remove(),this.dropdownNode=void 0,this.buttonNode?.classList?.remove("active"))}openFocusDropdown(){const{smartMappingState:e}=this;if(this.open)this.closeDropdown();else{this.arcgisSmartMappingRelationshipFocusButtonBeforeOpen.emit();const i=(0,u.dN)(s.qy`<arcgis-map-config-smart-mapping-dropdown .smartMappingState=${e} .buttonNode=${this.buttonNode} .infos=${this.focusInfos} @arcgisSmartMappingDropdownChange=${e=>this.setNewFocus(e.detail)} @arcgisSmartMappingDropdownClose=${e=>{this.closeDropdown(),"Escape"===e.detail&&this.setFocus()}} @arcgisSmartMappingDropdownDisconnected=${()=>this.closeDropdown()}></arcgis-map-config-smart-mapping-dropdown>`);this.dropdownNode=i,this.buttonNode.classList.add("active"),document.body.appendChild(i),this.open=!0}}setNewFocus(e){const{smartMappingState:i}=this,o=(0,a.g)(i).authoringInfo.focus,t=e.focus;if(t===o)return this.closeDropdown(),void setTimeout(()=>{this.setFocus()},300);(0,l.r)((0,d.u)(i,{focus:t}),this.flowItemNode).then(o=>{this.setSelectedFocus(e.focus),(0,a.g)(i).uniqueValueInfos.forEach(e=>{o.uniqueValueInfos.find(i=>e.value===i.value).label=e.label}),(0,a.a4)(i,o),setTimeout(()=>{this.setFocus()},300),this.arcgisSmartMappingRelationshipFocusButtonChange.emit()},e=>{setTimeout(()=>{this.setFocus()}),this.arcgisSmartMappingRelationshipFocusButtonError.emit(e)}),this.closeDropdown()}setSelectedFocus(e){this.focusInfos.forEach(i=>{i.focus===e?(this.selectedFocusInfo=i,i.selected=!0):i.selected=!1})}render(){const{_messages:e}=this.smartMappingState;return s.qy`<calcite-label class="focus-margin">${e.relationshipFocusButton.focus}<div class="focus-button" role=button tabindex=0 aria-haspopup=true .ariaLabel=${e.relationshipFocusButton.focus} @keydown=${e=>{(" "===e.key||"Enter"===e.key)&&(e.preventDefault(),e.stopPropagation(),this.openFocusDropdown())}} @click=${e=>{e.stopPropagation(),this.openFocusDropdown()}} ${(0,n.K)(this.divRefHandler)}><div class="focus-content"><div class="focus-button-text"><div class="focus-button-title">${this.selectedFocusInfo.title}</div><div class="focus-button-msg">${this.selectedFocusInfo.msg}</div></div><div><calcite-icon scale=s icon=chevron-down></calcite-icon></div></div></div></calcite-label>`}}(0,t.c)("arcgis-map-config-smart-mapping-relationship-focus-button",f)}}]);