/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_chu-152ed3.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_chu-152ed3"],{28275:(e,t,r)=>{r.d(t,{a:()=>c,b:()=>m,c:()=>u,d:()=>i,f:()=>s,i:()=>o,v:()=>y});var a=r(66228);const s=(0,r(58611).y$)({totalFeatureCount:0,layer:void 0,mapView:void 0,originalField:void 0,numRecords:40,_messages:void 0,arcadeExecutor:void 0,filteredFeatureCount:0,currentScript:void 0,registeredResultId:void 0,arcadeSupported:void 0,invalidScript:void 0,isTable:void 0,autoPreviewEnabled:!1,selectedLanguage:void 0,features:{},sqlEngine:void 0,workflowState:void 0});function i(e){e.mapView=void 0,e.layer=void 0,e.originalField=void 0,e.arcadeExecutor=void 0,e.currentScript=void 0,e.registeredResultId=void 0,e.arcadeSupported=void 0,e.invalidScript=void 0,e.isTable=void 0,e.autoPreviewEnabled=void 0,e.selectedLanguage=void 0,e.sqlEngine=void 0,e.workflowState=void 0}const n={double:{min:-1/0,max:1/0},integer:{min:-2147483648,max:2147483647},single:{min:-3402823e32,max:3402823e32},"small-integer":{min:-32768,max:32767},"big-integer":{min:-9007199254740991,max:9007199254740991}};function o(e){return(0,a.i)(e)&&(e instanceof Date||["esri.arcade.arcadedate","esri.core.sql.timeonly","esri.core.sql.dateonly"].includes(e.declaredRootClass)||e._timeStampOffset||e.isLuxonDateTime)}function l(e,t,r){return r>=e&&r<=t}function c(e){const{layer:t}=s;if(e){const r=!["blob","global-id","oid","raster"].includes(e.type),a=t.sourceJSON?.geometryProperties,s=a?.shapeLengthFieldName,i=a?.shapeAreaFieldName,n=[s,i].includes(e.name);return e.editable&&r&&!n&&e.name!==t.objectIdField}return!1}function u(e){return("feature"===e.type||"oriented-imagery"===e.type)&&e.sourceJSON.supportsCalculate&&e.portalItem?.typeKeywords?.includes("Hosted Service")&&"admin"===e.portalItem?.itemControl}function d(e){const{originalField:t,_messages:r}=s;return["esri.arcade.arcadedate","esri.core.sql.dateonly"].includes(e.declaredRootClass)||e.isLuxonDateTime||e._timeStampOffset?{isFieldValid:e.isValid}:{isFieldValid:!1,errorMessage:r.invalidFieldType.replace("${fieldType}",`${t?.type}`)}}function p(e){const{originalField:t}=s;return(!["integer","small-integer","big-integer"].includes(t.type)||e===Number.parseInt(e,10))&&("number"==typeof e&&!Number.isNaN(e)&&e!==1/0&&e!==-1/0)}function f(e){const{originalField:t,_messages:r}=s,a=n[t?.type];return p(e)?l(a.min,a.max,e)?function(e){const{originalField:t}=s;return"range"!==t?.domain?.type||l(t.domain.minValue,t.domain.maxValue,e)}(e)?{isFieldValid:!0}:{isFieldValid:!1,errorMessage:r.domainOutOfRange.replace("${min}",`${t?.domain?.minValue}`).replace("${max}",`${t?.domain?.maxValue}`)}:{isFieldValid:!1,errorMessage:r.outOfRange.replace("${fieldType}",t.type).replace("${min}",`${a.min}`).replace("${max}",`${a.max}`)}:{isFieldValid:!1,errorMessage:r.invalidFieldType.replace("${fieldType}",`${t?.type}`)}}function y(e){const{originalField:t}=s;return null===e?!!t?.nullable:void 0!==e}function m(e){const{_messages:t,originalField:r}=s;if(null===e&&!Number.isNaN(e))return r?.nullable?{isFieldValid:!0}:{isFieldValid:!1,errorMessage:t.nullNotAllowed};if(function(e){return null!==e&&!o(e)&&("function"==typeof e||"object"==typeof e)}(e))return{isFieldValid:!1,errorMessage:t.cannotInsertObject.replace("${fieldType}",r?.type||t.commonUndefined)};switch(r?.type){case"string":return function(e){const{originalField:t,_messages:r}=s;return(d(e)||p(e))&&t?.length&&e.toString().length<=t.length||"string"==typeof e&&t?.length&&e.length<=t.length?{isFieldValid:!0}:{isFieldValid:!1,errorMessage:r.stringLengthError.replace("${maxStringLength}",`${t?.length}`)}}(e);case"double":case"integer":case"single":case"small-integer":case"big-integer":return f(e);case"date":case"timestamp-offset":return d(e);case"date-only":case"time-only":return function(e){const{originalField:t,_messages:r}=s;let a=!1;return"date-only"===t?.type?a="esri.core.sql.dateonly"===e.declaredRootClass?e.isValid:/[1-9][0-9][0-9]{2}-([0][1-9]|[1][0-2])-([1-2][0-9]|[0][1-9]|[3][0-1])/gmu.test(e):"time-only"===t?.type&&(a="esri.core.sql.timeonly"===e.declaredRootClass||/^(([0-1][0-9])|([2][0-3])):([0-5][0-9])(:[0-5][0-9](?:[.]\d{1,3})?)?$/gmu.test(e)),{isFieldValid:a,errorMessage:a?void 0:r.invalidFieldType.replace("${fieldType}",`${t?.type}`)}}(e);case"guid":return function(e){const{originalField:t,selectedLanguage:r,_messages:a}=s;let i=/^[a-fA-F0-9]{32}$/u.test(e)||/^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$/u.test(e)||/^\{[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}\}$/u.test(e)||/^\([a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}\)$/u.test(e),n=i?void 0:a.invalidFieldType.replace("${fieldType}",`${t?.type}`);return i&&"SQL"===r&&(i=/^(?!\()\{?[A-Fa-f0-9]{8}-[A-Fa-f0-9]{4}-[A-Fa-f0-9]{4}-[A-Fa-f0-9]{4}-[A-Fa-f0-9]{12}\}?$/u.test(e),i||(n=a.invalidGUID)),{isFieldValid:i,errorMessage:n}}(e);default:return{isFieldValid:!1,errorMessage:t.unexpectedValue}}}},42855:(e,t,r)=>{r.d(t,{a:()=>n,f:()=>a,l:()=>s,s:()=>i});var a=(e=>(e.expression="expression/",e.raster="Raster.",e.relationship="relationships/",e))(a||{}),s=(e=>(e.cluster="cluster",e.feature="feature",e.mapNotes="mapNotes",e))(s||{}),i=(e=>(e.catalog="catalog",e.catalogFootprint="catalog-footprint",e.csv="csv",e.feature="feature",e.geojson="geojson",e.imagery="imagery",e.imageryTile="imagery-tile",e.knowledgeGraphSublayer="knowledge-graph-sublayer",e.mapImage="map-image",e.ogcFeature="ogc-feature",e.orientedImagery="oriented-imagery",e.parquet="parquet",e.scene="scene",e.stream="stream",e.subtype="subtype",e.tile="tile",e.voxel="voxel",e.wcs="wcs",e.wfs="wfs",e.wms="wms",e))(i||{}),n=(e=>(e.bigInteger="big-integer",e.blob="blob",e.date="date",e.dateOnly="date-only",e.double="double",e.globalId="global-id",e.guid="guid",e.integer="integer",e.long="long",e.number="number",e.oid="oid",e.single="single",e.smallInteger="small-integer",e.string="string",e.timeOnly="time-only",e.timestampOffset="timestamp-offset",e))(n||{})},58611:(e,t,r)=>{r.d(t,{_i:()=>c,y$:()=>m});r(4713);var a=r(54312),s=r(44319),i=r(93461),n=r(53987),o=r(84577),l=r(60331);const c=(e,t)=>t=>d(t,e);class u extends s.G{constructor(e,t){super(e),this.Y=new Map,this.A=void 0,this.#e=(0,n.createObservable)();const r=this;r.#t=t,r.Z(),r.setProvisionalExports(p(e,new WeakRef(r),e.M.length-1,r.instance,r.Y),!1),(0,s.d)(e,t=>{if(t){const s=(0,a.watch)(()=>e[t],t=>{if(t===r.instance)return;const a=r.instance;r.exports=t,r.instance=t,r.Y.forEach((t,r)=>e.requestUpdate(t,a[r])),r.#r&&a.destroy(),r.#r=!1},{sync:!0});r.onDestroy(s.remove)}},r.exports)}#r;#e;#t;get exports(){return(0,n.trackAccess)(this.#e),super.exports}set exports(e){super.exports=e,this.#e.notify()}Z(){const e=this;e.instance="prototype"in e.#t&&"declaredClass"in e.#t.prototype?new e.#t:e.#t(),e.#r=!0}hostConnected(){this.exports=this.instance}hostDestroy(){this.#r&&this.instance.destroy?.()}}const d=(0,i.p)(u),p=(e,t,r,a,i)=>new Proxy(a,{get:(a,n)=>{const o=a[n];if("symbol"==typeof n||i.has(n))return o;const l=e.M[r];return l.A=n,(0,s.t)(e,a=>{if(l.A=void 0,void 0!==a){const s=a.key;i.set(n,s);const o=e.constructor.getPropertyOptions(s);0;const l=n!==s&&s.toLowerCase().includes("disable");f(t,o,n,s,l),void 0===o.i&&y(o,r,n,l)}},o)}}),f=(e,t,r,s,i,n)=>n=(0,a.watch)(()=>{const t=e.deref();return void 0===t||t.component.manager.destroyed?n=n.remove():t.exports[r]},(r,a)=>{if(!n)return;const o=e.deref().component;o?.requestUpdate(s,i?!a:a),t.c=!1},{sync:!0}),y=(e,t,r,a)=>{e.d.get=function(){const e=this.M[t]?.exports[r];return a?!e:e},e.d.set=function(e){const s=this.M[t];s.A!==r&&(s.exports[r]=a?!e:e)}},m=e=>{const t=class extends l.default{},r="function"==typeof e?e():e,a=Object.getOwnPropertyDescriptors(r);for(const[e,r]of Object.entries(a))Object.defineProperty(t.prototype,e,r),(0,o.property)()(t.prototype,e);return new((0,o.subclass)()(t))}},66228:(e,t,r)=>{r.d(t,{a:()=>h,b:()=>$,c:()=>S,d:()=>A,e:()=>T,f:()=>C,g:()=>g,h:()=>w,i:()=>y,j:()=>m,k:()=>x,l:()=>P,m:()=>I,n:()=>p,o:()=>F,p:()=>R,q:()=>V,r:()=>_,s:()=>v,t:()=>O,u:()=>b});var a=r(63438),s=r(18423),i=r(96086),n=r(91813),o=r(21255),l=r(13078),c=r(21303),u=r(12627),d=r(42855);const p=["feature","scene","geojson","csv","subtype-sublayer","oriented-imagery","catalog-footprint","sublayer"],f=["feature"];function y(e){return null!=e}function m(e,t,r){const a=t.fieldName;if(a.includes(d.f.expression)){const e=r.get(a);return e?.title?e.title:a}return v(e)&&e.getFieldConfiguration(a)?e.getFieldAlias(a)||a:t.label||a}async function g(e){return new Map((await x(e)).filter(e=>e.visible).map(e=>[e.name,e]))}function w(e){const t=new Map;return e?.expressionInfos&&e.expressionInfos.forEach(e=>{const r=`${d.f.expression}${e.name}`;t.set(r,e)}),t}function h(e){return"map-image"===e?.layer?.type?d.s.mapImage:"subtype-sublayer"===e?.type?d.s.subtype:"tile"===e?.layer?.type?d.s.tile:"scene"===e?.type?d.s.scene:"ogc-feature"===e?.type?d.s.ogcFeature:"imagery"===e?.type?d.s.imagery:"imagery-tile"===e?.type?d.s.imageryTile:"wfs"===e?.type?d.s.wfs:"wcs"===e?.type?d.s.wcs:"wms"===e?.layer?.type?d.s.wms:"csv"===e?.type?d.s.csv:"geojson"===e?.type?d.s.geojson:"stream"===e?.type?d.s.stream:"oriented-imagery"===e?.type?d.s.orientedImagery:"catalog"===e?.type?d.s.catalog:"catalog-footprint"===e?.type?d.s.catalogFootprint:"knowledge-graph-sublayer"===e?.type?d.s.knowledgeGraphSublayer:"voxel"===e?.type?d.s.voxel:"parquet"===e?.type?d.s.parquet:d.s.feature}function b(e){const t=h(e);let r;return t===d.s.wms||t===d.s.mapImage?r=e?.layer.version:(t===d.s.imagery||t===d.s.feature||t===d.s.scene)&&(r=e.version),Number.parseFloat(r)}function v(e){return"fieldConfigurations"in e&&f.includes(e.type)}async function x(e){return await new Promise((t,r)=>{switch(h(e)){case d.s.feature:case d.s.ogcFeature:case d.s.stream:t(e.fields);break;case d.s.mapImage:{const a=e,s=a?.layer;s?.portalItem&&s.url.includes("https://demographics")&&s.url.includes(".arcgis.com")?s.portalItem?.fetchData().then(e=>{if(e?.thematicGroup){const r=new Map(a.fields.map(e=>[e.name,e])),s=e.thematicGroup.fieldNames,i=[];s.forEach(e=>{r.has(e)&&i.push(r.get(e))}),t(i)}else t(a.fields)}).catch(e=>{r(new Error(e))}):t(a.fields);break}case d.s.imagery:case d.s.imageryTile:case d.s.wcs:t(e.rasterFields);break;default:t("fields"in e?e.fields??[]:[])}})}function F(e){if(e)switch(e.type){case"point":return e;case"extent":return e.center;case"polygon":return e.centroid;case"multipoint":case"polyline":return e.extent?.center;default:return}}function I(e){return Number((100*(1-e)).toFixed(1))}function O(e){return Number((1-e/100).toFixed(3))}const A=(e,t)=>{const r=[];return e?.fieldInfos?.forEach(e=>{e.fieldName?.includes(d.f.expression)||r.push({name:e.fieldName,alias:e.label,type:"string"})}),r},$=async(e,t)=>{const r=new u.default;return r.geometry=t.extent,r.mapExtent=t.extent,r.returnGeometry=!0,r.tolerance=6,r.layerOption="popup",r.width=t.width,r.height=t.height,r.layerIds=[e.id],(await c.identify(e.layer.url,r))?.results?.[0]?.feature},T=async(e,t,r)=>{const a=await(await e.whenLayerView(t)).queryAggregates();return await N(r,a.features?.[0])},N=async(e,t)=>{let r;if(t)r=t.clone();else{r=new a.default;const t=A(e);if(t?.length){const e={};t.forEach(t=>{e[t.name]=""}),r.attributes=e}const i=new s.default;r.geometry=i}return r};function V(e,t){const r=t.startsWith("#"),a=t.startsWith(".");for((a||r)&&(t=t.slice(1));e;){if(r){if(e.id===t)return e}else if(a){if(e.classList.contains(t))return e}else if(e.tagName.toLowerCase()===t.toLowerCase())return e;e=e.parentElement??e.getRootNode()?.host??void 0}}async function S(e){if(h(e)===d.s.stream)return await Promise.resolve("point");if(e.geometryType)return await Promise.resolve(e.geometryType);if(h(e)===d.s.mapImage&&e?.layer?.sourceJSON?.layers){const t=e.layer?.sourceJSON.layers.find(t=>{if(t.id===e.id)return t})?.geometryType?.toLowerCase();if(t)return t.indexOf("point")>-1?await Promise.resolve("point"):t.indexOf("line")>-1?await Promise.resolve("polyline"):t.indexOf("polygon")>-1?await Promise.resolve("polygon"):await Promise.resolve(t);{const t=e?.layer?.findSublayerById(e.id);if(t){const e=await(t?.createFeatureLayer());return e?(await e.load(),await Promise.resolve(e?.geometryType)):void await Promise.resolve()}return void await Promise.resolve()}}await Promise.resolve()}function P(e,t,r){let a="";if(/^raster.(?:item|service)pixelvalue/iu.test(e))a="number";else if(t.has(e)){const r=t.get(e);a=r.type?r.type.toLowerCase():""}else if(r.has(e)){const t=r.get(e);a=t.returnType?t.returnType.toLowerCase():""}else a="number";return a}async function C(e,t){try{const r=h(e);if(r===d.s.mapImage&&e.layer.version>=10.5&&!e.layer.capabilities?.operations?.supportsQuery&&e.layer.capabilities?.operations?.supportsIdentify)return{features:[await $(e,t)||await M(e,t)]};if(r===d.s.scene&&!e.capabilities?.operations?.supportsQuery)return{features:[await M(e,t)]};const a=r===d.s.ogcFeature||r===d.s.stream?await t.whenLayerView(e):e,s=a.createQuery();s.where=a.definitionExpression||"1=1",s.outFields=["*"],s.returnM="hasM"in e&&e.hasM,s.returnZ="hasZ"in e&&e.hasZ,s.outSpatialReference=t.spatialReference,s.returnGeometry=!0,(a.sourceJSON?.advancedQueryCapabilities?.supportsPagination||r===d.s.ogcFeature)&&(s.start=0,s.num=1),s.outSpatialReference=t.spatialReference;const i=await a.queryFeatures(s);return i?.features?.length||(i.features[0]=await M(e,t)),i}catch(e){console.error(e)}}async function M(e,t){return await new Promise(r=>{const s=new a.default;if(e.fields?.length){const t={};e.fields.forEach(e=>{t[e.name]=e.defaultValue}),s.attributes=t}const c=t.extent;let u;"polygon"===e.geometryType?u=o.default.fromExtent(c):"point"===e.geometryType?u=c.center.clone():"multipoint"===e.geometryType?u=new i.default({points:[[c.center.x,c.center.y]],spatialReference:c.center.spatialReference.clone()}):"polyline"===e.geometryType?(u=new n.default({spatialReference:t.spatialReference.clone()}),u.addPath([[c.xmin,c.ymin],[c.xmax,c.ymax]])):"mesh"===e.geometryType&&(u=l.default.createBox(c.center.clone(),{size:{width:50,height:50,depth:50}})),s.geometry=u,r(s)})}function _(e){return h(e)===d.s.tile&&"url"in e&&"sublayer"===e.type&&-1===e.url?.indexOf(e.parent.url)&&!!e.fields?.length}function R(e){return h(e)===d.s.tile&&"url"in e&&"sublayer"===e.type&&-1!==e.url?.indexOf(e.parent.url)&&!!e.fields?.length}}}]);