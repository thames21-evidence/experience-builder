/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-4b53df.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-4b53df"],{38409:(e,t,r)=>{r.d(t,{d:()=>o,p:()=>s});var i=r(3826),n=r(1536);function s(e,t,r,i){var n,s;const o={},a=[],c=t.result.ExtensionTypes.filter(e=>{var t,n;return(null===(t=r[i])||void 0===t?void 0:t.includes(e.Name))||(null===(n=e.Info)||void 0===n?void 0:n.SupportsInterceptor)});c.forEach(t=>{var r;const{Info:i,Properties:n,DisplayName:s,Name:c}=t;if(e[c]&&!(null==i?void 0:i.SupportsInterceptor))e[c].displayName=s;else{const t={enabled:(null===(r=e[c])||void 0===r?void 0:r.enabled)||"false",typeName:c,capabilities:(null==i?void 0:i.DefaultWebCapabilities)||"",properties:Object.assign(Object.assign(Object.assign(Object.assign({},n),(null==i?void 0:i.SupportsREST)&&{SupportsREST:i.SupportsREST}),(null==i?void 0:i.SupportsSOAP)&&{SupportsSOAP:i.SupportsSOAP}),(null==i?void 0:i.SupportsInterceptor)&&{SupportsInterceptor:i.SupportsInterceptor}),displayName:s||""};"true"===(null==i?void 0:i.SupportsInterceptor)?(o[c]=t,a.push(c)):e[c]=t}});for(const t in e)"true"===(null===(s=null===(n=e[t])||void 0===n?void 0:n.properties)||void 0===s?void 0:s.supportsInterceptor)&&delete e[t];return{allExtensions:e,updatedInterceptors:o,interceptorOrderList:a}}async function o(){try{i.a.id&&(await(0,n.d)(i.a.id,{permanentDelete:!0}),i.a.id=null)}catch(e){console.warn("Delete item failed",e)}}},51632:(e,t,r)=>{r.d(t,{a:()=>d,b:()=>p,c:()=>c,d:()=>l,e:()=>b,f:()=>v,g:()=>u,s:()=>h});var i=r(54251),n=r(74695),s=r(98704),o=r(1536),a=r(83692);async function c(e){try{const t=await(0,a.r)(e);return{result:{folders:t.folders||[]}}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}}async function l(e,t){try{return{result:{status:(await(0,a.r)(e,{folderName:t},{},"post")).status}}}catch(e){return console.error(e),{error:e}}}async function d(e){const t=await(0,n.l)();try{await(0,s.c)(t)}catch(e){return{error:e}}const r=`${e}/content/features/analyze`;try{const e=await(0,a.r)(r,{itemid:t.id,filetype:"Service Definition"},{},"post");return e.id=t.id,{result:e}}catch(e){return await async function(e){try{await(0,o.d)(e,{permanentDelete:!0})}catch(e){console.error("Failed to delete item:",e)}}(t.id),{error:e}}}async function p(e,t){const r=`${e}/content/features/analyze`;try{return{result:await(0,a.r)(r,{itemid:t,filetype:"Service Definition"},{},"post")}}catch(e){return{error:e}}}async function u(e,t){const r=`${e}/types/providers/ArcObjects11/${t}/types?listInterceptors=true`;try{return{result:await(0,a.r)(r)}}catch(e){return{error:e}}}async function h(e,t,r){const i=`${e}/rest/services/System/PublishingTools/GPServer/Publish%20Service%20Definition`;try{const e=await(0,a.r)(`${i}/submitJob`,{in_sdp_id:r,in_config_overwrite:JSON.stringify(t)},{},"post");return{result:(await async function(e,t){const r=`${t}/jobs/${encodeURIComponent(e)}`;try{return{result:await(0,a.p)(r,{pendingStatuses:["esriJobExecuting","esriJobSubmitted","esriJobWaiting"],successStatuses:["esriJobSucceeded"]},"post")}}catch(e){return{error:e}}}(e.jobId,i)).result}}catch(e){return{error:e}}}async function v(e,t,r){var i;const n=`${t}/rest/services/System/PublishingTools/GPServer/Publish%20Service%20Definition/jobs/${r}/${e}`;try{const e=await(0,a.r)(n);if(e){const r=null===(i=null==e?void 0:e.value)||void 0===i?void 0:i.svcConfigInfo,n=`${t}/admin/services/${(null==r?void 0:r.folder)?`${r.folder}/`:""}${r.name}.${r.type}`;return{result:await(0,a.r)(n)}}}catch(e){return{error:e}}}async function b(e,t){var r;const n=`${e}content/items/${t}/info/iteminfo.xml${(0,i.g)()?`?token=${(0,i.g)()}`:""}`;try{const e=await fetch(n,{headers:{Accept:"application/xml"}}),t=await e.text(),i=(new DOMParser).parseFromString(t,"text/xml"),s=Array.from(i.getElementsByTagName("tag")).map(e=>e.textContent);return{result:{tags:s,summary:(null===(r=i.getElementsByTagName("summary")[0])||void 0===r?void 0:r.textContent)||""}}}catch(e){return{error:e}}}},77548:(e,t,r)=>{r.r(t),r.d(t,{arcgis_new_item_pages_service_definition_configuration:()=>l});var i=r(87849),n=r(59317),s=r(51632),o=r(3826),a=r(95878),c=r(38409);r(37762),r(54251),r(74695),r(88878),r(83692),r(931),r(93814),r(41473),r(46904),r(24869),r(15912),r(72257),r(86562),r(15332),r(27137),r(76246),r(58573),r(1536),r(29599),r(60958),r(32478),r(98704),r(82149),r(54077),r(1654),r(10578),r(8417),r(50315),r(26262);const l=class{constructor(e){(0,i.r)(this,e),this.newItemUpdatePage=(0,i.c)(this,"newItemUpdatePage",7),this.extensions={},this.i18n=void 0,this.interceptors={},this.interceptorOrderList=[]}async componentWillLoad(){this.i18n=a.u.i18n.serviceDefinitionStrings,this.serviceDefinitionProperties=o.a.serviceDefinitonProperties,await this.loadExtensionInfo(),this.populateFields()}populateFields(){const{extensions:e,interceptorOrderList:t}=o.a;null==e||e.forEach(e=>{const{typeName:t,enabled:r}=e;"true"===r&&(this.extensions[t]?this.extensions[t].enabled="true":this.interceptors[t]&&(this.interceptors[t].enabled="true"))}),t&&(this.interceptorOrderList=t)}async handleNext(){o.a.interceptorOrderList=this.interceptorOrderList,o.a.interceptors=this.interceptors,o.a.extensions=[...Object.values(this.extensions),...Object.values(this.interceptors)],this.newItemUpdatePage.emit("serviceDefinitionProperties")}async loadExtensionInfo(){var e,t;const{type:r,extensions:i,frameworkProperties:n}=this.serviceDefinitionProperties.serviceInfo.service,a=Object.fromEntries(i.map(e=>[e.typeName,Object.assign({},e)])),l=await(0,s.g)(`${null===(e=o.a.hostingServer)||void 0===e?void 0:e.url}/admin/services`,r)||{result:{ExtensionTypes:[]}},{allExtensions:d,updatedInterceptors:p,interceptorOrderList:u}=(0,c.p)(a,l,{ImageServer:["WMSServer","WCSServer"],MapServer:["WMSServer","FeatureServer","VersionManagementServer","NetworkDiagramServer","UtilityNetworkServer","LRServer","NAServer","DRServer","ParcelFabricServer","KmlServer","WFSServer","WCSServer","ValidationServer","TraceNetworkServer","TopographicProductionServer","OGCFeatureServer"]},r);this.extensions=d,this.interceptors=p,this.interceptorOrderList=(null===(t=null==n?void 0:n.interceptorOrderList)||void 0===t?void 0:t.split(","))||u}createCapabilitiesComboBoxItem(){var e,t;if(!this.serviceDefinitionProperties)return;const r=null===(t=null===(e=this.serviceDefinitionProperties.serviceInfo)||void 0===e?void 0:e.service)||void 0===t?void 0:t.type,{capabilityNames:n}=this.i18n;return(0,i.h)(i.F,null,(0,i.h)("calcite-combobox-item",{value:r,heading:n[r]||"",selected:!0,disabled:!0}),Object.keys(this.extensions).map(e=>{const{typeName:t,displayName:r,enabled:n}=this.extensions[e];return(0,i.h)("calcite-combobox-item",{value:t,heading:r||t,selected:"true"===n,key:e})}))}handleInterceptorOrderChange(e){const{dragEl:t,newIndex:r,oldIndex:i}=e.detail,n=[...this.interceptorOrderList];n.splice(i,1),n.splice(r,0,t.value),this.interceptorOrderList=n}handleComboBoxChange(e){const t=e.target.value;Array.isArray(t)?t.forEach(e=>{this.extensions[e].enabled="true"}):"string"==typeof t&&""!==t?this.extensions[t].enabled="true":Object.keys(this.extensions).forEach(e=>{this.extensions[e].enabled="false"})}render(){const{addCapabilities:e,chooseCapabilities:t,capabilities:r,interceptors:s,learnMoreAboutServiceDefinition:o}=this.i18n,{helpMap:c,helpBase:l}=n.c.config;return(0,i.h)(i.F,{key:"e4eb12e633febb6c35eb905d0090f111a74e2c8c"},(0,i.h)("div",{key:"2f023b759f54f4250738275c53a54b2e8eea7b52",class:"description-text capability-title"},t),(0,i.h)("calcite-label",{key:"c3222cf3898d8f48e190a8c2ccc0b9d4986cecf1"},r,(0,i.h)("calcite-combobox",{key:"296a4b81e223b6f59773bd6b29f116c443c31d67",label:"service-definition-capabilities-select",placeholder:e,onCalciteComboboxChange:e=>{this.handleComboBoxChange(e)}},this.createCapabilitiesComboBoxItem())),this.interceptorOrderList.length>0&&(0,i.h)("calcite-label",{key:"f4193275c7f84eb58a42c364ecd664e29679af1d",class:"description-text"},s,(0,i.h)("div",{key:"1a7bd72f01529bd787600e1cf961bdab301cd711",class:"interceptor-div"},(0,i.h)("calcite-list",{key:"32c1f96164457a04de49c8c7051b5dd0e7ad387b",label:s,dragEnabled:!0,class:"interceptor-list",onCalciteListOrderChange:e=>{this.handleInterceptorOrderChange(e)}},this.interceptorOrderList.map(e=>{const t=this.interceptors[e],{displayName:r}=t;return(0,i.h)("calcite-list-item",{key:e,label:r||e,value:e},(0,i.h)("calcite-switch",{checked:"true"===t.enabled,onCalciteSwitchChange:e=>{t.enabled=e.target.checked?"true":"false"},slot:"actions-end",class:"interceptor-switch","aria-label":r||e}))})))),(0,i.h)("calcite-link",{key:"6fd1c4b7874fd6ed186ad2d71b1a2d808f4b60f0",href:`${l}${c[120005523]}`,"aria-label":o,target:"_blank"},a.u.i18n.common.learnMore))}};l.style=".interceptor-switch{margin-inline-end:1rem}.interceptor-div{background-color:var(--calcite-color-background)}.interceptor-list{padding:0.5rem}.description-text{font-weight:700}.capability-title{font-size:1rem}"}}]);