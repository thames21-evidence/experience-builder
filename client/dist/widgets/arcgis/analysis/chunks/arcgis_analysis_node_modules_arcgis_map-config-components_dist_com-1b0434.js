/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_com-1b0434.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_com-1b0434"],{1179:(e,t,a)=>{a.r(t),a.d(t,{ArcgisMapConfigSmartMappingPanelsRasterVectorField:()=>h});var i=a(73679),n=a(4395),s=a(5294),r=a(1225),o=(a(54312),a(44345),a(55448),a(52797),a(34031),a(63438),a(5933),a(28927),a(83368),a(75518)),l=(a(89704),a(18423),a(96086),a(91813),a(21255),a(13078),a(21303),a(12627),a(56451),a(23054),a(5077),a(23795),a(17902),a(87420),a(30161),a(81734),a(75698),a(10628),a(59640),a(64451),a(6176),a(65595)),c=(a(77462),a(49403),a(10281),a(83930),a(66617),a(10454),a(29614),a(94916),a(52554),a(2156),a(4038),a(49851),a(75054),a(15223),a(70169),a(47207),a(70852),a(48103),a(39423),a(85681),a(18444),a(42411),a(9767),a(38218),a(91914),a(31521),a(86605),a(68828)),u=(a(440),a(46547),a(6238),a(7299),a(4265)),d=a(85643),p=a(73801);const m=n.AH`:host{width:100%;display:none}:host([selected]){display:flex}.flow-item{height:100%}.vector-field-block{overflow-x:hidden}.invert-symbol-wrapper{display:flex;justify-content:space-between}.invert-symbol-margin{margin-right:inherit;margin-left:.35rem}:dir(rtl){.invert-symbol-margin{margin-left:inherit;margin-right:.35rem}}.invert-symbol-switch{padding-top:6px}.footer-buttons{width:100%;display:flex;flex-direction:column;gap:var(--calcite-spacing-sm)}`;class h extends p.WF{constructor(){super(...arguments),this.flowItemNode=(0,d._)(),this.manageStyleButtonNode=(0,d._)(),this.registerStyleButtonNode=(0,d._)(),this.selectNode=(0,d._)(),this.buttonNode=(0,d._)(),this.symbolScalingSliderNode=(0,d._)(),this.minRangeNode=(0,d._)(),this.maxRangeNode=(0,d._)(),this.smartMappingState=(0,l.u)(),this.menuOpen=!1,this.showBackButton=!1,this.selected=!1,this.arcgisSmartMappingPanelsRasterVectorFieldBackClick=(0,p.lh)(),this.arcgisSmartMappingPanelsRasterVectorFieldClose=(0,p.lh)(),this.arcgisSmartMappingPanelsRasterVectorFieldError=(0,p.lh)()}static{this.properties={menuOpen:5,showBackButton:5,selected:7,beforeBack:0}}static{this.styles=m}async setFocus(){await(this.flowItemNode.value?.setFocus())}load(){this.originalRendererObj=s.clone((0,r.T)(this.smartMappingState)),this.speedUnitOptions=this.getSpeedUnitOptions()}async loaded(){requestAnimationFrame(async()=>await(this.flowItemNode.value?.setFocus())),this.currentInput=this.inputUnitNode.value,this.currentOutput=this.outputUnitNode.value}comboboxRefHandler(e){e&&("output"===e.getAttribute("data-value")?this.outputUnitNode=e:this.inputUnitNode=e)}handleDone(){this.arcgisSmartMappingPanelsRasterVectorFieldClose.emit("save")}handleCancel(){const{originalRendererObj:e,smartMappingState:t}=this;(0,r.ag)(t,e),this.arcgisSmartMappingPanelsRasterVectorFieldClose.emit("cancel")}getExactBeaufortUnit(e){switch(e=e??"meter-per-second"){case"knots":return"beaufort-kn";case"meter-per-second":default:return"beaufort-m";case"mile-per-hour":return"beaufort-mi";case"kilometer-per-hour":return"beaufort-km";case"feet-per-second":return"beaufort-ft"}}resetOutputUnit(e,t){let a;switch(e){case"ocean-current-kn":case"wind-barb":a="knots";break;case"ocean-current-m":a="meter-per-second"}a&&(t.outputUnit=a)}handleSymbolScaleChange(e,t){const{smartMappingState:a}=this,i=(0,r.T)(a),n=(0,r.c)(i,"size");n.minSize=e,n.maxSize=t,(0,r.ag)(a)}handleInvertSymbolsChange(e){const{smartMappingState:t}=this;(0,r.T)(t).flowRepresentation=e,(0,r.ag)(t)}handleUnitSelectClick(e){const{smartMappingState:t}=this,a=(0,r.T)(t);"input"===e?a.inputUnit=this.inputUnitNode.value:(a.outputUnit=this.outputUnitNode.value,a.style.includes("beaufort")&&(a.style=this.getExactBeaufortUnit(a.outputUnit))),(0,r.ag)(t)}handleMagnitudeRangeValuesChange(e,t){const{smartMappingState:a}=this;if("number"==typeof e&&Number.isNaN(e)&&(e=""),"number"==typeof t&&Number.isNaN(t)&&(t=""),e===this.minRangeNode.value.max&&t===this.maxRangeNode.value.min)return;const i=(0,r.T)(a),n=(0,r.c)(i,"size");""!==e&&(0,r.V)(e)?(e=Math.round(1e3*e)/1e3,n.minDataValue=e,this.minRangeNode.value.value=`${e}`,this.maxRangeNode.value.min=e+this.maxRangeNode.value.step):(n.minDataValue=void 0,this.minRangeNode.value.value=""),""!==t&&(0,r.V)(t)?(t=Math.round(1e3*t)/1e3,n.maxDataValue=t,this.maxRangeNode.value.value=`${t}`,this.minRangeNode.value.max=t-this.minRangeNode.value.step):(n.maxDataValue=void 0,this.maxRangeNode.value.value=""),(0,r.ag)(a)}handleTogglePopover(){const{flowItemNode:{value:e},smartMappingState:t}=this,{_messages:a}=t;this.popoverNode?this.removePopover():(this.popoverNode=(0,p.dN)(n.qy`<arcgis-map-config-smart-mapping-info-popover .smartMappingState=${t} .props=${{title:a.panels.vectorField.invertSymbols,flowItemNode:e,moreInfo:a.panels.vectorField.invertSymbolsTip}} .referenceElement=${this.buttonNode.value} @arcgisSmartMappingInfoPopoverClose=${e=>{e.stopPropagation(),this.removePopover(),setTimeout(()=>this.buttonNode.value.setFocus(),200)}} @arcgisSmartMappingInfoPopoverDisconnected=${e=>{e.stopPropagation(),this.removePopover()}}></arcgis-map-config-smart-mapping-info-popover>`),document.body.appendChild(this.popoverNode),this.popoverNode.open=!0,this.popoverNode.reposition(),setTimeout(()=>this.popoverNode?.setFocus(),100))}removePopover(){this.popoverNode?.remove(),this.popoverNode=void 0}getSpeedUnitOptions(){const{_messages:e}=this.smartMappingState,t=e.panels.vectorField.unitOptions;return[{key:"meter-per-second",title:t.esriMetersPerSecond,selected:!1},{key:"kilometer-per-hour",title:t.esriKilometersPerHour,selected:!1},{key:"knots",title:t.esriKnots,selected:!1},{key:"feet-per-second",title:t.esriFeetPerSecond,selected:!1},{key:"mile-per-hour",title:t.esriMilesPerHour,selected:!1}]}render(){const{hideLayerTitle:e,layer:t,_messages:a}=this.smartMappingState,i=t.title;return this.el.classList.add("calcite-match-height"),n.qy`<calcite-flow-item .heading=${a.panels.vectorField.styleOptions} .description=${e?void 0:i} class="flow-item" .closable=${(0,r.aa)(this.el)} .showBackButton=${this.showBackButton} .selected=${this.selected} @calciteFlowItemClose=${this.handleDone} @calciteFlowItemBack=${()=>this.arcgisSmartMappingPanelsRasterVectorFieldBackClick.emit()} ${(0,d.K)(this.flowItemNode)}>${this.renderVisualization()}${this.renderFooterButtons()}</calcite-flow-item>`}renderVisualization(){const{smartMappingState:e}=this,{_messages:t}=e,a=(0,r.ah)(e,t.panels.vectorField.vectorField);return n.qy`<calcite-block class="vector-field-block" .heading=${a} expanded>${this.renderManageStyleButton()}${this.renderSymbolStyleSelector()}${this.renderSymbolDensitySlider()}${this.renderSymbolScalingSlider()}${this.renderInvertSymbols()}${this.renderMagnitudeRange()}${this.renderUnitSelectors()}</calcite-block>`}renderManageStyleButton(){return n.qy`<arcgis-map-config-smart-mapping-raster-preset-renderer-button mode=edit .originalRasterProps=${{originalRendererObj:this.originalRendererObj}} @arcgisDone=${e=>{"delete"!==e.detail?this.requestUpdate():this.arcgisSmartMappingPanelsRasterVectorFieldBackClick.emit("delete")}} ${(0,d.K)(this.manageStyleButtonNode)}></arcgis-map-config-smart-mapping-raster-preset-renderer-button>`}renderSymbolStyleSelector(){const{smartMappingState:e}=this;return n.qy`<arcgis-map-config-smart-mapping-vector-symbol-button @arcgisSmartMappingSelectBeforeOpen=${()=>this.removePopover()} @arcgisSmartMappingSelectChange=${t=>{const a=(0,r.T)(e);let i=t.detail;i.includes("beaufort")&&(i=this.getExactBeaufortUnit(a.outputUnit)),this.resetOutputUnit(i,a),(0,o.r)((0,c.c)(e,{style:i}),this.flowItemNode.value).then(t=>{(0,r.ag)(e,t.renderer),this.requestUpdate(),this.selectNode.value&&this.selectNode.value.manager.component.requestUpdate()},e=>{this.selectNode.value.manager.component.requestUpdate(),this.arcgisSmartMappingPanelsRasterVectorFieldError.emit(e)})}} ${(0,d.K)(this.selectNode)}></arcgis-map-config-smart-mapping-vector-symbol-button>`}renderSymbolDensitySlider(){const{smartMappingState:e}=this,{_messages:t}=e,a=(0,r.T)(e),{symbolTileSize:i}=a||{},s=100/i;return n.qy`<calcite-label>${t.panels.vectorField.symbolDensity}<arcgis-map-config-smart-mapping-raster-slider renderer-type=vector-field type=density min=1 max=5 .values=${[Math.round(10*s)/10]} precision=1 .minLabel=${t.panels.flow.low} .maxLabel=${t.panels.flow.high}></arcgis-map-config-smart-mapping-raster-slider></calcite-label>`}renderSymbolScalingSlider(){const{smartMappingState:e}=this,{_messages:t}=e,a=(0,r.T)(e),i=(0,r.c)(a,"size"),{minSize:s,maxSize:o}=i;return n.qy`<calcite-label>${t.panels.vectorField.symbolScaling}<calcite-slider min=0 .minValue=${null!==s?s:20} max=100 .maxValue=${null!==o?o:80} step=1 label-handles label-ticks precise snap @calciteSliderInput=${(0,u.d)(()=>{const e=this.symbolScalingSliderNode.value.minValue,t=this.symbolScalingSliderNode.value.maxValue;this.handleSymbolScaleChange(e,t)},300)} ${(0,d.K)(this.symbolScalingSliderNode)}></calcite-slider></calcite-label>`}renderInvertSymbols(){const{smartMappingState:e}=this,{_messages:t}=e,a="flow-from"!==(0,r.T)(e).flowRepresentation;return n.qy`<div class="invert-symbol-wrapper"><calcite-label layout=inline-space-between><section>${t.panels.vectorField.invertSymbols}<calcite-button class="invert-symbol-margin" icon-start=information scale=s appearance=transparent kind=neutral @click=${e=>{e.stopPropagation(),this.handleTogglePopover()}} ${(0,d.K)(this.buttonNode)}></calcite-button></section></calcite-label><calcite-switch class="invert-symbol-switch" .label=${t.panels.vectorField.invertSymbols} .checked=${a} @calciteSwitchChange=${e=>this.handleInvertSymbolsChange(e.currentTarget.checked?"flow-to":"flow-from")}></calcite-switch></div>`}renderMagnitudeRange(){const{smartMappingState:e}=this,{_messages:t}=e,a=(0,r.T)(e),i=(0,r.c)(a,"size"),{minDataValue:s,maxDataValue:o}=i,l=(0,r.V)(s)?Math.round(10*s)/10:void 0,c=(0,r.V)(o)?Math.round(10*o)/10:void 0;return n.qy`<calcite-label>${t.panels.vectorField.magnitudeRange}</calcite-label><calcite-label>${t.panels.vectorField.min}<calcite-input-number .label=${t.panels.vectorField.min} scale=s inputmode=decimal .min=${l} .max=${c} .value=${`${l??""}`} number-button-type=none @calciteInputNumberInput=${()=>{const e=Number.parseFloat(this.minRangeNode.value.value),t=Number.isNaN(Number.parseFloat(this.minRangeNode.value.value))?Number.NEGATIVE_INFINITY:Number.parseFloat(this.minRangeNode.value.value),a=Number.isNaN(Number.parseFloat(this.maxRangeNode.value.value))?Number.POSITIVE_INFINITY:Number.parseFloat(this.maxRangeNode.value.value);!Number.isNaN(e)&&e>=t&&e<=a?(this.minRangeNode.value.value=`${e}`,this.handleMagnitudeRangeValuesChange(e,Number.parseFloat(this.maxRangeNode.value.value))):(this.minRangeNode.value.value="",this.handleMagnitudeRangeValuesChange(void 0,Number.parseFloat(this.maxRangeNode.value.value)))}} ${(0,d.K)(this.minRangeNode)}></calcite-input-number></calcite-label><calcite-label>${t.panels.vectorField.max}<calcite-input-number .label=${t.panels.vectorField.max} scale=s inputmode=decimal .min=${l} .max=${c} .value=${`${c??""}`} number-button-type=none @calciteInputNumberInput=${()=>{const e=Number.parseFloat(this.maxRangeNode.value.value),t=Number.isNaN(Number.parseFloat(this.minRangeNode.value.value))?Number.NEGATIVE_INFINITY:Number.parseFloat(this.minRangeNode.value.value),a=Number.isNaN(Number.parseFloat(this.maxRangeNode.value.value))?Number.POSITIVE_INFINITY:Number.parseFloat(this.maxRangeNode.value.value);!Number.isNaN(e)&&e>=t&&e<=a?(this.maxRangeNode.value.value=`${e}`,this.handleMagnitudeRangeValuesChange(Number.parseFloat(this.minRangeNode.value.value),e)):(this.maxRangeNode.value.value="",this.handleMagnitudeRangeValuesChange(Number.parseFloat(this.minRangeNode.value.value),void 0))}} ${(0,d.K)(this.maxRangeNode)}></calcite-input-number></calcite-label>`}renderUnitSelectors(){const{_messages:e}=this.smartMappingState;return n.qy`<calcite-label>${e.panels.vectorField.convertMagnitude}</calcite-label><calcite-label>${e.panels.vectorField.inputUnits}${this.renderUnitSelector("input")}</calcite-label><calcite-label>${e.panels.vectorField.outputUnits}${this.renderUnitSelector("output")}</calcite-label>`}renderUnitSelector(e){const{smartMappingState:t}=this,{_messages:a}=t,i=(0,r.T)(t),s="output"===e&&["wind-barb","ocean-current-kn","ocean-current-m"].includes(i.style);return n.qy`<calcite-combobox .disabled=${s} .label=${"input"===e?a.panels.vectorField.inputUnits:a.panels.vectorField.outputUnits} clear-disabled scale=s selection-mode=single data-value=${e??p.s6} @calciteComboboxChange=${()=>{"input"===e?(""===this.inputUnitNode.value?this.inputUnitNode.value=this.currentInput:this.currentInput=this.inputUnitNode.value,this.handleUnitSelectClick("input")):(""===this.outputUnitNode.value?this.outputUnitNode.value=this.currentOutput:this.currentOutput=this.outputUnitNode.value,this.handleUnitSelectClick("output"))}} ${(0,d.K)(this.comboboxRefHandler)}>${this.speedUnitOptions.map(t=>this.renderUnitOption(e,t))}</calcite-combobox>`}renderUnitOption(e,t){const{smartMappingState:a}=this,i=(0,r.T)(a),s=this.speedUnitOptions.find(t=>"input"===e?t.key===i.inputUnit:t.key===i.outputUnit);return n.qy`<calcite-combobox-item .value=${t.key} .heading=${t.title} .selected=${!!s&&t===s}></calcite-combobox-item>`}renderFooterButtons(){return n.qy`<div class="footer-buttons" slot=footer>${this.renderDoneButton()}${this.renderRegisterStyleButton()}${this.renderCancelButton()}</div>`}renderRegisterStyleButton(){return n.qy`<arcgis-map-config-smart-mapping-raster-preset-renderer-button mode=register @arcgisDone=${e=>{const{smartMappingState:t}=this;if(this.requestUpdate(),"register"===e.detail){const e=(0,r.T)(t);this.originalRendererObj=s.clone(e)}this.manageStyleButtonNode.value&&this.manageStyleButtonNode.value.manager.component.requestUpdate(),this.registerStyleButtonNode.value.manager.component.requestUpdate()}} ${(0,d.K)(this.registerStyleButtonNode)}></arcgis-map-config-smart-mapping-raster-preset-renderer-button>`}renderDoneButton(){const{_messages:e}=this.smartMappingState;return n.qy`<calcite-button .label=${e.done} @click=${this.handleDone} appearance=solid width=full>${e.done}</calcite-button>`}renderCancelButton(){const{_messages:e}=this.smartMappingState;return n.qy`<calcite-button .label=${e.cancel} @click=${this.handleCancel} appearance=outline-fill width=full>${e.cancel}</calcite-button>`}}(0,i.c)("arcgis-map-config-smart-mapping-panels-raster-vector-field",h)},4265:(e,t,a)=>{a.d(t,{a:()=>n,d:()=>i,t:()=>s});const i=(e,t)=>{let a,i="idle";const n=async(...n)=>await new Promise(s=>{switch(i){case"flushed":i="idle",a?(clearTimeout(a),s(e(...n))):s(null);break;case"invoked":clearTimeout(a),i="idle",s(e(...n));break;case"cancelled":clearTimeout(a),i="idle",s(null);break;default:a&&clearTimeout(a),i="pending",a=setTimeout(()=>{i="idle",s(e(...n))},t)}});return n.flush=async function(...e){return i="flushed",await n(...e)},n.invoke=async function(...e){return i="invoked",await n(...e)},n.cancel=async function(...e){return i="cancelled",await n(...e)},n.getStatus=function(){return i},n},n=(e,t)=>{let a;return async(...i)=>await new Promise(n=>{a||(a=setTimeout(()=>{clearTimeout(a),a=void 0,n(e(...i))},t))})};function s(e){return new Promise(t=>setTimeout(t,e))}},65595:(e,t,a)=>{a.d(t,{c:()=>r,u:()=>o});var i=a(20936),n=a(1225),s=(a(54312),a(44345),a(55448),a(52797),a(34031),a(63438),a(5933),a(28927),a(83368),a(89704),a(5294),a(18423),a(96086),a(91813),a(21255),a(13078),a(21303),a(12627),a(56451),a(31521),a(23054),a(5077),a(23795),a(17902),a(87420),a(30161),a(81734),a(75698),a(10628),a(59640),a(64451),a(6176),a(83552));a(77462),a(49403),a(10281),a(83930),a(66617),a(10454),a(29614),a(94916),a(52554),a(2156),a(4038),a(49851),a(75054),a(15223),a(70169),a(47207),a(70852),a(48103),a(39423),a(85681),a(18444),a(42411),a(9767),a(38218),a(91914),a(86605),a(68196),a(440),a(46547),a(6238),a(7299);function r(e){e.selectedFields=[],e.layerFields=void 0,e.fields=void 0,e.hideLayerTitle=!1,e.supportsArcade=!1,e.stringFieldsCount=-1,e.dateFieldsCount=-1,e.numberFieldsCount=-1,e.containsFlow=!0,e.oneFeatureResponseStatus=n.s.MISSING,e.selectedAttribute=void 0,e.selectedAttributeText=void 0,e.selectedTypeValue=void 0,e.selectedValue=void 0,e.lastDefault=void 0,e.lastDefaults=void 0,e.dotColorSelected=void 0,e.backgroundStyleSelected=void 0,e.lastSettings=void 0,e.classedSymbolSelectedIdx=void 0,e.allUniqueValues=void 0,e.useFeatureReduction=void 0,e.symbolStylerConfig={},e.allowTimeSeriesConfiguration=!1,e.rasterInfo=void 0}function o(){const e=(0,s.Gk)(),t=e;e.manager.onLoad(()=>{t.smartMappingState=function(e,t){const a=l.get(e);if(a)return a;const n=(0,i.el)(e,t);return n&&"store"in n?(l.set(e,n.store),n.store):null}(e.el,"arcgis-map-config-smart-mapping")})}const l=new WeakMap},68828:(e,t,a)=>{a.d(t,{a:()=>s,c:()=>r});var i=a(68196),n=(a(52797),a(54312),a(44345),a(55448),a(34031),a(63438),a(5933),a(28927),a(83368),a(89704),a(5294),a(18423),a(96086),a(91813),a(21255),a(13078),a(21303),a(12627),a(1225));a(56451),a(23054),a(5077),a(23795),a(17902),a(87420),a(30161),a(81734),a(75698),a(10628),a(59640),a(64451),a(6176),a(83552),a(77462),a(49403),a(10281),a(83930),a(66617),a(10454),a(29614),a(94916),a(52554),a(2156),a(4038),a(49851),a(75054),a(15223),a(70169),a(47207),a(70852),a(48103),a(39423),a(85681),a(18444),a(42411),a(9767),a(38218),a(91914),a(31521),a(86605),a(440),a(46547),a(6238),a(7299);async function s(e){const{layer:t}=e,a=t,n="imagery"===a.type?a.rasterFunction??void 0:void 0;return await i.createRenderer({layer:a,rasterFunction:n})}async function r(e,t){const{layer:a}=e,s=a,r=(0,n.T)(e),o="imagery"===s.type?s.rasterFunction??void 0:void 0;return t=t||{},await i.createRenderer({layer:s,rasterFunction:o,style:t.style||r.style}).then(e=>{e.renderer.symbolTileSize=r.symbolTileSize;const t=(0,n.c)(r,"size");return e.renderer.visualVariables=(0,n.H)(e.renderer,"size")||[],e.renderer.visualVariables.push(t),e.renderer.flowRepresentation=r.flowRepresentation,e.renderer.inputUnit=r.inputUnit,e.renderer.outputUnit=r.outputUnit,e})}},75518:(e,t,a)=>{let i,n;function s(e){e.loading=!1}async function r(e,t){return function(e){e.loading=!0,n=!1,i&&clearTimeout(i),i=setTimeout(()=>{s(e),n=!0},6e4)}(t),await e.then(e=>{if(s(t),n)throw new Error("timeout");return e}).catch(e=>{throw s(t),e})}a.d(t,{r:()=>r})}}]);