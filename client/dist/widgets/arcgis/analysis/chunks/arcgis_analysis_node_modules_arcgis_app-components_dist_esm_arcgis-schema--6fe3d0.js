/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-schema--6fe3d0.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-schema--6fe3d0"],{4429:(e,t,i)=>{i.d(t,{a:()=>o,b:()=>h,c:()=>c,d:()=>d,e:()=>n,f:()=>a,g:()=>g,i:()=>u,m:()=>r,t:()=>s,u:()=>l});const a=(e,t)=>{let i,a="idle";const n=(...n)=>new Promise(c=>{switch(a){case"flushed":a="idle",i?(clearTimeout(i),c(e(...n))):c(null);break;case"invoked":clearTimeout(i),a="idle",c(e(...n));break;case"cancelled":clearTimeout(i),a="idle",c(null);break;default:i&&clearTimeout(i),a="pending",i=setTimeout(()=>(a="idle",c(e(...n))),t)}});return n.flush=function(...e){return a="flushed",n(...e)},n.invoke=function(...e){return a="invoked",n(...e)},n.cancel=function(...e){return a="cancelled",n(...e)},n.getStatus=function(){return a},n};function n(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function c(e){return null!=e}async function r(e,t){return await Promise.all([e,s(t)]),e}function s(e){return new Promise(t=>setTimeout(t,e))}const o=(e,t)=>Object.fromEntries((e||[]).map(e=>{const{key:i,data:a}=t(e);return[i,a]})),d=(e,t)=>e.length===t.length&&e.reduce((e,i)=>e&&t.indexOf(i)>-1,!0);function l(e,t){const i=[],a={};return e.forEach(e=>{const n=t(e);null==a[n]&&(a[n]=e,i.push(e))}),i}function h(e){const t={boolean:{},number:{},string:{}},i=[];return e.filter(e=>{let a=typeof e;return a in t?!t[a].hasOwnProperty(e)&&(t[a][e]=!0):!(i.indexOf(e)>=0)&&i.push(e)})}const g=(e,t)=>[...Array(Math.ceil(e.length/t))].map((i,a)=>e.slice(t*a,t+t*a)),u=(e,t)=>e.includes(t)},27219:(e,t,i)=>{i.d(t,{A:()=>a,C:()=>n,a:()=>c});const a="arcgis-schema-editor-category-row__drag-handle",n="arcgisSchemaEditorReinitializeSortable",c="arcgisSchemaEditorInternalSaveEdit"},45675:(e,t,i)=>{i.r(t),i.d(t,{arcgis_schema_editor_category_row:()=>s});var a=i(87849),n=i(4429),c=i(46227),r=i(27219);const s=class{constructor(e){(0,a.r)(this,e),this.arcgisSchemaEditorRowInternalDragHandleInteract=(0,a.c)(this,"arcgisSchemaEditorRowInternalDragHandleInteract",7),this.arcgisSchemaEditorInternalDeleteClick=(0,a.c)(this,"arcgisSchemaEditorInternalDeleteClick",7),this.arcgisSchemaEditorInternalExpandClick=(0,a.c)(this,"arcgisSchemaEditorInternalExpandClick",7),this.arcgisSchemaEditorInternalCancelClick=(0,a.c)(this,"arcgisSchemaEditorInternalCancelClick",7),this.arcgisSchemaEditorInternalSaveEditClick=(0,a.c)(this,"arcgisSchemaEditorInternalSaveEditClick",7),this.arcgisSchemaEditorRowUserDefaultsWarningClick=(0,a.c)(this,"arcgisSchemaEditorRowUserDefaultsWarningClick",7),this.handlePostSaveEvent=e=>{const{rootCategoryPath:t,category:i}=this,{newPath:a}=e.detail,n=i.path;if(n===a||n.replace(t.toLowerCase(),"")===a){this.inlineEditableRef.shadowRoot.querySelector(".enable-editing-button").setFocus()}},this.onCancelEdit=()=>{const{arcgisSchemaEditorInternalCancelClick:e,isNewCategory:t}=this;t||(this.isEditing=!1),this.editedCategoryTitle=this.category.title,e.emit()},this.onSaveEdit=async()=>{const{category:e,editInputRef:t,editedCategoryTitle:i,saveNewTitle:a,setInvalid:n,isNewCategory:c}=this;if(!i)return n(),!1;if(i===e.title&&!c)return this.isEditing=!1,!0;t.status="idle";try{return await a({newTitle:i.trim(),path:e.path,categoryCount:e.count})?(c||(this.isEditing=!1),!0):(n(),!1)}catch(e){return c||(this.isEditing=!1),console.error(e),!1}},this.postSaveEdit=async()=>{await(0,n.t)(200);const e=this.category.path.replace(/\/[^/]+$/,`/${this.editedCategoryTitle.trim()}`),t=new CustomEvent(r.a,{detail:{newPath:e}});window.dispatchEvent(t)},this.setInvalid=()=>{const{editInputRef:e}=this;e.status="invalid",e.setFocus()},this.category=void 0,this.i18n=void 0,this.rootCategoryPath=void 0,this.isNewCategory=!1,this.canEditCategory=void 0,this.canDeleteCategory=void 0,this.isCollapsible=void 0,this.isCollapsed=void 0,this.saveNewTitle=void 0,this.getDisabledWarning=void 0,this.isEditing=this.isNewCategory,this.editedCategoryTitle=this.category.title,this.isInteracting=!1}async reset(){const{isNewCategory:e,category:t,canEditReason:i}=this;e&&!0===i&&(this.editedCategoryTitle=t.title,this.editInputRef.status="idle",this.isEditing=!1,await(0,n.t)(50),this.isEditing=!0,this.editInputRef.setFocus())}async setFocus(){this.editInputRef.setFocus()}componentWillLoad(){var e,t;this.canEditReason=null===(t=null===(e=this.canEditCategory)||void 0===e?void 0:e.call(this,this.category))||void 0===t||t;const i=(0,c.g)();this.expandCollapseButtonId=`expand-collapse-button-${i}`,this.deleteButtonId=`delete-button-${i}`,this.cantEditIconId=`cant-edit-icon-${i}`,window.addEventListener(r.a,this.handlePostSaveEvent)}disconnectedCallback(){window.removeEventListener(r.a,this.handlePostSaveEvent)}render(){const{category:e,isCollapsed:t,isEditing:i,isCollapsible:c,canDeleteCategory:s,canEditReason:o,i18n:d,editedCategoryTitle:l,onCancelEdit:h,onSaveEdit:g,arcgisSchemaEditorInternalExpandClick:u,isNewCategory:p,getDisabledWarning:f,postSaveEdit:m}=this,y=e.count,b=i?l:`${l} ${y?`(${y})`:""}`,E=!0===o,w=E&&!i&&!p&&s,C=null==f?void 0:f(e.path),v=Boolean(C);return(0,a.h)(a.H,{key:"7544c5d97c0b59adeeba5768725f4fdfd99236a9"},(0,a.h)("div",{key:"5315cc64560459394d87c491c8055b7938d54284",class:"arcgis-schema-editor-category-row"},!p&&!i&&(0,a.h)("calcite-button",{key:"36712711783eeb9112dca165c51f293936961f67",appearance:"transparent",kind:"neutral",iconStart:"drag",disabled:v,class:v?"":r.A,onFocus:()=>this.isInteracting=!0,onBlur:()=>this.isInteracting=!1,onKeyDown:t=>{this.isInteracting&&this.arcgisSchemaEditorRowInternalDragHandleInteract.emit({category:e,event:t})}}),c&&(0,a.h)(a.F,{key:"c0d5f87305ab6f078aaf56b52af5d951da1be0c2"},(0,a.h)("calcite-button",{key:"7643d1be2c4820f1c7c2175a59f69ff6426b4bac",appearance:"transparent",kind:"neutral",onClick:()=>u.emit({isCollapsed:!t}),iconStart:t||i?"chevron-up":"chevron-down",class:"cta",id:this.expandCollapseButtonId}),(0,a.h)("calcite-tooltip",{key:"f0611898828d735b3c6daf912cfa9f860df7b2c2",referenceElement:this.expandCollapseButtonId},(0,a.h)("div",{key:"25d3e3abbdc12354a0519ed9610dbb2efb6f1116",class:"btn-popover"},t?d.categoryItem.expand:d.categoryItem.collapse))),E?(0,a.h)("calcite-inline-editable",{class:"arcgis-schema-editor-category-row__inline-input",controls:!0,editingEnabled:i,disabled:v,ref:e=>this.inlineEditableRef=e,afterConfirm:async()=>{if(!1===await g())throw new Error;m()},onCalciteInlineEditableEditCancel:e=>{e.stopPropagation(),h()},onCalciteInternalInlineEditableEnableEditingChange:async()=>{this.isEditing=!0,await(0,n.t)(200),this.editInputRef.setFocus()}},(0,a.h)("calcite-input",{value:b,onCalciteInputInput:e=>this.editedCategoryTitle=e.currentTarget.value,required:!0,ref:e=>{e&&(this.editInputRef=e)},label:d.categoryItem.editCategory,onKeyDown:async e=>{switch(e.key){case"Escape":h();break;case"Enter":await g()&&m()}},validationMessage:d.categoryItem.missingTitleMessage})):(0,a.h)(a.F,null,(0,a.h)("div",{class:"arcgis-schema-editor-category-row__inline-input"},b),(0,a.h)("calcite-action",{class:"arcgis-schema-editor-category-row__cant-edit-reason",icon:"exclamation-mark-triangle-f",appearance:"transparent",label:o,id:this.cantEditIconId,text:"",textEnabled:!1}),(0,a.h)("calcite-tooltip",{referenceElement:this.cantEditIconId},(0,a.h)("div",{class:"btn-popover"},o))),w&&(0,a.h)(a.F,{key:"396412ed1ce66bfa8c3a9d5941b8c26d5230f252"},(0,a.h)("calcite-button",{key:"946870c4264b9be4bb2803dbe58192353d96ae68",appearance:"transparent",kind:"danger",disabled:v,onClick:()=>this.arcgisSchemaEditorInternalDeleteClick.emit({path:e.path,categoryCount:y}),iconStart:"trash",class:"cta",id:this.deleteButtonId}),(0,a.h)("calcite-tooltip",{key:"973a58a016f7a84b464c5bf4570722ed55418f60",referenceElement:this.deleteButtonId},(0,a.h)("div",{key:"119895cb2641442a27ec939b3dfdf80cf0845436",class:"btn-popover"},d.categoryItem.deleteCategory))),v&&(0,a.h)(a.F,{key:"ecb465acc0a886c128e6af3ea4f18aa68e50a914"},(0,a.h)("calcite-action",{key:"c536715cf9a2e79beec5ed91a6a19747c4f3a648",class:"arcgis-schema-editor-category-row__cant-edit-reason",icon:"exclamation-mark-triangle-f",appearance:"transparent",id:this.cantEditIconId,text:C,onClick:()=>{this.arcgisSchemaEditorRowUserDefaultsWarningClick.emit()}}),(0,a.h)("calcite-tooltip",{key:"ba3d55c59b80af543982f880eb51bed1c4d3b5f7",referenceElement:this.cantEditIconId},(0,a.h)("div",{key:"dced991484d9f49506e0b8147437514450c30994",class:"btn-popover"},C)))))}get el(){return(0,a.a)(this)}};s.style=".arcgis-schema-editor-category-row{display:flex;align-items:center;background-color:var(--calcite-color-foreground-1);height:2.5rem}.arcgis-schema-editor-category-row--editing{padding-left:0.5rem;padding-right:0.5rem}.arcgis-schema-editor-category-row__inline-input{font-size:0.875rem;width:100%}.arcgis-schema-editor-category-row__cta{display:flex;align-items:center;justify-content:center;height:100%;width:2.5rem}.arcgis-schema-editor-category-row__drag-handle{height:100%}.arcgis-schema-editor-category-row__btn-popover{white-space:nowrap;padding-left:0.5rem;padding-right:0.5rem;padding-top:0.25rem;padding-bottom:0.25rem}.arcgis-schema-editor-category-row__cant-edit-reason{--calcite-ui-icon-color:var(--calcite-color-status-warning)}.arcgis-schema-editor-category-row--dragging{opacity:0.25}"},46227:(e,t,i)=>{i.d(t,{g:()=>a});const a=()=>[2,1,1,1,3].map(e=>{let t="";for(let i=0;i<e;i++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t}).join("-")}}]);