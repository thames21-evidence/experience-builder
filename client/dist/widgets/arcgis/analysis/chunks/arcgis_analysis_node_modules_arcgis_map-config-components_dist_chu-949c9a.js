/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_chu-949c9a.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_chu-949c9a"],{42855:(e,t,n)=>{n.d(t,{a:()=>s,f:()=>a,l:()=>r,s:()=>i});var a=(e=>(e.expression="expression/",e.raster="Raster.",e.relationship="relationships/",e))(a||{}),r=(e=>(e.cluster="cluster",e.feature="feature",e.mapNotes="mapNotes",e))(r||{}),i=(e=>(e.catalog="catalog",e.catalogFootprint="catalog-footprint",e.csv="csv",e.feature="feature",e.geojson="geojson",e.imagery="imagery",e.imageryTile="imagery-tile",e.knowledgeGraphSublayer="knowledge-graph-sublayer",e.mapImage="map-image",e.ogcFeature="ogc-feature",e.orientedImagery="oriented-imagery",e.parquet="parquet",e.scene="scene",e.stream="stream",e.subtype="subtype",e.tile="tile",e.voxel="voxel",e.wcs="wcs",e.wfs="wfs",e.wms="wms",e))(i||{}),s=(e=>(e.bigInteger="big-integer",e.blob="blob",e.date="date",e.dateOnly="date-only",e.double="double",e.globalId="global-id",e.guid="guid",e.integer="integer",e.long="long",e.number="number",e.oid="oid",e.single="single",e.smallInteger="small-integer",e.string="string",e.timeOnly="time-only",e.timestampOffset="timestamp-offset",e))(s||{})},62893:(e,t,n)=>{n.d(t,{a:()=>w,b:()=>N,c:()=>I,d:()=>f,e:()=>b,f:()=>T,g:()=>x,h:()=>u,i:()=>v,j:()=>c,k:()=>g,l:()=>P,m:()=>d,n:()=>h,o:()=>y,p:()=>p,t:()=>m,u:()=>F});var a=n(42855),r=n(66228),i=n(71384),s=n(20936),o=n(83552);const l=[{value:"centuries",appliesTo:["centuries"]},{value:"decades",appliesTo:["centuries","decades"]},{value:"years",appliesTo:["centuries","decades","years"]},{value:"months",appliesTo:["decades","years","months","months-hours"]},{value:"weeks",appliesTo:["years","months","weeks","months-hours"]},{value:"days",appliesTo:["months","weeks","days","months-hours"]},{value:"hours",appliesTo:["weeks","days","hours","months-hours"]},{value:"minutes",appliesTo:["days","hours","minutes","seconds"]},{value:"seconds",appliesTo:["hours","minutes","seconds"]}],u=10,d=6e4,f=2e3,c=9999;function m(e,t){const n=e?.start,a=e?.end,r=t?.start,i=t?.end,s=n&&r&&n?.getTime()===r?.getTime(),o=a&&i&&a?.getTime()===i?.getTime();return!(n&&r||!o)||!(a&&i||!s)||s&&o}function p(e,t){if(!e)return;const n=e?new Date(e.toLocaleString("en-US",{timeZone:"system"!==t&&"unknown"!==t?t:void 0})):new Date(Date.now()),a=n.getFullYear();let r=`${n.getMonth()+1}`,i=`${n.getDate()}`;return r.length<2&&(r=`0${r}`),i.length<2&&(i=`0${i}`),[a,r,i].join("-")}function h(e,t){if(!e)return;const n=e?e.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",timeZone:"system"!==t&&"unknown"!==t?t:void 0}):"00:00:00";return 0===e.getHours()||n.includes("24:")?n.replace("24:","00:"):n}function y(e,t,n){const a=function(e,t,n){if(n&&"system"!==n&&"unknown"!==n&&t){const a=new Date(t.toLocaleString("en-US",{timeZone:n})),r=a.getTime()-t.getTime(),i=e?e.split(":"):["00","00"],s=Number.parseInt(i[0]??0),o=Number.parseInt(i[1]??0),l=Number.parseInt(i[2]??0);return a.setHours(s),a.setMinutes(o),a.setSeconds(l),new Date(a.getTime()-r).toLocaleString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"})}return e}(t,e,n)?.split(":")||["00","00","00"],r=a.length>0?Number.parseInt(a[0]):0,i=a.length>1?Number.parseInt(a[1]):0,s=a.length>2?Number.parseInt(a[2]):0;return e?new Date(e.getFullYear(),e.getMonth(),e.getDate(),r,i,s):void 0}function g(){return l.map(e=>e.value)}function T(e){if(!e?.start||!e.end)return _(1,36e5,"hours");const t=u,n=(e.end.getTime()-e.start.getTime())/t,a=31104e8;if(n>a)return _(n,a,"centuries");const r=31104e7;if(n>r)return _(n,r,"decades");const i=31104e6;if(n>i)return _(n,i,"years");const s=2592e6;if(n>s)return _(n,s,"months");const o=6048e5;if(n>o)return _(n,o,"weeks");const l=864e5;if(n>l)return _(n,l,"days");const d=36e5;if(n>d)return _(n,d,"hours");if(n>6e4)return _(n,6e4,"minutes");return n>1e3?_(n,1e3,"seconds"):_(n,1,"minutes")}function w(e,t){if(!e||!t)return!1;{const n=e.interval&&t.interval,a=e.count&&t.count;return!(!n&&!a)&&!!(n&&e.interval.value===t.interval.value&&e.interval.unit===t.interval.unit||a&&e.count===t.count)}}function v(e,t){const n=!(!(P(e)&&e.useViewTime&&e?.timeInfo?.fullTimeExtent?.start&&!Number.isNaN(e.timeInfo.fullTimeExtent.start.getTime())&&e?.timeInfo?.fullTimeExtent?.end)||Number.isNaN(e.timeInfo.fullTimeExtent.end.getTime()));let a=!1;return t&&(a="sublayers"in e?E(e)||Array.from(e.sublayers)?.some(e=>E(e)):E(e)),n||a}function P(e){return"useViewTime"in e&&"timeInfo"in e}function E(e){if((0,r.a)(e)===a.s.mapImage)return!1;const t=e.renderer?.visualVariables?.some(e=>e.valueExpression?.includes(i.a)),n=e.renderer?.valueExpression?.includes(i.a);return t||n}function b(e){return N(e)&&(0,r.i)(e.visibilityTimeExtent?.start)&&(0,r.i)(e.visibilityTimeExtent?.end)&&!Number.isNaN(e?.visibilityTimeExtent?.start?.getTime())&&!Number.isNaN(e?.visibilityTimeExtent?.end?.getTime())}function N(e){return"visibilityTimeExtent"in e}function _(e,t,n){return{value:Math.round(e/t),unit:n}}function x(e){return!(0,r.i)(e.start)&&(0,r.i)(e.end)?"cumulative-from-start":e.start?.getTime()===e.end?.getTime()?"instant":"time-window"}function F(){const e=(0,o.Gk)(),t=e;e.manager.onLoad(()=>{t.timeSliderConfigState=function(e,t){const n=A.get(e);if(n)return n;const a=(0,s.el)(e,t);return a&&"store"in a?(A.set(e,a.store),a.store):null}(e.el,"arcgis-map-config-time-slider")})}const A=new WeakMap;function I(e){e.view=void 0,e.fullTimeExtent=void 0,e.timeDisplayMode="time-window",e.stops=void 0,e.timeSliderEnabled=!1,e.playRate=f}},66228:(e,t,n)=>{n.d(t,{a:()=>T,b:()=>x,c:()=>M,d:()=>_,e:()=>F,f:()=>O,g:()=>y,h:()=>g,i:()=>p,j:()=>h,k:()=>P,l:()=>L,m:()=>b,n:()=>c,o:()=>E,p:()=>S,q:()=>I,r:()=>R,s:()=>v,t:()=>N,u:()=>w});var a=n(63438),r=n(18423),i=n(96086),s=n(91813),o=n(21255),l=n(13078),u=n(21303),d=n(12627),f=n(42855);const c=["feature","scene","geojson","csv","subtype-sublayer","oriented-imagery","catalog-footprint","sublayer"],m=["feature"];function p(e){return null!=e}function h(e,t,n){const a=t.fieldName;if(a.includes(f.f.expression)){const e=n.get(a);return e?.title?e.title:a}return v(e)&&e.getFieldConfiguration(a)?e.getFieldAlias(a)||a:t.label||a}async function y(e){return new Map((await P(e)).filter(e=>e.visible).map(e=>[e.name,e]))}function g(e){const t=new Map;return e?.expressionInfos&&e.expressionInfos.forEach(e=>{const n=`${f.f.expression}${e.name}`;t.set(n,e)}),t}function T(e){return"map-image"===e?.layer?.type?f.s.mapImage:"subtype-sublayer"===e?.type?f.s.subtype:"tile"===e?.layer?.type?f.s.tile:"scene"===e?.type?f.s.scene:"ogc-feature"===e?.type?f.s.ogcFeature:"imagery"===e?.type?f.s.imagery:"imagery-tile"===e?.type?f.s.imageryTile:"wfs"===e?.type?f.s.wfs:"wcs"===e?.type?f.s.wcs:"wms"===e?.layer?.type?f.s.wms:"csv"===e?.type?f.s.csv:"geojson"===e?.type?f.s.geojson:"stream"===e?.type?f.s.stream:"oriented-imagery"===e?.type?f.s.orientedImagery:"catalog"===e?.type?f.s.catalog:"catalog-footprint"===e?.type?f.s.catalogFootprint:"knowledge-graph-sublayer"===e?.type?f.s.knowledgeGraphSublayer:"voxel"===e?.type?f.s.voxel:"parquet"===e?.type?f.s.parquet:f.s.feature}function w(e){const t=T(e);let n;return t===f.s.wms||t===f.s.mapImage?n=e?.layer.version:(t===f.s.imagery||t===f.s.feature||t===f.s.scene)&&(n=e.version),Number.parseFloat(n)}function v(e){return"fieldConfigurations"in e&&m.includes(e.type)}async function P(e){return await new Promise((t,n)=>{switch(T(e)){case f.s.feature:case f.s.ogcFeature:case f.s.stream:t(e.fields);break;case f.s.mapImage:{const a=e,r=a?.layer;r?.portalItem&&r.url.includes("https://demographics")&&r.url.includes(".arcgis.com")?r.portalItem?.fetchData().then(e=>{if(e?.thematicGroup){const n=new Map(a.fields.map(e=>[e.name,e])),r=e.thematicGroup.fieldNames,i=[];r.forEach(e=>{n.has(e)&&i.push(n.get(e))}),t(i)}else t(a.fields)}).catch(e=>{n(new Error(e))}):t(a.fields);break}case f.s.imagery:case f.s.imageryTile:case f.s.wcs:t(e.rasterFields);break;default:t("fields"in e?e.fields??[]:[])}})}function E(e){if(e)switch(e.type){case"point":return e;case"extent":return e.center;case"polygon":return e.centroid;case"multipoint":case"polyline":return e.extent?.center;default:return}}function b(e){return Number((100*(1-e)).toFixed(1))}function N(e){return Number((1-e/100).toFixed(3))}const _=(e,t)=>{const n=[];return e?.fieldInfos?.forEach(e=>{e.fieldName?.includes(f.f.expression)||n.push({name:e.fieldName,alias:e.label,type:"string"})}),n},x=async(e,t)=>{const n=new d.default;return n.geometry=t.extent,n.mapExtent=t.extent,n.returnGeometry=!0,n.tolerance=6,n.layerOption="popup",n.width=t.width,n.height=t.height,n.layerIds=[e.id],(await u.identify(e.layer.url,n))?.results?.[0]?.feature},F=async(e,t,n)=>{const a=await(await e.whenLayerView(t)).queryAggregates();return await A(n,a.features?.[0])},A=async(e,t)=>{let n;if(t)n=t.clone();else{n=new a.default;const t=_(e);if(t?.length){const e={};t.forEach(t=>{e[t.name]=""}),n.attributes=e}const i=new r.default;n.geometry=i}return n};function I(e,t){const n=t.startsWith("#"),a=t.startsWith(".");for((a||n)&&(t=t.slice(1));e;){if(n){if(e.id===t)return e}else if(a){if(e.classList.contains(t))return e}else if(e.tagName.toLowerCase()===t.toLowerCase())return e;e=e.parentElement??e.getRootNode()?.host??void 0}}async function M(e){if(T(e)===f.s.stream)return await Promise.resolve("point");if(e.geometryType)return await Promise.resolve(e.geometryType);if(T(e)===f.s.mapImage&&e?.layer?.sourceJSON?.layers){const t=e.layer?.sourceJSON.layers.find(t=>{if(t.id===e.id)return t})?.geometryType?.toLowerCase();if(t)return t.indexOf("point")>-1?await Promise.resolve("point"):t.indexOf("line")>-1?await Promise.resolve("polyline"):t.indexOf("polygon")>-1?await Promise.resolve("polygon"):await Promise.resolve(t);{const t=e?.layer?.findSublayerById(e.id);if(t){const e=await(t?.createFeatureLayer());return e?(await e.load(),await Promise.resolve(e?.geometryType)):void await Promise.resolve()}return void await Promise.resolve()}}await Promise.resolve()}function L(e,t,n){let a="";if(/^raster.(?:item|service)pixelvalue/iu.test(e))a="number";else if(t.has(e)){const n=t.get(e);a=n.type?n.type.toLowerCase():""}else if(n.has(e)){const t=n.get(e);a=t.returnType?t.returnType.toLowerCase():""}else a="number";return a}async function O(e,t){try{const n=T(e);if(n===f.s.mapImage&&e.layer.version>=10.5&&!e.layer.capabilities?.operations?.supportsQuery&&e.layer.capabilities?.operations?.supportsIdentify)return{features:[await x(e,t)||await D(e,t)]};if(n===f.s.scene&&!e.capabilities?.operations?.supportsQuery)return{features:[await D(e,t)]};const a=n===f.s.ogcFeature||n===f.s.stream?await t.whenLayerView(e):e,r=a.createQuery();r.where=a.definitionExpression||"1=1",r.outFields=["*"],r.returnM="hasM"in e&&e.hasM,r.returnZ="hasZ"in e&&e.hasZ,r.outSpatialReference=t.spatialReference,r.returnGeometry=!0,(a.sourceJSON?.advancedQueryCapabilities?.supportsPagination||n===f.s.ogcFeature)&&(r.start=0,r.num=1),r.outSpatialReference=t.spatialReference;const i=await a.queryFeatures(r);return i?.features?.length||(i.features[0]=await D(e,t)),i}catch(e){console.error(e)}}async function D(e,t){return await new Promise(n=>{const r=new a.default;if(e.fields?.length){const t={};e.fields.forEach(e=>{t[e.name]=e.defaultValue}),r.attributes=t}const u=t.extent;let d;"polygon"===e.geometryType?d=o.default.fromExtent(u):"point"===e.geometryType?d=u.center.clone():"multipoint"===e.geometryType?d=new i.default({points:[[u.center.x,u.center.y]],spatialReference:u.center.spatialReference.clone()}):"polyline"===e.geometryType?(d=new s.default({spatialReference:t.spatialReference.clone()}),d.addPath([[u.xmin,u.ymin],[u.xmax,u.ymax]])):"mesh"===e.geometryType&&(d=l.default.createBox(u.center.clone(),{size:{width:50,height:50,depth:50}})),r.geometry=d,n(r)})}function R(e){return T(e)===f.s.tile&&"url"in e&&"sublayer"===e.type&&-1===e.url?.indexOf(e.parent.url)&&!!e.fields?.length}function S(e){return T(e)===f.s.tile&&"url"in e&&"sublayer"===e.type&&-1!==e.url?.indexOf(e.parent.url)&&!!e.fields?.length}},71384:(e,t,n)=>{n.d(t,{a:()=>a,g:()=>r});const a="timeProperties";function r(e){return`// To configure a time series visualization using this template, data for this layer should be structured so that\n// each row represents a static feature with a fixed location, such as a country boundary or a city location.\n// The attribute table should have two or more fields that represent the same data attributes at different points in time for each feature.\n// Field names should refer to a specific attribute and a specific point in time, such as population in a specific year.\n// e.g. POP1990, POP2000, POP2010, POP2020, POP2030\n\n// There are four areas of this template where modification is necessary for the template to work with your layer\n// Two are required, and two are optional. \n\n// Examine your data and the details below to edit the template accordingly.\n\nvar FIELD_NAME_PATTERN = "POP{Y}"; // Required - Update this to match your data. See Lines 17-49 for details.\nExpects($feature, "POP*"); // Required - Update this to match your data. See Lines 51-63 for details.\nvar DEFAULT_FIELD_NAME = ""; // Optional - See Lines 65-79 for details.\nvar RESULT_FORMAT_PATTERN = "${e?.resultFormatPattern??"#,###.00"}"; // Optional - Update this to match your data. See Lines 81-93 for details.\n\n// FIELD_NAME_PATTERN\n//\n// The field name pattern is used to create the field name from the time slider values.\n// Patterns are defined using the following syntax: fieldName{pattern}\n//\n// EXAMPLE 1: given fields with names Cases_2023_10_01, Cases_2023_10_02, Cases_2023_10_03, etc., the field name pattern would be:\n// var FIELD_NAME_PATTERN = "Cases_{Y_MM_DD}";\n//\n// EXAMPLE 2: given fields with names POP2000, POP2010, POP2020, etc., the field name pattern would be:\n// var FIELD_NAME_PATTERN = "POP{Y}";\n//\n// The following patterns are supported:\n//\n// D: Day of the month, not padded (1 - 31)\n// DD: Day of the month, padded (01 - 31)\n// DDD: Ordinal day of the year (1 - 365)\n// d: Day of the week (1 - 7)\n// ddd: Abbreviated day of the week (e.g. Mon)\n// dddd: Full day of the week (e.g. Monday)\n// M: Month number (1 - 12)\n// MM: Month number, padded (01 - 12)\n// MMM: Abbreviated month name (e.g. Jan)\n// MMMM: Full month name (e.g. January)\n// Y: Full year\n// YY: Two-digit year\n// h: Civilian hours, not padded (1 - 12)\n// hh: Civilian hours, padded (01 - 12)\n// H: Military hours, not padded (0 - 23)\n// HH: Military hours, padded (00 - 23)\n// m: Minutes, not padded (0 - 59)\n// mm: Minutes, padded (00 - 59)\n// s: Seconds, not padded (0 - 59)\n// ss: Seconds, padded (00 - 59)\n\n// EXPECTS\n//\n// Copy and paste the part of the field pattern common to all fields\n// followed by an asterisk (*) into the second parameter of the Expects function.\n// This must be a raw text value like "POP*", not a variable name like FIELD_NAME_PATTERN.\n// \n// EXAMPLE 1: given fields with names Cases_2023_10_01, Cases_2023_10_02, Cases_2023_10_03, etc.\n//   - Expects($feature, \u201cCases_*\u201d);  // includes all fields that start with "Cases_"\n//   - Expects($feature, \u201cCases_2023*\u201d); // includes all Cases fields for the year 2023\n// \n// EXAMPLE 2: given fields with names POP2000, POP2010, POP2020, etc.\n//   - Expects($feature, "POP*"); // includes all fields that start with "POP"\n//   - Expects($feature, "POP2*"); // includes all "POP" fields for all years after 2000\n\n// DEFAULT_FIELD_NAME\n//\n// The field name to return if the time slider is closed.\n// Suggested values might include the first field in the time series,\n// the most recent field in the time series, or possibly an\n// aggregated value, such as TOTAL_POPULATION.\n// \n// EXAMPLE 1: The first field in the time series. Given fields with names POP2000, POP2010, POP2020, TOTAL_POPULATION,\n// var DEFAULT_FIELD_NAME = "POP2000";\n//\n// EXAMPLE 2: An aggregated value such as the total population. Given fields with names POP2000, POP2010, POP2020, TOTAL_POPULATION,\n// var DEFAULT_FIELD_NAME = "TOTAL_POPULATION";\n//\n// Note - If you defined a default field, be sure to include it in the Expects function as a third parameter.\n// e.g. Expects($feature, "POP*", "TOTAL_POPULATION");\n\n// RESULT_FORMAT_PATTERN\n//\n// The result format pattern is used to format the result of the calculation.\n// Patterns are defined using the following syntax: #,###.00\n// This should only be defined for formatting numeric values in labels or popups.\n// If using for symbology/layer styles, or the field data type\n// is a string, then leave this value empty.\n//\n// EXAMPLE 1: if returning a numeric value in a label,\n// var RESULT_FORMAT_PATTERN = "#,###"; // formats the value with commas and rounded to nearest integer\n// \n// EXAMPLE 2: if returning a numeric value in a popup,\n// var RESULT_FORMAT_PATTERN = "#,###.00"; // formats the value with commas and two decimal places\n\nfunction fieldsWithPatternFilter(field) {\n  var prefix = Front(Split(FIELD_NAME_PATTERN, "{"));\n  var suffix = Back(Split(FIELD_NAME_PATTERN, "}"));\n  var patternToFind = DefaultValue(prefix, suffix);\n  return Find(patternToFind, field.name) > -1;\n}\n\nfunction fieldsWithPatternMap(field) {\n  return field.name;\n}\n\nfunction getAllFieldsFromPattern() {\n  var fields = Schema($feature).fields;\n  return Sort(\n    Map(Filter(fields, fieldsWithPatternFilter), fieldsWithPatternMap)\n  );\n}\n\nfunction getFieldNameFromTimeProperties(dateValue, pattern) {\n  var fieldName = pattern;\n\n  var startPosition = Find("{", fieldName);\n  while (startPosition > -1) {\n    var startIndex = Find("{", fieldName, startPosition);\n    var endIndex = Find("}", fieldName, startIndex);\n    var searchText = Mid(fieldName, startIndex, endIndex - startIndex + 1);\n    var dateText = Text(dateValue, searchText);\n    fieldName = Replace(fieldName, searchText, dateText);\n    startPosition = Find("{", fieldName, endIndex);\n  }\n  fieldName = Replace(Replace(fieldName, "{", ""), "}", "");\n  return fieldName;\n}\n\nvar hasCurrentStart = HasValue($view, ["timeProperties", "currentStart"]);\nvar hasCurrentEnd = HasValue($view, ["timeProperties", "currentEnd"]);\n\nvar hasTimeProperties = hasCurrentStart || hasCurrentEnd;\n\nif (!hasTimeProperties) {\n  if (!IsEmpty(DEFAULT_FIELD_NAME) && HasKey($feature, DEFAULT_FIELD_NAME)) {\n    return $feature[DEFAULT_FIELD_NAME];\n  }\n  var firstField = Front(getAllFieldsFromPattern());\n  return $feature[firstField];\n}\n\nvar currentValue = DefaultValue(\n  $view.timeProperties.currentEnd,\n  $view.timeProperties.currentStart\n);\n\nfunction getValueAtInstant() {\n  var fieldName = getFieldNameFromTimeProperties(\n    currentValue,\n    FIELD_NAME_PATTERN\n  );\n  if (HasValue($feature, fieldName)) {\n    var value = $feature[fieldName];\n    return value;\n  }\n  return null;\n}\n\nfunction formatResult(value) {\n  if (IsEmpty(value)) {\n    return null;\n  }\n  if (IsEmpty(RESULT_FORMAT_PATTERN)) {\n    return value;\n  }\n  return Text(value, RESULT_FORMAT_PATTERN);\n}\n\nvar result = getValueAtInstant();\nreturn formatResult(result);`}}}]);