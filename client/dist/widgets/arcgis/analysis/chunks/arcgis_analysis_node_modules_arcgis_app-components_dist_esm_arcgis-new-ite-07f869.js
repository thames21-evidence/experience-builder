/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-new-ite-07f869.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-new-ite-07f869"],{3826:(e,t,a)=>{a.d(t,{a:()=>n,b:()=>s,c:()=>l,d:()=>i});const i=(0,a(37762).c)({typeKeywords:[],customParameters:[],analyzedLocationTypes:[],allowStoredAuth:!0,isSecured:null,checkAuth:!1}),n=i.state,s=i.state,l=i.state},10556:(e,t,a)=>{a.d(t,{a:()=>r,b:()=>c,f:()=>s,i:()=>o,m:()=>l});var i=a(4429),n=a(15912);function s(e,t){let a;a=t?t.map(e=>e.type):Object.keys(n.a);let i=[];return a.forEach(t=>{var a;(null===(a=n.a[t].fileExt)||void 0===a?void 0:a.indexOf(e))>=0&&i.push(n.a[t])}),i}function l(e){return e?(0,i.b)(e.flatMap(e=>{var t;return null===(t=n.a[e])||void 0===t?void 0:t.fileExt}).filter(e=>!!e)):null}const o=e=>e/1024/1024>50,r=e=>e/1024/1024>20,c=e=>e/1024/1024>10},11597:(e,t,a)=>{a.r(t),a.d(t,{arcgis_new_item_pages_layer_upload:()=>u});var i=a(87849),n=a(29599),s=a(59317),l=a(24869),o=a(3826),r=a(95878),c=a(10556),d=a(61467);a(83692),a(931),a(93814),a(41473),a(54251),a(37762),a(15912);const u=class{constructor(e){(0,i.r)(this,e),this.newItemUpdatePage=(0,i.c)(this,"newItemUpdatePage",7),this.allowedExtensions=[],this.alertActive=void 0}componentWillLoad(){this.i18n=r.u.i18n.layerUpload;const{portal:e}=s.c,t={"Tile Package":"tileLayer","3DTiles Package":"tileLayer","Vector Tile Package":"tileLayer","Service Definition":"tileLayer","Scene Package":"sceneLayer"};switch("file"===o.a.newItemMode&&(o.a.newItemMode=t[o.a.type]),this.reset(),o.a.newItemMode){case"tileLayer":if("tiles"===o.a.tileLayerPublishType){this.allowedExtensions=(0,n.j)(e)?["tpkx","sd"]:["tpk","tpkx","sd"];break}this.allowedExtensions=["vtpk"];break;case"sceneLayer":this.allowedExtensions=this.getAllowedExtensionsForSceneLayer(o.a.addSceneLayerType);break;default:this.allowedExtensions=[]}}async navigateToNextPage(){this.alertActive=!0}getAllowedExtensionsForSceneLayer(e){const{portal:t}=s.c;switch(e){case"gaussian":return["3tz"];case"object3d":return["slpk","spk","3tz",...t.isPortal?[]:["zip"]];case"mesh":return["slpk","spk","3tz"];case"pointCloud":case"voxel":case"building":case"point":return["slpk","spk"];default:return[]}}async fileSelectHandler(e){var t;this.alertActive=!1;const a=null===(t=e.detail)||void 0===t?void 0:t.file;let i=[],n="itemProperties";const r="sceneLayer"===o.a.newItemMode;(r||"tileLayer"===o.a.newItemMode)&&(n="publishSelect");const{title:u,fileName:p,extension:f}=(0,l.s)(a);r&&"3tz"===f&&(o.a.tileLayerPublishType="3dTiles"),"3dTiles"===o.a.tileLayerPublishType&&(o.a.tilesLayer3dType=(0,d.g)(o.a.addSceneLayerType)),o.a.initialTitle=u,o.a.file=a,o.a.fileName=p,o.a.newItemMode="file",o.a.extension=f;const h=(0,c.f)(f);if(1===h.length){const e=h[0].type;o.a.type=e,this.newItemUpdatePage.emit(n)}else"zip"===f&&r&&(o.a.addZippedSceneLayer=!0,o.a.type="Scene Package",i.push("File Geodatabase"),s.c.allowedItemTypes=i,this.newItemUpdatePage.emit("zipSelect"))}reset(){(o.a.addZippedSceneLayer||o.a.addSceneLayerType)&&(o.a.newItemMode="sceneLayer")}render(){var e,t,a,n;const{i18n:l,allowedExtensions:c}=this,{portal:d,config:u,user:p,userLicensedItems:f}=s.c,h="sceneLayer"!==o.a.newItemMode||d.isPortal?l.tileLayerHeader:l.sceneLayerHeader;return(0,i.h)(i.H,{key:"3eb6f5cd865c0f15245bbd5abae08f0bc6eefe14"},(0,i.h)("arcgis-new-item-description",{key:"69770d9674535c3e95f4b0027f6d06f3f60a0dcc",header:h}),(0,i.h)("arcgis-file-browser",{key:"893889e156421f0ec1aefa6229524120434bb4ab",cloud:!1,allowedExtensions:c,insideModal:!0,fullHeight:!0,portal:d,config:u,user:p,userLicensedItems:f}),(0,i.h)("arcgis-new-item-alert",{key:"86a7043d0b26c8f86b72d0e1228fb38089d25b57",id:"new-item-alert",kind:"danger",onAlertDismiss:()=>{this.alertActive=!1},active:!!this.alertActive,heading:null===(t=null===(e=null===r.u||void 0===r.u?void 0:r.u.i18n)||void 0===e?void 0:e.cloud)||void 0===t?void 0:t.errorTitle,description:null===(n=null===(a=null===r.u||void 0===r.u?void 0:r.u.i18n)||void 0===a?void 0:a.cloud)||void 0===n?void 0:n.errorMessage}))}}},24869:(e,t,a)=>{a.d(t,{a:()=>s,f:()=>c,g:()=>r,s:()=>l,v:()=>o});var i=a(15912),n=a(46227);function s(e,t){const a=/(?:\.([^.]+))?$/;let i=null==e?void 0:e.replace(/^.*(\\|\/|:)/,""),s=i&&a.exec(i)[1]?a.exec(i)[1].toLowerCase():"",l="";if((null==i?void 0:i.indexOf(".rft."))>-1){const[e,t]=i.split(".rft.");s=`rft.${t}`,l=e}return i&&!l&&(l=-1===i.lastIndexOf(".")?i:i.substring(0,i.lastIndexOf("."))),l=l.replace(/\.|-/g,"_"),t&&(l=function(e){return`${e}_${(0,n.g)()}`}(l),i=`${l}.${s}`),{title:l,fileName:i,extension:s}}function l(e,t){return s(e.name,!!t)}function o(e,t){let a=e;const i=e.lastIndexOf("\\");return i>-1&&(a=a.substring(i+1,a.length)),a.replace(/\ /g,"_")===t.replace(/\ /g,"_")}function r(e){return i.a[e]?i.a[e]:i.a[Object.keys(i.a).find(t=>i.a[t].type===e)]}function c(e){if(!e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return`${Math.round(e/Math.pow(1024,t))} ${["B","KB","MB","GB","TB"][t]}`}},46227:(e,t,a)=>{a.d(t,{g:()=>i});const i=()=>[2,1,1,1,3].map(e=>{let t="";for(let a=0;a<e;a++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t}).join("-")},61467:(e,t,a)=>{a.d(t,{S:()=>i,g:()=>n});const i={object3d:"3D object",building:"building",mesh:"mesh",pointCloud:"point cloud",gaussian:"gaussian splat",voxel:"voxel",point:"3D point"};function n(e){let t;switch(e){case"mesh":t="IntegratedMesh";break;case"object3d":t="3DObject";break;case"gaussian":t="GaussianSplat";break;default:t=void 0}return t}},95878:(e,t,a)=>{a.d(t,{a:()=>i,u:()=>n});const i=(0,a(37762).c)({nextText:"next",cancelText:"cancel",workflow:"content",scale:"m",disableScroll:!1,onlyHosted:!1,featureFlags:{}}),n=i.state}}]);