/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_server-d0d5a1.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_server-d0d5a1"],{1536:(e,t,n)=>{n.d(t,{a:()=>C,b:()=>O,c:()=>w,d:()=>S,e:()=>h,f:()=>_,g:()=>b,h:()=>$,i:()=>v,j:()=>x,k:()=>P,l:()=>m,m:()=>j,n:()=>y,o:()=>A,p:()=>I,q:()=>g,s:()=>k,u:()=>U});var r=n(88878),s=n(59317),i=n(46904),o=n(41473),l=n(54251),a=n(72257),c=n(3826),u=n(95878),d=n(80562),p=n(15912),f=n(83692);function m(e){return(null==e?void 0:e.id)===(null==e?void 0:e.username)}function v(e){return["all","recycle"].includes(null==e?void 0:e.id)||m(e)}function g(e){const t=e.split("/");return t.length>=2?t[t.length-2]:""}function y({title:e,snippet:t,tags:n}){return{title:e,snippet:t,tags:(0,d.a)(n).join(",")}}const w=(e,t,n)=>{var r,i,o,l;const{file:a,type:c,extension:u,dataUrl:d,properties:f,typeKeywords:m,existingItem:v}=t,g=y(e);if(n){const e=v;g.title=(null===(r=null==e?void 0:e.sourceData)||void 0===r?void 0:r.title)||e.title||g.title||""}const w=[...null===(i=p.a[c])||void 0===i?void 0:i.typeKeywords,...m?[m]:[],u].join(", "),h=Object.assign({type:c,extension:u},f?{properties:JSON.stringify(f)}:{}),$=a?{file:a}:{dataUrl:d.includes('httpHeaders={"Authorization"')?d:encodeURI(d)},b=Object.assign(Object.assign(Object.assign(Object.assign({},h),$),g),{typeKeywords:w});if(!(null===(l=null===(o=s.c.portal)||void 0===o?void 0:o.sourceJSON)||void 0===l?void 0:l.hasClassificationSchema)||!t.classification)return b;const O=t.classification;return O.createdUser=s.c.user.username,O.createdDate=Date.now(),Object.assign(Object.assign({},b),{classification:JSON.stringify(O)})},h=(e,t,n)=>{const r=!!n,s=!!t.addAsUniqueFile,i=w(e,t,r),o=new FormData;return o.append("f","json"),o.append("async","true"),Object.keys(i).forEach(e=>{if(s&&"file"===e){const n=t.fileName;o.append(e,i[e],n)}else o.append(e,i[e])}),o},$=(e,t)=>{const n=(null==t?void 0:t.id)&&!v(t)?`/${t.id}`:"";return`${e.userContentUrl}${n}/addItem`},b=(e,t)=>`${(0,o.g)(t)}content/items/${e}`,O=async(e,t)=>{try{const n=b(e,t);return{result:await(0,f.r)(n)}}catch(e){return console.warn("error getting item",e),{error:{code:"unhandledError"}}}},C=async(e,t)=>{const n=new FormData;switch(t.type){case"base64":n.append("data",t.data);break;case"url":n.append("url",t.url);break;case"file":n.append("file",t.file)}return n.append("f","json"),n.append("token",(0,l.g)(s.c.portal)),await(0,f.a)(`${(0,o.g)()}content/users/${s.c.user.username}/items/${e}/updateThumbnail`,n,{},"post")};async function j(e,t){const n=`${s.c.user.userContentUrl}/moveItems`;return await(0,f.r)(n,{items:e,folder:t},{},"post")}async function S(e,{permanentDelete:t=!1}={},n){null!=n||(n=s.c.user);const r=`${n.userContentUrl}/items/${e}/delete`;return await(0,f.r)(r,{permanentDelete:t},{},"post")}async function U(e,t,n){var i;const o=null!==(i=null!=n?n:s.c.user)&&void 0!==i?i:s.c.portal.user,l=`${"append"===(null===u.u||void 0===u.u?void 0:u.u.workflow)?(0,r.g)({username:c.a.existingItem.owner},s.c.portal):o.userContentUrl}/items/${e}/update`;return(0,f.r)(l,t,{},"post")}const I=async(e,t)=>{try{const n=`${(0,o.g)(t)}content/items/${e}/data`;return{result:await(0,f.r)(n)}}catch(e){return{error:{code:"unhandledError"}}}},_=async(e,t,n)=>{var r;const i=s.c.user,o=`${("append"===u.u.workflow||n)&&(null===(r=t.existingItem)||void 0===r?void 0:r.itemOwner)?t.existingItem.itemOwner.userContentUrl:i.userContentUrl}/items/${e}/commit`,l=h(a.i,t,!!n);l.delete("file");return await(0,f.a)(o,l,{},"post")},x=async(e,t)=>{const n=s.c.user,r=`${t?(0,i.e)(t,s.c.portal):n.userContentUrl}/items/${e}/cancel`;return await(0,f.r)(r,{},{},"post")},k=async e=>{var t,n,r,i;const o=$(s.c.user,a.i.folder),l=y(a.i),u=Object.assign({},e);return delete u.initialFolders,delete u.initialTitle,delete u.newItemMode,delete u.serviceInfo,delete u.allowStoredAuth,delete u.isSecured,delete u.checkAuth,delete u.agsType,delete u.developerCredentialsType,delete u.applicationEnvironment,delete u.apiKeyReferrerUrls,delete u.developerCredentialsRedirectUrls,delete u.developerPrivileges,delete u.selectedAppPrivileges,delete u.selectedItemPrivileges,delete u.formattedItemPrivileges,delete u.breadcrumbs,delete u.layerData,delete u.addAsBasemap,delete u.customParameters,(null===(n=null===(t=s.c.portal)||void 0===t?void 0:t.sourceJSON)||void 0===n?void 0:n.hasClassificationSchema)&&(c.a.classification.createdUser=s.c.user.username,c.a.classification.createdDate=Date.now()),await(0,f.r)(o,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},u),(null===(i=null===(r=s.c.portal)||void 0===r?void 0:r.sourceJSON)||void 0===i?void 0:i.hasClassificationSchema)?{classification:JSON.stringify(c.a.classification)}:{}),(e=>e.url&&!!e.serviceInfo)(e)?{serviceInfo:JSON.stringify(e.serviceInfo)}:{}),{typeKeywords:JSON.stringify(e.typeKeywords)}),l),{},"post")};async function P(e,t,n,r,l,a){null!=l||(l=s.c.user),null!=a||(a=s.c.portal);const c=n&&n.id!==l.username?n.id:"root";if("featurecollection"===r||"Microsoft Excel"===t)return null;const u=[`title: "${e}"`,`type: "${t}"`,`owner: "${l.username}"`,`ownerfolder: "${c}"`],d=await(0,f.r)(`${(0,o.g)(a)}search`,{filter:u.join(" AND "),num:1});return(null==d?void 0:d.total)>0?{num:d.num,itemURLList:d.results.map(e=>(0,i.d)(e.id,s.c.config.baseUrl))}:null}async function A(e,t){const n=(0,d.f)(e),{user:r,config:l,portal:c}=s.c,{folder:u}=a.i,p=u&&u.id!==r.username?u.id:"root",m=[`owner: "${r.username}"`,`ownerfolder: "${p}"`];t&&m.push(`type: "${t}"`);let v,g=1;for(let e=0;e<10&&!v&&g>-1;e++){const{nextStart:e,results:t}=await(0,f.r)(`${(0,o.g)()}search`,{[c.isPortal?"q":"filter"]:m.join(" AND "),num:100,start:g});v=t.find(e=>e.name===n),g=e}return v?(0,i.d)(v.id,l.baseUrl):null}},3826:(e,t,n)=>{n.d(t,{a:()=>s,b:()=>i,c:()=>o,d:()=>r});const r=(0,n(37762).c)({typeKeywords:[],customParameters:[],analyzedLocationTypes:[],allowStoredAuth:!0,isSecured:null,checkAuth:!1}),s=r.state,i=r.state,o=r.state},46904:(e,t,n)=>{n.d(t,{a:()=>o,b:()=>i,c:()=>c,d:()=>u,e:()=>d,f:()=>p,g:()=>f,i:()=>l,u:()=>a});n(93814);var r=n(41473);function s(e){var t;return!!(null===(t=e.owner)||void 0===t?void 0:t.toLowerCase().includes("esri"))}function i(e){var t;return s(e)&&!!(null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Requires Credits"))}function o(e){var t;return s(e)&&!!(null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Requires Subscription"))}function l(e,t){return e.owner===t.username}function a(e,t){return l(e,t)||function(e,t){var n;if(null!=e.isAdmin)return!!e.isAdmin;const r=e.owner,s="admin"===e.itemControl,i=["esri_livingatlas","esri_demographics","esri_boundaries"];if((null===(n=e.portal)||void 0===n?void 0:n.isPortal)&&!l(e,t)&&s&&r.includes("esri_")&&!i.includes(r))return!1;return s}(e,t)}const c=(e,t)=>!!t.orgId&&e.every(e=>e.isOrgItem),u=(e,t)=>`${(0,r.a)(t)}item.html?id=${e}`,d=(e,t)=>`${(0,r.g)(t)}/content/users/${e}`,p=e=>e.reduce((e,t)=>(e[t.owner]=e[t.owner]?[...e[t.owner],t.id]:[t.id],e),{}),f=(e,t)=>`${(0,r.a)(t)}content/items/${e}`},72257:(e,t,n)=>{n.d(t,{a:()=>i,g:()=>a,i:()=>o});var r=n(37762),s=n(86562);const i=(0,r.c)({title:"",snippet:"",tags:[],categories:[]}),o=i.state,l=new Map;function a(e){return(0,s.g)({el:e,tag:"arcgis-item-properties",cache:l})}},80562:(e,t,n)=>{n.d(t,{a:()=>i,f:()=>s,s:()=>l});var r=n(4429);const s=e=>(null==e?void 0:e.replace(/(\s+|:)/g,"_"))||"",i=e=>{const t=e=>e.split(",").map(e=>e.trim()).filter(e=>e);return e?"string"==typeof e?(0,r.b)(t(e)):(0,r.b)(e.flatMap(e=>[...t(e)])):[]},o=async e=>new Promise((t,n)=>{for(let r=0;r<e.length;r++)e[r].then(n=>{const s=[...e];s.splice(r,1),t({remainingPromises:s,result:n})}).catch(n)});async function l(e,t){var n,r;const s=[],{getBatchSize:i,onPromiseCompleted:l,onPromiseThrow:a,shouldContinue:c}=null!=t?t:{};let u=[];for(let t=0;t<(null!==(n=null==i?void 0:i())&&void 0!==n?n:1);t++)try{const t=e();t&&u.push(t)}catch(e){null==a||a(e)}let d=null;for(;u.length>0&&(!c||c(d));)try{const{remainingPromises:t,result:n}=await o(u);u=t,d=n,n&&s.push(n),null==l||l(n);const a=null!==(r=null==i?void 0:i())&&void 0!==r?r:1;for(;u.length<a;){const t=e();if(t&&u.push(t),null==t)break}}catch(e){null==a||a(e)}return s}},86562:(e,t,n)=>{n.d(t,{g:()=>s});var r=n(15332);function s(e){const{el:t,tag:n,cache:s}=e,i=(0,r.c)(t,n),o=s.get(i);return o||(i?(s.set(i,i.store),i.store):null)}},88878:(e,t,n)=>{n.d(t,{a:()=>p,b:()=>f,c:()=>v,d:()=>m,e:()=>u,f:()=>l,g:()=>d,h:()=>c,u:()=>g});var r=n(83692),s=n(59317),i=n(46904),o=n(41473);async function l(e,t){return(0,r.r)(`${(0,o.g)(t)}/community/users/${e}`)}async function a(){return(0,r.r)(`${(0,o.g)()}/community/self`)}async function c(e,t){var n;if(null!=e||(e=null===s.c||void 0===s.c?void 0:s.c.user),!e)return[];const i=await(0,r.f)(()=>a(),"communitySelf",e.username);return(null!==(n=null==i?void 0:i.groups)&&void 0!==n?n:[]).sort((e,n)=>{var r;return null===(r=e.title)||void 0===r?void 0:r.localeCompare(n.title,t||"en",{sensitivity:"base"})})}async function u(){const e=null===s.c||void 0===s.c?void 0:s.c.user;if(!e)return null;return(await(0,r.f)(()=>a(),"communitySelf",e.username)).favGroupId}function d(e,t){var n;return null!==(n=null==e?void 0:e.userContentUrl)&&void 0!==n?n:`${(0,o.g)(t)}content/users/${e.username}`}async function p(e){var t;const n=null!==(t=null!=e?e:s.c.user)&&void 0!==t?t:s.c.portal.user,i=await async function(e){var t;const n=d(null!==(t=null!=e?e:s.c.user)&&void 0!==t?t:s.c.portal.user,s.c.portal);try{return await(0,r.r)(n,{num:1})}catch(e){return null}}(n);if(!i)return null;const{folders:o}=i,{username:l}=n;return[{username:l,id:l,title:l,created:"now"},...o.sort((e,t)=>e.title.localeCompare(t.title))]}async function f(e,t){var n;if(!(0,i.u)(e,s.c.portal.user))return null;const r=e.folderId||e.ownerFolder,o=null!==(n=null!=t?t:s.c.user)&&void 0!==n?n:s.c.portal.user,l=await p(o);return null==l?void 0:l.find(e=>e.id===r)}function m(e){return{username:e,id:e,title:e,created:"now"}}async function v(e,t){var n,i;try{const i=`${d(null!==(n=null!=t?t:s.c.user)&&void 0!==n?n:s.c.portal.user,s.c.portal)}/createFolder`;return{result:await(0,r.r)(i,{title:e},{},"post")}}catch(e){return console.error(e),((null===(i=e.details)||void 0===i?void 0:i.messages)||[]).some(e=>e.includes("not available"))?{error:{code:"folderNameExists"}}:{error:{code:"unhandledError"}}}}async function g(e,t,n){var i;const o=`${d(null!==(i=null!=n?n:s.c.user)&&void 0!==i?i:s.c.portal.user,s.c.portal)}/${e}/updateFolder`;try{const e=await(0,r.r)(o,{newTitle:t},{},"post");return e.error?{error:{code:"unhandledError"}}:{result:e}}catch(e){return{error:{code:"unhandledError"}}}}},95878:(e,t,n)=>{n.d(t,{a:()=>r,u:()=>s});const r=(0,n(37762).c)({nextText:"next",cancelText:"cancel",workflow:"content",scale:"m",disableScroll:!1,onlyHosted:!1,featureFlags:{}}),s=r.state}}]);