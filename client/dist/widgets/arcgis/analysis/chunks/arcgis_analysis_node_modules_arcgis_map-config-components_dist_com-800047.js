/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_com-800047.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_com-800047"],{40433:(e,s,t)=>{t.r(s),t.d(s,{ArcgisMapConfigSmartMappingTypeActionsPopover:()=>p});var a=t(73679),o=t(4395),i=t(5294),l=t(24114),c=t(1225),n=(t(54312),t(44345),t(55448),t(52797),t(34031),t(63438),t(5933),t(28927),t(83368),t(89704),t(18423),t(96086),t(91813),t(21255),t(13078),t(21303),t(12627),t(56451),t(31521),t(23054),t(5077),t(23795),t(17902),t(87420),t(30161),t(81734),t(83552),t(77462),t(49403),t(10281),t(83930),t(66617),t(10628),t(59640),t(64451),t(6176),t(10454),t(29614),t(94916),t(52554),t(2156),t(4038),t(49851),t(75054),t(15223),t(70169),t(92264)),r=(t(85681),t(18444),t(42411),t(9767),t(38218),t(91914),t(86605),t(68196),t(440),t(46547),t(6238),t(7299),t(85643)),d=t(73801);const u=o.AH`.popover{--calcite-popover-z-index: 100}`;class p extends d.WF{constructor(){super(...arguments),this.mergeNode=(0,r._)(),this.moveDownNode=(0,r._)(),this.moveUpNode=(0,r._)(),this.popoverNode=(0,r._)(),this.separateNode=(0,r._)(),this.showMoveToGroup=!1,this.arcgisSmartMappingTypeActionsPopoverChange=(0,d.lh)(),this.arcgisSmartMappingTypeActionsPopoverFocusExit=(0,d.lh)()}static{this.properties={showMoveToGroup:16,checkedClasses:0,groupMenuNodes:0,referenceNode:0,smartMappingState:0}}static{this.styles=u}async focusActionPad(){this.actionPadNode?.setFocus()}async focusLastAction(){if(this.actionPadNode){const e=Array.from(this.actionPadNode.querySelectorAll("calcite-action")).filter(e=>!e.disabled);e[e.length-1].setFocus()}}load(){this.topActionHandler=e=>{e.shiftKey&&"Tab"===e.key&&(e.preventDefault(),this.arcgisSmartMappingTypeActionsPopoverFocusExit.emit("top"))}}updated(){const e=(this.moveUpNode.value?.disabled?void 0:this.moveUpNode.value)||(this.moveDownNode.value?.disabled?void 0:this.moveDownNode.value)||this.mergeNode.value||this.separateNode.value||this.moveToGroupNode;e?.removeEventListener("keydown",this.topActionHandler),e?.addEventListener("keydown",this.topActionHandler)}actionPadRefHandler(e){e&&(this.actionPadNode=e)}panelRefHandler(e){e?.setFocus()}moveToGroupActionRefHandler(e){e&&(this.moveToGroupNode=e)}clearSelection(){let e=-1;this.checkedClasses.forEach(s=>e=-1===s.groupIdx?e:-1===e?s.groupIdx:Math.min(e,s.groupIdx)),this.checkedClasses=[],this.popoverNode.value.open=!1,this.arcgisSmartMappingTypeActionsPopoverChange.emit({checkedClasses:this.checkedClasses}),setTimeout(()=>{this.groupMenuNodes[e]?.setFocus()},300)}mergeValues(){const{smartMappingState:e}=this,s=(0,c.g)(e),t=s.uniqueValueGroups;this.checkedClasses.sort((e,s)=>e.groupIdx-s.groupIdx===0?e.classIdx-s.classIdx:-1===e.groupIdx||-1===s.groupIdx?s.groupIdx-e.groupIdx:e.groupIdx-s.groupIdx);const a=t[this.checkedClasses[0].groupIdx].classes[this.checkedClasses[0].classIdx],o=(0,n.a)(e);this.checkedClasses.forEach((e,s)=>{if(s>0){const s=-1===e.groupIdx?o[e.classIdx]:t[e.groupIdx].classes[e.classIdx];a.values=a.values.concat(s.values),a.label+=`, ${s.label}`}});const i=[];t.forEach((e,s)=>{const t=[];e.classes.forEach((e,o)=>{this.checkedClasses[0].groupIdx===s&&this.checkedClasses[0].classIdx===o?t.push(a):this.checkedClasses.find(e=>e.groupIdx===s&&e.classIdx===o)||t.push(e)}),t.length&&(e.classes=t,i.push(e))}),s.uniqueValueGroups=i,this.checkedClasses=[],(0,c.a4)(e),this.popoverNode.value.open=!1,this.arcgisSmartMappingTypeActionsPopoverChange.emit({checkedClasses:this.checkedClasses})}moveDown(){const{smartMappingState:e}=this,s=(0,c.g)(e),t=s.uniqueValueGroups,a=t[this.checkedClasses[0].groupIdx];this.checkedClasses.sort((e,s)=>s.groupIdx-e.groupIdx===0?s.classIdx-e.classIdx:s.groupIdx-e.groupIdx);const o=i.clone(this.checkedClasses);this.checkedClasses.forEach((e,s)=>{if(e.classIdx<a.classes.length-1&&(0===s||s>0&&o[s-1].classIdx!==e.classIdx+1)){const t=a.classes.splice(e.classIdx,1)[0];a.classes.splice(e.classIdx+1,0,t),o[s].classIdx=e.classIdx+1}}),this.checkedClasses=o,s.uniqueValueGroups=t,(0,c.a4)(e),this.arcgisSmartMappingTypeActionsPopoverChange.emit({checkedClasses:this.checkedClasses}),setTimeout(async()=>{await(this.moveDownNode.value.disabled?this.moveUpNode.value.setFocus():this.moveDownNode.value.setFocus())},300)}moveToGroup(){this.showMoveToGroup=!0}moveToNewGroup(e=!1){const{smartMappingState:s}=this,t=(0,c.g)(s),a=t.uniqueValueGroups;let o=this.checkedClasses.filter(e=>-1!==e.groupIdx).map(e=>a[e.groupIdx].classes[e.classIdx]);const i=(0,n.a)(s);o=o.concat(this.checkedClasses.filter(e=>-1===e.groupIdx).map(e=>i[e.classIdx]));const r=new l.default({heading:e?void 0:(0,n.f)(s,a),classes:o});a.push(r),this.checkedClasses.sort((e,s)=>s.groupIdx-e.groupIdx===0?s.classIdx-e.classIdx:s.groupIdx-e.groupIdx),this.checkedClasses.forEach(e=>{-1!==e.groupIdx&&(a[e.groupIdx].classes.splice(e.classIdx,1),a[e.groupIdx].classes.length||a.splice(e.groupIdx,1))}),this.checkedClasses=[],t.uniqueValueGroups=a,(0,c.a4)(s),this.popoverNode.value.open=!1,this.arcgisSmartMappingTypeActionsPopoverChange.emit({checkedClasses:this.checkedClasses}),setTimeout(()=>{this.groupMenuNodes[a.length-1]?.setFocus()},300)}moveUp(){const{smartMappingState:e}=this,s=(0,c.g)(e),t=s.uniqueValueGroups,a=t[this.checkedClasses[0].groupIdx];this.checkedClasses.sort((e,s)=>e.groupIdx-s.groupIdx===0?e.classIdx-s.classIdx:e.groupIdx-s.groupIdx);const o=i.clone(this.checkedClasses);this.checkedClasses.forEach((e,s)=>{if(e.classIdx>0&&(0===s||s>0&&o[s-1].classIdx!==e.classIdx-1)){const t=a.classes.splice(e.classIdx,1)[0];a.classes.splice(e.classIdx-1,0,t),o[s].classIdx=e.classIdx-1}}),this.checkedClasses=o,s.uniqueValueGroups=t,(0,c.a4)(e),this.arcgisSmartMappingTypeActionsPopoverChange.emit({checkedClasses:this.checkedClasses}),setTimeout(async()=>{await(this.moveUpNode.value.disabled?this.moveDownNode.value.setFocus():this.moveUpNode.value.setFocus())},300)}removeValues(){const{smartMappingState:e}=this,s=(0,c.g)(e);let t=s.uniqueValueGroups;const a={};this.checkedClasses?.forEach(e=>{a[e.groupIdx]||(a[e.groupIdx]=[]),a[e.groupIdx].push(e.classIdx)}),t.forEach((e,s)=>{const t=a[s];t&&(e.classes=e.classes.filter((e,s)=>!t.includes(s)))}),t=t.filter(e=>!!e.classes.length),s.uniqueValueGroups=t,(0,c.a4)(e),this.popoverNode.value.open=!1,this.checkedClasses=[],this.arcgisSmartMappingTypeActionsPopoverChange.emit({checkedClasses:this.checkedClasses})}separateSelectedValues(){const{smartMappingState:e}=this,s=(0,c.g)(e).uniqueValueGroups;this.checkedClasses.sort((e,s)=>e.groupIdx-s.groupIdx===0?e.classIdx-s.classIdx:e.groupIdx-s.groupIdx);const t=[];let a=-2,o=[];this.checkedClasses.forEach(e=>{-1!==e.groupIdx&&(a!==e.groupIdx?(-2!==a&&t.push({groupIdx:a,classIdxs:o}),a=e.groupIdx,o=[e.classIdx]):o.push(e.classIdx))}),-2!==a&&t.push({groupIdx:a,classIdxs:o}),t.forEach(t=>(0,n.s)(e,s[t.groupIdx],t.classIdxs)),this.checkedClasses=[],(0,c.a4)(e),this.popoverNode.value.open=!1,this.arcgisSmartMappingTypeActionsPopoverChange.emit({checkedClasses:this.checkedClasses})}render(){const{_messages:e}=this.smartMappingState;if(!this.checkedClasses?.length)return"";const s=this.referenceNode?.getBoundingClientRect()?.height;return o.qy`<calcite-popover class="js-app-flyout popover" placement=leading-start offset-distance=10 .offsetSkidding=${(0,c.V)(s)?(s-120)/4+70:0} pointer-disabled .label=${e.panels.type.typeActions} trigger-disabled focus-trap-disabled .referenceElement=${this.referenceNode} open ${(0,r.K)(this.popoverNode)}>${this.showMoveToGroup?this.renderMoveToGroup():this.renderActions()}</calcite-popover>`}renderActions(){return o.qy`<calcite-action-pad layout=vertical position=start expanded expand-disabled ${(0,r.K)(this.actionPadRefHandler)}>${this.renderGroup1()}${this.renderGroup2()}${this.renderGroup3()}</calcite-action-pad>`}renderMoveToGroup(){if(!this.showMoveToGroup)return"";const{smartMappingState:e}=this,{_messages:s}=e,t=(0,c.g)(e),a=t.uniqueValueGroups,i=!this.checkedClasses.find(e=>e.groupIdx!==this.checkedClasses[0].groupIdx)&&this.checkedClasses[0].groupIdx,l=a.map((e,s)=>this.renderMoveToGroupListItem(e,s));return o.qy`<calcite-panel .heading=${s.panels.type.moveToGroup} closable @calcitePanelClose=${()=>{this.showMoveToGroup=!1,this.requestUpdate(),setTimeout(()=>{this.moveToGroupNode.setFocus()},300)}} ${(0,r.K)(this.panelRefHandler)}><calcite-list .filterEnabled=${a.length>=10} .filterPlaceholder=${s.panels.type.searchGroups} .label=${s.panels.type.selectGroup} selection-mode=single>${l}${!t.uniqueValueGroups.length&&o.qy`<calcite-list-item .label=${s.panels.type.untitledGroup} @calciteListItemSelect=${()=>this.moveToNewGroup(!0)}></calcite-list-item>`||""}<calcite-list-item .label=${t.defaultLabel||s.panels.type.other} value=-1 .disabled=${-1===i} @calciteListItemSelect=${()=>{this.checkedClasses.sort((e,s)=>s.groupIdx-e.groupIdx===0?s.classIdx-e.classIdx:s.groupIdx-e.groupIdx),this.checkedClasses.forEach(e=>{-1!==e.groupIdx&&(a[e.groupIdx].classes.splice(e.classIdx,1),a[e.groupIdx].classes.length||a.splice(e.groupIdx,1))}),this.checkedClasses=[],t.uniqueValueGroups=a,(0,c.a4)(e),this.popoverNode.value.open=!1,this.arcgisSmartMappingTypeActionsPopoverChange.emit({checkedClasses:this.checkedClasses}),setTimeout(()=>{this.groupMenuNodes[-1]?.setFocus()},300)}}></calcite-list-item></calcite-list><calcite-button appearance=outline .label=${s.cancel} width=full slot=footer @click=${()=>{this.showMoveToGroup=!1,this.requestUpdate(),setTimeout(()=>{this.moveToGroupNode.setFocus()},300)}}>${s.cancel}</calcite-button></calcite-panel>`}renderMoveToGroupListItem(e,s){const{smartMappingState:t}=this,{_messages:a}=t,i=(0,c.g)(t),l=i.uniqueValueGroups,r=!this.checkedClasses.find(e=>e.groupIdx!==this.checkedClasses[0].groupIdx)&&this.checkedClasses[0].groupIdx;return o.qy`<calcite-list-item .label=${e.heading||a.panels.type.untitledGroup} .value=${s} .disabled=${r===s} @calciteListItemSelect=${e=>{const s=e.target.value;let a=this.checkedClasses.filter(e=>-1!==e.groupIdx).map(e=>l[e.groupIdx].classes[e.classIdx]);const o=(0,n.a)(t);a=a.concat(this.checkedClasses.filter(e=>-1===e.groupIdx).map(e=>o[e.classIdx]));const r=l[s];r.classes=r.classes.concat(a),this.checkedClasses.sort((e,s)=>s.groupIdx-e.groupIdx===0?s.classIdx-e.classIdx:s.groupIdx-e.groupIdx),this.checkedClasses.forEach(e=>{-1!==e.groupIdx&&(l[e.groupIdx].classes.splice(e.classIdx,1),l[e.groupIdx].classes.length||l.splice(e.groupIdx,1))}),this.checkedClasses=[],i.uniqueValueGroups=l,(0,c.a4)(t),this.popoverNode.value.open=!1,this.arcgisSmartMappingTypeActionsPopoverChange.emit({checkedClasses:this.checkedClasses}),setTimeout(()=>{this.groupMenuNodes[s]?.setFocus()},300)}}></calcite-list-item>`}renderGroup1(){const{smartMappingState:e}=this,{_messages:s}=e,t=(0,c.g)(e).uniqueValueGroups;if(this.checkedClasses.find(e=>-1===e.groupIdx))return"";const a=this.checkedClasses.map(e=>e.classIdx),i=a.length,l=t[this.checkedClasses[0].groupIdx]?.classes.length;a.sort((e,s)=>e-s);const n=a[0]>0||!!a.find((e,s)=>s>0&&e-1>a[s-1]),d=a[i-1]<l-1||!!a.find((e,s)=>s<i-1&&e+1<a[s+1]);return o.qy`<calcite-action-group><calcite-action .text=${s.panels.type.moveUp} text-enabled .disabled=${!n} icon=arrow-bold-up @click=${()=>this.moveUp()} ${(0,r.K)(this.moveUpNode)}></calcite-action><calcite-action .text=${s.panels.type.moveDown} text-enabled .disabled=${!d} icon=arrow-bold-down @click=${()=>this.moveDown()} ${(0,r.K)(this.moveDownNode)}></calcite-action></calcite-action-group>`}renderGroup2(){const{smartMappingState:e}=this,{_messages:s}=e,t=(0,c.g)(e).uniqueValueGroups,a=!!this.checkedClasses.find(e=>e.groupIdx!==this.checkedClasses[0].groupIdx),i=!!this.checkedClasses.find(e=>-1!==e.groupIdx)&&this.checkedClasses.length>1,l=!!this.checkedClasses.find(e=>-1!==e.groupIdx&&t[e.groupIdx].classes[e.classIdx].values.length>1),n=!!this.checkedClasses.find(e=>-1!==e.groupIdx),d=!a&&-1!==this.checkedClasses[0].groupIdx&&this.checkedClasses.length===t[this.checkedClasses[0].groupIdx].classes.length;return o.qy`<calcite-action-group>${i&&o.qy`<calcite-action .text=${s.panels.type.mergeValues} text-enabled @click=${()=>this.mergeValues()} ${(0,r.K)(this.mergeNode)}></calcite-action>`||""}${l&&o.qy`<calcite-action .text=${s.panels.type.separateValues} text-enabled @click=${()=>this.separateSelectedValues()} ${(0,r.K)(this.separateNode)}></calcite-action>`||""}<calcite-action .text=${s.panels.type.moveToGroup} text-enabled @click=${()=>this.moveToGroup()} ${(0,r.K)(this.moveToGroupActionRefHandler)}></calcite-action><calcite-action .text=${s.panels.type.newGroup} text-enabled .disabled=${d} @click=${()=>this.moveToNewGroup()}></calcite-action>${n&&o.qy`<calcite-action .text=${s.panels.type.remove} text-enabled @click=${()=>this.removeValues()}></calcite-action>`||""}</calcite-action-group>`}renderGroup3(){const{_messages:e}=this.smartMappingState;return o.qy`<calcite-action-group><calcite-action .text=${e.panels.type.clearSelection} text-enabled @click=${()=>this.clearSelection()} @keydown=${e=>{!e.shiftKey&&"Tab"===e.key&&(e.preventDefault(),this.arcgisSmartMappingTypeActionsPopoverFocusExit.emit("bottom"))}}></calcite-action></calcite-action-group>`}}(0,a.c)("arcgis-map-config-smart-mapping-type-actions-popover",p)},92264:(e,s,t)=>{t.d(s,{a:()=>f,b:()=>I,c:()=>h,d:()=>g,e:()=>y,f:()=>v,g:()=>x,m:()=>p,s:()=>b});var a=t(5294),o=t(52797),i=t(56451),l=t(47207),c=t(70852),n=t(48103),r=t(39423),d=t(1225),u=(t(54312),t(44345),t(55448),t(34031),t(63438),t(5933),t(89704),t(66228));t(31521),t(23054),t(5077),t(23795),t(17902),t(87420),t(30161),t(81734),t(83552),t(77462),t(49403),t(66617),t(10628),t(59640),t(64451),t(6176),t(10454),t(29614),t(94916),t(52554),t(2156),t(4038),t(49851),t(75054),t(15223),t(70169),t(85681),t(18444),t(42411),t(9767),t(38218),t(91914),t(86605),t(68196),t(440),t(46547),t(28927),t(6238),t(7299);const p=500;async function h(e,s){const{layer:t,useFeatureReduction:a,mapImageSublayer:o,mapView:i}=e,c=t;s=s||{};const n=(0,d.a)(e,(0,d.g)(e)),r=s.fieldInfos[0];return await l.createRenderer({layer:c,view:i,field:r.field,valueExpression:r.expression,valueExpressionTitle:r.expressionTitle,numTypes:s.numTypes||10,sortBy:s.sortBy||"count",typeScheme:s.typeScheme||(0,d.I)(e,p),returnAllCodedValues:!0,outlineOptimizationEnabled:!o&&(!(0,u.i)(s.outlineOptimizationEnabled)||s.outlineOptimizationEnabled),sizeOptimizationEnabled:!o&&(!(0,u.i)(s.sizeOptimizationEnabled)||s.sizeOptimizationEnabled),legendOptions:s.legendOptions,defaultSymbolEnabled:!0,forBinning:a}).then(t=>{if(t.excludedUniqueValueInfos.length||(t.renderer.defaultLabel=void 0,t.renderer.defaultSymbol=void 0),y(e,s)){const s=(0,d.g)(e).clone(),a=(0,d.c)(s,"size","auto"),o=(0,d.c)(s,"size","outline"),i=(0,d.p)(s,"spike");if(t.renderer.visualVariables=[],a&&(t.renderer.visualVariables=t.renderer.visualVariables||[],t.renderer.visualVariables.push(a)),o&&(t.renderer.visualVariables=t.renderer.visualVariables||[],t.renderer.visualVariables.push(o)),t.renderer.uniqueValueInfos=s.uniqueValueInfos,t.renderer.field2=s.field2,t.renderer.field3=s.field3,((0,d.o)(e)||i)&&"type-size"===(0,d.d)(e)){const s=(0,d.e)(e),a=t.renderer.uniqueValueInfos?.slice();a?.forEach(e=>{const t=(0,d.i)(e.symbol);e.symbol=s.clone(),(0,d.y)(e.symbol,t)}),t.renderer.uniqueValueInfos=a}}return(0,d.b)(n,t.renderer),t})}async function g(e,s){const{layer:t,useFeatureReduction:a,mapImageSublayer:o,mapView:i}=e,c=t,n=(s=s||[]).fieldInfos?s.fieldInfos[0]:null,r=(0,d.g)(e),h=(0,d.a)(e,r),g=r.uniqueValueInfos?.length?r.uniqueValueInfos[0].symbol:null,m=r.defaultSymbol,x=r.defaultLabel,f=n&&(n.field!==r.field||n.expression!==r.valueExpression);return s=s||{},await l.createRenderer({layer:c,view:i,field:n?n.field:r.field,valueExpression:n?n.expression:r.valueExpression,valueExpressionTitle:n?n.expressionTitle:r.valueExpressionTitle,numTypes:s.numTypes||(f?10:r.uniqueValueInfos.length),sortBy:s.sortBy||"count",typeScheme:(0,d.I)(e,p),outlineOptimizationEnabled:!o&&((0,u.i)(s.outlineOptimizationEnabled)?s.outlineOptimizationEnabled:!!h.sizeOutlineVisVar),sizeOptimizationEnabled:!o&&((0,u.i)(s.sizeOptimizationEnabled)?s.sizeOptimizationEnabled:!!h.sizeAutoVisVar),legendOptions:s.legendOptions||r.legendOptions,defaultSymbolEnabled:(0,u.i)(s.defaultSymbolEnabled)||!!r.defaultSymbol,forBinning:a}).then(e=>{if((0,d.b)(h,e.renderer),g&&e.renderer.uniqueValueInfos?.length){const s=e.renderer.uniqueValueInfos.slice();s.forEach(e=>{const s=g.clone();(0,d.y)(s,(0,d.i)(e.symbol)),e.symbol=s}),e.renderer.uniqueValueInfos=s}return m&&(e.renderer.defaultSymbol=m,e.renderer.defaultLabel=x),e})}const m={millisecond:"long-month-day-year-long-time",second:"long-month-day-year-long-time",minute:"long-month-day-year-short-time",hour:"long-month-day-year-short-time",day:"long-month-day-year",month:"long-month-day-year",year:"year"};function x(e,s,t){const{allUniqueValues:a,mapView:i}=e;if(t?.simpleFieldType===d.J.DATE){let e;a&&(e=c.calculateDateFormatInterval(a.map(e=>e.value)));const t=new Date(s);if("unknown"===i.timeZone)return o.formatDate(t,{...o.convertDateFormatToIntlOptions(e?m[e]:"long-month-day-year"),timeZone:"utc",timeZoneName:"shortOffset"});{const s=new Date(t.getTime()+6e4*t.getTimezoneOffset());return o.formatDate(s,{...o.convertDateFormatToIntlOptions(e?m[e]:"long-month-day-year"),timeZone:i.timeZone})}}return o.formatDateOnly(s,o.convertDateFormatToIntlOptions("long-month-day-year"))}function f(e){const{allUniqueValues:s}=e,t=(0,d.g)(e);if(!s?.length||!(0,u.i)(s[0].count))return[];let a=[];return t.uniqueValueGroups.forEach(e=>{const s=[];e.classes?.forEach(e=>e.values?.forEach(e=>s.push(`${e.value}`))),a=a.concat(s)}),s.filter(e=>!a.includes(null===e.value?"<Null>":`${e.value}`)).map(e=>new r.default({label:e.label,symbol:e.symbol,values:[{value:e.value}]}))}function I(e){const{allUniqueValues:s}=e,t=(0,d.g)(e);if(!s?.length||!(0,u.i)(s[0].count))return[];let a=[];return t.uniqueValueGroups.forEach(e=>{const s=[];e.classes.forEach(e=>e.values.forEach(e=>s.push("<Null>"===e.value?"null":`${e.value}`))),a=a.concat(s)}),s.filter(e=>!a.includes(`${e.value}`))}function v(e,s){const{_messages:t}=e;let a=1,o=t.panels.type.defaultGroupName.replace("${number}",a.toString());for(;s.find(e=>e.heading===o);)o=t.panels.type.defaultGroupName.replace("${number}",(++a).toString());return o}function y(e,s){if(["type","type-size"].includes((0,d.d)(e))){const t=(0,d.g)(e),a={field:t.field,expression:t.valueExpression,expressionTitle:t.valueExpressionTitle};if((0,d.N)(s.fieldInfos[0],a))return!0}return!1}function b(e,s,t){const l=(0,d.g)(e),c=(0,d.K)(e,l.field),u=c&&["small-integer","integer","big-integer","long"].includes((0,d.L)(e,c.layerField)),p=c?.simpleFieldType===d.J.DATE,h="date-only"===(0,d.L)(e,c?.layerField),g=[],m=(0,d.I)(e);let f=0;s.classes.forEach((l,I)=>{if(1===l.values.length||t&&!t.includes(I))g.push(l),f++;else if(!t||t.includes(I)){const t=l.symbol?.type,I=null!=t&&["simple-marker","simple-line","simple-fill","cim"].includes(t)?l.symbol:(0,d.e)(e,(0,d.d)(e));l.values.forEach((t,l)=>{const v=a.clone(I);if(l>0)if(m){const e=m.colors[(s.classes.length+f)%m.colors.length];e&&(0,d.y)(v,e)}else{const t=(0,d.M)(e).colors,a=new i.default(t[(s.classes.length+f)%10]);a&&(0,d.y)(v,a)}const y=c?.layerField?.domain,b=y?y.codedValues?.find(e=>e.code===t.value):null,k=b?b.name:p||h?x(e,t.value,c):c?.simpleFieldType===d.J.NUMBER?o.formatNumber(u?Number.parseInt(t.value):Number.parseFloat(t.value)):t.value;g.push(new r.default({values:[new n.default({value:t.value})],label:k,symbol:v})),f++})}}),s.classes=g}}}]);