/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-fb3067.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-fb3067"],{2079:(e,t,i)=>{i.d(t,{a:()=>o,i:()=>s});var a=i(42855);function s(e,t,i,s){const{layer:o}=e;switch(t){case a.l.feature:return!!(o&&i===a.s.wms||o&&o.popupTemplate)&&o.popupEnabled;case a.l.cluster:return!!o&&o.featureReduction.popupEnabled;case a.l.mapNotes:return s;default:return!!o?.popupEnabled}}function o(e,t){const i="CALCITE-INPUT"===e.tagName,a=i?e.shadowRoot.querySelector("input"):e.shadowRoot.querySelector("textarea"),s=a.selectionStart,o=[e.value.slice(0,s),`{${t}}`,e.value.slice(s)].join("");e.value=o;const n=s+2+t.length;setTimeout(()=>{i?e.setFocus():(a?.setSelectionRange(n,n),a?.focus()),a?.setSelectionRange(n,n)},1)}},4265:(e,t,i)=>{i.d(t,{a:()=>s,d:()=>a,t:()=>o});const a=(e,t)=>{let i,a="idle";const s=async(...s)=>await new Promise(o=>{switch(a){case"flushed":a="idle",i?(clearTimeout(i),o(e(...s))):o(null);break;case"invoked":clearTimeout(i),a="idle",o(e(...s));break;case"cancelled":clearTimeout(i),a="idle",o(null);break;default:i&&clearTimeout(i),a="pending",i=setTimeout(()=>{a="idle",o(e(...s))},t)}});return s.flush=async function(...e){return a="flushed",await s(...e)},s.invoke=async function(...e){return a="invoked",await s(...e)},s.cancel=async function(...e){return a="cancelled",await s(...e)},s.getStatus=function(){return a},s},s=(e,t)=>{let i;return async(...a)=>await new Promise(s=>{i||(i=setTimeout(()=>{clearTimeout(i),i=void 0,s(e(...a))},t))})};function o(e){return new Promise(t=>setTimeout(t,e))}},42855:(e,t,i)=>{i.d(t,{a:()=>n,f:()=>a,l:()=>s,s:()=>o});var a=(e=>(e.expression="expression/",e.raster="Raster.",e.relationship="relationships/",e))(a||{}),s=(e=>(e.cluster="cluster",e.feature="feature",e.mapNotes="mapNotes",e))(s||{}),o=(e=>(e.catalog="catalog",e.catalogFootprint="catalog-footprint",e.csv="csv",e.feature="feature",e.geojson="geojson",e.imagery="imagery",e.imageryTile="imagery-tile",e.knowledgeGraphSublayer="knowledge-graph-sublayer",e.mapImage="map-image",e.ogcFeature="ogc-feature",e.orientedImagery="oriented-imagery",e.parquet="parquet",e.scene="scene",e.stream="stream",e.subtype="subtype",e.tile="tile",e.voxel="voxel",e.wcs="wcs",e.wfs="wfs",e.wms="wms",e))(o||{}),n=(e=>(e.bigInteger="big-integer",e.blob="blob",e.date="date",e.dateOnly="date-only",e.double="double",e.globalId="global-id",e.guid="guid",e.integer="integer",e.long="long",e.number="number",e.oid="oid",e.single="single",e.smallInteger="small-integer",e.string="string",e.timeOnly="time-only",e.timestampOffset="timestamp-offset",e))(n||{})},81094:(e,t,i)=>{i.r(t),i.d(t,{ArcgisMapConfigPopupImage:()=>u});var a=i(73679),s=i(4395),o=i(4265),n=i(85643),l=i(73801),r=(i(9923),i(42097),i(63438),i(18423),i(96086),i(91813),i(21255),i(13078),i(21303),i(12627),i(81565),i(2079)),c=i(98295);const p=s.AH`.popover{--calcite-popover-z-index: 100}.popover-image-div{background-color:var(--calcite-color-foreground-1);padding:var(--calcite-spacing-sm);max-height:calc(60vh - 102px)}.form-input-button{display:flex}.input{width:100%}calcite-text-area{width:100%;--calcite-text-area-min-width: 0;--calcite-text-area-min-height: 42px}.refresh-block-section{background-color:var(--calcite-color-foreground-1)}.refresh-interval-label{margin-top:var(--calcite-spacing-sm)}.refresh-image-input{width:5rem}`;class u extends l.WF{constructor(){super(),this.popoverNode=(0,n._)(),this.panelNode=(0,n._)(),this.refreshIntervalNode=(0,n._)(),this.arcgisMultimediaChange=(0,l.lh)(),this.closePopupPopovers=(0,l.lh)(),this.listenOn(window,"closePopupPopovers",this.closePopupPopoversHandler)}static{this.properties={referenceElement:0,imageMediaInfo:0,mediaIndexPosition:9,popupState:0}}static{this.styles=p}async reposition(){this.popoverNode.value?.reposition()}load(){this.imageMediaInfo.title=this.imageMediaInfo.title||"",this.imageMediaInfo.altText=this.imageMediaInfo.altText||"",this.imageMediaInfo.caption=this.imageMediaInfo.caption||"",this.imageMediaInfo.value.sourceURL=this.imageMediaInfo.value.sourceURL||"",this.imageMediaInfo.value.linkURL=this.imageMediaInfo.value.linkURL||""}loaded(){this.sourceUrlNode.value=this.imageMediaInfo.value.sourceURL,this.imageTitleNode.value=this.imageMediaInfo.title,this.refreshIntervalNode.value.value=this.imageMediaInfo.refreshInterval?`${this.imageMediaInfo.refreshInterval}`:"0",this.imageCaptionNode.value=this.imageMediaInfo.caption,this.imageLinkNode.value=this.imageMediaInfo.value.linkURL,this.imageAltTextNode.value=this.imageMediaInfo.altText,this.panelNode.value?.setFocus()}disconnectedCallback(){super.disconnectedCallback(),this.pickListNode?.remove()}closePopupPopoversHandler(){this.removeAttributesSelectionPopover()}getImageInputObject(e){const{popupState:t}=this,{_messages:i}=t,a={};return a.imageInput=e,a.popoverId=`popoverId_${a.imageInput}`,e===c.I.SOURCE_URL?(a.inputLabel=i.url,a.referenceElement=e=>{this.sourceUrlNode=e},a.inputValue=this.imageMediaInfo.value.sourceURL,a.placeHolder=i.imageUrlPlaceHolder):e===c.I.TITLE?(a.inputLabel=i.title,a.referenceElement=e=>{this.imageTitleNode=e},a.inputValue=this.imageMediaInfo.title,a.placeHolder=i.imageTitlePlaceHolder):e===c.I.CAPTION?(a.inputLabel=i.caption,a.referenceElement=e=>{this.imageCaptionNode=e},a.inputValue=this.imageMediaInfo.caption,a.placeHolder=i.imageCaptionPlaceHolder):e===c.I.ALT_TEXT?(a.inputLabel=i.description,a.referenceElement=e=>{this.imageAltTextNode=e},a.inputValue=this.imageMediaInfo.altText,a.placeHolder=i.describeImage):e===c.I.LINK_URL&&(a.inputLabel=i.link,a.referenceElement=e=>{this.imageLinkNode=e},a.inputValue=this.imageMediaInfo.value.linkURL,a.placeHolder=i.imageLinkUrlPlaceHolder),a}openAttributesList(e){const{popupState:t}=this,{_messages:i}=t;this.pickListNode||(this.pickListNode=(0,l.dN)(s.qy`<arcgis-map-config-popup-field-pick-list .popoverProps=${{refElement:this.panelNode.value}} .heading=${i.addField} .popupState=${t} @arcgisChange=${t=>{t.stopPropagation();const i=t.detail.selectedFields[0];this.handleFieldPickListChange(i,e)}} @arcgisClose=${e=>{e.stopPropagation(),this.removeAttributesSelectionPopover()}}></arcgis-map-config-popup-field-pick-list>`),document.body.appendChild(this.pickListNode),this.panelNode.value.disabled=!0)}handleFieldPickListChange(e,t){switch(t){case c.I.SOURCE_URL:(0,r.a)(this.sourceUrlNode,e);break;case c.I.TITLE:(0,r.a)(this.imageTitleNode,e);break;case c.I.CAPTION:(0,r.a)(this.imageCaptionNode,e);break;case c.I.LINK_URL:(0,r.a)(this.imageLinkNode,e);break;case c.I.ALT_TEXT:(0,r.a)(this.imageAltTextNode,e)}this.changeImageProperties()}changeImageProperties(){this.imageMediaInfo.value.sourceURL=this.sourceUrlNode.value,this.imageMediaInfo.title=this.imageTitleNode.value,this.imageMediaInfo.caption=this.imageCaptionNode.value,this.imageMediaInfo.altText=this.imageAltTextNode.value,this.imageMediaInfo.value.linkURL=this.imageLinkNode.value,this.imageMediaInfo.refreshInterval=Number.isNaN(Number.parseInt(this.refreshIntervalNode.value.value))?0:Number.parseInt(this.refreshIntervalNode.value.value),this.arcgisMultimediaChange.emit(this.mediaIndexPosition)}removeAttributesSelectionPopover(){this.pickListNode&&(this.pickListNode.remove(),this.pickListNode=void 0),this.panelNode.value.disabled=!1}render(){const{popupState:e}=this,{_messages:t}=e;return this.el.classList.add("js-app-flyout"),s.qy`<calcite-popover class="popover" placement=leading-start open pointer-disabled .referenceElement=${this.referenceElement} .offsetDistance=${-Math.round(this.referenceElement.getBoundingClientRect().width)} offset-skidding=50 .label=${t.configureImage} trigger-disabled ${(0,n.K)(this.popoverNode)}><calcite-panel closable style=${(0,l.zl)({width:`${this.referenceElement.getBoundingClientRect().width}px`})} @calcitePanelClose=${()=>this.closePopupPopovers.emit()} ${(0,n.K)(this.panelNode)}><div slot=header-content>${t.configureImage}</div><div class="popover-image-div">${this.renderImageConfigOptions()}</div>${this.renderDoneButton()}</calcite-panel></calcite-popover>`}renderImageConfigOptions(){const{popupState:e}=this,{_messages:t}=e;return s.qy`<div>${this.renderFormInput(c.I.SOURCE_URL)}<calcite-block-section expanded .text=${t.options}>${this.renderFormInput(c.I.TITLE)}${this.renderFormInput(c.I.CAPTION)}${this.renderFormInput(c.I.ALT_TEXT)}${this.renderFormInput(c.I.LINK_URL)}${this.renderRefreshInterval()}</calcite-block-section></div>`}renderFormInput(e){const{popupState:t}=this,{_messages:i,popupTemplate:a}=t,r=this.getImageInputObject(e);return s.qy`<calcite-label scale=s>${r.inputLabel}<div id=${r.popoverId??l.s6} class="form-input-button">${e!==c.I.CAPTION?s.qy`<calcite-input class="input" type=text autofocus .value=${r.inputValue} .placeholder=${r.placeHolder} @calciteInputInput=${(0,o.d)(e=>{e.preventDefault(),e.stopPropagation(),this.changeImageProperties()},300)} ${(0,n.K)(r.referenceElement)}></calcite-input>`:s.qy`<calcite-text-area resize=vertical autofocus .value=${r.inputValue} .placeholder=${r.placeHolder} @calciteTextAreaInput=${(0,o.d)(e=>{e.preventDefault(),e.stopPropagation(),this.changeImageProperties()},300)} ${(0,n.K)(r.referenceElement)}></calcite-text-area>`}${a.fieldInfos?.length&&s.qy`<calcite-action .text=${i.attributes} @click=${()=>this.openAttributesList(r.imageInput)} scale=s icon=brackets-curly></calcite-action>`||""}</div></calcite-label>`}renderRefreshInterval(){const{popupState:e}=this,{_messages:t}=e;return s.qy`<calcite-block-section class="refresh-block-section" .text=${t.refreshInterval} toggle-display=switch .expanded=${!!this.imageMediaInfo.refreshInterval} @calciteBlockSectionToggle=${(0,o.d)(e=>{e.preventDefault(),e.stopPropagation(),this.refreshIntervalNode.value.value="0",this.changeImageProperties()},300)}><calcite-label class="refresh-interval-label" scale=s layout=inline><calcite-input-number class="refresh-image-input" min=0 max=1440 .value=${this.imageMediaInfo.refreshInterval?`${this.imageMediaInfo.refreshInterval}`:"0"} @calciteInputNumberInput=${(0,o.d)(()=>{if(this.refreshIntervalNode.value.value){const e=Number.parseInt(this.refreshIntervalNode.value.value);e<0?this.refreshIntervalNode.value.value="0":e>1440&&(this.refreshIntervalNode.value.value="1440")}this.changeImageProperties()},300)} ${(0,n.K)(this.refreshIntervalNode)}></calcite-input-number>${t.minutes}</calcite-label></calcite-block-section>`}renderDoneButton(){const{popupState:e}=this,{_messages:t}=e;return s.qy`<calcite-button appearance=outline-fill slot=footer width=full @click=${()=>this.closePopupPopovers.emit()}>${t.done}</calcite-button>`}}(0,a.c)("arcgis-map-config-popup-image",u)},98295:(e,t,i)=>{i.d(t,{A:()=>s,C:()=>a,I:()=>n,P:()=>o});var a=(e=>(e.ATTRIBUTES="attributes",e.ATTACHMENTS="attachments",e.CHARTS="charts",e.IMAGES="images",e.RICH_TEXT="richText",e.ARCADE="arcade",e.RELATIONSHIP="relationship",e.ASSOCIATIONS="associations",e.EDIT_INFO_SUMMARY="editInfoSummary",e))(a||{}),s=(e=>(e.PREVIEW="preview",e.LIST="list",e.AUTO="auto",e))(s||{}),o=(e=>(e.IMAGE="image",e.BAR_CHART="bar-chart",e.COLUMN_CHART="column-chart",e.LINE_CHART="line-chart",e.PIE_CHART="pie-chart",e))(o||{}),n=(e=>(e.SOURCE_URL="sourceUrl",e.TITLE="title",e.CAPTION="caption",e.LINK_URL="linkUrl",e.ALT_TEXT="altText",e))(n||{})}}]);