/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-0ef161.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-0ef161"],{931:(e,t,r)=>{r.d(t,{l:()=>a});var n=r(93814);const a=async(e,t)=>(await n.e.exports.loadModules(e,t)).map(e=>e.__esModule&&e.default?e.default:e)},3826:(e,t,r)=>{r.d(t,{a:()=>a,b:()=>o,c:()=>i,d:()=>n});const n=(0,r(37762).c)({typeKeywords:[],customParameters:[],analyzedLocationTypes:[],allowStoredAuth:!0,isSecured:null,checkAuth:!1}),a=n.state,o=n.state,i=n.state},4429:(e,t,r)=>{r.d(t,{a:()=>l,b:()=>u,c:()=>o,d:()=>c,e:()=>a,f:()=>n,g:()=>h,i:()=>p,m:()=>i,t:()=>s,u:()=>d});const n=(e,t)=>{let r,n="idle";const a=(...a)=>new Promise(o=>{switch(n){case"flushed":n="idle",r?(clearTimeout(r),o(e(...a))):o(null);break;case"invoked":clearTimeout(r),n="idle",o(e(...a));break;case"cancelled":clearTimeout(r),n="idle",o(null);break;default:r&&clearTimeout(r),n="pending",r=setTimeout(()=>(n="idle",o(e(...a))),t)}});return a.flush=function(...e){return n="flushed",a(...e)},a.invoke=function(...e){return n="invoked",a(...e)},a.cancel=function(...e){return n="cancelled",a(...e)},a.getStatus=function(){return n},a};function a(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function o(e){return null!=e}async function i(e,t){return await Promise.all([e,s(t)]),e}function s(e){return new Promise(t=>setTimeout(t,e))}const l=(e,t)=>Object.fromEntries((e||[]).map(e=>{const{key:r,data:n}=t(e);return[r,n]})),c=(e,t)=>e.length===t.length&&e.reduce((e,r)=>e&&t.indexOf(r)>-1,!0);function d(e,t){const r=[],n={};return e.forEach(e=>{const a=t(e);null==n[a]&&(n[a]=e,r.push(e))}),r}function u(e){const t={boolean:{},number:{},string:{}},r=[];return e.filter(e=>{let n=typeof e;return n in t?!t[n].hasOwnProperty(e)&&(t[n][e]=!0):!(r.indexOf(e)>=0)&&r.push(e)})}const h=(e,t)=>[...Array(Math.ceil(e.length/t))].map((r,n)=>e.slice(t*n,t+t*n)),p=(e,t)=>e.includes(t)},5821:(e,t,r)=>{r.d(t,{a:()=>s,b:()=>i,g:()=>o,s:()=>a,u:()=>l});var n=r(4429);function a(e,t,r,n){!function(e,t,r){r=r||{};let n=null==r?void 0:r.expires;if("number"==typeof n){const e=new Date,t=24*n*60*60*1e3;e.setTime(Date.now()+t),n=r.expires=e}"string"!=typeof n&&(null==n?void 0:n.toUTCString)&&(r.expires=n.toUTCString());let a,o=`${e}=${encodeURIComponent(t)}`;for(a in r){o+=`; ${a}`;const e=r[a];!0!==e&&(o+=`=${e}`)}document.cookie=o}(e,n?JSON.stringify(t):t,r)}function o(e,t){const r=function(e){const t=document.cookie,r=new RegExp(`(?:^|; )${(0,n.e)(e)}=([^;]*)`),a=t.match(r);return a?decodeURIComponent(a[1]):void 0}(e);return r&&t?JSON.parse(r):r}function i(e,t,r){window.localStorage.setItem(e,r?JSON.stringify(t):t)}function s(e,t){const r=window.localStorage.getItem(e);return r&&t?JSON.parse(r):r}function l(e,t,r){const n=new Date(t);var o;n.setFullYear(t.getFullYear()+1),a(e,r,{expires:n}),r?i(e,"true",!1):(o=e,window.localStorage.removeItem(o))}},39582:(e,t,r)=>{r.r(t),r.d(t,{arcgis_new_item_pages_data_store_select_folder:()=>s});var n=r(87849),a=r(3826),o=r(86686),i=r(95878);r(37762),r(83692),r(59317),r(931),r(93814),r(41473),r(54251),r(58573),r(76246),r(15912);const s=class{constructor(e){(0,n.r)(this,e),this.newItemUpdatePage=(0,n.c)(this,"newItemUpdatePage",7),this.serverFolderPath=null,this.publisherFolderPath="",this.publisherFolderPathIsDriveLetterLocation=!1,this.publisherFolderPathHostname="",this.newServerFolderPath="",this.nfsHostName="",this.nfsSharePath="",this.error=null}async componentWillLoad(){this.i18n=i.u.i18n.dataStoreSelectFolder,this.checkIfDriveLetterLocation(a.a.publisherFolderPath||""),this.publisherFolderPathHostname=a.a.publisherFolderPathHostname,this.serverFolderPath=a.a.serverFolderPath||null,this.newServerFolderPath=a.a.newServerFolderPath,this.nfsHostName=a.a.nfsHostName,this.nfsSharePath=a.a.nfsSharePath}checkIfDriveLetterLocation(e){this.publisherFolderPath=e,this.publisherFolderPathIsDriveLetterLocation=1===e.split(":")[0].length}validateFolderInputs(){if(!this.publisherFolderPath)return this.error="invalidPublisherFolderPath",!1;if(this.publisherFolderPathIsDriveLetterLocation&&!this.publisherFolderPathHostname)return this.error="invalidPublisherHostName",!1;if("newPath"===this.serverFolderPath&&!this.newServerFolderPath)return this.error="invalidServerFolderPath",!1;if("nfsHostAndPath"===this.serverFolderPath){if(!this.nfsHostName&&!this.nfsSharePath)return this.error="invalidNfsHostAndPath",!1;if(!this.nfsHostName&&this.nfsSharePath)return this.error="invalidNfsHostName",!1;if(this.nfsHostName&&!this.nfsSharePath)return this.error="invalidNfsPath",!1}return!0}renderErrorItem(){var e,t;const{i18n:r,error:a}=this;return(0,n.h)("arcgis-new-item-alert",{heading:null===(e=r.errors[a])||void 0===e?void 0:e.heading,description:null===(t=r.errors[a])||void 0===t?void 0:t.description,active:null!==a,onAlertDismiss:()=>{this.error=null}})}handleNext(){this.validateFolderInputs()&&(a.a.publisherFolderPath=this.publisherFolderPath,a.a.serverFolderPath=this.serverFolderPath,this.publisherFolderPathIsDriveLetterLocation&&this.publisherFolderPathHostname?a.a.publisherFolderPathHostname=this.publisherFolderPathHostname:a.a.publisherFolderPathHostname=null,"newPath"===this.serverFolderPath&&this.newServerFolderPath?a.a.newServerFolderPath=this.newServerFolderPath:a.a.newServerFolderPath=null,"nfsHostAndPath"===this.serverFolderPath?(a.a.nfsHostName=this.nfsHostName,a.a.nfsSharePath=this.nfsSharePath):(a.a.nfsHostName=null,a.a.nfsSharePath=null),this.newItemUpdatePage.emit("dataStoreSelectServerList"))}render(){const{i18n:e,publisherFolderPathIsDriveLetterLocation:t}=this;return(0,n.h)("div",{key:"5bedac55612c49efcecea71f8c68efbdb7ffdd5c"},(0,n.h)("arcgis-new-item-description",{key:"ee703937c4ac98c75760209768689ff2657f7ef2",header:e.heading}),(0,n.h)("div",{key:"03945edddb3a47545c2f3b54106e5434094c32df",class:"input-label"},(0,n.h)("calcite-label",{key:"4aa5425cc13abf7ade668a04858f063bc48bc9f2"},e.publisherFolderPath.heading,(0,n.h)("calcite-input",{key:"publisher-folder-path",placeholder:e.publisherFolderPath.placeholder,value:this.publisherFolderPath,required:!0,onCalciteInputChange:e=>{const t=e.target.value;this.checkIfDriveLetterLocation(t)}}))),t&&(0,n.h)("div",{key:"1875aba79d2f556eab6c9bd4a5795789d75f4030",class:"input-label"},(0,n.h)("calcite-label",{key:"96fb766fbd318a90fcc32dcf0323d26e75502bea"},e.publisherFolderPath.hostname,(0,n.h)("calcite-input",{key:"publisher-folder-path-hostname",type:"textarea",value:this.publisherFolderPathHostname,onCalciteInputChange:e=>{const t=e.target.value;this.publisherFolderPathHostname=t}}),(0,n.h)("div",{key:"a10935402a5d75835174b8ff6999de48742cf084",class:"hostname-info"},e.publisherFolderPath.hostnameInfo))),(0,n.h)("div",{key:"01aedd4ffefdd9313cbc6702427cd4553a2b11a7",class:"input-label"},(0,n.h)("calcite-label",{key:"f0b32b9c9e7ddb12409b8dbb8fec2d5ea8f57e89"},e.serverFolderPath.heading)),(0,n.h)("calcite-tile-select-group",{layout:"vertical",key:"server-folder-path-select"},(0,n.h)("calcite-tile-select",{class:"tile-select",key:"publisher-folder-path-select",checked:null===this.serverFolderPath,description:e.serverFolderPath.sameAsPublisher,name:"same-as-publisher-folder-path","input-enabled":!0,width:"full",type:"radio",value:null,onCalciteTileSelectChange:()=>{this.serverFolderPath=null}}),(0,n.h)("calcite-tile-select",{class:"tile-select",key:"new-server-folder-path-select",checked:"newPath"===this.serverFolderPath,description:e.serverFolderPath.newPath,name:"new-path","input-enabled":!0,width:"full",type:"radio",value:"newPath",onCalciteTileSelectChange:()=>{this.serverFolderPath="newPath"}}),(0,o.i)()&&(0,n.h)("calcite-tile-select",{key:"nfs-host-and-path-select",checked:"nfsHostAndPath"===this.serverFolderPath,description:e.serverFolderPath.nfsHostAndPath.description,name:"nfs-host-and-path","input-enabled":!0,width:"full",type:"radio",value:"nfsHostAndPath",onCalciteTileSelectChange:()=>{this.serverFolderPath="nfsHostAndPath"}})),"newPath"===this.serverFolderPath&&(0,n.h)("div",{key:"483a427e805cb68de3b653a10334c541d9a629d8",class:"input-label"},(0,n.h)("calcite-input",{key:"new-server-folder-path",placeholder:e.serverFolderPath.placeholder,value:this.newServerFolderPath,onCalciteInputChange:e=>{const t=e.target.value;this.newServerFolderPath=t}})),"nfsHostAndPath"===this.serverFolderPath&&(0,n.h)("div",{key:"eb711c234dc822b7e06ef522bac2fc10af59aa31"},(0,n.h)("div",{key:"58fbaba0c1cbc6a4795d0f5b07c86610a524b74c",class:"input-label"},(0,n.h)("calcite-label",{key:"a3900b8a1f841f0060787b85438b041cde9b954f"},e.serverFolderPath.nfsHostAndPath.hostname,(0,n.h)("calcite-input",{key:"nfs-hostname",type:"textarea",value:this.nfsHostName,placeholder:"mynfshost.domain.com",onCalciteInputChange:e=>{const t=e.target.value;this.nfsHostName=t}}))),(0,n.h)("div",{key:"cf4af9b83db6f17e78af4070f22891145209761e",class:"input-label"},(0,n.h)("calcite-label",{key:"8443961d633bf71244c7b257b70c250da01c54ae"},e.serverFolderPath.nfsHostAndPath.sharePath,(0,n.h)("calcite-input",{key:"nfs-sharepath",type:"textarea",value:this.nfsSharePath,placeholder:"/data",onCalciteInputChange:e=>{const t=e.target.value;this.nfsSharePath=t}})))),this.renderErrorItem())}};s.style=".input-label{margin-top:1.25rem}.tile-select{margin-bottom:0.125rem}.hostname-info{font-size:0.75rem}"},54251:(e,t,r)=>{r.d(t,{g:()=>a});var n=r(59317);function a(e){var t,r,a,o;return null!=e||(e=null===n.c||void 0===n.c?void 0:n.c.portal),(null===(t=null==e?void 0:e.credential)||void 0===t?void 0:t.token)||(null==e?void 0:e.token)||(null===(a=null===(r=null==e?void 0:e.user)||void 0===r?void 0:r.credential)||void 0===a?void 0:a.token)||(null===(o=null==e?void 0:e.portalUser)||void 0===o?void 0:o.token)||""}},58573:(e,t,r)=>{r.d(t,{a:()=>h,b:()=>P,c:()=>b,d:()=>f,e:()=>S,f:()=>m,g:()=>p,h:()=>y,i:()=>g,j:()=>d,r:()=>c,s:()=>v,u:()=>u});var n=r(59317),a=r(931),o=r(41473),i=r(5821),s=r(76246),l=r(15912);function c(e){return"/"===(null==e?void 0:e.slice(-1))?e.slice(0,e.length-1):e}function d(e){return e.startsWith("/")||e.startsWith("\\")?e.slice(1):e}async function u(e){const[t]=await(0,a.l)(["esri/core/urlUtils"]);let r=t.urlToObject(e);r.query=r.query||{};for(let e in r.query||{})r.query.hasOwnProperty(e)&&(Array.isArray(r.query[e])||(r.query[e]=r.query[e].replace(/(&lt;|&gt;|<|>|%3C|%3E)/g,"")));return r}function h(e){return(null==e?void 0:e.replace(/^.*\//,"").replace(/.[^.]*$/,""))||""}function p(e){const t=(null==e?void 0:e.replace(/^.*\//,"").replace(/\?+.*/,""))||"",r=t.replace(/^.*\./,"").toLowerCase();return l.A.includes(r)?t:""}function f(e){return["WFS","GeoJson","CSV","GeoRSS","KML","OGCFeatureServer","WMS","WMTS","WCS"].includes(e)}function v(e){const{config:t,portal:r}=n.c;let a=!1;if(!e)return!1;if((t.httpsDomains||[]).forEach(t=>{(e.indexOf(`.${t}/`)>-1||e.indexOf(`/${t}/`)>-1)&&(a=!0)}),!a){let t=r.portalHostname;t.indexOf("/")>-1&&(t=t.substring(0,t.indexOf("/"))),e.indexOf(t)>-1&&(a=!0)}return a}function g(e){if(!e)return!1;const{config:t,portal:r}=n.c,a=(0,o.g)(r),i=new URL(a).hostname,s=!1===t.isMultiTenant,l=-1!==e.indexOf(".arcgis.com/"),c=-1!==e.indexOf("//services")||-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features")||-1!==e.indexOf("//locationservices"),d=r.supportsHostedServices&&-1!==e.indexOf(i)&&!s;return l&&c||!l&&d}function b(){var e;if(-1===window.location.protocol.toLowerCase().indexOf("https")){const t=(0,i.g)("esri_auth",!0);return"web"!==(null===(e=null==t?void 0:t.auth_tier)||void 0===e?void 0:e.toLowerCase())}return!0}function m(e){let t=e.toLowerCase();-1==t.indexOf("http://")&&-1==t.indexOf("https://")&&(t=(e="https://"+e).toLowerCase());let r=t.indexOf("//");r=t.indexOf("/",r+2),-1==r?t=(e+="/arcgis/rest/services").toLowerCase():r==t.length-1&&(t=(e+="arcgis/rest/services").toLowerCase());let n=t.indexOf("/arcgis",r);n==t.length-7?t=(e+="/rest/services").toLowerCase():n==t.length-8&&(t=(e+="rest/services").toLowerCase()),n=t.indexOf("/server",r),t.endsWith("/server")?t=(e+="/rest/services").toLowerCase():t.endsWith("/server/")&&(t=(e+="rest/services").toLowerCase());const a=t.indexOf("/rest/services",r),o=t.indexOf("/services",r),i=t.indexOf("/rest",r);return-1==a&&o>-1?t=(e=`${e.substring(0,o)}/rest/services${e.substring(o+9)}`).toLowerCase():-1==a&&i>-1&&(t=(e=`${e.substring(0,i)}/rest/services${e.substring(i+5)}`).toLowerCase()),t.indexOf("/rest/services"),e}const y=(e,t=!1)=>(e=c(e=e.trim()),/(http|https|ftp):\/\/?/.exec(e)||(e=`https://${e}`),!t&&"https:"!==location.protocol||!g(e)&&!v(e)||(e=e.replace("http:/","https:/")),e=e.indexOf("/dynamicLayer?")>-1?e.substring(0,e.indexOf("/dynamicLayer?")):e),S=(e,t=!1)=>{var r,n,a;if(!e)return{error:{code:"invalidUrl"}};if(P(e,t))return{error:{code:"httpWarning"}};const i=decodeURIComponent(e),l=i.replace(o.v,"").match(/((\.|\/)*(kml|kmz))/gi),c=i.replace(o.v,"").match(/((\/|\=)(wmts|wms|wfs|wcs))/gi),d=i.replace(o.v,"").match(/((\/|\=)(OGC|OGCFeatureServer))/gi),u=i.replace(o.v,"").match(/((\.|\/)*(rss))/gi),h=null===(r=i.replace(o.v,"").match(o.r))||void 0===r?void 0:r[1],p=i.replace(o.v,"").match(o.c),f=i.replace(o.v,"").match(/((\.|\/)*(csv))/gi),v=i.replace(o.v,"").match(/(\.|\/)((\$?{(z|level)})\/*(\$?{(x|col)})\/*(\$?{(y|row)}))/gi);let g=null;if(i.match(o.h))g="GeoJson";else if(!d||c||h)if(h&&!c)g=s.a[h];else if(p)g="Map Service";else if(c){const e="/"===(null==c?void 0:c[0].charAt(0))?"/":"=";g=null===(a=null===(n=null==c?void 0:c[0])||void 0===n?void 0:n.split(e)[1])||void 0===a?void 0:a.toUpperCase()}else l?g="KML":u?g="GeoRSS":f?g="CSV":v?g="Tile Layer":i.endsWith("KnowledgeGraphServer")&&(g="Knowledge Graph");else g="OGCFeatureServer";return{result:g}},P=(e,t)=>!t&&e.includes("http://")},76246:(e,t,r)=>{r.d(t,{a:()=>n,i:()=>a});const n={FeatureServer:"Feature Service",GeocodeServer:"Geocoding Service",GeoDataServer:"Geodata Service",GeometryServer:"Geometry Service",GeoenrichmentServer:"Geoenrichment Service",GPServer:"Geoprocessing Service",GlobeServer:"Globe Service",ImageServer:"Image Service",MapServer:"Map Service",NAServer:"Network Analysis Service",ElevationServer:"Image Service",VectorTileServer:"Vector Tile Service",SceneServer:"Scene Service",StreamServer:"Stream Service",WMServer:"Workflow Manager Service",TiledImageServer:"Image Service",VideoServer:"Video Service",KnowledgeGraphServer:"Knowledge Graph Layer"},a=e=>!!Object.values(n).includes(e)},83692:(e,t,r)=>{r.d(t,{a:()=>v,b:()=>f,c:()=>p,f:()=>u,g:()=>y,i:()=>h,p:()=>m,r:()=>g});var n=r(59317),a=r(4429),o=r(931),i=r(41473),s=r(54251);const l={},c={},d={};async function u(e,t,r,n){var a,o,i,s;const u=null===(o=null===(a=d[t])||void 0===a?void 0:a[r])||void 0===o?void 0:o.expireAt,h=!!u&&(new Date).getTime()>u;if((null===(i=l[t])||void 0===i?void 0:i[r])&&!h)return l[t][r];c[t]||(c[t]={}),c[t][r]&&!h||(c[t][r]=e());const p=await c[t][r];if(l[t]||(l[t]={}),d[t]||(d[t]={}),l[t][r]=p,n){const{expireAfter:e,getExpireAfterFromResult:a}=n,o=a||e?(new Date).getTime()+(null!==(s=null==a?void 0:a(p))&&void 0!==s?s:e):null;d[t][r]=Object.assign(Object.assign({},d[t][r]),{expireAt:o})}return p}function h(e,t){var r;return null===(r=null==l?void 0:l[e])||void 0===r?void 0:r[t]}const p=(e,t)=>{var r,n;t?(null===(r=l[e])||void 0===r||delete r[t],null===(n=c[e])||void 0===n||delete n[t]):(delete l[e],delete c[e])};function f(e){var t,r;return null!==(t=null==e?void 0:e.id)&&void 0!==t?t:null===(r=null==e?void 0:e.sourceJSON)||void 0===r?void 0:r.id}async function v(e,t,r={},n){const[a]=await(0,o.l)(["esri/request"]);e.includes("f=")||t.append("f","json");const i=(0,s.g)();return i&&!t.has("token")&&t.append("token",i),new Promise((o,i)=>{a(e,Object.assign(Object.assign({body:t},r),{timeout:r.timeout||0,method:n||"auto"})).then(e=>{o(e.data)}).catch(e=>i(e))})}async function g(e,t={},r={},a,i){const[s]=await(0,o.l)(["esri/request"]),{api:l,portal:c}=n.c,{customToken:d,addTokenManually:u,addSSL:h,useProxy:p}=r,f=Object.assign({},t);if(e.includes("f=")||!0===(null==i?void 0:i.excludeJson)||(f.f="json"),d)f.token=d;else if(!1!==u){const e=await y(c);e&&(f.token=e)}const v=!1===h?e:function(e){var t;const{config:r}=n.c;return"https:"===window.location.protocol||!0===(null===(t=null==r?void 0:r.self)||void 0===t?void 0:t.allSSL)?e.replace("http:","https:"):e}(e);if(3===l){const e=Object.assign({url:v,content:f,timeout:r.timeout||0},null==i?void 0:i.v3Request);r.withCredentials&&(e.withCredentials=r.withCredentials);return s(e,"post"===a?Object.assign({usePost:!0},r):r)}{const e=Object.assign(Object.assign(Object.assign({query:f,method:a||"auto"},r),{timeout:r.timeout||0,useProxy:p}),(null==r?void 0:r.disableIdentityLookup)?{authMode:"anonymous"}:{});return(await s(v,e)).data}}const b=[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,15,15,30,30,30,30,30,30,30,30,30,30,120];const m=async(e,t,r)=>{var n,o;const i=null!==(n=null==t?void 0:t.pendingStatuses)&&void 0!==n?n:["processing","partial","Pending","InProgress","EXECUTING"],s=null!==(o=null==t?void 0:t.successStatuses)&&void 0!==o?o:["completed","Completed","COMPLETED"];let l=0;const c=async()=>{const n=await g(e,null==t?void 0:t.requestParams,{},r),o=n.status||n.jobStatus;if(i.includes(o))return await(0,a.t)((d=l++,1e3*b[d>-1&&d<b.length-1?d:b.length-1])),c();if(s.includes(o)||"failed"===o||"esriJobFailed"===o)return n;throw n;var d};try{return c()}catch(e){throw console.error(e),e}},y=async e=>{var t;if(!(null==e?void 0:e.isPortal)||!(0,i.i)(e))return(0,s.g)(e);if(!(null==e?void 0:e.user)&&!(null==e?void 0:e.portalUser)&&(0,i.i)(e))return;const{token:r}=await u(()=>S(e),"platformSelf",null!==(t=f(e.user))&&void 0!==t?t:e.id,{getExpireAfterFromResult:e=>e.expires_in});return r},S=async e=>{const t=await(async e=>{var t,r;const[n]=await(0,o.l)(["esri/identity/IdentityManager"]);return null!==(r=null===(t=(await u(()=>n.getCredential((0,i.g)(e),{oAuthPopupConfirmation:!1}),"credential",f(e.user))).oAuthState)||void 0===t?void 0:t.appId)&&void 0!==r?r:"arcgisonline"})(e),r={"X-Esri-Auth-Client-Id":t,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")};return g(`${(0,i.g)(e)}/oauth2/platformSelf`,{},{disableIdentityLookup:!0,headers:r,addTokenManually:!1,withCredentials:!0},"post",{v3Request:{headers:r}})}},86686:(e,t,r)=>{r.d(t,{a:()=>s,b:()=>h,c:()=>i,d:()=>u,e:()=>y,f:()=>l,g:()=>f,h:()=>S,i:()=>m,j:()=>c,k:()=>d});var n=r(83692),a=r(59317),o=r(58573);function i(e,t){const r={type:"folder",path:`/fileShares/${t}`,info:{dataStoreConnectionType:"shared",path:e.publisherFolderPath,hostName:e.publisherFolderPathHostname}};return"newPath"===e.serverFolderPath?(r.clientPath=e.publisherFolderPath,r.info.path=e.newServerFolderPath,r.info.dataStoreConnectionType="replicated"):"nfsHostAndPath"===e.serverFolderPath&&(r.clientPath=e.publisherFolderPath,r.provider="UserManaged",r.info.dataStoreConnectionType="replicated",r.info.fileServerPath=e.nfsSharePath,r.info.fileServerHost=e.nfsHostName,r.info.fileServerType="nfs"),r}function s(e,t){const r={type:"egdb",path:"/enterpriseDatabases/"+t,info:{dataStoreConnectionType:"shared"}};return"newConnection"===e.serverDatabaseOption?(r.info.connectionString=e.serverConnectionString,r.info.clientConnectionString=e.publisherConnectionString,r.info.dataStoreConnectionType="replicated"):"bigquery"===e.databaseProvider||"snowflake"===e.databaseProvider?(r.info.JDBCConnection=e.jdbcConnection,r.info.implementation=e.databaseProvider):"databricks"===e.databaseProvider?(r.provider=e.databaseProvider,r.info.connectionProperties=e.connectionProperties,r.info.implementation=e.databaseProvider):r.info.connectionString=e.publisherConnectionString,r}const l=async(e,t,r,n)=>{let a,o;if((null==r?void 0:r.length)>0){try{o=JSON.parse(r)}catch(e){return{error:{code:"invalidJSON"}}}a=function(e,t){const{type:r,project_id:n,private_key_id:a,private_key:o,client_email:i,client_id:s,auth_uri:l,token_uri:c,auth_provider_x509_cert_url:d,client_x509_cert_url:u}=t,h={oAuthType:0,projectId:e,url:"jdbc:bigquery://https://www.googleapis.com/bigquery/v2:443",oAuthPvtKeyFile:{type:r,project_id:n,private_key_id:a,private_key:o,client_email:i,client_id:s,auth_uri:l,token_uri:c,auth_provider_x509_cert_url:d,client_x509_cert_url:u}};return h}(e,o)}else(null==n?void 0:n.length)>0&&(a=function(e,t,r){const n={name:"BigqueryArcgisPlatform_RefreshToken",className:"com.esri.sds.bigquery.jdbc.GBQDataSource",oAuthType:2,projectId:e,defaultDataset:t,url:"jdbc:bigquery://https://www.googleapis.com/bigquery/v2:443",oAuthRefreshToken:r};return n}(e,t,n));return{result:{type:"egdb",path:"/enterpriseDatabases/bigQuerySvrDevDataJdbc",id:null,clientPath:null,info:{implementation:"bigquery",JDBCConnection:a}}}};function c(e){let t;const{server:r,httpPath:n,catalog:a,clientId:o,secret:i,token:s,authenticationType:l}=e,c=Object.assign({hostname:r,port:443,httpPath:n},a?{catalog:a}:{});return"oAuthMachineToMachine"===l?t=Object.assign({authenticationScheme:"oauth2",authenticationFlow:"machineToMachine",oauth2ClientId:o,oauth2Secret:i},c):"personalAccessToken"===l&&(t=Object.assign({authenticationScheme:"personalAccessToken",token:s},c)),{path:"/enterpriseDatabases/databricks",type:"egdb",provider:"databricks",info:{implementation:"databricks",connectionProperties:t}}}function d(e){let t;const{authenticationType:r,user:n,database:a,role:o,server:i,warehouse:s,schema:l,password:c,keyFile:d,passcode:u}=e,h={user:n,database:a,role:o,connectionUrl:`jdbc:snowflake://${i}`,warehouse:s,schema:l};return t="keyPair"===r?Object.assign(Object.assign({},h),{passcode:u||void 0,authenticator:"snowflake_jwt",keyfile:d}):Object.assign(Object.assign({},h),{password:c,authenticator:"snowflake"}),{path:"/enterpriseDatabases/snowflakeJdbc",type:"egdb",info:{implementation:"snowflake",JDBCConnection:t}}}function u(e,t){if("Arango"===e.noSqlProvider){const t={type:"nosql",path:"/nosqlDatabases/Arango_enterprise",info:{systemManaged:!1,dsFeature:"graphStore",isManagedData:!1,category:"database",factory:"nosql",provider:"ArangoDB",implementation:"ArangoDB",purposes:["knowledge-graph"],connectionProperties:{hosts:[],useSsl:e.useSsl,username:e.username,password:e.password,database:e.database}}};return""!==e.hosts?t.info.connectionProperties.hosts=e.hosts.split(","):delete t.info.connectionProperties.hosts,t}const r={type:"nosql",path:`/nosqlDatabases/${t}`,info:{provider:"Neo4J",isManaged:!1,dsFeature:"graphStore",factory:"nosql",implementation:"Neo4j",category:"database",systemManaged:!1,isManagedData:!1,purposes:["knowledge-graph"],connectionProperties:{connectionUri:e.connectionUri,username:e.username,password:e.password,database:e.database,fallbackServerAddresses:[]}}};return""!==e.fallBackServers?r.info.connectionProperties.fallbackServerAddresses.push(e.fallBackServers.split(",")):delete r.info.connectionProperties.fallbackServerAddresses,r}function h(e,t){const r=e.provider,n={info:{}},a={credentialType:"accesskey"};return"amazon"===r&&("accessKey"===e.credentialType?(a.accessKeyId=e.accessKey,a.secretAccessKey=e.secretKey):a.credentialType=e.credentialType,"custom"===e.selectedRegion.id?a.regionEndpointUrl=e.storageURL:(a.regionEndpointUrl=p(e.regions,e.selectedRegion),a.region=e.selectedRegion.id),n.info.objectStore=e.bucketName,n.provider="amazon"),"google"===r&&(a.accessKeyId=e.accessKey,a.secretAccessKey=e.secretKey,a.regionEndpointUrl="https://storage.googleapis.com",n.info.objectStore=e.bucketName,n.provider="Google"),"azure"!==r&&"azuredatalakegen2store"!==r||("sharedKey"===e.azureAuthenticationType?(a.credentialType="accessKey",a.accountKey=e.accountKey):"activeDirectory"===e.azureAuthenticationType?(a.credentialType=e.azureIdentityType,"servicePrincipal"===e.azureIdentityType?(a.tenantId=e.tenantId,a.clientId=e.clientId,a.clientSecret=e.clientSecret,a.authorityHost=e.authorityHost):"userAssignedIdentity"===e.azureIdentityType&&(a.managedIdentityClientId=e.clientId)):"sasToken"===e.azureAuthenticationType?(a.credentialType=e.azureAuthenticationType,a.sasToken=e.token):"anonymous"===e.azureAuthenticationType&&(a.credentialType=e.azureAuthenticationType),"other"===e.environment.id||"anonymous"===e.azureAuthenticationType?a.regionEndpointUrl=e.endpoint:a.accountEndpoint=p(e.regions,e.environment),"azure"===r?(n.info.objectStore=e.containerName,n.provider="azure"):(n.info.folder=e.cloudFolder?`${e.containerName}/${(0,o.j)(e.cloudFolder)}`:e.containerName,n.provider="azureDataLakeStore"),"azureGeocatalog"===e.selectedServiceType?(a.tokenGenerationUrl=e.tokenGenerationUrl,a.scopes=[e.scope]):"microsoftPlanetaryComputers"===e.selectedServiceType&&(a.tokenGenerationUrl=e.tokenGenerationUrl),"anonymous"===e.azureAuthenticationType&&"microsoftPlanetaryComputers"!==e.selectedServiceType||(a.accountName=e.accountName)),"alibaba"===r&&(a.accessKeyId=e.accessKey,a.secretAccessKey=e.secretKey,n.info.objectStore=e.bucketName,n.provider="Alibaba",a.regionEndpointUrl="custom"===e.selectedRegion.id?e.storageURL:p(e.regions,e.selectedRegion)),a.defaultEndpointsProtocol="https",e.cloudFolder&&"azuredatalakegen2store"!==r&&(n.info.objectStore=n.info.objectStore+"/"+(0,o.j)(e.cloudFolder)),n.type="cloudStore",["azureGeocatalog","microsoftPlanetaryComputers"].includes(e.selectedServiceType)&&("azureGeocatalog"===e.selectedServiceType?n.path="/cloudStores/azureGeocatalog":n.path="/cloudStores/microsoftPlanetaryComputers"),n.path="/cloudStores/"+t,n.info.connectionString=JSON.stringify(a),n}function p(e,t){let r;return e.forEach(function(e){e.id===t.id&&(r=e.blobStoreEndpoint||e.storageEndpointSuffix)}),r}const f=async(e,t)=>{const r=e.results.out_connectionString.paramUrl,a=`${t}/Get%20Database%20Connection%20String/jobs/${e.jobId}/${r}`,o=await(0,n.r)(a);return v(o)},v=e=>{const t=e.value;return{connectionStringProps:g(t),connectionString:t}},g=e=>{let t=[];return e&&e.split(";").forEach(e=>{const r=e.split("=");2!==r.length||b(t,r[0])||t.push({key:r[0],value:r[1]})}),t},b=(e,t)=>e.some(e=>e.key===t),m=()=>{var e;const t=a.c.portal,r=null===(e=t.sourceJSON)||void 0===e?void 0:e.portalDeploymentType;return t.isPortal&&"ArcGISEnterpriseOnKubernetes"===r},y=e=>{if(!e)return"";return`${e}/rest/services/System/PublishingTools/GPServer`},S=(e,t,r,n)=>{var a;return Object.assign(Object.assign({},e),{children:null===(a=e.children)||void 0===a?void 0:a.filter(e=>{const a=e.type;let o=!1;return"folder"===a||("tile-layer"===r?o||(o="tiles"===n&&"cacheDataset"===a||"vectorTiles"===n&&"vectorCacheDataset"===a):"scene-layer"===r&&(o=P(e,a,t,n)),o)})})},P=(e,t,r,n)=>{let a=!1;return r?"lasd"===e.path.split(".").pop().toLowerCase()?a=!1:a||(a="LASDataset"===t||"LIDARExchangeFile"===t):"3dTiles"===n&&"3DTilesDataset"===t?a=!0:a||(a="extractedScenePackage"===t||"i3sRestCache"===t),a}},95878:(e,t,r)=>{r.d(t,{a:()=>n,u:()=>a});const n=(0,r(37762).c)({nextText:"next",cancelText:"cancel",workflow:"content",scale:"m",disableScroll:!1,onlyHosted:!1,featureFlags:{}}),a=n.state}}]);