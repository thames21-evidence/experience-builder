/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-7a465c.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-7a465c"],{20583:(e,t,o)=>{o.r(t),o.d(t,{ArcgisMapConfigSmartMappingThemeButton:()=>d});var s=o(73679),i=o(4395),n=o(85643),r=o(1225),a=(o(54312),o(44345),o(55448),o(52797),o(34031),o(63438),o(5933),o(89704),o(5294),o(18423),o(96086),o(91813),o(21255),o(13078),o(21303),o(12627),o(56451),o(31521),o(23054),o(5077),o(23795),o(17902),o(87420),o(30161),o(81734),o(65595)),l=(o(77462),o(49403),o(10281),o(83930),o(66617),o(10628),o(59640),o(64451),o(6176),o(10454),o(29614),o(94916),o(52554),o(2156),o(4038),o(49851),o(75054),o(15223),o(70169),o(47207),o(70852),o(48103),o(39423),o(85681),o(18444),o(42411),o(9767),o(38218),o(91914),o(86605),o(68196),o(440),o(46547),o(28927),o(6238),o(7299),o(73801)),c=(e=>(e.highToLow="HighToLow.svg",e.aboveAndBelow="AboveAndBelow.svg",e.above="Above.svg",e.below="Below.svg",e.centeredOn="CenteredOn.svg",e.extremes="Extremes.svg",e.referenceSize="ReferenceSize.svg",e.spike="Spike.svg",e))(c||{});const h=i.AH`.theme-button{display:flex;padding:6px;justify-content:space-between;align-items:center;border-radius:0;cursor:pointer;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-1);border-color:var(--calcite-color-foreground-3);border-width:1px;border-style:solid;box-shadow:transparent 0 0 0 1px inset}.theme-button:hover{box-shadow:inset 0 0 0 1px var(--calcite-color-foreground-3)}.theme-button:active{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3)}.theme-button:focus{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3);outline:2px solid var(--calcite-color-brand);outline-offset:2px}.theme-button.active,.calcite-theme-button.active{outline:1px solid var(--calcite-ui-focus-color, var(--calcite-color-brand))}.theme-content{display:flex;align-items:center;width:100%}.theme-sub-content{display:flex;justify-content:space-between;align-items:center;width:100%}.theme-button-icon{min-width:16px;background-repeat:no-repeat;height:48px;padding:0;display:inline-block}.theme-button-text{display:inline-block;padding:0 10px}.theme-button-title{font-weight:700}.theme-button-msg{font-size:80%;line-height:16px}`;class d extends l.WF{constructor(){super(...arguments),this.open=!1,this.themeInfos=[],this.smartMappingState=(0,a.u)(),this.buttonVersion="default",this.arcgisSmartMappingThemeButtonBeforeOpen=(0,l.lh)(),this.arcgisSmartMappingThemeButtonChange=(0,l.lh)()}static{this.properties={rendererSubtype:1,buttonVersion:1}}static{this.styles=h}async setFocus(){"minimal"===this.buttonVersion?this.buttonNode?.setFocus():this.buttonNode?.focus()}load(){this.smartMappingState&&(this.populateThemeInfo(),this.setSelection())}disconnectedCallback(){super.disconnectedCallback(),(0,r.f)()}setSelection(){const{smartMappingState:e}=this,t=(0,r.g)(e),o=t.authoringInfo,s=(0,r.p)((0,r.g)(e),"color"),i=(0,r.p)((0,r.g)(e),"size"),n=(0,r.p)(t,"reference-size"),a=(0,r.p)(t,"spike"),l=n&&"size"===this.rendererSubtype?"reference-size":a&&"size"===this.rendererSubtype?"spike":o?.univariateTheme||("size"===this.rendererSubtype?i?.theme:s?.theme);this.selectedThemeInfo=l?this.themeInfos.find(e=>e.value===l):this.themeInfos.find(e=>"high-to-low"===e.value),this.themeInfos.forEach(e=>{e.selected=e.value===this.selectedThemeInfo.value})}closeDropdown(){this.open=!1,this.dropdownNode?.remove(),this.buttonNode?.classList?.remove("active")}openThemeDropdown(){const{smartMappingState:e}=this;this.open?this.closeDropdown():(this.arcgisSmartMappingThemeButtonBeforeOpen.emit(),this.dropdownNode=(0,l.dN)(i.qy`<arcgis-map-config-smart-mapping-dropdown .smartMappingState=${e} .buttonNode=${this.buttonNode} .infos=${this.themeInfos} @arcgisSmartMappingDropdownClose=${e=>{this.closeDropdown(),"Escape"===e.detail&&this.setFocus()}} @arcgisSmartMappingDropdownChange=${e=>this.setTheme(e.detail)} @arcgisSmartMappingDropdownDisconnected=${()=>{this.closeDropdown()}}></arcgis-map-config-smart-mapping-dropdown>`),this.buttonNode.classList.add("active"),document.body.appendChild(this.dropdownNode),this.open=!0)}setTheme(e){const{smartMappingState:t}=this,o=(0,r.ab)(t,this.rendererSubtype),s=e.value;if(s===o)return this.closeDropdown(),void setTimeout(()=>{this.setFocus()},300);this.selectedThemeInfo=e,this.themeInfos.forEach(e=>e.selected=e.value===this.selectedThemeInfo.value),this.arcgisSmartMappingThemeButtonChange.emit(s),this.closeDropdown(),setTimeout(()=>{this.setFocus()},300)}populateThemeInfo(){const{smartMappingState:e}=this,{layer:t,mapImageSublayer:o,_messages:s}=e,i=o&&t.version>=11,n=(0,r.d)(e),a=["color-age","size-age"].includes(n)||"size"!==this.rendererSubtype&&["color-age-size"].includes(n)||"size"===this.rendererSubtype&&["color-size-age","type-size-age"].includes(n),l=(0,r.g)(e),h="univariate-color-size"===l.authoringInfo?.type,d="color-size"===n&&h?(0,r.c)((0,r.g)(e),"size"):(0,r.c)((0,r.g)(e),this.rendererSubtype),u=(0,r.p)(l,"reference-size"),p=(0,r.p)(l,"spike"),m=d?d.field:u?u.field:p?p.field:l.field,g=(0,r.K)(e,m),b=g?.simpleFieldType===r.J.DATE&&!a,f="color-size"===n&&h?"ColorAndSize_":"color"===this.rendererSubtype?"Color_":"Size_";this.themeInfos.push({value:"high-to-low",title:b?s.themeButton.newToOld:s.themeButton.highToLow,msg:b?s.themeButton[this.rendererSubtype].newToOldMsg:s.themeButton[this.rendererSubtype].highToLowMsg,iconPath:`${f}${c.highToLow}`,selected:!1}),("color"===n||"color-size"===n&&"size"!==this.rendererSubtype&&(!o||i))&&this.themeInfos.push({value:"above-and-below",title:b?s.themeButton.beforeAndAfter:s.themeButton.aboveAndBelow,msg:b?s.themeButton[this.rendererSubtype].beforeAndAfterMsg:s.themeButton[this.rendererSubtype].aboveAndBelowMsg,iconPath:`${f}${c.aboveAndBelow}`,selected:!1}),this.themeInfos.push({value:"above",title:b?s.themeButton.after:s.themeButton.above,msg:b?s.themeButton[this.rendererSubtype].afterMsg:s.themeButton[this.rendererSubtype].aboveMsg,iconPath:`${f}${c.above}`,selected:!1}),this.themeInfos.push({value:"below",title:b?s.themeButton.before:s.themeButton.below,msg:b?s.themeButton[this.rendererSubtype].beforeMsg:s.themeButton[this.rendererSubtype].belowMsg,iconPath:`${f}${c.below}`,selected:!1}),"color"===n&&(this.themeInfos.push({value:"centered-on",title:s.themeButton.centered,msg:s.themeButton[this.rendererSubtype].centeredMsg,iconPath:`${f}${c.centeredOn}`,selected:!1}),this.themeInfos.push({value:"extremes",title:s.themeButton.extremes,msg:s.themeButton[this.rendererSubtype].extremesMsg,iconPath:`${f}${c.extremes}`,selected:!1})),!o&&"size"===this.rendererSubtype&&(0,r.V)(g)&&(0,r.o)(e)&&!b&&this.themeInfos.push({value:"reference-size",title:s.themeButton.referenceSize,msg:s.themeButton.size.referenceSizeMsg,iconPath:`${f}${c.referenceSize}`,selected:!1}),!o&&"size"===this.rendererSubtype&&(0,r.V)(g)&&((0,r.m)(e)||(0,r.o)(e))&&!b&&this.themeInfos.push({value:"spike",title:s.themeButton.spike,msg:s.themeButton.size.spikeMsg,iconPath:`${f}${c.spike}`,selected:!1})}buttonRefHandler(e){e&&(this.buttonNode=e)}render(){return this.smartMappingState?"minimal"===this.buttonVersion?this.renderMinimalButton():this.renderDefaultButton():""}renderDefaultButton(){const{_messages:e}=this.smartMappingState;return i.qy`<calcite-label>${e.themeButton.theme}<div class="theme-button" role=button tabindex=0 aria-haspopup=true .ariaLabel=${e.themeButton.selectTheme} @keydown=${e=>{(" "===e.key||"Enter"===e.key)&&(e.preventDefault(),e.stopPropagation(),this.openThemeDropdown())}} @click=${e=>{e.stopPropagation(),this.openThemeDropdown()}} ${(0,n.K)(this.buttonRefHandler)}><div class="theme-content"><div class="theme-button-icon" style=${(0,l.zl)({backgroundImage:`url(${(0,s.g)("./assets/map-config-smart-mapping/map-config-smart-mapping-dropdown-images/")}${this.selectedThemeInfo.iconPath})`})}></div><div class="theme-sub-content"><div class="theme-button-text"><div class="theme-button-title">${this.selectedThemeInfo.title}</div><div class="theme-button-msg">${this.selectedThemeInfo.msg}</div></div><div><calcite-icon scale=s icon=chevron-down></calcite-icon></div></div></div></div></calcite-label>`}renderMinimalButton(){const{_messages:e}=this.smartMappingState;return i.qy`<calcite-label @click=${e=>e.stopImmediatePropagation()}>${e.themeButton.theme}<calcite-button class="calcite-theme-button" alignment=icon-end-space-between icon-end=chevron-down appearance=outline-fill width=full role=button kind=neutral aria-haspopup=true .label=${e.themeButton.selectTheme} @keydown=${e=>{(" "===e.key||"Enter"===e.key)&&(e.preventDefault(),e.stopPropagation(),this.openThemeDropdown())}} @click=${e=>{e.stopPropagation(),this.openThemeDropdown()}} ${(0,n.K)(this.buttonRefHandler)}>${this.selectedThemeInfo.title}</calcite-button></calcite-label>`}}(0,s.c)("arcgis-map-config-smart-mapping-theme-button",d)},65595:(e,t,o)=>{o.d(t,{c:()=>r,u:()=>a});var s=o(20936),i=o(1225),n=(o(54312),o(44345),o(55448),o(52797),o(34031),o(63438),o(5933),o(28927),o(83368),o(89704),o(5294),o(18423),o(96086),o(91813),o(21255),o(13078),o(21303),o(12627),o(56451),o(31521),o(23054),o(5077),o(23795),o(17902),o(87420),o(30161),o(81734),o(75698),o(10628),o(59640),o(64451),o(6176),o(83552));o(77462),o(49403),o(10281),o(83930),o(66617),o(10454),o(29614),o(94916),o(52554),o(2156),o(4038),o(49851),o(75054),o(15223),o(70169),o(47207),o(70852),o(48103),o(39423),o(85681),o(18444),o(42411),o(9767),o(38218),o(91914),o(86605),o(68196),o(440),o(46547),o(6238),o(7299);function r(e){e.selectedFields=[],e.layerFields=void 0,e.fields=void 0,e.hideLayerTitle=!1,e.supportsArcade=!1,e.stringFieldsCount=-1,e.dateFieldsCount=-1,e.numberFieldsCount=-1,e.containsFlow=!0,e.oneFeatureResponseStatus=i.s.MISSING,e.selectedAttribute=void 0,e.selectedAttributeText=void 0,e.selectedTypeValue=void 0,e.selectedValue=void 0,e.lastDefault=void 0,e.lastDefaults=void 0,e.dotColorSelected=void 0,e.backgroundStyleSelected=void 0,e.lastSettings=void 0,e.classedSymbolSelectedIdx=void 0,e.allUniqueValues=void 0,e.useFeatureReduction=void 0,e.symbolStylerConfig={},e.allowTimeSeriesConfiguration=!1,e.rasterInfo=void 0}function a(){const e=(0,n.Gk)(),t=e;e.manager.onLoad(()=>{t.smartMappingState=function(e,t){const o=l.get(e);if(o)return o;const i=(0,s.el)(e,t);return i&&"store"in i?(l.set(e,i.store),i.store):null}(e.el,"arcgis-map-config-smart-mapping")})}const l=new WeakMap}}]);