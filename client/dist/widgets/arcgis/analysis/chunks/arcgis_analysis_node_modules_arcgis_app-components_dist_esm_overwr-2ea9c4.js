/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_overwr-2ea9c4.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_overwr-2ea9c4"],{12906:(e,r,t)=>{t.d(r,{a:()=>x,b:()=>j,c:()=>v,d:()=>S,f:()=>b,g:()=>I,p:()=>f,r:()=>k,u:()=>h});var n=t(88878),i=t(3826),a=t(74695),o=t(98704),s=t(1536),c=t(24869),l=t(26854),p=t(62645),u=t(44069),d=t(83692);const g=(e,r)=>{const t=!!r.overwrite,n=(e=>{const{name:r,title:t,tags:n,type:i,typeKeywords:a,accessInformation:o,licenseInfo:s,description:c,snippet:l,extent:p}=e,u={name:r,title:t,tags:n,type:i,typeKeywords:a,accessInformation:o,licenseInfo:s,description:c,snippet:l,extent:p};return Object.entries(u).reduce((e,r)=>{const[t,n]=r;return e[t]=n||"",e},u)})(e),i=new FormData;return Object.keys(n).forEach(e=>{var t;"description"===e||"snippet"===e||"extent"===e?i.append(e,r.keepDescription?n[e]:""):i.append(e,null!==(t=n[e])&&void 0!==t?t:"")}),i.set("filename",r.fileName),i.set("multipart",String(r.multipart)),i.set("overwrite","true"),i.set("async","true"),i.set("file",r.file,e.title),t&&i.set("overwriteService","on"),i.set("useDescription","on"),i},m=(e,r)=>{const t=e.querySelector(r);return(0,l.h)((null==t?void 0:t.innerHTML)||"")},y=(e,r)=>{const t=Object.assign({},r);t.name=e.name,t.sourceSR=e.sourceSR,t.targetSR=e.targetSR,t.fieldTypesVersion="V2";for(let e=0;e<t.tables.length;e++)"Review"!=t.tables[e].name&&(t.layers[t.layers.length]=t.tables[e]);for(let r of t.layers)t.layers[r.id]=Object.assign({},e.layers[r.id]);return t},f=async(e,r,t,i,a)=>{var s,c;const l=await v(e,t,i,a),p=(0,n.g)(await(0,n.f)(e.owner,t),t),u=await(0,o.p)({itemId:a.sourceData.id,user:i,portal:t,title:r,itemOwnerUrl:p},l);if(null==u?void 0:u.error)return{error:{code:"unhandledError"}};const d=null===(c=null===(s=u.result)||void 0===s?void 0:s.services)||void 0===c?void 0:c[0];return{result:{id:null==d?void 0:d.serviceItemId,jobId:null==d?void 0:d.jobId,serviceType:null==d?void 0:d.type,serviceUrl:null==d?void 0:d.serviceurl,overwriteStatus:""}}},v=async(e,r,t,n,i)=>{const{result:a}=await w(e,r,!1,t);return((e,r,t,n)=>{var i,a,o,s,c,l;let p;const d=t.publishParameters,g=null!==(i=t.sourceData)&&void 0!==i?i:r;if(t.cloudProviderInfo){const e=t.cloudProviderInfo;p="zip"===(null==e?void 0:e.mimeType)?null==e?void 0:e.zipItemType:u.b[null==e?void 0:e.mimeType]}else p=null===(a=t.sourceData)||void 0===a?void 0:a.type;const m={itemId:null!=n?n:g.id,filetype:u.A[p.toLowerCase()],overwrite:!0,deleteSourceItemUponCompletion:!!n};let f;const v=(null===(s=null===(o=null==t?void 0:t.adminServiceInfo)||void 0===o?void 0:o.adminServiceInfo)||void 0===s?void 0:s.name)||(null===(c=t.itemData)||void 0===c?void 0:c.title);switch(p){case"CSV":const t=Object.assign(Object.assign({},null===(l=e.layers)||void 0===l?void 0:l[0]),{fields:d.layerInfo.fields});f=Object.assign(Object.assign({layerInfo:t,name:d.name||v.replace(/ /g,"_")},d),e);break;case"Microsoft Excel":f=y(d,e);break;case"GeoJSON":case"GeoJson":f=Object.assign(Object.assign(Object.assign({},d),e),{name:v?v.replace(/ /g,"_"):r.title.replace(/ /g,"_"),fieldTypesVersion:"V2"});break;default:f=Object.assign(Object.assign(Object.assign({},d),e),{name:v?v.replace(/ /g,"_"):r.title.replace(/ /g,"_")})}return m.publishParameters=JSON.stringify(f),m})(a,e,n,i)},b=async(e,r,t)=>{var n;const i=(null===(n=t.file)||void 0===n?void 0:n.size)>a.M;try{return await h(e,r,{file:t.file,overwrite:t.overwrite,keepDescription:t.keepDescription,fileName:t.fileName,multipart:i,existingItemId:t.existingItemId}),await(0,o.c)({id:e.id,folder:"",success:!0}),{}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}},h=async(e,r,t)=>{var n;const o=`${r}/items/${e.id}/update`,s=(null===(n=t.file)||void 0===n?void 0:n.size)>a.M,l=g(e,{file:t.file,overwrite:t.overwrite,keepDescription:t.keepDescription,fileName:t.fileName,multipart:s});return"Raster function template"===e.type&&await(async(e,r)=>{const t=r.get("file"),n=r.get("filename");if(!t||!n)return{error:{code:"unhandledError"}};const{extension:i}=(0,c.a)(n),a=new FileReader;return new Promise((n,o)=>{a.onload=async t=>{var a;const o=t.target.result;if(!o)return r.set("snippet",""),r.set("description",""),n({});let s,c;if("rft.json"===i){const e=JSON.parse(o);({description:s,thumbnailEx:c}=e)}else if("rft.xml"===i){const e=(new DOMParser).parseFromString(o,"text/xml");s=m(e,"Description"),c=m(e,"ThumbnailEx")}if(!c||"string"==typeof c&&(null===(a=null==c?void 0:c.trim())||void 0===a?void 0:a.length)<1){const r=(0,p.g)(e);try{const e=await fetch(r);c=await e.blob()}catch(e){console.error(e)}}r.set("snippet",s);try{await e.updateThumbnail({thumbnail:c})}catch(e){console.error(e)}n({})},a.onerror=()=>{a.abort(),o({code:"unhandledError"})},a.readAsText(t)})})(e,l),s?(i.a.id=e.id,await(0,a.x)({updateUrl:o,updateFormData:l,updateSourceDataId:e.id})):await(0,d.a)(o,l,{},"post")},w=async(e,r,t,n)=>{try{const{url:r}=e,t=await(0,d.r)(r),n=await(0,d.r)(r+"/layers"),i=null==n?void 0:n.layers.map(e=>(delete e.fields,e));return t.tables=[...null==n?void 0:n.tables],t.layers=[...i],{result:t}}catch(i){return!t&&(499===(null==i?void 0:i.code)&&"Token Required"===(null==i?void 0:i.message)||403===i.code)&&n?w(e,r,!0,n):(console.error(i),{error:{code:"unhandledError"}})}},k=async e=>{let r=e.typeKeywords.toString();const t={title:e.title||"",tags:e.tags.toString()||""};-1!==e.typeKeywords.indexOf("Involved Lookup")&&(r+=",showUnmatchedAddresses",t.typeKeywords=r);try{return{result:await(0,s.u)(e.id,t)}}catch(e){return console.error("error:",e),{error:{code:"unhandledError"}}}},x=async(e,r,t)=>{const n=e.folderId||e.ownerFolder,i=`${r}/${n||""}/items/${e.id}/updateResources`,a=new FormData;a.set("file",t.file),a.set("resourcesPrefix","styles"),a.set("filename","root.json");try{return{result:await(0,d.a)(i,a,{},"post")}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}},j=async(e,r,t)=>{const n=e.folderId||e.ownerFolder,i=`${r}/${n||""}/items/${e.id}/addResources`,a=new FormData;a.set("file",t.file),a.set("resourcesPrefix","styles"),a.set("filename","root.json");try{return{result:await(0,d.a)(i,a,{},"post")}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}},S=async(e,r,t)=>{let n=["Cloud Drive"];const i=JSON.parse(e);"address"===i.locationType||i.layers[0]&&"address"===i.layers[0].locationType?(n.push("showUnmatchedAddresses"),n.push("Involved Lookup")):("none"===i.locationType||i.layers[0]&&"none"===i.layers[0].locationType)&&n.push("Table");const a=n.join(",");return await(0,s.u)(r.id,{folderId:(null==r?void 0:r.folderId)||r.ownerFolder,id:t,typeKeywords:a})};async function I(e){try{return{result:await e.connect()}}catch(e){return{error:{code:"unhandledError"}}}}},26854:(e,r,t)=>{t.d(r,{a:()=>c,c:()=>l,g:()=>a,h:()=>i,i:()=>o,r:()=>s});var n=t(15332);function i(e){const r=document.createElement("textarea");return r.innerHTML=e,r.innerText}function a(e){return function(e){return null==e?void 0:e.replace(/&#10;&#13;|&#10;|&#13;|\r\n|\r|\n/g,"<br>")}(function(e){return null==e?void 0:e.replace(/(?:\r)/g,"&#10;").replace(/(?:\n)/g,"&#13;")}(function(e){return null==e?void 0:e.replace(/(https?:\/\/[^\s]+)/g,e=>`<a href="${e}" target="_blank">${e}</a>`)}(function(e){return null==e?void 0:e.replace(/(?:&#10;)/g,"\r").replace(/(?:&#13;)/g,"\n")}(e))))}function o(e){return e.replace(/\$\{startSup\}/g,"<sup>").replace(/\$\{endSup\}/g,"</sup>")}function s(e,r,t){return e.replace(/\$\{startLink\}/g,`<calcite-link label="${t}" href="${r}" target="_blank">`).replace(/\$\{endLink\}/g,"</calcite-link>")}function c(e){return e.replace(/\$\{startStrong\}/g,"<strong>").replace(/\$\{endStrong\}/g,"</strong>")}function l(e){return(0,n.s)((null==e?void 0:e.trim())||"").replace(/[!*+\-&|()[\]{}^~?:"\\]/g,"\\$&")}},44069:(e,r,t)=>{t.d(r,{A:()=>i,a:()=>a,b:()=>o,c:()=>c,d:()=>s,u:()=>n});const n=["esriFieldTypeOID","esriFieldTypeGlobalID"],i={"file geodatabase":"filegeodatabase",shapefile:"shapefile",geojson:"geojson",csv:"CSV","microsoft excel":"excel",geopackage:"geoPackage","service definition":"serviceDefinition"},a={Shapefile:"shapefile","File Geodatabase":"fileGeodatabase",CSV:"csv","Microsoft Excel":"excel",GeoJson:"geojson",GeoPackage:"geoPackage"},o={csv:"CSV",excel:"Microsoft Excel",shapefile:"Shapefile",fgdb:"File Geodatabase",geojson:"GeoJson",googlesheets:"Microsoft Excel"},s=["zip","csv","xls","xlsx","geojson","gpkg","json","sd"],c=["zip","csv","xls","xlsx"]},62645:(e,r,t)=>{t.d(r,{a:()=>u,b:()=>m,c:()=>l,d:()=>d,g:()=>g,s:()=>p});var n=t(87849),i=t(54251),a=t(41473),o=t(46904),s=t(32478),c=t(931);function l(e,r){const t=e.type,n=e.thumbnail,i=r&&(0,o.u)(e,r);return null===n&&i&&["Dashboard"].includes(t)}function p(e,r,t){var n,i;const a=e.thumbnail,s=function(e,r){return e&&!(null==e?void 0:e.includes("images/transparent.gif"))&&(!r.isPortal&&!(null==e?void 0:e.includes("thumbnail/ago_downloaded."))||r.isPortal&&!(null==e?void 0:e.includes("Utilities/PrintingTools")))}(a,r),c=["Feature Service","Vector Tile Service"].includes(e.type)&&!s,l="Feature Service"===e.type&&e.typeKeywords.includes("Location Tracking Service"),p=null===(n=e.typeKeywords)||void 0===n?void 0:n.includes("Table");if("Image"===e.type||a&&!c||l||p)return!1;const u=null===(i=e.typeKeywords)||void 0===i?void 0:i.includes("Tiled Imagery"),d=e.type,g="Image Service"===d&&!u||"Map Service"===d,m=t&&(0,o.u)(e,t);return m&&g||m&&"Feature Service"===d||"Vector Tile Service"===d||m&&"KML"===d}function u(e,r,t,n){null!=t||(t=(0,a.g)(e));const o=(0,i.g)(e),s=o&&!n?`token=${o}`:"",c=`${t}content/items/${r.id}`;if(r.thumbnail){const e=r.thumbnailUrl;if(e){const r=new URL(e);return r.searchParams.append("w","400"),r.href}return`${c}/info/${r.thumbnail}?w=400${o?"&":""}${s}`}return"Image"!==r.type||n?g(r):`${c}/data?${s}`}async function d(e,r,t){return t?u(e,r,"https://www.arcgis.com/sharing/rest/",!0):u(e,r)}function g(e){const r=function(e){var r;const t=null===(r=e.type)||void 0===r?void 0:r.toLowerCase(),n=e.typeKeywords||[];switch(t){case"web mapping application":return"webapp.png";case"mobile application":return"mobileapp.png";case"notebook code snippets":case"notebook code snippet library":return"notebookcodesnippets.png";case"notebook":return"notebook.png";case"style":return n.includes("Dictionary")?"dictionarystyle.png":"style.png";case"feature service":return n.includes("Location Tracking View")?"locationtrackingservice.png":n.includes("IndoorPositioningDataService")?"indoor-positioning-data-service.png":"default.png";case"pro presentation":return"pro-presentation.png";case"reality mapping project":case"reality mapping project":return"realitymappingproject.png";case"urban project":case"urban project":return"urbanproject.png";case"raster function template":return"rasterfunctiontemplate.png";case"workforce project":return"workforceproject.png";case"hub initiative":return"hubinitiative.png";case"hub page":return"hubpage.png";case"hub site application":return"hubsite.png";case"hub event":return"hubevent.png";case"hub project":return"hubproject.png";case"dashboard":return n.includes("ArcGIS Dashboards")?"dashboards.png":"opsdashboard.png";case"geoprocessing service":return n.includes("Notebook Web Tool")?"notebookwebtool.png":"webtool.png";case"web scene":case"scene service":return"scene.png";case"ortho mapping project":return"orthomappingproject.png";case"ortho mapping template":return"orthomappingtemplate.png";case"insights theme":return"insightstheme.png";case"insights workbook package":return"insightsworkbookpackage.png";case"solution":return"solution.png";case"mobile scene package":return"mobilescenepackage.png";case"deep learning package":return"deeplearningpackage.png";case"big data analytic":return"bigdataanalytic.png";case"real time analytic":return"realtimeanalytic.png";case"feed":return"feed.png";case"excalibur imagery project":return"excaliburimageryproject.png";case"storymap":return(null==n?void 0:n.includes("storymapcollection"))?"storymapcollection.png":"storymap.png";case"survey123 add in":return"survey123addin.png";case"mission":return"mission.png";case"mission template":return"missiontemplate.png";case"quickcapture project":return"quickcaptureproject.png";case"pro report":return"proreport.png";case"pro package":return"propackage.png";case"pro report template":return"proreporttemplate.png";case"urban model":return"urbanmodel.png";case"web experience":return"webexperience.png";case"web experience template":return"webexperiencetemplate.png";case"experience builder widget":return"experiencebuilderwidget.png";case"experience builder widget package":return"experiencebuilderwidgetpackage.png";case"workflow":return"workflow.png";case"insights script":return"insightsscript.png";case"kernel gateway connection":return"kernelgatewayconnection.png";case"hub initiative template":return"hubinitiativetemplate.png";case"image service":return(null==n?void 0:n.includes("Tile Imagery"))?"tiledimagerylayer.png":"imagerylayer.png";case"mission report":return"missionreport.png";case"administrative report":return"administrativereport.png";case"storymap theme":return"storymaptheme.png";case"knowledge graph":return"knowledgegraph.png";case"knowledge graph layer":return"knowledgegraphlayer.png";case"knowledge studio project":return"knowledgestudio.png";case"earth configuration":return"earthconfiguration.png";case"link chart":return"linkchart.png";case"investigation":return"investigation.png";case"apache parquet":return"apacheparquet.png";case"curated collection":return"curatedcollection.png";case"video service":return"mediaservice.png";case"geodata service":return"geodataservice.png";case"suitability model":return"suitabilitymodel.png";case"esri classifier definition":return"classifierdefinition.png";case"deep learning studio project":return"deeplearningstudioproject.png";case"esri classification schema":return"classificationschema.png";case"insights data engineering workbook":return"dataengineeringworkbook.png";case"insights data engineering model":return"dataengineeringmodel.png";case"discussion":return"discussion.png";case"api key":return"apikey.png";case"data pipeline":return"datapipeline.png";case"analysis model":return"analysismodel.png";case"service connection":return"serviceconnection.png";case"xr experience":return"xrexperience.png";case"3dtiles service":return(null==n?void 0:n.includes("GaussianSplat"))?"gaussiansplatlayer.png":"default.png";default:return"default.png"}}(e);return(0,n.d)(`./assets/arcgis-item-thumbnail/${r}`)}async function m(e,r,t){const n=e.type,i=g(e);try{if(["Image Service","Map Service","Feature Service"].includes(n)){return await(0,s.f)({type:n,url:e.url,serviceInfo:t,extent:e.extent,id:e.id,isSecured:{secured:!1}})||i}if("Vector Tile Service"===n){const{id:t,title:n,extent:l}=e,p=await async function({id:e,title:r,itemUrl:t,extent:n}){const[i]=await(0,c.l)(["esri/geometry/SpatialReference"]),a={operationalLayers:[],baseMap:{baseMapLayers:[{id:e,type:"VectorTileLayer",layerType:"VectorTileLayer",title:r,styleUrl:`${t}/resources/styles/root.json`,visibility:!0,opacity:1}],title:"Topographic"},spatialReference:{wkid:102100,latestWkid:3857},authoringApp:"WebMapViewer",authoringAppVersion:"5.3",version:"2.10"};let o=[];if("string"==typeof n){const e=n.split(",");o=[[parseFloat(e[0]),parseFloat(e[1])],[parseFloat(e[2]),parseFloat(e[3])]]}else o=n&&n.length>0?n:[[-180,-90],[180,90]];return(0,s.b)(a,o,new i({wkid:102100}))}({id:t,title:n,itemUrl:(0,o.g)(t,(0,a.g)(r)),extent:l});return p||i}if("KML"===n){return await(0,s.j)({url:e.url,type:n,id:e.id,title:e.title,extent:e.extent})||i}}catch(e){console.error(e)}return i}}}]);