/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-788580.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-788580"],{1654:(e,t,r)=>{r.d(t,{A:()=>b,B:()=>D,C:()=>A,D:()=>G,E:()=>m,F:()=>N,a:()=>a,b:()=>o,c:()=>l,d:()=>h,e:()=>k,f:()=>w,g:()=>C,h:()=>$,i:()=>g,j:()=>I,k:()=>R,l:()=>u,m:()=>d,n:()=>s,o:()=>T,p:()=>p,q:()=>v,r:()=>f,s:()=>j,t:()=>K,u:()=>c,v:()=>P,w:()=>S,x:()=>E,y:()=>O,z:()=>y});var n=r(46904);const i=e=>{var t,r,n;return"string"==typeof(null==e?void 0:e.role)&&(null==e?void 0:e.role)?null==e?void 0:e.role:null!==(r=null!==(t=null==e?void 0:e.roleId)&&void 0!==t?t:null==e?void 0:e.id)&&void 0!==r?r:null===(n=null==e?void 0:e.sourceJSON)||void 0===n?void 0:n.id};function o(e){return e&&!e.orgId}function l(e,t){return(0,n.u)(e,t)||"update"===e.itemControl||(0,n.c)([e],t)&&w(t)}function a(e,t){const r=(0,n.c)([e],t),i=(0,n.u)(e,t)||w(t)&&r,o=C(t)&&_(t);return!!(i||r&&o)}const s=e=>{var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:manageLicenses"))},u=e=>{var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:inviteUsers"))},d=e=>{var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:manageRoles"))},c=e=>{var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:changeUserRoles"))},p=e=>{var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:viewGroups"))},v=e=>{var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:viewUsers"))};function g(e){return["Trial Developer","Developer","Developer Subscription"].includes(null==e?void 0:e.type)}function m(e){return["Developer Subscription"].includes(null==e?void 0:e.type)}function f(e){return["Geoanalytics Engine","GeoAnalytics MS Fabric"].includes(null==e?void 0:e.type)}const h=e=>{var t;return null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.includes("Developer")},y=e=>{var t;return null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.includes("PublicSharingDisabled")},b=e=>{var t;return null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.includes("HostedServicesPublicSharingDisabled")};function w(e){return"org_admin"===i(e)||"account_admin"===i(e)}function k(e){return["org_admin","account_admin"].includes(i(e))&&!(null==e?void 0:e.roleId)}function C(e){return!!(null==e?void 0:e.roleId)&&e.roleId.length>0}function I(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:updateItemCategorySchema"))}function $(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:updateGroups"))}function T(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:assignToGroups"))}const _=e=>{var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:deleteItems"))};function P(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToGroup")}function S(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToOrg")}function D(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToPublic")}function O(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToOrg")}function A(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToPublic")}function E(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToGroup")}function R(e,t,r,n){const i=n&&!["Trial","Trial Press","Trial Developer","Developer Subscription","Evaluation"].includes(n.type),o=((null==t?void 0:t.privileges)||[]).includes("portal:admin:manageCollaborations");return!(!(null==e?void 0:e.collaborationsEnabled)||!t||!w(t)&&!o||!(null==r?void 0:r.isPortal)&&!i)}function N(e){return!!e&&(!C(e)||C(e)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:viewItems")}(e))}const G=({items:e,user:t,portal:r})=>{const i=e[0],o=i.owner;if(r.isPortal&&o!==t.username&&o.includes("esri_")&&!["esri_livingatlas"].includes(o))return!1;const a=(0,n.u)(i,t),s=C(t),u=x(t),d=l(i,t)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:updateItems")}(t)&&!s&&(function(e,t){return!function(e){return!(!e.urlKey||!e.customBaseUrl)||!!e.isPortal}(t)||P(e)||S(e)||!!t.canSharePublic&&D(e)}(t,r)||x(t));return a||d||(0,n.c)(e,t)&&u};function x(e){return E(e)||O(e)||A(e)}const L=["portal:user:createItem","portal:user:viewOrgItems","premium:publisher:createNotebooks","portal:publisher:createDataPipelines","features:user:edit","features:user:fullEdit","portal:admin:viewItems","portal:admin:updateItems","portal:admin:deleteItems"];function K(e){return e.some(e=>L.includes(e))}function j(e){return e.filter(e=>L.includes(e))}},13446:(e,t,r)=>{r.d(t,{a:()=>a,r:()=>l});var n=r(72257),i=r(3826),o=r(95878);function l(){i.d.reset(),n.a.reset()}const a=()=>{if(i.a.existingItem||"register"===o.u.workflow)return;i.d.reset();const e=n.i.folder;n.a.reset(),n.i.folder=e}},20699:(e,t,r)=>{r.d(t,{a:()=>u,b:()=>p,c:()=>d,l:()=>c});var n=r(59317),i=r(72257),o=r(3826),l=r(95878);const a="new item",s="my content";function u(){const e=n.c.telemetry;null==e||e.startWorkflow("new item upload",{eventType:"workflow",category:"new item upload",details:o.a.type,pageName:s})}function d(){const{type:e,applicationType:t,customParameters:r,selectedLayerIdTracker:i}=o.a,u=n.c.telemetry,d=l.u.telemetryDetails;null==u||u.endWorkflow("new item upload",{details:e,pageName:s});const c={eventType:"other",pageName:s,category:a,label:a,details:d};"url"===d?(c.attribute=e,(null==r?void 0:r.length)>0&&(c.action="customParams"),"WMS"===e&&(c.count=null==i?void 0:i.count)):t&&(c.attribute=t),null==u||u.logEvent(c)}const c=()=>{const{telemetry:e}=n.c;null==e||e.logEvent({eventType:"other",pageName:"my content",category:"content page drag drop",label:"content"}),l.u.telemetryDetails="drag drop"};function p(){var e,t;const r=n.c.telemetry,{title:l,folder:a,categories:u,tags:d,snippet:c}=i.i,{initialTitle:p,initialFolders:v}=o.a,g=!a||a.title===a.id,m=!!v.map(e=>null==e?void 0:e.id).find(e=>e===(null==a?void 0:a.id)),f={eventType:"other",pageName:s,category:"new item item info",label:l===p?"default title":"title changed",action:(null==c?void 0:c.length)>0?"summary":"no summary",count:null!==(e=null==d?void 0:d.length)&&void 0!==e?e:0,number:null!==(t=null==u?void 0:u.length)&&void 0!==t?t:0};f.details=m?g?"root folder":"custom folder":"new folder",null==r||r.logEvent(f)}},26262:(e,t,r)=>{r.d(t,{a:()=>i,g:()=>o,i:()=>l});var n=r(41473);const i=(e,t)=>(0,n.a)(`${(0,n.g)(e)}community/groups/${t.id}`),o=(e,t)=>`${((e,t)=>(0,n.a)(`${(0,n.g)(e)}content/groups/${t.id}`))(e,t)}search`,l=e=>{var t;return null===(t=null==e?void 0:e.capabilities)||void 0===t?void 0:t.includes("distributed")}},37362:(e,t,r)=>{r.d(t,{U:()=>n,a:()=>o,b:()=>i,g:()=>l});const n="/Categories",i=(e,t,r=!0)=>{const n=null!=e?e:"";return`${n}${n.endsWith("/")?"":"/"}${r?t.title.toLocaleLowerCase():t.title}`};function o(e){var t;let r=null===(t=null==e?void 0:e[0])||void 0===t?void 0:t.title;return r&&"/"!==r.charAt(0)&&(r=`/${r}`),r||n}const l=(e,t)=>`${e.replace(/\/([^\/]+)$/,`/${t}`)}`},50315:(e,t,r)=>{r.d(t,{a:()=>g,b:()=>c,c:()=>v,d:()=>f,e:()=>p,f:()=>d,g:()=>u,u:()=>m});var n=r(83692),i=r(37362),o=r(59317),l=r(26262),a=r(41473),s=r(1654);const u=async({portal:e,user:t,group:r,useCache:n=!1})=>{var i;try{const o=await(r?c(r.id,e,n):d(e,t,n));return{result:null!==(i=null==o?void 0:o.categorySchema)&&void 0!==i?i:null}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}};async function d(e,t,r=!0){if(null!=e||(e=o.c.portal),null!=t||(t=o.c.user),!(null==e?void 0:e.id)||t&&(0,s.b)(t))return null;const i=()=>(0,n.r)(`${(0,a.g)(e)}portals/${e.id}/categorySchema`);return r?(0,n.f)(i,"categorySchema",e.id):i()}async function c(e,t,r=!0){if(null!=t||(t=null===o.c||void 0===o.c?void 0:o.c.portal),!e||!t)return null;const i=()=>(0,n.r)(`${(0,l.a)(t,{id:e})}categorySchema`);return r?(0,n.f)(i,"categorySchema",e):i()}const p=async({user:e,portal:t,useCache:r=!1})=>{var n;const i=await v(t,e,r);return{result:null!==(n=null==i?void 0:i.memberCategorySchema)&&void 0!==n?n:null}};async function v(e,t,r=!0){if(null!=e||(e=o.c.portal),null!=t||(t=o.c.user),!(null==e?void 0:e.id)||t&&(0,s.b)(t))return null;const i=()=>(0,n.r)(`${(0,a.g)(e)}portals/${e.id}/memberCategorySchema`);return r?(0,n.f)(i,"memberCategorySchema",e.id):i()}async function g(e,t,r=!0){const i=()=>async function(e,t){var r;const i=(0,a.g)(e),o=(0,a.b)(e),s=await(0,n.r)(`${i}portals/self?culture=${o}`),u=await(0,n.r)(`${i}community/groups?q=${s.contentCategorySetsGroupQuery}`),d=null===(r=null==u?void 0:u.results)||void 0===r?void 0:r[0],c=(await(0,n.r)((0,l.g)(e,d),{q:`typekeywords: ${t}`})).results[0];return(0,n.r)(`${i}content/items/${c.id}/data`)}(e,t);return r?(0,n.f)(i,"categorySchema",t):i()}async function m({categories:e,itemIds:t,portal:r,group:i}){try{const o=`${(0,a.g)(r)}/content/${i?`groups/${i.id}/updateCategories`:"updateItems"}`,l=JSON.stringify(t.map(t=>{const r=Array.isArray(e)?e:e[t];return{[t]:i?r:{categories:r}}}));return{result:await(0,n.r)(o,{items:l},{},"post")}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}}const f=async({path:e,portal:t,group:r,updateInfo:n})=>{try{const o=(await h({category:e,portal:t,group:r,num:1})).total;if(0===o)return console.warn(`No items found with category ${e} when updating schema`),{};const l=100,a=Math.ceil(o/l),s=[];for(let o=0;o<a;o++)s.push(h({category:e,portal:t,group:r,start:o*l,num:l}).then(({results:t})=>{const o={};return t.forEach(t=>{var l;const a=null!==(l=r?t.groupCategories:t.categories)&&void 0!==l?l:[],s="change-title"===n.type?a.map(t=>{const r=(0,i.g)(e,n.newTitle);return t===e?r:t.replace(`${e}/`,`${r}/`)}):a.filter(t=>!t.startsWith(e));o[t.id]=s}),o}));const u=await Promise.all(s);return await Promise.all(u.map(e=>m({categories:e,itemIds:Object.keys(e),portal:t,group:r}))),{}}catch(t){return console.error(`Error ${n.type} items schema from path ${e}:`,t),{error:{code:"unhandledError"}}}},h=({category:e,num:t=100,start:r=0,portal:i,group:o})=>{const s={start:r,num:t,categories:JSON.stringify([e])},u=o?(0,l.g)(i,o):`${(0,a.g)(i)}search`;return(0,n.r)(u,Object.assign(Object.assign({},s),{q:o?void 0:`orgid: ${i.id}`}))}},51562:(e,t,r)=>{r.r(t),r.d(t,{arcgis_new_item_pages_developer_credentials_generate_token_check:()=>m});var n=r(87849),i=r(95878),o=r(3826),l=r(72257),a=r(59317),s=r(20699),u=r(50315),d=r(1536),c=r(4429),p=r(13446),v=r(74695),g=r(41473);r(37762),r(86562),r(15332),r(83692),r(931),r(93814),r(54251),r(26262),r(1654),r(46904),r(88878),r(15912),r(24869),r(27137),r(76246),r(58573),r(29599),r(60958),r(32478);const m=class{constructor(e){(0,n.r)(this,e),this.workflowComplete=(0,n.c)(this,"workflowComplete",7),this.workflowCancel=(0,n.c)(this,"workflowCancel",7),this.workflowCancelled=!1,this.handleRequest=async()=>{const{newItemMode:e,developerCredentialsType:t,apiToken1ExpirationDate:r}=o.a,{categories:n}=l.i,{portal:i}=a.c,{selectedOption:v}=this;let g,m;this.isLoading=!0;try{(0,s.a)(),({addResponse:g,publishResponse:m}=await this.handleAddItem());const l=[null==g?void 0:g.id,null==m?void 0:m.id].filter(e=>e);if(n&&await(0,u.u)({portal:i,itemIds:l,categories:n}),await(0,d.u)(null==g?void 0:g.id,{apiToken1ExpirationDate:r}),this.workflowCancelled)(null==m?void 0:m.id)&&await(0,d.d)(m.id,{permanentDelete:!0}),g.id&&await(0,d.d)(g.id,{permanentDelete:!0}),this.workflowCancel.emit();else{let r;(0,s.c)(),a.c.telemetry&&await(0,c.t)(750),r=Object.assign({id:null==g?void 0:g.id,item:Object.assign({},o.a),response:g,newItemMode:e,generateToken:"generateAPIKeyOption"===v,developerCredentialsType:t},m),this.workflowComplete.emit(r)}(0,p.r)()}catch(e){console.error(e),this.isLoading=!1,this.error=e}},this.error=void 0,this.isLoading=!1,this.selectedOption="generateAPIKeyOption"}async handleNext(){this.handleRequest()}componentWillLoad(){this.i18n=i.u.i18n.developerCredentialsGenerateTokenCheck}async handleAddItem(){let e;return e=await this.addDeveloperCredentialApplication(),{addResponse:e,publishResponse:undefined}}async addDeveloperCredentialApplication(){const{developerCredentialsRedirectUrls:e,applicationEnvironment:t,apiKeyReferrerUrls:r,developerCredentialsType:n,developerPrivileges:i,isPersonalAPIToken:l}=o.a;try{return(0,v.d)(o.a,(0,g.g)(a.c.portal),"oauth"===n?{appType:t,httpReferrers:r,redirect_uris:e,privileges:i}:Object.assign({httpReferrers:r,privileges:i},l&&{isPersonalAPIToken:l}))}catch(e){return console.error(e),this.isLoading=!1,void(this.error=e)}}render(){const{i18n:e,selectedOption:t,isLoading:r}=this,{breadcrumbs:l}=o.a,a=i.u.i18n.developerCredentialsSummary;return(0,n.h)(n.H,{key:"b361e68b2d9b31aceae0842aa8550fc804bfa190"},(0,n.h)("arcgis-new-item-breadcrumbs",{key:"b252f7e72f851c9cdd58dab5d24f1ca6148e44ce",breadcrumbs:l}),(0,n.h)("arcgis-new-item-loader",{key:"41fb1e8fd4565cb42dd985e1e787aa0135558241",active:r,text:e.registering}),(0,n.h)("p",{key:"092a6c8c687de9a99e5debbb0f3ece65533014b6",class:"title section"},e.generateAPIKey),(0,n.h)("div",{key:"c1220e3851150a05d8a9234d1f44d069acfe9338",class:"description section"},(0,n.h)("p",{key:"8620b5ecbe27c20e7678cdd6d49393f24647995a"},e.readyToGenerateAPIKey),(0,n.h)("p",{key:"7bddee2794f17be4978cd0c16439e28882457d83"},e.readyToGenerateAPIKeyNotice)),(0,n.h)("div",{key:"f63b4e12082f2f950309c6f9fbecbe272af9c546",class:"options section"},["generateAPIKeyOption","goToItemDetailsOption"].map(r=>(0,n.h)("calcite-label",{layout:"inline"},(0,n.h)("calcite-radio-button",{checked:t===r,value:r,onCalciteRadioButtonChange:e=>this.selectedOption=e.target.value}),e.options[r]))),(0,n.h)("arcgis-new-item-alert",{key:"efb26a52b10e3c4dc03d72ddec2026f5af556e34",heading:a.errorTitle,description:a.errorDescription,active:!!this.error,onAlertDismiss:()=>this.error=null}))}};m.style=".title{margin-top:0px;font-weight:700}.description{font-size:1rem}.options{margin-top:0.75rem}.section{margin-bottom:0.75rem}"}}]);