/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_com-96162c.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_com-96162c"],{29997:(e,t,a)=>{a.d(t,{a:()=>o,c:()=>n,g:()=>r});var i=a(29614),l=a(1225),s=(a(54312),a(44345),a(55448),a(52797),a(34031),a(63438),a(5933),a(89704),a(5294),a(66228));a(56451),a(31521),a(23054),a(5077),a(23795),a(17902),a(87420),a(30161),a(81734),a(83552),a(77462),a(49403),a(10281),a(83930),a(66617),a(10628),a(59640),a(64451),a(6176),a(10454),a(94916),a(52554),a(2156),a(4038),a(49851),a(75054),a(15223),a(70169),a(47207),a(70852),a(48103),a(39423),a(85681),a(18444),a(42411),a(9767),a(38218),a(91914),a(86605),a(68196),a(440),a(46547),a(28927),a(6238),a(7299);async function n(e,t){const{layer:a,useFeatureReduction:n,mapImageSublayer:o,mapView:r}=e,c=a;t=t||{};const d=(0,l.a)(e,(0,l.g)(e));return await i.createContinuousRenderer({layer:c,view:r,field:t.fieldInfos[0].field,theme:"above-and-below",colorScheme:(0,l.a2)(e,"above-and-below"),normalizationField:t.fieldInfos[1].field,outlineOptimizationEnabled:!o&&((0,s.i)(t.outlineOptimizationEnabled)?t.outlineOptimizationEnabled:(0,l.o)(e)),sizeOptimizationEnabled:!o&&(!(0,s.i)(t.sizeOptimizationEnabled)||t.sizeOptimizationEnabled),legendOptions:t.legendOptions,defaultSymbolEnabled:!1,forBinning:n}).then(e=>(((0,l.p)(e.renderer,"color")||{}).style="ratio",(0,l.b)(d,e.renderer),e))}async function o(e,t){const{layer:a,useFeatureReduction:n,mapImageSublayer:o,mapView:c}=e,d=a;t=t||{};const p=(0,l.g)(e),m=(0,l.c)(p,"color");if(m&&t.fieldInfo&&t.fieldInfo.field===m.field&&t.normalizationField===m.normalizationField&&(delete t.fieldInfos,(0,l.O)(t)))return{renderer:p.clone()};const u=(0,l.p)(p,"color"),g=(0,l.a)(e,p),h=t.fieldInfos?t.fieldInfos[0]:m?{field:m.field,expression:m.valueExpression,expressionTitle:m.valueExpressionTitle,simpleFieldType:l.J.NUMBER}:{field:p.field,expression:p.valueExpression,expressionTitle:p.valueExpressionTitle,simpleFieldType:l.J.NUMBER},f=t.normalizationField?t.normalizationField:m?m.normalizationField:p.normalizationField,b=p.classBreakInfos?.length?p.classBreakInfos[0].symbol:null,S=p.defaultSymbol,v=p.defaultLabel;let y=!1;(null===t.normalizationField||t.normalizationField||t.fieldInfo)&&(y=!0);const $=t.discardMinMax?void 0:(0,s.i)(t.min)?t.min:y?void 0:u?u.minSliderValue:p.classBreakInfos[0].minValue,M=t.discardMinMax?void 0:(0,s.i)(t.max)?t.max:y?void 0:u?u.maxSliderValue:p.classBreakInfos[p.classBreakInfos.length-1].maxValue;return await i.createContinuousRenderer({layer:d,view:c,field:h?h.field:p.field,theme:"above-and-below",colorScheme:(0,l.a2)(e,"above-and-below"),normalizationField:f,minValue:$,maxValue:M,outlineOptimizationEnabled:!o&&((0,s.i)(t.outlineOptimizationEnabled)?t.outlineOptimizationEnabled:!!g.sizeOutlineVisVar),sizeOptimizationEnabled:!o&&((0,s.i)(t.sizeOptimizationEnabled)?t.sizeOptimizationEnabled:!!g.sizeAutoVisVar),legendOptions:t.legendOptions?.toJSON()||m?.legendOptions?.toJSON()||p.legendOptions?.toJSON(),defaultSymbolEnabled:(0,s.i)(t.defaultSymbolEnabled)?t.defaultSymbolEnabled:!!p.defaultSymbol,forBinning:n}).then(e=>{if(t.discardMinMax){const t=(0,l.c)(p,"color"),a=(0,l.c)(e.renderer,"color");t.stops.forEach((e,t)=>e.value=a.stops[t].value);const i=!!u&&"percent"===u.style,s=!!u&&"percent-of-total"===u.style;t.stops[0].label=`< ${r(t.stops[0].value,i,s)}`,t.stops[2].label=r(t.stops[2].value,i,s),t.stops[4].label=`> ${r(t.stops[4].value,i,s)}`}return((0,l.p)(e.renderer,"color")||{}).style="ratio",(0,l.b)(g,e.renderer),b&&e.renderer.classBreakInfos?.length&&(e.renderer.classBreakInfos[0].symbol=b),S&&(e.renderer.defaultSymbol=S,e.renderer.defaultLabel=v),e})}function r(e,t,a){return a?Math.round(e/(1+e)*1e4)/100+"%":t?Math.round(1e4*e)/100+"%":`${e}`}},34662:(e,t,a)=>{a.r(t),a.d(t,{ArcgisMapConfigSmartMappingPanelsCompare:()=>S});var i=a(73679),l=a(4395),s=a(5294),n=a(24457),o=a(1225),r=a(89989),c=(a(44345),a(55448),a(52797),a(34031),a(63438),a(5933),a(89704),a(18423),a(96086),a(91813),a(21255),a(13078),a(21303),a(12627),a(56451),a(31521),a(23054),a(5077),a(23795),a(17902),a(87420),a(30161),a(81734),a(65595)),d=(a(77462),a(49403),a(10281),a(83930),a(54312),a(66617),a(10628),a(59640),a(64451),a(6176),a(10454),a(29614),a(94916),a(52554),a(2156),a(4038),a(49851),a(75054),a(15223),a(70169),a(29997)),p=(a(47207),a(70852),a(48103),a(39423),a(85681),a(18444),a(42411),a(9767),a(38218),a(91914),a(86605),a(68196),a(440),a(46547),a(28927),a(6238),a(7299),a(85643)),m=a(73801);function u(e,t){const a=e.slice(0);let i,l,s,n,o,r,c,d,p,m,u=0;const b=!t;let S=t?.indexes;if(S)S.sort((e,t)=>e-t);else for(S=[],c=0;c<a.length;c++)S.push(c);for(c=0;c<S.length;c++)if(m=S[c],i=a[m],l=0===m?void 0:a[m-1],s=m===a.length-1?void 0:a[m+1],n=g(i),o=n.fractional,o){for(d=0,p=!1;d<=o&&!p;)r=h(i,d),u=0===c?r[1]:r[0],p=f(i,u,l,s,b),d++;p&&(a[m]=u)}return a}function g(e){const t=String(e),a=t.match(/^-?(\d+)(\.(\d+))?$/i);let i={integer:0,fractional:0};if(a?.[1])i.integer=a[1].split("").length,i.fractional=a[3]?a[3].split("").length:0;else if(t.toLowerCase().includes("e")){const e=t.split("e"),a=e[0],l=e[1];let s,n;if(a&&l){const e=Number(a);let t=Number(l);n=t>0,n||(t=Math.abs(t)),s=g(e),n?(s.integer+=t,t>s.fractional?s.fractional=0:s.fractional-=t):(s.fractional+=t,t>s.integer?s.integer=1:s.integer-=t),i=s}}return i}function h(e,t){let a,i;return a=Number(e.toFixed(t)),a<e?i=a+1/10**t:(i=a,a-=-1/10**t),a=Number(a.toFixed(t)),i=Number(i.toFixed(t)),[a,i]}function f(e,t,a,i,l){const s=function(e,t,a,i){const l={prev:null,next:null};let s,n,o;return null!=a&&(s=e-a,n=t-a,o=n-s,l.prev=Math.floor(Math.abs(100*o/s))),null!=i&&(s=i-e,n=i-t,o=n-s,l.next=Math.floor(Math.abs(100*o/s))),l}(e,t,a,i),n=null==s.prev||s.prev<=l,o=null==s.next||s.next<=l;return n&&o||s.prev+s.next<=2*l}const b=l.AH`:host{width:100%;display:none}:host([selected]){display:flex}.flow-item{height:100%}.compare-block{overflow-x:hidden}.segmented-control{margin-bottom:var(--calcite-spacing-sm)}.legend-toggle-padding{padding-top:12px;padding-bottom:12px}`;class S extends m.WF{constructor(){super(...arguments),this.flowItemNode=(0,p._)(),this.rotationNode=(0,p._)(),this.smartMappingState=(0,c.u)(),this.visualizationOpen=!1,this.statisticsStatus=o.s.MISSING,this.hideRotation=!1,this.menuOpen=!1,this.showBackButton=!1,this.selected=!1,this.arcgisSmartMappingPanelsCompareBackClick=(0,m.lh)(),this.arcgisSmartMappingPanelsCompareClose=(0,m.lh)(),this.arcgisSmartMappingPanelsCompareError=(0,m.lh)(),this.smartMappingCompleteClose=(0,m.lh)()}static{this.properties={visualizationOpen:16,statisticsStatus:16,hideRotation:5,menuOpen:5,showBackButton:5,selected:7,beforeBack:0}}static{this.styles=b}async setFocus(){await(this.flowItemNode.value?.setFocus())}load(){this.visualizationOpen=!0;const{layer:e}=this.smartMappingState,t=(0,o.g)(this.smartMappingState);this.originalRendererJSON=t.toJSON(),this.originalFeatureReduction="featureReduction"in e&&e.featureReduction?s.clone(e.featureReduction):void 0,this.getStatistics()}async loaded(){requestAnimationFrame(async()=>await(this.flowItemNode.value?.setFocus())),this.scaleHandle=(0,r.w)(this.smartMappingState,this.flowItemNode.value,()=>this.smartMappingCompleteClose.emit("cancel"))}disconnectedCallback(){super.disconnectedCallback(),this.scaleHandle?.remove()}symbolButtonRefHandler(e){e&&(this.symbolButtonNode=e)}sliderRefHandler(e){e&&(this.sliderNode=e)}segmentedControlRefHandler(e){e&&(this.segmentedControlNode=e)}equalRefHandler(e){e&&(this.equalNode=e)}averageRefHandler(e){e&&(this.averageNode=e)}handleDone(){this.arcgisSmartMappingPanelsCompareClose.emit("save")}handleCancel(){const{originalRendererJSON:e,originalFeatureReduction:t,smartMappingState:a}=this;(0,o.a8)(a,e,t),this.arcgisSmartMappingPanelsCompareClose.emit("cancel")}handleLabelChange(e){const{smartMappingState:t}=this,a=e.currentTarget.value,{_messages:i}=t,l=a===i.panels.compare.ratioLabel?"ratio":a===i.panels.compare.percentTotalLabel?"percent-of-total":"percent",s=(0,o.g)(t),n=(0,o.c)(s,"color");(0,o.p)(s,"color").style=l,"percent"===l?(n.stops[0].label=`< ${(0,d.g)(n.stops[0].value,!0,!1)}`,n.stops[2].label=(0,d.g)(n.stops[2].value,!0,!1),n.stops[4].label=`> ${(0,d.g)(n.stops[4].value,!0,!1)}`):"percent-of-total"===l?(n.stops[0].label=`< ${(0,d.g)(n.stops[0].value,!1,!0)}`,n.stops[2].label=(0,d.g)(n.stops[2].value,!1,!0),n.stops[4].label=`> ${(0,d.g)(n.stops[4].value,!1,!0)}`):(n.stops[0].label=`< ${(0,d.g)(n.stops[0].value,!1,!1)}`,n.stops[2].label=(0,d.g)(n.stops[2].value,!1,!1),n.stops[4].label=`> ${(0,d.g)(n.stops[4].value,!1,!1)}`),(0,o.a4)(t),this.requestUpdate()}getStatistics(){const{smartMappingState:e}=this,{layer:t,useFeatureReduction:a,mapView:i}=e,l=t,s=(0,o.g)(e);let r,c;const d=this.getFieldInfo(),p=(0,o.c)(s,"color"),m=p?p.normalizationField:s.normalizationField,u=(0,o.p)(s,"color")||{};r=u.minSliderValue,c=u.maxSliderValue,this.statisticsStatus=o.s.IN_PROGRESS,this.statistics||(0,n.default)({layer:l,view:i,field:d.field??void 0,valueExpression:d.expression??void 0,normalizationField:m??void 0,forBinning:a,outStatisticTypes:{exclude:["median"]}}).then(e=>{if(0===e.count){const[t,a]=this.getDefaultDataRange(d),i=u.minSliderValue||t,l=u.maxSliderValue||a;e.min=i,e.max=l,e.avg=(l+i)/2,(0,o.V)(u.minSliderValue)||(u.minSliderValue=i,u.maxSliderValue=l)}else if(!(0,o.V)(e.avg)||!(0,o.V)(e.min)||!(0,o.V)(e.max))return void(this.statisticsStatus=o.s.FAILED);e=(0,o.au)(e),({min:r,max:c}=(0,o.au)({min:r,max:c})),r=r??e.min,c=c??e.max,this.statistics=e,this.statisticsStatus=o.s.SUCCESS},e=>{console.log(e),this.statisticsStatus=o.s.FAILED})}getDefaultDataRange(e){if(e.simpleFieldType===o.J.DATE){const e=(new Date).getFullYear();return[new Date(`1/1/${e}`).getTime(),new Date(`12/31/${e}`).getTime()]}return[0,100]}getFieldInfo(){const{smartMappingState:e}=this,t=(0,o.g)(e),a=(0,o.c)(t,"color"),i=(0,o.K)(e,a?a.field:t.field);return{field:a?.field||t.field,expression:a?.valueExpression||t.valueExpression,expressionTitle:a?.valueExpressionTitle||t.valueExpressionTitle,simpleFieldType:i?i.simpleFieldType:o.J.NUMBER}}handleCenterAtChange(e){const{statisticsStatus:t,smartMappingState:a}=this,i=this.statistics;if(t!==o.s.SUCCESS)return;const l=(0,o.g)(a),s=(0,o.c)(l,"color"),n=(0,o.p)(l,"color"),r=!!n&&"percent"===n.style,c=!!n&&"percent-of-total"===n.style;let p;if("average"===e){const e=i.avg;let t=Math.max(e-i.stddev,i.min),a=Math.min(e+i.stddev,i.max);0===i.count&&(t=i.min,a=i.max),p=u([t,a]),t=p[0],a=p[1],p=[Math.max(t,i.min),Math.max(t+(e-t)/2,i.min),e,Math.min(e+(a-e)/2,i.max),Math.min(a,i.max)],p=u(p)}else{let e=Math.max(1-i.stddev,i.min),t=Math.min(1+i.stddev,i.max);p=u([e,t]),e=p[0],t=p[1],p=[Math.max(e,i.min),Math.max(e+(1-e)/2,i.min),1,Math.min(1+(t-1)/2,i.max),Math.min(t,i.max)],p=u(p)}s.stops[0].value=p[0],s.stops[0].label=`< ${(0,d.g)(p[0],r,c)}`,s.stops[1].value=p[1],s.stops[1].label="",s.stops[2].value=p[2],s.stops[2].label=(0,d.g)(p[2],r,c),s.stops[3].value=p[3],s.stops[3].label="",s.stops[4].value=p[4],s.stops[4].label=`> ${(0,d.g)(p[4],r,c)}`,(0,o.a4)(a),this.symbolButtonNode?.manager.component.requestUpdate(),this.sliderNode&&(this.sliderNode.manager.component.requestUpdate(),this.sliderNode?.updateStatistics())}handleIncludeInLegendToggle(){const{smartMappingState:e}=this,t=(0,o.g)(e),a=(0,o.c)(t,"color"),i=a.legendOptions;i&&!1===i.showLegend?i.title?i.showLegend=!0:a.legendOptions=void 0:(a.legendOptions=i||{},a.legendOptions.showLegend=!1),(0,o.a4)(e)}render(){const{layer:e,hideLayerTitle:t,_messages:a}=this.smartMappingState;return this.el.classList.add("calcite-match-height"),l.qy`<calcite-flow-item .heading=${a.panels.styleOptions} .description=${t?void 0:e.title} class="flow-item" .closable=${(0,o.aa)(this.el)} .showBackButton=${this.showBackButton} .selected=${this.selected} @calciteFlowItemClose=${this.handleDone} @calciteFlowItemBack=${e=>{e.stopPropagation(),this.arcgisSmartMappingPanelsCompareBackClick.emit()}} ${(0,p.K)(this.flowItemNode)}>${this.renderDoneButton()}${this.renderCancelButton()}${this.renderVisualization()}${this.renderRotation()}</calcite-flow-item>`}renderDoneButton(){const{layer:e,_messages:t}=this.smartMappingState;return e?l.qy`<calcite-button slot=footer .label=${t.done} @click=${this.handleDone} appearance=solid width=half>${t.done}</calcite-button>`:""}renderCancelButton(){const{layer:e,_messages:t}=this.smartMappingState;return e?l.qy`<calcite-button slot=footer .label=${t.cancel} @click=${this.handleCancel} appearance=outline-fill width=half>${t.cancel}</calcite-button>`:""}renderVisualization(){const{smartMappingState:e}=this,{_messages:t}=e,{visualizationOpen:a,hideRotation:i}=this,s=(0,o.m)(e)&&!i,n=(0,o.g)(e),r=(0,o.c)(n,"color"),c=(0,o.p)(n,"color"),d=(0,o.K)(e,r.field),p=(0,o.K)(e,r.normalizationField),m=("ratio"===c.style?t.panels.compare.ratioTitle:"percent"===c.style?t.panels.compare.percentTitle:t.panels.compare.percentTotalTitle).replace(/\$\{field1\}/gu,d.label).replace("${field2}",p.label);return l.qy`<calcite-block class="compare-block" .heading=${t.panels.compare.compareStyle} .collapsible=${s} .expanded=${a} @calciteBlockOpen=${()=>this.visualizationOpen=!0} @calciteBlockClose=${()=>this.visualizationOpen=!1}><calcite-label>${m}</calcite-label>${this.renderSymbol()}${this.renderColorSlider()}${this.renderRegenerateStyle()}${this.renderLabels()}${this.renderCenterAt()}${this.renderDefaultSymbol()}${this.renderShowInLegend()}</calcite-block>`}renderSymbol(){const{smartMappingState:e}=this,t=(0,o.g)(e),a=(0,o.c)(t,"color"),i=t.classBreakInfos[0].symbol,s=a.stops.map(e=>{const t=e.color.clone();return t.a=1,t});return l.qy`<arcgis-map-config-smart-mapping-symbol-button .symbol=${i} .colors=${s} type=color-ramp ramp-type=continuous @arcgisSmartMappingSymbolButtonSymbolChange=${()=>{this.requestUpdate(),this.sliderNode&&(this.sliderNode.manager.component.requestUpdate(),this.sliderNode.updateColors()),this.rotationNode.value&&this.rotationNode.value.manager.component.requestUpdate()}} ${(0,p.K)(this.symbolButtonRefHandler)}></arcgis-map-config-smart-mapping-symbol-button>`}renderColorSlider(){const{smartMappingState:e}=this;return l.qy`<arcgis-map-config-smart-mapping-color-slider @arcgisSmartMappingColorSliderChange=${()=>{const t=(0,o.g)(e),a=(0,o.c)(t,"color"),i=(0,o.p)(t,"color"),l=!!i&&"percent"===i.style,s=!!i&&"percent-of-total"===i.style;a.stops[0].label=`< ${(0,d.g)(a.stops[0].value,l,s)}`,a.stops[2].label=(0,d.g)(a.stops[2].value,l,s),a.stops[4].label=`> ${(0,d.g)(a.stops[4].value,l,s)}`,this.segmentedControlNode&&(1===a.stops[2].value?(this.equalNode.checked=!0,this.averageNode.checked=!1):(this.equalNode.checked=!1,this.averageNode.checked=!0)),this.requestUpdate(),this.sliderNode&&this.sliderNode.manager.component.requestUpdate()}} @arcgisSmartMappingColorSliderError=${e=>this.arcgisSmartMappingPanelsCompareError.emit(e.detail)} ${(0,p.K)(this.sliderRefHandler)}></arcgis-map-config-smart-mapping-color-slider>`}renderRegenerateStyle(){const{smartMappingState:e}=this,{mapImageSublayer:t}=e;return t?"":l.qy`<arcgis-map-config-smart-mapping-regenerate-style @arcgisRendererRegenerate=${()=>{this.requestUpdate(),this.sliderNode&&(this.sliderNode.manager.component.requestUpdate(),this.sliderNode.updateStatistics())}}></arcgis-map-config-smart-mapping-regenerate-style>`}renderLabels(){const{smartMappingState:e}=this,{_messages:t}=e,a=(0,o.g)(e),i=(0,o.p)(a,"color"),s=i?i.style:void 0;return l.qy`<calcite-label>${t.panels.compare.labels}<calcite-select width=full role=button .label=${t.panels.compare.labels} @calciteSelectChange=${this.handleLabelChange}><calcite-option .value=${t.panels.compare.ratioLabel} .label=${t.panels.compare.ratioLabel} .selected=${"ratio"===s}></calcite-option><calcite-option .value=${t.panels.compare.percentTotalLabel} .label=${t.panels.compare.percentTotalLabel} .selected=${"percent-of-total"===s}></calcite-option><calcite-option .value=${t.panels.compare.percentLabel} .label=${t.panels.compare.percentLabel} .selected=${"percent"===s}></calcite-option></calcite-select></calcite-label>`}renderCenterAt(){const{statistics:e,statisticsStatus:t,smartMappingState:a}=this,{_messages:i}=a;if(t!==o.s.SUCCESS)return"";const s=(0,o.g)(a),n=(0,o.c)(s,"color");if(!(0,o.V)(e.min)||!(0,o.V)(e.max)||e.min>=1||e.max<=1)return"";const r=1===n.stops[2].value?"equal":"average";return l.qy`<calcite-label>${i.panels.compare.centerAt}</calcite-label><calcite-segmented-control class="segmented-control" scale=s width=full @calciteSegmentedControlChange=${e=>{e.stopPropagation(),this.handleCenterAtChange(e.target.selectedItem.value)}} ${(0,p.K)(this.segmentedControlRefHandler)}><calcite-segmented-control-item .checked=${"equal"===r} value=equal ${(0,p.K)(this.equalRefHandler)}>${i.panels.compare.centerEqualValues}</calcite-segmented-control-item><calcite-segmented-control-item .checked=${"average"===r} value=average ${(0,p.K)(this.averageRefHandler)}>${i.panels.compare.centerAverageValue}</calcite-segmented-control-item></calcite-segmented-control>`}renderDefaultSymbol(){return l.qy`<arcgis-map-config-smart-mapping-default-symbol @arcgisSmartMappingDefaultSymbolBeforeToggle=${()=>(0,o.f)()} @arcgisSmartMappingDefaultSymbolChange=${()=>this.symbolButtonNode?.manager.component.requestUpdate()}></arcgis-map-config-smart-mapping-default-symbol>`}renderShowInLegend(){const{smartMappingState:e}=this,{_messages:t}=e,a=(0,o.g)(e),i=(0,o.c)(a,"color").legendOptions,s=!i||!1!==i.showLegend;return l.qy`<calcite-label class="legend-toggle-padding" layout=inline-space-between>${t.panels.compare.includeInLegend}<calcite-switch .checked=${s} @calciteSwitchChange=${()=>this.handleIncludeInLegendToggle()}></calcite-switch></calcite-label>`}renderRotation(){const{smartMappingState:e}=this,t=(0,o.g)(e),a=(0,o.c)(t,"opacity"),i=(0,o.c)(t,"rotation");return l.qy`<arcgis-map-config-smart-mapping-rotation .open=${!a&&!!i} @arcgisSmartMappingRotationError=${({detail:e})=>this.arcgisSmartMappingPanelsCompareError.emit(e)} ${(0,p.K)(this.rotationNode)}></arcgis-map-config-smart-mapping-rotation>`}}(0,i.c)("arcgis-map-config-smart-mapping-panels-compare",S)},65595:(e,t,a)=>{a.d(t,{c:()=>n,u:()=>o});var i=a(20936),l=a(1225),s=(a(54312),a(44345),a(55448),a(52797),a(34031),a(63438),a(5933),a(28927),a(83368),a(89704),a(5294),a(18423),a(96086),a(91813),a(21255),a(13078),a(21303),a(12627),a(56451),a(31521),a(23054),a(5077),a(23795),a(17902),a(87420),a(30161),a(81734),a(75698),a(10628),a(59640),a(64451),a(6176),a(83552));a(77462),a(49403),a(10281),a(83930),a(66617),a(10454),a(29614),a(94916),a(52554),a(2156),a(4038),a(49851),a(75054),a(15223),a(70169),a(47207),a(70852),a(48103),a(39423),a(85681),a(18444),a(42411),a(9767),a(38218),a(91914),a(86605),a(68196),a(440),a(46547),a(6238),a(7299);function n(e){e.selectedFields=[],e.layerFields=void 0,e.fields=void 0,e.hideLayerTitle=!1,e.supportsArcade=!1,e.stringFieldsCount=-1,e.dateFieldsCount=-1,e.numberFieldsCount=-1,e.containsFlow=!0,e.oneFeatureResponseStatus=l.s.MISSING,e.selectedAttribute=void 0,e.selectedAttributeText=void 0,e.selectedTypeValue=void 0,e.selectedValue=void 0,e.lastDefault=void 0,e.lastDefaults=void 0,e.dotColorSelected=void 0,e.backgroundStyleSelected=void 0,e.lastSettings=void 0,e.classedSymbolSelectedIdx=void 0,e.allUniqueValues=void 0,e.useFeatureReduction=void 0,e.symbolStylerConfig={},e.allowTimeSeriesConfiguration=!1,e.rasterInfo=void 0}function o(){const e=(0,s.Gk)(),t=e;e.manager.onLoad(()=>{t.smartMappingState=function(e,t){const a=r.get(e);if(a)return a;const l=(0,i.el)(e,t);return l&&"store"in l?(r.set(e,l.store),l.store):null}(e.el,"arcgis-map-config-smart-mapping")})}const r=new WeakMap},89989:(e,t,a)=>{a.d(t,{w:()=>s});var i=a(54312),l=a(1225);a(44345),a(55448),a(52797),a(34031),a(63438),a(5933),a(28927),a(83368),a(89704),a(5294),a(18423),a(96086),a(91813),a(21255),a(13078),a(21303),a(12627),a(56451),a(31521),a(23054),a(5077),a(23795),a(17902),a(87420),a(30161),a(81734),a(75698),a(10628),a(59640),a(64451),a(6176),a(83552),a(77462),a(49403),a(10281),a(83930),a(66617),a(10454),a(29614),a(94916),a(52554),a(2156),a(4038),a(49851),a(75054),a(15223),a(70169),a(47207),a(70852),a(48103),a(39423),a(85681),a(18444),a(42411),a(9767),a(38218),a(91914),a(86605),a(68196),a(440),a(46547),a(6238),a(7299);function s(e,t,a){const{layer:s,mapView:o,useFeatureReduction:r}=e;return r&&"featureReduction"in s&&"binning"===s.featureReduction.type?i.watch(()=>o.scale,()=>{const i=s.featureReduction;o.scale<=i.maxScale&&!t.disabled?((0,l.f)(),function(e,t,a){const i=document.createElement("arcgis-map-config-smart-mapping-scale-alert-popover");i.smartMappingState=e,i.refElement=t,i.addEventListener("arcgisSmartMappingScaleAlertPopoverBack",()=>{n(),a()}),document.body.append(i)}(e,t,a),(0,l.h)(t,!0)):o.scale>i.maxScale&&t.disabled&&(n(),(0,l.h)(t,!1),t.setFocus())}):void 0}function n(){document.querySelectorAll("arcgis-map-config-smart-mapping-scale-alert-popover").forEach(e=>e.remove())}}}]);