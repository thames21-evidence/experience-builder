/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-0766f1.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-0766f1"],{98528:(e,t,i)=>{i.r(t),i.d(t,{ArcgisMapConfigLayerViewSelection:()=>y});var s=i(73679),l=i(4395),a=i(2801),r=(i(13661),i(21255),i(2924),i(33752),i(44345),i(588),i(51072),i(83552)),o=i(85643),n=i(73801);const c="flow",d="footer-top",u="info",h="info-heading",g="info-description",p="fixed-list-item",m=l.AH`.flow,.panel{height:100%}.footer{width:100%}.footer-top{display:flex}.info{display:grid;grid-template-columns:repeat(1,minmax(0px,1fr));gap:.5rem;pointer-events:none;padding:1rem .75rem}.info-heading{font-size:var(--calcite-font-size--1);line-height:1.375;color:var(--calcite-color-text-2);transition-duration:.15s;transition-timing-function:cubic-bezier(.4,0,.2,1);font-weight:var(--calcite-font-weight-medium);pointer-events:none}.info-description{font-size:var(--calcite-font-size--2);line-height:1.375;color:var(--calcite-color-text-3);transition-duration:.15s;transition-timing-function:cubic-bezier(.4,0,.2,1);pointer-events:none}.fixed-list-item{margin-bottom:10px}`;class y extends n.WF{constructor(){super(),this._direction=(0,r.jH)(),this.flowItemNode=(0,o._)(),this.listNode=(0,o._)(),this.reRender=!1,this.arcgisSelectionCancel=(0,n.lh)(),this.arcgisStatusChange=(0,n.lh)(),this.listen("arcgisMsgClosed",this.arcgisMsgClosedHandler)}static{this.properties={reRender:16,props:0,status:9}}static{this.styles=m}async setFocus(){const{props:e}=this,{derivativeLayers:t}=e;t.hasAny?requestAnimationFrame(()=>this.swapButtonNode?.setFocus()):requestAnimationFrame(()=>this.listNode.value?.setFocus())}arcgisMsgClosedHandler(){this.msgNode&&(this.msgNode.remove(),this.msgNode=void 0),clearTimeout(this.timeoutHndl),this.timeoutHndl=void 0,this.reRender=!this.reRender}goNext(){const{props:e}=this,{layerIds:t}=e;this.arcgisStatusChange.emit({status:a.f.OVERVIEW,layerIds:t})}goSwapSource(){const{props:e}=this,{layerIds:t}=e;this.arcgisStatusChange.emit({status:a.f.SWAP_SOURCE,layerIds:t})}onSelectionChange(){const{props:e,el:t}=this,{layer:i,_messages:s}=e,r=[];this.listNode.value.querySelectorAll("calcite-list-item").forEach(e=>{e.selected&&r.push(e.value)}),r.length?(this.listNode.value.querySelectorAll("calcite-list-item").forEach(e=>{"group"===i.type?(0,a.a)(i).find(t=>t.layerId===e.value).visible=e.selected:i.visible=e.selected}),this.props.layerIds=r):(this.msgNode=(0,n.dN)(l.qy`<arcgis-map-config-layer-view-msg .props=${e} .flowItemElement=${this.flowItemNode.value} .message=${s.msg.atLeastOne} is-warning @arcgisMsgClosed=${()=>{clearTimeout(this.timeoutHndl),this.removeMsg()}}></arcgis-map-config-layer-view-msg>`),t.shadowRoot.appendChild(this.msgNode),clearTimeout(this.timeoutHndl),this.timeoutHndl=setTimeout(()=>this.removeMsg(),7e3),this.listNode.value.querySelectorAll("calcite-list-item").forEach(t=>{e.layerIds.includes(t.value)&&(t.selected=!0)})),this.reRender=!this.reRender}removeMsg(){const{props:e}=this;this.timeoutHndl=void 0,this.msgNode&&(this.msgNode.remove(),this.msgNode=void 0,(()=>{this.listNode.value.querySelectorAll("calcite-list-item").forEach(t=>{e.layerIds.includes(t.value)&&t.setFocus()})})())}render(){const{props:e,status:t}=this,{viewItem:i,layerItem:s,_messages:r}=e;return this.el.classList.add("calcite-match-height"),l.qy`<calcite-flow class=${(0,n.CP)(c)} .customItemSelectors=${"arcgis-map-config-layer-view-swap-source, arcgis-map-config-layer-view-browse-layer"}><calcite-flow-item .heading=${i?.title||s?.title||""} .description=${r.general.sourceLayer} .selected=${t===a.f.SELECTION} class="panel" ${(0,o.K)(this.flowItemNode)}>${this.renderFooterButtons()}${this.renderInfo()}${this.renderSublayers()}</calcite-flow-item>${[a.f.SWAP_SOURCE,a.f.BROWSE_LAYER].includes(t)?this.renderSwapSource():null}</calcite-flow>`}renderFooterButtons(){const{props:e}=this,{layer:t,layerIds:i,viewItem:s,derivativeLayers:a,hasReplicas:r,_messages:c}=e,u="rtl"===this._direction,h=!(s?.typeKeywords&&s?.typeKeywords?.indexOf("IoTFeatureLayer")>-1)&&s?.itemControl&&["admin","update"].includes(s.itemControl),g=t?.loaded&&i.length&&!a.hasAny;return h&&a.hasAny?l.qy`<div slot=footer class="footer"><div class=${(0,n.CP)(d)}><calcite-button @click=${r?void 0:this.goSwapSource} .disabled=${r} appearance=solid width=full icon-start=arrow-right-left .label=${c.general.swapSource} ${(0,o.K)(e=>this.swapButtonNode=e)}>${c.general.swapSource}</calcite-button><calcite-button @click=${()=>this.arcgisSelectionCancel.emit()} appearance=transparent width=full .label=${c.general.close}>${c.general.close}</calcite-button></div></div>`:l.qy`<div slot=footer class="footer"><calcite-button .disabled=${!g} @click=${g?this.goNext:void 0} appearance=solid width=full .iconEnd=${u?"arrow-left":"arrow-right"} .label=${c.general.next}>${c.general.next}</calcite-button>${h&&l.qy`<div><calcite-button .disabled=${!g||r} @click=${g&&!r?this.goSwapSource:void 0} appearance=transparent width=full icon-start=arrow-right-left .label=${c.general.swapSource} ${(0,o.K)(e=>this.swapButtonNode=e)}>${c.general.swapSource}</calcite-button></div>`||""}</div>`}renderInfo(){const{props:e}=this,{viewItem:t,derivativeLayers:i,hasReplicas:s,_messages:a}=e,r=t?.itemControl&&["admin","update"].includes(t.itemControl);return l.qy`<div class="info">${i.hasAny?l.qy`<calcite-notice scale=s width=full open icon=information><div slot=message>${a.general.derivativeLayerNotice}</div></calcite-notice>`:null}${s&&r?l.qy`<calcite-notice scale=s width=full open icon=information><div slot=message>${a.general.selectLayerPanelReplicaNotice}</div></calcite-notice>`:null}${i.hasAny?null:l.qy`<div><div class=${(0,n.CP)(h)}>${a.general.selectLayerPanelTitle}</div><div class=${(0,n.CP)(g)}>${a.general.selectLayerPanelDescription}</div></div>`}</div>`}renderSublayers(){const{props:e}=this,{derivativeLayers:t}=e;return t.hasAny?this.renderNonEditableSublayers():this.renderEditableSublayers()}renderNonEditableSublayers(){const{props:e}=this,{layer:t,layerIds:i,_messages:s}=e,r=[],o=[];return"group"===t.type?((0,a.c)(t)?.forEach(e=>{i.includes(e.layerId)&&o.unshift(this.renderNonEditableSublayer(e))}),(0,a.g)(t)?.forEach(e=>{i.includes(e.layerId)&&r.unshift(this.renderNonEditableSublayer(e))})):(t.isTable?o:r).push(this.renderNonEditableSublayer(t)),l.qy`<div class=${(0,n.CP)(u)}>${r.length>0?l.qy`<div class=${(0,n.CP)(h)}>${s.general.layers}</div>`:null}${r.length>0?l.qy`<ul>${r}</ul>`:null}${o.length>0?l.qy`<div class=${(0,n.CP)(h)}>${s.general.tables}</div>`:null}${o.length>0?l.qy`<ul>${o}</ul>`:null}</div>`}renderNonEditableSublayer(e){return l.qy`<li class=${(0,n.CP)(p)}>${e.title}</li>`}renderEditableSublayers(){const{props:e}=this,{layer:t,_messages:i}=e,s=[];return"group"===t.type?((0,a.c)(t)?.forEach(e=>{s.unshift(this.renderEditableSublayer(e))}),(0,a.g)(t)?.forEach(e=>{s.unshift(this.renderEditableSublayer(e))})):s.push(this.renderEditableSublayer(t)),l.qy`<calcite-list .label=${i.general.layers} selection-mode=multiple @calciteListChange=${this.onSelectionChange} ${(0,o.K)(this.listNode)}>${s}</calcite-list>`}renderEditableSublayer(e){const{props:t}=this,{layerIds:i,_messages:s}=t;return l.qy`<calcite-list-item .label=${e.title??""} .value=${e.layerId} .description=${e.isTable?s.general.table:s.general.layer} .selected=${i.includes(e.layerId)}></calcite-list-item>`}renderSwapSource(){const{props:e,status:t}=this;return l.qy`<arcgis-map-config-layer-view-swap-source .props=${e} .status=${t} .selected=${t===a.f.SWAP_SOURCE||t===a.f.BROWSE_LAYER} @arcgisStatusChange=${()=>setTimeout(()=>this.flowItemNode.value?.setFocus(),200)}></arcgis-map-config-layer-view-swap-source>`}}(0,s.c)("arcgis-map-config-layer-view-selection",y)}}]);