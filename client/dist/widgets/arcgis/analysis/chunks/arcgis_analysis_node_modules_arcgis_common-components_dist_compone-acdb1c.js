/*! For license information please see arcgis_analysis_node_modules_arcgis_common-components_dist_compone-acdb1c.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_common-components_dist_compone-acdb1c"],{18119:(e,t,i)=>{i.r(t),i.d(t,{ArcgisFieldInfo:()=>$});var s=i(22229),a=i(4395),r=i(46317),n=i(85643),l=i(73801),o=i(47640),u=i(12762),c=i(54312),d=i(52797),p=i(5294),m=i(24457),y=i(72349),h=i(51546),f=i(34031),v=i(42984),g=(e=>(e.MISSING="missing",e.IN_PROGRESS="inProgress",e.SUCCESS="success",e.FAILED="failed",e))(g||{}),S=(e=>(e.DATE="date",e.DATE_ONLY="date-only",e.GUID="guid",e.NUMBER="number",e.OID="oid",e.STRING="string",e.TIME_ONLY="time-only",e.TIMESTAMP_OFFSET="timestamp-offset",e.UNKNOWN="unknown",e))(S||{});function w(e){return null!=e}function F(e){const{layer:t,fieldName:i}=e;let s;const a=(0,h.s)(t);let r;"popupTemplate"in t&&(r=t.popupTemplate);const n=r?r.fieldInfos:[];return("imagery-tile"===t.type||"wcs"===t.type||"imagery"===t.type&&t.rasterFields.length?t.rasterFields:t.fields)?.filter(e=>e.name===i).forEach(r=>{const l=!a&&n?n.filter(e=>e.fieldName===r.name):null,o=a?t.getFieldAlias(i):l?.length?l[0].label:r.alias;/^raster.(item|service)pixelvalue/iu.test(i)&&(r.type="double");const u={layerField:r,label:o||r.name};u.codedValues=function(e,t){const{layer:i}=t;if("subtype-sublayer"===i.type&&i.subtypeField===e){const e=i.parent?.subtypes?.find(e=>e.code===i.subtypeCode);if(e)return[{code:e.code,name:e.name}]}if("feature"!==i.type&&"imagery"!==i.type)return;const s="feature"===i.type?i.typeIdField:void 0,a="feature"===i.type?i.types:void 0;let r;const n=i.fields.find(t=>t.name===e),l=n.domain;return"feature"===i.type&&s&&a?(s===e?r=a.map(e=>({code:e.id,name:e.name})):(r=[],a.forEach(t=>{if(t.domains[e]&&"inherited"!==t.domains[e].type)t.domains[e].codedValues&&t.domains[e].codedValues.forEach(async e=>{let t=!1;r.forEach(i=>{i.code===e.code&&(t=!0,`, ${i.name},`.includes(`, ${e.name},`)||(i.name+=`, ${e.name}`))}),t||r.push(p.clone(e))});else{const e=l;e?.codedValues&&e.codedValues.forEach(async e=>{let t=!1;r.forEach(i=>{i.code===e.code&&(t=!0,`, ${i.name},`.includes(`, ${e.name},`)||(i.name+=`, ${e.name}`))}),t||r.push(p.clone(e))})}})),!r.length&&l?.codedValues&&(r=p.clone(l.codedValues))):l?.codedValues&&(r=n.domain.codedValues),r?.length?r:null}(i,e),function(e){switch(e.layerField.type){case"string":e.simpleFieldType=S.STRING;break;case"date":e.simpleFieldType=S.DATE;break;case"timestamp-offset":e.simpleFieldType=S.TIMESTAMP_OFFSET;break;case"date-only":e.simpleFieldType=S.DATE_ONLY;break;case"time-only":e.simpleFieldType=S.TIME_ONLY;break;case"oid":e.simpleFieldType=S.OID;break;case"guid":case"global-id":e.simpleFieldType=S.GUID;break;case"small-integer":case"big-integer":case"integer":case"single":case"double":case"long":e.simpleFieldType=S.NUMBER}}(u),u.simpleFieldType&&(s=u)}),s}async function I(e){e.statisticsStatus=g.IN_PROGRESS;const{layer:t,view:i}=e;if("imagery-tile"===t.type||"wcs"===t.type||"stream"===t.type||"voxel"===t.type)throw new Error("could not get feature count");try{return await async function(e,t){if("feature"===e.type&&!e.url)return await async function(e){const t=e.createQuery();t.outFields=["*"];const i=await e.queryFeatures(t);if(i.features.length)return i.features.length;throw new Error("could not get feature count")}(e);if("feature"===e.type||"csv"===e.type||"scene"===e.type||"wfs"===e.type||"geojson"===e.type)return await e.queryFeatureCount();if(t&&("stream"===e.type||"ogc-feature"===e.type))return await async function(e,t){return await(await t.whenLayerView(e)).queryFeatureCount()}(e,t)}(t,i)}catch{return}}async function T(e){const{layer:t}=e;if(["imagery","imagery-tile","stream","ogc-feature"].includes(t.type))throw new Error("cannot get feature from service");const i=new f.default({where:"1=1",outFields:["*"],returnGeometry:!1});return"sourceJSON"in t&&t.sourceJSON?.advancedQueryCapabilities?.supportsPagination&&(i.num=1),await t.queryFeatures(i)}const E=a.AH`:host{height:100%}.container{padding:var(--calcite-spacing-xs);background-color:var(--calcite-color-foreground-1)}.title{font-weight:700;padding:5px 0}.missing,.data{color:#a9a9a9}.count{white-space:nowrap}.section{padding:var(--calcite-spacing-xs) 0}.statistics-row{border-top:var(--calcite-border-width-sm) solid var(--calcite-color-border-2);padding:var(--calcite-spacing-xs) 0;display:flex;justify-content:space-between}.statistics-row-top-values{border-top:var(--calcite-border-width-sm) solid var(--calctie-color-border-2);padding:20px 0 var(--calcite-spacing-xs) 0;display:flex;justify-content:space-between}`;class $ extends l.WF{constructor(){super(...arguments),this._messages=(0,v.u)({blocking:!0}),this._propWatcherTask=new o.YZ(this,{task:async([e,t])=>{if(!w(e)||!w(t))throw console.error("Required properties are missing."),new Error;await this.processProps()},args:()=>[this.layer,this.fieldName]}),this.oneFeatureResponseStatus=g.MISSING,this.statisticsStatus=g.MISSING,this.uniqueValuesStatus=g.MISSING,this.hideStatistics=!1,this.arcgisComplete=(0,l.lh)(),this.arcgisFieldInfoComplete=(0,l.lh)()}static{this.properties={oneFeatureResponseStatus:16,oneFeatureResponse:16,statisticsStatus:16,statistics:16,uniqueValuesStatus:16,uniqueValues:16,view:0,layer:0,fieldName:1,hideStatistics:5}}static{this.styles=E}async processProps(){const{view:e,layer:t,fieldName:i,hideStatistics:s}=this;if(!t||!i)return;let a;if("esri.layers.support.Sublayer"===t.declaredClass){const i=t;e&&await c.whenOnce(()=>!e.updating),a=await i.createFeatureLayer(),await(a?.load())}var r;this.props={view:e,layer:a??t,fieldName:i,hideStatistics:s},this.props.fieldInfo=F(this.props),"scene"===t.type&&u.default.request.interceptors?.push({urls:`${r=t,"scene"===r.type?r.associatedLayer?.url:r.url}/${t.layerId}`,before(e){e.requestOptions.authMode="no-prompt"}}),this.oneFeatureResponseStatus=g.IN_PROGRESS;try{const e=await async function(e){const{view:t,layer:i}=e;if("imagery"===i.type||"imagery-tile"===i.type||"wcs"===i.type)throw new Error("could not get feature");if("feature"===i.type&&!i.url||"wfs"===i.type){const e=i.createQuery();e.start=0,e.num=5,e.outFields=["*"];const t=await i.queryFeatures(e);if(t.features.length)return t;throw new Error("could not get feature")}{if(!t)return await T(e);let s;if("subtype-sublayer"===i.type||"sublayer"===i.type){let e=i.parent;for(;["subtype-group","map-image"].includes(e.type);)e=e.parent;s=await t.whenLayerView(e)}else s=await t.whenLayerView(i);if(s.availableFields.length===i.fields.length||["stream","ogc-feature"].includes(i.type)&&s.availableFields.length>0){const t=i.createQuery();t.start=0,t.num=5,t.outFields=["*"];const a=await s.queryFeatures(t);return a.features?.length?a:await T(e)}return await T(e)}}(this.props);this.oneFeatureResponse=e,this.oneFeatureResponseStatus=g.SUCCESS}catch{this.oneFeatureResponseStatus=g.FAILED}if("stream"===t.type)return this.uniqueValuesStatus=g.FAILED,void(this.statisticsStatus=g.FAILED);if(s)this.uniqueValuesStatus=g.FAILED;else{this.uniqueValuesStatus=g.IN_PROGRESS;try{const e=await async function(e){const{layer:t,view:i,fieldName:s}=e;if("imagery-tile"===t.type||"wcs"===t.type||"voxel"===t.type)throw new Error("could not get unique values for ImageryLayer/ImageryTileLayer/WCSLayer/VoxelLayer");"feature"===t.type&&!t.url&&(t.outFields=["*"]);try{return await(0,y.default)({layer:t,view:i,field:s})}catch{throw new Error("could not get unique values")}}(this.props);this.uniqueValues=e,this.uniqueValuesStatus=e?.uniqueValueInfos?.length?g.SUCCESS:g.FAILED}catch{this.uniqueValuesStatus=g.FAILED}}if(s)this.statisticsStatus=g.FAILED;else{this.statisticsStatus=g.IN_PROGRESS;try{const e=await async function(e){const{layer:t,view:i,fieldName:s,fieldInfo:a}=e;if("imagery-tile"===t.type||"wcs"===t.type||"voxel"===t.type)throw new Error("could not get statistics for ImageryLayer/ImageryTileLayer/WCSLayer/VoxelLayer");if(!a||"oid"===a.layerField.type||"guid"===a.layerField.type||"global-id"===a.layerField.type)return{totalCount:await I(e),nullcount:0};try{const a=await(0,m.default)({layer:t,view:i,field:s,outStatisticTypes:{exclude:["median"]}});if(!w(a.count))throw new Error("could not get statistics");const r="sourceJSON"in t&&t.sourceJSON.maxRecordCount===a.count;if(w(a.nullcount)&&!r)return{...a,totalCount:a.count+a.nullcount};{const t=await I(e);return{...a,totalCount:t}}}catch{throw new Error("could not get statistics")}}(this.props);if(!w(e.totalCount)&&w(e.count)&&this.uniqueValuesStatus===g.SUCCESS){const t=this.uniqueValues.uniqueValueInfos;for(let i=0;i<t.length;i++){const s=t[i];if(null===s.value){e.totalCount=s.count+e.count;break}}e.totalCount??=e.count}this.statistics=e,this.statisticsStatus=g.SUCCESS}catch{this.statisticsStatus=g.FAILED}}}_getFieldTypeLabel(e){const{_messages:t}=this,i=t.fieldTypes;switch(e){case"big-integer":return i.bigInteger;case"date":return i.date;case"date-only":return i.dateOnly;case"double":return i.double;case"global-id":return i.globalId;case"guid":return i.guid;case"integer":return i.integer;case"long":return i.long;case"oid":return i.oid;case"single":return i.single;case"small-integer":return i.smallInteger;case"string":default:return i.string;case"time-only":return i.timeOnly;case"timestamp-offset":return i.timestampOffset}}_getStatisticsType(e){switch(e.layerField.type){case"big-integer":case"double":case"integer":case"single":case"small-integer":if(e.codedValues)return S.STRING;switch(e.layerField.valueType){case"binary":case"description":case"location-or-place-name":case"name-or-title":case"ordered-or-ranked":case"type-or-category":return S.STRING;default:return S.NUMBER}case"date":return S.DATE;case"date-only":return S.DATE_ONLY;case"string":return S.STRING;case"time-only":return S.TIME_ONLY;case"timestamp-offset":return S.TIMESTAMP_OFFSET;default:return S.STRING}}_getFieldValueTypeCamelCase(e){switch(e.layerField.valueType){case"count-or-amount":return"countOrAmount";case"date-and-time":return"dateAndTime";case"location-or-place-name":return"locationOrPlaceName";case"name-or-title":return"nameOrTitle";case"ordered-or-ranked":return"orderedOrRanked";case"percentage-or-ratio":return"percentageOrRatio";case"type-or-category":return"typeOrCategory";case"unique-identifier":return"uniqueIdentifier";case"phone-number":return"phoneNumber";case"email-address":return"emailAddress";default:return e.layerField.valueType}}_getDisplayString(e){const{props:t}=this,{fieldInfo:i}=t;switch(i.simpleFieldType){case S.DATE:return this._getDateString(e);case S.DATE_ONLY:return this._getDateOnlyString(e);case S.GUID:return this._getGuidString(e);case S.NUMBER:return this._getNumberString(e);case S.TIME_ONLY:return this._getTimeOnlyString(e);case S.TIMESTAMP_OFFSET:return this._getTimestampOffsetString(e);default:return`${e}`}}_getDateString(e){const{view:t}=this.props;return t&&"unknown"===t.timeZone?d.formatDate(e,{...d.convertDateFormatToIntlOptions("short-date-short-time"),timeZone:"utc",timeZoneName:"shortOffset"}):d.formatDate(e,{...d.convertDateFormatToIntlOptions("short-date-short-time"),timeZone:t?.timeZone||"system"})}_getTimestampOffsetString(e){const{view:t}=this.props;return"string"==typeof e?t&&"unknown"===t.timeZone?d.formatTimestamp(e,{...d.convertDateFormatToIntlOptions("short-date-short-time"),timeZone:"utc",timeZoneName:"shortOffset"}):d.formatTimestamp(e,{...d.convertDateFormatToIntlOptions("short-date-short-time"),timeZone:t?.timeZone||"system"}):this._getDateString(e)}_getDateOnlyString(e){return d.formatDateOnly(e,d.convertDateFormatToIntlOptions("short-date"))}_getTimeOnlyString(e){return"string"==typeof e?d.formatTimeOnly(e,d.convertDateFormatToIntlOptions("short-date-long-time")):d.formatDate(e,{...d.convertDateFormatToIntlOptions("long-time"),timeZone:"utc"})}_getGuidString(e){return e.startsWith("{")?e:`{${e}}`}_getNumberString(e){return d.formatNumber(e)}_printNumValue(e){return w(e)?this._getNumberString(Math.round(100*e)/100):"--"}_setCompleteRef(){this.arcgisComplete.emit(),this.arcgisFieldInfoComplete.emit()}render(){return this._propWatcherTask.render({complete:()=>{const{props:e}=this,{fieldInfo:t}=e;if(t)return a.qy`<div class="container">${this.renderFieldType()}${this.renderFieldAlias()}${this.renderFieldDescription()}${this.renderFieldValueType()}${this.renderFieldSampleValue()}${this.renderFieldFormat()}${this.renderFieldStatistics()}</div>`}})}renderFieldType(){const{_messages:e,props:t}=this,{fieldInfo:i}=t,s=this._getFieldTypeLabel(i.layerField.type);return a.qy`<div class="section"><div class="title">${e.fieldType}</div><div>${s}</div></div>`}renderFieldAlias(){const{_messages:e,props:t}=this,{fieldInfo:i}=t;return a.qy`<div class="section"><div class="title">${e.fieldAlias}</div><div>${i.label}</div></div>`}renderFieldDescription(){const{_messages:e,props:t}=this,{layer:i}=t;if("feature"!==i.type)return;const{fieldInfo:s}=t,r=s.layerField.description;return a.qy`<div class="section"><div class="title">${e.fieldDescription}</div><div class=${(0,l.CP)({missing:!r})}>${r||e.fieldDescriptionNotSet}</div></div>`}renderFieldValueType(){const{_messages:e,props:t}=this,{layer:i}=t;if("feature"!==i.type)return;const{fieldInfo:s}=t,r=this._getFieldValueTypeCamelCase(s);return a.qy`<div class="section"><div class="title">${e.fieldValueType}</div><div class=${(0,l.CP)(r?"":"missing")}>${r?e.fieldValueTypes[r]:e.fieldValueTypeNotSet}</div></div>`}renderFieldSampleValue(){const{oneFeatureResponse:e,oneFeatureResponseStatus:t,statisticsStatus:i,statistics:s,uniqueValuesStatus:r,uniqueValues:n,_messages:o,props:u}=this,{layer:c,fieldName:d,fieldInfo:p}=u,{statistics:m}=o;let y;if(["imagery-tile","voxel"].includes(c.type)||"stream"!==c.type&&[S.STRING,S.OID,S.GUID].includes(this._getStatisticsType(p))&&r!==g.FAILED)return;t===g.SUCCESS?e.features.forEach(e=>{(void 0===y||null===y&&null!==e.attributes[d])&&(y=e.attributes[d])}):i===g.SUCCESS?y=s.min:r===g.SUCCESS&&(y=n.uniqueValueInfos?.[0]?.value||n.uniqueValueInfos?.[1]?.value);const h=p.codedValues;return w(y)&&(y=h?h.find(e=>y===e.code)?.name||y:this._getDisplayString(y)),a.qy`<div class="section"><div class="title">${o.fieldSampleValue}</div><div class=${(0,l.CP)(t===g.FAILED&&i===g.FAILED&&r===g.FAILED||!w(y)?"missing":"")}>${t===g.SUCCESS||i===g.SUCCESS||r===g.SUCCESS?y?.toString()??m.allNulls:t===g.FAILED&&i===g.FAILED&&r===g.FAILED?o.fieldSampleNotAvailable:o.fieldSampleRetrieving}</div></div>`}renderFieldFormat(){const{_messages:e,props:t}=this,{fieldName:i,fieldInfo:s,layer:r}=t;if(!["double","long","single"].includes(s.layerField.type))return;const n="popupTemplate"in r?r.popupTemplate:void 0;if(n?.fieldInfos){const t=n.fieldInfos?.filter(e=>e.fieldName===i);if(t?.length){const i=t[0];if(w(i?.format?.places)){const t=i.format.places;return a.qy`<div class="section"><div class="title">${e.fieldDecimalPlaces}</div><div>${e.fieldNumDecimalPlaces.replace("${number}",t.toString())}</div></div>`}}}return a.qy`<div class="section"><div class="title">${e.fieldDecimalPlaces}</div><div class="missing">${e.fieldDecimalPlacesNotAvailable}</div></div>`}renderFieldStatistics(){const{statisticsStatus:e,uniqueValuesStatus:t,hideStatistics:i,_messages:s,props:l}=this,{layer:o,fieldInfo:u}=l;return i||["stream","imagery-tile","voxel"].includes(o.type)||["long"].includes(u.layerField.type)?(this.arcgisComplete.emit(),void this.arcgisFieldInfoComplete.emit()):a.qy`<div class="section"><div class="title">${s.fieldStatistics}</div>${e&&e!==g.MISSING&&e!==g.IN_PROGRESS?e===g.FAILED&&t!==g.SUCCESS?this.renderNoStatistics():(0,r.D)("field-info-statistics-content",a.qy`<div ${(0,n.K)(this._setCompleteRef)}>${this.renderStatistics()}</div>`):(0,r.D)("field-info-statistics-content",a.qy`<div class="missing">${s.fieldStatisticsRetrieving}</div>`)}</div>`}renderNoStatistics(){const{_messages:e}=this;return(0,r.D)("field-info-statistics-content",a.qy`<div class="missing" ${(0,n.K)(this._setCompleteRef)}>${e.fieldStatisticsNotAvailable}</div>`)}renderStatistics(){const{props:e}=this,{fieldInfo:t}=e;switch(this._getStatisticsType(t)){case S.NUMBER:return this.renderNumberStatistics();case S.GUID:case S.OID:case S.STRING:return this.renderStringStatistics();case S.DATE:case S.DATE_ONLY:case S.TIME_ONLY:case S.TIMESTAMP_OFFSET:return this.renderDateStatistics();default:return}}renderNumberStatistics(){const{statistics:e,_messages:t}=this;if(!e)return this.renderNoStatistics();const{statistics:i}=t;return a.qy`<div><div class="statistics-row"><div>${i.numberOfValues}</div><div class="data">${this._printNumValue(e.totalCount)}</div></div>${w(e.sum)?a.qy`<div class="statistics-row"><div>${i.sumOfValues}</div><div class="data">${this._printNumValue(e.sum)}</div></div>`:null}${w(e.min)?a.qy`<div class="statistics-row"><div>${i.minimum}</div><div class="data">${this._printNumValue(e.min)}</div></div>`:null}${w(e.max)?a.qy`<div class="statistics-row"><div>${i.maximum}</div><div class="data">${this._printNumValue(e.max)}</div></div>`:null}${w(e.avg)?a.qy`<div class="statistics-row"><div>${i.average}</div><div class="data">${this._printNumValue(e.avg)}</div></div>`:null}${w(e.stddev)?a.qy`<div class="statistics-row"><div>${i.standardDeviation}</div><div class="data">${this._printNumValue(e.stddev)}</div></div>`:null}${this.renderNullValues()}</div>`}renderStringStatistics(){const{statistics:e,uniqueValuesStatus:t,_messages:i}=this,{statistics:s}=i;return a.qy`<div><div class="statistics-row"><div>${s.numberOfValues}</div>${t!==g.SUCCESS?a.qy`<div class="missing">--</div>`:a.qy`<div class="data">${this._printNumValue(e?.totalCount)}</div>`}</div>${this.renderNullValues()}${this.renderTopValues()}</div>`}renderDateStatistics(){const{statistics:e,view:t,props:i,_messages:s}=this,{fieldInfo:r}=i;if(!e)return this.renderNoStatistics();const{statistics:n}=s,l=e.max-e.min,o=Math.floor(l/31536e6);let u=Math.floor((l-31536e6*o)/2628e6),c=Math.ceil((l-2628e6*u)/864e5);c>=30&&(u+=1,c=0);let d=1===o?n.timeSpanOptions.year:o>1?n.timeSpanOptions.years.replace("${years}",o.toString()):"";d+=o>0&&(u>0||c>0)?", ":"",d+=1===u?n.timeSpanOptions.month:u>1?n.timeSpanOptions.months.replace("${months}",u.toString()):"",d+=u>0&&c>0?", ":"",d+=1===c?n.timeSpanOptions.day:c>1?n.timeSpanOptions.days.replace("${days}",c.toString()):"";const p=r.simpleFieldType!==S.TIMESTAMP_OFFSET||!t||"unknown"!==t.timeZone,m=r.simpleFieldType===S.TIME_ONLY;return a.qy`<div><div class="statistics-row"><div>${n.numberOfValues}</div><div class="data">${this._printNumValue(e?.totalCount)}</div></div>${p&&w(e.min)?a.qy`<div class="statistics-row"><div>${m?n.minimumTime:n.minimumDate}</div><div class="data">${this._getDisplayString(e.min)}</div></div>`:null}${p&&w(e.max)?a.qy`<div class="statistics-row"><div>${m?n.maximumTime:n.maximumDate}</div><div class="data">${this._getDisplayString(e.max)}</div></div>`:null}${p&&w(e.avg)?a.qy`<div class="statistics-row"><div>${m?n.averageTime:n.averageDate}</div><div class="data">${this._getDisplayString(e.avg)}</div></div>`:null}${p&&!m&&w(e.min)&&w(e.max)&&l>0?a.qy`<div class="statistics-row"><div>${n.timespan}</div><div class="data">${d}</div></div>`:null}${this.renderNullValues()}</div>`}renderTopValues(){const{uniqueValues:e,uniqueValuesStatus:t,_messages:i,props:s}=this,{fieldInfo:r}=s,{statistics:n}=i;if(e?.uniqueValueInfos?.length){const t=e.uniqueValueInfos;t.sort((e,t)=>e.count<t.count?1:e.count>t.count?-1:0);const i=r.codedValues,s=t.filter(e=>null!==e.value).filter((e,t)=>e&&t<10).map(e=>{let t=e.value;return i?i.forEach(e=>{t===e.code&&(t=e.name)}):t=this._getDisplayString(t),a.qy`<div class="statistics-row"><div class="data">${`${t}`}</div><div class="count">${this._printNumValue(e.count)}</div></div>`});return s.length?a.qy`<div><div class="statistics-row-top-values"><div>${t.length>10?n.topTenValues:n.topValues}</div><div>${n.count}</div></div>${s}</div>`:void 0}return a.qy`<div><div class="statistics-row-top-values"><div>${n.topValues}</div><div>${n.count}</div></div><div class="statistics-row"><div class="missing">${t===g.FAILED?i.fieldUniqueValuesNotAvailable:i.fieldSampleRetrieving}</div></div></div>`}renderNullValues(){const{statistics:e,uniqueValues:t,_messages:i}=this,{statistics:s}=i;let r=e?.nullcount;if(!w(r)&&t){const e=t.uniqueValueInfos;for(let t=0;t<e.length;t++){const i=e[t];if(null===i.value){r=i.count;break}}}return a.qy`<div class="statistics-row"><div>${s.numberOfNulls}</div>${w(r)?a.qy`<div class="data">${Number.parseInt(r).toLocaleString()}</div>`:a.qy`<div class="missing">--</div>`}</div>`}}(0,s.c)("arcgis-field-info",$)},42984:(e,t,i)=>{i.d(t,{u:()=>r});var s=i(83552),a=i(22229);const r=(0,s.yr)(a.g)},46317:(e,t,i)=>{i.d(t,{D:()=>n});var s=i(85282),a=i(34670),r=i(42466);const n=(0,a.u$)(class extends a.WL{constructor(){super(...arguments),this.key=s.s6}render(e,t){return this.key=e,t}update(e,[t,i]){return t!==this.key&&((0,r.mY)(e),this.key=t),i}})},47640:(e,t,i)=>{i.d(t,{YZ:()=>n,e1:()=>a});var s=i(4836);const a={INITIAL:0,PENDING:1,COMPLETE:2,ERROR:3},r=Symbol();class n{get taskComplete(){return this.t||(1===this.i?this.t=new Promise((e,t)=>{this.o=e,this.h=t}):3===this.i?this.t=Promise.reject(this.l):this.t=Promise.resolve(this.u)),this.t}constructor(e,t,i){this.p=0,this.i=0,(this._=e).addController(this);const s="object"==typeof t?t:{task:t,args:i};this.v=s.task,this.j=s.args,this.m=s.argsEqual??l,this.k=s.onComplete,this.A=s.onError,this.autoRun=s.autoRun??!0,"initialValue"in s&&(this.u=s.initialValue,this.i=2,this.O=this.T?.())}hostUpdate(){!0===this.autoRun&&this.S()}hostUpdated(){"afterUpdate"===this.autoRun&&this.S()}T(){if(void 0===this.j)return;const e=this.j();if(!Array.isArray(e))throw Error("The args function must return an array");return e}async S(){const e=this.T(),t=this.O;this.O=e,e===t||void 0===e||void 0!==t&&this.m(t,e)||await this.run(e)}async run(e){let t,i;e??=this.T(),this.O=e,1===this.i?this.q?.abort():(this.t=void 0,this.o=void 0,this.h=void 0),this.i=1,"afterUpdate"===this.autoRun?queueMicrotask(()=>this._.requestUpdate()):this._.requestUpdate();const s=++this.p;this.q=new AbortController;let a=!1;try{t=await this.v(e,{signal:this.q.signal})}catch(e){a=!0,i=e}if(this.p===s){if(t===r)this.i=0;else{if(!1===a){try{this.k?.(t)}catch{}this.i=2,this.o?.(t)}else{try{this.A?.(i)}catch{}this.i=3,this.h?.(i)}this.u=t,this.l=i}this._.requestUpdate()}}abort(e){1===this.i&&this.q?.abort(e)}get value(){return this.u}get error(){return this.l}get status(){return this.i}render(e){switch(this.i){case 0:return e.initial?.();case 1:return e.pending?.();case 2:return e.complete?.(this.value);case 3:return e.error?.(this.error);default:throw Error("Unexpected status: "+this.i)}}}const l=(e,t)=>e===t||e.length===t.length&&e.every((e,i)=>!(0,s.Ec)(e,t[i]))},51546:(e,t,i)=>{function s(e){return null!=e}function a(e,t){const i=t.startsWith("#"),s=t.startsWith(".");for((s||i)&&(t=t.slice(1));e;){if(i){if(e.id===t)return e}else if(s){if(e.classList.contains(t))return e}else if(e.tagName.toLowerCase()===t.toLowerCase())return e;e=e.parentElement??e.getRootNode()?.host??void 0}}async function r(e,t){return"feature"!==e.type||e.url?"feature"===e.type||"csv"===e.type||"scene"===e.type||"wfs"===e.type||"geojson"===e.type||"oriented-imagery"===e.type||"subtype-group"===e.type||"subtype-sublayer"===e.type||"catalog"===e.type||"catalog-footprint"===e.type?await e.queryFeatureCount():!t||"stream"!==e.type&&"ogc-feature"!==e.type?await Promise.reject(new Error(`Can't get feature count for layer of type ${e.type}.`)):await async function(e,t){return await(await t.whenLayerView(e)).queryFeatureCount()}(e,t):await async function(e){const t=e.createQuery();t.outFields=["*"];const i=await e.queryFeatures(t);if(i.features?.length)return i.features.length;throw new Error("could not get feature count")}(e)}function n(e){return function(e){return null!=e&&"object"==typeof e&&"type"in e&&"feature"===e.type}(e)&&function(e){return"feature"===e?.type&&"feature-layer"===e.source?.type}(e)}i.d(t,{g:()=>r,i:()=>s,q:()=>a,s:()=>n})}}]);