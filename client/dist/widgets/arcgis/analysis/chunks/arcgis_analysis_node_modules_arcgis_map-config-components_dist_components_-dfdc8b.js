/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-dfdc8b.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-dfdc8b"],{28252:(e,t,s)=>{s.d(t,{u:()=>n});var o=s(85282),r=s(34670),i=s(42466);const a=(e,t,s)=>{const o=new Map;for(let r=t;r<=s;r++)o.set(e[r],r);return o},n=(0,r.u$)(class extends r.WL{constructor(e){if(super(e),e.type!==r.OA.CHILD)throw Error("repeat() can only be used in text expressions")}dt(e,t,s){let o;void 0===s?s=t:void 0!==t&&(o=t);const r=[],i=[];let a=0;for(const t of e)r[a]=o?o(t,a):a,i[a]=s(t,a),a++;return{values:i,keys:r}}render(e,t,s){return this.dt(e,t,s).values}update(e,[t,s,r]){const n=(0,i.cN)(e),{values:l,keys:c}=this.dt(t,s,r);if(!Array.isArray(n))return this.ut=c,l;const p=this.ut??=[],d=[];let u,m,g=0,h=n.length-1,y=0,f=l.length-1;for(;g<=h&&y<=f;)if(null===n[g])g++;else if(null===n[h])h--;else if(p[g]===c[y])d[y]=(0,i.lx)(n[g],l[y]),g++,y++;else if(p[h]===c[f])d[f]=(0,i.lx)(n[h],l[f]),h--,f--;else if(p[g]===c[f])d[f]=(0,i.lx)(n[g],l[f]),(0,i.Dx)(e,d[f+1],n[g]),g++,f--;else if(p[h]===c[y])d[y]=(0,i.lx)(n[h],l[y]),(0,i.Dx)(e,n[g],n[h]),h--,y++;else if(void 0===u&&(u=a(c,y,f),m=a(p,g,h)),u.has(p[g]))if(u.has(p[h])){const t=m.get(c[y]),s=void 0!==t?n[t]:null;if(null===s){const t=(0,i.Dx)(e,n[g]);(0,i.lx)(t,l[y]),d[y]=t}else d[y]=(0,i.lx)(s,l[y]),(0,i.Dx)(e,n[g],s),n[t]=null;y++}else(0,i.KO)(n[h]),h--;else(0,i.KO)(n[g]),g++;for(;y<=f;){const t=(0,i.Dx)(e,d[f+1]);(0,i.lx)(t,l[y]),d[y++]=t}for(;g<=h;){const e=n[g++];null!==e&&(0,i.KO)(e)}return this.ut=c,(0,i.mY)(e,d),o.c0}})},65722:(e,t,s)=>{s.d(t,{a:()=>i,g:()=>a,o:()=>n});var o=s(44345);const r=e=>e&&!e.endsWith("/")?`${e}/`:e;function i(e){const{customBaseUrl:t,portalHostname:s,urlKey:o}=e,{protocol:r}=window.location;return`${r}//${o?`${o}.${t}`:s}`}function a(e){return r(e.restUrl)}async function n(e){if(!e?.user)return!1;const t=`${a(e)}portals/self/signinSettings`,s=await(0,o.default)(t,{query:{f:"json",async:!1},responseType:"json"});return!(s?.data&&!s.data.blockBetaApps)}},71503:(e,t,s)=>{s.r(t),s.d(t,{ArcgisMapConfigLayerViewJoinBrowseLayer:()=>g});var o=s(73679),r=s(4395),i=s(28252),a=s(65722),n=s(76456),l=(s(63438),s(18423),s(96086),s(91813),s(21255),s(13078),s(21303),s(12627),s(13661),s(2801)),c=s(2924),p=s(33752),d=(s(44345),s(588),s(51072),s(85643)),u=s(73801);const m=r.AH`:host{display:none}:host([selected]){display:flex}.panel{height:100%}`;class g extends u.WF{constructor(){super(...arguments),this.flowItemNode=(0,d._)(),this.goUseLayer=async e=>{const{props:t}=this,{addLayer:s,targetLayer:o,view:r}=t;this.loading=!0,s&&s.id!==o.id&&r.map.remove(s);const i=new p.default({id:e});await i.load();const a=await c.default.fromPortalItem({portalItem:i});if("group"===a.type){await a.loadAll();const e=(0,l.g)(a);e?.length&&r.map.add(a),e?.forEach(e=>{!e.popupTemplate&&e.popupEnabled&&(e.popupTemplate=e.createPopupTemplate())})}else await a.load(),a.isTable||r.map.add(a),a.popupTemplate=a.createPopupTemplate();t.addItem=i,t.addLayer=a,t.addLayerId=void 0,t.joinOperation=void 0,this.arcgisStatusChange.emit({status:n.j.ADD_SELECTION})},this.loading=!1,this.menuOpen=!1,this.showBackButton=!1,this.selected=!1,this.arcgisStatusChange=(0,u.lh)()}static{this.properties={loading:16,items:16,pagination:16,error:16,props:0,menuOpen:5,showBackButton:5,selected:7,beforeBack:0}}static{this.styles=m}async setFocus(){this.flowItemNode.value?.setFocus()}loaded(){requestAnimationFrame(()=>this.flowItemNode.value?.setFocus())}onBack(){this.arcgisStatusChange.emit({status:n.j.ADD_SELECTION})}render(){const{props:e,loading:t}=this,{_messages:s}=e;return this.el.classList.add("calcite-match-height"),r.qy`<calcite-flow-item .heading=${s.join.browseForLayerTitle} .description=${s.join.browseForLayerSubTitle} .loading=${t} .selected=${this.selected} class="panel" show-back-button @calciteFlowItemBack=${this.onBack} ${(0,d.K)(this.flowItemNode)}>${this.renderItemBrowser()}</calcite-flow-item>`}renderItemBrowser(){const{props:e,pagination:t}=this,{targetItem:s,targetLayer:o,itemId:n,_messages:l}=e,{portalItem:c}=o,{portal:p}=c,d=p.user,u=`type:"Feature Service" typekeywords:"Hosted Service" -typekeywords:"View Service" -typekeywords:"Spatiotemporal" owner:"${s.owner}" -id:${n}`,m=`${(0,a.a)(p)}/home/`;return r.qy`<arcgis-item-browser @arcgisItemBrowserUpdate=${e=>{const{results:t,num:s,start:o,total:r}=e.detail;this.items=t,this.pagination={start:o,num:s,total:r}}} .filter=${u} .portal=${p} .user=${d} .api=${4} .config=${{baseUrl:m}}><arcgis-item-browser-top-bar slot=top-bar><arcgis-item-browser-search slot=search .term=${""}></arcgis-item-browser-search></arcgis-item-browser-top-bar><arcgis-item-browser-sort .options=${["modified","title","relevance"]} slot=sort></arcgis-item-browser-sort><arcgis-item-browser-content slot=content>${(0,i.u)(this.items||[],e=>e.id,e=>r.qy`<arcgis-item-browser-card .item=${e} .portal=${p} .baseUrl=${m} .preview=${"top"}><calcite-action .id=${`join-action-${e.id}`} icon=plus-circle text scale=s slot=actions-end @click=${this.goUseLayer.bind(this,e.id)}><calcite-tooltip slot=tooltip overlay-positioning=fixed>${l.join.select}</calcite-tooltip></calcite-action></arcgis-item-browser-card>`)}</arcgis-item-browser-content><arcgis-item-browser-pagination .total=${t?.total} .start=${t?.start} .num=${t?.num} slot=pagination></arcgis-item-browser-pagination></arcgis-item-browser>`}}(0,o.c)("arcgis-map-config-layer-view-join-browse-layer",g)},76456:(e,t,s)=>{s.d(t,{a:()=>i,b:()=>r,g:()=>a,h:()=>n,j:()=>o});var o=(e=>(e[e.ERROR=0]="ERROR",e[e.LOADING=1]="LOADING",e[e.TARGET_SELECTION=2]="TARGET_SELECTION",e[e.ADD_SELECTION=3]="ADD_SELECTION",e[e.BROWSE_LAYER=4]="BROWSE_LAYER",e[e.CONFIG=5]="CONFIG",e[e.CREATE=6]="CREATE",e))(o||{});function r(e,t){const{fields:s,popupTemplate:o}=e,r=o?.fieldInfos,i=s.find(e=>t===e.name);return i&&r?.find(e=>e.fieldName===i.name)?.label||i?.alias||t}function i(e,t){const{fields:s}=e;return s.find(e=>t===e.name)?.type||""}function a(e,t){const{_messages:s}=t;return e.isTable?s.general.table:"point"===e.geometryType||"multipoint"===e.geometryType?s.join.pointLayer:"polyline"===e.geometryType?s.join.polylineLayer:"polygon"===e.geometryType?s.join.polygonLayer:""}function n(e){return e.sourceJSON.ownershipBasedAccessControlForFeatures&&(!1===e.sourceJSON.ownershipBasedAccessControlForFeatures?.allowAnonymousToQuery||!1===e.sourceJSON.ownershipBasedAccessControlForFeatures?.allowOthersToQuery)}}}]);