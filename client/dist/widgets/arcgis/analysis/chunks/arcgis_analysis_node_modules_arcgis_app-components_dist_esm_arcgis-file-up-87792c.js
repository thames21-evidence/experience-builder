/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-file-up-87792c.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-file-up-87792c"],{12192:(e,t,i)=>{i.d(t,{a:()=>o,g:()=>c});var a=i(15332),s=i(94984),n=i(87849);function o(e){var t,i,n;const o=null!==(t=(0,a.c)(e,"[lang]"))&&void 0!==t?t:null===(n=null===(i=e.shadowRoot)||void 0===i?void 0:i.ownerDocument)||void 0===n?void 0:n.documentElement,l=((null==o?void 0:o.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return s.l.has(l)?s.l.get(l):s.l.has(l.slice(0,2))?s.l.get(l.slice(0,2)):"en"}const l={};function r(e,t){const i=`${e}${t}`;return l[i]||(l[i]=function(e,t){return new Promise((i,a)=>{fetch((0,n.d)(`../arcgis-app-assets/i18n/${e}.i18n.${t}.json`)).then(e=>{e.ok?i(e.json()):a()},()=>a())})}(e,t)),l[i]}async function c(e,t){const i=t||e.tagName.toLowerCase(),n=o(e),l=function(e){var t,i,n;const o=null!==(t=(0,a.c)(e,"[lang]"))&&void 0!==t?t:null===(n=null===(i=e.shadowRoot)||void 0===i?void 0:i.ownerDocument)||void 0===n?void 0:n.documentElement,l=((null==o?void 0:o.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return s.l.has(l)?s.l.get(l):s.l.has(l.slice(0,2))?l:"en"}(e);let c;try{c=await r(i,n)}catch(e){console.warn(`no locale for ${i} (${n}) loading default locale en.`),c=await r(i,"en")}return[c,n,l]}},81914:(e,t,i)=>{i.r(t),i.d(t,{arcgis_file_upload:()=>u});var a=i(87849),s=i(88878),n=i(59317),o=i(24869),l=i(12192),r=i(72257),c=i(12906),d=i(3826),h=i(80562);i(83692),i(931),i(93814),i(41473),i(54251),i(46904),i(37762),i(15912),i(15332),i(94984),i(86562),i(74695),i(27137),i(76246),i(58573),i(1536),i(95878),i(29599),i(60958),i(32478),i(98704),i(82149),i(54077),i(1654),i(10578),i(8417),i(50315),i(26262),i(26854),i(62645),i(44069);const u=class{constructor(e){(0,a.r)(this,e),this.arcgisFileUploadComplete=(0,a.c)(this,"arcgisFileUploadComplete",7),this.arcgisFileUploadCancel=(0,a.c)(this,"arcgisFileUploadCancel",7),this.allowedExtensions=null,this.workflowCompleted=!1,this.closeDialog=()=>{!this.workflowCompleted&&this.handleCancel(),this.workflowCompleted=!1,this.isActive=!1},this.handleCancel=async()=>{this.arcgisFileUploadCancel.emit()},this.portal=void 0,this.existingItem=void 0,this.user=void 0,this.config=void 0,this.api=void 0,this.isActive=!0,this.header=void 0,this.loading=!1,this.loaderMessage=void 0,this.loaderType="indeterminate",this.error=void 0}async componentWillLoad(){const{existingItem:e,config:t}=this,i=e.type,a=await(0,l.g)(this.el);this.i18n=a[0],d.a.existingItem=e,d.a.id=e.id,d.a.typeKeywords=e.typeKeywords,d.a.type=e.type,r.i.tags=(0,h.a)(e.tags),r.i.snippet=e.snippet,n.c.config=t,"Vector Tile Service"===i&&(this.allowedExtensions=["json"])}handleWorkflowComplete(){this.workflowCompleted=!0,this.isActive=!1}async fileSelectHandler(e){var t;const{existingItem:i}=this;this.sourceName=(null===(t=i.sourceData)||void 0===t?void 0:t.name)||i.name;const a=e.detail.file,s=i.type,n="Vector Tile Service"===s,{fileName:l,extension:r}=(0,o.s)(a);n&&"json"!==r?this.handleError({code:"invalidExtension"}):n||l===this.sourceName?(this.file=a,d.a.file=a,d.a.extension=r,d.a.fileName=l,"Vector Tile Service"===s?this.handleUpdateStyle():this.handleUpdate()):this.handleError({code:"useSameFileName"})}disconnectedCallback(){this.closeDialog()}determineHeader(e,t){const{i18n:i}=this;switch(e){case"Vector Tile Service":return i.editStyle;case"Vector Tile Package":case"Layer Package":case"Tile Package":return i.updatePackages.replace("${type}",e.toLowerCase()).replace("${hostedLayerName}",t);case"Microsoft Powerpoint":case"Microsoft Word":case"PDF":return i.uploadStaticFiles.replace("${fileName}",t);default:return i.sameFileNameDescription.replace("${fileName}",t)}}async handleUpdate(){const{existingItem:e,portal:t,file:i,i18n:a}=this;this.loading=!0,this.loaderMessage=a.updating;const n=await(0,c.u)(e,(0,s.g)({username:e.owner},t),{file:i,overwrite:!0,keepDescription:!0,fileName:e.name});n.success?this.arcgisFileUploadComplete.emit({success:n.success}):this.handleError({code:"unhandledError"})}async handleUpdateStyle(){const{existingItem:e,portal:t,file:i,i18n:a}=this;this.loading=!0,this.loaderMessage=a.updating;const n=!e.hasOwnProperty("hasResources")||e.hasResources,{result:o,error:l}=n?await(0,c.a)(this.existingItem,(0,s.g)({username:e.owner},t),{file:i}):await(0,c.b)(this.existingItem,(0,s.g)({username:e.owner},t),{file:i});o.success&&this.arcgisFileUploadComplete.emit({success:o.success}),l&&this.handleError({code:l.code})}async handleError(e){const{i18n:t}=this;this.loading=!1;let i=t.errors.errorWhileUpload;switch(e.code){case"invalidExtension":i=t.errors.invalidStyleFileExtension;case"useSameFileName":i=t.errors.sameFileName.replace("${fileName}",this.sourceName);break;case"unhandledError":i=t.errors.errorUpdate}this.error={title:t.error,description:i}}render(){const{loaderType:e,loading:t,loaderMessage:i,error:s,allowedExtensions:n,isActive:o,portal:l,config:r,user:c,existingItem:d,i18n:h}=this,u=this.header||this.determineHeader(d.type,d.name);return(0,a.h)(a.H,{key:"69bc5db7fa820a1f046b5830c14aef8bfe896a2b"},(0,a.h)("calcite-dialog",{key:"b9234bf85548de86f1070ab2d14979bbeed60727",open:o,modal:!0,heading:h.updateData,onCalciteDialogClose:this.closeDialog},(0,a.h)("arcgis-new-item-loader",{key:"c00f6ef60f009823f9b75818fdf319a2006cc9f2",type:e,active:t,text:i}),(0,a.h)("arcgis-new-item-description",{key:"3dca4954cc2d289dffddc2632961b691812d8d7b",header:u}),(0,a.h)("arcgis-file-browser",{key:"9c5260f452547768bde71394c86f4da3c9f47dfd",class:"arcgis-file-browser",cloud:!1,insideModal:!0,fullHeight:!0,portal:l,config:r,user:c,allowedExtensions:n}),(0,a.h)("calcite-alert",{key:"6024cffc70d24a531b2b15fe4c330378ef8fb9fc",icon:"exclamation-mark-triangle",open:!!s,label:null==s?void 0:s.title,kind:"danger",slot:"alerts"},(0,a.h)("div",{key:"a4475285af3de0daac33ac4fe8e52e5051f9c02e",slot:"title"},null==s?void 0:s.title),(null==s?void 0:s.description)&&(0,a.h)("div",{key:"151110b961b257faaadefd0a3932a3455cf3f5db",slot:"message",class:"description"},s.description),(null==s?void 0:s.link)&&(0,a.h)("calcite-link",{key:"813874bf57032aaa68c6f937b688ba728ebf9e9c",slot:"link",class:"link",href:s.link.href,target:"_blank"},s.link.title)),(0,a.h)("calcite-button",{key:"1b569803a9892ed4aa8cc73c22c43a6587f1c756",slot:"footer-end",appearance:"outline-fill",onClick:()=>{this.isActive=!1}},h.cancel)))}get el(){return(0,a.a)(this)}}},94984:(e,t,i)=>{i.d(t,{C:()=>l,a:()=>h,b:()=>d,f:()=>r,g:()=>o,l:()=>n,s:()=>f});var a=i(15332),s=i(931);const n=new Map([["ar","ar"],["bg","bg"],["bs","bs"],["ca","ca"],["cs","cs"],["da","da"],["de","de"],["el","el"],["en","en"],["es","es"],["et","et"],["fi","fi"],["fr","fr"],["he","he"],["hr","hr"],["hu","hu"],["id","id"],["it","it"],["ja","ja"],["ko","ko"],["lt","lt"],["lv","lv"],["nb","no"],["no","no"],["nl","nl"],["pl","pl"],["pt-br","pt-BR"],["pt-pt","pt-PT"],["ro","ro"],["ru","ru"],["sk","sk"],["sl","sl"],["sr","sr"],["sv","sv"],["th","th"],["tr","tr"],["uk","uk"],["vi","vi"],["zh-cn","zh-CN"],["zh-hk","zh-HK"],["zh-tw","zh-TW"]]);function o(e){return function(e,t,i){const s=(0,a.c)(e,`[${t}]`);return s?s.getAttribute(t):i}(e,"dir","ltr")}const l={rtl:"arcgis--rtl"};async function r(e,t){const{api:i,type:a,places:n}=t||{};if(3===i){const[i]=await(0,s.l)(["dojo/number"]);return i.format(e,{type:a,places:n,pattern:null==t?void 0:t.pattern})}const[o]=await(0,s.l)(["esri/intl"]),l=o.convertNumberFormatToIntlOptions({places:n,style:a,digitSeparator:!0});return o.formatNumber(e,Object.assign(Object.assign({},l),{style:a}))}const c={};function d(e,t){let i=document.documentElement.lang;const a="bs"===i;if(a&&(i="hr"),t){const t=`${i}-full`,a={dateStyle:"full",timeStyle:"long"};return c[t]||(c[t]=new Intl.DateTimeFormat(i,a)),c[t].format(e)}const s={year:"numeric",month:a?"numeric":"short",day:"numeric"};return c[i]||(c[i]=new Intl.DateTimeFormat(i,s)),c[i].format(e)}function h(e,t,i,a){const s=null!=e?e:"en";let n=t.unknown;return(1===i||["id","ja","ko","th","vi","zh-cn","zh-hk","zh-tw"].includes(s))&&(n=t.single),1!==i&&["en","ca","da","de","el","es","et","fi","hi","hu","it","nb","nl","pt-pt","sv","tr"].includes(s)&&(n=t.multiple),f(n,Object.assign(Object.assign({},a),{number:i}))}const u=/\$\{([^}]+)\}/g;function f(e,t,i=u){let a=e;try{a=e.replace(i,(e,i)=>function(e,t){const i=e.split(".").reduce((e,t)=>e[t],t);return"string"==typeof i||"number"==typeof i?i:e}(i,t).toString())}catch(e){console.error(e)}return a}}}]);