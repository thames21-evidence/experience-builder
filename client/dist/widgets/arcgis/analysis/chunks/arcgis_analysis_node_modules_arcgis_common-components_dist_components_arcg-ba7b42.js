/*! For license information please see arcgis_analysis_node_modules_arcgis_common-components_dist_components_arcg-ba7b42.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_common-components_dist_components_arcg-ba7b42"],{42984:(e,t,o)=>{o.d(t,{u:()=>i});var r=o(83552),s=o(22229);const i=(0,r.yr)(s.g)},46317:(e,t,o)=>{o.d(t,{D:()=>c});var r=o(85282),s=o(34670),i=o(42466);const c=(0,s.u$)(class extends s.WL{constructor(){super(...arguments),this.key=r.s6}render(e,t){return this.key=e,t}update(e,[t,o]){return t!==this.key&&((0,i.mY)(e),this.key=t),o}})},84972:(e,t,o)=>{o.r(t),o.d(t,{ArcgisColorInput:()=>d});var r=o(22229),s=o(46317),i=o(73801),c=o(4395),l=o(85643),a=o(20936),n=o(90732),h=o(42984);const p=c.AH`:host,arcgis-picker-input{display:block}.color-picker-container{display:flex;flex-direction:column}.color-picker{--calcite-color-border-1: transparent;overflow-x:hidden}.preview-swatch{width:100%;height:24px}.recent-colors-container{align-items:center;border:var(--calcite-border-width-sm) solid var(--calcite-color-border-input);display:flex;gap:var(--calcite-spacing-sm);height:32px;padding:0 var(--calcite-spacing-xs);transition:outline-offset .1s ease-in-out,outline-color .1s ease-in-out}.preview-recent-swatch{cursor:pointer}.recent-colors-container:focus,.preview-recent-swatch:focus{outline:var(--calcite-border-width-md) solid var(--calcite-color-brand);outline-offset:var(--calcite-border-width-md)}.empty-swatch{cursor:default}`;class d extends i.WF{constructor(){super(),this._messages=(0,h.u)(),this.actionEl=(0,l._)(),this.setRecentColorElement=e=>t=>{switch(e){case 1:this.recentColor1El=t;break;case 2:this.recentColor2El=t;break;default:this.recentColor3El=t}},this.recentColors=[],this.clearable=!1,this.compact=!1,this.disabled=!1,this.placement="auto",this.storageId="arcgis-color-input-storage-colors",this.hideRecentColors=!1,this.showTransparency=!1,this.arcgisChange=(0,i.lh)(),this.arcgisColorInputChange=(0,i.lh)(),this.arcgisColorInputPopoverClose=(0,i.lh)(),this.arcgisColorInputPopoverOpen=(0,i.lh)(),this.arcgisColorInputSwatchUpdate=(0,i.lh)(),this.arcgisInternalStoredColor=(0,i.lh)(),this.arcgisPickerClose=(0,i.lh)(),this.arcgisPickerOpen=(0,i.lh)(),this.arcgisSwatchUpdate=(0,i.lh)(),this.listenOn(document,"arcgisInternalStoredColor",this.handleUpdateRecentColors),this.listenOn(document,"arcgisRecentColorsUpdate",this.handleStoreNewRecentColor)}static{this.properties={recentColors:16,clearable:5,color:1,compact:5,disabled:5,messageOverrides:0,placement:1,popoverProps:0,storageId:1,hideRecentColors:5,showTransparency:5}}static{this.styles=p}async close(){await(this.inlineInputEl?.close())}async setFocus(){await(this.inlineInputEl?.setFocus())}load(){this.setRecentColorsFromStorage()}disconnectedCallback(){super.disconnectedCallback(),this.removeTooltip()}async handleOpen(){await(this.colorPickerEl?.setFocus()),this.arcgisPickerOpen.emit(),this.arcgisColorInputPopoverOpen.emit()}setInlineInputRef(e){this.inlineInputEl=e}setColorPickerRef(e){e&&(this.colorPickerEl=e)}getRecentColorElement(e){switch(e){case 1:return this.recentColor1El;case 2:return this.recentColor2El;default:return this.recentColor3El}}setRecentColorsFromStorage(){const e=function(e,t){const o=window.localStorage.getItem(e);return o&&t?JSON.parse(o):o}(this.storageId,!0);e&&(this.recentColors=[...e])}handleSwatchClickOrKeyUp(e){if("key"in e&&"Enter"!==e.key&&"Space"!==e.key)return;const t=e.currentTarget.color||void 0;this.updateColor(t),this.arcgisSwatchUpdate.emit(t),this.arcgisColorInputSwatchUpdate.emit(t),setTimeout(()=>this.recentColor1El?.focus(),200)}handleRecentColorsKeyDown(e){if(1===this.recentColors.length)return;const t=e.key;let o;this.activeColorSwatchEl===this.recentColor1El?o=1:this.activeColorSwatchEl===this.recentColor2El?o=2:this.activeColorSwatchEl===this.recentColor3El&&(o=3),"ArrowLeft"===t&&(o&&1!==o?this.getRecentColorElement(o-1)?.focus():this.getRecentColorElement(this.recentColors.length)?.focus()),"ArrowRight"===t&&(o&&o!==this.recentColors.length?this.getRecentColorElement(o+1)?.focus():this.recentColor1El?.focus())}handleUpdateActiveSwatch(e){this.activeColorSwatchEl=e.target}handleStoreNewRecentColor(e){this.storeRecentColorToStorage(e.detail)}handleUpdateRecentColors(e){e.composedPath().includes(this.el)||this.setRecentColorsFromStorage()}handleClearColor(){this.updateColor(void 0)}updateColor(e,t=!0){e!==this.color&&(this.color=e,this.arcgisChange.emit(),this.arcgisColorInputChange.emit(),t&&this.storeRecentColorToStorage(e))}storeRecentColorToStorage(e){if(!e)return;e.length>7&&(e=e.slice(0,7));const t=[e,...this.recentColors.filter(t=>t!==e)].slice(0,3);(function(e,t){window.localStorage.setItem(e,JSON.stringify(t))})(this.storageId,t),this.recentColors=t,this.arcgisInternalStoredColor.emit()}handleClose(e){e.stopPropagation(),this.storeRecentColorToStorage(this.colorPickerEl?.value),this.arcgisPickerClose.emit(this.colorPickerEl?.value),this.arcgisColorInputPopoverClose.emit(this.colorPickerEl?.value)}addTooltip(e){this.removeTooltip(),this.tooltipContainerEl=document.createElement("div"),(0,c.XX)(c.qy`<calcite-tooltip .placement=${e.placement??"auto"} .referenceElement=${e.referenceElement} overlay-positioning=fixed open>${e.innerHTML}</calcite-tooltip>`,this.tooltipContainerEl),document.body.append(this.tooltipContainerEl)}removeTooltip(){this.tooltipContainerEl?.parentNode&&(this.tooltipContainerEl.parentNode.removeChild(this.tooltipContainerEl),this.tooltipContainerEl=void 0)}render(){const{compact:e,disabled:t,recentColors:o,_messages:r}=this,i=[o[0],o[1]],h="rtl"===(0,a.Qp)(this.el);return e||i.push(o[2]),c.qy`<arcgis-picker-input .disabled=${t} .intlDone=${r.commitColor} .heading=${r.selectColor} .label=${r.selectColor} @arcgisPopoverOpen=${this.handleOpen} @arcgisPopoverClose=${this.handleClose} .popoverProps=${this.popoverProps} ${(0,l.K)(this.setInlineInputRef)}><div class="color-picker-container" slot=content>${(0,s.D)("color-picker"+(e?"--compact":""),c.qy`<calcite-color-picker .clearable=${this.clearable} class="color-picker" @calciteColorPickerInput=${(0,n.s)(e=>{e.stopPropagation(),this.updateColor(this.colorPickerEl.value,!1)},500)} .scale=${e?"s":"m"} .storageId=${this.storageId} .alphaChannel=${this.showTransparency} .value=${this.color} ${(0,l.K)(this.setColorPickerRef)}></calcite-color-picker>`)}</div><div slot=preview><calcite-color-picker-swatch class="preview-swatch" .color=${this.color} scale=s></calcite-color-picker-swatch></div>${!this.hideRecentColors&&c.qy`<div slot=content-end class="recent-colors-container" @keydown=${this.handleRecentColorsKeyDown} tabindex=-1>${i.map((e,t)=>e?(0,s.D)(e,c.qy`<calcite-color-picker-swatch class="preview-recent-swatch" role=button scale=s tabindex=0 .active=${e===this.color} .color=${e} @click=${this.handleSwatchClickOrKeyUp} @keyup=${this.handleSwatchClickOrKeyUp} @focus=${this.handleUpdateActiveSwatch} ${(0,l.K)(this.setRecentColorElement(t+1))}></calcite-color-picker-swatch>`):this.renderEmptySwatch(`empty-swatch-${t}`))}</div>`||""}${this.clearable&&c.qy`<div slot=content-end><calcite-action icon=circle-disallowed scale=s .label=${r.clearColor} .text=${r.clearColor??""} @click=${this.handleClearColor} @mouseover=${()=>this.addTooltip({referenceElement:this.actionEl.value,placement:h?"right-start":"left-start",innerHTML:r.noColor??""})} @mouseout=${()=>this.removeTooltip()} ${(0,l.K)(this.actionEl)}></calcite-action></div>`||""}</arcgis-picker-input>`}renderEmptySwatch(e){return(0,s.D)(e,c.qy`<svg class="empty-swatch" viewBox="0 0 20 20" xmlns=http://www.w3.org/2000/svg width=20>${c.JW`<rect width=20 height=20 fill=#f8f8f8 stroke=#000 stroke-dasharray=2 />`}</svg>`)}}(0,r.c)("arcgis-color-input",d)},90732:(e,t,o)=>{o.d(t,{s:()=>r});const r=(e,t=100)=>{let o;return(...r)=>{clearTimeout(o),o=setTimeout(()=>{clearTimeout(o),e(...r)},t)}}}}]);