/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-5f9625.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-5f9625"],{15165:(e,t,s)=>{s.r(t),s.d(t,{ArcgisMapConfigLayerOverrideStatus:()=>I});var i=s(73679),o=s(4395),a=s(79198),r=s(70004),l=s(85643),n=s(73801);const c="popover",p="content",d="notice",u="filter",m="block-content",h="list-header",f=o.AH`.popover{--calcite-popover-z-index: 100}.content{max-height:60vh}.notice{margin:8px}.filter{border-width:0px 0px 1px;border-color:var(--calcite-color-border-3);border-style:solid}.block-content{background-color:var(--calcite-color-foreground-2)}.list-header{padding:.75rem .5rem .25rem;background-color:var(--calcite-color-foreground-2)}`;class I extends n.WF{constructor(){super(...arguments),this.dataBlockNode=(0,l._)(),this.appearanceBlockNode=(0,l._)(),this.allItems=[],this.dataTypes=["data","definition-expression","popup","refresh-interval","use-view-time","form-template","floor-info","custom-parameters","charts","attribute-table-template"],this.appearanceTypes=["renderer","labels","scale-range","opacity","feature-reduction","blend-mode","effect","legend-enabled","order-by","display-filter"],this.reRender=!1,this.isOpen=!1,this.arcgisStatusChange=(0,n.lh)(),this.closeAllPopovers=(0,n.lh)()}static{this.properties={reRender:16,filteredItems:16,isOpen:16,props:0,popoverReferenceElement:0,_messages:0}}static{this.styles=f}async getPopoverRect(){return this.popoverNode?.getBoundingClientRect()}async reposition(){this.popoverNode?.reposition()}load(){const{_messages:e}=this,t=this.props.layerOriginInfo?.status;(0,a.r)(this.props);const s=this.props.layerOriginInfo?.status;t!==s&&this.arcgisStatusChange.emit(),this.allItems=[{value:"data",title:e.status.data},{value:"definition-expression",title:e.status.filter},{value:"popup",title:e.status.popupsAndAttributes},{value:"refresh-interval",title:e.status.refreshInterval},{value:"use-view-time",title:e.status.time},{value:"display-filter",title:e.status.displayFilter},{value:"editing-enabled",title:e.status.editing},{value:"form-template",title:e.status.formTemplate},{value:"floor-info",title:e.status.floorInfo},{value:"custom-parameters",title:e.status.customParameters},{value:"charts",title:e.status.charts},{value:"renderer",title:e.status.style},{value:"labels",title:e.status.labels},{value:"scale-range",title:e.status.visibleRange},{value:"opacity",title:e.status.transparency},{value:"feature-reduction",title:e.status.aggregation},{value:"blend-mode",title:e.status.blending},{value:"effect",title:e.status.effects},{value:"legend-enabled",title:e.status.legend},{value:"order-by",title:e.status.orderBy},{value:"attribute-table-template",title:e.status.table}]}loaded(){this.popoverNode?.reposition(),this.isOpen=!0,setTimeout(()=>requestAnimationFrame(()=>this.closeButtonNode?.setFocus()),100)}afterCreatePopover(e){this.popoverNode=e}afterCreateCloseButton(e){this.closeButtonNode=e}handleCloseClick(){this.closeAllPopovers.emit()}moreInfo(e,t,s){s.stopPropagation();const{popoverReferenceElement:i,_messages:a}=this,r=s.currentTarget;this.closeInfoPopover();const l=(0,n.dN)(o.qy`<div style=${`width: ${.8*Math.min(Math.max(i?.clientWidth||0,230),300)}px; font-size: var(--calcite-font-size--1); line-height: 1rem; margin: 0.75rem;`}>${"source"===t?a.propReflectUpdates.replace("${label}",e):a.propNotConnected.replace("${label}",e)}</div>`);this.moreInfoPopoverNode=(0,n.dN)(o.qy`<calcite-popover .heading=${"source"===t?a.setFromSource:a.setInWebmap} placement=auto offset-skidding=5 closable auto-close .label=${a.moreInfo} .referenceElement=${r} class="js-app-flyout" @calcitePopoverClose=${()=>this.closeInfoPopover()}></calcite-popover>`),document.body.appendChild(this.moreInfoPopoverNode),this.moreInfoPopoverNode.appendChild(l),this.moreInfoPopoverNode.open=!0,this.moreInfoPopoverNode.reposition(),setTimeout(()=>this.moreInfoPopoverNode?.setFocus(),100),setTimeout(()=>{this.listenOn(document,"keydown",e=>{"Tab"===e.key&&(e.stopPropagation(),this.closeInfoPopover())})},100)}closeInfoPopover(){if(this.moreInfoPopoverNode){const e=this.moreInfoPopoverNode.referenceElement;setTimeout(()=>e?.setFocus(),100),this.moreInfoPopoverNode.remove(),this.moreInfoPopoverNode=void 0}}isOverridden(e){const{props:t}=this,{layerOriginInfo:s}=t;return"overridden"===s?.propertyGroupOriginInfos?.filter(t=>t.id===e)?.[0]?.status}getOverrideType(e){return this.isOverridden(e)?"webmap":"source"}render(){const{popoverReferenceElement:e,_messages:t,props:s}=this,{layer:i,containerPanelNode:a}=s,r=e.clientWidth,p=a?.getBoundingClientRect(),d=e.getBoundingClientRect(),u=p?.height&&d?.top?p?.height-(d?.top-p?.top)-20+"px":void 0,m=e.clientHeight||d?.height||96;return this.el.classList.add("js-app-flyout"),o.qy`<calcite-popover placement=bottom .open=${this.isOpen} pointer-disabled .referenceElement=${e} .offsetDistance=${-1*m} offset-skidding=0 class=${(0,n.CP)(c)} style=${(0,n.zl)(r?{width:`${r+60}px`}:void 0)} .label=${i.isTable?t.tableStatus:t.layerStatus} @calcitePopoverBeforeClose=${()=>this.closeAllPopovers.emit()} ${(0,l.K)(this.afterCreatePopover)}><calcite-flow style=${(0,n.zl)(r?{width:`${r+58}px`,maxHeight:u}:void 0)}><calcite-flow-item .heading=${i.isTable?t.tableStatus:t.layerStatus} @calciteFlowItemScroll=${()=>this.closeInfoPopover()}>${this.renderCloseButton()}${this.renderContent()}</calcite-flow-item></calcite-flow></calcite-popover>`}renderCloseButton(){const{_messages:e}=this;return o.qy`<calcite-action .text=${e.close} scale=s slot=header-actions-end @click=${this.handleCloseClick} icon=x ${(0,l.K)(this.afterCreateCloseButton)}></calcite-action>`}renderContent(){return o.qy`<div class=${(0,n.CP)(p)}>${this.renderInfo()}${this.renderSearch()}${this.renderDataContent()}${this.renderAppearanceContent()}</div>`}renderInfo(){const{props:e,_messages:t}=this,{config:s}=e,{helpBase:i,helpMap:a}=s;return(0,r.g)(r.l.ARCGIS_COMPONENT_NOTIFICATIONS,r.a.LAYER_OVERRIDE_STATUS_TIP_DISMISSED)?"":o.qy`<calcite-notice class=${(0,n.CP)(d)} open closable scale=s width=auto @calciteNoticeClose=${()=>{(0,r.s)(r.l.ARCGIS_COMPONENT_NOTIFICATIONS,{key:r.a.LAYER_OVERRIDE_STATUS_TIP_DISMISSED,value:"true"})}}><div slot=message>${t.tip}</div>${a&&i&&o.qy`<calcite-link slot=link title=${t.learnMore??n.s6} target=_blank .href=${`${i}${a[120002913]}`}>${t.learnMore}</calcite-link>`||""}</calcite-notice>`}renderSearch(){const{allItems:e,_messages:t}=this;return o.qy`<calcite-filter .items=${e} .messageOverrides=${{label:t.status.searchPlaceholder,clear:t.status.clear}} .placeholder=${t.status.searchPlaceholder} class=${(0,n.CP)(u)} @calciteFilterChange=${e=>{this.filteredItems=e.target.filteredItems,this.dataBlockNode.value&&(this.dataBlockNode.value.open=!0,this.appearanceBlockNode.value&&(this.appearanceBlockNode.value.open=!0),setTimeout(()=>{this.reposition()},100))}}></calcite-filter>`}renderDataContent(){const{allItems:e,filteredItems:t,dataTypes:s,_messages:i}=this;let a=(t||e).filter(e=>s.includes(e.value)).map(e=>"data"===e.value?[e.title,"source"]:[e.title,this.getOverrideType(e.value)]);a.sort((e,t)=>e[0].localeCompare(t[0]));const r=a.find(e=>e[0]===i.status.data);r&&(a=a.filter(e=>e[0]!==i.status.data),a.unshift(r));const c=a.filter(e=>"source"===e[1]),p=a.filter(e=>"webmap"===e[1]),d=c.length>0,u=p.length>0,f=d&&u?i.somePropsSetInWebmap:d?i.propsFromSource:i.propsSetInWebmap;return o.qy`<calcite-block .heading=${i.status.dataProps} .description=${f} collapsible .expanded=${u} @calciteBlockOpen=${()=>{setTimeout(()=>{this.reposition()},100)}} @calciteBlockClose=${()=>{setTimeout(()=>{this.reposition()},100)}} ${(0,l.K)(this.dataBlockNode)}><div class=${(0,n.CP)(m)}><calcite-list .label=${i.status.dataProps}>${u&&o.qy`<calcite-label class=${(0,n.CP)(h)} scale=s>${i.setInWebmap}</calcite-label>`||""}${u&&p.map(([e,t])=>this.renderListItem(e,t))||""}${d&&o.qy`<calcite-label class=${(0,n.CP)(h)} scale=s>${i.setFromSource}</calcite-label>`||""}${d&&c.map(([e,t])=>this.renderListItem(e,t))||""}</calcite-list></div></calcite-block>`}renderAppearanceContent(){const{allItems:e,filteredItems:t,appearanceTypes:s,_messages:i,props:a}=this,{layer:r}=a;if(r.isTable)return"";const c=(t||e).filter(e=>s.includes(e.value)).map(e=>[e.title,this.getOverrideType(e.value)]);c.sort((e,t)=>e[0].localeCompare(t[0]));const p=c.filter(e=>"source"===e[1]),d=c.filter(e=>"webmap"===e[1]),u=p.length>0,f=d.length>0,I=u&&f?i.somePropsSetInWebmap:u?i.propsFromSource:i.propsSetInWebmap;return o.qy`<calcite-block .heading=${i.status.appearanceProps} .description=${I} collapsible .expanded=${f} @calciteBlockOpen=${()=>{setTimeout(()=>{this.reposition()},100)}} @calciteBlockClose=${()=>{setTimeout(()=>{this.reposition()},100)}} ${(0,l.K)(this.appearanceBlockNode)}><div class=${(0,n.CP)(m)}><calcite-list .label=${i.status.appearanceProps}>${f&&o.qy`<div class=${(0,n.CP)(h)}><calcite-label scale=s>${i.setInWebmap}</calcite-label></div>`||""}${f&&d.map(([e,t])=>this.renderListItem(e,t))||""}${u&&o.qy`<div class=${(0,n.CP)(h)}><calcite-label scale=s>${i.setFromSource}</calcite-label></div>`||""}${u&&p.map(([e,t])=>this.renderListItem(e,t))||""}</calcite-list></div></calcite-block>`}renderListItem(e,t){const{_messages:s}=this;return o.qy`<calcite-list-item .label=${e}><calcite-action slot=actions-end .text=${s.moreInfo} icon=information @click=${s=>this.moreInfo(e,t,s)}></calcite-action></calcite-list-item>`}}(0,i.c)("arcgis-map-config-layer-override-status",I)},70004:(e,t,s)=>{s.d(t,{a:()=>o,g:()=>l,l:()=>i,s:()=>r});var i=(e=>(e.ARCGIS_COMPONENT_NOTIFICATIONS="arcgisComponent_notifications",e))(i||{}),o=(e=>(e.FEATURE_REDUCTION_WARNING_DISMISSED="arcgis_feature_reduction_warning_dismissed",e.POPUP_WARNING_DISMISSED="arcgis_popup_warning_dismissed",e.INCOMPATIBLE_VECTOR_SYMBOLS_DISMISSED="arcgis_symbol_styler_incompatible_vector_symbols_dismissed",e.EFFECTS_TIP_DISMISSED="arcgis_effects_tip_dismissed",e.LAYER_VIEW_DEFINITION_DISMISSED="arcgis_layer_view_definition_dismissed",e.LAYER_OVERRIDE_STATUS_TIP_DISMISSED="arcgis_layer_override_status_tip_dismissed",e.SMART_MAPPING_TIP1_DISMISSED="arcgis_smart_mapping_tip1_dismissed",e.SMART_MAPPING_TIP2_DISMISSED="arcgis_smart_mapping_tip2_dismissed",e.LAYER_VIEW_JOIN_TIP_DISMISSED="arcgis_layer_view_join_tip_dismissed",e.MULTIDIMENSIONAL_INFO_TIP_DISMISSED="arcgis_multidimensional_info_tip_dismissed",e))(o||{});const a=e=>{const t=(e=>localStorage.getItem(e))(e);return t?JSON.parse(t):{}},r=(e,t)=>{const s=a(e);s[t.key]=t.value,((e,t)=>{localStorage.setItem(e,t)})(e,JSON.stringify(s))},l=(e,t)=>{const s=a(e);return Object.getOwnPropertyDescriptor(s,t)?s[t]:null}},79198:(e,t,s)=>{s.d(t,{r:()=>o});var i=s(40519);function o(e){const{layer:t}=e;e.layerOriginInfo=i.getLayerOriginInfo(t,"web-map")}}}]);