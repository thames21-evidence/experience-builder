/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-member--205835.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-member--205835"],{1402:(i,t,e)=>{e.d(t,{g:()=>n});var s=e(12192);async function n(i){const t=await(0,s.g)(i,"arcgis-member-browser");return t&&t.length?t[0]:null}},23966:(i,t,e)=>{e.d(t,{a:()=>r,g:()=>o,o:()=>a});var s=e(37762),n=e(74174);function o(i){return(0,n.g)(i,"arcgis-member-browser")}const r=(i,t)=>{i.onChange("view",i=>{t(i)})};(0,s.c)({type:"member-browser",includeExternalUsers:!1});const a=(i,t)=>{i.onChange("sort",i=>{t(i)})}},52042:(i,t,e)=>{function s(i){var t;const e=null===(t=null==i?void 0:i.sourceJSON)||void 0===t?void 0:t.subscriptionInfo;return e&&["Organizational Plan","Community","In House","ConnectED","ELA","Education Site License","Education","HUP Online Entitlement","Demo and Marketing"].includes(e.type)}e.d(t,{c:()=>s})},74174:(i,t,e)=>{e.d(t,{a:()=>o,b:()=>a,g:()=>c,i:()=>n,o:()=>r});var s=e(15332);const n=i=>"item-browser"===i.state.type,o=(i,t,e)=>{t.onChange("filters",t=>{t[i]&&t[i].value||e()})},r=(i,t)=>{i.onChange("preview",i=>{t()})},a=(i,t)=>{i.onChange("groupId",i=>{t()})},l=new Map;function c(i,t){const e=l.get(i);if(e)return e;const n=(0,s.c)(i,t);return n?(l.set(i,n.store),n.store):null}},86973:(i,t,e)=>{e.r(t),e.d(t,{arcgis_member_browser_filter_affiliation:()=>d});var s=e(87849),n=e(59317),o=e(74174),r=e(1402),a=e(23966),l=e(52042),c=e(3367);e(37762),e(15332),e(12192),e(94984),e(931),e(93814),e(41473),e(83692),e(54251),e(94737);const d=class{constructor(i){(0,s.r)(this,i),this.arcgisMemberBrowserFilter=(0,s.c)(this,"arcgisMemberBrowserFilter",7),this.initAffiliations=async()=>{var i;const{portal:t}=null!==n.c&&void 0!==n.c?n.c:{};if(!t)return;await this.loadPartnerOrgs();const e=await(0,c.e)(t,this.store.state.groupId),s=(null===(i=e.find(i=>i.value===t.id))||void 0===i?void 0:i.count)||0;let o;this.affiliations=[{id:t.id,label:this.i18n.myOrg,count:s}],e.forEach(i=>{var e;const s=null===(e=this.store.state.partnerCollaborations)||void 0===e?void 0:e.find(t=>t.to.orgId===i.value);s?this.affiliations.push({id:s.to.orgId,label:s.to.name,count:i.count}):i.value!==t.id&&(o?(o.id+=`,${i.value}`,o.count+=i.count):o={id:i.value,label:this.i18n.other,count:i.count})}),o&&this.affiliations.push(o)},this.loadPartnerOrgs=async()=>{var i;const{portal:t}=null!==n.c&&void 0!==n.c?n.c:{},e=null===(i=null==t?void 0:t.sourceJSON)||void 0===i?void 0:i.subscriptionInfo;!this.store.state.partnerCollaborations&&e&&(0,l.c)(t)&&(this.store.state.partnerCollaborations=await(0,c.c)(t))},this.orgIds=void 0,this.expanded=void 0,this.affiliations=void 0}async refresh(){this.initAffiliations()}async componentWillLoad(){var i;this.store=(0,a.g)(this.el),this.i18n=null===(i=await(0,r.g)(this.el))||void 0===i?void 0:i.filterAffiliation}componentDidLoad(){this.initAffiliations(),(0,n.o)("portal",this.initAffiliations),(0,o.a)("affiliation",this.store,()=>this.orgIds=null)}getEventDetail(){const{orgIds:i}=this;if(!i)return{id:"affiliation",param:"orgIds",value:"",label:""};const t=this.affiliations.find(t=>t.id===i);return{id:"affiliation",param:"orgIds",value:t.id,label:this.i18n.label.replace("${name}",t.label)}}render(){const{portal:i}=n.c,{group:t}=this.store.state;return this.store.state.myOrgView||!i||i.isPortal||!this.affiliations||this.affiliations.length<=1||"org"===(null==t?void 0:t.membershipAccess)||(null==t?void 0:t.hiddenMembers)?null:(0,s.h)("arcgis-browser-filter",{heading:this.i18n.title,expanded:this.expanded,active:!!this.orgIds,onArcgisBrowserFilterRemove:()=>{this.orgIds=null},filterID:"affiliation"},(0,s.h)("div",{class:"tree-wrapper"},(0,s.h)("calcite-tree",{selectionMode:"single",onCalciteTreeSelect:i=>{var t,e;const s=(null===(e=null===(t=i.target.selectedItems)||void 0===t?void 0:t[0])||void 0===e?void 0:e.dataset.orgIds)||"";this.orgIds===s?this.orgIds=null:this.orgIds=s,this.arcgisMemberBrowserFilter.emit(this.getEventDetail())}},this.affiliations.map(i=>(0,s.h)("calcite-tree-item",{key:i.id,"data-org-ids":i.id,selected:i.id===this.orgIds},(0,s.h)("a",null,i.label," (",i.count,")"))))))}get el(){return(0,s.a)(this)}}}}]);