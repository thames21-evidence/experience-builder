/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_chu-59785a.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_chu-59785a"],{42987:(e,o,l)=>{l.d(o,{a:()=>n,b:()=>c,c:()=>r,d:()=>a});var t=l(10454),s=(l(52797),l(54312),l(44345),l(55448),l(34031),l(63438),l(5933),l(28927),l(83368),l(89704),l(5294),l(66228)),i=(l(56451),l(31521),l(23054),l(5077),l(23795),l(17902),l(87420),l(30161),l(81734),l(1225));l(83552),l(77462),l(49403),l(66617),l(10628),l(59640),l(64451),l(6176),l(29614),l(94916),l(52554),l(2156),l(4038),l(49851),l(75054),l(15223),l(70169),l(47207),l(70852),l(48103),l(39423),l(85681),l(18444),l(42411),l(9767),l(38218),l(91914),l(86605),l(68196),l(440),l(46547),l(6238),l(7299);async function r(e,o){const{layer:l,useFeatureReduction:r,mapImageSublayer:a,mapView:n}=e,c=l;o=o||{};const u=(0,i.a)(e,(0,i.g)(e));return await t.createRenderer({layer:c,view:n,outlineOptimizationEnabled:!a&&(!(0,s.i)(o.outlineOptimizationEnabled)||o.outlineOptimizationEnabled),sizeOptimizationEnabled:!a&&(!(0,s.i)(o.sizeOptimizationEnabled)||o.sizeOptimizationEnabled),forBinning:r}).then(e=>((0,i.b)(u,e.renderer),e))}async function a(e,o){const{layer:l,useFeatureReduction:r,mapImageSublayer:a,mapView:n}=e,c=l;o=o||{};const u=(0,i.g)(e),p=(0,i.d)(e),m=(0,i.a)(e,u),d=u.symbol?u.symbol:(0,i.e)(e,p),y={layer:c,view:n,outlineOptimizationEnabled:!a&&((0,s.i)(o.outlineOptimizationEnabled)?o.outlineOptimizationEnabled:!!m.sizeOutlineVisVar),sizeOptimizationEnabled:!a&&((0,s.i)(o.sizeOptimizationEnabled)?o.sizeOptimizationEnabled:!!m.sizeAutoVisVar),forBinning:r};return await t.createRenderer(y).then(e=>((0,i.b)(m,e.renderer),d&&(e.renderer.symbol=d),e))}async function n(e){const{layer:o,useFeatureReduction:l,mapView:s}=e,r=o;return await t.createRenderer({layer:r,view:s,outlineOptimizationEnabled:!0,forBinning:l}).then(e=>(0,i.c)(e.renderer,"size","outline"))}async function c(e){const{layer:o,useFeatureReduction:l,mapView:s}=e,r=o;return await t.createRenderer({layer:r,view:s,outlineOptimizationEnabled:!1,sizeOptimizationEnabled:!0,forBinning:l}).then(e=>(0,i.c)(e.renderer,"size","auto"))}},96333:(e,o,l)=>{l.d(o,{a:()=>_,b:()=>M,c:()=>W,d:()=>Q,e:()=>U,f:()=>P,g:()=>H,h:()=>L,i:()=>T,j:()=>q,k:()=>J,l:()=>X,m:()=>I,n:()=>K,o:()=>F,p:()=>D,q:()=>N,r:()=>R,s:()=>G,t:()=>V,u:()=>x});var t=l(5294),s=l(54312),i=l(56451),r=l(23054),a=l(77462),n=l(49403),c=l(5077),u=l(30161),p=l(66617),m=l(10628),d=l(59640),y=l(64451),g=l(6176),f=l(81734),b=l(1225),k=(l(44345),l(55448),l(52797),l(34031),l(63438),l(5933),l(28927),l(83368),l(89704),l(18423),l(96086),l(91813),l(21255),l(13078),l(21303),l(12627),l(31521),l(23795),l(17902),l(87420),l(5589)),w=(l(83552),l(42987));l(29614),l(94916),l(52554),l(2156),l(4038),l(49851),l(75054),l(15223),l(70169),l(47207),l(70852),l(48103),l(39423),l(85681),l(18444),l(42411),l(9767),l(38218),l(91914),l(86605),l(68196),l(440),l(46547),l(6238),l(7299);const h="polygon",z=["triangle-gradient-fill-open","triangle-solid-fill-open"],S=["triangle-gradient-fill-open","triangle-solid-fill-open","triangle-open-outline","triangle-closed-outline"],v=["triangle-gradient-fill-open","triangle-gradient-fill-open-outline"];function C(){return[new i.default([255,255,255]),new i.default([178,178,178]),new i.default([128,128,128]),new i.default([92,92,92]),new i.default([77,77,77]),new i.default([51,51,51]),new i.default([26,26,26])]}function E(){return[new i.default("#ff4040"),new i.default("#ff8200"),new i.default("#faa83f"),new i.default("#ffd159"),new i.default("#74b566"),new i.default("#008977"),new i.default("#33e3c8"),new i.default("#43abeb"),new i.default("#4c64c9"),new i.default("#9868ed"),new i.default("#b155e6"),new i.default("#db5181"),new i.default("#e03b99"),new i.default("#2b2b2b"),new i.default("#bdbdbd"),new i.default("#ffffff")]}function j(){return E().reverse()}function A(e,o,l){return document.URL.includes("debug=true")&&(console.log("symbol",JSON.stringify(o,null,2)),console.log("props",JSON.stringify({...l,portal:"..."}))),e.edit(o,l)}function O(e,o){const{symbol:l,info:{marker:t,stroke:s,fill:i}}=o.detail;document.URL.includes("debug=true")&&(console.log("onStylerEdit - symbol:",JSON.stringify(l?.toJSON(),null,2)),console.log("onStylerEdit - info.marker:",JSON.stringify(t)),console.log("onStylerEdit - info.stroke:",JSON.stringify(s)),console.log("onStylerEdit - info.fill:",JSON.stringify(i))),e(o)}async function V(e,o){const{mapImageSublayer:l,portal:s}=e,{onChange:r,symbolStylerPopoverNode:c}=o,u=(0,b.g)(e),p=(0,b.o)(e),m="pie-chart"===(0,b.g)(e).type,d=(0,b.c)(u,"size"),y=(0,b.c)(u,"size","outline");let g=u.backgroundFillSymbol;g||(g=new n.default,g.color=null,(0,b.g)(e).backgroundFillSymbol=g,r());const f=!!g.color,k=(0,b.r)(g),w=C(),h=C();let z;z=g.outline?{color:g.outline.color?g.outline.color:new i.default([0,0,0,.5]),size:g.outline.width,style:g.outline.style,autoAdjusted:!!y}:{color:new i.default([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!y},g.outline||(g.outline=new a.default,(0,b.y)(g,new i.default([0,0,0,0])));const S=await c.getSymbolStylerElement(),v=A(S,t.clone(g),{portal:s,symbolFilter:"simple",sections:{fill:{type:"color",optional:!0,open:!0,suggestedColorsOpen:!0,transparencyOpen:!0,suggestedColors:w},stroke:{type:"color",optional:!0,suggestedColors:h,extraParts:{width:!0,autoStrokeAdjust:!(l||p&&m&&!d)&&"editable"}}},fill:{color:g.color?g.color:new i.default([0,0,0,.5])},stroke:z,fillEnabled:f,strokeEnabled:k});return c.addEventHandler("arcgisEdit",O.bind(null,({detail:{symbol:l,info:{marker:t,stroke:s}}})=>{(0,b.g)(e).backgroundFillSymbol=l,Y(e,l,t?.autoAdjusted,s?.autoAdjusted,S,o)})),await v,ee(e,g,S)}async function I(e,o){const{mapImageSublayer:l,portal:s}=e,{symbolStylerPopoverNode:r}=o,a=(0,b.g)(e),c=(0,b.c)(a,"size","outline"),u=!!a.backgroundColor,p=!!a.outline?.color,m=C(),d=C();let y;y=a.outline?{color:a.outline.color?a.outline.color:new i.default([0,0,0,.5]),size:a.outline.width,style:a.outline.style,autoAdjusted:!!c}:{color:new i.default([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!c};const g=new n.default;g.color=(0,b.g)(e).backgroundColor,g.outline=(0,b.g)(e).outline;const f=await r.getSymbolStylerElement(),k=A(f,t.clone(g),{portal:s,symbolFilter:"simple",sections:{fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:!0,suggestedColors:m},stroke:{type:"color",optional:!0,suggestedColors:d,extraParts:{width:!0,autoStrokeAdjust:!l&&"editable"}}},fill:{color:a.backgroundColor?a.backgroundColor:new i.default([0,0,0,.5])},stroke:y,fillEnabled:u,strokeEnabled:p});r.addEventHandler("arcgisEdit",O.bind(null,({detail:{symbol:l,info:{marker:t,stroke:s}}})=>{(0,b.g)(e).backgroundColor=(0,b.i)(l),(0,b.g)(e).outline=l.outline,Y(e,l,t?.autoAdjusted,s?.autoAdjusted,f,o)})),await k;const w=new n.default;return w.color=a.backgroundColor,w.outline=a.outline,ee(e,w,f)}async function P(e,o){const{onChange:l,symbolStylerPopoverNode:s}=o,{portal:c}=e,u=(0,b.m)(e),p=(0,b.n)(e),m=(0,b.o)(e),d=(0,b.g)(e),y=(0,b.d)(e),g=(0,b.c)(d,"size","auto"),f=(0,b.c)(d,"size","outline");let k=d.defaultSymbol;se(k)||(k=(0,b.e)(e,y));const w="picture-marker"!==k.type&&!!k.color,h=(0,b.r)(k),z="cim"===k.type&&"CIMPointSymbol"===k.data.symbol.type,S=C(),v=C();let E;if(k||(k=m?new n.default:p?new a.default:new r.default),"simple-fill"===k.type){const e=k;if(e.outline){const o=e.outline;E={color:o.color?o.color:new i.default([0,0,0,.5]),size:o.width,style:o.style,autoAdjusted:!!f}}else E={color:new i.default([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!f}}else if("simple-line"===k.type){const e=k;E={color:e.color?e.color:new i.default([0,0,0,.5]),size:e.width,style:e.style,marker:e.marker}}else if("simple-marker"===k.type&&k.outline){const e=k.outline;E={color:e.color?e.color:new i.default([0,0,0,.5]),size:e.width,style:e.style}}else E="cim"===k.type?te(k):{color:new i.default([255,255,255,.5]),size:1};const j=await s.getSymbolStylerElement();let V;V=A(j,t.clone(k),p?{portal:c,symbolFilter:(0,b.v)(e)?void 0:"simple",sections:{stroke:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:v,extraParts:{width:!g,autoStrokeAdjust:!1}}},stroke:E}:{portal:c,symbolFilter:m&&!(0,b.v)(e)?"simple":void 0,sections:{marker:z||["simple-marker","picture-marker"].includes(k.type)?{open:!0,parts:{size:!g},symbolsOpen:!0,sizeOpen:!0,markerType:(0,b.v)(e)?"all":["simple","picture"]}:void 0,fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,suggestedColors:S},stroke:{type:"color",optional:!0,suggestedColors:v,extraParts:{style:!["simple-marker","picture-marker","cim"].includes(k.type),width:!0,autoStrokeAdjust:!1}}},fill:{color:(0,b.i)(k)||new i.default([128,128,128])},marker:u?{size:(0,b.w)(k)}:void 0,stroke:E,fillEnabled:w,strokeEnabled:h}),s.addEventHandler("arcgisEdit",O.bind(null,({detail:{symbol:o}})=>{(0,b.g)(e).defaultSymbol=o,l()})),await V}async function x(e,o){const{mapImageSublayer:l,mapView:s,classedSymbolSelectedIdx:r,portal:a}=e,{onChange:n,symbolStylerPopoverNode:c}=o,u=(0,b.m)(e),p=(0,b.n)(e),m=(0,b.o)(e),d=(0,b.g)(e),y=(0,b.d)(e),g=(0,b.c)(d,"size","auto"),f=(0,b.c)(d,"size","outline");let w=d.classBreakInfos?.length?t.clone(d.classBreakInfos[r].symbol):(0,b.e)(e,y);se(w)||(w=(0,b.e)(e,y)),g&&(0,b.u)(w,(0,k.g)(g,s.scale));const h="picture-marker"!==w.type&&!!w.color,z=(0,b.r)(w),S="cim"===w.type&&"CIMPointSymbol"===w.data.symbol.type,v=E(),C=j();let V;if((u||p)&&g?(0,b.u)(w,(0,k.g)(g,s.scale)):m&&f&&w.outline&&(w.outline.width=(0,k.g)(f,s.scale)),"simple-fill"===w.type){const e=w;V=e.outline?{color:e.outline.color?e.outline.color:new i.default([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!f}:{color:new i.default([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!f}}else if("simple-marker"===w.type){const e=w;V=e.outline?{color:e.outline.color?e.outline.color:new i.default([0,0,0,.5]),size:e.outline.width}:{color:new i.default([0,0,0,.5]),size:1}}else if("cim"===w.type)V=te(w);else if("simple-line"===w.type){const e=w;V={size:e.width,style:e.style,marker:e.marker,color:e.color?e.color:new i.default([0,0,0,.5])}}else V={color:new i.default([255,255,255,.5]),size:1};const I=await c.getSymbolStylerElement();let P;if(P=A(I,t.clone(w),p?{portal:a,symbolFilter:(0,b.v)(e)?void 0:"simple",sections:{stroke:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:v,extraParts:{style:"cim"!==w.type,arrow:"cim"!==w.type,width:"size"!==y,autoStrokeAdjust:!l&&"size"!==y&&"editable"},parts:{extra:"size"!==y&&!g||"cim"!==w.type}}},stroke:V}:{portal:a,symbolFilter:m&&!(0,b.v)(e)?"simple":void 0,sections:{marker:S||["simple-marker","picture-marker"].includes(w.type)?{open:!0,parts:{size:"size"!==y&&(!!l||{autoSizeAdjust:"editable"})},symbolsOpen:!0,sizeOpen:"size"!==y,markerType:(0,b.v)(e)?"all":["simple","picture"]}:void 0,fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:(0,b.x)(w),suggestedColors:v},stroke:{type:"color",optional:!0,suggestedColors:C,extraParts:{style:!["simple-marker","picture-marker","cim"].includes(w.type),width:!0,autoStrokeAdjust:!(l||!m||"cim"===w.type||"size"===y)&&"editable"}}},fill:{color:(0,b.i)(w)||le(v[1],.85)},marker:u?{size:(0,b.w)(w),autoAdjusted:!!g}:void 0,stroke:V,fillEnabled:h,strokeEnabled:z}),c.addEventHandler("arcgisEdit",O.bind(null,({detail:{symbol:l,info:{marker:t,stroke:s}}})=>{const i=(0,b.g)(e),a=i.classBreakInfos.slice(),c=a[r],u=(0,b.w)(c.symbol);c.symbol=l,i.classBreakInfos=a,"size"===y?((0,b.u)(c.symbol,u),n()):Y(e,l,t?.autoAdjusted,s?.autoAdjusted,I,o)})),await P,"size"!==y)return ee(e,d.classBreakInfos?.length?d.classBreakInfos[0].symbol:void 0,I)}async function q(e,o){await B(e,{...o,type:"above"})}async function T(e,o){await B(e,{...o,type:"below"})}async function B(e,o){const{portal:l}=e,{onChange:s,symbolStylerPopoverNode:r}=o,a=(0,b.g)(e),n=(0,b.c)(a,"color"),c="above"===o.type;let u=a.classBreakInfos?.[c?1:0]?.symbol||(0,b.e)(e,"color-size");se(u)||(u=(0,b.e)(e,"color-size"));const p="picture-marker"!==u.type&&!!u.color,m=(0,b.r)(u),d=E(),y="simple-line"===u.type?E():j();let g;if("simple-marker"===u.type){const e=u;g=e.outline?{color:e.outline.color?e.outline.color:new i.default([0,0,0,.5]),size:e.outline.width}:{color:new i.default([0,0,0,.5]),size:1}}else if("simple-line"===u.type){const e=u;g={color:e.color,size:e.width,style:e.style,marker:e.marker}}else g="cim"===u.type?te(u):{color:new i.default([255,255,255,.5]),size:1};const f=A(await r.getSymbolStylerElement(),t.clone(u),{portal:l,sections:{marker:n&&["simple-marker","cim"].includes(u.type)?{open:!0,parts:{size:!1},symbolsOpen:!0,sizeOpen:!1,markerType:(0,b.v)(e)?["simple","cim:vector"]:["simple"]}:!n&&["simple-marker","picture-marker","cim"].includes(u.type)?{open:!0,parts:{size:!1},symbolsOpen:!0,sizeOpen:!1}:void 0,fill:n?void 0:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:(0,b.x)(u),suggestedColors:d},stroke:n?void 0:{type:"color",optional:!0,suggestedColors:y,extraParts:{style:!["simple-marker","picture-marker","cim"].includes(u.type),width:!0,autoStrokeAdjust:!1}}},fill:n?void 0:{color:(0,b.i)(u)||le(d[1],.85)},marker:{size:(0,b.w)(u)},stroke:g,fillEnabled:p,strokeEnabled:m});r.addEventHandler("arcgisEdit",O.bind(null,({detail:{symbol:o}})=>{const l=(0,b.g)(e);l.authoringInfo.univariateSymbolStyle="custom";const t=l.classBreakInfos.slice();t[c?1:0].symbol=o,l.classBreakInfos=t,s()})),await f}async function G(e,o){const{layer:l,mapImageSublayer:s,mapView:r,portal:a}=e,{symbolStylerPopoverNode:n}=o,c="ogc-feature"===l.type,u=(0,b.m)(e),p=(0,b.n)(e),m=(0,b.o)(e),d=(0,b.g)(e),y=(0,b.c)(d,"size","auto"),g=(0,b.c)(d,"size","outline");let f=d.symbol;se(f)||(f=(0,b.e)(e));const w="picture-marker"!==f.type&&!!f.color,h=(0,b.r)(f),z="cim"===f.type&&"CIMPointSymbol"===f.data.symbol.type,S=E(),v="simple-line"===f.type?E():j();let C;if("simple-fill"===f.type){const e=f;C=e.outline?{color:e.outline.color?e.outline.color:new i.default([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!g}:{color:new i.default([0,0,0,.5]),size:1,style:"solid"}}else if("simple-marker"===f.type){const e=f;C=e.outline?{color:e.outline.color?e.outline.color:new i.default([0,0,0,.5]),size:e.outline.width}:{color:new i.default([0,0,0,.5]),size:1}}else if("simple-line"===f.type){const e=f;C={color:e.color,size:y?(0,k.g)(y,r.scale):e.width,style:e.style,marker:e.marker,autoAdjusted:!!y}}else"cim"===f.type?(C=te(f),p&&(C.size=y?(0,k.g)(y,r.scale):C.size,C.autoAdjusted=!!y,y&&(0,b.u)(f,C.size))):C={color:new i.default([255,255,255,.5]),size:1};const V=await n.getSymbolStylerElement();let I;return I=A(V,t.clone(f),p?{portal:a,symbolFilter:(0,b.v)(e)?void 0:"simple",sections:{stroke:{type:"color",optional:"cim"===f.type,open:!0,suggestedColorsOpen:!0,suggestedColors:v,extraParts:{style:"cim"!==f.type,arrow:"cim"!==f.type,width:!0,autoStrokeAdjust:!c&&!s&&"editable"}}},stroke:C}:{portal:a,symbolFilter:m&&!(0,b.v)(e)?"simple":void 0,sections:{marker:z||["simple-marker","picture-marker"].includes(f.type)?{open:!0,symbolsOpen:!0,sizeOpen:!0,parts:{size:{autoSizeAdjust:!c&&!s&&"editable"}},markerType:(0,b.v)(e)?"all":["simple","picture"]}:void 0,fill:{type:"color",optional:!0,open:!0,suggestedColorsOpen:!0,transparencyOpen:(0,b.x)(f),suggestedColors:S},stroke:{type:"color",optional:!0,suggestedColors:v,extraParts:{style:!["simple-marker","picture-marker","cim"].includes(f.type),width:!0,autoStrokeAdjust:!(c||s||!m||"cim"===f.type)&&"editable"}}},fill:{color:(0,b.i)(f)||le(S[1],.85)},marker:u?{size:y?(0,k.g)(y,r.scale):(0,b.w)(f),autoAdjusted:!s&&!!y}:void 0,stroke:C,fillEnabled:w,strokeEnabled:h}),n.addEventHandler("arcgisEdit",O.bind(null,({detail:{symbol:l,info:{marker:t,stroke:s}}})=>{(0,b.g)(e).symbol=l,Y(e,l,t?.autoAdjusted,s?.autoAdjusted,V,o)})),await I,ee(e,d.symbol,V)}async function F(e,o,l){const{layer:s,portal:r}=o,{onChange:a,symbolStylerPopoverNode:n}=l,c=s,u="point"===e,p="line"===e;let m=u?c.pointSymbol:p?c.lineSymbol:c.polygonSymbol;se(m)||(m=(0,b.A)(o,e));const d="picture-marker"!==m.type&&!!m.color,y=(0,b.r)(m),g=E(),f="simple-line"===m.type?E():j();let k;if("simple-fill"===m.type){const e=m;k=e.outline?{color:e.outline.color?e.outline.color:new i.default([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!1}:{color:new i.default([0,0,0,.5]),size:1,style:"solid"}}else if("simple-marker"===m.type){const e=m;k=e.outline?{color:e.outline.color?e.outline.color:new i.default([0,0,0,.5]),size:e.outline.width}:{color:new i.default([0,0,0,.5]),size:1}}else if("simple-line"===m.type){const e=m;k={color:e.color,size:e.width,style:e.style,marker:e.marker,autoAdjusted:!1}}else k={color:new i.default([255,255,255,.5]),size:1};const w=await n.getSymbolStylerElement();let h;h=A(w,t.clone(m),p?{portal:r,sections:{stroke:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:f,extraParts:{width:!0,autoStrokeAdjust:!1}}},stroke:k}:{portal:r,sections:{marker:["simple-marker","picture-marker"].includes(m.type)?{open:!0,symbolsOpen:!0,sizeOpen:!0,markerType:["simple","picture"]}:void 0,fill:{type:"color",optional:!0,open:!0,suggestedColorsOpen:!0,transparencyOpen:(0,b.x)(m),suggestedColors:g},stroke:{type:"color",optional:!0,suggestedColors:f,extraParts:{style:!["simple-marker","picture-marker","cim"].includes(m.type),width:!0,autoStrokeAdjust:!1}}},fill:{color:(0,b.i)(m)||le(g[1],.85)},marker:u?{size:(0,b.w)(m),autoAdjusted:!1}:void 0,stroke:k,fillEnabled:d,strokeEnabled:y}),n.addEventHandler("arcgisEdit",O.bind(null,({detail:{symbol:e}})=>{u?c.pointSymbol=e:p?c.lineSymbol=e:c.polygonSymbol=e,a()})),await h}async function R(e,o){const{portal:l}=e,{onChange:s,symbolStylerPopoverNode:r}=o,a=(0,b.n)(e),n=(0,b.g)(e),c=(0,b.d)(e),u=(0,b.c)(n,"color"),p=(0,b.p)(n,"reference-size"),m=(0,b.p)(n,"spike");let d;if(["type-size","type-size-age","predominance-size","relationship-size"].includes(c)){const o=(0,b.g)(e);d=o.uniqueValueInfos?.length?o.uniqueValueInfos[0].symbol:(0,b.e)(e,c)}else d=n.classBreakInfos?.length?n.classBreakInfos[0].symbol:(0,b.e)(e,c);se(d)||(d=(0,b.e)(e,c));const y="picture-marker"!==d.type&&!!d.color,g=(0,b.r)(d),f="cim"===d.type&&"CIMPointSymbol"===d.data.symbol.type,k=E(),w="simple-line"===d.type?E():j();let h;if("simple-fill"===d.type){const e=d;h=e.outline?{color:e.outline.color?e.outline.color:new i.default([0,0,0,.5]),size:e.outline.width,style:e.outline.style}:{color:new i.default([0,0,0,.5]),size:1,style:"solid"}}else if("simple-marker"===d.type){const e=d;h=e.outline?{color:e.outline.color?e.outline.color:new i.default([0,0,0,.5]),size:e.outline.width}:{color:new i.default([0,0,0,.5]),size:1}}else if("simple-line"===d.type){const e=d;h={color:e.color,size:e.width,style:e.style,marker:e.marker}}else h="cim"===d.type?te(d):{color:new i.default([255,255,255,.5]),size:1};const S=await r.getSymbolStylerElement();let v;p&&(S.mode="minimal"),v=["color-size","color-age-size","color-size-age","type-size","type-size-age","predominance-size","relationship-size"].includes((0,b.d)(e))?A(S,t.clone(d),a?{portal:l,symbolFilter:(0,b.v)(e)?void 0:"simple",sections:{stroke:{type:"color",open:!0,extraOpen:!0,extraParts:{style:"cim"!==d.type,arrow:"cim"!==d.type,width:!1,autoStrokeAdjust:!1},suggestedColors:w,parts:{suggestedColors:!1,customColor:!1,transparency:!0,extra:"cim"!==d.type}}},stroke:h}:{portal:l,sections:{marker:f||["simple-marker","picture-marker"].includes(d.type)?{open:!0,parts:{size:!1},symbolsOpen:!0,sizeOpen:!1,markerType:(0,b.v)(e)?["simple","cim:vector"]:["simple"]}:p?{parts:{preview:!1,size:!1,rotation:!1,color:!0,transparency:!0}}:void 0,stroke:{type:"color",open:!0,optional:!0,suggestedColors:w,extraParts:{style:!["simple-marker","picture-marker","cim"].includes(d.type),width:!0,autoStrokeAdjust:!1}}},marker:{size:(0,b.w)(d)},stroke:h,strokeEnabled:g}):A(S,t.clone(d),a?{portal:l,symbolFilter:(0,b.v)(e)?void 0:"simple",sections:{stroke:{type:"color",open:!0,extraParts:{style:"cim"!==d.type,arrow:"cim"!==d.type,width:!1,autoStrokeAdjust:!1},suggestedColorsOpen:!0,suggestedColors:w,parts:{extra:"cim"!==d.type}}},stroke:h}:{portal:l,sections:{marker:f||["simple-marker","picture-marker"].includes(d.type)?{open:!0,parts:{size:!1,preview:!m,rotation:!m,alignment:!m,baseWidth:!!m},symbolsOpen:!0,sizeOpen:!1,markerType:(0,b.v)(e)?"all":["simple","picture"]}:p?{parts:{preview:!1,size:!1,rotation:!1,color:!0,transparency:!0}}:void 0,fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:(0,b.x)(d),suggestedColors:k},stroke:{type:"color",optional:!0,suggestedColors:w,extraParts:{style:!["simple-marker","picture-marker","cim"].includes(d.type),width:!0,autoStrokeAdjust:!1,hideColor:!!m?.spikeSymbolStyle&&z.includes(m.spikeSymbolStyle),hideTransparency:!!m?.spikeSymbolStyle&&z.includes(m.spikeSymbolStyle)}}},fill:{color:(0,b.i)(d)||le(k[1],.85)},marker:{size:(0,b.w)(d)},stroke:h,fillEnabled:y,strokeEnabled:g}),r.addEventHandler("arcgisEdit",O.bind(null,({detail:{symbol:o}})=>{const l=(0,b.g)(e);if(l.classBreakInfos){let e=l.classBreakInfos;if(!e?.length)return;e=e.slice(),e.forEach(e=>{const t=(0,b.w)(e.symbol),s=(0,b.i)(e.symbol);e.symbol=o.clone(),u?(0,b.y)(e.symbol,new i.default([0,0,0,.5])):l.uniqueValueInfos&&(0,b.y)(e.symbol,s),!p&&!m&&(0,b.u)(e.symbol,t)}),l.classBreakInfos=e}else{let e=l.uniqueValueGroups;if(!e?.length||!e[0].classes?.length)return;e=e.slice(),e.forEach(e=>{e.classes.forEach(e=>{const l=(0,b.w)(e.symbol),t=(0,b.i)(e.symbol);e.symbol=o.clone(),u?(0,b.y)(e.symbol,new i.default([0,0,0,.5])):(0,b.y)(e.symbol,t),(0,b.u)(e.symbol,l)})}),l.uniqueValueGroups=e}s()})),await v}async function N(e,o){const{mapImageSublayer:l,mapView:s,portal:r}=e,{onChange:a,symbolStylerPopoverNode:n}=o,p=(0,b.m)(e),m=(0,b.n)(e),d=(0,b.o)(e),y=(0,b.g)(e),g=y.authoringInfo,f=(0,b.d)(e),w="univariate-color-size"===g?.type,z="above-and-below"===g?.univariateTheme,v=z&&!g.univariateSymbolStyle,C=(0,b.c)((0,b.g)(e),"color"),E=(0,b.c)(y,"size","auto"),V=(0,b.c)(y,"size","outline"),I=(0,b.p)(y,"reference-size"),P=(0,b.p)(y,"spike"),x=["color-size","color-age-size","color-size-age"].includes(f),q=(0,b.p)((0,b.g)(e),"color");let T=C?C.stops.map(e=>e.color):y.classBreakInfos.map(e=>(0,b.i)(e.symbol)?.clone()||new i.default([0,0,0,0]));T.length>10&&(T=T.slice(0,10)),T.reverse();let B,G=y.classBreakInfos?.length?y.classBreakInfos[0].symbol:(0,b.e)(e);if(!se(G)||(!z||v)&&!ie(G)){const o=(0,b.w)(G)??G.width;G=(0,b.e)(e,f),(0,b.u)(G,o)}const F=!(z&&!C&&"picture-marker"===G.type&&"picture-marker"===y.classBreakInfos[1].symbol?.type),R=(0,b.r)(G),N="cim"===G.type&&"CIMPointSymbol"===G.data.symbol.type,H=await c.getBackgroundColorTheme(s),M=u.getSchemes({basemapTheme:H,geometryType:(0,b.j)(e)||h,theme:g?.univariateTheme||q?.theme||"high-to-low"});if(!C){const o=u.getSchemes({basemap:s.map?.basemap||"topo",geometryType:(0,b.j)(e)||h,theme:"above-and-below"});M.secondarySchemes.push(o.primaryScheme),M.secondarySchemes=M.secondarySchemes.concat(o.secondarySchemes)}const _=C?0:y.classBreakInfos.length;let D=(0,b.k)(M,_);D=D.filter(e=>e.colors?.length);const J=D.map(e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name})),W=j();let L;if((0,b.y)(G,T[T.length-1]),(x||p||m)&&E?(0,b.u)(G,(0,k.g)(E,s.scale)):d&&V&&G.outline&&(G.outline.width=(0,k.g)(V,s.scale)),"simple-fill"===G.type){const e=G;L=e.outline?{color:e.outline.color?e.outline.color:new i.default([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!V}:{color:new i.default([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!V}}else if("simple-marker"===G.type){const e=G;L=e.outline?{color:e.outline.color?e.outline.color:new i.default([0,0,0,.5]),size:e.outline.width}:{color:new i.default([0,0,0,.5]),size:1}}else if("cim"===G.type)L=te(G),m&&(L.size=E?(0,k.g)(E,s.scale):L.size,L.autoAdjusted=!!E,E&&(0,b.u)(G,L.size));else if("simple-line"===G.type){const e=G;L={color:new i.default([255,255,255,.5]),size:E?(0,k.g)(E,s.scale):e.width,style:e.style,marker:e.marker,autoAdjusted:!!E}}else L={color:new i.default([255,255,255,.5]),size:1};const U=await n.getSymbolStylerElement();let K;return I&&(U.mode="minimal"),B=G.clone(),K=m?A(U,t.clone(G),{portal:r,symbolFilter:(0,b.v)(e)?void 0:"simple",sections:{stroke:{type:"color-ramp",style:C?"continuous":"discrete",colorRamps:J,open:!0,colorRampsOpen:!0,extraParts:{style:"cim"!==G.type,arrow:"cim"!==G.type,autoStrokeAdjust:!l&&!x&&"editable",width:!x},parts:{extra:!x||"cim"!==G.type}}},stroke:{...L,color:T}}):A(U,!z||v?t.clone(G):(0,b.e)(e),{portal:r,symbolFilter:d&&!(0,b.v)(e)?"simple":void 0,sections:{marker:z&&!v||!N&&!["simple-marker","picture-marker"].includes(G.type)?z&&!v?{parts:{preview:!1,rotation:!1,size:!1}}:I?{parts:{preview:!1,size:!1}}:void 0:{open:!0,parts:{size:!x&&(!!l||{autoSizeAdjust:"editable"}),preview:!P,rotation:!P,alignment:!P,baseWidth:!!P},symbolsOpen:!0,sizeOpen:!x,markerType:(0,b.v)(e)?["simple","cim:vector"]:["simple"]},fill:{type:"color-ramp",style:C?"continuous":"discrete",open:!(0,b.z)(G),colorRampsOpen:!(0,b.z)(G),colorRamps:J},stroke:!z||v?{type:"color",optional:!0,open:!1,suggestedColors:W,extraParts:{style:!["simple-marker","picture-marker","cim"].includes(G.type),width:!0,autoStrokeAdjust:!(l||!d||"cim"===G.type||x)&&"editable",hideColor:!!P?.spikeSymbolStyle&&S.includes(P.spikeSymbolStyle),hideTransparency:!!P?.spikeSymbolStyle&&S.includes(P.spikeSymbolStyle)}}:void 0},fill:{color:T},marker:z&&!v||!x&&!p?void 0:{size:E?(0,k.g)(E,s.scale):(0,b.w)(G),autoAdjusted:!!E},stroke:L,strokeEnabled:R,fillEnabled:F}),n.addEventHandler("arcgisEdit",O.bind(null,({detail:{symbol:l,info:{marker:s,stroke:r,fill:n}}})=>{const c=(0,b.g)(e),u=(0,b.c)(c,"color"),p=t.clone((n||r).color),m=T[0],d=T.length!==p.length||T.some((e,o)=>e.r!==p[o].r||e.g!==p[o].g||e.b!==p[o].b)||m.r!==p[0].r||m.g!==p[0].g||m.b!==p[0].b,y=m.a!==p[0].a,g=p[0].a,f=(0,b.D)(l,B);if(d&&!f.any&&(f.any=!0,f.color=!0),(!w||!z)&&p.reverse(),!z||v){if(f.any){const e=c.classBreakInfos.slice();e.forEach((e,o)=>{e.symbol=(0,b.E)(e.symbol,l,d&&!u?p[o%p.length]:y&&!u?(0,b.F)((0,b.i)(e.symbol),g):(0,b.i)(e.symbol)||new i.default([0,0,0,0]),f)}),c.classBreakInfos=e}}else if(!u){p.reverse();const e=c.classBreakInfos.slice();e.forEach((e,o)=>{(0,b.y)(e.symbol,p[o])}),c.classBreakInfos=e}if(u){if(T.length!==p.length&&5===p.length){const e=u.stops.length,o=[];o[0]=u.stops[0],o[1]=u.stops[Math.floor(e/4)],o[2]=u.stops[Math.floor(e/2)],o[3]=u.stops[e-Math.ceil(e/4)],o[4]=u.stops[e-1],u.stops=o}u.stops.forEach((e,o)=>{e.color=p[o]});const e=c.classBreakInfos.slice();(0,b.y)(e[0].symbol,new i.default([170,170,170,1])),c.classBreakInfos=e}x?a():Y(e,l,s?.autoAdjusted,r?.autoAdjusted,U,o),B=l.clone(),T=u?u.stops.map(e=>e.color):c.classBreakInfos.map(e=>(0,b.i)(e.symbol)||new i.default([0,0,0,0])).reverse()})),await K,ee(e,y.classBreakInfos?.length?y.classBreakInfos[0].symbol:void 0,U,e=>{d&&G.outline?G.outline.width=e:d||(0,b.u)(G,e),B=G.clone()})}async function H(e,o){const{mapImageSublayer:l,mapView:s,portal:r}=e,{onChange:a,symbolStylerPopoverNode:n}=o,c=(0,b.m)(e),u=(0,b.n)(e),p=(0,b.o)(e),m=(0,b.g)(e),d=(0,b.d)(e),y=["type-size","type-size-age"].includes(d),g=(0,b.c)(m,"size","auto"),w=(0,b.c)(m,"size","outline"),z=(0,b.p)(m,"reference-size"),C=(0,b.p)(m,"spike"),E=m.uniqueValueGroups;let V,I=[];const P=E.length?E[E.length-1]:void 0,x=P?.classes?.length&&(0,b.i)(P.classes[P.classes.length-1].symbol)?.a||1;E.forEach(e=>I=I.concat(e.classes.map(e=>(0,b.i)(e.symbol)||new i.default([0,0,0,x])))),I.reverse();let q=0;E.forEach(e=>q+=e.classes.length);const T=f.getSchemes({basemap:s.map?.basemap,geometryType:(0,b.j)(e)||h,numColors:q});let B=m.uniqueValueGroups?.length&&m.uniqueValueGroups[0].classes.length?t.clone(m.uniqueValueGroups[0].classes[0].symbol):(0,b.e)(e,d);if(!ie(B)){const o=(0,b.w)(B)??B.width;B=(0,b.e)(e,d),(0,b.u)(B,o)}const G=(0,b.r)(B),F="cim"===B.type&&"CIMPointSymbol"===B.data.symbol.type,R=(0,b.k)(T,Math.min(q,10)).map(e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name})),N=j();let H;if((0,b.y)(B,I[I.length-1]),(y||c||u)&&g?(0,b.u)(B,(0,k.g)(g,s.scale)):p&&w&&B.outline&&(B.outline.width=(0,k.g)(w,s.scale)),"simple-fill"===B.type){const e=B;H=e.outline?{color:e.outline.color?e.outline.color:new i.default([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!w}:{color:new i.default([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!w}}else if("simple-marker"===B.type){const e=B;H=e.outline?{color:e.outline.color?e.outline.color:new i.default([0,0,0,.5]),size:e.outline.width}:{color:new i.default([0,0,0,.5]),size:1}}else if("cim"===B.type)H=te(B),u&&(H.size=g?(0,k.g)(g,s.scale):H.size,H.autoAdjusted=!!g,g&&(0,b.u)(B,H.size));else if("simple-line"===B.type){const e=B;H={color:I[I.length-1],size:g?(0,k.g)(g,s.scale):e.width,style:e.style,marker:e.marker,autoAdjusted:!!g}}else H={color:new i.default([255,255,255,.5]),size:1};const M=await n.getSymbolStylerElement();let _;return z&&(M.mode="minimal"),V=B.clone(),_=A(M,t.clone(B),u?{portal:r,symbolFilter:(0,b.v)(e)?void 0:"simple",sections:{stroke:{type:"color-ramp",style:"discrete",open:!0,colorRampsOpen:!0,colorRamps:R,extraParts:{style:"cim"!==B.type,arrow:"cim"!==B.type,autoStrokeAdjust:!l&&!y&&"editable",width:!y},parts:{extra:!y||"cim"!==B.type}}},stroke:{...H,color:I}}:{portal:r,symbolFilter:p&&!(0,b.v)(e)?"simple":void 0,sections:{marker:F||["simple-marker","picture-marker"].includes(B.type)?{open:(0,b.z)(B),parts:{size:!y&&(!!l||{autoSizeAdjust:"editable"}),preview:!C,rotation:!C,alignment:!C,baseWidth:!!C},symbolsOpen:!0,sizeOpen:!y,markerType:(0,b.v)(e)?["simple","cim:vector"]:["simple"]}:z?{parts:{preview:!1,size:!1}}:void 0,fill:{type:"color-ramp",style:"discrete",open:!(0,b.z)(B),colorRampsOpen:!(0,b.z)(B),colorRamps:R,parts:{hideColorRamp:v.includes(C?.spikeSymbolStyle??"")}},stroke:{type:"color",optional:!0,open:!1,suggestedColors:N,parts:{hideColorRamp:v.includes(C?.spikeSymbolStyle??"")},extraParts:{style:!["simple-marker","picture-marker","cim"].includes(B.type),width:!0,autoStrokeAdjust:!(l||!p||"cim"===B.type||y)&&"editable",hideColor:!!C?.spikeSymbolStyle&&S.includes(C?.spikeSymbolStyle),hideTransparency:!!C?.spikeSymbolStyle&&S.includes(C.spikeSymbolStyle)}}},fill:{color:I},marker:y||c?{size:g?(0,k.g)(g,s.scale):(0,b.w)(B),autoAdjusted:!!g}:void 0,stroke:H,strokeEnabled:G}),n.addEventHandler("arcgisEdit",O.bind(null,({detail:{symbol:l,info:{marker:s,stroke:r,fill:n}}})=>{const c=t.clone((n||r).color),u=I[0],p=I.length!==c.length||I.some((e,o)=>e.r!==c[o].r||e.g!==c[o].g||e.b!==c[o].b)||u.r!==c[0].r||u.g!==c[0].g||u.b!==c[0].b,m=u.a!==c[0].a,d=c[0].a;c.reverse();const g=(0,b.g)(e),f=(0,b.D)(l,V);if(p&&!f.any&&(f.any=!0,f.color=!0),f.any){const e=g.uniqueValueGroups.slice();let o=0;e.forEach(e=>{e.classes.forEach((e,s)=>{"picture-marker"===e.symbol.type&&(p||m)&&(e.symbol=t.clone(l),(0,b.y)(e.symbol,c[(o+s)%c.length])),e.symbol=(0,b.E)(e.symbol,l,p?c[(o+s)%c.length]:m?(0,b.F)((0,b.i)(e.symbol),d):(0,b.i)(e.symbol)||new i.default([0,0,0,0]),f)}),o+=e.classes.length}),g.uniqueValueGroups=e}y?a():Y(e,l,s?.autoAdjusted,r?.autoAdjusted,M,o),V=l.clone(),p&&(I=[],g.uniqueValueGroups.forEach(e=>I=I.concat(e.classes.map(e=>(0,b.i)(e.symbol)||new i.default([0,0,0,0])))),I.reverse(),I.length>10&&(I=I.slice(0,10)))})),await _,ee(e,m.uniqueValueGroups?.length&&m.uniqueValueGroups[0].classes.length?m.uniqueValueGroups[0].classes[0].symbol:void 0,M,e=>{p&&B.outline?B.outline.width=e:p||(0,b.u)(B,e),V=B.clone()})}async function M(e,o){const{mapView:l,portal:s}=e,{groupIdx:r,onChange:a,symbolStylerPopoverNode:p}=o,m=(0,b.g)(e).uniqueValueGroups[r],d=(0,b.i)(m.classes[m.classes.length-1].symbol)?.a||1;let y=m.classes.map(e=>(0,b.i)(e.symbol)||new i.default([0,0,0,d]));y.reverse();const g=m.classes.length,k=await c.getBackgroundColorTheme(l),w=f.getSchemes({basemapTheme:k,geometryType:(0,b.j)(e)||h,numColors:g}),z=u.getSchemes({basemapTheme:k,geometryType:(0,b.j)(e)||h,theme:"high-to-low"});z.primaryScheme.colors=z.primaryScheme.colorsForClassBreaks[9].colors,z.primaryScheme.colorsForClassBreaks=void 0,z.secondarySchemes=z.secondarySchemes.filter(e=>e.colorsForClassBreaks?.length>=10),z.secondarySchemes.forEach(e=>{e.colors=e.colorsForClassBreaks[9].colors,e.colorsForClassBreaks=void 0}),w.secondarySchemes.push(z.primaryScheme),w.secondarySchemes=w.secondarySchemes.concat(z.secondarySchemes);const S=(0,b.k)(w,Math.min(g,10)).map(e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name})),v=A(await p.getSymbolStylerElement(),new n.default,{portal:s,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color-ramp",style:"discrete",open:!0,colorRampsOpen:!0,colorRamps:S,parts:{transparency:!1}}},fill:{color:y}});p.addEventHandler("arcgisEdit",O.bind(null,({detail:{info:{fill:o}}})=>{const l=t.clone(o.color).reverse(),s=(0,b.g)(e),i=(0,b.d)(e),n=s.uniqueValueGroups.slice();n[r].classes.forEach((o,t)=>{"picture-marker"===o.symbol.type&&(o.symbol=(0,b.e)(e,i)),(0,b.y)(o.symbol,l[t%l.length])}),s.uniqueValueGroups=n,a(),y=s.uniqueValueGroups[r].classes.map(e=>(0,b.i)(e.symbol)),y.reverse(),y.length>10&&(y=y.slice(0,10))})),await v}async function _(e,o){const{mapImageSublayer:l,mapView:s,lastDefault:r,portal:a}=e,{onChange:n,symbolStylerPopoverNode:c,selectedValue:u}=o,p=(0,b.l)(e),[m,d]=!p&&u.split("/").map(e=>Number.parseInt(e)),y=(0,b.m)(e),g=(0,b.n)(e),w=(0,b.o)(e),S=(0,b.g)(e),v=(0,b.d)(e),E=["type-size","type-size-age"].includes(v),V=(0,b.c)(S,"size","auto"),I=(0,b.c)(S,"size","outline"),P=(0,b.p)(S,"reference-size"),x=(0,b.p)(S,"spike");let q;q=!p&&-1===m||p&&-1===u?S.defaultSymbol||r.defaultSymbol:p?S.uniqueValueInfos[u].symbol:S.uniqueValueGroups[m].classes[d].symbol,se(q)||(q=p?(0,b.q)():(0,b.e)(e,v),(!p&&-1===m||p&&-1===u)&&!S.defaultSymbol&&(r.defaultSymbol=q));const T="picture-marker"!==q.type&&!!q.color,B=(0,b.r)(q),G="cim"===q.type&&"CIMPointSymbol"===q.data.symbol.type;let F;if(!p&&-1===m||p&&-1===u)F=C();else{const o=f.getSchemes({basemap:s.map?.basemap,geometryType:(0,b.j)(e)||h});F=(0,b.t)(o).slice(0,16)}const R=j();let N;if((E||y||g)&&V?(0,b.u)(q,(0,k.g)(V,s.scale)):w&&I&&q.outline&&(q.outline.width=(0,k.g)(I,s.scale)),"simple-fill"===q.type){const e=q;N=e.outline?{color:e.outline.color?e.outline.color:new i.default([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!I}:{color:new i.default([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!I}}else if("simple-marker"===q.type){const e=q;N=e.outline?{color:e.outline.color?e.outline.color:new i.default([0,0,0,.5]),size:e.outline.width}:{color:new i.default([0,0,0,.5]),size:1}}else if("cim"===q.type)N=te(q),g&&(N.size=V?(0,k.g)(V,s.scale):N.size,N.autoAdjusted=!!V,V&&(0,b.u)(q,N.size));else if("simple-line"===q.type){const e=q;N={size:V?(0,k.g)(V,s.scale):e.width,style:e.style,marker:e.marker,color:e.color,autoAdjusted:!!V}}else N={color:new i.default([255,255,255,.5]),size:1};const H=await c.getSymbolStylerElement();let M;return P&&(H.mode="minimal"),M=A(H,t.clone(q),g?{portal:a,symbolFilter:(0,b.v)(e)?void 0:"simple",sections:{stroke:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:F,extraParts:{style:"cim"!==q.type,arrow:"cim"!==q.type,autoStrokeAdjust:!l&&!E&&"editable",width:!E},parts:{extra:!E||"cim"!==q.type}}},stroke:N}:p?{portal:a,symbolFilter:"simple",sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,suggestedColors:F,parts:{transparency:!1}}},fill:{color:(0,b.i)(q)||(-1===u?(0,b.q)().color:le(F[u%F.length],.85))},stroke:N,fillEnabled:T}:{portal:a,symbolFilter:w&&!(0,b.v)(e)?"simple":void 0,sections:{marker:G||["simple-marker","picture-marker"].includes(q.type)?{open:!0,parts:{size:!E&&(!!l||{autoSizeAdjust:"editable"}),preview:!x,rotation:!x,alignment:!x,baseWidth:!!x},symbolsOpen:!0,sizeOpen:!E,markerType:(0,b.v)(e)?"all":["simple","picture"]}:P?{parts:{preview:!1,size:!1,rotation:!1,color:!0,transparency:!0}}:void 0,fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:(0,b.x)(q),suggestedColors:F},stroke:{type:"color",optional:!0,suggestedColors:R,extraParts:{style:!["simple-marker","picture-marker","cim"].includes(q.type),width:!0,autoStrokeAdjust:!(l||!w||"cim"===q.type||E)&&"editable",hideColor:!!x?.spikeSymbolStyle&&z.includes(x.spikeSymbolStyle),hideTransparency:!!x?.spikeSymbolStyle&&z.includes(x.spikeSymbolStyle)}}},fill:{color:(0,b.i)(q)||le(F[d%F.length],.85)},marker:E||y?{size:V?(0,k.g)(V,s.scale):(0,b.w)(q),autoAdjusted:!!V}:void 0,stroke:N,fillEnabled:T,strokeEnabled:B}),c.addEventHandler("arcgisEdit",O.bind(null,({detail:{symbol:l,info:{marker:t,stroke:s}}})=>{const i=(0,b.g)(e);if(!p&&-1===m||p&&-1===u)i.defaultSymbol=l;else if(p){const e=i.uniqueValueInfos.slice();e[u].symbol=l,i.uniqueValueInfos=e}else{const e=i.uniqueValueGroups.slice();e[m].classes[d].symbol=l,i.uniqueValueGroups=e}E?n():Y(e,l,t?.autoAdjusted,s?.autoAdjusted,H,o)})),await M,ee(e,p?S.uniqueValueInfos?.length?S.uniqueValueInfos[0].symbol:void 0:S.uniqueValueGroups?.length&&S.uniqueValueGroups[0].classes.length?S.uniqueValueGroups[0].classes[0].symbol:void 0,H)}async function D(e,o){const{mapImageSublayer:l,mapView:s,portal:r}=e,{onChange:a,symbolStylerPopoverNode:n}=o,c=(0,b.m)(e),u=(0,b.n)(e),p=(0,b.o)(e),m=(0,b.g)(e),d=(0,b.d)(e),y="relationship-size"===d,f=(0,b.p)(m,"reference-size"),w=(0,b.p)(m,"spike"),h=(0,b.c)(m,"size","auto"),z=(0,b.c)(m,"size","outline"),C=m.uniqueValueGroups[0].classes,E=C.map(e=>(0,b.i)(e.symbol)||new i.default([0,0,0,0])),V=g.getSchemes({basemap:s.map?.basemap||"topo",geometryType:(0,b.j)(e)});let I=m.uniqueValueGroups[0].classes?.length?t.clone(m.uniqueValueGroups[0].classes[0].symbol):(0,b.e)(e,d);if(!ie(I)){const o=(0,b.w)(I)??I.width;I=(0,b.e)(e,d),(0,b.u)(I,o)}const P=(0,b.r)(I),x="cim"===I.type&&"CIMPointSymbol"===I.data.symbol.type,q=(0,b.k)(V,Math.sqrt(C.length)).map(({colors:e,scheme:{tags:o,name:l}})=>({stops:g.flatten2DArray(e),tags:o,name:l})),T=j();let B;if("simple-fill"===I.type){const e=I;B=e.outline?{color:e.outline.color?e.outline.color:new i.default([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!z}:{color:new i.default([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!z}}else if("simple-marker"===I.type){const e=I;B=e.outline?{color:e.outline.color?e.outline.color:new i.default([0,0,0,.5]),size:e.outline.width}:{color:new i.default([0,0,0,.5]),size:1}}else if("cim"===I.type)B=te(I),u&&(B.size=h?(0,k.g)(h,s.scale):B.size,B.autoAdjusted=!!h,h&&(0,b.u)(I,B.size));else if("simple-line"===I.type){const e=I;B={color:new i.default([255,255,255,.5]),size:h?(0,k.g)(h,s.scale):e.width,style:e.style,marker:e.marker,autoAdjusted:!!h}}else B={color:new i.default([255,255,255,.5]),size:1};const G=await n.getSymbolStylerElement();let F;return f&&(G.mode="minimal"),F=A(G,t.clone(I),u?{portal:r,symbolFilter:(0,b.v)(e)?void 0:"simple",sections:{stroke:{type:"color-ramp",style:"2d",open:!0,colorRampsOpen:!0,colorRamps:q,extraParts:{style:"cim"!==I.type,arrow:"cim"!==I.type,autoStrokeAdjust:!l&&!y&&"editable",width:!y},parts:{extra:!y||"cim"!==I.type}}},stroke:{...B,color:E}}:{portal:r,symbolFilter:p&&!(0,b.v)(e)?"simple":void 0,sections:{marker:x||["simple-marker","picture-marker"].includes(I.type)?{open:(0,b.z)(I),parts:{size:!y&&(!!l||{autoSizeAdjust:"editable"}),preview:!w,rotation:!w,alignment:!w,baseWidth:!!w},symbolsOpen:!0,sizeOpen:!y,markerType:(0,b.v)(e)?["simple","cim:vector"]:["simple"]}:f?{parts:{preview:!1,size:!1,rotation:!1}}:void 0,fill:{type:"color-ramp",style:"2d",open:!(0,b.z)(I),colorRampsOpen:!(0,b.z)(I),colorRamps:q,parts:{hideColorRamp:v.includes(w?.spikeSymbolStyle??"")}},stroke:{type:"color",optional:!0,open:!1,suggestedColors:T,parts:{hideColorRamp:v.includes(w?.spikeSymbolStyle??"")},extraParts:{style:!["simple-marker","picture-marker","cim"].includes(I.type),width:!0,autoStrokeAdjust:!(l||!p||"cim"===I.type||y)&&"editable",hideColor:!!w?.spikeSymbolStyle&&S.includes(w.spikeSymbolStyle),hideTransparency:!!w?.spikeSymbolStyle&&S.includes(w.spikeSymbolStyle)}}},fill:{color:E},marker:y||c?{size:h?(0,k.g)(h,s.scale):(0,b.w)(I),autoAdjusted:!!h}:void 0,stroke:B,strokeEnabled:P}),n.addEventHandler("arcgisEdit",O.bind(null,({detail:{symbol:l,info:{marker:s,stroke:i,fill:r}}})=>{const n=t.clone((r||i).color),c=(0,b.g)(e),u=c.uniqueValueGroups[0].classes.slice();u.forEach((e,o)=>{e.symbol=l.clone(),(0,b.y)(e.symbol,n[o%n.length])}),c.uniqueValueGroups[0].classes=u,y?a():Y(e,l,s?.autoAdjusted,i?.autoAdjusted,G,o)})),await F,ee(e,m.uniqueValueGroups[0].classes?.length?m.uniqueValueGroups[0].classes[0].symbol:void 0,G)}async function J(e,o){const{mapImageSublayer:l,mapView:s,portal:r}=e,{onChange:a,symbolStylerPopoverNode:n}=o,c=(0,b.m)(e),u=(0,b.n)(e),p=(0,b.o)(e),m=(0,b.g)(e),d=(0,b.d)(e),g="predominance-size"===d,f=(0,b.c)(m,"size","auto"),w=(0,b.c)(m,"size","outline"),h=m.uniqueValueGroups[0].classes;let z;const S=h.length&&(0,b.i)(h[h.length-1].symbol)?.a||1;let v=h.map(e=>(0,b.i)(e.symbol)||new i.default([0,0,0,S]));v.reverse();const C=y.getSchemes({basemap:s.map?.basemap,geometryType:(0,b.j)(e),numColors:h.length});let E=m.uniqueValueGroups[0].classes?.length?t.clone(m.uniqueValueGroups[0].classes[0].symbol):(0,b.e)(e,d);if(!ie(E)){const o=(0,b.w)(E)??E.width;E=(0,b.e)(e,d),(0,b.u)(E,o)}const V=(0,b.r)(E),I="cim"===E.type&&"CIMPointSymbol"===E.data.symbol.type,P=(0,b.k)(C,h.length).map(e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name})),x=j();let q;if((0,b.y)(E,v[v.length-1]),(g||c||u)&&f?(0,b.u)(E,(0,k.g)(f,s.scale)):p&&w&&E.outline&&(E.outline.width=(0,k.g)(w,s.scale)),"simple-fill"===E.type){const e=E;q=e.outline?{color:e.outline.color?e.outline.color:new i.default([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!w}:{color:new i.default([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!w}}else if("simple-marker"===E.type){const e=E;q=e.outline?{color:e.outline.color?e.outline.color:new i.default([0,0,0,.5]),size:e.outline.width}:{color:new i.default([0,0,0,.5]),size:1}}else if("cim"===E.type)q=te(E),u&&(q.size=f?(0,k.g)(f,s.scale):q.size,q.autoAdjusted=!!f,f&&(0,b.u)(E,q.size));else if("simple-line"===E.type){const e=E;q={color:new i.default([255,255,255,.5]),size:f?(0,k.g)(f,s.scale):e.width,style:e.style,marker:e.marker,autoAdjusted:!!f}}else q={color:new i.default([255,255,255,.5]),size:1};const T=await n.getSymbolStylerElement();let B;return z=E.clone(),B=A(T,t.clone(E),u?{portal:r,symbolFilter:(0,b.v)(e)?void 0:"simple",sections:{stroke:{type:"color-ramp",style:"discrete",open:!0,colorRampsOpen:!0,colorRamps:P,parts:{transparency:!0,extra:!g||"cim"!==E.type},extraParts:{style:"cim"!==E.type,arrow:"cim"!==E.type,autoStrokeAdjust:!l&&!g&&"editable",width:!g}}},stroke:{...q,color:v}}:{portal:r,symbolFilter:p&&!(0,b.v)(e)?"simple":void 0,sections:{marker:I||["simple-marker","picture-marker"].includes(E.type)?{open:(0,b.z)(E),parts:{size:!g&&(!!l||{autoSizeAdjust:"editable"})},symbolsOpen:!0,sizeOpen:!g,markerType:(0,b.v)(e)?["simple","cim:vector"]:["simple"]}:void 0,fill:{type:"color-ramp",style:"discrete",open:!(0,b.z)(E),colorRampsOpen:!(0,b.z)(E),colorRamps:P},stroke:{type:"color",optional:!0,open:!1,suggestedColors:x,extraParts:{style:!["simple-marker","picture-marker","cim"].includes(E.type),width:!0,autoStrokeAdjust:!(l||!p||"cim"===E.type||g)&&"editable"}}},fill:{color:v},marker:g||c?{size:f?(0,k.g)(f,s.scale):(0,b.w)(E),autoAdjusted:!!f}:void 0,stroke:q,strokeEnabled:V}),n.addEventHandler("arcgisEdit",O.bind(null,({detail:{symbol:l,info:{marker:s,stroke:r,fill:n}}})=>{const c=t.clone((n||r).color),u=v[0],p=v.length!==c.length||v.some((e,o)=>e.r!==c[o].r||e.g!==c[o].g||e.b!==c[o].b)||u.r!==c[0].r||u.g!==c[0].g||u.b!==c[0].b,m=u.a!==c[0].a,d=c[0].a;c.reverse();const y=(0,b.g)(e),f=(0,b.D)(l,z);if(p&&!f.any&&(f.any=!0,f.color=!0),f.any){const e=y.uniqueValueGroups[0].classes.slice();e.forEach((e,o)=>{"picture-marker"===e.symbol.type&&(p||m)&&(e.symbol=t.clone(l),(0,b.y)(e.symbol,c[o%c.length])),e.symbol=(0,b.E)(e.symbol,l,p?c[o%c.length]:m?(0,b.F)((0,b.i)(e.symbol),d):(0,b.i)(e.symbol)||new i.default([0,0,0,0]),f)}),y.uniqueValueGroups[0].classes=e}g?a():Y(e,l,s?.autoAdjusted,r?.autoAdjusted,T,o),z=l.clone(),p&&(v=y.uniqueValueGroups[0].classes.map(e=>(0,b.i)(e.symbol)||new i.default([0,0,0,.5])),v.reverse())})),await B,ee(e,m.uniqueValueGroups[0].classes?.length?m.uniqueValueGroups[0].classes[0].symbol:void 0,T,e=>{p&&E.outline?E.outline.width=e:p||(0,b.u)(E,e),z=E.clone()})}async function W(e,o){const{mapImageSublayer:l,mapView:s,selectedValue:r,lastDefault:a,portal:n}=e,{onChange:c,symbolStylerPopoverNode:u}=o,p=(0,b.m)(e),m=(0,b.n)(e),d=(0,b.o)(e),g=(0,b.g)(e),f=(0,b.d)(e),w="predominance-size"===f,h=(0,b.c)(g,"size","auto"),z=(0,b.c)(g,"size","outline");let S;S=-1===r?g.defaultSymbol||a.defaultSymbol:g.uniqueValueGroups[0].classes[r].symbol,se(S)||(S=(0,b.e)(e,f),-1===r&&!g.defaultSymbol&&(a.defaultSymbol=S));const v="picture-marker"!==S.type&&!!S.color,E=(0,b.r)(S),V="cim"===S.type&&"CIMPointSymbol"===S.data.symbol.type;let I;if(-1===r)I=C();else{const o=y.getSchemes({basemap:s.map?.basemap,geometryType:(0,b.j)(e),numColors:10});I=(0,b.t)(o).slice(0,16)}const P=j();let x;if((w||p||m)&&h?(0,b.u)(S,(0,k.g)(h,s.scale)):d&&z&&S.outline&&(S.outline.width=(0,k.g)(z,s.scale)),"simple-fill"===S.type){const e=S;x=e.outline?{color:e.outline.color?e.outline.color:new i.default([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!z}:{color:new i.default([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!z}}else if("simple-marker"===S.type){const e=S;x=e.outline?{color:e.outline.color?e.outline.color:new i.default([0,0,0,.5]),size:e.outline.width}:{color:new i.default([0,0,0,.5]),size:1}}else if("cim"===S.type)x=te(S);else if("simple-line"===S.type){const e=S;x={size:e.width,style:e.style,marker:e.marker,color:e.color}}else x={color:new i.default([255,255,255,.5]),size:1};const q=await u.getSymbolStylerElement();let T;return T=A(q,t.clone(S),m?{portal:n,symbolFilter:(0,b.v)(e)?void 0:"simple",sections:{stroke:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:I,extraParts:{style:"cim"!==S.type,arrow:"cim"!==S.type,autoStrokeAdjust:!l&&!w&&"editable",width:!w},parts:{extra:!w||"cim"!==S.type}}},stroke:x}:{portal:n,symbolFilter:d&&!(0,b.v)(e)?"simple":void 0,sections:{marker:V||["simple-marker","picture-marker"].includes(S.type)?{open:!0,parts:{size:!w&&(!!l||{autoSizeAdjust:"editable"})},symbolsOpen:!0,sizeOpen:!w,markerType:(0,b.v)(e)?"all":["simple","picture"]}:void 0,fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:(0,b.x)(S),suggestedColors:I},stroke:{type:"color",optional:!0,suggestedColors:P,extraParts:{style:!["simple-marker","picture-marker","cim"].includes(S.type),width:!0,autoStrokeAdjust:!(l||!d||"cim"===S.type||w)&&"editable"}}},fill:{color:(0,b.i)(S)||le(I[r],.85)},marker:w||p?{size:h?(0,k.g)(h,s.scale):(0,b.w)(S),autoAdjusted:!!h}:void 0,stroke:x,fillEnabled:v,strokeEnabled:E}),u.addEventHandler("arcgisEdit",O.bind(null,({detail:{symbol:l,info:{marker:t,stroke:s}}})=>{const i=(0,b.g)(e);if(-1===r)i.defaultSymbol=l;else{const e=i.uniqueValueGroups[0].classes.slice();e[r].symbol=l,i.uniqueValueGroups[0].classes=e}w?c():Y(e,l,t?.autoAdjusted,s?.autoAdjusted,q,o)})),await T,ee(e,g.uniqueValueGroups[0].classes?.length?g.uniqueValueGroups[0].classes[0].symbol:void 0,q)}async function L(e,o){const{mapView:l,portal:s,_messages:r}=e,{onChange:a,symbolStylerPopoverNode:n}=o,c=(0,b.g)(e),u=c.attributes,p=u.map(e=>e.color),m=d.getSchemes({basemap:l.map?.basemap,geometryType:(0,b.j)(e)||h,numColors:u.length}),y=C(),g=(0,b.k)(m,u.length).map(e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name})),f=(0,b.e)(e);let k;if(f.outline=c.outline,"simple-fill"===f.type)if(f.outline){const e=f.outline;k={color:e.color?e.color:new i.default([0,0,0,.5]),size:e.width,style:e.style}}else k={color:new i.default([0,0,0,.5]),size:1,style:"solid"};else if("simple-marker"===f.type&&f.outline){const e=f.outline;k={color:e.color?e.color:new i.default([0,0,0,.5]),size:e.width,style:e.style}}const w=await n.getSymbolStylerElement(),z=A(w,f,{portal:s,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color-ramp",style:"discrete",open:!0,colorRampsOpen:!0,colorRamps:g},stroke:{type:"color",optional:!0,suggestedColors:y,extraParts:{style:!1,width:!0,autoStrokeAdjust:!1}}},fill:{color:p.reverse()},stroke:k});w.stringOverrides={fillColor:r.styler.color,fillTransparency:r.styler.transparency},n.addEventHandler("arcgisEdit",O.bind(null,({detail:{symbol:o,info:{fill:l}}})=>{const s=t.clone(l.color);s.reverse(),(0,b.g)(e).attributes.forEach((e,o)=>e.color=s[o]),(0,b.g)(e).outline=o.outline.clone(),a()})),await z}async function U(e,o){const{mapView:l,selectedAttribute:t,lastDefault:s,portal:r,_messages:a}=e,{onChange:n,symbolStylerPopoverNode:c}=o,u=(0,b.g)(e),p=u.attributes;let m;m=-1===t?u.othersCategory?.color||s?.otherColor||new i.default([170,170,170,1]):-2===t?u.defaultColor||s?.defaultColor||new i.default([170,170,170,1]):p[t].color;const y=d.getSchemes({basemap:l.map?.basemap,geometryType:(0,b.j)(e)||h,numColors:p.length}),g=(0,b.t)(y).slice(0,16),f=(0,b.e)(e);f.outline=void 0,(0,b.y)(f,m);const k=await c.getSymbolStylerElement(),w=A(k,f,{portal:r,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:g}},fill:{color:m}});k.stringOverrides={fillColor:a.styler.color,fillTransparency:a.styler.transparency},c.addEventHandler("arcgisEdit",O.bind(null,({detail:{symbol:o}})=>{-1===t?(0,b.g)(e).othersCategory?(0,b.g)(e).othersCategory.color=(0,b.i)(o):(0,b.g)(e).othersCategory={color:(0,b.i)(o),label:s?.otherLabel||a.styler.other,threshold:s?.threshold??0}:-2===t?(0,b.g)(e).defaultColor=(0,b.i)(o):(0,b.g)(e).attributes[t].color=(0,b.i)(o),n()})),await w}async function K(e,o){const{mapView:l,portal:t,_messages:s}=e,{onChange:i,symbolStylerPopoverNode:r}=o,a=(0,b.g)(e).attributes,n=a.map(e=>e.color),c=p.getSchemes({basemap:l.map?.basemap,numColors:a.length}),u=(0,b.k)(c,a.length).map(e=>({stops:e.colors,tags:e.scheme.tags,name:e.scheme.name})),m=await r.getSymbolStylerElement(),d=A(m,(0,b.e)(e),{portal:t,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color-ramp",style:"discrete",open:!0,colorRampsOpen:!0,colorRamps:u}},fill:{color:n}});m.stringOverrides={fillColor:s.styler.dotColor,fillTransparency:s.styler.dotTransparency},r.addEventHandler("arcgisEdit",O.bind(null,({detail:{info:{fill:o}}})=>{(0,b.g)(e).attributes.forEach((e,l)=>e.color=o.color[l]),i()})),await d}async function Q(e,o){const{mapView:l,portal:t,_messages:s}=e,{onChange:i,symbolStylerPopoverNode:r,selectedAttribute:a}=o,n=(0,b.g)(e).attributes,c=p.getSchemes({basemap:l.map?.basemap,numColors:n.length}),u=(0,b.t)(c).slice(0,16),m=await r.getSymbolStylerElement(),d=A(m,(0,b.e)(e),{portal:t,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:u}},fill:{color:n[a].color}});m.stringOverrides={fillColor:s.styler.dotColor,fillTransparency:s.styler.dotTransparency},r.addEventHandler("arcgisEdit",O.bind(null,({detail:{symbol:o}})=>{(0,b.g)(e).attributes[a].color=(0,b.i)(o),i()})),await d}async function X(e,o){const{mapView:l,portal:s,_messages:i}=e,{onChange:r,symbolStylerPopoverNode:a}=o,n=(0,b.g)(e).colorStops,u=n.filter((e,o)=>o>=3).map(e=>e.color),p=await c.getBackgroundColorTheme(l),d=m.getSchemes({basemapTheme:p}),y=(0,b.k)(d,n.length).map(e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name})),g=await a.getSymbolStylerElement(),f=A(g,(0,b.e)(e),{portal:s,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color-ramp",style:"continuous",open:!0,colorRampsOpen:!0,colorRamps:y,parts:{transparency:!1}}},fill:{color:u.reverse()}});g.stringOverrides={fillTransparency:i.styler.transparency},a.addEventHandler("arcgisEdit",O.bind(null,({detail:{info:{fill:o}}})=>{const l=t.clone(o.color);l.reverse();const s=Math.max(n.length-l.length,0);(0,b.g)(e).colorStops.forEach((e,o)=>{const i=e.color.a;e.color=o<=s-2||o<=s?t.clone(l[0]):t.clone(l[o-s]),e.color.a=i}),r()})),await f}function Y(e,o,l,t,s,i){const r=(0,b.m)(e),n=(0,b.n)(e);r?Z(e,l,(0,b.w)(o),o,s,i):n?Z(e,t,(0,b.w)(o),o,s,i):function(e,o,l,t,s,i){const{mapView:r}=e,{onChange:a}=i,n=(0,b.g)(e),c=(0,b.c)(n,"size","outline");o&&!c?(0,w.a)(e).then(o=>{if(o){const l=(0,b.g)(e);l.visualVariables=l.visualVariables||[],l.visualVariables.push(o),oe(o,r.scale,t,s)}a()}):!o&&c?(n.visualVariables=n.visualVariables.filter(e=>!("size"===e.type&&"outline"===e.target)),n.visualVariables&&!n.visualVariables.length&&(n.visualVariables=void 0),a()):(o&&function(e,o,l){const{mapView:t}=e,{onChange:s}=l,i=t.scale,r=(0,b.g)(e),a=(0,b.c)(r,"size","outline"),n=a.stops;if(0!==o&&0===n[n.length-2].size)(0,w.a)(e).then(l=>{if(l){const t=(0,k.g)(l,i);$(l,(0===o?Math.max(.5,o):o)/(0===t?Math.max(.5,t):t));const r=(0,b.H)((0,b.g)(e),"size","outline")||[];r.push(l),(0,b.g)(e).visualVariables=r,s(),setTimeout(()=>{},2e3)}});else{const e=(0,k.g)(a,i),l=(0===o?Math.max(.5,o):o)/(0===e?Math.max(.5,e):e);$(a,l),(0===o||0===e)&&(function(e,o,l){const t=e.stops,s=t.length-1,i=t[0].value,r=t[s].value;if(o<=i){for(let e=0;e<=s;e++)t[e].size=l;return}if(o>=r)return void(t[s].size=l);for(let e=0;e<s;e++){const i=t[e],r=t[e+1];if(o>=i.value&&o<r.value){for(let o=e+1;o<=s;o++)t[o].size=l;break}}}(a,i,o),a.stops.forEach((e,o)=>{o>0&&e.size===a.stops[o-1].size&&(o===a.stops.length-1?o>1&&(a.stops[o-1].size=(a.stops[o-2].size+e.size)/2):e.size=(a.stops[o+1].size+a.stops[o-1].size)/2)}))}}(e,l,i),a())}(e,t,"cim"===o.type?(0,b.G)(o):(0,b.w)(o.outline||new a.default),o,s,i)}function Z(e,o,l,t,s,i){const{mapView:r}=e,{onChange:a}=i,n=(0,b.g)(e);l=Math.max(l,.1);const c=(0,b.c)(n,"size","auto");if(o&&!c)(0,w.b)(e).then(o=>{if(o){const l=(0,b.g)(e);if(l.visualVariables=l.visualVariables||[],l.visualVariables.push(o),(0,b.B)(t)){$(o,(0,b.w)(t)/(0,k.g)(o,r.scale))}oe(o,r.scale,t,s)}a()});else if(!o&&c){const e=(0,b.H)(n,"size","auto");n.visualVariables=e?.length?e:void 0,a()}else o&&function(e,o){const{mapView:l}=e,t=l.scale,s=(0,b.g)(e),i=(0,b.c)(s,"size","auto"),r=(0,k.g)(i,t),a=o/r;$(i,a)}(e,l),a()}function $(e,o){e.stops?.forEach(e=>{e.size*=o})}function ee(e,o,l,t){const{mapView:i}=e;let r;return s.when(()=>i.stationary,()=>{const s=i.scale;if(r!==s){const i=(0,b.g)(e),a=(0,b.c)(i,"size","simple-fill"===o.type?"outline":"auto");a&&oe(a,s,o,l,t),r=s}})}function oe(e,o,l,t,s){const i=(0,k.g)(e,o),r=["simple-line","simple-fill"].includes(l.type)||(0,b.B)(l)?"stroke":"marker";t.setSize(r,i),s?.(i)}function le(e,o){return e&&(e.a=o),e}function te(e){if((0,b.B)(e))return{color:(0,b.i)(e)?.clone()||new i.default([255,255,255,.5]),size:(0,b.w)(e)??1};{const o=(0,b.C)(e);return{color:o?.color?new i.default(o?.color):new i.default([255,255,255,.5]),size:o?.width??1}}}function se(e){return["simple-fill","simple-marker","simple-line","picture-marker","cim"].includes(e?.type)}function ie(e){return["simple-fill","simple-marker","simple-line","cim"].includes(e.type)}}}]);