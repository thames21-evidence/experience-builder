/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_com-dabb92.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_com-dabb92"],{11751:(e,a,t)=>{t.d(a,{a:()=>c,c:()=>d,g:()=>m});var o=t(5294),s=t(56451),i=t(42411),n=t(1225),r=(t(54312),t(44345),t(55448),t(52797),t(34031),t(63438),t(5933),t(89704),t(66228)),l=(t(31521),t(23054),t(5077),t(23795),t(17902),t(87420),t(30161),t(81734),t(83552),t(77462),t(49403),t(66617),t(10628),t(59640),t(64451),t(6176),t(10454),t(28973));t(94916),t(52554),t(2156),t(4038),t(49851),t(75054),t(15223),t(70169),t(29614),t(47207),t(70852),t(48103),t(39423),t(85681),t(18444),t(9767),t(38218),t(91914),t(86605),t(68196),t(440),t(46547),t(28927),t(6238),t(7299);async function c(e,a){const{layer:t,useFeatureReduction:o,mapImageSublayer:s,mapView:c}=e,d=t;a=a||{};const m=(0,n.d)(e),p=(0,n.a)(e,(0,n.g)(e)),u=a.fieldInfos?a.fieldInfos[0]:null,g=a.theme?a.theme:"high-to-low",h={layer:d,view:c,field:u.field,valueExpression:u.expression,valueExpressionTitle:u.expressionTitle,normalizationField:a.normalizationField,theme:g,legendOptions:a.legendOptions,colorOptions:{colorScheme:a.colorScheme||(0,n.a2)(e,g),isContinuous:!!(0,r.i)(a.isContinuous)&&a.isContinuous},symbolOptions:(0,n.n)(e)?void 0:{symbolStyle:a.symbolOptions||"caret"},symbols:a.symbols||void 0,minValue:a.min,maxValue:a.max,sizeOptimizationEnabled:!s&&"above-and-below"!==g&&(!!(0,r.i)(a.sizeOptimizationEnabled)&&a.sizeOptimizationEnabled),defaultSymbolEnabled:!1,forBinning:o};return await i.createContinuousRenderer(h).then(t=>{if(!a.noReuse&&["color","color-size","color-size-age"].includes(m)&&(0,l.s)(e,a)){const a=(0,n.c)((0,n.g)(e),"color"),o=(0,n.p)((0,n.g)(e),"color");a&&o&&g===o.univariateTheme&&(t.renderer.visualVariables=[a],p.sizeOutlineVisVar&&t.renderer.visualVariables.push(p.sizeOutlineVisVar),t.renderer.authoringInfo.visualVariables=[o],(0,n.Q)(e,t.renderer))}return(0,n.b)(p,t.renderer),t})}async function d(e,a){const{layer:t,useFeatureReduction:l,mapImageSublayer:c,mapView:d}=e,m=t;a=a||{};const p=(0,n.g)(e),u=(0,n.c)(p,"color");if(u&&a.fieldInfos?.[0]&&a.fieldInfos?.[0].field===u.field&&a.fieldInfos?.[0].expression===u.valueExpression&&a.normalizationField===u.normalizationField&&(delete a.fieldInfos,(0,n.O)(a)))return{renderer:p.clone()};const g=(0,n.a)(e,p),h=(0,n.c)(p,"size"),b=p.authoringInfo,y=(0,n.p)(p,"size"),f=a.fieldInfos?a.fieldInfos[0]:u?{field:u.field,expression:u.valueExpression,expressionTitle:u.valueExpressionTitle,simpleFieldType:(0,n.K)(e,u.field)?.simpleFieldType||n.J.NUMBER}:{field:p.field,expression:p.valueExpression,expressionTitle:p.valueExpressionTitle,simpleFieldType:(0,n.K)(e,p.field)?.simpleFieldType||n.J.NUMBER},S=null===a.normalizationField?void 0:a.normalizationField?a.normalizationField:u?u.normalizationField:p.normalizationField,v=a.theme?a.theme:b?b.univariateTheme:"high-to-low",z="above-and-below"===b.univariateTheme,B="above-and-below"===v,k="custom"===b.univariateSymbolStyle;"custom"===a.symbolStyle&&!a.symbols&&(1===p.classBreakInfos.length?a.symbols=[o.clone(p.classBreakInfos[0].symbol),o.clone(p.classBreakInfos[0].symbol)]:a.symbols=[o.clone(p.classBreakInfos[0].symbol),o.clone(p.classBreakInfos[1].symbol)]);const I=(0,r.i)(a.isContinuous)?a.isContinuous:!(!z&&B)&&!!u,w="picture-marker"===p.classBreakInfos[0].symbol?.type||"picture-marker"===p.classBreakInfos[2===p.classBreakInfos.length?1:0].symbol?.type,$=!z&&B||w&&I?"caret":B?a.symbolStyle?["single","custom"].includes(a.symbolStyle)?void 0:a.symbolStyle:a.symbols?void 0:"custom"!==b.univariateSymbolStyle?b.univariateSymbolStyle:void 0:void 0,N=!(w&&I)&&("custom"===a.symbolStyle||!a.symbolStyle&&k);let M=B&&!(0,n.n)(e)?{symbolStyle:$,symbols:$?void 0:2===a.symbols?.length?{below:a.symbols[0],above:a.symbols[1]}:1===a.symbols?.length?void 0:N?{below:p.classBreakInfos[0].symbol,above:p.classBreakInfos[2===p.classBreakInfos.length?1:0].symbol}:void 0}:void 0;!M?.symbolStyle&&!M?.symbols&&(M=void 0),I&&M?.symbols&&((0,n.y)(M?.symbols.below,new s.default([0,0,0,.5])),(0,n.y)(M?.symbols.above,new s.default([0,0,0,.5])));const C=p.defaultSymbol,U=p.defaultLabel,x=p.backgroundFillSymbol;let E=!1;v===b?.univariateTheme&&(0,r.i)(h.minSize)&&(E=h.minSize.stops?h.minSize.stops[0].size>h.maxSize.stops[0].size:h.minSize>h.maxSize);let q=!1;(null===a.normalizationField||a.normalizationField||a.fieldInfos?.[0])&&(q=!0);const O=B&&!z||!B&&z,T=a.discardMinMax?void 0:(0,r.i)(a.min)?a.min:q?void 0:y?y.minSliderValue:void 0,R=a.discardMinMax?void 0:(0,r.i)(a.max)?a.max:q?void 0:y?y.maxSliderValue:void 0,F="below"===b.univariateTheme,P="below"===v,V=P&&!F||!P&&F,_=a.colorScheme||!O&&(0,n.a2)(e,v),D={layer:m,view:d,field:f.field,valueExpression:f.expression,valueExpressionTitle:f.expressionTitle,theme:v,legendOptions:a.legendOptions||h.legendOptions,colorOptions:{colorScheme:_,isContinuous:I},symbolOptions:M,normalizationField:S,minValue:T,maxValue:R,sizeOptimizationEnabled:!c&&"above-and-below"!==v&&((0,r.i)(a.sizeOptimizationEnabled)?a.sizeOptimizationEnabled:!!g.sizeAutoVisVar),defaultSymbolEnabled:(0,r.i)(a.defaultSymbolEnabled)?a.defaultSymbolEnabled:!!p.defaultSymbol,forBinning:l};return await i.createContinuousRenderer(D).then(e=>{if(a.discardMinMax){const a=(0,n.c)(p,"color"),t=(0,n.c)(e.renderer,"color");a?.stops.forEach((e,a)=>e.value=t?.stops[a].value);const o=(0,n.c)(p,"size"),s=(0,n.c)(e.renderer,"size");"above-and-below"===b.univariateTheme?o.stops?.forEach((e,a)=>{s.stops&&(e.value=s.stops[a].value)}):(o.minDataValue=s.minDataValue,o.maxDataValue=s.maxDataValue)}if((0,n.b)(g,e.renderer),B){const t=(0,n.i)(e.renderer.classBreakInfos[0].symbol),i=e.renderer.classBreakInfos[1]?(0,n.i)(e.renderer.classBreakInfos[1].symbol):t;if(!$)if(1===a.symbols?.length&&1===e.renderer.classBreakInfos.length)e.renderer.classBreakInfos[0].symbol=a.symbols[0];else if(2===a.symbols?.length&&1===e.renderer.classBreakInfos.length){const a=o.clone(p.classBreakInfos[0].symbol);e.renderer.classBreakInfos[0].symbol=a}else if("single"===a.symbolStyle&&2===e.renderer.classBreakInfos.length){const a=o.clone(p.classBreakInfos[0].symbol);e.renderer.classBreakInfos[0].symbol=a.clone(),(0,n.y)(a,(0,n.i)(e.renderer.classBreakInfos[1].symbol)),e.renderer.classBreakInfos[1].symbol=a,e.renderer.authoringInfo.univariateSymbolStyle=void 0}else{let a=o.clone(p.classBreakInfos[0].symbol);e.renderer.classBreakInfos[0].symbol=a,e.renderer.classBreakInfos[1]&&(a=p.classBreakInfos[1]?o.clone(p.classBreakInfos[1].symbol):o.clone(p.classBreakInfos[0].symbol),e.renderer.classBreakInfos[1].symbol=a)}const r=(0,n.c)(e.renderer,"color");if(r){const a=new s.default([0,0,0,.5]);(0,n.y)(e.renderer.classBreakInfos[0].symbol,a),e.renderer.classBreakInfos[1]&&(0,n.y)(e.renderer.classBreakInfos[1].symbol,a)}else u||r?((0,n.y)(e.renderer.classBreakInfos[0].symbol,t),e.renderer.classBreakInfos[1]&&(0,n.y)(e.renderer.classBreakInfos[1].symbol,i)):((0,n.y)(e.renderer.classBreakInfos[0].symbol,(0,n.i)(p.classBreakInfos[0].symbol)),(0,n.y)(e.renderer.classBreakInfos[1].symbol,(0,n.i)(p.classBreakInfos[1].symbol)))}else B||(1===a.symbols?.length?e.renderer.classBreakInfos[0].symbol=a.symbols[0]:1===p.classBreakInfos?.length&&(e.renderer.classBreakInfos[0].symbol=p.classBreakInfos[0].symbol));if(z&&B&&!q){const a=(0,n.c)(e.renderer,"size"),t=(0,n.c)(e.renderer,"color");a.stops=o.clone(h.stops),t&&t.stops.forEach((e,a)=>{e.value=h.stops[a].value}),2===e.renderer.classBreakInfos.length&&(e.renderer.classBreakInfos[0].maxValue=h.stops[2].value,e.renderer.classBreakInfos[1].minValue=h.stops[2].value)}if(V&&_&&u){const a=(0,n.c)(e.renderer,"color"),t=u.stops.length-1;a.stops.forEach((e,a)=>{e.color=u.stops[t-a].color})}if(C&&(e.renderer.defaultSymbol=C,e.renderer.defaultLabel=U),e.renderer.backgroundFillSymbol=x||void 0,E){const a=(0,n.c)(e.renderer,"size"),t=a.minSize;a.minSize=a.maxSize,a.maxSize=t}return e})}function m(e){const{mapView:a}=e,t=(0,n.g)(e),o=(0,n.c)(t,"color"),s=(0,n.c)(t,"size"),i=a.scale,{minSize:r,maxSize:l}=s;let c;if(s.stops)c=o.stops.map((e,a)=>{const t=s.stops[a];return{color:e.color,size:t.size,value:t.value}});else{const e=o.stops.length-1;if("number"==typeof r)c=o.stops.map((a,t)=>({color:a.color,value:a.value,size:0===t?r:t===e?l:null}));else{let a,t;const n=r.stops.length-1;i>r.stops[n].value?(a=r.stops[n].size,t=l.stops[n].size):r.stops.forEach((e,o)=>{i<=e.value&&(a=e.size,t=l.stops[o].size)});const d=s.minDataValue,m=s.maxDataValue,p=(m-d)/4;c=o.stops.map((o,s)=>({color:o.color,value:0===s?d:s===e?m:d+s*p,size:0===s?a:s===e?t:void 0}))}}return c}},75518:(e,a,t)=>{let o,s;function i(e){e.loading=!1}async function n(e,a){return function(e){e.loading=!0,s=!1,o&&clearTimeout(o),o=setTimeout(()=>{i(e),s=!0},6e4)}(a),await e.then(e=>{if(i(a),s)throw new Error("timeout");return e}).catch(e=>{throw i(a),e})}t.d(a,{r:()=>n})},82981:(e,a,t)=>{t.r(a),t.d(a,{ArcgisMapConfigSmartMappingPanelsColorSizeUnivariate:()=>g});var o=t(73679),s=t(4395),i=t(5294),n=t(1225),r=t(89989),l=(t(44345),t(55448),t(52797),t(34031),t(63438),t(5933),t(75518)),c=(t(89704),t(18423),t(96086),t(91813),t(21255),t(13078),t(21303),t(12627),t(56451),t(31521),t(23054),t(5077),t(23795),t(17902),t(87420),t(30161),t(81734),t(65595)),d=(t(54312),t(77462),t(49403),t(66617),t(10628),t(59640),t(64451),t(6176),t(10454),t(29614),t(94916),t(52554),t(2156),t(4038),t(49851),t(75054),t(15223),t(70169),t(47207),t(70852),t(48103),t(39423),t(85681),t(18444),t(11751)),m=(t(9767),t(38218),t(91914),t(86605),t(68196),t(440),t(46547),t(28927),t(6238),t(7299),t(85643)),p=t(73801);const u=s.AH`:host{width:100%;display:none}:host([selected]){display:flex}.flow-item{height:100%}.color-size-univariate-block{overflow-x:hidden}.attribute-name{word-break:break-all}.symbol-above-and-below{display:flex;justify-content:space-between}.above-below-symbol-button{width:49%}.legend-toggle-padding{padding-top:12px;padding-bottom:12px}`;class g extends p.WF{constructor(){super(...arguments),this.flowItemNode=(0,m._)(),this.themeButtonNode=(0,m._)(),this.symbolButtonNode=(0,m._)(),this.continuousNode=(0,m._)(),this.binaryNode=(0,m._)(),this.sizeRangeSliderNode=(0,m._)(),this.rotationNode=(0,m._)(),this.smartMappingState=(0,c.u)(),this.visualizationOpen=!1,this.menuOpen=!1,this.showBackButton=!1,this.selected=!1,this.arcgisSmartMappingPanelsColorSizeUnivariateBackClick=(0,p.lh)(),this.arcgisSmartMappingPanelsColorSizeUnivariateClose=(0,p.lh)(),this.arcgisSmartMappingPanelsColorSizeUnivariateError=(0,p.lh)(),this.smartMappingCompleteClose=(0,p.lh)()}static{this.properties={visualizationOpen:16,menuOpen:5,showBackButton:5,selected:7,beforeBack:0}}static{this.styles=u}async setFocus(){await(this.flowItemNode.value?.setFocus())}load(){this.visualizationOpen=!0;const{layer:e}=this.smartMappingState,a=(0,n.g)(this.smartMappingState);this.originalRendererJSON=a.toJSON(),this.originalFeatureReduction="featureReduction"in e&&e.featureReduction?i.clone(e.featureReduction):void 0}async loaded(){requestAnimationFrame(async()=>await(this.flowItemNode.value?.setFocus())),this.scaleHandle=(0,r.w)(this.smartMappingState,this.flowItemNode.value,()=>this.smartMappingCompleteClose.emit("cancel"))}disconnectedCallback(){super.disconnectedCallback(),this.scaleHandle?.remove()}symbolPairButtonRefHandler(e){e&&(this.symbolPairButtonNode=e)}sliderRefHandler(e){e&&(this.sliderNode=e)}handleDone(){this.arcgisSmartMappingPanelsColorSizeUnivariateClose.emit("save")}handleCancel(){const{originalRendererJSON:e,originalFeatureReduction:a,smartMappingState:t}=this;(0,n.a8)(t,e,a),this.arcgisSmartMappingPanelsColorSizeUnivariateClose.emit("cancel")}handleColorSchemeChange(e){const{smartMappingState:a}=this;(0,l.r)((0,d.c)(a,{isContinuous:"continuous"===e}),this.flowItemNode.value).then(e=>{(0,n.a4)(a,e.renderer),this.requestUpdate(),this.sliderNode&&this.sliderNode.manager.component.requestUpdate(),(0,n.f)()},e=>{this.continuousNode.value.checked?(this.continuousNode.value.checked=!1,this.binaryNode.value.checked=!0):(this.binaryNode.value.checked=!1,this.continuousNode.value.checked=!0),this.arcgisSmartMappingPanelsColorSizeUnivariateError.emit(e)})}handleIncludeInLegendToggle(){const{smartMappingState:e}=this,a=(0,n.g)(e),t=(0,n.c)(a,"color"),o=(0,n.c)(a,"size"),s=o.legendOptions;s&&!1===s.showLegend?(s.title?s.showLegend=!0:o.legendOptions=void 0,t?.legendOptions?.title?t.legendOptions.showLegend=!0:t&&(t.legendOptions=void 0)):(o.legendOptions=s||{},o.legendOptions.showLegend=!1,t&&(t.legendOptions=s||{},t.legendOptions.showLegend=!1)),(0,n.a4)(e)}render(){const{layer:e,hideLayerTitle:a,_messages:t}=this.smartMappingState;return this.el.classList.add("calcite-match-height"),s.qy`<calcite-flow-item .heading=${t.panels.styleOptions} .description=${a?void 0:e.title} class="flow-item" .closable=${(0,n.aa)(this.el)} .showBackButton=${this.showBackButton} .selected=${this.selected} @calciteFlowItemClose=${this.handleDone} @calciteFlowItemBack=${e=>{e.stopPropagation(),this.arcgisSmartMappingPanelsColorSizeUnivariateBackClick.emit()}} ${(0,m.K)(this.flowItemNode)}>${this.renderDoneButton()}${this.renderCancelButton()}${this.renderVisualization()}${this.renderTransparency()}${this.renderRotation()}</calcite-flow-item>`}renderDoneButton(){const{layer:e,_messages:a}=this.smartMappingState;return e?s.qy`<calcite-button slot=footer .label=${a.done} @click=${this.handleDone} appearance=solid width=half>${a.done}</calcite-button>`:""}renderCancelButton(){const{layer:e,_messages:a}=this.smartMappingState;return e?s.qy`<calcite-button slot=footer .label=${a.cancel} @click=${this.handleCancel} appearance=outline-fill width=half>${a.cancel}</calcite-button>`:""}renderVisualization(){const{visualizationOpen:e,smartMappingState:a}=this,{_messages:t}=a,o=(0,n.g)(a),i=(0,n.c)(o,"color"),r=i?i.field?(0,n.K)(a,i.field)?.label:i.valueExpressionTitle||t.expression:o.field?(0,n.K)(a,o.field)?.label:o.valueExpressionTitle||t.expression;return s.qy`<calcite-block class="color-size-univariate-block" .heading=${t.panels.colorSizeUnivariate.colorSizeStyle} collapsible .expanded=${e} @calciteBlockOpen=${()=>this.visualizationOpen=!0} @calciteBlockClose=${()=>this.visualizationOpen=!1}><calcite-label class="attribute-name">${r}</calcite-label>${this.renderTheme()}${this.renderDividedBy()}${this.renderSymbolPairButton()}${this.renderAboveAndBelowSymbols()}${this.renderColorScheme()}${this.renderSymbol()}${this.renderColorSizeSlider()}${this.renderRegenerateStyle()}${this.renderSizeRange()}${this.renderBackgroundStyle()}${this.renderDefaultSymbol()}${this.renderShowInLegend()}</calcite-block>`}renderTheme(){const{smartMappingState:e}=this;return s.qy`<arcgis-map-config-smart-mapping-theme-button renderer-subtype=colorSize @arcgisSmartMappingThemeButtonBeforeOpen=${()=>(0,n.f)()} @arcgisSmartMappingThemeButtonChange=${a=>{const t="above-and-below"===(0,n.g)(e).authoringInfo.univariateTheme,o="above-and-below"===a.detail;let s=d.c;!t&&o&&(s=d.a),(0,l.r)(s(e,{theme:a.detail,fieldInfos:(0,n._)(e),discardMinMax:!0}),this.flowItemNode.value).then(a=>{(0,n.a4)(e,a.renderer),this.requestUpdate(),this.themeButtonNode.value&&this.themeButtonNode.value.manager.component.requestUpdate(),this.rotationNode.value&&this.rotationNode.value.manager.component.requestUpdate(),this.sizeRangeSliderNode.value.manager.component.requestUpdate(),this.sliderNode&&(this.sliderNode.manager.component.requestUpdate(),this.sliderNode.updateStatistics())},e=>{this.themeButtonNode.value.manager.component.requestUpdate(),this.arcgisSmartMappingPanelsColorSizeUnivariateError.emit(e)})}} ${(0,m.K)(this.themeButtonNode)}></arcgis-map-config-smart-mapping-theme-button>`}renderDividedBy(){const{smartMappingState:e}=this,{fields:a}=e,t=(0,n.g)(e),o=(0,n.d)(e);if(["color-age","color-age-size"].includes(o))return"";const i=(0,n._)(e)[0];if(i.expression||i.simpleFieldType!==n.J.NUMBER||(0,n.ae)(e,a).number<2)return"";const r=(0,n.c)(t,"color");return s.qy`<arcgis-map-config-smart-mapping-divided-by renderer-subtype=color .normalizationField=${r?.normalizationField??t.normalizationField??void 0} @arcgisSmartMappingDividedByChange=${()=>{this.requestUpdate(),this.sliderNode.updateStatistics()}} @arcgisSmartMappingDividedByError=${e=>this.arcgisSmartMappingPanelsColorSizeUnivariateError.emit(e.detail)}></arcgis-map-config-smart-mapping-divided-by>`}renderSymbolPairButton(){const{smartMappingState:e}=this;return(0,n.n)(e)||"above-and-below"!==(0,n.g)(e).authoringInfo.univariateTheme?"":s.qy`<arcgis-map-config-smart-mapping-symbol-pair-button symbol-type=above-and-below @arcgisSmartMappingSymbolPairButtonBeforeOpen=${()=>(0,n.f)()} @arcgisSmartMappingSymbolPairButtonChange=${()=>{this.requestUpdate(),this.sliderNode&&this.sliderNode.manager.component.requestUpdate(),this.rotationNode.value&&this.rotationNode.value.manager.component.requestUpdate(),this.symbolButtonNode.value&&this.symbolButtonNode.value.manager.component.requestUpdate(),this.symbolPairButtonNode&&this.symbolPairButtonNode.manager.component.requestUpdate()}} @arcgisSmartMappingSymbolPairButtonError=${e=>this.arcgisSmartMappingPanelsColorSizeUnivariateError.emit(e.detail)} ${(0,m.K)(this.symbolPairButtonRefHandler)}></arcgis-map-config-smart-mapping-symbol-pair-button>`}renderAboveAndBelowSymbols(){const{smartMappingState:e}=this,{_messages:a}=e,t=(0,n.g)(e),o=t.authoringInfo;if("above-and-below"!==o.univariateTheme||!o.univariateSymbolStyle||2!==t.classBreakInfos?.length)return"";const i=(0,n.c)(t,"color"),r=(0,n.K)(e,i?.field||t.field)?.simpleFieldType===n.J.DATE,l=t.classBreakInfos[1].symbol,c=t.classBreakInfos[0].symbol;return s.qy`<div class="symbol-above-and-below"><arcgis-map-config-smart-mapping-symbol-button class="above-below-symbol-button" .popoverReferenceElement=${this.flowItemNode.value} .symbol=${c} type=below .label=${r?a.panels.colorSizeUnivariate.before:a.panels.colorSizeUnivariate.below} @arcgisSmartMappingSymbolButtonSymbolChange=${()=>{this.requestUpdate(),this.symbolPairButtonNode&&this.symbolPairButtonNode.manager.component.requestUpdate(),this.sliderNode&&this.sliderNode.manager.component.requestUpdate(),this.rotationNode.value&&this.rotationNode.value.manager.component.requestUpdate()}}></arcgis-map-config-smart-mapping-symbol-button><arcgis-map-config-smart-mapping-symbol-button class="above-below-symbol-button" .popoverReferenceElement=${this.flowItemNode.value} .symbol=${l} type=above .label=${r?a.panels.colorSizeUnivariate.after:a.panels.colorSizeUnivariate.above} @arcgisSmartMappingSymbolButtonSymbolChange=${()=>{this.requestUpdate(),this.symbolPairButtonNode&&this.symbolPairButtonNode.manager.component.requestUpdate(),this.sliderNode&&this.sliderNode.manager.component.requestUpdate(),this.rotationNode.value&&this.rotationNode.value.manager.component.requestUpdate()}}></arcgis-map-config-smart-mapping-symbol-button></div>`}renderColorScheme(){const{smartMappingState:e}=this,{_messages:a}=e,t=(0,n.g)(e);if("above-and-below"!==t.authoringInfo.univariateTheme)return"";const o=(0,n.c)(t,"color");return s.qy`<calcite-label>${a.panels.colorSizeUnivariate.colorScheme}<calcite-segmented-control scale=s width=full @calciteSegmentedControlChange=${e=>{e.stopPropagation(),this.handleColorSchemeChange(e.target.selectedItem.value)}}><calcite-segmented-control-item .checked=${!!o} value=continuous ${(0,m.K)(this.continuousNode)}>${a.panels.colorSizeUnivariate.continuous}</calcite-segmented-control-item><calcite-segmented-control-item .checked=${!o} value=binary ${(0,m.K)(this.binaryNode)}>${a.panels.colorSizeUnivariate.binary}</calcite-segmented-control-item></calcite-segmented-control></calcite-label>`}renderSymbol(){const{smartMappingState:e}=this,a=(0,n.g)(e),t=(0,n.c)(a,"color"),o=a.classBreakInfos;let i;return t?i=t.stops.map(e=>{const a=e.color.clone();return a.a=1,a}):o?.length&&(i=o.map(e=>(0,n.i)(e.symbol))),s.qy`<arcgis-map-config-smart-mapping-symbol-button .colors=${i} type=color-ramp .rampType=${t?"continuous":"discrete"} @arcgisSmartMappingSymbolButtonSymbolChange=${()=>{this.requestUpdate(),this.sliderNode?.manager.component.requestUpdate(),this.rotationNode.value&&this.rotationNode.value.manager.component.requestUpdate()}} ${(0,m.K)(this.symbolButtonNode)}></arcgis-map-config-smart-mapping-symbol-button>`}renderColorSizeSlider(){return s.qy`<arcgis-map-config-smart-mapping-color-size-slider @arcgisSmartMappingColorSizeSliderChange=${()=>{this.requestUpdate(),this.sliderNode&&this.sliderNode.manager.component.requestUpdate()}} @arcgisSmartMappingColorSizeSliderError=${e=>this.arcgisSmartMappingPanelsColorSizeUnivariateError.emit(e.detail)} ${(0,m.K)(this.sliderRefHandler)}></arcgis-map-config-smart-mapping-color-size-slider>`}renderRegenerateStyle(){const{smartMappingState:e}=this,{mapImageSublayer:a}=e;return a?"":s.qy`<arcgis-map-config-smart-mapping-regenerate-style @arcgisRendererRegenerate=${()=>{this.requestUpdate(),this.sliderNode&&(this.sliderNode.manager.component.requestUpdate(),this.sliderNode.updateStatistics()),this.sizeRangeSliderNode.value.manager.component.requestUpdate()}}></arcgis-map-config-smart-mapping-regenerate-style>`}renderSizeRange(){return s.qy`<arcgis-map-config-smart-mapping-size-range-slider @arcgisSmartMappingSizeRangeSliderError=${e=>this.arcgisSmartMappingPanelsColorSizeUnivariateError.emit(e.detail)} ${(0,m.K)(this.sizeRangeSliderNode)}></arcgis-map-config-smart-mapping-size-range-slider>`}renderBackgroundStyle(){const{smartMappingState:e}=this,a=(0,n.d)(e);return(0,n.o)(e)&&"color-size"===a?s.qy`<arcgis-map-config-smart-mapping-background-symbol></arcgis-map-config-smart-mapping-background-symbol>`:""}renderDefaultSymbol(){return s.qy`<arcgis-map-config-smart-mapping-default-symbol @arcgisSmartMappingDefaultSymbolBeforeToggle=${()=>(0,n.f)()} @arcgisSmartMappingDefaultSymbolChange=${()=>this.symbolButtonNode.value.manager.component.requestUpdate()}></arcgis-map-config-smart-mapping-default-symbol>`}renderShowInLegend(){const{smartMappingState:e}=this,{_messages:a}=e,t=(0,n.g)(e),o=(0,n.c)(t,"color")?.legendOptions,i=!o||!1!==o.showLegend;return s.qy`<calcite-label class="legend-toggle-padding" layout=inline-space-between>${a.panels.colorSizeUnivariate.includeInLegend}<calcite-switch .checked=${i} @calciteSwitchChange=${()=>this.handleIncludeInLegendToggle()}></calcite-switch></calcite-label>`}renderTransparency(){const{smartMappingState:e}=this,a=(0,n.g)(e),t=(0,n.c)(a,"opacity");return s.qy`<arcgis-map-config-smart-mapping-transparency .open=${!!t} @arcgisSmartMappingSymbolTransparencyError=${({detail:e})=>this.arcgisSmartMappingPanelsColorSizeUnivariateError.emit(e)}></arcgis-map-config-smart-mapping-transparency>`}renderRotation(){const{smartMappingState:e}=this,a=(0,n.g)(e),t=(0,n.c)(a,"opacity"),o=(0,n.c)(a,"rotation");return s.qy`<arcgis-map-config-smart-mapping-rotation .open=${!t&&!!o} @arcgisSmartMappingRotationError=${({detail:e})=>this.arcgisSmartMappingPanelsColorSizeUnivariateError.emit(e)} ${(0,m.K)(this.rotationNode)}></arcgis-map-config-smart-mapping-rotation>`}}(0,o.c)("arcgis-map-config-smart-mapping-panels-color-size-univariate",g)},89989:(e,a,t)=>{t.d(a,{w:()=>i});var o=t(54312),s=t(1225);t(44345),t(55448),t(52797),t(34031),t(63438),t(5933),t(28927),t(83368),t(89704),t(5294),t(18423),t(96086),t(91813),t(21255),t(13078),t(21303),t(12627),t(56451),t(31521),t(23054),t(5077),t(23795),t(17902),t(87420),t(30161),t(81734),t(75698),t(10628),t(59640),t(64451),t(6176),t(83552),t(77462),t(49403),t(10281),t(83930),t(66617),t(10454),t(29614),t(94916),t(52554),t(2156),t(4038),t(49851),t(75054),t(15223),t(70169),t(47207),t(70852),t(48103),t(39423),t(85681),t(18444),t(42411),t(9767),t(38218),t(91914),t(86605),t(68196),t(440),t(46547),t(6238),t(7299);function i(e,a,t){const{layer:i,mapView:r,useFeatureReduction:l}=e;return l&&"featureReduction"in i&&"binning"===i.featureReduction.type?o.watch(()=>r.scale,()=>{const o=i.featureReduction;r.scale<=o.maxScale&&!a.disabled?((0,s.f)(),function(e,a,t){const o=document.createElement("arcgis-map-config-smart-mapping-scale-alert-popover");o.smartMappingState=e,o.refElement=a,o.addEventListener("arcgisSmartMappingScaleAlertPopoverBack",()=>{n(),t()}),document.body.append(o)}(e,a,t),(0,s.h)(a,!0)):r.scale>o.maxScale&&a.disabled&&(n(),(0,s.h)(a,!1),a.setFocus())}):void 0}function n(){document.querySelectorAll("arcgis-map-config-smart-mapping-scale-alert-popover").forEach(e=>e.remove())}}}]);