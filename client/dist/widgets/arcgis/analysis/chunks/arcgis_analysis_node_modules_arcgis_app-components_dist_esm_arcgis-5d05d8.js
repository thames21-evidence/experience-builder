/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-5d05d8.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-5d05d8"],{931:(e,t,n)=>{n.d(t,{l:()=>o});var i=n(93814);const o=async(e,t)=>(await i.e.exports.loadModules(e,t)).map(e=>e.__esModule&&e.default?e.default:e)},3826:(e,t,n)=>{n.d(t,{a:()=>o,b:()=>a,c:()=>s,d:()=>i});const i=(0,n(37762).c)({typeKeywords:[],customParameters:[],analyzedLocationTypes:[],allowStoredAuth:!0,isSecured:null,checkAuth:!1}),o=i.state,a=i.state,s=i.state},4429:(e,t,n)=>{n.d(t,{a:()=>l,b:()=>u,c:()=>a,d:()=>c,e:()=>o,f:()=>i,g:()=>p,i:()=>h,m:()=>s,t:()=>r,u:()=>d});const i=(e,t)=>{let n,i="idle";const o=(...o)=>new Promise(a=>{switch(i){case"flushed":i="idle",n?(clearTimeout(n),a(e(...o))):a(null);break;case"invoked":clearTimeout(n),i="idle",a(e(...o));break;case"cancelled":clearTimeout(n),i="idle",a(null);break;default:n&&clearTimeout(n),i="pending",n=setTimeout(()=>(i="idle",a(e(...o))),t)}});return o.flush=function(...e){return i="flushed",o(...e)},o.invoke=function(...e){return i="invoked",o(...e)},o.cancel=function(...e){return i="cancelled",o(...e)},o.getStatus=function(){return i},o};function o(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function a(e){return null!=e}async function s(e,t){return await Promise.all([e,r(t)]),e}function r(e){return new Promise(t=>setTimeout(t,e))}const l=(e,t)=>Object.fromEntries((e||[]).map(e=>{const{key:n,data:i}=t(e);return[n,i]})),c=(e,t)=>e.length===t.length&&e.reduce((e,n)=>e&&t.indexOf(n)>-1,!0);function d(e,t){const n=[],i={};return e.forEach(e=>{const o=t(e);null==i[o]&&(i[o]=e,n.push(e))}),n}function u(e){const t={boolean:{},number:{},string:{}},n=[];return e.filter(e=>{let i=typeof e;return i in t?!t[i].hasOwnProperty(e)&&(t[i][e]=!0):!(n.indexOf(e)>=0)&&n.push(e)})}const p=(e,t)=>[...Array(Math.ceil(e.length/t))].map((n,i)=>e.slice(t*i,t+t*i)),h=(e,t)=>e.includes(t)},5821:(e,t,n)=>{n.d(t,{a:()=>r,b:()=>s,g:()=>a,s:()=>o,u:()=>l});var i=n(4429);function o(e,t,n,i){!function(e,t,n){n=n||{};let i=null==n?void 0:n.expires;if("number"==typeof i){const e=new Date,t=24*i*60*60*1e3;e.setTime(Date.now()+t),i=n.expires=e}"string"!=typeof i&&(null==i?void 0:i.toUTCString)&&(n.expires=i.toUTCString());let o,a=`${e}=${encodeURIComponent(t)}`;for(o in n){a+=`; ${o}`;const e=n[o];!0!==e&&(a+=`=${e}`)}document.cookie=a}(e,i?JSON.stringify(t):t,n)}function a(e,t){const n=function(e){const t=document.cookie,n=new RegExp(`(?:^|; )${(0,i.e)(e)}=([^;]*)`),o=t.match(n);return o?decodeURIComponent(o[1]):void 0}(e);return n&&t?JSON.parse(n):n}function s(e,t,n){window.localStorage.setItem(e,n?JSON.stringify(t):t)}function r(e,t){const n=window.localStorage.getItem(e);return n&&t?JSON.parse(n):n}function l(e,t,n){const i=new Date(t);var a;i.setFullYear(t.getFullYear()+1),o(e,n,{expires:i}),n?s(e,"true",!1):(a=e,window.localStorage.removeItem(a))}},36443:(e,t,n)=>{n.d(t,{a:()=>a,g:()=>s});var i=n(83692),o=n(41473);const a=async e=>{try{return{result:await(0,i.r)(`${(0,o.g)(e)}portals/self/subscriptionInfo`)}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}},s=async(e,t)=>await(0,i.f)(()=>a(e),"subscriptionType",(0,i.b)(t))},54251:(e,t,n)=>{n.d(t,{g:()=>o});var i=n(59317);function o(e){var t,n,o,a;return null!=e||(e=null===i.c||void 0===i.c?void 0:i.c.portal),(null===(t=null==e?void 0:e.credential)||void 0===t?void 0:t.token)||(null==e?void 0:e.token)||(null===(o=null===(n=null==e?void 0:e.user)||void 0===n?void 0:n.credential)||void 0===o?void 0:o.token)||(null===(a=null==e?void 0:e.portalUser)||void 0===a?void 0:a.token)||""}},78344:(e,t,n)=>{n.r(t),n.d(t,{arcgis_new_item_pages_developer_credentials_select:()=>d});var i=n(87849),o=n(36443),a=n(59317),s=n(5821),r=n(3826),l=n(95878),c=n(83692);n(41473),n(37762),n(931),n(93814),n(54251);const d=class{constructor(e){(0,i.r)(this,e),this.newItemUpdatePage=(0,i.c)(this,"newItemUpdatePage",7),this.alertInfo=void 0,this.selectedCredentialType=void 0,this.isLoading=!1}async componentWillLoad(){var e,t,n;(0,c.c)("subscriptionType",(0,c.b)(a.c.user));const{result:i}=await(0,o.g)(a.c.portal,a.c.user);a.c.subscriptionInfo=i,this.i18n=l.u.i18n.developerCredentialsSelect,this.selectedCredentialType=r.a.developerCredentialsType||null,this.cannotGenerateApiTokens=(null===(e=null==i?void 0:i.options)||void 0===e?void 0:e.includes("NoApiKeys"))||!(null===(n=null===(t=a.c.user)||void 0===t?void 0:t.privileges)||void 0===n?void 0:n.includes("portal:user:generateApiTokens")),this.feature={id:"oauth_only_register_app",expiration:new Date("November 22, 2024")},this.hideSplashCheckbox=r.a.hideOAuthSplashScreenChoice,this.showSplashScreen=this.hideSplashCheckbox||this.checkOauthOnlyCookie()&&this.cannotGenerateApiTokens}async handleNext(){const{selectedCredentialType:e,hideSplashCheckbox:t}=this;e?(r.a.breadcrumbs=["apiToken"===e?"apiCredentialType":"oauthCredentialType"],r.a.developerCredentialsType=e,r.a.hideOAuthSplashScreenChoice=t,this.newItemUpdatePage.emit("developerCredentialsInput")):this.alertInfo={title:this.i18n.errorTitle,description:this.i18n.errorDescription}}checkOauthOnlyCookie(){const{id:e}=this.feature;return!(0,s.g)(e,!0)&&!(0,s.a)(e,!1)}renderSkipSplashScreenOption(){const{i18n:e,feature:t}=this;return(0,i.h)("calcite-label",{layout:"inline"},(0,i.h)("calcite-checkbox",{onCalciteCheckboxChange:e=>{const n=e.currentTarget.checked;this.hideSplashCheckbox=n,(0,s.u)(t.id,t.expiration,n)}}),e.skipSplashScreen)}render(){const{i18n:e,alertInfo:t,cannotGenerateApiTokens:n}=this,o="ar"===a.c.lang;return(0,i.h)(i.H,{key:"5a1ab8a02dc574bdf5c23b620b3443300afe232c"},(0,i.h)("div",{key:"a6d135b097c4597d51cd48c676174631b15fe768",class:"title-container"},(0,i.h)("div",{key:"9e0a8fb6aae7beef84d3d9028aead5c8908eeef8",class:"text-container"},(0,i.h)("arcgis-new-item-description",{key:"c799f72bf04837b68a0210c6443088d5b25822e5",class:"text-container",header:e.selectCredentialType,content:e.developerCredentialsDescription})),(0,i.h)("arcgis-credential-comparison-table",{key:"fd88e9507dbba8903fb2c3954e2a3797949a8766",apiTokenOptionEnabled:!this.showSplashScreen,onArcgisCredentialChange:e=>{this.selectedCredentialType=e.detail}}),(0,i.h)("div",{key:"ed98e3782cf6fed7a40f6b4fcafdbce46560ed3e",class:"footer-text"},(0,i.h)("calcite-label",{key:"b7376d80a4a9d3d8be59ab49864804c77be9d6fb",layout:"inline",class:"help-choose-auth-text"},(0,i.h)("calcite-icon",{key:"a31e64db08d19f8575e397a3e19da7e62e923cc4",icon:"question",scale:"s",flipRtl:o}),(0,i.h)("p",{key:"843cfcd995136bfde9c8346dd5aca7f43a3db7cf",innerHTML:n?e.missingApiTokenOption:e.helpChooseAuth.replace("${linkStart}",'<calcite-link href="https://developers.arcgis.com/documentation/mapping-apis-and-services/security/types-of-authentication/" target="_blank">').replace("${endLink}","</calcite-link>")})),this.showSplashScreen&&!this.hideSplashCheckbox&&this.renderSkipSplashScreenOption())),(0,i.h)("arcgis-new-item-alert",{key:"b993c55472c124334556586c11efe0a53191020b",heading:null==t?void 0:t.title,description:null==t?void 0:t.description,active:!!t,onAlertDismiss:()=>this.alertInfo=null}))}static get assetsDirs(){return["assets"]}};d.style=".title-container{margin-bottom:0.5rem}.text-container{margin-bottom:1.25rem}.help-choose-auth-text{margin-top:1rem}.footer-text{display:flex;justify-content:space-between}calcite-icon{margin-inline-end:0.25rem;margin-left:0.5rem}"},83692:(e,t,n)=>{n.d(t,{a:()=>v,b:()=>f,c:()=>h,f:()=>u,g:()=>y,i:()=>p,p:()=>m,r:()=>g});var i=n(59317),o=n(4429),a=n(931),s=n(41473),r=n(54251);const l={},c={},d={};async function u(e,t,n,i){var o,a,s,r;const u=null===(a=null===(o=d[t])||void 0===o?void 0:o[n])||void 0===a?void 0:a.expireAt,p=!!u&&(new Date).getTime()>u;if((null===(s=l[t])||void 0===s?void 0:s[n])&&!p)return l[t][n];c[t]||(c[t]={}),c[t][n]&&!p||(c[t][n]=e());const h=await c[t][n];if(l[t]||(l[t]={}),d[t]||(d[t]={}),l[t][n]=h,i){const{expireAfter:e,getExpireAfterFromResult:o}=i,a=o||e?(new Date).getTime()+(null!==(r=null==o?void 0:o(h))&&void 0!==r?r:e):null;d[t][n]=Object.assign(Object.assign({},d[t][n]),{expireAt:a})}return h}function p(e,t){var n;return null===(n=null==l?void 0:l[e])||void 0===n?void 0:n[t]}const h=(e,t)=>{var n,i;t?(null===(n=l[e])||void 0===n||delete n[t],null===(i=c[e])||void 0===i||delete i[t]):(delete l[e],delete c[e])};function f(e){var t,n;return null!==(t=null==e?void 0:e.id)&&void 0!==t?t:null===(n=null==e?void 0:e.sourceJSON)||void 0===n?void 0:n.id}async function v(e,t,n={},i){const[o]=await(0,a.l)(["esri/request"]);e.includes("f=")||t.append("f","json");const s=(0,r.g)();return s&&!t.has("token")&&t.append("token",s),new Promise((a,s)=>{o(e,Object.assign(Object.assign({body:t},n),{timeout:n.timeout||0,method:i||"auto"})).then(e=>{a(e.data)}).catch(e=>s(e))})}async function g(e,t={},n={},o,s){const[r]=await(0,a.l)(["esri/request"]),{api:l,portal:c}=i.c,{customToken:d,addTokenManually:u,addSSL:p,useProxy:h}=n,f=Object.assign({},t);if(e.includes("f=")||!0===(null==s?void 0:s.excludeJson)||(f.f="json"),d)f.token=d;else if(!1!==u){const e=await y(c);e&&(f.token=e)}const v=!1===p?e:function(e){var t;const{config:n}=i.c;return"https:"===window.location.protocol||!0===(null===(t=null==n?void 0:n.self)||void 0===t?void 0:t.allSSL)?e.replace("http:","https:"):e}(e);if(3===l){const e=Object.assign({url:v,content:f,timeout:n.timeout||0},null==s?void 0:s.v3Request);n.withCredentials&&(e.withCredentials=n.withCredentials);return r(e,"post"===o?Object.assign({usePost:!0},n):n)}{const e=Object.assign(Object.assign(Object.assign({query:f,method:o||"auto"},n),{timeout:n.timeout||0,useProxy:h}),(null==n?void 0:n.disableIdentityLookup)?{authMode:"anonymous"}:{});return(await r(v,e)).data}}const b=[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,15,15,30,30,30,30,30,30,30,30,30,30,120];const m=async(e,t,n)=>{var i,a;const s=null!==(i=null==t?void 0:t.pendingStatuses)&&void 0!==i?i:["processing","partial","Pending","InProgress","EXECUTING"],r=null!==(a=null==t?void 0:t.successStatuses)&&void 0!==a?a:["completed","Completed","COMPLETED"];let l=0;const c=async()=>{const i=await g(e,null==t?void 0:t.requestParams,{},n),a=i.status||i.jobStatus;if(s.includes(a))return await(0,o.t)((d=l++,1e3*b[d>-1&&d<b.length-1?d:b.length-1])),c();if(r.includes(a)||"failed"===a||"esriJobFailed"===a)return i;throw i;var d};try{return c()}catch(e){throw console.error(e),e}},y=async e=>{var t;if(!(null==e?void 0:e.isPortal)||!(0,s.i)(e))return(0,r.g)(e);if(!(null==e?void 0:e.user)&&!(null==e?void 0:e.portalUser)&&(0,s.i)(e))return;const{token:n}=await u(()=>k(e),"platformSelf",null!==(t=f(e.user))&&void 0!==t?t:e.id,{getExpireAfterFromResult:e=>e.expires_in});return n},k=async e=>{const t=await(async e=>{var t,n;const[i]=await(0,a.l)(["esri/identity/IdentityManager"]);return null!==(n=null===(t=(await u(()=>i.getCredential((0,s.g)(e),{oAuthPopupConfirmation:!1}),"credential",f(e.user))).oAuthState)||void 0===t?void 0:t.appId)&&void 0!==n?n:"arcgisonline"})(e),n={"X-Esri-Auth-Client-Id":t,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")};return g(`${(0,s.g)(e)}/oauth2/platformSelf`,{},{disableIdentityLookup:!0,headers:n,addTokenManually:!1,withCredentials:!0},"post",{v3Request:{headers:n}})}},95878:(e,t,n)=>{n.d(t,{a:()=>i,u:()=>o});const i=(0,n(37762).c)({nextText:"next",cancelText:"cancel",workflow:"content",scale:"m",disableScroll:!1,onlyHosted:!1,featureFlags:{}}),o=i.state}}]);