/*! For license information please see arcgis_analysis_node_modules_arcgis_common-components_dist_compone-a6f3fa.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_common-components_dist_compone-a6f3fa"],{41886:(e,t,a)=>{a.r(t),a.d(t,{ArcgisSlider:()=>E});var r=a(22229),n=a(46317),i=a(73801),s=a(58611),l=a(20936),o=a(4395);var c=a(85643),h=a(42984),d=a(60331),u=a(84577),g=a(54312),m=a(60701);const p=o.AH`:host{display:flex;width:100%;height:100%;font-family:Avenir Next,Helvetica Neue,helvetica,arial,sans-serif;font-size:var(--calcite-font-size--2);font-variant-numeric:tabular-nums;--arcgis-slider-dash-length: 5px;--arcgis-slider-handle-size: .875rem;--arcgis-slider-track-background-color: var(--calcite-color-border-2);--arcgis-slider-internal-show-range-labels: 0;--arcgis-slider-internal-show-value-labels: 0;--arcgis-slider-internal-value-labels-placement-leading: 0;--arcgis-slider-internal-value-labels-placement-trailing: 0;--arcgis-slider-internal-range-labels-placement-center: 0;--arcgis-slider-internal-range-labels-placement-trailing: 0;--arcgis-slider-internal-handle-offset: calc(var(--arcgis-slider-handle-size) / 2);--arcgis-slider-internal-label-input-margin: calc(var(--arcgis-slider-internal-handle-offset) + 4px);--arcgis-slider-internal-label-input-height: var(--calcite-input-number-height, 1.5rem);--arcgis-slider-internal-track-size: 2px}:host([show-range-labels]){--arcgis-slider-internal-show-range-labels: 1}:host(:not([value-labels-display="hidden"])){--arcgis-slider-internal-show-value-labels: 1}:host([value-labels-placement="leading"]){--arcgis-slider-internal-value-labels-placement-leading: var(--arcgis-slider-internal-show-value-labels)}:host([value-labels-placement="trailing"]){--arcgis-slider-internal-value-labels-placement-trailing: var(--arcgis-slider-internal-show-value-labels)}:host([range-labels-placement="center"]){--arcgis-slider-internal-range-labels-placement-center: var(--arcgis-slider-internal-show-range-labels)}:host([range-labels-placement="trailing"]){--arcgis-slider-internal-range-labels-placement-trailing: var(--arcgis-slider-internal-show-range-labels)}:host([disabled]){cursor:default;opacity:var(--calcite-opacity-disabled);pointer-events:none}.content{direction:ltr;flex:1;touch-action:none;user-select:none;display:grid;word-wrap:normal;word-break:normal;padding-block:var(--arcgis-slider-internal-handle-offset)}.track-container{grid-area:track-container;position:relative;display:flex;justify-content:center;align-items:center}.track{touch-action:none;position:relative}.track-bounds{background-color:var(--calcite-color-border-2)}.track-fill{--arcgis-slider-track-background-color: var(--calcite-color-brand)}:host([layout="vertical"]){.track-effective-leading{background:repeating-linear-gradient(to bottom,var(--arcgis-slider-track-background-color) 0 var(--arcgis-slider-dash-length),color-mix(in srgb,transparent 75%,var(--arcgis-slider-track-background-color) 25%) var(--arcgis-slider-dash-length) calc(var(--arcgis-slider-dash-length) * 2))}.track-effective-trailing{background:repeating-linear-gradient(to top,var(--arcgis-slider-track-background-color) 0 var(--arcgis-slider-dash-length),color-mix(in srgb,transparent 75%,var(--arcgis-slider-track-background-color) 25%) var(--arcgis-slider-dash-length) calc(var(--arcgis-slider-dash-length) * 2))}}:host([layout="horizontal"]){.track-effective-leading{background:repeating-linear-gradient(to right,var(--arcgis-slider-track-background-color) 0 var(--arcgis-slider-dash-length),color-mix(in srgb,transparent 75%,var(--arcgis-slider-track-background-color) 25%) var(--arcgis-slider-dash-length) calc(var(--arcgis-slider-dash-length) * 2))}.track-effective-trailing{background:repeating-linear-gradient(to left,var(--arcgis-slider-track-background-color) 0 var(--arcgis-slider-dash-length),color-mix(in srgb,transparent 75%,var(--arcgis-slider-track-background-color) 25%) var(--arcgis-slider-dash-length) calc(var(--arcgis-slider-dash-length) * 2))}}.track-range{background-color:var(--calcite-color-brand);&.active{box-shadow:0 0 8px #00000029;outline:1px solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)))}}:host([disabled]) .track-range{background-color:var(--calcite-color-text-3)}:host([layout="horizontal"]){.track-range.interactive{&:after{all:initial;cursor:ew-resize;position:absolute;inline-size:100%;content:"";inset-block-start:calc(-1 * var(--arcgis-slider-internal-handle-offset));block-size:var(--arcgis-slider-handle-size);margin-top:1px}}}:host([layout="vertical"]){.track-range.interactive{&:after{all:initial;cursor:ns-resize;position:absolute;inline-size:100%;content:"";inset-block-start:var(--arcgis-slider-internal-handle-offset);block-size:var(--arcgis-slider-handle-size);margin-left:1px}}}.segment{transform-origin:0 0;inset-block-start:0px;block-size:.125rem;position:absolute;top:0;left:0}.thumb{-webkit-user-select:none;user-select:none;background-color:#4c4c4c;position:absolute}.thumb:focus,.thumb.active{.handle{background-color:var(--calcite-color-brand);box-shadow:0 0 8px #00000029;outline:2px solid var(--calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)));outline-offset:calc(2px*(1 - (2*clamp(0,var(--calcite-offset-invert-focus),1))))}}.handle{cursor:pointer;box-sizing:border-box;z-index:1;touch-action:none;background-color:var(--calcite-color-foreground-1);box-shadow:0 0 0 2px var(--calcite-color-text-3) inset;border-radius:var(--arcgis-slider-handle-size);width:var(--arcgis-slider-handle-size);height:var(--arcgis-slider-handle-size);transition:all .125s ease-in-out;position:absolute;top:calc(var(--arcgis-slider-internal-handle-offset) * -1);left:calc(var(--arcgis-slider-internal-handle-offset) * -1)}.handle:hover{box-shadow:0 0 0 3px var(--calcite-color-brand) inset}.label{position:absolute;will-change:transform;min-width:70px}.label[hidden]{display:block;opacity:0;pointer-events:none}.min{grid-area:range-start}.max{grid-area:range-end}:host([layout="horizontal"][mirrored][range-labels-placement="center"]),:host([layout="vertical"]:not([mirrored])){.min{grid-area:range-end}.max{grid-area:range-start}}.content-start{grid-area:content-start;display:flex}.content-end{grid-area:content-end;display:flex}:host([layout="vertical"]){.content{grid-template:". range-start range-start range-start ." "content-start content-start track-container content-end content-end" ". range-end range-end range-end .";grid-template-rows:auto 1fr auto;grid-template-columns:1fr auto auto auto 1fr;row-gap:var(--arcgis-slider-internal-handle-offset)}.track-container{flex-direction:column}.track{flex:1;width:var(--arcgis-slider-internal-track-size)}.segment{writing-mode:vertical-lr}.label{top:calc(var(--arcgis-slider-internal-label-input-height) * -.5)}&:host([value-labels-placement="leading"]){.label{right:var(--arcgis-slider-internal-label-input-margin)}}&:host([value-labels-placement="trailing"]){.label{left:var(--arcgis-slider-internal-label-input-margin)}}}:host([layout="horizontal"][range-labels-placement="center"]){.content{--arcgis-slider-internal-content-start-min-height: calc( ((1 - var(--arcgis-slider-internal-show-range-labels)) * var(--arcgis-slider-internal-handle-offset)) + ( var(--arcgis-slider-internal-value-labels-placement-leading) * var(--arcgis-slider-internal-label-input-height) ) );--arcgis-slider-internal-content-end-min-height: calc( ((1 - var(--arcgis-slider-internal-show-range-labels)) * var(--arcgis-slider-internal-handle-offset)) + ( var(--arcgis-slider-internal-value-labels-placement-trailing) * var(--arcgis-slider-internal-label-input-height) ) );column-gap:calc(var(--arcgis-slider-internal-show-range-labels) * var(--arcgis-slider-internal-handle-offset));padding-inline:calc((1 - var(--arcgis-slider-internal-show-range-labels)) * var(--arcgis-slider-handle-size));grid-template:". content-start ." "range-start content-start range-end" "range-start track-container range-end" "range-start content-end range-end" ". content-end .";grid-template-columns:auto 1fr auto;grid-template-rows:minmax(var(--arcgis-slider-internal-content-start-min-height),auto) calc(var(--arcgis-slider-internal-show-range-labels) * calc(calc(var(--arcgis-slider-internal-label-input-height) / 2) - calc(var(--arcgis-slider-internal-track-size) / 2))) var(--arcgis-slider-internal-track-size) calc(var(--arcgis-slider-internal-show-range-labels) * calc(calc(var(--arcgis-slider-internal-label-input-height) / 2) - calc(var(--arcgis-slider-internal-track-size) / 2))) minmax(var(--arcgis-slider-internal-content-end-min-height),auto)}.track{flex:1;height:var(--arcgis-slider-internal-track-size)}&:host([value-labels-placement="leading"]){.label{bottom:var(--arcgis-slider-internal-label-input-margin)}}&:host([value-labels-placement="trailing"]){.label{top:var(--arcgis-slider-internal-label-input-margin)}}}:host([layout="horizontal"][range-labels-placement="trailing"]){.content{--arcgis-slider-internal-content-start-min-height: calc( var(--arcgis-slider-internal-handle-offset) + var(--arcgis-slider-internal-value-labels-placement-leading) * var(--arcgis-slider-internal-label-input-height) );--arcgis-slider-internal-content-end-min-height: calc( var(--arcgis-slider-internal-value-labels-placement-trailing) * var(--arcgis-slider-internal-label-input-height) );padding-inline:var(--arcgis-slider-handle-size);grid-template:"content-start content-start content-start" "track-container track-container track-container" "content-end content-end content-end" "content-end content-end content-end" "content-end content-end content-end";grid-template-columns:auto;grid-template-rows:minmax(var(--arcgis-slider-internal-content-start-min-height),auto) var(--arcgis-slider-internal-track-size) var(--arcgis-slider-internal-handle-offset) calc(var(--arcgis-slider-internal-range-labels-placement-trailing) * var(--arcgis-slider-internal-label-input-height)) minmax(var(--arcgis-slider-internal-content-end-min-height),auto);column-gap:var(--arcgis-slider-internal-handle-offset)}.track{flex:1;height:var(--arcgis-slider-internal-track-size)}&:host([value-labels-placement="leading"]){.label{bottom:var(--arcgis-slider-internal-label-input-margin)}}&:host([value-labels-placement="trailing"]){.label{top:calc(var(--arcgis-slider-internal-label-input-margin) + var(--arcgis-slider-internal-range-labels-placement-trailing) * (var(--arcgis-slider-internal-label-input-height)))}}.min,.max{--arcgis-slider-internal-range-translation: calc(var(--arcgis-slider-internal-handle-offset) + .5rem + 1px);grid-area:unset;grid-row:-3}&:host(:not([mirrored])){.min{grid-column:1;transform:translate(calc(var(--arcgis-slider-internal-range-translation) * -1))}.max{grid-column:3;transform:translate(var(--arcgis-slider-internal-range-translation))}}&:host([mirrored]){.min{grid-column:3;transform:translate(var(--arcgis-slider-internal-range-translation))}.max{grid-column:1;transform:translate(calc(var(--arcgis-slider-internal-range-translation) * -1))}}}`;var v=Object.defineProperty,f=Object.getOwnPropertyDescriptor,b=(e,t,a,r)=>{for(var n,i=r>1?void 0:r?f(t,a):t,s=e.length-1;s>=0;s--)(n=e[s])&&(i=(r?n(t,a,i):n(i))||i);return r&&i&&v(t,a,i),i};let _=class extends d.default{constructor(e={}){super({min:0,max:100,values:[],properties:e}),this._entries=new Map,this.precision=4,this.ready=!1}startup(){const{precision:e}=this;let{min:t,max:a,values:r}=this;a=y(a,e),t=y(t,e),r=r?.map(r=>x(y(r,e),t,a)),this._set("min",t),this._set("max",a),this._set("values",r);const n=new Map(r?.map(e=>[(0,m.DA)(),e]));this._entries=n,(0,g.watch)(()=>this.min,e=>{const t=this.values;null!=e&&t?.length&&t.some(t=>t<e)&&(this._entries.forEach((t,a)=>{t<e&&this._entries.set(a,e)}),this._updatesValues())},{sync:!0}),(0,g.watch)(()=>this.max,e=>{const t=this.values;null!=e&&t?.length&&t.some(t=>t>e)&&(this._entries.forEach((t,a)=>{t>e&&this._entries.set(a,e)}),this._updatesValues())},{sync:!0}),(0,g.watch)(()=>this.precision,e=>{const{min:t,max:a,values:r}=this;this._set("min",y(t,e)),this._set("max",y(a,e)),r?.length&&(this._entries.forEach((t,a)=>{this._entries.set(a,y(t,e))}),this._updatesValues())},{sync:!0}),this._set("ready",!0)}get entries(){return this._entries}set max(e){if(!this.ready)return void this._set("max",e);const t=this._get("max"),a=y(e,this.precision);t!==a&&this._set("max",a)}set min(e){if(!this.ready)return void this._set("min",e);const t=this._get("min"),a=y(e,this.precision);t!==a&&this._set("min",a)}set values(e){if(!this.ready)return void this._set("values",e);const t=this._get("values");if(e=e?.map(e=>x(y(e,this.precision),this.min,this.max)).sort((e,t)=>e-t),t&&e&&t.length===e.length&&t.every((t,a)=>t===e[a]))return;const a=new Map(e?.map(e=>[(0,m.DA)(),e]));this._entries=a,this._set("values",e)}getValue(e){return this._entries.get(e)}setValue(e,t){if(null==this.values)return!1;const{min:a,max:r}=this,n=this._entries.get(e),i=x(y(t,this.precision),a,r);return n!==i&&(this._entries.set(e,i),this._updatesValues(),!0)}setValues(e){if(null==this.values)return!1;let t=!1;const{min:a,max:r}=this;for(const[n,i]of e){const e=this._entries.get(n),s=x(y(i,this.precision),a,r);e!==s&&(t=!0,this._entries.set(n,s))}return!!t&&(this._updatesValues(),!0)}_updatesValues(){const e=Array.from(this._entries.values()).sort((e,t)=>e-t);this._set("values",e)}};function x(e,t,a){return Math.min(Math.max(e,t),a)}function y(e,t){return Number.parseFloat(e.toFixed(t))}b([(0,u.property)()],_.prototype,"_entries",2),b([(0,u.property)({readOnly:!0})],_.prototype,"entries",1),b([(0,u.property)()],_.prototype,"max",1),b([(0,u.property)()],_.prototype,"min",1),b([(0,u.property)({cast:e=>x(e,0,20)})],_.prototype,"precision",2),b([(0,u.property)({readOnly:!0})],_.prototype,"ready",2),b([(0,u.property)()],_.prototype,"values",1),_=b([(0,u.subclass)("esri.widgets.Slider.SliderData")],_);class w{constructor(e){this.steps=e,this.minIndex=0,this.maxIndex=this.steps.length-1}indexToValue(e){return this.steps[C(e,this.minIndex,this.maxIndex)]}valueToIndex(e){const t=this.steps.indexOf(e);return-1!==t?t:this.steps.reduce((t,a,r,n)=>Math.abs(a-e)<Math.abs(n[t]-e)?r:t)}}class k{constructor(e,t,a){this.min=e,this.max=t,this.stepSize=a,this.minIndex=0,this.maxIndex=Math.round((this.max-this.min)/this.stepSize)}indexToValue(e){return this.min+C(e,this.minIndex,this.maxIndex)*this.stepSize}valueToIndex(e){return e=C(e,this.min,this.max),Math.round((e-this.min)/this.stepSize)}}function D(e,t,a,r,n){const i=t.get(a)??0;if(!e)return i+r;const s=i+r,l=new Set;if(!n)for(const[r,n]of t.entries())r!==a&&l.add(e.valueToIndex(n));let o=null,c=1/0;for(let t=e.minIndex;t<=e.maxIndex;t++){if(l.has(t))continue;const a=e.indexToValue(t),r=Math.abs(a-s);r<c&&(c=r,o=t)}return null==o?i:e.indexToValue(o)}function P(e,t,a,r){const{allowValuesOverlap:n,stepsProvider:i,resolution:s,min:l,max:o}=e,c=t.get(a);if(r=r>0?1:-1,!i){let e=C(c+r*s,l,o);if(n)return e;const i=new Set;for(const[e,r]of t)e!==a&&i.add(r);for(;i.has(e)&&e<=o&&e>=l;)e=C(e+r*s,l,o);return i.has(e)||e>o||e<l?c:e}const h=i.valueToIndex(c);if(-1===h)return c;if(n){const e=C(h+r,i.minIndex,i.maxIndex);return i.indexToValue(e)}const d=new Set;for(const[e,r]of t)e!==a&&d.add(i.valueToIndex(r));let u=h,g=!1;const m=i.minIndex,p=i.maxIndex;let v=0;for(;v<Math.abs(p-m)&&(u+=r,!(u<m||u>p));){if(!d.has(u)){g=!0;break}v++}return g?i.indexToValue(u):c}function I(e,t){return e-t}function $(e,t){return t-e}function C(e,t,a){return Math.max(t,Math.min(a,e))}const M=(0,s._i)(_);class E extends i.WF{constructor(){super(...arguments),this._popoverElement=(0,c._)(),this._trackElement=(0,c._)(),this.messages=(0,h.u)({}),this._onPointerMoveDragUpdate=e=>{this._updateDrag(this._mapEventToRange(e))},this._onPointerUpDragEnd=e=>{R(e)&&this._endDrag()},this._onPointerCancelDragEnd=()=>{this._endDrag()},this._minFormatter=e=>this._formatLabel(e,"min"),this._maxFormatter=e=>this._formatLabel(e,"max"),this._valueFormatter=e=>this._formatLabel(e,"value"),this._formatLabel=(e,t)=>{const a=this.labelFormatter;if(!a)return this._defaultFormatter(e);return a(e,t,this._defaultFormatter)??this._defaultFormatter(e)},this._defaultFormatter=e=>this._numberFormatter.format(e),this._numberFormatter=new Intl.NumberFormat(this.messages._lang),this._labelInputsUpdateComplete=null,this._dragInfo=null,this._hasPopoverContent=!1,this._hasContentStart=!1,this._hasContentEnd=!1,this._sliderData=M(this),this.allowValuesOverlap=!1,this.autoDestroyDisabled=!1,this.disabled=!1,this.fillPlacement="start",this.layout="horizontal",this.max=this._sliderData.max,this.min=this._sliderData.min,this.mirrored=!1,this.popoverLabel="",this.popoverPlacement="leading",this.precision=this._sliderData.precision,this.rangeLabelsEditingEnabled=!1,this.rangeLabelsPlacement="center",this.segmentsDraggingDisabled=!1,this.showRangeLabels=!1,this.valueLabelsDisplay="hidden",this.valueLabelsPlacement="leading",this.valueLabelsEditingEnabled=!1,this.values=this._sliderData.values,this.arcgisActiveValueChange=(0,i.lh)({cancelable:!1}),this.arcgisChange=(0,i.lh)({cancelable:!1}),this.arcgisInput=(0,i.lh)({cancelable:!1}),this.arcgisRangeChange=(0,i.lh)({cancelable:!1})}static{this.properties={_dragInfo:16,_hasPopoverContent:16,_hasContentStart:16,_hasContentEnd:16,_activePart:16,_sliderData:16,activeValue:32,allowValuesOverlap:5,autoDestroyDisabled:5,disabled:[7,{useDefault:!0}],fullRangeMax:11,fullRangeMin:11,fillPlacement:1,labelFormatter:0,layout:3,max:11,min:11,mirrored:[7,{useDefault:!0}],popoverLabel:1,popoverPlacement:3,precision:11,rangeLabelsEditingEnabled:5,rangeLabelsPlacement:3,segmentsDraggingDisabled:5,showRangeLabels:5,steps:[9,{converter:{fromAttribute(e){if(e.includes(","))return e.split(",").filter(e=>""!==e.trim()).map(parseFloat).filter(e=>Number.isFinite(e));const t=parseFloat(e);return Number.isFinite(t)?t:void 0}}}],valueLabelsDisplay:3,valueLabelsPlacement:3,valueLabelsEditingEnabled:5,values:[1,{converter:{fromAttribute:e=>e.includes(",")?e.split(",").filter(e=>""!==e.trim()).map(parseFloat).filter(e=>Number.isFinite(e)):[parseFloat(e)].filter(e=>Number.isFinite(e))}}],messageOverrides:0}}static{this.styles=p}static{this.shadowRootOptions={mode:"open",delegatesFocus:!0}}get _fullMin(){return this.fullRangeMin??this.min}get _fullMax(){return this.fullRangeMax??this.max}get _fullRange(){return this._fullMax-this._fullMin}get isHorizontal(){return"horizontal"===this.layout}get _trackWidthOrHeight(){const e=this._trackElement.value?.getBoundingClientRect();return e?this.isHorizontal?e.width:e.height:0}get _disabledOrInvalid(){return this.disabled||0===this.values.length||this._invalid}get _invalid(){const e=null==this.fullRangeMin||null==this.fullRangeMax||this.fullRangeMin<this.fullRangeMax,t=null==this.fullRangeMin||this.fullRangeMin<=this.min,a=null==this.fullRangeMax||this.fullRangeMax>=this.max;return this.min>=this.max||!e||!t||!a}get resolution(){const e=(this._sliderData.max-this._sliderData.min)/this._trackWidthOrHeight;return Math.max(e,1/Math.pow(10,this.precision))}get activeValue(){if(this._activePart)return"range"===this._activePart?"all":this._sliderData.getValue(this._activePart)}async destroy(){await this.manager.destroy()}willUpdate(e){if((e.has("steps")||e.has("min")||e.has("max"))&&(this._stepsProvider=function(e){if(null==e.steps)return null;const t=e.steps;return Array.isArray(t)?0===t.length?null:new w(t):new k(e.min,e.max,t)}(this)),e.has("messages")||e.has("min")||e.has("max")||e.has("precision")){const e=null!=this.max&&null!=this.min&&this.max-this.min>10?2:this.precision;this._numberFormatter=new Intl.NumberFormat(this.messages._lang,{maximumFractionDigits:e})}}updated(e){this._layoutLabelInputs();const t=this._popoverElement.value;t&&(e.has("values")||e.has("min")||e.has("max"))&&t.reposition()}load(){this._sliderData.startup()}loaded(){new ResizeObserver(()=>{this._layoutLabelInputs()}).observe(this.el)}disconnectedCallback(){super.disconnectedCallback(),this._removeDragListeners()}async _layoutLabelInputs(){if("horizontal"!==this.layout||!this._trackElement.value||"hidden"===this.valueLabelsDisplay)return;const e=this.renderRoot.querySelectorAll("arcgis-label-input"),t=this.componentOnReady().then(()=>Promise.all(Array.from(e,e=>e.updateComplete)));if(this._labelInputsUpdateComplete=t,await t,t!==this._labelInputsUpdateComplete)return;this._labelInputsUpdateComplete=null;const{_trackElement:{value:a}}=this,r=a.getBoundingClientRect();for(const e of this._sliderData.entries.keys()){const t="range"===this._activePart||this._activePart===e;if("always"===this.valueLabelsDisplay||t){const t=V(this,e),a=z(this,e);if(!t||!a)continue;const n=t.getBoundingClientRect(),i=a.getBoundingClientRect(),s=a.getLabelBoundingClientRect(),l=n.width/2,o=Math.round(n.left+l),c=Math.round(s.width/2);let h=i.width/2;const d=r.left-l,u=r.right+l,g=o-c,m=o+c;g<d?h+=g-d:m>u&&(h+=m-u),a.style.transform=`translateX(${-Math.round(h)}px)`}}}_onTrackFocus(){this._setActivePart("range")}_onTrackBlur(){this._setActivePart(null)}_onTrackRangePointerDown(e){this._disabledOrInvalid||!R(e)||this._startDrag("range",this._mapEventToRange(e))}async _onPointerDown(e){if(this._disabledOrInvalid||!R(e))return;const t=this.renderRoot.querySelector("arcgis-label-input[editing]");if(e.target===t)return;if(t)return t.blur(),void this._focusEntry(T(t));if("dataset"in(a=e.target)&&"ARCGIS-LABEL-INPUT"===a.tagName&&("min"===a.dataset.type||"max"===a.dataset.type)||this.values?.length>1)return;var a;const r=this._mapEventToRange(e),[n,i]=this._sliderData.entries.entries().next().value,s=r*this._fullRange+this._fullMin-i,l=O(this._fullMin,this._fullMax,i)/100;this._startDrag(n,l);const o=D(this._stepsProvider,this._sliderData.entries,n,s,this.allowValuesOverlap);this._setValue(n,o),this._focusEntry(n)}_onThumbPointerDown(e){const t=T(e.currentTarget);if(!R(e)||this._disabledOrInvalid||!t)return;const a=z(this,t);e.target===a&&a?.editing||(e.stopPropagation(),this._startDrag(t,this._mapEventToRange(e)))}_endDrag(){if(this._disabledOrInvalid)return;this._removeDragListeners();let e=!1;if(this._dragInfo){const{entries:t}=this._dragInfo;for(const[a,r]of t)if(this._sliderData.getValue(a)!==r){e=!0;break}}this._dragInfo=null,e&&this.arcgisChange.emit()}_startDrag(e,t){if(this._disabledOrInvalid)return;const{min:a,max:r,values:n}=this;let i=a,s=r;if(this._setActivePart(e),"range"===e){if(this.segmentsDraggingDisabled)return;i=a-n[0],s=r-n[n.length-1]}this._dragInfo={position:t,entries:new Map(this._sliderData.entries.entries()),minDiff:i,maxDiff:s},this._addDragListeners()}_updateDrag(e){if(!this._dragInfo||!this._activePart)return;const{_activePart:t,_dragInfo:{position:a,entries:r,minDiff:n,maxDiff:i}}=this;if(a===e)return;let s=(e-a)*this._fullRange;if("range"===t){s=Math.min(i,Math.max(n,s));const e=function(e,t,a){if(null==e){const e=new Map;for(const[r,n]of t.entries())e.set(r,n+a);return e}const r=t.size,n=Array.from(t.entries()).map(([t,n])=>{const i=n+a,s=[];for(let t=e.minIndex;t<=e.maxIndex;t++){const a=e.indexToValue(t),n=Math.abs(a-i);let l=!1;for(let e=0;e<s.length;e++)if(n<s[e].dist){s.splice(e,0,{idx:t,value:a,dist:n}),l=!0;break}!l&&s.length<r&&s.push({idx:t,value:a,dist:n}),s.length>r&&(s.length=r)}return{uuid:t,stepDistances:s}}),i=new Set,s=new Map;n.sort((e,t)=>e.stepDistances[0].dist-t.stepDistances[0].dist);for(const e of n){const a=e.stepDistances.find(e=>!i.has(e.idx));a?(i.add(a.idx),s.set(e.uuid,a.value)):s.set(e.uuid,t.get(e.uuid))}return s}(this._stepsProvider,r,s);this._setValues(e)}else{const e=D(this._stepsProvider,r,t,s,this.allowValuesOverlap);this._setValue(t,e)}}_focusEntry(e){e&&function(e,t){return t?e.renderRoot.querySelector(`div[data-entry="${t}"]`):null}(this,e)?.focus()}_addDragListeners(){document.addEventListener("pointerup",this._onPointerUpDragEnd),document.addEventListener("pointermove",this._onPointerMoveDragUpdate),document.addEventListener("pointercancel",this._onPointerCancelDragEnd)}_removeDragListeners(){document.removeEventListener("pointerup",this._onPointerUpDragEnd),document.removeEventListener("pointermove",this._onPointerMoveDragUpdate),document.removeEventListener("pointercancel",this._onPointerCancelDragEnd)}_setValues(e){this._sliderData.setValues(e)&&(this._dragInfo||this.arcgisChange.emit(),this.arcgisInput.emit())}_setValue(e,t){this._sliderData.setValue(e,t)&&(this._dragInfo||this.arcgisChange.emit(),this.arcgisInput.emit())}_onThumbFocus(e){const t=T(e.currentTarget);this._setActivePart(t)}_onThumbBlur(){this._setActivePart(null)}_onRangeInputChange(e){const t=e.currentTarget,a=t.value,r=t.dataset.type;let n=!1;switch(e.stopPropagation(),r){case"min":a<this.max?(this.min=a,n=!0):t.value=this.min;break;case"max":a>this.min?(this.max=a,n=!0):t.value=this.max}n&&this.arcgisRangeChange.emit()}_onValueInputChange(e){const t=e.currentTarget,a=T(t),r=t.value;a&&(e.stopPropagation(),this._setValue(a,r))}_mapEventToRange(e){const t=this._trackElement.value?.getBoundingClientRect();if(!t)return 0;const a=this.isHorizontal?(e.clientX-t.left)/t.width:1-(e.clientY-t.top)/t.height;return this.mirrored?1-a:a}_getPositionStyleForElement(e){const t=O(this._fullMin,this._fullMax,e);return{[this.isHorizontal?this.mirrored?"right":"left":this.mirrored?"top":"bottom"]:`${t}%`}}_popoverSlotChange(e){this._hasPopoverContent=(0,l.ti)(e)}_onContentStartSlotChange(e){this._hasContentStart=(0,l.ti)(e)}_onContentEndSlotChange(e){this._hasContentEnd=(0,l.ti)(e)}_onThumbKeyDown(e){const t=T(e.currentTarget);if(!t)return;const a=e.currentTarget.querySelector("arcgis-label-input");if(!a||a.editing)return;const r=e.key;switch(r){case"Enter":a.edit();break;case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":{e.preventDefault();let a="ArrowUp"===r||"ArrowRight"===r?1:-1;a=this.mirrored?-1*a:a;const n=P({allowValuesOverlap:this.allowValuesOverlap,stepsProvider:this._stepsProvider,resolution:this.resolution,min:this.min,max:this.max},this._sliderData.entries,t,a);this._setValue(t,n);break}case"End":case"Home":{e.preventDefault();const a=this.isHorizontal&&this.mirrored||"vertical"===this.layout?"End"===r?-1:1:"Home"===r?-1:1,n=function(e,t,a,r){const{allowValuesOverlap:n,stepsProvider:i,resolution:s,min:l,max:o}=e,c=t.get(a);if(r=r>0?1:-1,!i){const e=new Set(Array.from(t).filter(([e])=>e!==a).map(([,e])=>e));let i=r>0?o:l;if(n)return i;for(;e.has(i);)if(i-=r*s,r>0&&i>o||r<0&&i<l){i=c;break}return i}if(n)return r>0?i.indexToValue(i.maxIndex):i.indexToValue(i.minIndex);const h=i.valueToIndex(c);if(-1===h)return c;const d=new Set(Array.from(t).filter(([e])=>e!==a).map(([,e])=>i.valueToIndex(e)));let u=r>0?i.maxIndex:i.minIndex;for(;d.has(u);)if(u-=r,r>0&&u>o||r<0&&u<l){u=h;break}return i.indexToValue(u)}({allowValuesOverlap:this.allowValuesOverlap,stepsProvider:this._stepsProvider,resolution:this.resolution,min:this.min,max:this.max},this._sliderData.entries,t,a);this._setValue(t,n);break}}}_onTrackRangeKeyDown(e){const t=e.key;switch(t){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":{e.preventDefault();let a="ArrowUp"===t||"ArrowRight"===t?1:-1;a=this.mirrored?-1*a:a;const{entries:r}=function(e,t,a){const r=new Map,n=a>0?$:I,i=Array.from(t).sort((e,t)=>n(e[1],t[1]));let s=!1,l=!0;for(const[t,n]of i)if(r.set(t,n),l){const i=P(e,r,t,a);n===i&&(l=!1),s||=l,r.set(t,i)}return{changed:s,entries:r}}({allowValuesOverlap:this.allowValuesOverlap,stepsProvider:this._stepsProvider,resolution:this.resolution,min:this.min,max:this.max},this._sliderData.entries,a);this._setValues(r);break}case"End":case"Home":{e.preventDefault();const a=this.isHorizontal&&this.mirrored||"vertical"===this.layout?"End"===t?-1:1:"Home"===t?-1:1,r=function(e,t,a){const{stepsProvider:r,min:n,max:i}=e,s=new Map,l=Array.from(t).sort((e,t)=>I(e[1],t[1]));if(r){let e=0;if(a>0){const t=l[l.length-1],a=r.valueToIndex(t[1]);e=r.maxIndex-a}else{const t=l[0],a=r.valueToIndex(t[1]);e=r.minIndex-a}if(0===e)for(const[e,t]of l)s.set(e,t);for(const[t,a]of l){const n=r.indexToValue(r.valueToIndex(a)+e);s.set(t,n)}return s}let o=0;o=a>0?i-l[l.length-1][1]:n-l[0][1];for(const[e,t]of l)s.set(e,t+o);return s}({allowValuesOverlap:this.allowValuesOverlap,stepsProvider:this._stepsProvider,resolution:this.resolution,min:this.min,max:this.max},this._sliderData.entries,a);this._setValues(r);break}}}_setActivePart(e){this._activePart!==e&&(this._activePart=e,this.arcgisActiveValueChange.emit())}render(){return o.qy`<div class=${(0,i.CP)({content:!0,disabled:this._disabledOrInvalid})} @pointerdown=${this._onPointerDown}>${this._renderContentStart()}${this._renderContentEnd()}${this._renderRangeLabel("min")}${this._renderTrackRange()}${this._renderRangeLabel("max")}${this._renderPopover()}</div>`}_renderPopover(){const{_activePart:e,layout:t,popoverPlacement:a,valueLabelsPlacement:r,valueLabelsDisplay:n,popoverLabel:i}=this,s=e?null!=typeof(d=e)&&"range"!==d?e:"track-range":"",l=this._hasPopoverContent,h="horizontal"===t?"leading"===a?"top":"bottom":"leading"===a?"left":"right";var d;let u=14;return"hidden"!==n&&a===r&&(u+=24),o.qy`<calcite-popover flip-disabled focus-trap-disabled .label=${i} .open=${l} .offsetDistance=${u} .placement=${h} pointer-disabled .referenceElement=${s} scale=s trigger-disabled ${(0,c.K)(this._popoverElement)}><slot name=popover @slotchange=${this._popoverSlotChange}></slot></calcite-popover>`}_renderContentStart(){return o.qy`<div class="content-start" .hidden=${!this._hasContentStart}><slot name=content-start @slotchange=${this._onContentStartSlotChange}></slot></div>`}_renderContentEnd(){return o.qy`<div class="content-end" .hidden=${!this._hasContentEnd}><slot name=content-end @slotchange=${this._onContentEndSlotChange}></slot></div>`}_renderTrackRange(){return o.qy`<div class="track-container">${this._renderTrack()}${this._renderThumbs()}</div>`}_renderTrack(){return o.qy`<div class="track" ${(0,c.K)(this._trackElement)}>${this._renderTrackBackground()}${this._renderFillSegment()}</div>`}_renderTrackBackground(){const{max:e,min:t,fillPlacement:a,values:r}=this,n=r.length>1;let s=this._fullMin,l=this._fullMax;const c=[];return this._invalid?o.qy`<div class="segment track-bounds" style=${(0,i.zl)({left:"0%",right:"0%",top:"0%",bottom:"0%"})}></div>`:(s<t&&(c.push(this._renderSegment(s,t,[this.mirrored?"track-effective-trailing":"track-effective-leading",n||"start"!==a?null:"track-fill"])),s=t),l>e&&(c.push(this._renderSegment(e,l,[this.mirrored?"track-effective-leading":"track-effective-trailing",n||"end"!==a?null:"track-fill"])),l=e),c.push(this._renderSegment(s,l,["track-bounds"])),c)}_renderFillSegment(){const{values:e,fillPlacement:t,min:a,max:r}=this;if(!e?.length||this._invalid)return;const n=[...e].sort((e,t)=>e-t);if(1===n.length)switch(t){case"start":if(a<n[0])return this._renderSegment(a,n[0],["track-range"]);break;case"end":if(r>n[0])return this._renderSegment(n[0],r,["track-range"])}return this._renderSegment(n[0],n[n.length-1],["track-range",this.segmentsDraggingDisabled?null:"interactive","range"===this._activePart?"active":null],{id:"track-range",onFocus:this.segmentsDraggingDisabled?void 0:this._onTrackFocus,onBlur:this.segmentsDraggingDisabled?void 0:this._onTrackBlur,onPointerDown:this.segmentsDraggingDisabled?void 0:this._onTrackRangePointerDown,onKeyDown:this.segmentsDraggingDisabled?void 0:this._onTrackRangeKeyDown})}_renderSegment(e,t,a,r){const{_fullMin:n,_fullMax:s,mirrored:c}=this,h=[O(n,s,A(e,n,s)),100-O(n,s,A(t,n,s))];c&&h.reverse();const d=this.isHorizontal?{left:`${h[0]}%`,right:`${h[1]}%`}:{top:`${h[1]}%`,bottom:`${h[0]}%`},u=(0,l.Ly)("segment",...a);return o.qy`<div id=${r?.id??i.s6} class=${(0,i.CP)(u)} style=${(0,i.zl)(d)} .tabIndex=${r?.onPointerDown?0:-1} @focus=${r?.onFocus} @blur=${r?.onBlur} @pointerdown=${r?.onPointerDown} @keydown=${r?.onKeyDown}></div>`}_renderThumbs(){const{_sliderData:e}=this;return function*(e,t){if(void 0!==e){let a=0;for(const r of e)yield t(r,a++)}}(Array.from(e.entries).filter(([,e])=>e>=this._fullMin&&e<=this._fullMax),([e,t])=>this._renderThumb(e,t))}_renderThumb(e,t){const{valueLabelsDisplay:a}=this,r=this._activePart===e||"range"===this._activePart,s="range"===this._activePart||this._activePart===e,l="always"===a||"auto"===a&&s,c=this.isHorizontal,h=c?"horizontal":"vertical",d=`label-${e}`,u=c?"center":"leading"===this.valueLabelsPlacement?"end":"start";return(0,n.D)(e,o.qy`<div id=${e??i.s6} .ariaLabel=${this.messages.sliderValue} aria-labelledby=${(a?d:void 0)??i.s6} .ariaOrientation=${h} .ariaValueMax=${this.max} .ariaValueMin=${this.min} .ariaValueNow=${t} class=${(0,i.CP)({thumb:!0,active:r})} data-entry=${e??i.s6} @pointerdown=${this._onThumbPointerDown} @focus=${this._onThumbFocus} @blur=${this._onThumbBlur} @keydown=${this._onThumbKeyDown} role=slider style=${(0,i.zl)({...this._getPositionStyleForElement(t),"z-index":this._activePart===e?1:0})} tabindex=0><span class="handle"></span><arcgis-label-input .alignment=${u} class="label" .hidden=${!l} id=${d??i.s6} .labelFormatter=${this._valueFormatter} @focus=${this._onThumbFocus} @blur=${this._onThumbBlur} @arcgisChange=${this._onValueInputChange} .readOnly=${!this.valueLabelsEditingEnabled} tabindex=-1 .value=${t}></arcgis-label-input></div>`)}_renderRangeLabel(e){let t="center";return this.isHorizontal&&(t="min"===e?"end":"start","trailing"===this.rangeLabelsPlacement&&(t="end"===t?"start":"end"),this.mirrored&&(t="end"===t?"start":"end")),o.qy`<arcgis-label-input .alignment=${t} class=${(0,i.CP)(e)} data-type=${e??i.s6} .hidden=${!this.showRangeLabels} .labelFormatter=${this[`_${e}Formatter`]} @arcgisChange=${this._onRangeInputChange} .readOnly=${!this.rangeLabelsEditingEnabled} .value=${this[e]}></arcgis-label-input>`}}function T(e){const t=(0,l.el)(e,"[data-entry]");return t&&"dataset"in t?t.dataset.entry:null}function V(e,t){return t?e.renderRoot.querySelector(`div[data-entry="${t}"] span.handle`):null}function z(e,t){return t?e.renderRoot.querySelector(`div[data-entry="${t}"] arcgis-label-input`):null}function R(e){return e.isPrimary&&0===e.button}const L=5;function O(e,t,a){const r=(a-e)/(t-e)*100;return Number.parseFloat(r.toFixed(L))}function A(e,t,a){return Math.max(t,Math.min(a,e))}(0,r.c)("arcgis-slider",E)},42984:(e,t,a)=>{a.d(t,{u:()=>i});var r=a(83552),n=a(22229);const i=(0,r.yr)(n.g)},46317:(e,t,a)=>{a.d(t,{D:()=>s});var r=a(85282),n=a(34670),i=a(42466);const s=(0,n.u$)(class extends n.WL{constructor(){super(...arguments),this.key=r.s6}render(e,t){return this.key=e,t}update(e,[t,a]){return t!==this.key&&((0,i.mY)(e),this.key=t),a}})},58611:(e,t,a)=>{a.d(t,{_i:()=>c,y$:()=>p});a(4713);var r=a(54312),n=a(44319),i=a(93461),s=a(53987),l=a(84577),o=a(60331);const c=(e,t)=>t=>d(t,e);class h extends n.G{constructor(e,t){super(e),this.Y=new Map,this.A=void 0,this.#e=(0,s.createObservable)();const a=this;a.#t=t,a.Z(),a.setProvisionalExports(u(e,new WeakRef(a),e.M.length-1,a.instance,a.Y),!1),(0,n.d)(e,t=>{if(t){const n=(0,r.watch)(()=>e[t],t=>{if(t===a.instance)return;const r=a.instance;a.exports=t,a.instance=t,a.Y.forEach((t,a)=>e.requestUpdate(t,r[a])),a.#a&&r.destroy(),a.#a=!1},{sync:!0});a.onDestroy(n.remove)}},a.exports)}#a;#e;#t;get exports(){return(0,s.trackAccess)(this.#e),super.exports}set exports(e){super.exports=e,this.#e.notify()}Z(){const e=this;e.instance="prototype"in e.#t&&"declaredClass"in e.#t.prototype?new e.#t:e.#t(),e.#a=!0}hostConnected(){this.exports=this.instance}hostDestroy(){this.#a&&this.instance.destroy?.()}}const d=(0,i.p)(h),u=(e,t,a,r,i)=>new Proxy(r,{get:(r,s)=>{const l=r[s];if("symbol"==typeof s||i.has(s))return l;const o=e.M[a];return o.A=s,(0,n.t)(e,r=>{if(o.A=void 0,void 0!==r){const n=r.key;i.set(s,n);const l=e.constructor.getPropertyOptions(n);0;const o=s!==n&&n.toLowerCase().includes("disable");g(t,l,s,n,o),void 0===l.i&&m(l,a,s,o)}},l)}}),g=(e,t,a,n,i,s)=>s=(0,r.watch)(()=>{const t=e.deref();return void 0===t||t.component.manager.destroyed?s=s.remove():t.exports[a]},(a,r)=>{if(!s)return;const l=e.deref().component;l?.requestUpdate(n,i?!r:r),t.c=!1},{sync:!0}),m=(e,t,a,r)=>{e.d.get=function(){const e=this.M[t]?.exports[a];return r?!e:e},e.d.set=function(e){const n=this.M[t];n.A!==a&&(n.exports[a]=r?!e:e)}},p=e=>{const t=class extends o.default{},a="function"==typeof e?e():e,r=Object.getOwnPropertyDescriptors(a);for(const[e,a]of Object.entries(r))Object.defineProperty(t.prototype,e,a),(0,l.property)()(t.prototype,e);return new((0,l.subclass)()(t))}}}]);