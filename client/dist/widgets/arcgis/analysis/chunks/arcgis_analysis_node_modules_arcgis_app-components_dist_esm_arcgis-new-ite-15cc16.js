/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-new-ite-15cc16.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-new-ite-15cc16"],{89165:(e,t,i)=>{i.r(t),i.d(t,{arcgis_new_item_pages_locator_select:()=>p});var r=i(87849),o=i(59317),s=i(72257),a=i(10578),c=i(74695),l=i(3826),h=i(95878),n=i(41473),d=i(58573);i(37762),i(86562),i(15332),i(29599),i(83692),i(931),i(93814),i(54251),i(1654),i(46904),i(88878),i(24869),i(15912),i(27137),i(76246),i(1536),i(60958),i(32478);const u=["locator-view","locator"],p=class{constructor(e){(0,r.r)(this,e),this.newItemUpdatePage=(0,r.c)(this,"newItemUpdatePage",7),this.handleAuthSwitchChange=e=>{this.storeAuth=e.detail},this.handleNewUrl=async e=>{const{type:t,url:i}=e;this.type=t,this.locatorUrl=i,this.isSecured=null,this.error=null,i&&(this.allowStoredAuth=!1,this.storeAuth=!1,this.loading=!0,await this.getServiceInfo(!1),this.loading=!1)},this.selectedLocatorType="locator-view",this.locatorUrl="",this.type=void 0,this.loading=!1,this.error=null,this.canPublishLocatorView=!0,this.allowStoredAuth=!1,this.storeAuth=!1,this.isSecured=null,this.serviceInfo=null,this.itemType=void 0}async componentWillLoad(){var e;const t=h.u.i18n;this.i18n=t.locatorSelect,this.urlTypeI18n=t.urlType,this.urlI18n=t.url,this.allowStoredAuth=l.a.allowStoredAuth,this.storeAuth=l.a.storeAuth,this.isSecured=l.a.isSecured,this.itemType=l.a.type;const{user:i,portal:r}=o.c;this.canPublishLocatorView=(0,a.j)(i,r),this.selectedLocatorType=null!==(e=l.a.locatorType)&&void 0!==e?e:"locator-view",this.canPublishLocatorView||(this.selectedLocatorType="locator"),"locator"===this.selectedLocatorType&&(this.locatorUrl=l.a.url)}async handleNext(){const{selectedLocatorType:e,urlI18n:t,locatorUrl:i,allowStoredAuth:r}=this;if(l.a.locatorType=e,"locator-view"===e){const e=await(0,a.y)();l.a.newItemMode="create",l.a.type="Geocoding Service",l.a.typeKeywords=["Geocoding filter"],l.a.thumbnailURL="https://static.arcgis.com/images/desktopapp.png",l.a.createAsServiceProxy=!0,l.a.url=e}else{if(!i)return this.inputRef.focusMainInput(),void(this.error=t.invalidUrl);const{portal:e}=o.c,{error:s,result:a}=(0,d.e)((0,d.h)(i,e.allSSL),e.isPortal);if(s)return void(this.error=t[s.code]);if("Geocoding Service"!==a)return void(this.error=t.invalidUrl);if(l.a.url=i,l.a.type="Geocoding Service",l.a.newItemMode="url",l.a.allowStoredAuth=r,l.a.storeAuth=this.storeAuth,l.a.isSecured=this.isSecured,l.a.serviceInfo=this.serviceInfo,this.storeAuth&&(l.a.checkAuth=!0),this.allowStoredAuth&&!this.storeAuth){this.loading=!0;const e=await this.getServiceInfo(!0);if(this.loading=!1,!e)return}}this.allowStoredAuth&&this.storeAuth?this.newItemUpdatePage.emit("auth"):this.newItemUpdatePage.emit("itemProperties")}async getServiceInfo(e=!1){const{urlTypeI18n:t,locatorUrl:i,type:r}=this,{error:o,result:a}=await(0,c.q)({url:i,customParameters:l.a.customParameters,type:r,checkAuth:e,storeAuth:l.a.storeAuth});if(o||!a)return"does not point to a GIS server"===(null==o?void 0:o.message)?this.error=t.serviceNotGIS:"serviceNotExist"===(null==o?void 0:o.code)?this.error=t.serviceNotExist:"unsupportedWFSVersion"===(null==o?void 0:o.code)?this.error=t.unsupportedWFSVersion:this.error=t[null==o?void 0:o.code]||t.serviceNotExist,!1;const{tags:h,title:d,isSecured:u,allowStoredAuth:p,serviceInfo:f}=a.serviceInfo;return this.allowStoredAuth=p,this.isSecured=u,this.serviceInfo=f,h&&(s.i.tags=h),l.a.initialTitle=(null==d?void 0:d.replace(n.s,""))||"",!0}render(){const{error:e,i18n:t,urlTypeI18n:i,loading:s,selectedLocatorType:a,locatorUrl:c,canPublishLocatorView:h,isSecured:n,allowStoredAuth:d,itemType:p}=this,{config:{helpBase:f,helpMap:y}}=o.c;return(0,r.h)("div",{key:"9b6debe13f45288cf4dea871df60cce2f7ae7094"},h&&(0,r.h)(r.F,{key:"238bd95914077565b41719276f8bc91d9c76739d"},(0,r.h)("arcgis-new-item-description",{key:"7f2fd4574777f3101e39ee506e84084e0c7e7bb1",header:t.heading}),(0,r.h)("calcite-tile-select-group",{key:"59facc5b6cf83eb0db9a9106073a296def92e6a4",layout:"vertical",class:"tile-select"},u.map(e=>(0,r.h)("calcite-tile-select",{checked:a===e,heading:t.options[e].title,description:t.options[e].description,name:"tile-layer-type","input-enabled":!0,width:"full",type:"radio",value:e,onCalciteTileSelectChange:()=>this.selectedLocatorType=e})))),"locator"===a&&(0,r.h)(r.F,{key:"913cb936fcbad74a72c76bbb23c14872061efb75"},(0,r.h)("arcgis-new-item-description",{key:"5e279f30d2d094e9177d429a8be8336b86ae5b86",header:t.url.heading,content:t.url.description}),(0,r.h)("arcgis-new-item-url",{key:"1e028a0ac41a4fb253ffcb9593355da39c6d1b6a",url:c,inputTitle:" ",placeholder:"https://myserver.com/arcgis/rest/services/folder/service/GeocodeServer",onNewItemUrlChange:e=>this.handleNewUrl(e.detail),ref:e=>this.inputRef=e}),(0,r.h)("div",{key:"2e35d76e55915ff2d148bbd6387e9bfc1c37872d",class:"custom-parameter-container"},(0,r.h)("arcgis-new-item-custom-parameters",{key:"372ae98e14f237356920af6ef5434bd04b2760a0",itemType:p})),d&&!!n&&(0,r.h)("arcgis-new-item-switch-card",{key:"fb73bd424977a57519b02517b4ba048d3472d965",onSwitchChange:this.handleAuthSwitchChange,header:i.storeAuth,headerLink:{text:i.learnMore,href:`${f}${y[120000597]}`},defaultChecked:l.a.storeAuth})),(0,r.h)("arcgis-new-item-loader",{key:"add1e2ea33dc0eb056dd8830c95f149f585979e8",active:s,text:i.getServiceInfo}),(0,r.h)("arcgis-new-item-alert",{key:"0d1dd722fb3626a512f13e532c3afe876d5454b0",active:!!e,description:e,onAlertDismiss:()=>this.error=null}))}get el(){return(0,r.a)(this)}};p.style=".tile-select:not(:last-child){margin-bottom:1.5rem}.custom-parameter-container{margin-top:1.5rem}"}}]);