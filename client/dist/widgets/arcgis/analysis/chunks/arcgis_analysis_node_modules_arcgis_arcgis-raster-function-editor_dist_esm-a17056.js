"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_arcgis-raster-function-editor_dist_esm-a17056"],{29422:(e,t,i)=>{i.d(t,{R:()=>g});var r=i(92265),a=(i(5294),i(13661),i(18423),i(21255),i(35431),i(69843)),l=i(38949),n=i(85740),s=i(33797),c=i(42335),o=(i(588),i(71802),i(44345),i(36596),i(23795),i(17902),i(56451),i(47453));i(33752);const d="rfx-cte-weighted-sum-table-editor",u={grid:`${d}__grid`,layerColumn:`${d}__layer-column`,fieldColumn:`${d}__field-column`,weightColumn:`${d}__weight-column`},h="weightedSumTableHelpClickHandler",g=class{constructor(e){(0,r.r)(this,e),this.rfxArgumentChange=(0,r.c)(this,"rfxArgumentChange"),this.helpActionClickEventHandlers=new Map,this.gridSchema={canAdd:!0,gridLayout:{},gridOptions:[],hasBorder:!0,hasHeader:!0,hasIdColumn:!0},this.updateValue=e=>{const{detail:{gridOptions:t}}=e,{inputArgs:i}=this.widgetArgs;if((0,l.i)(t)||(0,l.i)(i))return;const r=[],a=[],n=[];t.forEach((e,i)=>{if(i===t.length-1)return;const{layer:l,field:s,weight:c}=e;r.push(l),a.push(s),n.push((0,o.p)(c)??1)});const s=i.Rasters,c=i.Fields,d=i.Weights;(0,l.i)(s.value)?s.value={elements:r,type:"ArgumentArray"}:s.value.elements=r,c.value=a,d.value=n}}async componentWillLoad(){({strings:this.strings,dir:this.direction}=await(0,a.c)(this.hostElement,(0,r.d)("."))),await this.initGrid()}componentDidLoad(){this.attachHelpClickEventHandlers()}async checkValidity(){return await this.gridElement.checkValidity()}async createGridOptions(){const{inputArgs:e}=this.widgetArgs;if((0,l.i)(e))return;let t=0,i=0;const r=[],a=e.Rasters,s=e.Fields,c=e.Weights,o=a.value?.elements??a.value??[];if((0,l.i)(a)||(0,l.i)(s)||(0,l.i)(c)||(t=Math.max(o?.length,s.value?.length||0,c.value?.length||0)),(0===t||isNaN(t))&&r.push({id:0}),t>0&&((0,l.i)(c.value)||c.value.length<t)){let e=0;const i=c.value??[];for(;e<t;)(0,l.i)(c.value?.[e])&&i.push(1),e++;c.value=i}for(;i<t;){const e=o?.[i],t=e?.value;(0,l.i)(t?.url)||(e.value=await(0,n.w)(t,this.widgetArgs.inputLayers)),r.push({id:i,rasterElement:e,layer:e,field:s.value?.[i],weight:c.value?.[i]}),i++}return r}async initGrid(){const e={layer:{allowScalar:!1,label:this.strings.layer,uiType:c.G.raster,style:u.layerColumn,validationRule:{required:!0}},field:{label:this.strings.field,uiType:c.G.field,style:u.fieldColumn},weight:{label:this.strings.weight,uiType:c.G.number,style:u.weightColumn,validationRule:{required:!0,defaultValue:0,initialValue:1}}},t=await this.createGridOptions();this.gridSchema={...this.gridSchema,gridLayout:e,gridOptions:t}}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.strings.weightedSumTable,referenceElement:this.weightedSumTableElement,helpTextID:this.widgetArgs.helpTextIDs?.weightedsum_weightedsumtable});this.helpActionClickEventHandlers.set(h,e)}render(){return(0,r.h)("div",{key:"e69e1588aff28db8ab1720964471d829e47332b0"},(0,r.h)("calcite-label",{key:"f9fc294f2c32d16e60ab28125d490e76ef5b2f87",alignment:"start",scale:l.s.scale??s.U.Scale,layout:"default",ref:e=>{this.weightedSumTableElement=e}},(0,r.h)("rfx-label",{key:"53efd6088fafd8ff0b5c4e530d8f9b19575ff3d2",label:this.strings.weightedSumTable,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(h)()}),(0,r.h)("rfx-grid",{key:"583f350509e9072ecff3957a1b8ba0cb442ec087",canAdd:this.gridSchema.canAdd,class:u.grid,gridLayout:this.gridSchema.gridLayout,gridOptions:this.gridSchema.gridOptions,hasBorder:this.gridSchema.hasBorder,hasHeader:this.gridSchema.hasHeader,hasIdColumn:this.gridSchema.hasIdColumn,inputLayers:this.widgetArgs.inputLayers,onRfxGridOptionChange:this.updateValue,rfxBrowseLayerClick:this.widgetArgs.onRfxBrowseLayerClick,ref:e=>{this.gridElement=e}})))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,r.a)(this)}};g.style=":root{--calcite-color-brand:#007ac2;--calcite-color-brand-hover:#00619b;--calcite-color-brand-press:#004874;--calcite-color-status-info:#00619b;--calcite-color-status-success:#35ac46;--calcite-color-status-warning:#edd317;--calcite-color-status-danger:#d83020;--calcite-color-status-danger-hover:#a82b1e;--calcite-color-status-danger-press:#7c1d13;--calcite-color-background:#f8f8f8;--calcite-color-foreground-1:#ffffff;--calcite-color-foreground-2:#f3f3f3;--calcite-color-foreground-3:#eaeaea;--calcite-color-text-1:#151515;--calcite-color-text-2:#4a4a4a;--calcite-color-text-3:#6a6a6a;--calcite-color-text-inverse:#ffffff;--calcite-color-text-link:#00619b;--calcite-color-border-1:#cacaca;--calcite-color-border-2:#d4d4d4;--calcite-color-border-3:#dfdfdf;--calcite-color-border-input:#949494;--rfx-quarter-spacing:0.25rem;--rfx-half-spacing:0.5rem;--rfx-three-quarter-spacing:0.75rem;--rfx-full-spacing:1rem;--rfx-component-default-width:100%;--rfx-ui-border-input:var(--calcite-color-border-2);--rfx-popover-content-min-height:30vh;--rfx-popover-content-max-height:60vh;--rfx-popover-content-height:45vh;--rfx-widget-content-height:30vh;--rfx-modal-width-small:32rem}.rfx-cte-weighted-sum-table-editor__grid table{width:100%;table-layout:fixed}.rfx-cte-weighted-sum-table-editor__grid table thead tr th:first-child{width:7%}.rfx-cte-weighted-sum-table-editor__grid table thead tr th:last-child{width:7%}.rfx-cte-weighted-sum-table-editor__grid table tbody tr td:first-child{width:7%}.rfx-cte-weighted-sum-table-editor__grid table tbody tr td:last-child{width:7%}.rfx-cte-weighted-sum-table-editor__layer-column{width:40%}.rfx-cte-weighted-sum-table-editor__field-column{width:30%}.rfx-cte-weighted-sum-table-editor__weight-column{width:16%}"},47453:(e,t,i)=>{i.d(t,{a:()=>o,b:()=>d,d:()=>h,f:()=>c,i:()=>l,l:()=>g,p:()=>s,s:()=>n});var r=i(69843),a=i(38949);function l(e){return null!=e&&!1===Number.isNaN(e)&&!0===Number.isFinite(e)}function n(e,t){let i;if(null!==e){const r="string"==typeof e?Number.parseFloat(e):e;l(r)?i=r:l(t)&&(i=t)}return void 0===i?"":`${i}`}function s(e){if(!(0,a.i)(e))return Number.parseFloat(e)}function c(e,t=3){if(!(0,a.i)(e))return Number.parseFloat(e.toFixed(t))}function o(e,t){let i="";if(!(0,a.i)(e)&&!Number.isNaN(e)){const a=(0,r.g)().locale;i=Intl.NumberFormat(a,t).format(Number(e))}return i}function d(e){return!((0,a.i)(e)||isNaN(Number(e)))}function u(e,t){if((0,a.i)(e))return e;const i=e.toLowerCase().indexOf("e")+1;return(0,a.i)(i)?t(e):e.replace(/[eE]*$/g,"").substring(0,i).concat(e.slice(i).replace(/[eE]/g,"")).split(/[eE]/).map((e,i)=>t(1===i?e.replace(/\./g,""):e)).join("e").replace(/^e/,"1e")}function h(e){const t=(0,r.g)().locale,i=new Intl.NumberFormat(t).formatToParts(-12345678.9),a=i.find(e=>"group"===e.type).value,l=0===a.trim().length||" "==a?"\xa0":a,n="bs"===t?",":i.find(e=>"decimal"===e.type).value,s=i.find(e=>"minusSign"===e.type).value;return u(e,e=>e.replace(new RegExp(`[${s}]`,"g"),"-").replace(new RegExp(`[${l}]`,"g"),"").replace(new RegExp(`[${n}]`,"g"),"."))}function g(e){const t=(0,r.g)().locale,i=new Intl.NumberFormat(t).formatToParts(-12345678.9),l=i.find(e=>"group"===e.type).value,n=0===l.trim().length||" "==l?"\xa0":l,s={decimal:"bs"===t?",":i.find(e=>"decimal"===e.type).value,minusSign:i.find(e=>"minusSign"===e.type).value,numberFormatter:new Intl.NumberFormat(t,{useGrouping:!1})};return u(e,e=>d(e.trim())?new a.B(e.trim()).format(s).replace(new RegExp(`[${l}]`,"g"),n):e)}},58811:(e,t,i)=>{i.r(t),i.d(t,{rfx_cte_weighted_sum_table_editor:()=>r.R});var r=i(29422);i(92265),i(5294),i(13661),i(18423),i(21255),i(35431),i(69843),i(38949),i(32513),i(33752),i(44345),i(85740),i(588),i(55448),i(2924),i(11840),i(52373),i(440),i(66744),i(42335),i(33797),i(71802),i(36596),i(23795),i(17902),i(56451),i(47453)}}]);