/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-fa86b7.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-fa86b7"],{22676:(e,t,s)=>{s.r(t),s.d(t,{ArcgisMapConfigSymbolStylerBrowseStyles:()=>g});var i=s(73679),r=s(4395),o=s(28252),l=s(65722),a=s(55535),n=s(85643),c=s(73801);const d=r.AH`.styles-dialog{--calcite-dialog-size-y: min(900px, calc(80vh + 100px) );--calcite-dialog-size-x: 1080px;--calcite-dialog-content-space: 0px}`,m="arcgis-symbol-styler-storage-styles";class g extends c.WF{constructor(){super(...arguments),this.itemBrowserNode=(0,n._)(),this.selectedCount=0,this.arcgisSymbolStylerBrowseStylesClose=(0,c.lh)()}static{this.properties={items:16,pagination:16,selectedCount:16,editGeometry:1,excludeItemIds:0,portal:0,_messages:0}}static{this.styles=d}load(){const{editGeometry:e}=this,t=(0,a.g)(m,!0)||{};this.savedStyleIds=t?.[e]||[]}bucketSelectRefHandler(e){this.portal.isPortal&&(e.options=["my","favorites","group","org","living atlas"])}saveNewStyleItemsInLocalStorage(e){const{editGeometry:t}=this,s=(0,a.g)(m,!0)||{},i=s?.[t]||[];if(e.map(e=>e.id).forEach(e=>{i.includes(e)||i.push(e)}),this.savedStyleIds=i,s[t]=i,["point","polygon"].includes(t)){const t=e.filter(e=>e.typeKeywords.includes("lineSymbol")).map(e=>e.id),i=s.line||[];t.forEach(e=>{i.includes(e)||i.push(e)}),i.length&&(s.line=i)}if(["point","line"].includes(t)){const t=e.filter(e=>e.typeKeywords.includes("polygonSymbol")).map(e=>e.id),i=s.polygon||[];t.forEach(e=>{i.includes(e)||i.push(e)}),i.length&&(s.polygon=i)}if(["line","polygon"].includes(t)){const t=e.filter(e=>e.typeKeywords.includes("pointSymbol")).map(e=>e.id),i=s.point||[];t.forEach(e=>{i.includes(e)||i.push(e)}),i.length&&(s.point=i)}(0,a.s)(m,s)}render(){const{portal:e,editGeometry:t,savedStyleIds:s,excludeItemIds:i,_messages:a}=this,c=e.user;let d="";s?.forEach(e=>d+=` -id:${e}`),i?.length&&i.forEach(e=>d+=` -id:${e}`);const m=`type:"Style" typekeywords:"web2d" ${"point"===t?'typekeywords:"pointSymbol"':"line"===t?'typekeywords:"lineSymbol"':'typekeywords:"polygonSymbol"'}${d}`,g=`${(0,l.a)(e)}/home/`;return r.qy`<calcite-dialog class="styles-dialog" open modal escape-disabled outside-close-disabled @calciteDialogClose=${()=>this.arcgisSymbolStylerBrowseStylesClose.emit()} .heading=${this._messages.addStyles}><arcgis-item-browser .view=${"list"} .selection=${"multiple"} .filter=${m} .portal=${e} .user=${c??void 0} .api=${4} .config=${{baseUrl:g}} @arcgisItemBrowserUpdate=${e=>{const{results:t,num:s,start:i,total:r}=e.detail;this.items=t,this.pagination={start:i,num:s,total:r}}} @arcgisItemBrowserSelect=${()=>this.selectedCount=this.itemBrowserNode.value?.selectedItems?.length} ${(0,n.K)(this.itemBrowserNode)}><arcgis-item-browser-top-bar slot=top-bar><arcgis-item-browser-bucket-select slot=bucket ${(0,n.K)(this.bucketSelectRefHandler)}></arcgis-item-browser-bucket-select><arcgis-item-browser-search slot=search .term=${""}></arcgis-item-browser-search></arcgis-item-browser-top-bar><arcgis-item-browser-sort .options=${["modified","title","relevance"]} slot=sort></arcgis-item-browser-sort><arcgis-item-browser-filters slot=filters>${e.user&&r.qy`<arcgis-item-browser-filter-folder></arcgis-item-browser-filter-folder>`||""}<arcgis-item-browser-filter-categories></arcgis-item-browser-filter-categories><arcgis-item-browser-filter-sharing></arcgis-item-browser-filter-sharing><arcgis-item-browser-filter-collaborations></arcgis-item-browser-filter-collaborations><arcgis-item-browser-filter-tags></arcgis-item-browser-filter-tags><arcgis-item-browser-filter-content-status></arcgis-item-browser-filter-content-status><arcgis-item-browser-filter-date property=modified></arcgis-item-browser-filter-date><arcgis-item-browser-filter-date property=created></arcgis-item-browser-filter-date></arcgis-item-browser-filters><arcgis-item-browser-content slot=content>${(0,o.u)(this.items||[],e=>`card-${e.id}`,t=>r.qy`<arcgis-item-browser-card .item=${t} .portal=${e} .baseUrl=${g} .showItemType=${!0} .showDateUpdated=${!0} .showOwner=${!0} .showSummary=${!0} .showThumbnail=${!0}><calcite-button .label=${a.viewItemDetail} scale=s appearance=outline-fill kind=neutral slot=actions-end target=_blank .href=${`${g}/item.html?id=${t.id}`}>${a.viewItemDetail}</calcite-button></arcgis-item-browser-card>`)}</arcgis-item-browser-content><arcgis-item-browser-pagination slot=pagination .total=${this.pagination?.total} .start=${this.pagination?.start} .num=${this.pagination?.num}></arcgis-item-browser-pagination></arcgis-item-browser><calcite-button slot=footer-end appearance=outline-fill alignment=center @click=${()=>this.arcgisSymbolStylerBrowseStylesClose.emit()}>${this._messages.cancel}</calcite-button><calcite-button slot=footer-end alignment=center appearance=solid .disabled=${!this.selectedCount} @click=${()=>{this.saveNewStyleItemsInLocalStorage(this.itemBrowserNode.value.selectedItems),this.arcgisSymbolStylerBrowseStylesClose.emit(this.itemBrowserNode.value.selectedItems.length?this.itemBrowserNode.value.selectedItems.map(e=>e.id):[])}}>${this._messages.add}</calcite-button></calcite-dialog>`}}(0,i.c)("arcgis-map-config-symbol-styler-browse-styles",g)},28252:(e,t,s)=>{s.d(t,{u:()=>a});var i=s(85282),r=s(34670),o=s(42466);const l=(e,t,s)=>{const i=new Map;for(let r=t;r<=s;r++)i.set(e[r],r);return i},a=(0,r.u$)(class extends r.WL{constructor(e){if(super(e),e.type!==r.OA.CHILD)throw Error("repeat() can only be used in text expressions")}dt(e,t,s){let i;void 0===s?s=t:void 0!==t&&(i=t);const r=[],o=[];let l=0;for(const t of e)r[l]=i?i(t,l):l,o[l]=s(t,l),l++;return{values:o,keys:r}}render(e,t,s){return this.dt(e,t,s).values}update(e,[t,s,r]){const a=(0,o.cN)(e),{values:n,keys:c}=this.dt(t,s,r);if(!Array.isArray(a))return this.ut=c,n;const d=this.ut??=[],m=[];let g,u,p=0,w=a.length-1,y=0,f=n.length-1;for(;p<=w&&y<=f;)if(null===a[p])p++;else if(null===a[w])w--;else if(d[p]===c[y])m[y]=(0,o.lx)(a[p],n[y]),p++,y++;else if(d[w]===c[f])m[f]=(0,o.lx)(a[w],n[f]),w--,f--;else if(d[p]===c[f])m[f]=(0,o.lx)(a[p],n[f]),(0,o.Dx)(e,m[f+1],a[p]),p++,f--;else if(d[w]===c[y])m[y]=(0,o.lx)(a[w],n[y]),(0,o.Dx)(e,a[p],a[w]),w--,y++;else if(void 0===g&&(g=l(c,y,f),u=l(d,p,w)),g.has(d[p]))if(g.has(d[w])){const t=u.get(c[y]),s=void 0!==t?a[t]:null;if(null===s){const t=(0,o.Dx)(e,a[p]);(0,o.lx)(t,n[y]),m[y]=t}else m[y]=(0,o.lx)(s,n[y]),(0,o.Dx)(e,a[p],s),a[t]=null;y++}else(0,o.KO)(a[w]),w--;else(0,o.KO)(a[p]),p++;for(;y<=f;){const t=(0,o.Dx)(e,m[f+1]);(0,o.lx)(t,n[y]),m[y++]=t}for(;p<=w;){const e=a[p++];null!==e&&(0,o.KO)(e)}return this.ut=c,(0,o.mY)(e,m),i.c0}})},55535:(e,t,s)=>{function i(e,t,s){window.localStorage.setItem(e,JSON.stringify(t))}function r(e){window.localStorage.removeItem(e)}function o(e,t){const s=window.localStorage.getItem(e);return s&&t?JSON.parse(s):s}function l(e,t,s){window.sessionStorage.setItem(e,JSON.stringify(t))}function a(e,t){const s=window.sessionStorage.getItem(e);return s&&t?JSON.parse(s):s}s.d(t,{a:()=>l,b:()=>a,g:()=>o,r:()=>r,s:()=>i})},65722:(e,t,s)=>{s.d(t,{a:()=>o,g:()=>l,o:()=>a});var i=s(44345);const r=e=>e&&!e.endsWith("/")?`${e}/`:e;function o(e){const{customBaseUrl:t,portalHostname:s,urlKey:i}=e,{protocol:r}=window.location;return`${r}//${i?`${i}.${t}`:s}`}function l(e){return r(e.restUrl)}async function a(e){if(!e?.user)return!1;const t=`${l(e)}portals/self/signinSettings`,s=await(0,i.default)(t,{query:{f:"json",async:!1},responseType:"json"});return!(s?.data&&!s.data.blockBetaApps)}}}]);