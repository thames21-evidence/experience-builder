/*! For license information please see arcgis_analysis_node_modules_arcgis_common-components_dist_components_arcg-615088.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_common-components_dist_components_arcg-615088"],{42984:(t,n,e)=>{e.d(n,{u:()=>r});var i=e(83552),s=e(22229);const r=(0,i.yr)(s.g)},51584:(t,n,e)=>{e.r(n),e.d(n,{ArcgisHistogram:()=>v});var i=e(22229),s=e(42984),r=e(52797),a=e(73801),l=e(4395);const o="content",c="svg",u="label",h="data-line",m="average-data-line",g="data-line-symbol",d=l.AH`:host{display:flex;--arcgis-histogram-bar-color: var(--calcite-color-border-1);--arcgis-histogram-stop-color: color-mix(in srgb, var(--calcite-color-brand) 80%, transparent)}.content{display:flex;flex:1;direction:ltr}.svg{display:inline-block;flex:1;overflow:hidden}.data-line{stroke:#888;stroke-width:1px;shape-rendering:crispEdges}.average-data-line{stroke-width:1px;shape-rendering:crispEdges;stroke:#444}.label,.data-line-symbol{font-size:12px;stroke:#fff;stroke-width:2px;paint-order:stroke;unicode-bidi:plaintext}.data-line-symbol{font-family:"Georgia, serif",sans-serif;font-style:italic}`;function f(t,n,e,i,s){const r=[];return null!=t&&r.push({value:t,symbol:"x\u0304",lineClass:m}),null!=n&&null!=e&&null!=i&&r.push(...function(t,n,e,i){const s=.06*(n-t);return function(t,n){if(null==n||null==t)return[];const e=1,i=[];for(let s=-1*e;s<=e;s++)0!==s&&i.push(n+s*t);return i}(e,i).filter(t=>Math.abs(i-t)>s).map((t,n,e)=>{const s=e.length/2,r=n>=s?n-s+1:s-n;return{symbol:`${t>i?"+":"-"}${1===r?"":r}\u03c3`,value:t}})}(e,i,n,t)),s&&r.push(...s),r}function p(t,n,e,i){if(!t||0===t.length)return e;if(b(t)){const s=function(t,n){const e=[];for(const i of t){const t=Math.max(0,Math.min(n.maxValue,i.maxValue)-Math.max(n.minValue,i.minValue));t>0&&e.push({color:i.color,weight:t})}return e.sort((t,n)=>n.weight-t.weight)}(t,n);if(0===s.length)return e;if(i){const{color:t=e,weight:n}=s[0],{color:i=e,weight:r}=s[1]??s[0],a=n+r;return`color-mix(in srgb, ${t} ${n/a*100}%, ${i} ${r/a*100}%)`}return s[0].color??e}return function(t,n){const e=(n.maxValue-n.minValue)/2+n.minValue;if(e>t[t.length-1].value)return t[t.length-1].color;for(let n=0;n<t.length-1;n++){const i=t[n],s=t[n+1];if(e<=i.value)return i.color;if(e<s.value){const t=(e-i.value)/(s.value-i.value)*100;return`color-mix(in srgb, ${i.color}, ${s.color} ${t}%)`}}return t[t.length-1].color}(t,n)}function b(t){return null!=t[0]&&"minValue"in t[0]}function $(t){if(!t)return;if("string"==typeof t)return t;if(Array.isArray(t))return`rgba(${t[0]}, ${t[1]}, ${t[2]}, ${t[3]??1})`;const{r:n,g:e,b:i,a:s=1}=t;return`rgba(${n}, ${e}, ${i}, ${s})`}const x="var(--arcgis-histogram-bar-color)";class v extends a.WF{constructor(){super(...arguments),this._messages=(0,s.u)(),this._normalizedStops=null,this.containerDimensions=[0,0],this.icon="graph-histogram",this.layout="horizontal",this.colorBlendingEnabled=!1}static{this.properties={containerDimensions:16,colorStops:0,icon:3,average:11,messageOverrides:0,standardDeviation:11,bins:0,dataLines:0,label:1,labelFormatFunction:0,layout:3,max:11,min:11,colorBlendingEnabled:5}}static{this.styles=d}loaded(){const t=new ResizeObserver(t=>{for(const n of t){const{width:t,height:e}=n.contentRect;this.containerDimensions=[t,e]}}),{width:n,height:e}=this.el.getBoundingClientRect();this.containerDimensions=[n,e],t.observe(this.el)}willUpdate(t){t.has("colorStops")&&(this._normalizedStops=function(t,n,e){if(!t||0===t.length)return null;if(b(t)){const i=t.map(t=>({...t,color:$(t.color??e)}));return i.unshift({color:n,minValue:Number.NEGATIVE_INFINITY,maxValue:i[0].minValue}),i.push({color:n,minValue:i[i.length-1].maxValue,maxValue:Number.POSITIVE_INFINITY}),i}return t.map(t=>({...t,color:$(t.color??e)}))}(this.colorStops,x,"var(--arcgis-histogram-stop-color)"))}render(){const{label:t}=this;return this.containerDimensions?l.qy`<div role=img .ariaLabel=${t??void 0} class=${(0,a.CP)(o)}>${this._renderContent()}</div>`:null}_renderContent(){const{containerDimensions:[t,n]}=this,e="bg-fill";return l.qy`<svg class=${(0,a.CP)(c)} xmlns=http://www.w3.org/2000/svg>${l.JW`<defs><clipPath id=${e}><rect height=${n??a.s6} width=${t??a.s6} x=0 y=0 /></clipPath></defs><g style=${(0,a.zl)({clipPath:`url(#${e})`})}><g>${this._renderBars()}</g></g><g>${this._renderLines()}</g>`}</svg>`}_renderBars(){const{bins:t,_messages:n}=this,e=function(t,n,e,i,s){const[r,a]=s;if(!t||0===a||0===r||null==e||null==n)return null;const l=e-n,o=(t.length>1?t[t.length-1].maxValue-t[0].minValue:0)/l,[c,u]="vertical"===i?[a*o,r]:[a,r*o],h=t?t.map(t=>t.count):[],m=Math.max(...h);return t.map(n=>{const[s,o]="vertical"===i?[c/t.length,0!==m?n.count/m*u:0]:[0!==m?n.count/m*c:0,u/t.length],{maxValue:h}=n,g=e-h,[d,f]="vertical"===i?[0,g*(a/l)]:[r-o-g*(r/l),a-s];return[d,f,o,s]})}(this.bins,this.min,this.max,this.layout,this.containerDimensions);return e&&t?e.map((e,i)=>{const[s,o,c,u]=e,h=t[i],m=n?.barLabel?(0,r.substitute)(n.barLabel,h):"";return l.JW`<rect style=${(0,a.zl)({fill:p(this._normalizedStops,h,x,this.colorBlendingEnabled)})} .ariaLabel=${m} data-index=${i??a.s6} height=${u??a.s6} role=img shape-rendering=crispEdges stroke-width=0 width=${c??a.s6} x=${s??a.s6} y=${o??a.s6} />`}):null}_renderLines(){return f(this.average,this.standardDeviation,this.min,this.max,this.dataLines)?.map(t=>y({dataLine:t,containerDimensions:this.containerDimensions,layout:this.layout,min:this.min,max:this.max,labelFormatFunction:this.labelFormatFunction}))}}const y=t=>{const{containerDimensions:n,layout:e,min:i,max:s,dataLine:r,labelFormatFunction:o}=t,c=null!=s&&null!=i?s-i:0,[m,d,f,p]=function(t,n,e,i,s){if(null==e)return[0,0,0,0];const r=Math.round((s-e)/i*100)/100,[a,l]=t;if("vertical"===n){let t=l-r*l||1;return t=Math.round(t)+.5,[0,"100%",t,t]}let o=r*a||1;return o=Math.round(o)+.5,[o,o,"100%",0]}(n,e,i,c,r.value),[b,$]=function(t,n,e,i,s){if(null==e)return[0,0];const r=Math.round((s-e)/i*100)/100,[a,l]=t;return"vertical"===n?[a,l-r*l]:[0,r*a]}(n,e,i,c,r.value),x="symbol"in r?[l.JW`<tspan class=${(0,a.CP)(g)}>${r.symbol}</tspan>`,l.JW`<tspan>${o?o(r.value):r.value}</tspan>`]:r.label,v="lineClass"in r&&r.lineClass?r.lineClass:h;return l.JW`<g><title>${r.value}</title><line class=${(0,a.CP)(v)} shape-rendering=crispEdges x1=${m??a.s6} x2=${d??a.s6} y1=${f??a.s6} y2=${p??a.s6} /><text class=${(0,a.CP)(u)} text-anchor=end transform=${("horizontal"===e?"rotate(270)":void 0)??a.s6} x=${b??a.s6} y=${$-2}>${x}</text></g>`};(0,i.c)("arcgis-histogram",v)}}]);