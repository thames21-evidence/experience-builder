/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-e9f20c.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-e9f20c"],{63401:(e,t,i)=>{i.r(t),i.d(t,{ArcgisMapConfigFloorLayerPicker:()=>r});var s=i(73679),a=i(85643),l=i(4395),c=i(73801);const n=l.AH`calcite-label span{width:100%;display:flex;justify-content:space-between}calcite-label span calcite-action{margin-left:.3em}.arcgis--rtl{calcite-label span calcite-action{margin-left:auto;margin-right:.3em}}`;class r extends c.WF{constructor(){super(...arguments),this.open=!1,this.geometryType="polygon",this.iconEnd="pencil",this.placement="bottom-start",this.arcgisLayerPickerListChange=(0,c.lh)()}static{this.properties={open:16,geometryType:1,iconEnd:1,label:1,placement:1,requiredFields:0,selectedLayer:0,_messages:0,view:0}}static{this.styles=n}async setFocus(){this.panel?await this.panel.setFocus():await Promise.resolve()}buttonRefHandler(e){e&&(this.triggerButton=e)}panelRefHandler(e){e&&(this.panel=e)}checkRequiredFields(e){const{requiredFields:t}=this;return!t||!e.fieldsIndex||t.every(t=>e.fieldsIndex.get(t))}getCompatibleLayers(){const{geometryType:e}=this,{map:t}=this.view,i=t?.allLayers;let s=[];return i?.forEach(t=>{if("map-image"===t.type){const e=t.allSublayers.filter(e=>!!e.fieldsIndex).toArray();s=s.concat(e)}else("feature"===t.type&&!e||t?.geometryType===e)&&s.push(t)}),s}getLayers(){const e=this.getCompatibleLayers();return e?.length?e.filter(e=>this.checkRequiredFields(e)):[]}render(){const{selectedLayer:e}=this,t=e?.title||this._messages.none,i=this.getLayers(),s=this.open||!i?.length,c={};return e&&(c[e.id]=e),l.qy`<calcite-label>${this.label}<span><calcite-button appearance=outline-fill alignment=icon-end-space-between kind=neutral icon-end=pencil width=full .disabled=${s} @click=${e=>{e.stopPropagation(),this.open=!this.open,setTimeout(()=>{this.setFocus()},25)}} ${(0,a.K)(this.buttonRefHandler)}>${t}</calcite-button><calcite-action icon=x scale=s .text=${this._messages.clear} .disabled=${!this.selectedLayer} @click=${()=>{this.selectedLayer=void 0,this.arcgisLayerPickerListChange.emit(void 0)}}></calcite-action></span></calcite-label><calcite-popover .label=${this.label} pointer-disabled .referenceElement=${this.triggerButton} .open=${this.open} .placement=${this.placement} @calcitePopoverClose=${()=>this.open=!1}><calcite-panel .heading=${this.label} ${(0,a.K)(this.panelRefHandler)}><arcgis-map-config-floor-layer-list .layers=${i} .selection=${c} ._messages=${this._messages} @arcgisLayerListChange=${e=>{this.selectedLayer=e.detail[0],this.arcgisLayerPickerListChange.emit(this.selectedLayer)}}></arcgis-map-config-floor-layer-list><calcite-button width=full slot=footer @click=${()=>this.open=!1}>${this._messages.done}</calcite-button></calcite-panel></calcite-popover>`}}(0,s.c)("arcgis-map-config-floor-layer-picker",r)}}]);