/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-fc2528.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-fc2528"],{46289:(e,t,c)=>{c.d(t,{a:()=>s,g:()=>l,m:()=>n});var i=c(91813);function l(e){switch(e?.geometry?.type){case"point":return"text"===e?.symbol?.type?"text":"point";case"polyline":return"polyline";default:return"polygon"}}function s(e){const t=e.clone(),{paths:c,spatialReference:l}=t,s=c[0][0],n=c[0][2]??c[0][1],o=c[0][2]?c[0][1]:[(s[0]+n[0])/2,(s[1]+n[1])/2];2===c[0].length&&c[0].splice(1,0,o);const r=[[[...s],a(s,o,n)]];return new i.default({curvePaths:r,spatialReference:l})}function a(e,t,c){const[i,l]=e,[s,a]=t,[n,o]=c,r=2*s-i/2-n/2,h=2*a-l/2-o/2;return{b:[[n,o],[i+2/3*(r-i),l+2/3*(h-l)],[n+2/3*(r-n),o+2/3*(h-o)]]}}const n=768},76224:(e,t,c)=>{c.r(t),c.d(t,{ArcgisMapConfigSketchLayerEditorTools:()=>r});var i=c(73679),l=c(4395),s=c(46289),a=(c(72885),c(56451),c(5077),c(83930),c(16161),c(63438),c(18423),c(96086),c(91813),c(21255),c(13078),c(21303),c(12627),c(81822),c(85643)),n=c(73801);const o=l.AH`.popover{--calcite-popover-z-index: 100}.hidden{display:none}`;class r extends n.WF{constructor(){super(...arguments),this.sketchToolsPopoverElement=(0,a._)(),this.sketchPointElement=(0,a._)(),this.sketchPolyLineElement=(0,a._)(),this.sketchPolygonElement=(0,a._)(),this.sketchRectangleElement=(0,a._)(),this.sketchCircleElement=(0,a._)(),this.sketchTextElement=(0,a._)(),this.sketchBezierCurveElement=(0,a._)(),this.sketchSelectElement=(0,a._)(),this.sketchRectangleSelectElement=(0,a._)(),this.sketchLassoSelectElement=(0,a._)(),this.isOpen=!1,this.sketchToolsToHide=[],this.hideSelectionTools=!1,this.arcgisActionOnDrawFeatures=(0,n.lh)(),this.arcgisActionOnSelectFeatures=(0,n.lh)()}static{this.properties={isOpen:16,refElement:0,mapNotesFeatures:0,sketchToolsToHide:0,activeSketchTool:1,hideSelectionTools:5,activeSelectTool:1,popoverProps:0,sketchLayerEditorState:0}}static{this.styles=o}async activateSingleSelection(){this.hideSelectionTools&&(this.hideSelectionTools=!1,this.requestUpdate());const{sketchLayerEditorState:e}=this,{_messages:t}=e;this.actionOnSelectFeatures(t.selectText,this.sketchSelectElement.value)}async reposition(){this.sketchToolsPopoverElement.value?.reposition()}load(){const{sketchLayerEditorState:e}=this;this.sketchLayerEditorSVModel=e.sketchLayerEditorSVModel,this.isOpen=!0}loaded(){const{sketchLayerEditorState:e}=this,{_messages:t}=e;if(this.mapNotesFeatures?.length){let e=[],c=[],i=[],l=[];this.mapNotesFeatures.forEach(t=>{switch((0,s.g)(t)){case"polyline":c=[...c,t];break;case"polygon":i=[...i,t];break;case"text":l=[...l,t];break;default:e=[...e,t]}}),this.activeSelectTool&&("select"===this.activeSelectTool?this.actionOnSelectFeatures(t.selectText,this.sketchSelectElement.value):this.actionOnSelectFeatures(t.rectangleLassoSelect,this.sketchRectangleSelectElement.value,"rectangle")),e.length&&this.sketchLayerEditorSVModel.updatePoint(e),c.length&&this.sketchLayerEditorSVModel.updateLine(c),i.length&&this.sketchLayerEditorSVModel.updatePolygon(i),l.length&&this.sketchLayerEditorSVModel.updateText(l)}else{const e={point:this.sketchPointElement.value,polygon:this.sketchPolygonElement.value,polyline:this.sketchPolyLineElement.value,circle:this.sketchCircleElement.value,rectangle:this.sketchRectangleElement.value,text:this.sketchTextElement.value};let t,c;if(this.activeSketchTool)t=this.activeSketchTool,c=e[t];else{let i=["point","polyline","polygon","rectangle","circle","text"];i=i.filter(e=>!this.sketchToolsToHide.includes(e)),t=i.length?i[0]:"point",c=e[t]}const i=this.getActiveSketchMessage(t);this.actionOnDrawFeatures(t,i,c)}}getActiveSketchMessage(e){const{sketchLayerEditorState:t}=this,{_messages:c}=t;switch(e){case"point":return c.addStamp;case"polyline":case"polygon":return c.startFinishDrawing;case"rectangle":return c.addRectangle;case"circle":return c.addCircle;case"text":return c.addText;default:return""}}actionOnDrawFeatures(e,t,c){this.clearActiveSelection(),c&&(this.activeSketchTool=e,this.activeSelectTool=void 0,c.active=!0,this.arcgisActionOnDrawFeatures.emit({tool:e,sketchMessage:t}))}actionOnSelectFeatures(e,t,c){const{active:i=!1}=t;this.clearActiveSelection(),t&&(t.active=!i,this.activeSketchTool=void 0,this.activeSelectTool=t.active?c??"select":void 0,this.sketchLayerEditorSVModel.cancel(),this.arcgisActionOnSelectFeatures.emit({sketchMessage:i?"":e,multipleSelectTool:!i&&c||void 0}))}clearActiveSelection(){[this.sketchPointElement.value,this.sketchPolyLineElement.value,this.sketchBezierCurveElement.value,this.sketchPolygonElement.value,this.sketchRectangleElement.value,this.sketchCircleElement.value,this.sketchTextElement.value,this.sketchSelectElement.value,this.sketchRectangleSelectElement.value,this.sketchLassoSelectElement.value].forEach(e=>{e&&(e.active=!1)})}render(){const{sketchLayerEditorState:e,popoverProps:t}=this,{_messages:c}=e,i=(window.innerWidth<=s.m?t?.mobilePlacement:t?.placement)??"leading-start";return this.el.classList.add("js-app-flyout"),l.qy`<calcite-popover .open=${this.isOpen} .placement=${i} .referenceElement=${t?.refElement??this.refElement} .offsetDistance=${t?.offsetDistance??15} .offsetSkidding=${t?.offsetSkidding??0} .overlayPositioning=${t?.overlayPositioning??"fixed"} .triggerDisabled=${t?.triggerDisabled??!0} .flipDisabled=${t?.flipDisabled??!1} pointer-disabled focus-trap-disabled .label=${c.sketch} class="popover" @calcitePopoverBeforeClose=${()=>this.sketchToolsPopoverElement.value.open=!0} ${(0,a.K)(this.sketchToolsPopoverElement)}><calcite-action-pad position=start layout=vertical expand-disabled>${this.renderDrawFeatures()}${this.renderSelectFeatures()}</calcite-action-pad></calcite-popover>`}renderDrawFeatures(){const{sketchLayerEditorState:e,sketchToolsToHide:t}=this,{_messages:c}=e;return l.qy`<calcite-action-group .label=${c.drawFeatures}>${!t.includes("point")&&l.qy`<calcite-action .text=${c.stamp} .label=${c.stamp} title=${c.stamp??n.s6} icon=pin alignment=center @click=${()=>this.actionOnDrawFeatures("point",c.addStamp,this.sketchPointElement.value)} ${(0,a.K)(this.sketchPointElement)}></calcite-action>`||""}${!t.includes("polyline")&&l.qy`<calcite-action .text=${c.line} .label=${c.line} title=${c.line??n.s6} icon=line alignment=center @click=${()=>this.actionOnDrawFeatures("polyline",c.startFinishDrawing,this.sketchPolyLineElement.value)} ${(0,a.K)(this.sketchPolyLineElement)}></calcite-action>`||""}${!t.includes("bezier-curve")&&l.qy`<calcite-action .text=${c.curvedLine} .label=${c.curvedLine} title=${c.curvedLine??n.s6} icon=curve alignment=center @click=${()=>this.actionOnDrawFeatures("bezier-curve",c.startFinishDrawingBezier,this.sketchBezierCurveElement.value)} ${(0,a.K)(this.sketchBezierCurveElement)}></calcite-action>`||""}${!t.includes("polygon")&&l.qy`<calcite-action .text=${c.polygon} .label=${c.polygon} title=${c.polygon??n.s6} icon=polygon alignment=center @click=${()=>this.actionOnDrawFeatures("polygon",c.startFinishDrawing,this.sketchPolygonElement.value)} ${(0,a.K)(this.sketchPolygonElement)}></calcite-action>`||""}${!t.includes("rectangle")&&l.qy`<calcite-action .text=${c.rectangle} .label=${c.rectangle} title=${c.rectangle??n.s6} icon=rectangle alignment=center @click=${()=>this.actionOnDrawFeatures("rectangle",c.addRectangle,this.sketchRectangleElement.value)} ${(0,a.K)(this.sketchRectangleElement)}></calcite-action>`||""}${!t.includes("circle")&&l.qy`<calcite-action .text=${c.circle} .label=${c.circle} title=${c.circle??n.s6} icon=circle alignment=center @click=${()=>this.actionOnDrawFeatures("circle",c.addCircle,this.sketchCircleElement.value)} ${(0,a.K)(this.sketchCircleElement)}></calcite-action>`||""}${!t.includes("text")&&l.qy`<calcite-action .text=${c.text} .label=${c.text} title=${c.text??n.s6} icon=text alignment=center @click=${()=>this.actionOnDrawFeatures("text",c.addText,this.sketchTextElement.value)} ${(0,a.K)(this.sketchTextElement)}></calcite-action>`||""}</calcite-action-group>`}renderSelectFeatures(){const{sketchLayerEditorState:e,hideSelectionTools:t}=this,{_messages:c}=e;return l.qy`<calcite-action-group .label=${c.selectFeatures} class=${(0,n.CP)(t?"hidden":"")}><calcite-action .text=${c.select} .label=${c.select} title=${c.select??n.s6} icon=cursor alignment=center @click=${()=>this.actionOnSelectFeatures(c.selectText,this.sketchSelectElement.value)} ${(0,a.K)(this.sketchSelectElement)}></calcite-action><calcite-action .text=${c.rectangleSelect} .label=${c.rectangleSelect} title=${c.rectangleSelect??n.s6} icon=cursor-marquee alignment=center @click=${()=>this.actionOnSelectFeatures(c.rectangleLassoSelect,this.sketchRectangleSelectElement.value,"rectangle")} ${(0,a.K)(this.sketchRectangleSelectElement)}></calcite-action><calcite-action .text=${c.lassoSelect} .label=${c.lassoSelect} title=${c.lassoSelect??n.s6} icon=lasso alignment=center @click=${()=>this.actionOnSelectFeatures(c.rectangleLassoSelect,this.sketchLassoSelectElement.value,"lasso")} ${(0,a.K)(this.sketchLassoSelectElement)}></calcite-action></calcite-action-group>`}}(0,i.c)("arcgis-map-config-sketch-layer-editor-tools",r)}}]);