/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-80a782.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-80a782"],{33543:(e,t,a)=>{a.d(t,{a:()=>n,b:()=>l,s:()=>r});var s=a(44345),i=a(55448),c=a(1225);a(54312),a(52797),a(34031),a(63438),a(5933),a(28927),a(83368),a(89704),a(5294),a(18423),a(96086),a(91813),a(21255),a(13078),a(21303),a(12627),a(56451),a(31521),a(23054),a(5077),a(23795),a(17902),a(87420),a(30161),a(81734),a(75698),a(10628),a(59640),a(64451),a(6176),a(83552),a(77462),a(49403),a(10281),a(83930),a(66617),a(10454),a(29614),a(94916),a(52554),a(2156),a(4038),a(49851),a(75054),a(15223),a(70169),a(47207),a(70852),a(48103),a(39423),a(85681),a(18444),a(42411),a(9767),a(38218),a(91914),a(86605),a(68196),a(440),a(46547),a(6238),a(7299);const n={true:"https://ndh-inf-ml-p01.esri.com/dev/mapping",vpn:"https://ndh-inf-ml-p01.esri.com/dev/mapping",aws:"https://devsummitdemowin.webgistesting.net/dev/mapping"};async function l(e,t){const{text:a}=t,{layer:i}=e;if(!(0,c.a1)(i))throw new Error("layer is not a FeatureLayer");const n={token:"",map_data:{data:i.fields.map(e=>({fieldName:e.name,alias:e.alias,dataType:e.type}))},messages:a,entry_point:"style"},l={method:"post",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}};console.log("request body: ",n);try{const{data:e}=await(0,s.default)(o(),l);if(e.status_code&&200!==e.status_code)return console.log("*** question/response: ",JSON.stringify({question:a,response:e})),{message:e.botMessage,status:"error",type:"response"};const t=e[0],i=t.botMessage;return{message:i,status:"map_style"===t.actionType?"valid":"invalid",dataObject:t,type:"response"}}catch(e){return{message:e.message,status:"error",type:"response"}}}async function r(e,t){const{text:a}=t,{layer:i}=e;if(!(0,c.a1)(i))throw new Error("layer is not a FeatureLayer");const n=i.fields.map(e=>({fieldName:e.name,alias:e.alias,dataType:e.type})),l={method:"post",body:JSON.stringify({token:"",map_data:{data:n},messages:a,entry_point:"style"}),headers:{"Content-Type":"application/json"}};console.log(JSON.stringify(l));try{await(0,s.default)(o(),l)}catch{throw new Error("submit feedback failed")}}function o(){const e=i.urlToObject(document.URL),t=e.query||{};return e.query?.assistUrl||n[t.assist]}},83898:(e,t,a)=>{a.r(t),a.d(t,{ArcgisMapConfigSmartMappingAssistFeedback:()=>o});var s=a(73679),i=a(4395),c=(a(52797),a(54312),a(33543)),n=(a(34031),a(63438),a(5933),a(28927),a(83368),a(89704),a(5294),a(18423),a(96086),a(91813),a(21255),a(13078),a(21303),a(12627),a(56451),a(31521),a(23054),a(5077),a(23795),a(17902),a(87420),a(30161),a(81734),a(75698),a(10628),a(59640),a(64451),a(6176),a(83552),a(77462),a(49403),a(10281),a(83930),a(66617),a(10454),a(29614),a(94916),a(52554),a(2156),a(4038),a(49851),a(75054),a(15223),a(70169),a(47207),a(70852),a(48103),a(39423),a(85681),a(18444),a(42411),a(9767),a(38218),a(91914),a(86605),a(68196),a(440),a(46547),a(6238),a(7299),a(85643)),l=a(73801);const r=i.AH`.modal{top:7.5%;left:7.5%;right:7.5%;--calcite-dialog-size-x: 85%;--calcite-dialog-size-y: 85%}.text-input{width:100%}.title{font-weight:700;font-size:16px}.sub-title{font-size:var(--calcite-font-size--1);padding-bottom:10px}.email-input{margin-top:10px;max-width:400px}.email{margin-top:20px}.disclaimer{font-size:var(--calcite-font-size--1);margin-top:30px;display:flex;column-gap:10px}.disclaimer-checkbox{margin-top:5px}`;class o extends l.WF{constructor(){super(...arguments),this.textAreaNode=(0,n._)(),this.checkBoxNode=(0,n._)(),this.arcgisSmartMappingAssistFeedbackClose=(0,l.lh)()}static{this.properties={chat:0,smartMappingState:0}}static{this.styles=r}async handleSubmit(){this.textAreaNode.value&&(0,c.s)(this.smartMappingState,{text:this.textAreaNode.value.value}),this.arcgisSmartMappingAssistFeedbackClose.emit()}render(){const{checkBoxNode:{value:e},textAreaNode:{value:t}}=this,{_messages:a}=this.smartMappingState;return i.qy`<calcite-dialog class="modal" open modal .heading=${a.assistFeedback.sendFeedback} escape-disabled outside-close-disabled @calciteDialogClose=${()=>this.arcgisSmartMappingAssistFeedbackClose.emit()}><div>${this.renderContent()}</div><calcite-button slot=footer-end appearance=outline-fill alignment=end @click=${()=>this.arcgisSmartMappingAssistFeedbackClose.emit()}>${a.cancel}</calcite-button><calcite-button slot=footer-end alignment=end appearance=solid .disabled=${!e?.checked||!t?.value} @click=${()=>{this.handleSubmit()}}>${a.assistFeedback.submit}</calcite-button></calcite-dialog>`}renderContent(){const{config:e,_messages:t}=this.smartMappingState,{helpBase:a,helpMap:s}=e,c=i.qy`<calcite-link target=_blank .href=${`${a}${s[120003249]}`}>${t.assistFeedback.privacyStatement}</calcite-link>`,l=i.qy`<calcite-link target=_blank .href=${`${a}${s[120003249]}`}>${t.assistFeedback.supplement}</calcite-link>`,r=i.qy`<calcite-link target=_blank .href=${`${a}${s[120003249]}`}>${t.assistFeedback.privacy}</calcite-link>`,o=t.assistFeedback.iAgree,d=o.substring(0,o.indexOf("${privacyStatement}")),p=o.substring(o.indexOf("${privacyStatement}")+19,o.indexOf("${supplement}")),m=o.substring(o.indexOf("${supplement}")+13),u=t.assistFeedback.learnMore,g=u.substring(0,u.indexOf("${privacy}")),h=u.substring(u.indexOf("${privacy}")+10);return i.qy`<div class="title">${t.assistFeedback.tellUs}</div><div class="sub-title">${t.assistFeedback.dontShare}</div><calcite-text-area class="text-input" .placeholder=${t.panels.assist.placeholder} value scale=s rows=10 resize=vertical @calciteTextAreaChange=${()=>this.requestUpdate()} @click=${()=>this.requestUpdate()} ${(0,n.K)(this.textAreaNode)}></calcite-text-area><div class="title email">${t.assistFeedback.email}</div><div class="sub-title">${t.assistFeedback.shareEmail}</div><calcite-input-text class="email-input" .placeholder=${t.assistFeedback.enterEmail}></calcite-input-text><div class="disclaimer"><calcite-checkbox class="disclaimer-checkbox" @click=${()=>this.requestUpdate()} ${(0,n.K)(this.checkBoxNode)}></calcite-checkbox><div><div>${d}${c}${p}${l}${m}</div><div>${g}${r}${h}</div></div></div>`}}(0,s.c)("arcgis-map-config-smart-mapping-assist-feedback",o)}}]);