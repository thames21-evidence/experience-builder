/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-bc4a95.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-bc4a95"],{23208:(e,l,a)=>{a.d(l,{a:()=>s,b:()=>y,c:()=>c,d:()=>I,g:()=>f,r:()=>n,s:()=>p,u:()=>t});const o={facilityLayer:{facilityIdField:"FACILITY_ID",siteIdField:"SITE_ID",nameField:"NAME"},levelLayer:{levelIdField:"LEVEL_ID",facilityIdField:"FACILITY_ID",longNameField:"NAME",shortNameField:"NAME_SHORT",levelNumberField:"LEVEL_NUMBER",verticalOrderField:"VERTICAL_ORDER"},siteLayer:{siteIdField:"SITE_ID",nameField:"NAME"}};let i;const r=e=>{const l=e?.map;return i=i||l?.floorInfo||{...o},i.siteLayer=i?.siteLayer?.layerId?i.siteLayer:null,i},s=e=>{const l=e?.map,a=r(e);l&&d(a)?l.set("floorInfo",a):n(e)},t=(e,l)=>{const a=r(l),{name:i}=e,t=e.layer;if(t&&"floorInfo"in t&&"levelLayer"===i){const e={floorField:o.levelLayer.levelIdField};t.floorInfo=e}if(t){const e="sublayer"===t.type;a[i]={...o[i]},a[i]&&(a[i].layerId=e?t.layer?.id:t.id,a[i].sublayerId=e?t.id:void 0)}else a[i]=void 0;s(l)},n=e=>{const l=e?.map;l&&(l.floorInfo=null)},d=e=>!(!e?.facilityLayer?.layerId||!e?.levelLayer?.layerId||e?.siteLayer&&!e?.siteLayer.layerId),c=e=>{const l=o[e];return Object.values(l)},f=e=>{const{map:l}=e,a=l?.allLayers;let o=[];return a?.forEach(e=>{const{type:l,floorInfo:a}=e;"map-image"===l?o=o.concat(e.allSublayers.filter(e=>e.fieldsIndex&&!e?.floorInfo).toArray()):!a&&["feature","oriented-imagery"].includes(l)&&o.push(e)}),o},y=async e=>{const{map:l}=e,a=l?.allLayers?.map(async e=>await m(e)).filter(e=>"failed"!==e?.loadStatus),o=a?await Promise.all(a):[];let i=[];return o.forEach(e=>{const{type:l,geometryType:a}=e;"map-image"===l?i=i.concat(e.allSublayers.filter(e=>e.fieldsIndex&&"esriGeometryPolygon"===e.sourceJSON?.geometryType).toArray()):"feature"===l&&"polygon"===a&&i.push(e)}),i},m=async e=>(typeof e.loadAll<"u"?await e.loadAll():await e.load(),e),I=(e,l)=>{const a=l.map?.allLayers,o=r(l),i=o?.[e]?.layerId,s=o?.[e]?.sublayerId;let t=i?a?.find(e=>e.id===i):null;return"map-image"===t?.type&&(t=t.allSublayers.find(e=>e.id===s)),t},p=e=>{const{layer:l}=e;let a;if(a="arcgis-field-list"===e?.localName||"arcgis-map-config-floor-field-list"===e?.localName?Object.values(e.selection)[0]:e?.field,a){const e=l.floorInfo||{};e.floorField=a.name,l.set("floorInfo",e)}}},30886:(e,l,a)=>{a.r(l),a.d(l,{ArcgisMapConfigFloorReplaceField:()=>t});var o=a(73679),i=a(4395),r=a(23208),s=a(73801);class t extends s.WF{static{this.properties={layer:0,_messages:0,view:0}}async commit(){(this.el.shadowRoot?Array.from(this.el.shadowRoot.querySelectorAll("arcgis-map-config-floor-field-list")):[]).map(e=>(0,r.s)(e))}findField(e){return this.layer.fieldsIndex.get(e)}render(){const e=this.layer;if(!e.floorInfo)return"";const l=this.findField(e.floorInfo.floorField);if(!l)return"";const a={};return a[l.name]=l,i.qy`<arcgis-map-config-floor-field-list ._messages=${this._messages} .layer=${e} .selection=${a}></arcgis-map-config-floor-field-list>`}}(0,o.c)("arcgis-map-config-floor-replace-field",t)}}]);