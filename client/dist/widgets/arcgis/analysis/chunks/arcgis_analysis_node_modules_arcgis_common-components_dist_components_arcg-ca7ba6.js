/*! For license information please see arcgis_analysis_node_modules_arcgis_common-components_dist_components_arcg-ca7ba6.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_common-components_dist_components_arcg-ca7ba6"],{20936:(t,e,i)=>{function r(t){return function(t,e){return function(t,e){const i=t.assignedElements({flatten:!0});return e?i.filter(t=>t.matches(e)):i}(t.target,e)}(t).length>0}i.d(e,{Ly:()=>s,Qp:()=>h,Yt:()=>o,Zj:()=>p,el:()=>c,ti:()=>r});const s=(...t)=>{const e=[];for(let i=0;i<t.length;i++){const r=t[i];if("string"==typeof r)e.push(r);else if(Array.isArray(r))e.push.apply(e,r);else if("object"==typeof r)for(const t in r)r[t]&&e.push(t)}const i=e.join(" ");return e.length=0,i},o=(t,e,i)=>(0,n(e).subscribe)(e=>{const r=e.some(e=>((t,e)=>{let i=t;for(;i;){if(i===e)return!0;if(!i.parentNode)return!1;i=i.parentNode instanceof ShadowRoot?i.parentNode.host:i.parentNode}return!1})(t,e.target));r&&i()}),a={},n=t=>{const e=t.join(","),i=a[e];if(void 0!==i)return i;const r=new Set,s=new MutationObserver(t=>r.forEach(e=>e(t)));globalThis.document&&s.observe(document.documentElement,{attributes:!0,attributeFilter:t,subtree:!0});const o={subscribe:t=>(r.add(t),()=>{r.delete(t),0===r.size&&(s.disconnect(),a[e]=void 0)})};return a[e]=o,o},c=(t,e)=>{let i=t;for(;i;){const t=i.closest?.(e);if(t)return t;const r=i.getRootNode?.();if(r===globalThis.document)return;i=r.host}};const h=t=>p(t,"dir","ltr"),p=(t,e,i)=>{const r=c(t,`[${e}]`);return r?.getAttribute(e)??i}},43889:(t,e,i)=>{i.d(e,{C:()=>r});const r={arcgisAppCkeditor:"arcgis-app-ckeditor",arcgisAppCkeditorMentionHeader:"arcgis-app-ckeditor-mention-header",arcgisAppCkeditorMentionItem:"arcgis-app-ckeditor-mention-item",arcgisAppCkeditorMentionItemContainer:"arcgis-app-ckeditor-mention-item-container",arcgisAppCkeditorPopoverContainer:"arcgis-app-ckeditor-popover-container",arcgisAppCkeditorPopoverFooter:"arcgis-app-ckeditor-popover-footer",popover:"popover"}},47640:(t,e,i)=>{i.d(e,{YZ:()=>a,e1:()=>s});var r=i(4836);const s={INITIAL:0,PENDING:1,COMPLETE:2,ERROR:3},o=Symbol();class a{get taskComplete(){return this.t||(1===this.i?this.t=new Promise((t,e)=>{this.o=t,this.h=e}):3===this.i?this.t=Promise.reject(this.l):this.t=Promise.resolve(this.u)),this.t}constructor(t,e,i){this.p=0,this.i=0,(this._=t).addController(this);const r="object"==typeof e?e:{task:e,args:i};this.v=r.task,this.j=r.args,this.m=r.argsEqual??n,this.k=r.onComplete,this.A=r.onError,this.autoRun=r.autoRun??!0,"initialValue"in r&&(this.u=r.initialValue,this.i=2,this.O=this.T?.())}hostUpdate(){!0===this.autoRun&&this.S()}hostUpdated(){"afterUpdate"===this.autoRun&&this.S()}T(){if(void 0===this.j)return;const t=this.j();if(!Array.isArray(t))throw Error("The args function must return an array");return t}async S(){const t=this.T(),e=this.O;this.O=t,t===e||void 0===t||void 0!==e&&this.m(e,t)||await this.run(t)}async run(t){let e,i;t??=this.T(),this.O=t,1===this.i?this.q?.abort():(this.t=void 0,this.o=void 0,this.h=void 0),this.i=1,"afterUpdate"===this.autoRun?queueMicrotask(()=>this._.requestUpdate()):this._.requestUpdate();const r=++this.p;this.q=new AbortController;let s=!1;try{e=await this.v(t,{signal:this.q.signal})}catch(t){s=!0,i=t}if(this.p===r){if(e===o)this.i=0;else{if(!1===s){try{this.k?.(e)}catch{}this.i=2,this.o?.(e)}else{try{this.A?.(i)}catch{}this.i=3,this.h?.(i)}this.u=e,this.l=i}this._.requestUpdate()}}abort(t){1===this.i&&this.q?.abort(t)}get value(){return this.u}get error(){return this.l}get status(){return this.i}render(t){switch(this.i){case 0:return t.initial?.();case 1:return t.pending?.();case 2:return t.complete?.(this.value);case 3:return t.error?.(this.error);default:throw Error("Unexpected status: "+this.i)}}}const n=(t,e)=>t===e||t.length===e.length&&t.every((t,i)=>!(0,r.Ec)(t,e[i]))},51546:(t,e,i)=>{function r(t){return null!=t}function s(t,e){const i=e.startsWith("#"),r=e.startsWith(".");for((r||i)&&(e=e.slice(1));t;){if(i){if(t.id===e)return t}else if(r){if(t.classList.contains(e))return t}else if(t.tagName.toLowerCase()===e.toLowerCase())return t;t=t.parentElement??t.getRootNode()?.host??void 0}}async function o(t,e){return"feature"!==t.type||t.url?"feature"===t.type||"csv"===t.type||"scene"===t.type||"wfs"===t.type||"geojson"===t.type||"oriented-imagery"===t.type||"subtype-group"===t.type||"subtype-sublayer"===t.type||"catalog"===t.type||"catalog-footprint"===t.type?await t.queryFeatureCount():!e||"stream"!==t.type&&"ogc-feature"!==t.type?await Promise.reject(new Error(`Can't get feature count for layer of type ${t.type}.`)):await async function(t,e){return await(await e.whenLayerView(t)).queryFeatureCount()}(t,e):await async function(t){const e=t.createQuery();e.outFields=["*"];const i=await t.queryFeatures(e);if(i.features?.length)return i.features.length;throw new Error("could not get feature count")}(t)}function a(t){return function(t){return null!=t&&"object"==typeof t&&"type"in t&&"feature"===t.type}(t)&&function(t){return"feature"===t?.type&&"feature-layer"===t.source?.type}(t)}i.d(e,{g:()=>o,i:()=>r,q:()=>s,s:()=>a})},80648:(t,e,i)=>{i.r(e),i.d(e,{ArcgisCkeditor5Popover:()=>d});var r=i(22229),s=i(4395),o=i(73801),a=i(85643),n=i(47640),c=i(20936),h=i(60701),p=i(51546),u=i(43889);const l=s.AH`.arcgis-app-ckeditor-popover-footer{display:flex;justify-content:flex-end;margin-top:var(--calcite-spacing-sm);padding:0 var(--calcite-spacing-lg)}.arcgis-app-ckeditor-popover-container{margin:0 var(--calcite-spacing-md) 0 0;padding-bottom:var(--calcite-spacing-lg);box-shadow:val(--calcite-shadow-1)}.popover{--calcite-popover-z-index: 100}`;class d extends o.WF{constructor(){super(),this.okButton=(0,a._)(),this.popoverNode=(0,a._)(),this._propWatcherTask=new n.YZ(this,{task:async([t])=>{if(!(0,p.i)(t))throw console.error("Required properties are missing."),new Error},args:()=>[this.refElement]}),this.guid=(0,h.DA)(),this.intlOk="Ok",this.intlCancel="Cancel",this.arcgisCkeditor5PopoverClosed=(0,o.lh)(),this.arcgisPopoverClosed=(0,o.lh)(),this.listen("arcgisCreated",this.afterEditorCreated),this.listen("arcgisSourceEditingChanged",this.onSourceEditingStatusChanged)}static{this.properties={guid:0,refElement:0,intlOk:1,intlCancel:1,intlLabel:1}}static{this.styles=l}async reposition(){this.popoverNode.value?.reposition()}afterEditorCreated(t){this.editor=t.target,this.reposition(),this.requestUpdate()}onSourceEditingStatusChanged(t){this.okButton.value&&(this.okButton.value.disabled=t.detail)}render(){return this.el.classList.add("js-app-flyout"),this._propWatcherTask.render({complete:()=>s.qy`<calcite-popover class=${(0,o.CP)(u.C.popover)} dir=${(0,c.Qp)(this.el)??o.s6} placement=leading-start open pointer-disabled .referenceElement=${this.refElement} .offsetDistance=${-Math.round(this.refElement.getBoundingClientRect().width)} offset-skidding=50 .label=${this.intlLabel??""} focus-trap-disabled trigger-disabled ${(0,a.K)(this.popoverNode)}><div class=${(0,o.CP)(u.C.arcgisAppCkeditorPopoverContainer)}><slot></slot><div class=${(0,o.CP)(u.C.arcgisAppCkeditorPopoverFooter)}><calcite-button .label=${this.intlOk} @click=${async t=>{this.okButton.value?.disabled||(t.stopPropagation(),this.arcgisCkeditor5PopoverClosed.emit({guid:this.guid,data:await(this.editor?.getData())}),this.arcgisPopoverClosed.emit({guid:this.guid,data:await(this.editor?.getData())}))}} ${(0,a.K)(this.okButton)}>${this.intlOk}</calcite-button><calcite-button appearance=outline-fill .label=${this.intlCancel} @click=${t=>{t.stopPropagation(),this.arcgisCkeditor5PopoverClosed.emit({guid:this.guid}),this.arcgisPopoverClosed.emit({guid:this.guid})}}>${this.intlCancel}</calcite-button></div></div></calcite-popover>`})}}(0,r.c)("arcgis-ckeditor5-popover",d)}}]);