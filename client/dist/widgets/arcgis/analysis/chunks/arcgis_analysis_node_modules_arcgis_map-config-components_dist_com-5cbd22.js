/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_com-5cbd22.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_com-5cbd22"],{45263:(e,t,a)=>{a.r(t),a.d(t,{ArcgisMapConfigSmartMappingPanelsTypeSize:()=>g});var i=a(73679),s=a(4395),n=a(46317),r=a(5294),l=a(1225),o=a(89989),c=(a(44345),a(55448),a(52797),a(34031),a(63438),a(5933),a(28927),a(83368),a(89704),a(18423),a(96086),a(91813),a(21255),a(13078),a(21303),a(12627),a(56451),a(31521),a(23054),a(5077),a(23795),a(17902),a(87420),a(30161),a(81734),a(65595)),p=(a(77462),a(49403),a(10281),a(83930),a(54312),a(66617),a(10628),a(59640),a(64451),a(6176),a(10454),a(29614),a(94916),a(52554),a(2156),a(4038),a(49851),a(75054),a(15223),a(70169),a(47207),a(70852),a(48103),a(39423),a(85681),a(18444),a(42411),a(9767),a(38218),a(91914),a(86605),a(68196),a(440),a(46547),a(6238),a(7299),a(85643)),d=a(73801);const m=s.AH`:host{width:100%;display:none}:host([selected]){display:flex}.flow-item{height:100%}`;class g extends d.WF{constructor(){super(...arguments),this.flowItemNode=(0,p._)(),this.tileNodes={},this.smartMappingState=(0,c.u)(),this.menuOpen=!1,this.showBackButton=!1,this.selected=!1,this.arcgisSmartMappingPanelsTypeSizeBackClick=(0,d.lh)(),this.arcgisSmartMappingPanelsTypeSizeClose=(0,d.lh)(),this.arcgisSmartMappingPanelsTypeSizeError=(0,d.lh)(),this.smartMappingCompleteClose=(0,d.lh)()}static{this.properties={lastClick:16,menuOpen:5,showBackButton:5,selected:7,beforeBack:0}}static{this.styles=m}async setFocus(){this.flowItemNode.value?.setFocus()}load(){const{layer:e}=this.smartMappingState,t=(0,l.g)(this.smartMappingState);this.originalRendererJSON=t.toJSON(),this.originalFeatureReduction="featureReduction"in e&&e.featureReduction?r.clone(e.featureReduction):void 0;const a=(0,l.a9)(this.smartMappingState,this.el);"ARCGIS-MAP-CONFIG-SMART-MAPPING"===a.tagName?this.panelsParentNode=a.shadowRoot:this.panelsParentNode=a}async loaded(){requestAnimationFrame(async()=>await(this.flowItemNode.value?.setFocus())),this.scaleHandle=(0,o.w)(this.smartMappingState,this.flowItemNode.value,()=>this.smartMappingCompleteClose.emit("cancel"))}disconnectedCallback(){super.disconnectedCallback(),this.scaleHandle?.remove()}typeTileRefHandler(e){e&&(this.tileNodes.type=e)}sizeTileRefHandler(e){e&&(this.tileNodes.size=e)}handleDone(){(0,l.f)(),this.arcgisSmartMappingPanelsTypeSizeClose.emit("save")}handleOptionsClick(e){const{panelsParentNode:t}=this;switch(e){case"size":{const e=(0,d.dN)(s.qy`<arcgis-map-config-smart-mapping-panels-size hide-transparency hide-rotation .showBackButton=${!0} selected @arcgisSmartMappingPanelsSizeClose=${()=>this.cleanUpFlowItem(e)} @arcgisSmartMappingPanelsSizeBackClick=${()=>this.cleanUpFlowItem(e)} @arcgisSmartMappingPanelsSizeError=${({detail:e})=>this.arcgisSmartMappingPanelsTypeSizeError.emit(e)}></arcgis-map-config-smart-mapping-panels-size>`);t.appendChild(e),this.selected=!1;break}case"type":{const e=(0,d.dN)(s.qy`<arcgis-map-config-smart-mapping-panels-type hide-transparency hide-rotation .showBackButton=${!0} selected @arcgisSmartMappingPanelsTypeClose=${()=>this.cleanUpFlowItem(e)} @arcgisSmartMappingPanelsTypeBackClick=${()=>this.cleanUpFlowItem(e)} @arcgisSmartMappingPanelsTypeError=${({detail:e})=>this.arcgisSmartMappingPanelsTypeSizeError.emit(e)}></arcgis-map-config-smart-mapping-panels-type>`);t.appendChild(e),this.selected=!1;break}}}cleanUpFlowItem(e){e.remove(),this.focusSelectedTile(),this.selected=!0}focusSelectedTile(){setTimeout(()=>requestAnimationFrame(async()=>await(this.tileNodes[this.lastClick]?.setFocus())),300)}render(){const{hideLayerTitle:e,layer:t,mapImageSublayer:a,_messages:i}=this.smartMappingState,n=e?void 0:a?.title??t.title;return this.el.classList.add("calcite-match-height"),s.qy`<calcite-flow-item class="flow-item" .closable=${(0,l.aa)(this.el)} .heading=${i.panels.styleOptions} .description=${n} .showBackButton=${this.showBackButton} .selected=${this.selected} @calciteFlowItemBack=${e=>{e.stopPropagation(),this.arcgisSmartMappingPanelsTypeSizeBackClick.emit()}} @calciteFlowItemClose=${this.handleDone} ${(0,p.K)(this.flowItemNode)}>${this.renderTypeTile()}${this.renderSizeTile()}${this.renderTransparency()}${this.renderRotation()}${this.renderDoneButton()}${this.renderCancelButton()}</calcite-flow-item>`}renderTypeTile(){return s.qy`<arcgis-map-config-smart-mapping-tile type=type .selected=${"type"===this.lastClick} @arcgisSmartMappingTileSelect=${()=>{this.lastClick="type",this.handleOptionsClick("type")}} @arcgisSmartMappingTileOptions=${()=>this.handleOptionsClick("type")} @arcgisSmartMappingTileError=${e=>this.arcgisSmartMappingPanelsTypeSizeError.emit(e.detail)} ${(0,p.K)(this.typeTileRefHandler)}></arcgis-map-config-smart-mapping-tile>`}renderSizeTile(){const{smartMappingState:e}=this,t="type-size-age"===(0,l.d)(e)?"size-age":"size",a=(0,l.ab)(e,"size");return(0,n.D)(`tile-${t}-${a}`,s.qy`<arcgis-map-config-smart-mapping-tile .type=${t} .selected=${"size"===this.lastClick} @arcgisSmartMappingTileSelect=${()=>{this.lastClick="size",this.handleOptionsClick("size")}} @arcgisSmartMappingTileOptions=${()=>this.handleOptionsClick("size")} @arcgisSmartMappingTileError=${e=>this.arcgisSmartMappingPanelsTypeSizeError.emit(e.detail)} @arcgisSmartMappingTileThemeChange=${()=>{queueMicrotask(()=>{this.el.shadowRoot.querySelectorAll("arcgis-map-config-smart-mapping-tile")[1].setThemeFocus()})}} ${(0,p.K)(this.sizeTileRefHandler)}></arcgis-map-config-smart-mapping-tile>`)}renderTransparency(){const{smartMappingState:e}=this,t=(0,l.c)((0,l.g)(e),"opacity");return s.qy`<arcgis-map-config-smart-mapping-transparency .open=${!!t} @arcgisSmartMappingSymbolTransparencyError=${({detail:e})=>this.arcgisSmartMappingPanelsTypeSizeError.emit(e)}></arcgis-map-config-smart-mapping-transparency>`}renderRotation(){const{smartMappingState:e}=this,t=(0,l.c)((0,l.g)(e),"opacity"),a=(0,l.c)((0,l.g)(e),"rotation");return(0,l.p)((0,l.g)(e),"spike")?"":s.qy`<arcgis-map-config-smart-mapping-rotation .open=${!t&&!!a} @arcgisSmartMappingRotationError=${({detail:e})=>this.arcgisSmartMappingPanelsTypeSizeError.emit(e)}></arcgis-map-config-smart-mapping-rotation>`}renderDoneButton(){const{_messages:e}=this.smartMappingState;return s.qy`<calcite-button slot=footer .label=${e.done} @click=${this.handleDone} appearance=solid width=half>${e.done}</calcite-button>`}renderCancelButton(){const{smartMappingState:e}=this,{_messages:t}=e;return s.qy`<calcite-button slot=footer .label=${t.cancel} @click=${()=>{(0,l.a8)(e,this.originalRendererJSON,this.originalFeatureReduction),this.arcgisSmartMappingPanelsTypeSizeClose.emit("cancel")}} appearance=outline-fill width=half>${t.cancel}</calcite-button>`}}(0,i.c)("arcgis-map-config-smart-mapping-panels-type-size",g)},46317:(e,t,a)=>{a.d(t,{D:()=>r});var i=a(85282),s=a(34670),n=a(42466);const r=(0,s.u$)(class extends s.WL{constructor(){super(...arguments),this.key=i.s6}render(e,t){return this.key=e,t}update(e,[t,a]){return t!==this.key&&((0,n.mY)(e),this.key=t),a}})},65595:(e,t,a)=>{a.d(t,{c:()=>r,u:()=>l});var i=a(20936),s=a(1225),n=(a(54312),a(44345),a(55448),a(52797),a(34031),a(63438),a(5933),a(28927),a(83368),a(89704),a(5294),a(18423),a(96086),a(91813),a(21255),a(13078),a(21303),a(12627),a(56451),a(31521),a(23054),a(5077),a(23795),a(17902),a(87420),a(30161),a(81734),a(75698),a(10628),a(59640),a(64451),a(6176),a(83552));a(77462),a(49403),a(10281),a(83930),a(66617),a(10454),a(29614),a(94916),a(52554),a(2156),a(4038),a(49851),a(75054),a(15223),a(70169),a(47207),a(70852),a(48103),a(39423),a(85681),a(18444),a(42411),a(9767),a(38218),a(91914),a(86605),a(68196),a(440),a(46547),a(6238),a(7299);function r(e){e.selectedFields=[],e.layerFields=void 0,e.fields=void 0,e.hideLayerTitle=!1,e.supportsArcade=!1,e.stringFieldsCount=-1,e.dateFieldsCount=-1,e.numberFieldsCount=-1,e.containsFlow=!0,e.oneFeatureResponseStatus=s.s.MISSING,e.selectedAttribute=void 0,e.selectedAttributeText=void 0,e.selectedTypeValue=void 0,e.selectedValue=void 0,e.lastDefault=void 0,e.lastDefaults=void 0,e.dotColorSelected=void 0,e.backgroundStyleSelected=void 0,e.lastSettings=void 0,e.classedSymbolSelectedIdx=void 0,e.allUniqueValues=void 0,e.useFeatureReduction=void 0,e.symbolStylerConfig={},e.allowTimeSeriesConfiguration=!1,e.rasterInfo=void 0}function l(){const e=(0,n.Gk)(),t=e;e.manager.onLoad(()=>{t.smartMappingState=function(e,t){const a=o.get(e);if(a)return a;const s=(0,i.el)(e,t);return s&&"store"in s?(o.set(e,s.store),s.store):null}(e.el,"arcgis-map-config-smart-mapping")})}const o=new WeakMap},89989:(e,t,a)=>{a.d(t,{w:()=>n});var i=a(54312),s=a(1225);a(44345),a(55448),a(52797),a(34031),a(63438),a(5933),a(28927),a(83368),a(89704),a(5294),a(18423),a(96086),a(91813),a(21255),a(13078),a(21303),a(12627),a(56451),a(31521),a(23054),a(5077),a(23795),a(17902),a(87420),a(30161),a(81734),a(75698),a(10628),a(59640),a(64451),a(6176),a(83552),a(77462),a(49403),a(10281),a(83930),a(66617),a(10454),a(29614),a(94916),a(52554),a(2156),a(4038),a(49851),a(75054),a(15223),a(70169),a(47207),a(70852),a(48103),a(39423),a(85681),a(18444),a(42411),a(9767),a(38218),a(91914),a(86605),a(68196),a(440),a(46547),a(6238),a(7299);function n(e,t,a){const{layer:n,mapView:l,useFeatureReduction:o}=e;return o&&"featureReduction"in n&&"binning"===n.featureReduction.type?i.watch(()=>l.scale,()=>{const i=n.featureReduction;l.scale<=i.maxScale&&!t.disabled?((0,s.f)(),function(e,t,a){const i=document.createElement("arcgis-map-config-smart-mapping-scale-alert-popover");i.smartMappingState=e,i.refElement=t,i.addEventListener("arcgisSmartMappingScaleAlertPopoverBack",()=>{r(),a()}),document.body.append(i)}(e,t,a),(0,s.h)(t,!0)):l.scale>i.maxScale&&t.disabled&&(r(),(0,s.h)(t,!1),t.setFocus())}):void 0}function r(){document.querySelectorAll("arcgis-map-config-smart-mapping-scale-alert-popover").forEach(e=>e.remove())}}}]);