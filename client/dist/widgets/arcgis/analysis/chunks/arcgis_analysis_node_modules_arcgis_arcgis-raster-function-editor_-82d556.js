"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_arcgis-raster-function-editor_-82d556"],{201:(e,t,i)=>{i.d(t,{R:()=>o});var a=i(92265),s=(i(5294),i(13661),i(18423),i(21255),i(35431),i(38949)),n=(i(588),i(55448),i(2924),i(11840),i(52373),i(33752),i(440),i(66744),i(44345),i(33797));i(71802),i(36596),i(23795),i(17902),i(56451);const r="fromUnitHelpClickHandler",l="toUnitHelpClickHandler",o=class{constructor(e){(0,a.r)(this,e),this.rfxArgumentChange=(0,a.c)(this,"rfxArgumentChange"),this.unitTypes={speed:[100,101,102,103,104],temperature:[200,201,202],distance:[1,3,4,5,6,7,8,9,10,12],sound:[300,301,302,303]},this.helpActionClickEventHandlers=new Map,this.unitsEnum=[],this.toUnitsEnum=[],this.handleFromUnitChange=e=>{e.stopPropagation();const t=e.target,i=parseInt(t.value);this.fromUnitValue=i,this.fromUnit.value=i,this.configureFromUnitEnum()},this.handleToUnitChange=e=>{e.stopPropagation();const t=e.target,i=parseInt(t.value);this.toUnitValue=i,this.toUnit.value=i}}connectedCallback(){this.processWidgetArgs()}componentWillLoad(){this.setupInitialState(),this.configureFromUnitEnum()}componentDidLoad(){this.attachHelpClickEventHandlers()}processWidgetArgs(){const e=this.widgetArgs.inputArgs.FromUnit;this.fromUnit=e,this.fromUnitValue=e.value;const t=this.widgetArgs.inputArgs.ToUnit;this.toUnit=t,this.toUnitValue=t.value}setupInitialState(){const{rasterFunctionEnums:e}=this.widgetArgs;!0!==(0,s.i)(e?.esriUnitConversionFxUnitTypes)&&(this.unitsEnum=e.esriUnitConversionFxUnitTypes.map(e=>({key:String(e.key),label:e.label})))}configureFromUnitEnum(){const e=this.fromUnitValue,t=Object.keys(this.unitTypes).find(t=>this.unitTypes[t].includes(e));!0!==(0,s.i)(t)&&(this.toUnitsEnum=this.unitsEnum.filter(e=>this.unitTypes[t].includes(parseInt(e.key))));const i=String(this.toUnitValue);!0!==this.toUnitsEnum.some(e=>e.key===i)&&(this.toUnitValue=parseInt(this.toUnitsEnum[0]?.key),"sound"===t&&(this.toUnitValue=301))}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.fromUnit.displayName,referenceElement:this.fromUnitWidgetContainer,helpTextID:this.fromUnit?.helpTextID}),t=this.widgetArgs.onHelpActionClick({heading:this.toUnit.displayName,referenceElement:this.toUnitWidgetContainer,helpTextID:this.toUnit?.helpTextID});this.helpActionClickEventHandlers.set(r,e),this.helpActionClickEventHandlers.set(l,t)}render(){return(0,a.h)("div",{key:"01eb0cfa070614c7ce6ec67d27de444c2699a26c",class:"esriRFxBandCombinationEditor"},(0,a.h)("calcite-label",{key:"c22d8e969dd3ad8a1a6b711f4ba7fc6f58498a7a",alignment:"start",scale:s.s.scale??n.U.Scale,layout:"default",ref:e=>{this.fromUnitWidgetContainer=e}},(0,a.h)("rfx-label",{key:"e01abe5a74cef4b8ecc466f8957904f0a7a64156",label:this.fromUnit.displayName,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(r)()}),(0,a.h)("rfx-dtex-common-select",{key:"a353d2fcccadcde962e047d4eac9e26f3704af8e",mode:this.widgetArgs.mode,options:this.unitsEnum,value:String(this.fromUnitValue),onRfxArgumentChange:this.handleFromUnitChange})),(0,a.h)("calcite-label",{key:"33459785c28c459fe9f1fa2b47f18e93993fb1fb",alignment:"start",scale:s.s.scale??n.U.Scale,layout:"default",ref:e=>{this.toUnitWidgetContainer=e}},(0,a.h)("rfx-label",{key:"eead2782df5a6ef9568f21a3cbd968a6030ab1b3",label:this.toUnit.displayName,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(l)()}),(0,a.h)("rfx-dtex-common-select",{key:"187840fa3075409b6191c84bb8d1d6981961904d",mode:this.widgetArgs.mode,options:this.toUnitsEnum,value:String(this.toUnitValue),onRfxArgumentChange:this.handleToUnitChange})))}get hostElement(){return(0,a.a)(this)}}},13444:(e,t,i)=>{i.d(t,{R:()=>o});var a=i(92265),s=(i(5294),i(13661),i(18423),i(21255),i(35431),i(38949)),n=(i(588),i(55448),i(2924),i(11840),i(52373),i(33752),i(440),i(66744),i(45253)),r=i(33797);i(71802),i(44345),i(36596),i(23795),i(17902),i(56451);const l="inputArgHelpClickHandler",o=class{constructor(e){(0,a.r)(this,e),this.rfxArgumentChange=(0,a.c)(this,"rfxArgumentChange"),this.loaded=!1,this.showDimensionLessCheckbox=!0,this.helpActionClickEventHandlers=new Map,this.isRasterSingleSlice=!1,this.mdimDefLeadsToSingleSlice=!1,this.evaluateFilterTriggerArg=async e=>{const t=await this.isMultidimensionalDefinitionAppliedSingleSlice(e);this.mdimDefLeadsToSingleSlice=void 0,this.mdimDefLeadsToSingleSlice=t},this.evaluateRasterTriggerArg=async()=>{const e=this.widgetArgs.triggerArgs.Raster,t=e?.input,i=await t.getSelectedLayer();if(i){const e=await this.checkIfRasterIsSingleSlice(i);this.isRasterSingleSlice=e}else this.mdimDefLeadsToSingleSlice=!1}}connectedCallback(){this.processWidgetArgs(this.widgetArgs)}async componentWillLoad(){await this.setupInitialState(this.widgetArgs)}componentWillRender(){const e=this.isRasterSingleSlice||this.mdimDefLeadsToSingleSlice,t=this.widgetArgs.triggerArgs.Raster?.input,i=!1===Boolean(t?.value)||e;this.showDimensionLessCheckbox=i}componentDidLoad(){}processWidgetArgs({inputArgs:e,triggerArgs:t}){Object.keys(e).forEach(t=>{const i=e[t];this.inputArg=i,i.input=this.hostElement});const i=t.Raster;i?.input?.addEventListener("rfxArgumentChange",()=>{!1!==this.loaded&&this.evaluateRasterTriggerArg()});const a=t.Filter;a?.input?.addEventListener("rfxArgumentChange",({detail:{value:e}})=>{this.evaluateFilterTriggerArg(e)})}async setupInitialState({triggerArgs:e}){this.value=this.inputArg.value;const t=e.Raster?.input;if(!t||!t.value)return this.isRasterSingleSlice=!1,void(this.mdimDefLeadsToSingleSlice=!1);await this.evaluateRasterTriggerArg();const i=e.Filter?.input,a=i?.value||e.Filter.value;i&&a?this.evaluateFilterTriggerArg(a):this.mdimDefLeadsToSingleSlice=!1,this.loaded=!0}async checkIfRasterIsSingleSlice(e){const t=await(0,n.g)(e),i=(0,n.a)(e,t);if(!t||!i||1!==i.length)return!1;return i[0].dimensions.every(e=>{const t=e&&e.values;return t&&1===t.length})}async isMultidimensionalDefinitionAppliedSingleSlice(e){"string"==typeof e&&(e=JSON.parse(e));const t=this.widgetArgs.triggerArgs.Raster?.input;if(!t?.value)return!1;const i=await t.getSelectedLayer();if((0,s.i)(i))return;const a=await(0,n.g)(i),r=(0,n.a)(i,a);return(0,n.m)(e,(0,s.J)(r))}render(){return(0,a.h)("div",{key:"3d2e1e17a356eb07ffd5fac1d1a9ab679867b31d"},this.showDimensionLessCheckbox?(0,a.h)("calcite-label",{alignment:"start",scale:s.s.scale??r.U.Scale,layout:"inline-space-between",ref:e=>{this.widgetContainer=e;const t=this.widgetArgs.onHelpActionClick({heading:this.inputArg.displayName,referenceElement:this.widgetContainer,helpTextID:this.inputArg?.helpTextID});this.helpActionClickEventHandlers.set(l,t)}},(0,a.h)("calcite-checkbox",{checked:this.value,onCalciteCheckboxChange:e=>{const t=e.target.checked;this.value=t}}),(0,a.h)("rfx-label",{label:this.inputArg.displayName,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(l)()})):null)}get hostElement(){return(0,a.a)(this)}};o.style=""},20074:(e,t,i)=>{i.d(t,{R:()=>c});var a=i(92265),s=i(69843),n=(i(5294),i(13661),i(18423),i(21255),i(35431),i(38949)),r=(i(588),i(55448),i(2924),i(11840),i(52373),i(33752),i(440),i(66744),i(33797));i(71802),i(44345),i(36596),i(23795),i(17902),i(56451);const l="inputArgHelpClickHandler",o="sizeArgHelpClickHandler",h=1,d=100,c=class{constructor(e){(0,a.r)(this,e),this.rfxArgumentChange=(0,a.c)(this,"rfxArgumentChange"),this.uiElements={sizeArgLabel:void 0,sizeArgContainer:void 0},this.isRasterSet=!1,this.helpActionClickEventHandlers=new Map,this.handleRasterChange=async()=>{const e=this.widgetArgs.triggerArgs.Raster,t=e?.input,i=await t.getSelectedLayer();let a=3;if(i){a=(await(i?.generateRasterInfo(i.rasterFunction))).bandCount,this.isRasterSet=!0}else this.isRasterSet=!1;this.widgetState={...this.widgetState,size:a}}}connectedCallback(){this.processWidgetArgs(this.widgetArgs)}async componentWillLoad(){({strings:this.strings,dir:this.direction}=await(0,s.c)(this.hostElement,(0,a.d)("."))),this.setupInitialState()}componentWillRender(){this.setWidgetValue()}componentDidLoad(){this.attachHelpClickEventHandlers()}async checkValidity(){const e=await(this.inputElement?.checkValidity());return Promise.resolve(e)}processWidgetArgs({inputArgs:e,triggerArgs:t}){Object.keys(e).forEach(t=>{const i=e[t];this.inputArg=i,i.input=this.hostElement});const i=t.Raster;i?.input?.addEventListener("rfxArgumentChange",()=>{this.handleRasterChange()}),(0,n.i)(i.value?.url)||(this.isRasterSet=!0)}setupInitialState(){this.uiElements.sizeArgLabel=this.strings.size;const e=this.inputArg.value,t=(0,n.i)(e)?3:Math.sqrt(e.length);this.widgetState=(0,n.J)({size:t,value:e}),this.value=e}setWidgetValue(){this.value=this.widgetState?.value}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.inputArg.displayName,referenceElement:this.widgetContainer,helpTextID:this.inputArg?.helpTextID});this.helpActionClickEventHandlers.set(l,e)}onSizeChange(e){!e||e<=0||(this.widgetState={...this.widgetState,size:e})}render(){return(0,a.h)("div",{key:"0660cbe5adfff3f68f518d843f37e852aeeb5a55"},(0,a.h)("calcite-label",{key:"3658e6834ca9a1827130e3de6edcdb598bb086b3",alignment:"start",scale:n.s.scale??r.U.Scale,layout:"default",ref:e=>{this.widgetContainer=e}},(0,a.h)("rfx-label",{key:"d2d9527a61a845ea8a3faf7d1a88a025acad5cb1",label:this.inputArg.displayName,hideHelp:(0,n.i)(this.inputArg.helpTextID),onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers.get(l)()}),(0,a.h)("rfx-simple-matrix",{key:"01a597e9439d35845cd96b70fa7054c762df87ba",columns:this.widgetState.size,rows:this.widgetState.size,value:this.widgetState.value,onRfxArgumentChange:e=>{e.stopPropagation();const{detail:{value:t}}=e;(0,n.y)(this.value,t)||(this.widgetState={...this.widgetState,value:t})},isEditable:!0,ref:e=>{this.inputElement=e}})),this.isRasterSet?null:(0,a.h)("calcite-label",{alignment:"start",scale:n.s.scale??r.U.Scale,layout:"default",ref:e=>{this.uiElements.sizeArgContainer=e;const t=this.widgetArgs.onHelpActionClick({heading:this.uiElements.sizeArgLabel,referenceElement:this.uiElements.sizeArgContainer,helpTextID:this.widgetArgs.helpTextIDs.spectralconversion_size});this.helpActionClickEventHandlers.set(o,t)}},(0,a.h)("rfx-label",{label:this.uiElements.sizeArgLabel,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers.get(o)()}),(0,a.h)("rfx-dte-number-input",{value:this.widgetState.size,onRfxNumberInputChange:e=>{if(e.stopPropagation(),null!==e.target){const t=(e?.target).value;this.onSizeChange(t)}},min:h,max:d,required:!0,ref:e=>{this.inputElement=e}})))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,a.a)(this)}};c.style=""},24684:(e,t,i)=>{i.d(t,{R:()=>d});var a=i(92265),s=(i(5294),i(13661),i(18423),i(21255),i(35431),i(69843)),n=i(38949),r=(i(588),i(55448),i(2924),i(11840),i(52373),i(33752),i(440),i(66744),i(44345),i(33797));i(71802),i(36596),i(23795),i(17902),i(56451);const l="methodHelpClickHandler",o="bandHelpClickHandler",h="combinationHelpClickHandler",d=class{constructor(e){(0,a.r)(this,e),this.helpActionClickEventHandlers=new Map,this.onMethodChange=e=>{const t=e.target;this.method=Number.parseInt(t.value,10),this.widgetArgs.inputArgs?.Method&&(this.widgetArgs.inputArgs.Method.value=this.method)},this.onBandChange=e=>{const t=e.target.value,i=this.bandCombinationElement.value?.trim(),a=(0,n.i)(i)?[]:i.indexOf(",")>0?i.split(","):i.split(" ");a.push(t),this._updateBandValues(this._getBandComboFormatedValue(a))},this.onBandCombinationChange=()=>{const e=this._getBandCombinationValue();this._updateBandValues(e)}}connectedCallback(){this.widgetArgs?.rasterArgs&&(this.rasterArg=this.widgetArgs.rasterArgs.Raster,this.rasterArg?.input?.addEventListener("rfxArgumentChange",()=>{this.updateRasterArg()}))}async componentWillLoad(){({strings:this.strings,dir:this.direction}=await(0,s.c)(this.hostElement,(0,a.d)("."))),this.updateRasterArg(),this.setMethodValue()}componentDidLoad(){this.attachHelpClickEventHandlers()}setMethodValue(){this.method=this.widgetArgs.inputArgs?.Method?.value??this.widgetArgs.rasterFunctionEnums[0].key}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.widgetArgs?.inputArgs?.Method?.displayName,referenceElement:this.bandCombinationMethodContainer,helpTextID:this.widgetArgs.helpTextIDs?.extractbands_method}),t=this.widgetArgs.onHelpActionClick({heading:this.widgetArgs?.inputArgs?.BandNames?.displayName,referenceElement:this.bandCombinationBandContainer,helpTextID:this.widgetArgs.helpTextIDs?.extractbands_band}),i=this.widgetArgs.onHelpActionClick({heading:this.widgetArgs?.inputArgs?.BandWavelengths?.displayName,referenceElement:this.bandCombinationCombinationContainer,helpTextID:this.widgetArgs.helpTextIDs?.extractbands_combination});this.helpActionClickEventHandlers.set(l,e),this.helpActionClickEventHandlers.set(o,t),this.helpActionClickEventHandlers.set(h,i)}getMethodOptions(){return this.widgetArgs.rasterFunctionEnums.bandComboMethods.map(e=>({key:e.key.toString(),label:e.label}))}getBandOptions(e){if(!this.bandProperties)return[];return this.bandProperties[e].map(e=>({key:e.label.toString(),label:e.label}))}_getBandCombinationValue(){const e=this.bandCombinationElement.value?.trim();if((0,n.i)(e))return[];const t=e.indexOf(",")>0?e.split(","):e.split(" ");return this._getBandComboFormatedValue(t)}_getBandComboFormatedValue(e){return e.map(e=>{let t;return t=1===this.method?parseFloat(e):2===this.method?parseInt(e,10)-1:e.trim(),t})}_updateBandValues(e){const t=this.widgetArgs.inputArgs;t&&(0===this.method&&t.BandNames?t.BandNames.value=e:1===this.method&&t.BandWavelengths?t.BandWavelengths.value=e:2===this.method&&t.BandIds&&(t.BandIds.value=e)),this.widgetArgs={...this.widgetArgs,inputArgs:t}}async updateRasterArg(){const e=this.rasterArg&&this.rasterArg.input;this.layer=await(e?.getSelectedLayer?.()),await this.updateBands()}async updateBands(){this.layer&&(this.layer.loaded?await this.updateBandsOnLayerLoad():this.layer.when(async()=>{await this.updateBandsOnLayerLoad(),this._setupValues()}))}_setupValues(){const e=this.widgetArgs.inputArgs;e&&e.Method&&void 0!==e.Method.value?this.method=e.Method.value:!e.BandIds||e.BandNames||e.BandWavelengths?!e.BandNames||e.BandIds||e.BandWavelengths?!e.bandWavelengths||e.BandIds||e.BandNames||(this.method=1):this.method=0:this.method=2}async updateBandsOnLayerLoad(){let e=[],t=[];const i=await(this.layer?.generateRasterInfo(this.layer.rasterFunction)),a=i?.keyProperties;if(a?.BandProperties?.forEach((i,a)=>{e.push({label:String(a+1)}),t.push({label:i.BandName??`Band_${a+1}`})}),!a.BandProperties||a.BandProperties&&!a.BandProperties.length){const a=this._getDefaultBandProperties(i.bandCount);t=a.bandNames,e=a.bandIds}this.bandProperties={bandIds:e,bandNames:t,bandWavelengths:[{label:"200"},{label:"400"},{label:"600"}]}}_getDefaultBandProperties(e){const t=[],i=[];for(let a=1;a<=e;a++)t.push({label:String(a)}),i.push({label:`Band_${a}`});return{bandNames:i,bandIds:t}}getBandCombinationValue(){const e=this.widgetArgs.inputArgs;return 0===this.method&&e.BandNames&&e.BandNames.value&&e.BandNames.value.length?e.BandNames.value.join(" "):1===this.method&&e.BandWavelengths&&e.BandWavelengths.value&&e.BandWavelengths.value.length?e.BandWavelengths.value.join(" "):2===this.method&&e.BandIds&&e.BandIds.value&&e.BandIds.value.length?e.BandIds.value.map(function(e){return+e+1}).join(" "):void 0}render(){const e=this.getMethodOptions(),t=this.getBandCombinationValue(),i=0===this.method?"bandNames":1===this.method?"bandWavelengths":"bandIds",s=this.getBandOptions(i);return(0,a.h)("div",{key:"76645510601b959ed54437206a5965dde7c1054f"},(0,a.h)("calcite-label",{key:"f9f1135cd0a27cd2613bf7e17c2d0a9c785d6093",alignment:"start",scale:n.s.scale??r.U.Scale,layout:"default",ref:e=>{this.bandCombinationMethodContainer=e}},(0,a.h)("rfx-label",{key:"aed396896d09efbda7e80b59ac6a31b806cca4a7",label:this.strings.method,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(l)()}),(0,a.h)("rfx-dtex-common-select",{key:"3a61404bb0c3a40c8c986d52dde30bcb0c54bffe",mode:this.widgetArgs.mode,options:e,value:this.method.toString(),onRfxArgumentChange:this.onMethodChange})),(0,a.h)("calcite-label",{key:"c94486e7e079e8323c4cccfec354891617af61e6",alignment:"start",scale:n.s.scale??r.U.Scale,layout:"default",ref:e=>{this.bandCombinationBandContainer=e}},(0,a.h)("rfx-label",{key:"be05a95a0e83bf09dd6b99cf55d3add9d522ea42",label:this.strings.band,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(o)()}),(0,a.h)("rfx-dtex-common-select",{key:"bd560189367f1a3c42005f2918055b1e83827bae",mode:this.widgetArgs.mode,options:s,onRfxArgumentChange:this.onBandChange,value:void 0})),(0,a.h)("calcite-label",{key:"daa87d4a6f3a7afb1f5b2826d09cc0bbbf04454d",alignment:"start",scale:n.s.scale??r.U.Scale,layout:"default",ref:e=>{this.bandCombinationCombinationContainer=e}},(0,a.h)("rfx-label",{key:"f2f310c87e2c17a940346b812f0fab6c692787ee",label:this.strings.combination,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(h)()}),(0,a.h)("calcite-input-text",{key:"d4e96ab445d52edd555a107e08b8b0d301b3894b",scale:n.s.scale??r.U.Scale,dir:this.direction,status:"idle",alignment:"start","prefix-text":"","suffix-text":"",value:t,onCalciteInputTextChange:this.onBandCombinationChange,ref:e=>{this.bandCombinationElement=e}})))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,a.a)(this)}}},29422:(e,t,i)=>{i.d(t,{R:()=>u});var a=i(92265),s=(i(5294),i(13661),i(18423),i(21255),i(35431),i(69843)),n=i(38949),r=i(85740),l=i(33797),o=i(42335),h=(i(588),i(71802),i(44345),i(36596),i(23795),i(17902),i(56451),i(47453));i(33752);const d="rfx-cte-weighted-sum-table-editor",c={grid:`${d}__grid`,layerColumn:`${d}__layer-column`,fieldColumn:`${d}__field-column`,weightColumn:`${d}__weight-column`},g="weightedSumTableHelpClickHandler",u=class{constructor(e){(0,a.r)(this,e),this.rfxArgumentChange=(0,a.c)(this,"rfxArgumentChange"),this.helpActionClickEventHandlers=new Map,this.gridSchema={canAdd:!0,gridLayout:{},gridOptions:[],hasBorder:!0,hasHeader:!0,hasIdColumn:!0},this.updateValue=e=>{const{detail:{gridOptions:t}}=e,{inputArgs:i}=this.widgetArgs;if((0,n.i)(t)||(0,n.i)(i))return;const a=[],s=[],r=[];t.forEach((e,i)=>{if(i===t.length-1)return;const{layer:n,field:l,weight:o}=e;a.push(n),s.push(l),r.push((0,h.p)(o)??1)});const l=i.Rasters,o=i.Fields,d=i.Weights;(0,n.i)(l.value)?l.value={elements:a,type:"ArgumentArray"}:l.value.elements=a,o.value=s,d.value=r}}async componentWillLoad(){({strings:this.strings,dir:this.direction}=await(0,s.c)(this.hostElement,(0,a.d)("."))),await this.initGrid()}componentDidLoad(){this.attachHelpClickEventHandlers()}async checkValidity(){return await this.gridElement.checkValidity()}async createGridOptions(){const{inputArgs:e}=this.widgetArgs;if((0,n.i)(e))return;let t=0,i=0;const a=[],s=e.Rasters,l=e.Fields,o=e.Weights,h=s.value?.elements??s.value??[];if((0,n.i)(s)||(0,n.i)(l)||(0,n.i)(o)||(t=Math.max(h?.length,l.value?.length||0,o.value?.length||0)),(0===t||isNaN(t))&&a.push({id:0}),t>0&&((0,n.i)(o.value)||o.value.length<t)){let e=0;const i=o.value??[];for(;e<t;)(0,n.i)(o.value?.[e])&&i.push(1),e++;o.value=i}for(;i<t;){const e=h?.[i],t=e?.value;(0,n.i)(t?.url)||(e.value=await(0,r.w)(t,this.widgetArgs.inputLayers)),a.push({id:i,rasterElement:e,layer:e,field:l.value?.[i],weight:o.value?.[i]}),i++}return a}async initGrid(){const e={layer:{allowScalar:!1,label:this.strings.layer,uiType:o.G.raster,style:c.layerColumn,validationRule:{required:!0}},field:{label:this.strings.field,uiType:o.G.field,style:c.fieldColumn},weight:{label:this.strings.weight,uiType:o.G.number,style:c.weightColumn,validationRule:{required:!0,defaultValue:0,initialValue:1}}},t=await this.createGridOptions();this.gridSchema={...this.gridSchema,gridLayout:e,gridOptions:t}}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.strings.weightedSumTable,referenceElement:this.weightedSumTableElement,helpTextID:this.widgetArgs.helpTextIDs?.weightedsum_weightedsumtable});this.helpActionClickEventHandlers.set(g,e)}render(){return(0,a.h)("div",{key:"e69e1588aff28db8ab1720964471d829e47332b0"},(0,a.h)("calcite-label",{key:"f9fc294f2c32d16e60ab28125d490e76ef5b2f87",alignment:"start",scale:n.s.scale??l.U.Scale,layout:"default",ref:e=>{this.weightedSumTableElement=e}},(0,a.h)("rfx-label",{key:"53efd6088fafd8ff0b5c4e530d8f9b19575ff3d2",label:this.strings.weightedSumTable,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(g)()}),(0,a.h)("rfx-grid",{key:"583f350509e9072ecff3957a1b8ba0cb442ec087",canAdd:this.gridSchema.canAdd,class:c.grid,gridLayout:this.gridSchema.gridLayout,gridOptions:this.gridSchema.gridOptions,hasBorder:this.gridSchema.hasBorder,hasHeader:this.gridSchema.hasHeader,hasIdColumn:this.gridSchema.hasIdColumn,inputLayers:this.widgetArgs.inputLayers,onRfxGridOptionChange:this.updateValue,rfxBrowseLayerClick:this.widgetArgs.onRfxBrowseLayerClick,ref:e=>{this.gridElement=e}})))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,a.a)(this)}};u.style=":root{--calcite-color-brand:#007ac2;--calcite-color-brand-hover:#00619b;--calcite-color-brand-press:#004874;--calcite-color-status-info:#00619b;--calcite-color-status-success:#35ac46;--calcite-color-status-warning:#edd317;--calcite-color-status-danger:#d83020;--calcite-color-status-danger-hover:#a82b1e;--calcite-color-status-danger-press:#7c1d13;--calcite-color-background:#f8f8f8;--calcite-color-foreground-1:#ffffff;--calcite-color-foreground-2:#f3f3f3;--calcite-color-foreground-3:#eaeaea;--calcite-color-text-1:#151515;--calcite-color-text-2:#4a4a4a;--calcite-color-text-3:#6a6a6a;--calcite-color-text-inverse:#ffffff;--calcite-color-text-link:#00619b;--calcite-color-border-1:#cacaca;--calcite-color-border-2:#d4d4d4;--calcite-color-border-3:#dfdfdf;--calcite-color-border-input:#949494;--rfx-quarter-spacing:0.25rem;--rfx-half-spacing:0.5rem;--rfx-three-quarter-spacing:0.75rem;--rfx-full-spacing:1rem;--rfx-component-default-width:100%;--rfx-ui-border-input:var(--calcite-color-border-2);--rfx-popover-content-min-height:30vh;--rfx-popover-content-max-height:60vh;--rfx-popover-content-height:45vh;--rfx-widget-content-height:30vh;--rfx-modal-width-small:32rem}.rfx-cte-weighted-sum-table-editor__grid table{width:100%;table-layout:fixed}.rfx-cte-weighted-sum-table-editor__grid table thead tr th:first-child{width:7%}.rfx-cte-weighted-sum-table-editor__grid table thead tr th:last-child{width:7%}.rfx-cte-weighted-sum-table-editor__grid table tbody tr td:first-child{width:7%}.rfx-cte-weighted-sum-table-editor__grid table tbody tr td:last-child{width:7%}.rfx-cte-weighted-sum-table-editor__layer-column{width:40%}.rfx-cte-weighted-sum-table-editor__field-column{width:30%}.rfx-cte-weighted-sum-table-editor__weight-column{width:16%}"},37253:(e,t,i)=>{i.d(t,{R:()=>h});var a=i(92265),s=i(69843),n=(i(5294),i(13661),i(18423),i(21255),i(35431),i(38949)),r=(i(588),i(55448),i(2924),i(11840),i(52373),i(33752),i(440),i(66744),i(44345),i(33797)),l=(i(71802),i(36596),i(23795),i(17902),i(56451),i(47453));const o="inputArgHelpClickHandler",h=class{constructor(e){(0,a.r)(this,e),this.rfxArgumentChange=(0,a.c)(this,"rfxArgumentChange"),this.helpActionClickEventHandlers=new Map,this.handleInputChange=e=>{if(e.stopPropagation(),null!==e.target){const t=(e?.target).value;this.value=(0,l.p)(t),this.inputArg.value=this.value,this.rfxArgumentChange.emit({value:this.value})}}}async checkValidity(){return await this.rfxDteNumberInputElement.checkValidity()}connectedCallback(){this.setInputArgs(),this.setInitialState()}async componentWillLoad(){({strings:this.strings,dir:this.direction}=await(0,s.c)(this.hostElement,(0,a.d)("."))),this.setConstraints()}componentDidLoad(){this.setTriggerArgsInputConstraints(),this.attachHelpClickEventHandlers()}get isFloatType(){return void 0===this.numberType||"float"===this.numberType}setInitialState(){const e=this.inputArg.value||this.inputArg.defaultValue;this.value=e}setInputArgs(){Object.keys(this.widgetArgs.inputArgs).forEach(e=>{const t=this.widgetArgs.inputArgs[e];this.inputArg=t,t.input=this.hostElement;const i=this.widgetArgs.argSchema.dataType,a=this.widgetArgs.argSchema.numberType;this.numberType=a??("long"===i||"double"===i?"float":"integer")})}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.inputArg.displayName,referenceElement:this.widgetContainer,helpTextID:this.inputArg?.helpTextID});this.helpActionClickEventHandlers.set(o,e)}extractIdentifier(e,t){return t.find(t=>e.includes(t))??"Invalid"}setConstraints(){const e=this.widgetArgs.triggerAttributes.split(";"),t=[n.C.MIN_VALUE,n.C.MAX_VALUE,n.C.LESS_THAN_OR_EQUAL,n.C.GREATER_THAN_OR_EQUAL,n.C.LESS_THAN,n.C.GREATER_THAN];e.forEach(e=>{const i=this.extractIdentifier(e,t);({[n.C.MIN_VALUE]:()=>this.minValue=parseInt(e.replace(`${n.C.MIN_VALUE}:`,""),10),[n.C.MAX_VALUE]:()=>this.maxValue=parseInt(e.replace(`${n.C.MAX_VALUE}:`,""),10),[n.C.LESS_THAN]:()=>this.lessThan=e.replace(`${n.C.LESS_THAN}:`,""),[n.C.GREATER_THAN]:()=>this.greaterThan=e.replace(`${n.C.GREATER_THAN}:`,""),[n.C.LESS_THAN_OR_EQUAL]:()=>this.lessThanOrEqual=e.replace(`${n.C.LESS_THAN_OR_EQUAL}:`,""),[n.C.GREATER_THAN_OR_EQUAL]:()=>this.greaterThanOrEqual=e.replace(`${n.C.GREATER_THAN_OR_EQUAL}:`,"")})[i]()},this),void 0!==this.minValue&&(this.min=this.minValue),void 0!==this.maxValue&&(this.max=this.maxValue)}setTriggerArgsInputConstraints(){void 0!==this.greaterThan&&this.attachTriggerArgsChangeListener(n.C.GREATER_THAN,this.greaterThan),void 0!==this.lessThan&&this.attachTriggerArgsChangeListener(n.C.LESS_THAN,this.lessThan),void 0!==this.greaterThanOrEqual&&this.attachTriggerArgsChangeListener(n.C.GREATER_THAN_OR_EQUAL,this.greaterThanOrEqual),void 0!==this.lessThanOrEqual&&this.attachTriggerArgsChangeListener(n.C.LESS_THAN_OR_EQUAL,this.lessThanOrEqual)}attachTriggerArgsChangeListener(e,t){this.widgetArgs.triggerArgs[t]||console.error("Invalid Schema: Trigger Arg Not passed");const i=this.widgetArgs.triggerArgs[t],a=i.value;this.handleTriggerArgChange(e,a),i.input.addEventListener("rfxArgumentChange",({detail:{value:t}})=>{this.handleTriggerArgChange(e,t)})}handleTriggerArgChange(e,t){const i={[n.C.LESS_THAN]:()=>this.max=t,[n.C.GREATER_THAN]:()=>this.min=t,[n.C.LESS_THAN_OR_EQUAL]:()=>this.max=t,[n.C.GREATER_THAN_OR_EQUAL]:()=>this.min=t};i[e]?.()}render(){const e={[n.C.GREATER_THAN]:this.widgetArgs.triggerArgs[this.greaterThan]?.displayName,[n.C.LESS_THAN]:this.widgetArgs.triggerArgs[this.lessThan]?.displayName,[n.C.GREATER_THAN_OR_EQUAL]:this.widgetArgs.triggerArgs[this.greaterThanOrEqual]?.displayName,[n.C.LESS_THAN_OR_EQUAL]:this.widgetArgs.triggerArgs[this.lessThanOrEqual]?.displayName};return(0,a.h)("div",{key:"f5d6d85c562b66c7900d1a7d60874ca383ef2194"},(0,a.h)("calcite-label",{key:"4d6a624ce74e35a2b326985922388a840ac1d5ad",alignment:"start",scale:n.s.scale??r.U.Scale,layout:"default",ref:e=>{this.widgetContainer=e}},(0,a.h)("rfx-label",{key:"ed0a2adb2ae388cbc3abb7170d679c862229c6d1",label:this.inputArg.displayName,hideHelp:(0,n.i)(this.inputArg.helpTextID),onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(o)()}),(0,a.h)("rfx-dte-number-input",{key:"291f0f302be51c5ff2a1fe757d7b9c23829f56e8",value:this.value,onRfxNumberInputChange:this.handleInputChange,excludeMaxValue:void 0!==e?.lessThan,excludeMinValue:void 0!==e?.greaterThan,min:this.min,max:this.max,dependentFields:e,numberType:this.isFloatType?"float":"integer",ref:e=>{this.rfxDteNumberInputElement=e}})))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,a.a)(this)}}},39058:(e,t,i)=>{i.d(t,{R:()=>l});var a=i(92265),s=(i(5294),i(13661),i(18423),i(21255),i(35431),i(38949)),n=(i(588),i(55448),i(2924),i(11840),i(52373),i(33752),i(440),i(66744),i(44345),i(33797));i(71802),i(36596),i(23795),i(17902),i(56451);const r="cellsizeArgHelpClickHandler",l=class{constructor(e){(0,a.r)(this,e),this.rfxArgumentChange=(0,a.c)(this,"rfxArgumentChange"),this.defaultRasterInfo={blockHeight:256,blockWidth:2048,compressionQuality:0,compressionType:"",firstPyramidLevel:1,format:"",maximumPyramidLevel:30,packetSize:4,pixelType:-1,pyramidResamplingType:-1,type:"RasterInfo"},this.helpActionClickEventHandlers=new Map,this.onRasterInfoPixelSizeChange=e=>{const t=e?.detail?.value,i=(t.x||t.y)??1;this.onPixelSizeChange(i)}}connectedCallback(){this.processWidgetArgs()}componentWillLoad(){this.setInitialState()}componentDidLoad(){this.attachHelpClickEventHandlers()}processWidgetArgs(){Object.keys(this.widgetArgs.inputArgs).forEach(e=>{const t=this.widgetArgs.inputArgs[e];this.inputArg=t,t.input=this.hostElement})}setInitialState(){const e=this.value||this.inputArg.value;if((0,s.i)(e))this.cellSizeInputValue=1;else{const{pixelSizeX:t,pixelSizeY:i}=e;this.cellSizeInputValue=t||i||1}}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.inputArg?.displayName,referenceElement:this.widgetContainer,helpTextID:this.inputArg?.helpTextID});this.helpActionClickEventHandlers.set(r,e)}onPixelSizeChange(e){if(!(0,s.i)(e)||!isNaN(e)){if(0===e)this.value=this.defaultRasterInfo;else{const t=this.value||this.defaultRasterInfo;t.pixelSizeX=e,t.pixelSizeY=e,this.value=t}this.inputArg.value=this.value}}render(){const e={x:this.cellSizeInputValue??1,y:this.cellSizeInputValue??1};return(0,a.h)("div",{key:"260dfb4b9e3f095bba4976b62dcc84e22b349496"},(0,a.h)("calcite-label",{key:"59ef6087621233125d5fdebb02d9d11693326d21",alignment:"start",scale:s.s.scale??n.U.Scale,layout:"default",ref:e=>{this.widgetContainer=e}},(0,a.h)("rfx-label",{key:"6e5061218759369da32776eeec91496ba322c264",label:this.inputArg.displayName,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(r)()}),(0,a.h)("rfx-dte-cell-size-input",{key:"0850d14ce278ecbf39b34044a3c139c574772dbf",value:e,onRfxArgumentChange:this.onRasterInfoPixelSizeChange})))}get hostElement(){return(0,a.a)(this)}}},43663:(e,t,i)=>{i.d(t,{R:()=>u,a:()=>c,c:()=>d});var a=i(92265),s=(i(5294),i(13661),i(18423),i(21255),i(35431),i(38949)),n=(i(588),i(55448),i(2924),i(11840),i(52373),i(33752),i(440),i(66744),i(44345),i(33797)),r=(i(71802),i(36596),i(23795),i(17902),i(56451),i(47453));const l=1,o=[.299,.587,.114];function h(e){if(e<=0||e>=255)return l;let t=0;150!==e&&(t=e<=150?45*Math.cos(.01047*e):17*Math.sin(.021*e));const i=e+t,a=Math.log(e/255),s=Math.log(i/255);if(0===s)return l;const n=a/s;return isNaN(n)?l:Math.min(9.9,Math.max(.01,n))}function d(e,t,i){const a=[];for(let s=0;s<t.length;s++){let n=0,r=0,l=0;"min"in t[s]?({min:n,max:r,avg:l}=t[s]):[n,r,l]=t[s];let d=l;"u8"!==e&&(d=255*(d-n)/(r-n)),i&&(d*=o[s]),a.push(h(d))}return a}async function c(e){const t=await e.generateRasterInfo(e.rasterFunction),i=t?.statistics,a=t?.pixelType;if(0===i?.length||!a)return;return d(a,i)}const g="inputArgHelpClickHandler",u=class{constructor(e){(0,a.r)(this,e),this.rfxArgumentChange=(0,a.c)(this,"rfxArgumentChange"),this.defaultMin=-1,this.defaultMax=10,this.bandCount=1,this.defaultValue=1,this.helpActionClickEventHandlers=new Map,this.handleSliderChange=(e,t)=>{const i=e.target.value;this.value[t]=i,this.rfxArgumentChange.emit({value:this.value})}}connectedCallback(){this.processWidgetArgs()}componentWillLoad(){this.setInitialState()}componentDidLoad(){this.attachHelpClickEventHandlers()}processWidgetArgs(){Object.keys(this.widgetArgs.inputArgs).forEach(e=>{const t=this.widgetArgs.inputArgs[e];this.inputArg=t,t.input=this.hostElement});const{triggerArgs:e}=this.widgetArgs,t=e?.Raster;void 0===t&&console.error("Invalid Schema: Raster is not passed in TriggerArgs"),this.rasterArg=t,t?.input?.addEventListener("rfxArgumentChange",()=>{this.handleRasterChange()})}async setInitialState(){const e=this.inputArg.value,t=this.rasterArg?.input,i=await(t?.getSelectedLayer?.()),a=i&&await i.generateRasterInfo(i.rasterFunction);if(!0!==(0,s.i)(e))return(0,s.i)(a?.bandCount)||(this.bandCount=a?.bandCount),void(this.value=e);(0,s.i)(t?.value)?this.value=[]:(this.bandCount=a?.bandCount,this.value=await c(i))}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.inputArg.displayName,referenceElement:this.widgetContainer,helpTextID:this.inputArg?.helpTextID});this.helpActionClickEventHandlers.set(g,e)}async handleRasterChange(){const e=this.rasterArg?.input,t=await(e?.getSelectedLayer?.()),i=t&&await t.generateRasterInfo(t.rasterFunction);this.bandCount=i.bandCount,this.value=await c(t)}render(){const e=this.bandCount,t=this.value;return(0,a.h)("div",{key:"2490118e17589e062e6bc52da8155f1851b47945"},(0,a.h)("calcite-label",{key:"c6c74cee0d013abf58b005ef5a19c9250fb30657",alignment:"start",scale:s.s.scale??n.U.Scale,layout:"default",ref:e=>{this.widgetContainer=e}},(0,a.h)("rfx-label",{key:"e600c61764bb03122c90b11839bda9eb23853664",label:this.inputArg.displayName,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(g)()}),Array.from({length:e}).map((e,i)=>(0,a.h)("rfx-dtex-arg-slider",{min:this.defaultMin,max:this.defaultMax,value:(0,r.f)(t?.[i]??this.defaultValue,3),step:.01,onRfxArgumentChange:e=>{this.handleSliderChange(e,i)}}))))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,a.a)(this)}}},45818:(e,t,i)=>{i.d(t,{R:()=>r});var a=i(92265),s=(i(5294),i(13661),i(18423),i(21255),i(35431),i(38949));i(588),i(55448),i(2924),i(11840),i(52373),i(33752),i(440),i(66744),i(44345),i(71802),i(36596),i(23795),i(17902),i(56451);const n="denominatorUnitHelpClickHandler",r=class{constructor(e){(0,a.r)(this,e),this.rfxArgumentChange=(0,a.c)(this,"rfxArgumentChange"),this.rfxArgHelpClick=(0,a.c)(this,"rfxArgHelpClick"),this.helpActionClickEventHandlers=new Map,this.denominatorUnitList=[],this.handleGradientDimensionChange=e=>{e.stopPropagation();const t=e.target;this.gradientDimensionArg=t.value,this.setDenominatorUnitListOptions();this.denominatorUnitList.some(e=>e.key===this.value)||(this.value="DEFAULT")},this.handleDimensionUnitUpdate=e=>{const t=e.target;this.value=t.value}}connectedCallback(){this.processWidgetArgs(this.widgetArgs)}componentWillLoad(){this.setupInitialState(this.widgetArgs)}componentDidLoad(){this.attachHelpClickEventHandlers()}processWidgetArgs({inputArgs:e,triggerArgs:t}){((0,s.i)(t)||(0,s.i)(t.GradientDimension))&&console.error("Invalid Schema: TriggerArgs is incorrect!"),Object.keys(e).forEach(t=>{const i=e[t];this.inputArg=i,i.input=this.hostElement});const i=t.GradientDimension;this.gradientDimensionArg=i,i.input?.addEventListener("rfxArgumentChange",this.handleGradientDimensionChange.bind(this))}setupInitialState({triggerArgs:e}){const t=this.widgetArgs.inputArgs?.DenominatorUnit;this.value=t.value;const i=e.GradientDimension;this.gradientDimensionArg=i.value,this.setDenominatorUnitListOptions()}setDenominatorUnitListOptions(){let e=this.widgetArgs.rasterFunctionEnums.denominatorUnitList;switch(this.gradientDimensionArg){case"X":case"Y":case"XY":e=[e[0],e[1]];break;case"StdTime":e=[e[0],...e.slice(2,7)];break;default:e=[e[0],e[e.length-1]]}this.denominatorUnitList=e.map(e=>({key:e.key,label:e.label}))}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.widgetArgs.inputArgs.DenominatorUnit.displayName,referenceElement:this.denominatorUnitContainer,helpTextID:this.widgetArgs.helpTextIDs?.gradient_denominatorunit});this.helpActionClickEventHandlers.set(n,e)}render(){return(0,a.h)("div",{key:"22d0103489d90f39e227b71c87ca46fc7a77c870"},(0,a.h)("calcite-label",{key:"09f2091549024a0d9ebe22cc538878b0d534b746",alignment:"start",layout:"default",ref:e=>{this.denominatorUnitContainer=e}},(0,a.h)("rfx-label",{key:"f4235ac1119c6589240bcea08a684c583faa3242",label:this.widgetArgs.inputArgs.DenominatorUnit.displayName,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(n)()}),(0,a.h)("rfx-dtex-common-select",{key:"779cf3a475da4206bd4f094a1a3e8a9d7a72a299",options:this.denominatorUnitList,value:this.value,onRfxArgumentChange:this.handleDimensionUnitUpdate})))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,a.a)(this)}};r.style=""},46575:(e,t,i)=>{i.d(t,{R:()=>d});var a=i(92265),s=i(69843),n=(i(5294),i(13661),i(18423),i(21255),i(35431),i(38949)),r=(i(588),i(55448),i(2924),i(11840),i(52373),i(33752),i(440),i(66744),i(44345),i(42335)),l=i(33797),o=(i(71802),i(36596),i(23795),i(17902),i(56451),i(47453));const h="bandindexesHelpClickHandler",d=class{constructor(e){(0,a.r)(this,e),this.rfxArgumentChange=(0,a.c)(this,"rfxArgumentChange"),this.helpActionClickEventHandlers=new Map}connectedCallback(){this.widgetArgs.triggerArgs?.Method?.input?.addEventListener("rfxArgumentChange",({detail:{value:e}})=>{this.handleMethodChange(e),this.setInputMessageVisibiliy(e)})}async componentWillLoad(){({strings:this.strings,dir:this.direction}=await(0,s.c)(this.hostElement,(0,a.d)("."))),this.setInitialState()}componentDidLoad(){this.attachHelpClickEventHandlers()}setInitialState(){const e=this.widgetArgs.inputArgs?.BandIndexes.value;this.value=e;const t=this.widgetArgs.triggerArgs?.Method.value;this.handleMethodChange(t),this.setInputMessageVisibiliy(t)}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.widgetArgs?.inputArgs?.BandIndexes?.displayName,referenceElement:this.bandIndexsEditorContainer,helpTextID:this.widgetArgs.helpTextIDs?.bandarithmetic_bandindexes});this.helpActionClickEventHandlers.set(h,e)}handleMethodChange(e){let t=`${this.strings.example}: `,i=`${this.strings.input}: `,a=`${this.strings.output}: `;const s=` (${this.strings.optional})`,n=`(${this.strings.WNDWIHintText})`,r="</br>";switch(parseInt(e)){case 0:t+="(B3 - B1) / (B3 + B1)",i="",a="";break;case 1:t+="3 1",i+="NIR Red",a+="(NIR - Red) / (NIR + Red)";break;case 2:t+="3 1 0.33",i+="NIR Red L",a+="((NIR - Red) / (NIR + Red + L)) * (1 + L)";break;case 3:t+="3 1 0.33 0.5 1.5",i+="NIR Red s a X",a+="(s * (NIR - s * Red - a)) / (a * NIR + Red - a * s + X * (1 + s * s))";break;case 4:t+="3 1",i+="NIR Red",a+="(2 * NIR + 1 - Sqrt((2 * NIR + 1) ^ 2 - 8 * (NIR - Red))) / 2";break;case 5:t+="3 1",i+="NIR Red",a+="eta * (1 - 0.25 * eta) - ((Red - 0.125) / (1 - Red))",a+=r,a+=r,a+=" *eta = [2 * (NIR ^ 2 \u2013 Red ^ 2) + 1.5 * NIR + 0.5 * Red] / (NIR + Red + 0.5)";break;case 6:t+="3 1 0.33 0.5",i+="NIR Red a b",a+="(NIR - a * Red - b) / (Sqrt(1 + a ^ 2))";break;case 7:t+="1 2 3 4 5 7",i+="TM1 TM2 TM3 TM4 TM5 TM7",i+=s,a+="-0.2848 * TM1 - 0.2435 * TM2 - 0.5436 * TM3 + 0.7243 * TM4 + 0.084 * TM5 - 0.18 * TM7";break;case 8:t+="1 3 4 5 6",i+="Band1 Band3 Band4 Band5 Band6",i+=s,a+=r,a+=" Band1 = (Band5 / Band6) * 100",a+=r,a+=" Band2 = (Band5 / Band1) * 100",a+=r,a+=" Band3 = (Band3 / Band4) * (Band5 / Band4) * 100";break;case 9:t+="3 2 1",i+="Red Green Blue",a+="(Green - Red) / (Green + Red - Blue)";break;case 10:t+="3 1",i+="NIR Green",a+="(NIR - Green) / (NIR + Green)";break;case 11:t+="3 1",i+="NIR Red",a+="NIR / Red";break;case 12:t+="3 1",i+="NIR RedEdge",a+="(NIR - RedEdge) / (NIR + RedEdge)";break;case 13:t+="3 1",i+="NIR RedEdge",a+="NIR / RedEdge";break;case 14:t+="3 1 2",i+="NIR Green Red",a+="(1.5 * (1.2 * (NIR - Green) - 2.5 * (Red - Green) ) / Sqrt( (2 * NIR + 1) ^ 2 - (6 * NIR - 5 * Sqrt(Red) ) - 0.5 ) )";break;case 15:t+="3 2 1",i+="NIR RedEdge Green",a+="(100 * (NIR - RedEdge) - 10 * (NIR - Green))";break;case 16:t+="3 2",i+="NIR RedEdge",a+="(NIR / RedEdge) - 1.0";break;case 17:t+="3 1",i+="NIR Green",a+="(NIR / Green) - 1.0";break;case 18:t+="3 1",i+="NIR Green",a+="(Green - NIR) / (Green + NIR)";break;case 19:t+="3 2 1",i+="NIR Red Blue",a+="2.5 * [(NIR - Red)/ (NIR + (6 * Red) - (7.5 * Blue) + 1.0)]";break;case 20:t+="3 1",i+="Red Blue",a+="Red / Blue";break;case 21:t+="3 1",i+="SWIR NIR",a+="SWIR / NIR";break;case 22:t+="3 1",i+="SWIR1 SWIR2",a+="SWIR1 / SWIR2";break;case 23:t+="3 2 1 0.75",i+="Green NIR SWIR \u03b1",a+="[Green \u2013 \u03b1 * NIR \u2013 (1 \u2013 \u03b1) * SWIR ] / [Green + \u03b1 * NIR + (1 \u2013 \u03b1) * SWIR]",a+=r,a+=n;break;case 24:t+="3 1",i+="Red NIR",a+="1/((0.1 -RED)^2 + (0.06 - NIR)^2)";break;case 25:t+="3 1",i+="NIR SWIR",a+="(NIR - SWIR) / (NIR + SWIR)";break;case 26:t+="3 1",i+="SWIR NIR",a+="(SWIR - NIR) / (SWIR + NIR)";break;case 27:t+="3 1",i+="NIR SWIR1",a+="(NIR - SWIR1) / (NIR + SWIR1)";break;case 28:case 29:t+="3 1",i+="Green SWIR",a+="(Green - SWIR) / (Green + SWIR)"}let l;this.placeholder=t;try{l=(i+r+a).replace(/(\d+(\.\d+)?)/g,function(e){return(0,o.a)(parseFloat(e))})}catch{l=i+r+a}this.bandIndexEditorMessage=l}setInputMessageVisibiliy(e){return 0===parseInt(e)?this.showInputMessage=!1:this.showInputMessage=!0,this.showInputMessage}render(){return(0,a.h)("div",{key:"67dc28760607a35f1656dc6000564e3411db1a52"},(0,a.h)("calcite-label",{key:"fdea58daaf5b772bebd9c14ec3b9c5d57f2fbfa8",alignment:"start",scale:n.s.scale??l.U.Scale,layout:"default",ref:e=>{this.bandIndexsEditorContainer=e}},(0,a.h)("rfx-label",{key:"de941f0f17e956fb889a5015307063932c76853a",label:this.widgetArgs.inputArgs.BandIndexes.displayName,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(h)()}),(0,a.h)("calcite-input",{key:"5f874ffc99d297174f887cf11bf26e286835de37",type:"text",ref:e=>{this.widgetArgs.inputArgs.BandIndexes.input=e},scale:n.s.scale??l.U.Scale,placeholder:this.placeholder,value:this.value}),(0,a.h)("calcite-input-message",{key:"f9cefecfa0ee030ddc2c7ef73a9ef7be4143588c",status:r.U.IDLE,icon:this.showInputMessage,"icon-flip-rtl":"rtl"===this.direction,ref:e=>{e.innerHTML=this.bandIndexEditorMessage},hidden:!1===this.showInputMessage})))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,a.a)(this)}}},58764:(e,t,i)=>{i.d(t,{R:()=>d});var a=i(92265),s=i(69843),n=i(51477),r=i(33797),l=i(80587),o=(i(5294),i(38949)),h=i(85740);i(23795),i(17902),i(56451),i(588),i(71802),i(44345),i(36596),i(33752);const d=class{constructor(e){(0,a.r)(this,e),this.analysisToolDataChange=(0,a.c)(this,"analysisToolDataChange"),this.analysisToolClose=(0,a.c)(this,"analysisToolclose"),this.analysisUnsupportedFunction=(0,a.c)(this,"analysisUnsupportedFunction"),this.analysisRFTLoadError=(0,a.c)(this,"analysisRFTLoadError"),this.analysisRFxHelpPopoverChange=(0,a.c)(this,"analysisRFxHelpPopoverChange"),this.analysisRFxBrowseLayerClick=(0,a.c)(this,"analysisRFxBrowseLayerClick"),this.resetPreview=!0,this.usePanel=!0,this.showPreview=!0,this.validateOnPreview=!0,this.hideAllArgsHelp=!1,this.hideBrowseLayers=!1,this.hasGlobalFunctionInRFT=!1,this.renderFlag=!1,this.handlePreviewSelectionChange=e=>{this.editorComponent.rfxTemplate=e.detail,setTimeout(()=>{this.validateRFx()},500)},this.handlePreviewHelpClick=e=>{const{referenceElement:t,helpSrcdoc:i,heading:a}=e.detail,r=this.portal?.isPortal,o=this.portal?.sourceJSON?.helpBase||n.a.learnMoreDocBaseURL,h=(0,s.f)(o,this.locale);let d;if(!0===r){const e=n.a.learnMoreDocDefaultEnterpriseHelpID,{restUrl:t}=this.portal;d=`${h}${(0,l.a)(e)}${n.a.learnMoreDocPreviewEnterpriseHelpID}`,d=(0,s.a)(d,t)}else{const e=`${n.a.learnMoreDocDefaultHelpID}${n.a.learnMoreDocPreviewHelpID}`;d=(0,l.f)(h,e)}this.analysisRFxHelpPopoverChange.emit({referenceElement:t,helpSrcdoc:i,heading:a,learnMoreUrl:d})},this.scheduleRenderer=()=>{this.renderFlag=!this.renderFlag}}async onRfxTemplateChange(){!0===this.resetPreview&&(this.hasGlobalFunctionInRFT=await(0,n.h)(this.rfxTemplate,this.locale),this.previewComponent?.clearPreviewLayers())}async onMapLayersChange(){this.resetPreview=!1;try{this.rfxTemplate=await this.getUpdatedRFTWithValues()??this.rfxTemplate}catch(e){this.analysisRFTLoadError.emit()}setTimeout(()=>{this.resetPreview=!0},1)}onPortalChange(e){o.s.portal=e}async getUpdatedRFTWithValues(){return this.editorComponent?.getUpdatedRFTWithValues()}async validateRFx(){return await(this.editorComponent?.checkTemplateValidity())}async reset(){return this.editorComponent.rfxTemplate=this.rfxTemplate,this.editorComponent.resetTraversedList(),this.scheduleRenderer(),Promise.resolve()}async componentWillLoad(){const{locale:e,rtl:t}=(0,s.g)(this.hostElement);this.locale=e,this.dir=(0,s.b)(t),void 0!==this.portal&&this.onPortalChange(this.portal),void 0===this.rfxTemplate&&void 0!==this.functionName&&(this.rfxTemplate=await(0,n.g)(this.functionName)),void 0!==this.rfxTemplate&&void 0===this.rfxTemplate?.arguments&&this.analysisRFTLoadError.emit(),this.hasGlobalFunctionInRFT=await(0,n.h)(this.rfxTemplate,this.locale),o.s.hideAllArgsHelp=!0===this.hideAllArgsHelp,o.s.hideBrowseLayers=!0===this.hideBrowseLayers,o.s.scale=this.scale??r.U.Scale}renderArgsEditor(){const{imageryLayers:e,featureLayers:t}=(0,h.g)(this.mapLayers);return(0,a.h)("rfx-args-editor",{ref:e=>this.editorComponent=e,rfxTemplate:this.rfxTemplate,imageryLayers:e,featureLayers:t,mapView:this.mapView,portal:this.portal,onRfxArgHelpClick:e=>{const{referenceElement:t,helpSrcdoc:i,heading:a}=e.detail;this.analysisRFxHelpPopoverChange.emit({referenceElement:t,helpSrcdoc:i,heading:a})},onRfxBrowseClick:e=>{this.analysisRFxBrowseLayerClick.emit(e.detail)},onRfxUnsupportedFunctionFound:e=>this.analysisUnsupportedFunction.emit(e.detail),onRfxFailedToLoad:()=>this.analysisRFTLoadError.emit()})}renderPreviewElement(){return(0,a.h)("rfx-preview",{mapView:this.mapView,portal:this.portal,getTemplate:()=>this.getUpdatedRFTWithValues(),validateOnPreview:this.validateOnPreview,validateInputValues:()=>this.validateRFx(),onRfxPreviewSelection:this.handlePreviewSelectionChange,onPreviewHelpClick:this.handlePreviewHelpClick,ref:e=>this.previewComponent=e})}render(){return(0,a.h)(a.H,{key:"83053743068c69acc518a8827605e3c1ab8bc324"},!0===this.usePanel?(0,a.h)("calcite-panel",{dir:this.dir,heading:this.rfxTemplate.name,closable:!0,onCalcitePanelClose:()=>this.analysisToolClose.emit()},this.renderArgsEditor()):(0,a.h)("div",null,this.renderArgsEditor(),!0===this.showPreview&&!1===this.hasGlobalFunctionInRFT?this.renderPreviewElement():void 0))}get hostElement(){return(0,a.a)(this)}static get watchers(){return{rfxTemplate:["onRfxTemplateChange"],mapLayers:["onMapLayersChange"],portal:["onPortalChange"]}}}},61567:(e,t,i)=>{i.d(t,{R:()=>p});var a=i(92265),s=(i(5294),i(13661),i(18423),i(21255),i(35431),i(69843)),n=i(38949),r=(i(588),i(55448),i(2924),i(11840),i(52373),i(33752),i(440),i(66744),i(44345),i(42335)),l=i(33797),o=i(73427),h=(i(23795),i(17902),i(56451),i(64130)),d=i(69529);const c="host",g="dialog",u="dialog-heading",p=class{constructor(e){(0,a.r)(this,e),this.rfxEditorWrapperClose=(0,a.c)(this,"rfxEditorWrapperClose"),this.hasBeenOpened=!1,this.initialDocumentOverflowStyle="",this.initState=()=>{n.s.entryPoint=this.entryPoint??r.E.ANALYSIS,n.s.portal=this.portal,n.s.rftId=this.rftItemId??this.portalItem?.id??n.s.rftId,(0,n.i)(this.user)&&!(0,n.i)(this.portal?.user)&&(this.user=this.portal.user),n.s.isViewerUserType=(0,n.P)(this.user)},this.setScale=()=>{this.scale=n.s.entryPoint===r.E.ITEM?l.C.l:l.U.Scale},this.setUIFlags=()=>{n.s.entryPoint===r.E.ITEM?(this.hideCreateNewTemplate=!0,this.hideEditTemplateProperties=!1):(this.hideCreateNewTemplate=!1,this.hideEditTemplateProperties=!0)},this.showReadOnlyAlert=()=>{this.removeReadOnlyAlert();const e=(0,h.c)({modalStrings:{header:this.strings.readOnlyModeTitle,content:this.strings.readOnlyModeMessage}});this.readOnlyAlertElement=e,document.body.appendChild(e)},this.removeReadOnlyAlert=()=>{this.readOnlyAlertElement?.remove(),this.readOnlyAlertElement=void 0},this.canClose=async()=>new Promise(async e=>{void 0!==this.rftItemId?e(await(this.rfxEditorApp?.onPanelClose(this.rftItemId))):e(!0)}),this.handleClose=async()=>{if(!0!==await this.canClose())throw new Error;this.removeReadOnlyAlert(),this.dialogElement.open=!1,this.rfxEditorWrapperClose.emit(),n.s.entryPoint===r.E.ITEM&&!0===this.newItemCreated&&(window.location.href=(0,o.a)(this.portalItem))},this.getDialogHeadingText=()=>this.rfxTemplateName??this.portalItem?.title??this.strings.defaultTemplateName,this.handleRFxTemplateNameChange=e=>{this.rfxTemplateName=e.detail},this.handleRFxTemplateSaved=e=>{const{portalItem:t,template:i}=e.detail;(0,n.i)(t)||(0,n.i)(i)||(t.id!==this.portalItem?.id&&(this.newItemCreated=!0,this.portalItem=t),this.rfxTemplateName=i.name)},this.handleRftItemDetailsLinkClicked=()=>{setTimeout(()=>{this.newItemCreated=!1,this.handleClose()},1)},this.applyStyleToDialogContainer=e=>{(0,d.n)(e,["shadowRoot","children[0]"],e=>{const t=document.createElement("style");t.innerHTML="div.container { z-index: 150; }",e.appendChild(t)})}}onOpenChange(e){this.updateOverflowHiddenClass(e),!0===e&&!0===n.s.isViewerUserType&&this.showReadOnlyAlert(),!1!==this.hasBeenOpened?!0===e&&!1===n.s.isLoadingRFT&&this.rfxEditorApp?.reloadRFTItem():this.hasBeenOpened=!0}async componentWillLoad(){({strings:this.strings}=await(0,s.c)(this.hostElement,(0,a.d)("."))),this.initState(),this.setScale(),this.setUIFlags()}updateOverflowHiddenClass(e){!0===e?this.addOverflowHiddenClass():this.removeOverflowHiddenClass()}addOverflowHiddenClass(){this.initialDocumentOverflowStyle=document.body.style.overflow,document.body.style.setProperty("overflow","hidden")}removeOverflowHiddenClass(){document.body.style.setProperty("overflow",this.initialDocumentOverflowStyle)}render(){return(0,a.h)(a.H,{key:"8d15ed53f54cc3634d83e115927a65f9e7fd895f",class:c},(0,a.h)("calcite-dialog",{key:"6ff1d9ce82ee2c9bc441c41a03c6165c89ddeeb3",id:"rfx-editor-dialog",class:g,open:!0===this.open,outsideCloseDisabled:!0,scale:"l",placement:"cover",beforeClose:async()=>this.handleClose(),ref:e=>{this.dialogElement=e,this.applyStyleToDialogContainer(e)}},(0,a.h)("div",{key:"d38d00900bd748cc612a596442d5975b2c67118b",class:u,slot:"header-content"},(0,a.h)("calcite-icon",{key:"7b5328c16c1db7ae14019772528d9f4fd7412491",icon:"function-editor",scale:this.scale,"text-label":"Raster Function Editor"}),this.getDialogHeadingText()),(0,a.h)("rfx-editor-app",{key:`rfx-editor-app-${this.rftItemId}`,mapLayers:this.mapLayers,mapView:this.mapView,portal:n.s.portal,rftItemId:n.s.rftId,scale:this.scale,ref:e=>{this.rfxEditorApp=e},onAnalysisTemplateNameChanged:this.handleRFxTemplateNameChange,onAnalysisTemplateSaved:this.handleRFxTemplateSaved,onRftItemDetailsLinkClicked:this.handleRftItemDetailsLinkClicked},(0,a.h)("rfx-editor-header-actions",{key:"8c35eef42eff314176cd0cf921987cd9f3b8cfd8",slot:"action-bar",templateId:n.s.rftId,hideCreateNewTemplate:this.hideCreateNewTemplate,hideRFxNodeActions:!0===n.s.isViewerUserType,hideEditTemplateProperties:this.hideEditTemplateProperties,scale:(0,l.u)(this.scale),expanded:!1===n.s.isViewerUserType}))))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,a.a)(this)}static get watchers(){return{open:["onOpenChange"]}}};p.style=":root{--calcite-color-brand:#007ac2;--calcite-color-brand-hover:#00619b;--calcite-color-brand-press:#004874;--calcite-color-status-info:#00619b;--calcite-color-status-success:#35ac46;--calcite-color-status-warning:#edd317;--calcite-color-status-danger:#d83020;--calcite-color-status-danger-hover:#a82b1e;--calcite-color-status-danger-press:#7c1d13;--calcite-color-background:#f8f8f8;--calcite-color-foreground-1:#ffffff;--calcite-color-foreground-2:#f3f3f3;--calcite-color-foreground-3:#eaeaea;--calcite-color-text-1:#151515;--calcite-color-text-2:#4a4a4a;--calcite-color-text-3:#6a6a6a;--calcite-color-text-inverse:#ffffff;--calcite-color-text-link:#00619b;--calcite-color-border-1:#cacaca;--calcite-color-border-2:#d4d4d4;--calcite-color-border-3:#dfdfdf;--calcite-color-border-input:#949494;--rfx-quarter-spacing:0.25rem;--rfx-half-spacing:0.5rem;--rfx-three-quarter-spacing:0.75rem;--rfx-full-spacing:1rem;--rfx-component-default-width:100%;--rfx-ui-border-input:var(--calcite-color-border-2);--rfx-popover-content-min-height:30vh;--rfx-popover-content-max-height:60vh;--rfx-popover-content-height:45vh;--rfx-widget-content-height:30vh;--rfx-modal-width-small:32rem}.host{height:100%;width:100%}.dialog{--calcite-dialog-content-space:0;z-index:150}.dialog-heading{padding:var(--rfx-three-quarter-spacing);font-size:var(--calcite-font-size-2);font-weight:var(--calcite-font-weight-medium);line-height:var(--calcite-line-height-wrap)}.dialog-heading calcite-icon{padding-left:var(--rfx-quarter-spacing);padding-right:var(--rfx-three-quarter-spacing)}"},65842:(e,t,i)=>{i.d(t,{R:()=>u});var a=i(92265),s=(i(5294),i(13661),i(18423),i(21255),i(35431),i(69843)),n=i(38949),r=i(85740),l=i(33797),o=i(51477),h=i(42335);i(588),i(71802),i(44345),i(36596),i(23795),i(17902),i(56451),i(33752);const d="rfx-cte-named-raster-editor",c={nameColumn:`${d}__name-column`,layerColumn:`${d}__layer-column`,layerValidation:`${d}__layer-validation-msg`},g="rasterVariablesHelpClickHandler",u=class{constructor(e){(0,a.r)(this,e),this.gridLayout={inputName:{uiType:h.G.textInput,style:c.nameColumn},assignment:{uiType:h.G.text,constValue:"="},raster:{uiType:h.G.raster,allowScalar:!0,style:c.layerColumn}},this.helpActionClickEventHandlers=new Map,this.gridOptions=[],this.isValid=!0,this.updateWidgetArgs=e=>{const{detail:{gridOptions:t}}=e,i=[],a=[];t.forEach((e,s)=>{if(s===t.length-1)return;const r=(0,n.J)(e.raster);if(!(0,n.i)(r)){r._object_id=e?._object_id;const t=r?.name?.replace(/[0-9]/g,"");"raster"===t?.toLowerCase()&&(r.name=0===s?t:`${t}${s}`)}i.push(e.inputName),a.push(r)});const s=this.widgetArgs.inputArgs;s.Rasters&&(s.Rasters.value={elements:a,type:"ArgumentArray"}),s.InputNames&&(s.InputNames.value=i)}}async checkValidity({required:e}){let t=!0;return e&&(t=this.validateInputArgs(this.widgetArgs)),t}async componentWillLoad(){({strings:this.strings}=await(0,s.c)(this.hostElement,(0,a.d)("."))),await this.readInputArgs()}componentDidLoad(){this.attachHelpClickEventHandlers()}async readInputArgs(){const e=this.widgetArgs.inputArgs,t=e?.InputNames?.value??[],i=e?.Rasters,a=i?.value?.elements||i?.value||[],s=[],l=Math.max(t.length,a.length);let h=0;do{let e=a[h];const i=(0,o.p)(e);let l;if((0,n.i)(i)){const t=e?.value;"number"==typeof t?(l={type:"Scalar",value:t},e={...e,type:"RasterFunctionVariable",isDataset:!0,value:l},s.push(e)):(0,n.i)(t?.url)?void 0!==e&&s.push(e):(e.value=await(0,r.w)(t,this.widgetArgs.inputLayers),s.push(e))}else l=this.widgetArgs.getRFT(i);this.gridOptions.push({id:h,inputName:t[h],rasterElement:e,raster:l??e,_object_id:e?._object_id}),h++}while(h<=l);this.widgetArgs.inputArgs.Rasters.value={elements:s,type:"ArgumentArray"}}validateInputArgs({inputArgs:e}){this.isValid=!0;const t=e?.InputNames?.value??[],i=e?.Rasters,a=i?.value?.elements||i?.value||[];let s=Math.max(t.length,a.length);s=0===s?1:s;return this.isValid=new Array(s).fill(0).every((e,i)=>((e,t)=>{let i=!0;return((0,n.i)(e)||(0,n.i)(t))&&(i=!1),i})(t[i],a[i])),this.isValid}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.strings.rasterVariables,referenceElement:this.variablesContainer,helpTextID:this.widgetArgs.helpTextIDs?.calculator_rastervariables});this.helpActionClickEventHandlers.set(g,e)}render(){return(0,a.h)("div",{key:"2881213c535afac0ae677cfbedf295089595018f"},(0,a.h)("calcite-label",{key:"1c62a716d7183bc05edd78d1c39565900202816e",alignment:"start",scale:n.s.scale??l.U.Scale,layout:"default",ref:e=>{this.variablesContainer=e}},(0,a.h)("rfx-label",{key:"30ef11f833215640387e571630cdc6fef0d1d69d",label:this.strings.rasterVariables,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(g)()}),(0,a.h)("rfx-grid",{key:"17a51aee7ade26c8f5e3ad22fbed7a45dbd3b0c2",inputLayers:this.widgetArgs.inputLayers,gridLayout:this.gridLayout,gridOptions:this.gridOptions,onRfxGridOptionChange:this.updateWidgetArgs,hasHeader:!1,hasIdColumn:!1,canAdd:!0,canRemove:!0,rfxBrowseLayerClick:this.widgetArgs.onRfxBrowseLayerClick}),(0,a.h)("calcite-input-message",{key:"580f9c907a976c8ae61d98cd0c9e6863c1c3e039",class:c.layerValidation,status:"invalid",scale:n.s.scale??l.U.Scale,hidden:!0===this.isValid,icon:"exclamationMarkTriangle"},this.strings.inValidInput)))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,a.a)(this)}};u.style=":root{--calcite-color-brand:#007ac2;--calcite-color-brand-hover:#00619b;--calcite-color-brand-press:#004874;--calcite-color-status-info:#00619b;--calcite-color-status-success:#35ac46;--calcite-color-status-warning:#edd317;--calcite-color-status-danger:#d83020;--calcite-color-status-danger-hover:#a82b1e;--calcite-color-status-danger-press:#7c1d13;--calcite-color-background:#f8f8f8;--calcite-color-foreground-1:#ffffff;--calcite-color-foreground-2:#f3f3f3;--calcite-color-foreground-3:#eaeaea;--calcite-color-text-1:#151515;--calcite-color-text-2:#4a4a4a;--calcite-color-text-3:#6a6a6a;--calcite-color-text-inverse:#ffffff;--calcite-color-text-link:#00619b;--calcite-color-border-1:#cacaca;--calcite-color-border-2:#d4d4d4;--calcite-color-border-3:#dfdfdf;--calcite-color-border-input:#949494;--rfx-quarter-spacing:0.25rem;--rfx-half-spacing:0.5rem;--rfx-three-quarter-spacing:0.75rem;--rfx-full-spacing:1rem;--rfx-component-default-width:100%;--rfx-ui-border-input:var(--calcite-color-border-2);--rfx-popover-content-min-height:30vh;--rfx-popover-content-max-height:60vh;--rfx-popover-content-height:45vh;--rfx-widget-content-height:30vh;--rfx-modal-width-small:32rem}.rfx-cte-named-raster-editor__name-column{width:5rem}.rfx-cte-named-raster-editor__layer-validation-msg{margin-top:0.5rem}"},72933:(e,t,i)=>{i.d(t,{R:()=>h});var a=i(92265),s=i(51477),n=i(33797),r=i(38949);i(588),i(71802),i(44345),i(36596),i(5294),i(55448),i(2924),i(11840),i(52373),i(33752),i(440),i(66744),i(23795),i(17902),i(56451);const l=[{name:"BlackSky",pansharpenWeights:[.85,.7,.35,1]},{name:"DubaiSat-2",pansharpenWeights:[.166,.167,.167,.5]},{name:"GeoEye-1",pansharpenWeights:[.41,.16,.13,.3]},{name:"GF-1 PMS",pansharpenWeights:[.2501,.3646,0,.3853]},{name:"GF-2 PMS",pansharpenWeights:[.2501,.3646,0,.3853]},{name:"IKONOS",pansharpenWeights:[.378,.211,0,.411]},{name:"Jilin-1",pansharpenWeights:[.2501,.3646,0,.5]},{name:"KOMPSAT-2",pansharpenWeights:[.166,.167,.167,.5]},{name:"KOMPSAT-3",pansharpenWeights:[.166,.167,.167,.5]},{name:"Landsat 1-5  MSS",pansharpenWeights:[0,0,0,0]},{name:"Landsat 7  ETM+",pansharpenWeights:[.11,.14,.14,.61]},{name:"Landsat 8",pansharpenWeights:[.42,.51,.07,0]},{name:"Landsat 9",pansharpenWeights:[.42,.51,.07,0]},{name:"Pleiades Neo",pansharpenWeights:[.45,.55,0,0]},{name:"Pleiades-1",pansharpenWeights:[.9,.75,.5,.5]},{name:"QuickBird",pansharpenWeights:[.85,.7,.35,1]},{name:"SkySat",pansharpenWeights:[.41,.16,.13,.3]},{name:"SPOT 5",pansharpenWeights:[.166,.167,.167,.5]},{name:"SPOT 6",pansharpenWeights:[.45,.55,0,0]},{name:"SPOT 7",pansharpenWeights:[.45,.55,0,0]},{name:"SuperView-1",pansharpenWeights:[.85,.7,.35,1]},{name:"TH-01",pansharpenWeights:[.329,.509,0,.162]},{name:"UltraCam",pansharpenWeights:[.326,.645,.029,0]},{name:"Vision-1",pansharpenWeights:[.42,.51,.07,0]},{name:"WorldView-2",pansharpenWeights:[.39,.23,.21,.17]},{name:"WorldView-3",pansharpenWeights:[.38,.25,.2,.16]},{name:"WorldView-4",pansharpenWeights:[.39,.23,.21,.17]},{name:"ZY1-02C PMS",pansharpenWeights:[.378,.211,0,.411]},{name:"ZY3-CRESDA",pansharpenWeights:[.329,.509,0,.162]},{name:"ZY3-SASMAC",pansharpenWeights:[.329,.509,0,.162]}],o="inputArgHelpClickHandler",h=class{constructor(e){(0,a.r)(this,e),this.rfxArgumentChange=(0,a.c)(this,"rfxArgumentChange"),this.sensorList=l,this.helpActionClickEventHandlers=new Map,this.store=[],this.handleInputChange=e=>{e.stopPropagation();const t=e.target.value;this.inputArg.value=t,this.value=t;const i=this.sensorList.find(e=>e.name===t),a=!1===(0,r.i)(i)?i.pansharpenWeights:[.166,.167,.167,.5];this.widgetArgs.triggerArgs.Weights.input.value=a,this.rfxArgumentChange.emit({value:t})}}connectedCallback(){this.processWidgetArgs(this.widgetArgs)}componentWillLoad(){this.setupInitialState(this.widgetArgs)}componentDidLoad(){this.attachHelpClickEventHandlers()}processWidgetArgs({inputArgs:e}){Object.keys(e).forEach(t=>{const i=e[t];this.inputArg=i,this.inputArg.key=t,i.input=this.hostElement})}setupInitialState({rfxArgs:e,rasterFunctions:t}){this.value=this.inputArg.value;const i=t[(0,s.i)(e)],a=i?.rasterFunctionArguments,n=this.inputArg.key;this.value=this.inputArg.value;const l=a?.[n]?.domain;if("list"===l?.type){const e=l.enum;this.store=(0,s.m)(e)}else console.error("Invalid inputArg! Check Schema");this.store=this.store.concat(this.sensorList.map(function(e){return{key:e.name,label:e.name}})),this.store?.forEach(e=>{e.key=e.key.toString()}),(0,r.i)(this.store)&&console.error("Domain list Enum not set! Check Schema"),this.value=this.inputArg.value||this.store[0].key}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.inputArg.displayName,referenceElement:this.widgetContainer,helpTextID:this.inputArg?.helpTextID});this.helpActionClickEventHandlers.set(o,e)}render(){return(0,a.h)("div",{key:"e7f4df146c8256c6b7afdd8c7f0827d608f6a69e"},(0,a.h)("calcite-label",{key:"6ce2028a51ce2e1a701b4823ae888e1bf365d0ce",alignment:"start",scale:r.s.scale??n.U.Scale,layout:"default",ref:e=>{this.widgetContainer=e}},(0,a.h)("rfx-label",{key:"7f6e86b7b80a923f51fbf50703eac21b1c584bd9",label:this.inputArg.displayName,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers.get(o)()}),(0,a.h)("rfx-dtex-common-select",{key:"d8b3aaed5c30d1e98dbd903a8847663cc429c276",mode:this.widgetArgs.mode,options:this.store,value:String(this.value),onRfxArgumentChange:this.handleInputChange})))}get hostElement(){return(0,a.a)(this)}}},76159:(e,t,i)=>{i.d(t,{$Jr:()=>d.p,$Lx:()=>l.e,$Ql:()=>c.g,$Zk:()=>p.F,$_T:()=>l.L,$kB:()=>r.E,$mZ:()=>x.R,$t5:()=>l.i,$w6:()=>a.r,ABh:()=>l.k,AuT:()=>n.c,AvT:()=>o.A,B3Z:()=>o.t,BUO:()=>m.R,BsA:()=>o.w,CEN:()=>a.v,CkQ:()=>a.x,Cty:()=>n.f,DDy:()=>o.a,DTo:()=>l.H,DVJ:()=>o.f,D_p:()=>h.R,Dnx:()=>o.d,Dq8:()=>h.f,E4:()=>a.j,EmE:()=>l.r,EnT:()=>p.c,EtT:()=>l.f,FaQ:()=>R.R,Fv3:()=>o.p,FvE:()=>S.R,G6k:()=>I.R,GIw:()=>c.e,GMw:()=>d.a,GTU:()=>n.d,GZJ:()=>V.R,GgE:()=>h.s,GrH:()=>a.c,Hn1:()=>a.g,HpT:()=>o.c,HyN:()=>r.G,J_r:()=>r.J,JfT:()=>o.s,JnC:()=>B.R,Jv5:()=>l.b,Jwk:()=>d.b,KC_:()=>o.q,KcO:()=>a.h,Kcd:()=>l.A,Kjm:()=>a.o,Kt4:()=>r.M,LDF:()=>a.C,LPT:()=>l.x,LcM:()=>l.n,Lwk:()=>l.M,Mrf:()=>a.s,My8:()=>a.u,NQ6:()=>a.d,Oom:()=>l.D,P$C:()=>D.R,P9C:()=>r.c,PiZ:()=>l.l,Q3P:()=>a.y,QGI:()=>O,QHA:()=>u.l,Qcn:()=>n.g,RIC:()=>c.c,RKz:()=>m.F,RPx:()=>u.i,RTy:()=>c.u,Rmw:()=>l.G,Rnp:()=>W.R,S9A:()=>a.w,STZ:()=>a.S,SVg:()=>a.m,Sbx:()=>C.R,T1:()=>a.F,T9l:()=>k.R,Tfi:()=>s.a,Trr:()=>b.R,Twb:()=>n.a,UBY:()=>h.D,UPr:()=>a.b,UbH:()=>o.o,UvL:()=>l.P,VLP:()=>o.i,VTd:()=>r.a,VbK:()=>o.m,Vew:()=>c.R,VpO:()=>o.j,XIo:()=>a.k,Xpf:()=>T.R,Xxn:()=>p.u,XyP:()=>r.U,Y5s:()=>h.d,YBQ:()=>l.O,YOy:()=>h.h,ZP5:()=>l.t,ZVp:()=>d.f,Zrt:()=>U,_0X:()=>N.R,_tg:()=>s.u,aLH:()=>a.A,aLq:()=>h.i,aib:()=>l.j,aj6:()=>l.J,asn:()=>o.e,az7:()=>o.u,b$Q:()=>o.g,bte:()=>m.N,bxl:()=>a.z,cHq:()=>a.q,cI:()=>c.a,cOi:()=>a.f,cY9:()=>h.g,d1F:()=>o.z,dAP:()=>l.T,dpS:()=>h.e,eDx:()=>l.d,eH:()=>u.g,ezA:()=>l.m,fPx:()=>g.c,fSJ:()=>h.a,fUh:()=>g.a,fhg:()=>a.e,gLh:()=>u.a,gRj:()=>o.l,gf6:()=>d.i,h6_:()=>r.P,hPV:()=>o.v,hQ5:()=>g.R,hcS:()=>l.c,hfr:()=>h.b,hwK:()=>l.w,hyQ:()=>l.I,ivH:()=>h.c,j_:()=>a.t,jwn:()=>l.a,jym:()=>n.b,kel:()=>o.x,klB:()=>n.e,lwI:()=>a.E,mCu:()=>l.g,mlI:()=>l.N,nEo:()=>o.y,nRR:()=>A.R,o5y:()=>o.b,o8K:()=>l.h,okm:()=>a.D,ol9:()=>l.z,omp:()=>l.q,oqQ:()=>o.k,pLv:()=>o.n,pV:()=>h.l,qCC:()=>l.v,qJB:()=>E.R,qQn:()=>a.i,qW0:()=>u.c,qa0:()=>l.R,qgM:()=>l.u,r8Q:()=>h.C,rF$:()=>o.h,rNp:()=>l.F,rW6:()=>h.k,sYC:()=>_.R,tXL:()=>a.n,tsW:()=>y.R,uHA:()=>L.R,uWi:()=>v.R,u_o:()=>c.b,uaT:()=>h.j,vBi:()=>o.r,vC_:()=>d.s,vH3:()=>o.B,w$_:()=>p.I,w68:()=>c.d,wEq:()=>w.R,wUB:()=>l.y,wWk:()=>d.l,waU:()=>M.R,wjg:()=>l.C,wxz:()=>H.R,x38:()=>r.d,x4A:()=>d.d,xBP:()=>a.B,y2W:()=>f.R,y7T:()=>s.C,yGI:()=>r.A,yL5:()=>l.o,yOJ:()=>l.K,yRx:()=>a.l,yZP:()=>l.p,zI8:()=>a.p,zPL:()=>l.E,zfv:()=>s.U});var a=i(51477),s=i(33797),n=i(80587),r=i(42335),l=i(38949),o=i(85740),h=i(11189),d=i(47453),c=i(72415),g=i(43663),u=i(73427),p=i(42678),m=i(19956),f=i(58764),b=i(61567),A=i(72933),v=i(46575),C=i(24684),y=i(91739),x=i(20074),w=i(88526),k=i(13444),R=i(44615),E=i(94379),S=i(91457),I=i(65842),T=i(87605),H=i(37253),L=i(39058),N=i(81222),D=i(97596),B=i(201),W=i(38987),V=i(29422),M=i(45818),_=i(76596);i(5294),i(16035),i(69843),i(13661),i(18423),i(21255),i(35431),i(45253),i(92265),i(32513),i(33752),i(44345),i(588),i(55448),i(2924),i(11840),i(52373),i(440),i(66744),i(71802),i(36596),i(23795),i(17902),i(56451),i(64130),i(69529),i(48640);function U(e){return`${e?.charAt(0).toUpperCase()}${e.slice(1)}`}function O(e){window.rfe$=Object.freeze({getDisplayData:async()=>await e.getModelJSON()})}},76596:(e,t,i)=>{i.d(t,{R:()=>c});var a=i(92265),s=i(69843),n=(i(5294),i(13661),i(18423),i(21255),i(35431),i(38949)),r=(i(588),i(55448),i(2924),i(11840),i(52373),i(33752),i(440),i(66744),i(44345),i(33797));i(71802),i(36596),i(23795),i(17902),i(56451);const l="subsetBandCombinationHelpClickHandler",o="range-container",h="dropdown",d="add-button",c=class{constructor(e){(0,a.r)(this,e),this.rfxArgumentChange=(0,a.c)(this,"rfxArgumentChange"),this.rfxArgHelpClick=(0,a.c)(this,"rfxArgHelpClick"),this.helpActionClickEventHandlers=new Map,this.ranges="",this.onMethodChange=e=>{const t=e.target;this.method=Number.parseInt(t.value,10),this.widgetArgs.inputArgs?.Method&&(this.widgetArgs.inputArgs.Method.value=this.method);const i=0===this.method?"bandIds":1===this.method?"bandWavelength":"bandNames",a=this.getBandOptions(i);return this.options=a,this.selectedMin=a[0]?.label||"",2!==this.method&&(this.selectedMax=a[1]?.label||a[0]?.label||""),this.ranges="",this.method},this.handleMinimumChange=e=>{const t=e.detail;t&&(this.selectedMin=t.value)},this.handleMaximumChange=e=>{const t=e.detail;t&&(this.selectedMax=t.value)}}connectedCallback(){this.processWidgetArgs()}async componentWillLoad(){({strings:this.strings,dir:this.direction}=await(0,s.c)(this.hostElement,(0,a.d)("."))),this.setupInitialState()}componentDidLoad(){this.attachHelpClickEventHandlers()}processWidgetArgs(){if(!this.widgetArgs?.rasterArgs)return;this.rasterArg=this.widgetArgs.rasterArgs.Raster,this.rasterArg?.input?.addEventListener("rfxArgumentChange",()=>{this.updateRasterArg()});const e=this.widgetArgs.triggerArgs.Method;this.method=e,e.input?.addEventListener("rfxArgumentChange",this.onMethodChange.bind(this))}setupInitialState(){this.updateRasterArg(),this.setMethodValue(),this.ranges=this.getRangeValue()}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.widgetArgs?.inputArgs?.Bands?.displayName,referenceElement:this.subsetBandCombinationContainer,helpTextID:this.widgetArgs.helpTextIDs?.subsetbands_combination??this.widgetArgs.helpTextIDs?.labelbadbands_combination});this.helpActionClickEventHandlers.set(l,e)}async setMethodValue(){this.method=this.widgetArgs.triggerArgs?.Method?.value;const e=0===this.method?"bandIds":1===this.method?"bandWavelength":"bandNames",t=this.getBandOptions(e);this.options=t}getBandOptions(e){if(!this.bandProperties)return[];return this.bandProperties[e].map(e=>({key:e.label.toString(),label:e.label}))}async updateRasterArg(){const e=this.rasterArg&&this.rasterArg.input;this.layer=await(e?.getSelectedLayer?.()),await this.updateBands()}async updateBands(){this.layer&&(this.layer.loaded?(await this.updateBandsOnLayerLoad(),await this.setMethodValue()):this.layer.when(async()=>{await this.updateBandsOnLayerLoad(),this._setupValues(),await this.setMethodValue()}))}_setupValues(){const e=this.widgetArgs.inputArgs;e&&e.Method&&void 0!==e.Method.value?this.method=e.Method.value:!e.BandIds||e.BandNames||e.BandWavelengths?!e.BandNames||e.BandIds||e.BandWavelengths?!e.bandWavelengths||e.BandIds||e.BandNames||(this.method=1):this.method=0:this.method=2}async updateBandsOnLayerLoad(){let e=[],t=[],i=[];const a=await(this.layer?.generateRasterInfo(this.layer.rasterFunction)),s=a?.keyProperties;if(s?.BandProperties?.forEach((a,s)=>{e.push({label:String(s+1)}),t.push({label:a.BandName??`Band_${s+1}`}),i.push({label:a.Wavelength})}),!s.BandProperties||s.BandProperties&&!s.BandProperties.length){const i=this._getDefaultBandProperties(a.bandCount);t=i.bandNames,e=i.bandIds}this.bandProperties={bandIds:e,bandNames:t,bandWavelength:i}}_getDefaultBandProperties(e){const t=[],i=[],a=[];for(let s=1;s<=e;s++)t.push({label:String(s)}),i.push({label:`Band_${s}`}),a.push({label:String(s)});return{bandNames:i,bandIds:t,bandWavelength:a}}addRange(){let e;const t=this.options.find(e=>e.key===this.selectedMin)?.label||this.options[0]?.label,i=2!==this.method?this.options.find(e=>e.key===this.selectedMax)?.label||this.options[1]?.label:"";if(t){if(t===i||""===i)e=t;else{const a=[t,i].sort((e,t)=>e.localeCompare(t));e=`${a[0]}-${a[1]}`}return this.ranges=this.ranges?`${this.ranges} ${e}`:e,this.updateRangeValue(),this.ranges}}handleRangeInput(e){const t=e.target;this.ranges=t.value.split(" ").map(e=>e.trim()).filter(e=>e.length>0).join(" ")}updateRangeValue(){const e=this.widgetArgs.inputArgs;e&&(e.Bands.value=this.ranges)}getRangeValue(){const e=this.widgetArgs.inputArgs;return e?.Bands?.value}render(){return(0,a.h)("div",{key:"1aedb26d67c630340ac9a5f782ff85fc3ebc14a5"},(0,a.h)("div",{key:"4ea142826b303528030e77d4d3eb2d7533a43f68",class:o},(0,a.h)("calcite-label",{key:"2b019fb47a8dd25e6c5da4d0de4ec8c467d8ef34",alignment:"start",scale:n.s.scale??r.U.Scale,layout:"default",ref:e=>{this.subsetBandCombinationContainer=e}},(0,a.h)("rfx-label",{key:"2a8e93dee966fc3f244d3915fa65bb9c3b7ddc06",label:this.strings.minimum,hideHelp:!0}),(0,a.h)("rfx-dtex-common-select",{key:"967440a9a607a48202372addaefe84b6b1f6afed",mode:this.widgetArgs.mode,options:this.options,value:void 0!==this.selectedMin?this.selectedMin:this.options[0]?.label,class:h,onRfxArgumentChange:this.handleMinimumChange})),2!==this.method&&(0,a.h)("calcite-label",{key:"72930c0cded5aa8dab3a3b7da2ffad11e4b052f8",alignment:"start",scale:n.s.scale??r.U.Scale,layout:"default",ref:e=>{this.subsetBandCombinationContainer=e}},(0,a.h)("rfx-label",{key:"a6e03502a08c481e1c49c309b5d54395ea490888",label:this.strings.maximum,hideHelp:!0}),(0,a.h)("rfx-dtex-common-select",{key:"2d7539f635d0262c253711ace723b6f478026f74",mode:this.widgetArgs.mode,options:this.options,value:void 0!==this.selectedMax?this.selectedMax:this.options[1]?.label,class:h,hidden:2===this.method,onRfxArgumentChange:this.handleMaximumChange})),(0,a.h)("calcite-button",{key:"2fecfa44001991ee9378265962451370b8d4234f",slot:"action","icon-start":"plus",scale:"s",width:"auto",class:d,onClick:()=>this.addRange()})),(0,a.h)("calcite-label",{key:"fd643bb508dfad3e6a7d99528b19ccd7bad10161",alignment:"start",scale:n.s.scale??r.U.Scale,layout:"default",ref:e=>{this.subsetBandCombinationContainer=e}},(0,a.h)("rfx-label",{key:"61bb5f4b6ac63e3ee6ad3d40e48e60b6541af8d0",label:this.strings.combination,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(l)()}),(0,a.h)("calcite-input-text",{key:"7e10c1f32bd85048e1112874cd423fa3c420a333",scale:n.s.scale??r.U.Scale,dir:this.direction,value:this.ranges,status:"idle",alignment:"start",onCalciteInputTextChange:e=>this.handleRangeInput(e),ref:e=>{this.bandCombinationElement=e}})))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,a.a)(this)}};c.style=":root{--calcite-color-brand:#007ac2;--calcite-color-brand-hover:#00619b;--calcite-color-brand-press:#004874;--calcite-color-status-info:#00619b;--calcite-color-status-success:#35ac46;--calcite-color-status-warning:#edd317;--calcite-color-status-danger:#d83020;--calcite-color-status-danger-hover:#a82b1e;--calcite-color-status-danger-press:#7c1d13;--calcite-color-background:#f8f8f8;--calcite-color-foreground-1:#ffffff;--calcite-color-foreground-2:#f3f3f3;--calcite-color-foreground-3:#eaeaea;--calcite-color-text-1:#151515;--calcite-color-text-2:#4a4a4a;--calcite-color-text-3:#6a6a6a;--calcite-color-text-inverse:#ffffff;--calcite-color-text-link:#00619b;--calcite-color-border-1:#cacaca;--calcite-color-border-2:#d4d4d4;--calcite-color-border-3:#dfdfdf;--calcite-color-border-input:#949494;--rfx-quarter-spacing:0.25rem;--rfx-half-spacing:0.5rem;--rfx-three-quarter-spacing:0.75rem;--rfx-full-spacing:1rem;--rfx-component-default-width:100%;--rfx-ui-border-input:var(--calcite-color-border-2);--rfx-popover-content-min-height:30vh;--rfx-popover-content-max-height:60vh;--rfx-popover-content-height:45vh;--rfx-widget-content-height:30vh;--rfx-modal-width-small:32rem}.range-container{display:flex;flex-direction:row;justify-content:space-between}.dropdown{width:150px;padding:5px;-webkit-appearance:none;-moz-appearance:none;appearance:none}.add-button{width:auto;align-self:center;margin-top:1.6rem}"},81222:(e,t,i)=>{i.d(t,{R:()=>h});var a=i(92265),s=(i(5294),i(13661),i(18423),i(21255),i(35431),i(69843)),n=i(38949),r=(i(588),i(55448),i(2924),i(11840),i(52373),i(33752),i(440),i(66744),i(44345),i(42335)),l=(i(71802),i(36596),i(23795),i(17902),i(56451),i(47453));const o={base:"rfx-cte-remap-grid"},h=class{constructor(e){(0,a.r)(this,e),this.rfxArgumentChange=(0,a.c)(this,"rfxArgumentChange"),this.gridSchema={gridLayout:{},gridOptions:[],hasBorder:!0,hasHeader:!0,canAdd:!0,hasIdColumn:!0},this.updateValue=e=>{const{detail:{gridOptions:t}}=e,i=[],a=[],s=[];if((0,n.i)(t))return;t.forEach((e,r)=>{if(r===t.length-1)return;const{NoData:o}=e;let{Minimum:h=0,Maximum:d=0,Output:c=0}=e;h=(0,l.p)(h),d=(0,l.p)(d),c=(0,l.p)(c),d<h&&(d=h),o?(s.push(h,d),c=null):(0,n.i)(c)||(i.push(h,d),a.push(c))});const{inputArgs:r}=this.widgetArgs;r.InputRanges.value=i,r.OutputValues.value=a,r.NoDataRanges.value=s}}async componentWillLoad(){({strings:this.strings,dir:this.direction}=await(0,s.c)(this.hostElement,(0,a.d)("."))),this.initGrid()}createDataObjects(){const{inputArgs:e}=this.widgetArgs,t=e.InputRanges?.value||[],i=e.OutputValues?.value||[];let a=e.NoDataRanges?.value||[];"string"==typeof a&&(a=a.trim().split(/[ ,]+/));const s=[];if(0===t.length&&0===i.length&&0===a.length)return s.push({id:0,Minimum:0,Maximum:0,Output:0,NoData:!1}),s;if(i.length>0&&t.length===2*i.length)for(let e=0;e<i.length;e++)s.push({id:e,Minimum:t[2*e],Maximum:t[2*e+1],Output:i[e],NoData:!1});const n=s.length;if(a.length>0)for(let e=0;e<a.length/2;e++)s.push({id:n+e,Minimum:a[2*e],Maximum:a[2*e+1],Output:null,NoData:!0});return s.push({id:n+1,Minimum:void 0,Maximum:void 0,Output:void 0,NoData:!1}),s}initGrid(){const e={Minimum:{label:this.strings.minimum,uiType:r.G.textInput},Maximum:{label:this.strings.maximum,uiType:r.G.textInput},Output:{label:this.strings.output,uiType:r.G.textInput},NoData:{label:this.strings.noData,uiType:r.G.boolean}},t=this.createDataObjects();this.gridSchema={...this.gridSchema,gridLayout:e,gridOptions:t}}render(){return(0,a.h)("calcite-label",{key:"98bd28a9e4546e2feb30338b68992983b81bbb26"},(0,a.h)("rfx-grid",{key:"1891ff8ce608e24d5636999b336d09b107af551d",class:o.base,hasHeader:this.gridSchema.hasHeader,canAdd:this.gridSchema.canAdd,hasIdColumn:this.gridSchema.hasIdColumn,gridLayout:this.gridSchema.gridLayout,gridOptions:this.gridSchema.gridOptions,hasBorder:this.gridSchema.hasBorder,onRfxGridOptionChange:this.updateValue}))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,a.a)(this)}};h.style=":root{--calcite-color-brand:#007ac2;--calcite-color-brand-hover:#00619b;--calcite-color-brand-press:#004874;--calcite-color-status-info:#00619b;--calcite-color-status-success:#35ac46;--calcite-color-status-warning:#edd317;--calcite-color-status-danger:#d83020;--calcite-color-status-danger-hover:#a82b1e;--calcite-color-status-danger-press:#7c1d13;--calcite-color-background:#f8f8f8;--calcite-color-foreground-1:#ffffff;--calcite-color-foreground-2:#f3f3f3;--calcite-color-foreground-3:#eaeaea;--calcite-color-text-1:#151515;--calcite-color-text-2:#4a4a4a;--calcite-color-text-3:#6a6a6a;--calcite-color-text-inverse:#ffffff;--calcite-color-text-link:#00619b;--calcite-color-border-1:#cacaca;--calcite-color-border-2:#d4d4d4;--calcite-color-border-3:#dfdfdf;--calcite-color-border-input:#949494;--rfx-quarter-spacing:0.25rem;--rfx-half-spacing:0.5rem;--rfx-three-quarter-spacing:0.75rem;--rfx-full-spacing:1rem;--rfx-component-default-width:100%;--rfx-ui-border-input:var(--calcite-color-border-2);--rfx-popover-content-min-height:30vh;--rfx-popover-content-max-height:60vh;--rfx-popover-content-height:45vh;--rfx-widget-content-height:30vh;--rfx-modal-width-small:32rem}.rfx-cte-remap-grid{overflow-x:auto}"},87605:(e,t,i)=>{i.d(t,{R:()=>l});var a=i(92265),s=(i(5294),i(13661),i(18423),i(21255),i(35431),i(38949)),n=(i(588),i(55448),i(2924),i(11840),i(52373),i(33752),i(440),i(66744),i(33797));i(71802),i(44345),i(36596),i(23795),i(17902),i(56451);const r="inputArgHelpClickHandler",l=class{constructor(e){(0,a.r)(this,e),this.rfxArgumentChange=(0,a.c)(this,"rfxArgumentChange"),this.helpActionClickEventHandlers=new Map,this.renderGrid=!1}connectedCallback(){this.processWidgetArgs(this.widgetArgs)}componentWillLoad(){this.setupInitialState(this.widgetArgs)}componentWillRender(){this.setWidgetValue()}componentDidLoad(){this.attachHelpClickEventHandlers()}processWidgetArgs({inputArgs:e,triggerArgs:t}){Object.keys(e).forEach(t=>{const i=e[t];this.inputArg=i,i.input=this.hostElement}),t.Width?.input.addEventListener("rfxArgumentChange",e=>{e.stopPropagation();const{detail:{value:t}}=e;this.onWidthValueChange(t)}),t.Height?.input.addEventListener("rfxArgumentChange",e=>{e.stopPropagation();const{detail:{value:t}}=e;this.onHeightValueChange(t)}),t.NeighborhoodType?.input.addEventListener("rfxArgumentChange",e=>{const{detail:{value:t}}=e;this.onNeighborhoodTypeValueChange(t)})}setupInitialState({inputArgs:e,triggerArgs:t}){const i=e.NeighborhoodValues.value,a=t.Width?.value??3,n=t.Height?.value??3;this.widgetState=(0,s.J)({columns:a,rows:n,value:i}),this.value=i,this.renderGrid=5===t.NeighborhoodType.value||6===t.NeighborhoodType.value}setWidgetValue(){this.value=this.widgetState?.value}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.inputArg.displayName,referenceElement:this.widgetContainer,helpTextID:this.inputArg?.helpTextID});this.helpActionClickEventHandlers.set(r,e)}onWidthValueChange(e){!e||e<=0||(this.widgetState={...this.widgetState,columns:e})}onHeightValueChange(e){!e||e<=0||(this.widgetState={...this.widgetState,rows:e})}onNeighborhoodTypeValueChange(e){this.renderGrid=5===e||6===e}render(){return(0,a.h)("div",{key:"70c53e71d55879a8322024b95cb69a8ced0242e0"},this.renderGrid?(0,a.h)("calcite-label",{alignment:"start",scale:s.s.scale??n.U.Scale,layout:"default",ref:e=>{this.widgetContainer=e,this.attachHelpClickEventHandlers()}},(0,a.h)("rfx-label",{label:this.inputArg.displayName,hideHelp:(0,s.i)(this.inputArg.helpTextID),onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers.get(r)()}),(0,a.h)("rfx-simple-matrix",{columns:this.widgetState.columns,rows:this.widgetState.rows,value:this.widgetState.value,onRfxArgumentChange:e=>{e.stopPropagation();const{detail:{value:t}}=e;(0,s.y)(this.value,t)||(this.widgetState={...this.widgetState,value:t})},isEditable:!0})):null)}get hostElement(){return(0,a.a)(this)}};l.style=""},88526:(e,t,i)=>{i.d(t,{R:()=>d});var a=i(92265),s=i(51477),n=i(33797),r=i(38949),l=(i(588),i(71802),i(44345),i(36596),i(85740)),o=(i(23795),i(17902),i(56451),i(47453));i(33752);const h="changeTypeHelpClickHandler",d=class{constructor(e){(0,a.r)(this,e),this.rfxArgumentChange=(0,a.c)(this,"rfxArgumentChange"),this.alteredStateEnum=["0","1","2","3"],this.helpActionClickEventHandlers=new Map,this.store=[],this.handleInputChange=e=>{e.stopPropagation();const t=e.target,i=(0,o.p)(t.value);this.inputArg.value=i,this.value=i,this.rfxArgumentChange.emit({value:i})}}connectedCallback(){this.processWidgetArgs(this.widgetArgs)}async componentWillLoad(){await this.setupInitialState(this.widgetArgs)}componentDidLoad(){this.attachHelpClickEventHandlers()}processWidgetArgs({inputArgs:e,triggerArgs:t}){const i=e.ChangeType;this.inputArg=i,this.inputArg.key="ChangeType",i.input=this.hostElement,this.value=i.value;const a=t.Raster;this.rasterArg=a,a.input?.addEventListener("rfxArgumentChange",this.handleRasterChange.bind(this))}async setupInitialState({rfxArgs:e,rasterFunctions:t,triggerArgs:i}){this.value=this.inputArg.value;const a=t[(0,s.i)(e)],n=a?.rasterFunctionArguments,o=this.inputArg.key;this.value=this.inputArg.value;const h=n?.[o]?.domain;if("list"===h?.type){const e=h.enum;this.store=(0,s.m)(e)}else console.error("Invalid inputArg! Check Schema");this.store?.forEach(e=>{e.key=e.key.toString()}),this.initialStore=(0,s.m)(this.store),(0,r.i)(this.store)&&console.error("Domain list Enum not set! Check Schema");const d=i.Raster,c=d?.input,g=await(c?.getSelectedLayer?.());await(0,l.o)(g)?this.handleIsChangeAnalysisTypeCCDC():this.handleIsChangeAnalysisTypeNotCCDC(),this.rfxArgumentChange.emit({value:this.value})}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.inputArg.displayName,referenceElement:this.widgetContainer,helpTextID:this.widgetArgs.helpTextIDs?.detectchange_changetype});this.helpActionClickEventHandlers.set(h,e)}async handleRasterChange(){const e=this.rasterArg?.input,t=await(e?.getSelectedLayer?.());await(0,l.o)(t)?this.handleIsChangeAnalysisTypeCCDC():this.handleIsChangeAnalysisTypeNotCCDC(),this.rfxArgumentChange.emit({value:this.value})}handleIsChangeAnalysisTypeCCDC(){this.widgetArgs.inputArgs.changeAnalysisType.value="CCDC",this.applyFilterToStore(this.alteredStateEnum)}handleIsChangeAnalysisTypeNotCCDC(){this.widgetArgs.inputArgs.changeAnalysisType.value="",this.resetStore()}applyFilterToStore(e){const t=((e,t)=>e.filter(e=>t.some(t=>e.key===t)))(this.initialStore,e);this.store=t}resetStore(){this.store=this.initialStore}render(){return(0,a.h)("div",{key:"7accb80cc1c633483f17f6f9b0aef496258ec774"},(0,a.h)("calcite-label",{key:"060b617b03b0879eb0e3de221702520dd158cdf7",alignment:"start",scale:r.s.scale??n.U.Scale,layout:"default",ref:e=>{this.widgetContainer=e}},(0,a.h)("rfx-label",{key:"68b9450bc6e043998fb2a1d7b4091955580bd85a",label:this.inputArg.displayName,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(h)()}),(0,a.h)("rfx-dtex-common-select",{key:"dc2b075198e2181007fb64eb5778673458270045",mode:this.widgetArgs.mode,options:this.store,value:String(this.value),onRfxArgumentChange:this.handleInputChange})))}get hostElement(){return(0,a.a)(this)}}},91457:(e,t,i)=>{i.d(t,{R:()=>c});var a=i(92265),s=i(51477),n=i(33797),r=i(16035),l=i(38949),o=(i(588),i(71802),i(44345),i(36596),i(5294),i(55448),i(2924),i(11840),i(52373),i(33752),i(440),i(66744),i(23795),i(17902),i(56451),i(47453));const h="typeHelpClickHandler",d="kernelHelpClickHandler",c=class{constructor(e){(0,a.r)(this,e),this.rfxArgumentChange=(0,a.c)(this,"rfxArgumentChange"),this.uiElements={kernelArgLabel:void 0,kernelArgContainer:void 0,rowArgLabel:void 0,columnArgLabel:void 0,rowArgContainer:void 0,columnArgContainer:void 0},this.kernelTypesInfo=r.k,this.helpActionClickEventHandlers=new Map,this.userDefinedOptionKey=-1,this.noneOptionKey=255,this.defaults={rowArgDefaultValue:void 0,columnArgDefaultValue:void 0,kernelArgDefaultValue:[]},this.store=[],this.onConvolutionTypeChange=e=>{e.stopPropagation();const t=e.target,i=(0,o.p)(t.value);this.inputArg.value=i,this.value=i;const a=this.kernelTypesInfo[i?.toString()];this.widgetState={columns:a?.columns??this.defaults.columnArgDefaultValue,rows:a?.rows??this.defaults.rowArgDefaultValue,value:a?.value??this.defaults.kernelArgDefaultValue},this.rfxArgumentChange.emit({value:i})}}connectedCallback(){this.processWidgetArgs(this.widgetArgs)}componentWillLoad(){this.setupInitialState(this.widgetArgs)}componentWillRender(){this.setWidgetValue()}componentDidLoad(){this.attachHelpClickEventHandlers()}async checkValidity(){let e=!0;return this.value===this.userDefinedOptionKey&&(e=await this.uiElements.rowArgContainer.checkValidity()&&await this.uiElements.columnArgContainer.checkValidity()),e}processWidgetArgs({inputArgs:e}){const t=e.ConvolutionType;this.inputArg=t,this.inputArg.key="ConvolutionType",t.input=this.hostElement,this.uiElements.rowArgLabel=e.Rows.displayName,this.uiElements.columnArgLabel=e.Columns.displayName,this.uiElements.kernelArgLabel=e.Kernel.displayName}setupInitialState({inputArgs:e,rfxArgs:t,rasterFunctions:i}){const a=i[(0,s.i)(t)],n=a?.rasterFunctionArguments,r=this.inputArg.key;this.value=this.inputArg.value;const o=n?.[r]?.domain;if("list"===o?.type){const e=o.enum;this.store=(0,s.m)(e)}else console.error("Invalid inputArg! Check Schema");this.store?.forEach(e=>{e.key=e.key.toString()}),(0,l.i)(this.store)&&console.error("Domain list Enum not set! Check Schema");const h=n?.[r]?.defaultValue;this.value=this.inputArg.value||h;const d=n?.Rows?.defaultValue,c=n?.Columns?.defaultValue,g=this.kernelTypesInfo[this.value?.toString()]?.value;this.defaults.columnArgDefaultValue=c,this.defaults.rowArgDefaultValue=d;const u=e.Kernel.value??g,p=e.Columns.value??c,m=e.Rows.value??d;this.widgetState=(0,l.J)({columns:p,rows:m,value:u})}setWidgetValue(){this.widgetArgs.inputArgs.ConvolutionType.value=this.value,this.widgetArgs.inputArgs.Columns.value=this.widgetState?.columns,this.widgetArgs.inputArgs.Rows.value=this.widgetState?.rows,this.widgetArgs.inputArgs.Kernel.value=this.widgetState?.value}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.inputArg.displayName,referenceElement:this.widgetContainer,helpTextID:this.widgetArgs.helpTextIDs?.convolution_type});this.helpActionClickEventHandlers.set(h,e)}onColumnValueChange(e){!e||e<=0||(this.widgetState={...this.widgetState,columns:e})}onRowValueChange(e){!e||e<=0||(this.widgetState={...this.widgetState,rows:e})}render(){const e=this.value===this.userDefinedOptionKey,t=this.value===this.noneOptionKey;return(0,a.h)("div",{key:"13f533843e3edf8c8f6146c4684d2122b0cabe33"},(0,a.h)("calcite-label",{key:"79349926f419b62341fd7256f72561a09f06406f",alignment:"start",scale:l.s.scale??n.U.Scale,layout:"default",ref:e=>{this.widgetContainer=e}},(0,a.h)("rfx-label",{key:"213d37c5b8ec9d967dae489f7125e0750b28a2a8",label:this.inputArg.displayName,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(h)()}),(0,a.h)("rfx-dtex-common-select",{key:"6f1648774cc968d943b4c7f44a7a6641858eaa39",mode:this.widgetArgs.mode,options:this.store,value:String(this.value),onRfxArgumentChange:this.onConvolutionTypeChange})),e?(0,a.h)("div",null,(0,a.h)("calcite-label",{alignment:"start",scale:l.s.scale??n.U.Scale,layout:"default"},(0,a.h)("rfx-label",{label:this.uiElements.rowArgLabel,hideHelp:!0}),(0,a.h)("rfx-dte-number-input",{value:this.widgetState.rows,onRfxNumberInputChange:e=>{e.stopPropagation();const t=e.target?.value;this.onRowValueChange(t)},min:1,max:100,numberType:"integer",ref:e=>{this.uiElements.rowArgContainer=e}})),(0,a.h)("calcite-label",{alignment:"start",scale:l.s.scale??n.U.Scale,layout:"default"},(0,a.h)("rfx-label",{label:this.uiElements.columnArgLabel,hideHelp:!0}),(0,a.h)("rfx-dte-number-input",{value:this.widgetState.columns,onRfxNumberInputChange:e=>{e.stopPropagation();const t=e.target?.value;this.onColumnValueChange(t)},min:1,max:100,numberType:"integer",ref:e=>{this.uiElements.columnArgContainer=e}}))):null,t?null:(0,a.h)("calcite-label",{alignment:"start",scale:l.s.scale??n.U.Scale,layout:"default",ref:e=>{this.uiElements.kernelArgContainer=e;const t=this.widgetArgs.onHelpActionClick({heading:this.uiElements.kernelArgLabel,referenceElement:this.uiElements.kernelArgContainer,helpTextID:this.widgetArgs.helpTextIDs?.convolution_kernel});this.helpActionClickEventHandlers.set(d,t)}},(0,a.h)("rfx-label",{label:this.uiElements.kernelArgLabel,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(d)()}),(0,a.h)("rfx-simple-matrix",{columns:this.widgetState.columns,rows:this.widgetState.rows,value:this.widgetState.value,onRfxArgumentChange:e=>{e.stopPropagation();const{detail:{value:t}}=e;(0,l.y)(this.widgetState.value,t)||(this.widgetState={...this.widgetState,value:t})},isEditable:e})))}get hostElement(){return(0,a.a)(this)}}},94379:(e,t,i)=>{i.d(t,{R:()=>c});var a=i(92265),s=i(51477),n=i(33797),r=i(38949),l=(i(588),i(71802),i(44345),i(36596),i(85740));i(23795),i(17902),i(56451),i(33752);const o="inputArgHelpClickHandler",h="pixelType",d="value",c=class{constructor(e){(0,a.r)(this,e),this.rfxArgumentChange=(0,a.c)(this,"rfxArgumentChange"),this.pixelTypeFilters={},this.valueFilters={},this.helpActionClickEventHandlers=new Map,this.store=[],this.handleInputChange=e=>{e.stopPropagation();const t=e.target,i="number"===this.storeType?Number(t.value):t.value;this.inputArg.value=i,this.value=i,this.rfxArgumentChange.emit({value:i})}}connectedCallback(){this.processWidgetArgs(this.widgetArgs),this.initializeTriggerAttributes(this.widgetArgs)}componentWillLoad(){this.setInitialState()}async componentDidLoad(){await this.applyTriggerAttributeFilters(this.widgetArgs),this.attachTriggerArgsChangeListener(this.widgetArgs),this.attachHelpClickEventHandlers()}processWidgetArgs({inputArgs:e}){Object.keys(e).forEach(t=>{const i=e[t];this.inputArg=i,this.inputArg.key=t,i.input=this.hostElement})}attachTriggerArgsChangeListener({triggerArgs:e}){Object.keys(e).forEach(t=>{const i=e[t].input;i?i.addEventListener("rfxArgumentChange",()=>{this.applyTriggerAttributeFilters({triggerArgs:e})}):console.error(`input not set on ${e[t].displayName}`)})}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.inputArg.displayName,referenceElement:this.widgetContainer,helpTextID:this.inputArg?.helpTextID});this.helpActionClickEventHandlers.set(o,e)}initializeTriggerAttributes({triggerAttributes:e}){const t=e.trim().split(";");for(const e of t){const[t,i]=e.trim().split(":"),a=i.trim().split(","),s={dependFieldName:a[0],dependFieldValue:a[1].trim().split("|"),filteredValue:a[2].trim().split("|"),isApplied:!1};({[h]:()=>this.pixelTypeFilters[s.dependFieldName]=s,[d]:()=>this.valueFilters[s.dependFieldName]=s})[t]()}}async applyPixelTypeFilters({triggerArg:e,inputWidget:t,triggerArgValue:i}){const a=this.pixelTypeFilters[e];if(a.isApplied=!1,!i)return a.isApplied;const s=await(t?.getSelectedLayer?.());await s.load();const n=await s.generateRasterInfo(s.rasterFunction),r=s.pixelType??n?.pixelType;return(0,l.k)(r)?(a.isApplied=!0,a.isApplied):a.isApplied}async applyValueTypeFilter({triggerArg:e,triggerArgValue:t}){const i=this.valueFilters[e];return i.isApplied=!1,i.dependFieldValue.includes(t.toString())?(i.isApplied=!0,Promise.resolve(i.isApplied)):Promise.resolve(i.isApplied)}async applyTriggerAttributeFilters({triggerArgs:e}){const t={[h]:this.applyPixelTypeFilters.bind(this),[d]:this.applyValueTypeFilter.bind(this)},i=[];for(const a of Object.keys(e)){const s=e[a].input,n=e[a].value??s?s.value:void 0;if(!0===(0,r.i)(n))continue;let l,o;if(this.pixelTypeFilters.hasOwnProperty(a))o=this.pixelTypeFilters[a],l=h;else{if(!this.valueFilters.hasOwnProperty(a))return void console.error("Trigger Arg is not part of triggerAttributes! check schema.");o=this.valueFilters[a],l=d}if(l in t){!0===await t[l]({inputWidget:s,triggerArg:a,triggerArgValue:n})&&i.push(o.filteredValue)}else console.error("invalid triggerAttributes! check schema.")}if(this.widgetArgs.hasAttributeInterSection&&i.length>1){const e=i.reduce((e,t)=>e.filter(e=>t.includes(e)));e.length>0?this.applyFilterToStore(e):this.resetStore()}else i.length>0?this.applyFilterToStore(i[0]):this.resetStore();const a=String(this.value);if(!0!==this.store.some(e=>e.key===a)){const e="number"===this.storeType?Number(this.store[0]?.key):this.store[0]?.key;this.value=e}}applyFilterToStore(e){const t=((e,t)=>e.filter(e=>t.some(t=>e.key===t)))(this.initialStore,e);this.store=t}resetStore(){this.store=this.initialStore}setInitialState(){const{rfxArgs:e,rasterFunctions:t}=this.widgetArgs,i=t[(0,s.i)(e)],a=i?.rasterFunctionArguments,n=this.inputArg.name;this.value=this.inputArg.value;const l=a?.[n]?.domain;if("list"===l?.type){const e=l.enum;this.store=(0,s.m)(e)}else console.error("Invalid inputArg! Check Schema");this.storeType=typeof this.store?.[0]?.key,this.store?.forEach(e=>{e.key=e.key.toString()}),this.initialStore=(0,s.m)(this.store),(0,r.i)(this.store)&&console.error("Domain list Enum not set! Check Schema")}render(){return(0,a.h)("div",{key:"0fe07af8bb69db0f64d20a333c226721b3275ad2"},(0,a.h)("calcite-label",{key:"f6eddbc9b1e2435a53cd4825acc9dd0f9b36fbd9",alignment:"start",scale:r.s.scale??n.U.Scale,layout:"default",ref:e=>{this.widgetContainer=e}},(0,a.h)("rfx-label",{key:"fd2e77b59de631bfac8f2691262ffe76da56c62b",label:this.inputArg.displayName,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(o)()}),(0,a.h)("rfx-dtex-common-select",{key:"6771c584400756a97dd2b89db839f59a2496a506",mode:this.widgetArgs.mode,options:this.store,value:String(this.value),onRfxArgumentChange:this.handleInputChange})))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,a.a)(this)}}},97596:(e,t,i)=>{i.d(t,{R:()=>g});var a=i(92265),s=i(69843),n=(i(5294),i(13661),i(18423),i(21255),i(35431),i(16035)),r=i(38949),l=(i(588),i(55448),i(2924),i(11840),i(52373),i(33752),i(440),i(66744),i(42335)),o=i(33797),h=(i(71802),i(44345),i(36596),i(23795),i(17902),i(56451),i(47453));const d={outputBitColumn:"rfx-cte-transpose-bit__outputBit-column"},c="bitPatternHelpClickHandler",g=class{constructor(e){(0,a.r)(this,e),this.rfxArgumentChange=(0,a.c)(this,"rfxArgumentChange"),this.uiElements={widgetLabel:void 0,widgetContainer:void 0},this.gridSchema={gridLayout:{},gridOptions:[],hasBorder:!0,hasHeader:!0,canAdd:!1,hasIdColumn:!1,canRemove:!1,isStacked:!1},this.store=[],this.helpActionClickEventHandlers=new Map,this.gridStore=[],this.handleBitPatternChange=e=>{e.stopPropagation();const t=e.target.value;this.bitPattern=t,this.widgetArgs.rfxArgs.QualityClass=this.bitPattern;const i=this.createDataObjects(this.bitPattern);this.gridStore=i},this.updateGridValue=e=>{const{detail:{gridOptions:t}}=e;if((0,r.i)(t))return;const i=this.gridStore;this.gridStore=[...i]}}async componentWillLoad(){({strings:this.strings,dir:this.direction}=await(0,s.c)(this.hostElement,(0,a.d)("."))),await this.setupInitialState(this.widgetArgs)}componentWillRender(){this.initGrid(),this.setWidgetValue(this.widgetArgs)}componentDidLoad(){this.attachHelpClickEventHandlers(this.widgetArgs)}get isBitPatternUserDefined(){return"qcbp_UserDefined"===this.bitPattern}async setupInitialState({rfxArgs:e}){this.uiElements.widgetLabel=this.strings.bitPattern;const t=(await(0,n.g)()).esriTransposeBitPatterns;this.store=(0,r.J)(t),this.store?.forEach(e=>{e.key=e.key.toString()}),(0,r.i)(this.store)&&console.error("Domain list Enum not set! Check Schema");let i=e?.QualityClass;(0,r.i)(i)&&(i=this.store[0].key,e.QualityClass=i),this.bitPattern=i;const a=this.createDataObjects(this.bitPattern);this.gridStore=a}createDataObjects(e){return Array.from({length:8},(t,i)=>{const a=String(i);let s="";if(this.isBitPatternUserDefined){const{InputBitPositions:e,OutputBitPositions:t}=this.widgetArgs.inputArgs,a=e.value??[],n=(t.value??[]).indexOf(i);s=n>-1?a[n]:void 0}else{s=n.t[e][i]}return{id:i+1,outputBit:a,inputBit:s}})}initGrid(){const e={outputBit:{uiType:l.G.text,label:this.strings.outputBit,style:d.outputBitColumn},inputBit:{uiType:this.isBitPatternUserDefined?l.G.number:l.G.text,label:this.strings.inputBit}},t=this.gridStore;this.gridSchema={...this.gridSchema,gridLayout:e,gridOptions:t}}setWidgetValue({inputArgs:e}){const{inputBit:t,outputBit:i}=this.gridStore.reduce((e,t)=>((0,h.i)((0,h.p)(t.inputBit))&&(e.inputBit.push((0,h.p)(t.inputBit)),e.outputBit.push((0,h.p)(t.outputBit))),e),{inputBit:[],outputBit:[]}),{InputBitPositions:a,OutputBitPositions:s}=e;a.value=t,s.value=i}attachHelpClickEventHandlers({helpTextIDs:e}){const t=this.widgetArgs.onHelpActionClick({heading:this.uiElements.widgetLabel,referenceElement:this.uiElements.widgetContainer,helpTextID:e.transposebits_bitpattern});this.helpActionClickEventHandlers.set(c,t)}render(){return(0,a.h)("div",{key:"def0775bf0c2c49b3f1dc089e3aa050ce8fd935b"},(0,a.h)("calcite-label",{key:"48abb554e11aa13e6f7a32809975fb5a386fdca3",alignment:"start",scale:r.s.scale??o.U.Scale,layout:"default",ref:e=>{this.uiElements.widgetContainer=e}},(0,a.h)("rfx-label",{key:"b30f3d336d50dd53e58271f12ee84639f43387fa",label:this.uiElements.widgetLabel,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(c)()}),(0,a.h)("rfx-dtex-common-select",{key:"9ade6bd6f757f382bdb7e2ad8bdfde787e22a9a6",mode:this.widgetArgs.mode,options:this.store,value:String(this.bitPattern),onRfxArgumentChange:this.handleBitPatternChange}),(0,a.h)("rfx-grid",{key:"a5292ba646477c1ab8a8702058460cd934a8fed5",hasHeader:this.gridSchema.hasHeader,canAdd:this.gridSchema.canAdd,hasIdColumn:this.gridSchema.hasIdColumn,gridLayout:this.gridSchema.gridLayout,gridOptions:this.gridSchema.gridOptions,hasBorder:this.gridSchema.hasBorder,canRemove:this.gridSchema.canRemove,isStacked:this.gridSchema.isStacked,onRfxGridOptionChange:this.updateGridValue})))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,a.a)(this)}};g.style=":root{--calcite-color-brand:#007ac2;--calcite-color-brand-hover:#00619b;--calcite-color-brand-press:#004874;--calcite-color-status-info:#00619b;--calcite-color-status-success:#35ac46;--calcite-color-status-warning:#edd317;--calcite-color-status-danger:#d83020;--calcite-color-status-danger-hover:#a82b1e;--calcite-color-status-danger-press:#7c1d13;--calcite-color-background:#f8f8f8;--calcite-color-foreground-1:#ffffff;--calcite-color-foreground-2:#f3f3f3;--calcite-color-foreground-3:#eaeaea;--calcite-color-text-1:#151515;--calcite-color-text-2:#4a4a4a;--calcite-color-text-3:#6a6a6a;--calcite-color-text-inverse:#ffffff;--calcite-color-text-link:#00619b;--calcite-color-border-1:#cacaca;--calcite-color-border-2:#d4d4d4;--calcite-color-border-3:#dfdfdf;--calcite-color-border-input:#949494;--rfx-quarter-spacing:0.25rem;--rfx-half-spacing:0.5rem;--rfx-three-quarter-spacing:0.75rem;--rfx-full-spacing:1rem;--rfx-component-default-width:100%;--rfx-ui-border-input:var(--calcite-color-border-2);--rfx-popover-content-min-height:30vh;--rfx-popover-content-max-height:60vh;--rfx-popover-content-height:45vh;--rfx-widget-content-height:30vh;--rfx-modal-width-small:32rem}.rfx-cte-transpose-bit__outputBit-column{width:50%}"}}]);