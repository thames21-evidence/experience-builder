/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_com-7b0161.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_com-7b0161"],{4265:(e,t,i)=>{i.d(t,{a:()=>s,d:()=>a,t:()=>n});const a=(e,t)=>{let i,a="idle";const s=async(...s)=>await new Promise(n=>{switch(a){case"flushed":a="idle",i?(clearTimeout(i),n(e(...s))):n(null);break;case"invoked":clearTimeout(i),a="idle",n(e(...s));break;case"cancelled":clearTimeout(i),a="idle",n(null);break;default:i&&clearTimeout(i),a="pending",i=setTimeout(()=>{a="idle",n(e(...s))},t)}});return s.flush=async function(...e){return a="flushed",await s(...e)},s.invoke=async function(...e){return a="invoked",await s(...e)},s.cancel=async function(...e){return a="cancelled",await s(...e)},s.getStatus=function(){return a},s},s=(e,t)=>{let i;return async(...a)=>await new Promise(s=>{i||(i=setTimeout(()=>{clearTimeout(i),i=void 0,s(e(...a))},t))})};function n(e){return new Promise(t=>setTimeout(t,e))}},9864:(e,t,i)=>{i.r(t),i.d(t,{ArcgisMapConfigSmartMappingPanelsSize:()=>z});var a=i(73679),s=i(4395),n=i(5294),r=i(54312),o=i(56451),l=i(83930),d=i(29614),c=i(1225),p=i(89989),g=(i(44345),i(55448),i(52797),i(34031),i(63438),i(5933),i(75518)),m=(i(89704),i(18423),i(96086),i(91813),i(21255),i(13078),i(21303),i(12627),i(31521),i(23054),i(5077),i(23795),i(17902),i(87420),i(30161),i(81734),i(65595)),u=(i(77462),i(49403),i(66617),i(10628),i(59640),i(64451),i(6176),i(10454),i(87735)),h=(i(2156),i(4038),i(49851),i(75054),i(15223),i(70169),i(47207),i(70852),i(48103),i(39423),i(85681),i(18444),i(42411),i(9767),i(38218),i(91914),i(86605),i(68196),i(440),i(46547),i(28927),i(6238),i(7299),i(4265)),f=i(85643),S=i(73801);const y=s.AH`:host{width:100%;display:none}:host([selected]){display:flex}.flow-item{height:100%}.size-block{overflow-x:hidden}.attribute-name{word-break:break-all}.legend-toggle-padding{padding-top:12px;padding-bottom:12px}`;class z extends S.WF{constructor(){super(...arguments),this.flowItemNode=(0,f._)(),this.themeButtonNode=(0,f._)(),this.classifyNode=(0,f._)(),this.rotationNode=(0,f._)(),this.smartMappingState=(0,m.u)(),this.visualizationOpen=!1,this.hideTransparency=!1,this.hideRotation=!1,this.menuOpen=!1,this.showBackButton=!1,this.selected=!1,this.arcgisSmartMappingAuthRefSizeVisVarChange=(0,S.lh)(),this.arcgisSmartMappingPanelsSizeBackClick=(0,S.lh)(),this.arcgisSmartMappingPanelsSizeClose=(0,S.lh)(),this.arcgisSmartMappingPanelsSizeError=(0,S.lh)(),this.arcgisSmartMappingPanelsSizeRegenerateRenderer=(0,S.lh)(),this.smartMappingCompleteClose=(0,S.lh)()}static{this.properties={visualizationOpen:16,hideTransparency:5,hideRotation:5,menuOpen:5,showBackButton:5,selected:7,beforeBack:0}}static{this.styles=y}async setFocus(){await(this.flowItemNode.value?.setFocus())}load(){this.visualizationOpen=!0;const{layer:e}=this.smartMappingState,t=(0,c.g)(this.smartMappingState);this.originalRenderer=t.toJSON(),this.originalFeatureReduction="featureReduction"in e&&e.featureReduction?n.clone(e.featureReduction):void 0}async loaded(){requestAnimationFrame(async()=>await(this.flowItemNode.value?.setFocus())),this.scaleHandle=(0,p.w)(this.smartMappingState,this.flowItemNode.value,()=>this.smartMappingCompleteClose.emit("cancel"));const e=(0,c.g)(this.smartMappingState);(0,c.p)(e,"reference-size")&&(this.referenceSizeScaleHandle=this.getReferenceSizeScaleHandle())}disconnectedCallback(){super.disconnectedCallback(),this.scaleHandle?.remove(),this.referenceSizeScaleHandle?.remove()}referenceSizeButtonRefHandler(e){e&&(this.referenceSizeSymbolPairButtonNode=e)}spikeSymbolButtonRefHandler(e){e&&(this.spikeSymbolPairButtonNode=e)}symbolButtonRefHandler(e){e&&(this.symbolButtonNode=e)}sizeSliderRefHandler(e){e&&(this.sliderNode=e)}sizeRangeSliderRefHandler(e){e&&(this.sizeRangeNode=e)}backgroundSymbolRefHandler(e){e&&(this.backgroundSymbolNode=e)}defaultSymbolRefHandler(e){e&&(this.defaultSymbolNode=e)}handleDone(){this.arcgisSmartMappingPanelsSizeClose.emit("save")}handleCancel(){const{originalRenderer:e,originalFeatureReduction:t,smartMappingState:i}=this;(0,c.a8)(i,e,t),this.arcgisSmartMappingPanelsSizeClose.emit("cancel")}getSymbol(){const{smartMappingState:e}=this,t=((0,c.g)(e).type,(0,c.g)(e)),i="class-breaks"===(0,c.g)(e).type?t.classBreakInfos:t.uniqueValueInfos,a=(0,c.d)(e);let s;return["color-size","color-age-size","color-size-age","type-size","type-size-age","predominance-size","relationship-size"].includes(a)?(s=i.length?i[0].symbol.clone():(0,c.e)(e,a),(0,c.y)(s,new o.default({r:149,g:149,b:149,a:1}))):s=i.length?i[i.length-1].symbol.clone():(0,c.e)(e,a),s}handleIncludeInLegendToggle(){const{smartMappingState:e}=this,t=(0,c.g)(e),i=(0,c.c)(t,"size"),a=i.legendOptions;a&&!1===a.showLegend?a.title?a.showLegend=!0:i.legendOptions=void 0:(i.legendOptions=a||{},i.legendOptions.showLegend=!1),(0,c.a4)(e)}getFieldInfo(){const{smartMappingState:e}=this,t=(0,c.d)(e),i=(0,c._)(e);return["color-size","color-age-size","color-size-age","type-size","type-size-age"].includes(t)&&i.length>1?i[1]:"relationship-size"===t?i[2]:i[0]}getReferenceSizeScaleHandle(){const{smartMappingState:e}=this,{mapView:t}=e;let i=t.scale;return r.watch(()=>t.scale,(0,h.d)(async t=>{const a=(0,c.g)(e),s=(0,c.p)(a,"reference-size"),n=i/t;if(i=t,s?.referenceSizeScale){s.referenceSizeScale=t,s.sizeStops.forEach(e=>e.size*=n);const i=await(0,u.a)(e);i&&(0,c.a4)(e,i),this.arcgisSmartMappingAuthRefSizeVisVarChange.emit(n)}},300))}render(){const{layer:e,hideLayerTitle:t,_messages:i}=this.smartMappingState;return this.el.classList.add("calcite-match-height"),s.qy`<calcite-flow-item .heading=${i.panels.styleOptions} .description=${t?void 0:e.title} class="flow-item" .closable=${(0,c.aa)(this.el)} .showBackButton=${this.showBackButton} .selected=${this.selected} @calciteFlowItemClose=${this.handleDone} @calciteFlowItemBack=${e=>{e.stopPropagation(),this.arcgisSmartMappingPanelsSizeBackClick.emit()}} ${(0,f.K)(this.flowItemNode)}>${this.renderDoneButton()}${this.renderCancelButton()}${this.renderVisualization()}${this.renderTransparency()}${this.renderRotation()}</calcite-flow-item>`}renderDoneButton(){const{layer:e,_messages:t}=this.smartMappingState;return e?s.qy`<calcite-button slot=footer .label=${t.done} @click=${this.handleDone} appearance=solid width=half>${t.done}</calcite-button>`:""}renderCancelButton(){const{layer:e,_messages:t}=this.smartMappingState;return e?s.qy`<calcite-button slot=footer .label=${t.cancel} @click=${this.handleCancel} appearance=outline-fill width=half>${t.cancel}</calcite-button>`:""}renderVisualization(){const{visualizationOpen:e,hideTransparency:t,hideRotation:i,smartMappingState:a}=this,{_messages:n}=a,r=(0,c.d)(a),o=(0,c.g)(a),l=["size-age","color-size-age","type-size-age"].includes(r),d=["chart-size","predominance-size"].includes(r),p=(0,c.c)(o,"size"),g=(0,c.p)(o,"reference-size"),m=(0,c.p)(o,"spike"),u=p?p.field?(0,c.K)(a,p.field)?.label:p.valueExpressionTitle||n.expression:g?(0,c.K)(a,g.field).label:m?(0,c.K)(a,m.field).label:o.field?(0,c.K)(a,o.field)?.label:o.valueExpressionTitle||n.expression,h=(0,c.K)(a,p?.field||o.field)?.simpleFieldType===c.J.DATE;return s.qy`<calcite-block class="size-block" .heading=${l?n.panels.size.sizeAgeStyle:h?n.panels.size.sizeStyleDate:"chart-size"===r?n.panels.size.sizeStyleChart:n.panels.size.sizeStyle} .collapsible=${!t||!i} .expanded=${e} @calciteBlockOpen=${()=>this.visualizationOpen=!0} @calciteBlockClose=${()=>this.visualizationOpen=!1}><div>${l||d?null:s.qy`<calcite-label class="attribute-name">${u}</calcite-label>`}${this.renderAge()}${this.renderTheme()}${this.renderDividedBy()}${this.renderReferenceSizeButton()}${this.renderSpikeSymbolButton()}${this.renderSymbol()}${this.renderSizeSlider()}${this.renderRegenerateStyle()}${this.renderSizeRange()}${this.renderBackgroundStyle()}${this.renderDefaultSymbol()}${this.renderShowInLegend()}${this.renderClassify()}</div></calcite-block>`}renderAge(){const{smartMappingState:e}=this,t=(0,c.d)(e);return["size-age","color-size-age"].includes(t)?s.qy`<arcgis-map-config-smart-mapping-age renderer-subtype=size @arcgisSmartMappingAgeChange=${()=>{this.sliderNode.updateStatistics()}} @arcgisSmartMappingAgeError=${e=>this.arcgisSmartMappingPanelsSizeError.emit(e.detail)}></arcgis-map-config-smart-mapping-age>`:""}renderTheme(){const{smartMappingState:e}=this,t=(0,c.g)(e),i=(0,c.c)(t,"size"),a=(0,c.p)(t,"reference-size"),n=(0,c.p)(t,"spike");if(!i&&!a&&!n)return"";const r=(0,c.d)(e);return["chart-size","predominance-size"].includes(r)?"":s.qy`<arcgis-map-config-smart-mapping-theme-button renderer-subtype=size @arcgisSmartMappingThemeButtonBeforeOpen=${()=>(0,c.f)()} @arcgisSmartMappingThemeButtonChange=${e=>{const{smartMappingState:t}=this,{layer:s,mapView:r}=t,p=(0,c.d)(t),m=(0,c.V)(a),h="reference-size"===e.detail,f=!m&&h||m&&!h,S=(0,c.V)(n),y="spike"===e.detail,z=!S&&y||S&&!y;let b=u.d;["size-age","color-size-age"].includes(p)?b=u.e:(f||z)&&(b=u.d);const v={theme:e.detail,discardMinMax:!0};if(h&&(v.referenceSizeOptions={symbolStyle:"circle"}),y){const e="color-size"===p?"triangle-solid-fill-open-outline":"triangle-gradient-fill-open";v.spikeOptions={symbolStyle:e}}f&&(v.layer=s,v.mapView=r,v.fieldInfos=[{field:i?i.field:a?a.field:n.field}],v.noReuse=!0),z&&(v.layer=s,v.mapView=r,v.field=i?i.field:n?n.field:a.field,v.noReuse=!0),(0,g.r)(b(t,v),this.flowItemNode.value).then(async e=>{if(f||z)if(["type-size","relationship-size"].includes(p)){const i=(0,c.g)(t);i.visualVariables=e.renderer.visualVariables,i.authoringInfo.visualVariables=e.renderer.authoringInfo.visualVariables,i.uniqueValueInfos.forEach(t=>{const i=(0,c.i)(t?.symbol)||new o.default("gray"),a=e.renderer.classBreakInfos[0].symbol.clone();"cim"===a.type?l.applyCIMSymbolColor(a,i,{layersToColor:"fill-and-outline"}):(0,c.y)(a,i),t.symbol=a}),i.defaultSymbol=void 0,i.defaultLabel=void 0,i.backgroundFillSymbol=void 0,(0,c.a4)(t,i)}else if("color-size"===p){const{useFeatureReduction:i}=this.smartMappingState,a=(0,c.g)(t),n=(0,c.c)(a,"color"),o=(0,c.p)(a,"color"),{renderer:l}=await d.createContinuousRenderer({layer:s,view:r,field:n.field,valueExpression:n.valueExpression??void 0,valueExpressionTitle:n.valueExpressionTitle??void 0,normalizationField:n.normalizationField??void 0,theme:o?.theme,colorScheme:(0,c.a2)(t),forBinning:i});if(e.renderer.visualVariables.push(n),l.authoringInfo?.visualVariables?.length){const t=(0,c.p)(l,"color");e.renderer.authoringInfo.visualVariables.push(t)}e.renderer.field=n.field,e.renderer.valueExpression=n.valueExpression,e.renderer.valueExpressionTitle=n.valueExpressionTitle,e.renderer.normalizationField=n.normalizationField,(0,c.a4)(t,e.renderer)}else(0,c.a4)(t,e.renderer);else{const i=(0,c.g)(t);i.visualVariables=(0,c.H)(i,"size")||[],i.visualVariables.push((0,c.c)(e.renderer,"size")),i.authoringInfo.visualVariables=(0,c.P)(i,"size")||[],i.authoringInfo.visualVariables.push((0,c.p)(e.renderer,"size")),(0,c.a4)(t)}this.requestUpdate(),this.themeButtonNode.value&&this.themeButtonNode.value.manager.component.requestUpdate(),this.sliderNode&&this.sliderNode.manager.component.requestUpdate(),this.sizeRangeNode&&(this.sizeRangeNode.manager.component.requestUpdate(),this.sizeRangeNode.syncSliderValues()),this.backgroundSymbolNode&&this.backgroundSymbolNode.manager.component.requestUpdate(),!m&&h&&this.defaultSymbolNode.done()},e=>{this.themeButtonNode.value.manager.component.requestUpdate(),this.arcgisSmartMappingPanelsSizeError.emit(e)})}} ${(0,f.K)(this.themeButtonNode)}></arcgis-map-config-smart-mapping-theme-button>`}renderDividedBy(){const{smartMappingState:e}=this,{fields:t}=e,i=(0,c.g)(e),a=(0,c.d)(e);if(["size-age","color-size-age"].includes(a)||(0,c.ae)(e,t).number<2)return"";const n=(0,c.c)(i,"size");if(n){const t=(0,c.K)(e,n.field),i={field:n.field,expression:n.valueExpression,expressionTitle:n.valueExpressionTitle,simpleFieldType:t?t.simpleFieldType:c.J.NUMBER};if(i.expression||i.simpleFieldType!==c.J.NUMBER)return""}else if(i.valueExpression)return"";return s.qy`<arcgis-map-config-smart-mapping-divided-by renderer-subtype=size .normalizationField=${(n?n.normalizationField:i.normalizationField)??void 0} @arcgisSmartMappingDividedByChange=${()=>{this.requestUpdate(),this.sliderNode?.manager.component.requestUpdate(),this.sliderNode.updateStatistics(),this.sizeRangeNode&&(this.sizeRangeNode.manager.component.requestUpdate(),this.sizeRangeNode.syncSliderValues()),this.classifyNode.value&&this.classifyNode.value.manager.component.requestUpdate()}} @arcgisSmartMappingDividedByError=${e=>this.arcgisSmartMappingPanelsSizeError.emit(e.detail)}></arcgis-map-config-smart-mapping-divided-by>`}renderReferenceSizeButton(){const{smartMappingState:e}=this,t=(0,c.g)(e);return(0,c.p)(t,"reference-size")?s.qy`<arcgis-map-config-smart-mapping-symbol-pair-button symbol-type=reference-size @arcgisSmartMappingSymbolPairButtonBeforeOpen=${()=>(0,c.f)()} @arcgisSmartMappingSymbolPairButtonChange=${()=>{this.requestUpdate(),this.referenceSizeSymbolPairButtonNode?.manager.component.requestUpdate(),this.sliderNode&&this.sliderNode.manager.component.requestUpdate(),this.rotationNode.value&&this.rotationNode.value.manager.component.requestUpdate(),this.symbolButtonNode&&this.symbolButtonNode.manager.component.requestUpdate(),this.sizeRangeNode&&(this.sizeRangeNode.manager.component.requestUpdate(),this.sizeRangeNode.syncSliderValues())}} @arcgisSmartMappingSymbolPairButtonError=${e=>this.arcgisSmartMappingPanelsSizeError.emit(e.detail)} ${(0,f.K)(this.referenceSizeButtonRefHandler)}></arcgis-map-config-smart-mapping-symbol-pair-button>`:""}renderSpikeSymbolButton(){const{smartMappingState:e}=this,t=(0,c.g)(e);return(0,c.p)(t,"spike")?s.qy`<arcgis-map-config-smart-mapping-symbol-pair-button symbol-type=spike @arcgisSmartMappingSymbolPairButtonBeforeOpen=${()=>(0,c.f)()} @arcgisSmartMappingSymbolPairButtonChange=${()=>{this.requestUpdate(),this.spikeSymbolPairButtonNode?.manager.component.requestUpdate(),this.sliderNode&&this.sliderNode.manager.component.requestUpdate(),this.symbolButtonNode&&this.symbolButtonNode.manager.component.requestUpdate(),this.sizeRangeNode&&(this.sizeRangeNode.manager.component.requestUpdate(),this.sizeRangeNode.syncSliderValues())}} @arcgisSmartMappingSymbolPairButtonError=${e=>this.arcgisSmartMappingPanelsSizeError.emit(e.detail)} ${(0,f.K)(this.spikeSymbolButtonRefHandler)}></arcgis-map-config-smart-mapping-symbol-pair-button>`:""}renderSymbol(){const{smartMappingState:e}=this,t=(0,c.g)(e),i=(0,c.d)(e),a=(0,c.p)(t,"reference-size"),n=(0,c.p)(t,"spike");if("pie-chart"===t.type||["type-size","color-size","relationship-size"].includes(i)&&(a||n))return"";const r=this.getSymbol();return s.qy`<arcgis-map-config-smart-mapping-symbol-button .symbol=${r} type=size .isReferenceSize=${(0,c.V)(a)} @arcgisSmartMappingSymbolButtonSymbolChange=${()=>{this.requestUpdate(),this.sliderNode&&(this.sliderNode.manager.component.requestUpdate(),this.sliderNode.updateColors()),this.classifyNode.value&&this.classifyNode.value.manager.component.requestUpdate(),this.rotationNode.value&&this.rotationNode.value.manager.component.requestUpdate()}} ${(0,f.K)(this.symbolButtonRefHandler)}></arcgis-map-config-smart-mapping-symbol-button>`}renderSizeSlider(){return s.qy`<arcgis-map-config-smart-mapping-size-slider @arcgisSmartMappingSizeSliderChange=${()=>{this.requestUpdate(),this.sliderNode&&this.sliderNode.manager.component.requestUpdate(),this.sizeRangeNode&&(this.sizeRangeNode.manager.component.requestUpdate(),this.sizeRangeNode.syncSliderValues()),this.classifyNode.value&&this.classifyNode.value.manager.component.requestUpdate()}} @arcgisSmartMappingSizeSliderError=${e=>this.arcgisSmartMappingPanelsSizeError.emit(e.detail)} ${(0,f.K)(this.sizeSliderRefHandler)}></arcgis-map-config-smart-mapping-size-slider>`}renderRegenerateStyle(){const{smartMappingState:e}=this,{mapImageSublayer:t}=e;return t?"":s.qy`<arcgis-map-config-smart-mapping-regenerate-style renderer-subtype=size @arcgisRendererRegenerate=${()=>{this.requestUpdate(),this.sliderNode&&(this.sliderNode.manager.component.requestUpdate(),this.sliderNode.updateStatistics()),this.classifyNode.value&&this.classifyNode.value.manager.component.requestUpdate(),this.sizeRangeNode&&(this.sizeRangeNode.manager.component.requestUpdate(),this.sizeRangeNode.syncSliderValues()),this.arcgisSmartMappingPanelsSizeRegenerateRenderer.emit()}}></arcgis-map-config-smart-mapping-regenerate-style>`}renderSizeRange(){return s.qy`<arcgis-map-config-smart-mapping-size-range-slider @arcgisSmartMappingSizeRangeSliderError=${e=>this.arcgisSmartMappingPanelsSizeError.emit(e.detail)} ${(0,f.K)(this.sizeRangeSliderRefHandler)}></arcgis-map-config-smart-mapping-size-range-slider>`}renderBackgroundStyle(){const{smartMappingState:e}=this,{mapImageSublayer:t}=e,i=(0,c.d)(e);return t&&["predominance-size","type-size","relationship-size"].includes(i)?"":s.qy`<arcgis-map-config-smart-mapping-background-symbol ${(0,f.K)(this.backgroundSymbolRefHandler)}></arcgis-map-config-smart-mapping-background-symbol>`}renderDefaultSymbol(){const{smartMappingState:e}=this,t=(0,c.d)(e);return["chart","chart-size"].includes(t)?"":s.qy`<arcgis-map-config-smart-mapping-default-symbol @arcgisSmartMappingDefaultSymbolBeforeToggle=${()=>(0,c.f)()} @arcgisSmartMappingDefaultSymbolChange=${()=>{this.symbolButtonNode&&this.symbolButtonNode.manager.component.requestUpdate()}} ${(0,f.K)(this.defaultSymbolRefHandler)}></arcgis-map-config-smart-mapping-default-symbol>`}renderShowInLegend(){const{smartMappingState:e}=this,{_messages:t}=e,i=(0,c.g)(e),a=(0,c.c)(i,"size");if(!a)return"";const n=a.legendOptions,r=!n||!1!==n.showLegend;return s.qy`<calcite-label layout=inline-space-between class="legend-toggle-padding">${t.panels.size.includeInLegend}<calcite-switch .checked=${r} @calciteSwitchChange=${()=>this.handleIncludeInLegendToggle()}></calcite-switch></calcite-label>`}renderClassify(){const{smartMappingState:e}=this,t=(0,c.g)(e),i=(0,c.d)(e),a=this.getFieldInfo().simpleFieldType===c.J.DATE,n=["size-age","color-size-age","type-size-age"].includes(i),r=(0,c.p)(t,"reference-size"),o=(0,c.p)(t,"spike");return"size"!==i||a||n||r||o?"":s.qy`<arcgis-map-config-smart-mapping-classify @arcgisSmartMappingClassifyChange=${e=>{const t=e.detail;(t?.closePopovers||t?.classesChange)&&(0,c.f)(),t?.symbolChange&&this.sliderNode?.updateColors(),this.requestUpdate(),this.sliderNode&&this.sliderNode.manager.component.requestUpdate(),(t?.toggle||t?.classesChange||!t?.symbolChange&&!t?.closePopovers)&&(this.sizeRangeNode&&(this.sizeRangeNode.manager.component.requestUpdate(),this.sizeRangeNode.syncSliderValues()),this.sliderNode.updateStatistics()),this.classifyNode.value&&this.classifyNode.value.manager.component.requestUpdate(),this.symbolButtonNode&&this.symbolButtonNode.manager.component.requestUpdate(),this.defaultSymbolNode&&this.defaultSymbolNode.manager.component.requestUpdate(),this.rotationNode.value&&this.rotationNode.value.manager.component.requestUpdate()}} @arcgisSmartMappingClassifyError=${e=>this.arcgisSmartMappingPanelsSizeError.emit(e.detail)} ${(0,f.K)(this.classifyNode)}></arcgis-map-config-smart-mapping-classify>`}renderTransparency(){const{hideTransparency:e,smartMappingState:t}=this;if(e)return"";const i=(0,c.g)(t),a=(0,c.c)(i,"opacity");return s.qy`<arcgis-map-config-smart-mapping-transparency .open=${!!a} @arcgisSmartMappingSymbolTransparencyError=${({detail:e})=>this.arcgisSmartMappingPanelsSizeError.emit(e)}></arcgis-map-config-smart-mapping-transparency>`}renderRotation(){const{hideRotation:e,smartMappingState:t}=this;if(e)return"";const i=(0,c.g)(t);if((0,c.p)(i,"spike"))return"";const a=(0,c.c)(i,"opacity"),n=(0,c.c)(i,"rotation");return s.qy`<arcgis-map-config-smart-mapping-rotation .open=${!a&&!!n} @arcgisSmartMappingRotationError=${({detail:e})=>this.arcgisSmartMappingPanelsSizeError.emit(e)} ${(0,f.K)(this.rotationNode)}></arcgis-map-config-smart-mapping-rotation>`}}(0,a.c)("arcgis-map-config-smart-mapping-panels-size",z)},65595:(e,t,i)=>{i.d(t,{c:()=>r,u:()=>o});var a=i(20936),s=i(1225),n=(i(54312),i(44345),i(55448),i(52797),i(34031),i(63438),i(5933),i(28927),i(83368),i(89704),i(5294),i(18423),i(96086),i(91813),i(21255),i(13078),i(21303),i(12627),i(56451),i(31521),i(23054),i(5077),i(23795),i(17902),i(87420),i(30161),i(81734),i(75698),i(10628),i(59640),i(64451),i(6176),i(83552));i(77462),i(49403),i(10281),i(83930),i(66617),i(10454),i(29614),i(94916),i(52554),i(2156),i(4038),i(49851),i(75054),i(15223),i(70169),i(47207),i(70852),i(48103),i(39423),i(85681),i(18444),i(42411),i(9767),i(38218),i(91914),i(86605),i(68196),i(440),i(46547),i(6238),i(7299);function r(e){e.selectedFields=[],e.layerFields=void 0,e.fields=void 0,e.hideLayerTitle=!1,e.supportsArcade=!1,e.stringFieldsCount=-1,e.dateFieldsCount=-1,e.numberFieldsCount=-1,e.containsFlow=!0,e.oneFeatureResponseStatus=s.s.MISSING,e.selectedAttribute=void 0,e.selectedAttributeText=void 0,e.selectedTypeValue=void 0,e.selectedValue=void 0,e.lastDefault=void 0,e.lastDefaults=void 0,e.dotColorSelected=void 0,e.backgroundStyleSelected=void 0,e.lastSettings=void 0,e.classedSymbolSelectedIdx=void 0,e.allUniqueValues=void 0,e.useFeatureReduction=void 0,e.symbolStylerConfig={},e.allowTimeSeriesConfiguration=!1,e.rasterInfo=void 0}function o(){const e=(0,n.Gk)(),t=e;e.manager.onLoad(()=>{t.smartMappingState=function(e,t){const i=l.get(e);if(i)return i;const s=(0,a.el)(e,t);return s&&"store"in s?(l.set(e,s.store),s.store):null}(e.el,"arcgis-map-config-smart-mapping")})}const l=new WeakMap},75518:(e,t,i)=>{let a,s;function n(e){e.loading=!1}async function r(e,t){return function(e){e.loading=!0,s=!1,a&&clearTimeout(a),a=setTimeout(()=>{n(e),s=!0},6e4)}(t),await e.then(e=>{if(n(t),s)throw new Error("timeout");return e}).catch(e=>{throw n(t),e})}i.d(t,{r:()=>r})},89989:(e,t,i)=>{i.d(t,{w:()=>n});var a=i(54312),s=i(1225);i(44345),i(55448),i(52797),i(34031),i(63438),i(5933),i(28927),i(83368),i(89704),i(5294),i(18423),i(96086),i(91813),i(21255),i(13078),i(21303),i(12627),i(56451),i(31521),i(23054),i(5077),i(23795),i(17902),i(87420),i(30161),i(81734),i(75698),i(10628),i(59640),i(64451),i(6176),i(83552),i(77462),i(49403),i(10281),i(83930),i(66617),i(10454),i(29614),i(94916),i(52554),i(2156),i(4038),i(49851),i(75054),i(15223),i(70169),i(47207),i(70852),i(48103),i(39423),i(85681),i(18444),i(42411),i(9767),i(38218),i(91914),i(86605),i(68196),i(440),i(46547),i(6238),i(7299);function n(e,t,i){const{layer:n,mapView:o,useFeatureReduction:l}=e;return l&&"featureReduction"in n&&"binning"===n.featureReduction.type?a.watch(()=>o.scale,()=>{const a=n.featureReduction;o.scale<=a.maxScale&&!t.disabled?((0,s.f)(),function(e,t,i){const a=document.createElement("arcgis-map-config-smart-mapping-scale-alert-popover");a.smartMappingState=e,a.refElement=t,a.addEventListener("arcgisSmartMappingScaleAlertPopoverBack",()=>{r(),i()}),document.body.append(a)}(e,t,i),(0,s.h)(t,!0)):o.scale>a.maxScale&&t.disabled&&(r(),(0,s.h)(t,!1),t.setFocus())}):void 0}function r(){document.querySelectorAll("arcgis-map-config-smart-mapping-scale-alert-popover").forEach(e=>e.remove())}}}]);