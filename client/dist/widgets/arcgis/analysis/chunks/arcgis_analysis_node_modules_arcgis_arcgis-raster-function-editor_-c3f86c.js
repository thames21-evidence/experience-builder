"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_arcgis-raster-function-editor_-c3f86c"],{168:(e,t,a)=>{function i(e){void 0!==e&&(e.open=!1,e.remove())}function s(e,t){setTimeout(()=>{!1===e.body.contains(t)&&(e.body.appendChild(t),t.open=!0)},10)}function o(e,t){const{helpUrl:a,helpId:o,heading:r,referenceElement:n,portal:l,helpSrcdoc:d,learnMoreUrl:c,offsetDistance:h,offsetSkidding:m}=t;return void 0!==e&&(i(e),e=void 0),e=function(e){const{helpUrl:t,helpId:a,heading:i,referenceElement:s,portal:o,helpSrcdoc:r,learnMoreUrl:n,placement:l,offsetDistance:d,offsetSkidding:c}=e,h=document.createElement("rfx-help-popover");return h.helpUrl=t,h.helpId=a,h.heading=i,h.referenceElement=s,h.placement=l??"leading-start",h.portal=o,h.helpSrcdoc=r,h.learnMoreUrl=n,void 0!==d&&(h.offsetDistance=d),void 0!==c&&(h.offsetSkidding=c),h}({helpUrl:a,helpId:o,heading:r,referenceElement:n,portal:l,helpSrcdoc:d,learnMoreUrl:c,offsetDistance:h,offsetSkidding:m}),s(document,e),e}function r(e,t){const{referenceElement:a,label:o,direction:r,offsetDistance:n,offsetSkidding:l,showPropertiesAction:d,showRenameAction:c,handleNodeDuplicate:h,handleNodeRename:m,handleNodeDelete:p,handleNodeEditProperties:f}=t;void 0!==e&&(i(e),e=void 0),e=document.createElement("calcite-popover");const u={overlayPositioning:"fixed",autoClose:!0,dir:r,focusTrapDisabled:!0,triggerDisabled:!0,pointerDisabled:!0,placement:"bottom",closable:!1,open:!0,referenceElement:a,label:o,offsetDistance:n,offsetSkidding:l,style:"z-index: 650;"};Object.assign(e,u);const v=document.createElement("rfx-node-interaction-toolbar"),g={showPropertiesAction:d,showRenameAction:c,handleNodeDuplicate:h,handleNodeRename:m,handleNodeDelete:p,handleNodeEditProperties:f};return Object.assign(v,g),e.append(v),s(document,e),setTimeout(()=>requestAnimationFrame(()=>{e.open=!0,e.setFocus()}),1),e}a.d(t,{c:()=>r,r:()=>i,s:()=>o})},48640:(e,t,a)=>{a.d(t,{R:()=>i});const i={header:"header",content:"content"}},72415:(e,t,a)=>{a.d(t,{R:()=>$,a:()=>q,b:()=>R,c:()=>F,d:()=>P,e:()=>D,g:()=>w,u:()=>k});var i=a(92265),s=a(51477),o=a(33797),r=a(80587),n=a(42335),l=a(38949),d=a(85740),c=(a(23795),a(17902),a(56451),a(69843)),h=a(16035),m=a(47453),p=a(73427),f=a(42678),u=a(168),v=a(64130),g=a(69529),C=a(19956),y=a(48640);a(5294),a(13661),a(18423),a(21255),a(35431),a(588),a(55448),a(2924),a(11840),a(52373),a(33752),a(440),a(66744),a(44345),a(71802),a(36596);function b(e,t){const a=e?.value;let i=a;if(e?.type===l.d){if("Scalar"===a?.type)i=(0,m.a)(a?.value??"0");else if(!(0,l.i)(a)){const{name:e,url:t}=a;if((0,l.i)(e)&&(0,l.i)(t))i=a;else{i={name:e,url:(0,d.b)(t)}}}}else if(e?.type===l.R){i=`<${e?.function?.name??e?.name??""}.${t.outputRaster}>`}return i}function x(e,t){const a=e?.value,i=(0,l.i)(a)?[]:a?.elements??(Array.isArray(a)?a:[a]);return Array.from(i).map(e=>b(e,t))}function T(e){if((0,l.i)(e))return;let t;if((0,l.k)(e)&&!(0,l.i)(e.features)){const a=[];if(function(e){let t=!0;const{fields:a}=e;return!(0,l.i)(a)&&7===a.length&&a.some(e=>"Value"===e.name)&&a.some(e=>"ClassName"===e.name)&&a.some(e=>"Red"===e.name)&&a.some(e=>"Green"===e.name)&&a.some(e=>"Blue"===e.name)&&a.some(e=>"Alpha"===e.name)||(t=!1),t}(e)){for(const t of e.features)if(!(0,l.i)(t?.attributes)){const{Alpha:e,Blue:i,ClassName:s,Green:o,Red:r,Value:n}=t.attributes,l={Value:n,ClassName:s,Color:{Red:r,Green:o,Blue:i,Alpha:e}};a.push(l)}}else for(const t of e.features)if(!(0,l.i)(t?.attributes)){const i={};for(const a of e.fields)(0,l.i)(a)||"esriFieldTypeOID"===a.type||(i[a.name]=t.attributes[a.name]);a.push(i)}t=a}return t}function S(e,t,a){const i=e?.value;let o=i;if(null!=t){switch(t.dataType){case h.d.boolean:o=i?a.true:a.false;break;case h.d.colorRamp:o=function(e,t){const a=e?.value,i=a?.Name??a?.name??void 0;return(0,l.i)(i)?t.custom:i}(e,a);break;case h.d.featureClass:o=function(e){const t=e?.value;let a=t;if(!(0,l.i)(t)){const{name:e,url:i}=t;a={name:e,url:(0,d.b)(i)}}return a}(e);break;case h.d.raster:o=b(e,a);break;case h.d.rasterArray:o=x(e,a);break;case h.d.longArray:o=function(e,t){const a=e?.value,i=e?.name;let s=a??[];return Array.isArray(a)&&a?.length>0&&"bandids"===i?.toLowerCase()&&"ccdc_bandids"!==t?.helpTextID&&(s=Array.from(a).map(e=>(0,l.i)(e)?e:e+1)),s}(e,t);break;case h.d.double:o=function(e){const t=e?.value;return(0,m.a)(t)??t}(e);break;case h.d.doubleArray:o=function(e){const t=e?.value;let a=t??[];return Array.isArray(t)&&t?.length>0&&(a=Array.from(t).map(e=>(0,m.a)(e))),a}(e);break;case h.d.table:o=T(e)}if(!(0,l.i)(t.domain?.enum)){const e=(0,s.w)(t.domain?.enum);o=e?.find(e=>e.key===i?.toString())?.label}(0,l.i)(t.domain?.type)||t.domain?.type!==h.b.bandIndex||(o=(0,l.i)(i)?i:i+1)}else o=(0,s.r)(e)?x(e,a):b(e,a);return o??i}function E(e,t){let a=e;if(t.has(a)){let i=1;for(a=e+"_"+i.toString();t.has(a);)++i,a=e+"_"+i.toString()}return a}function I(e,t,a,i,o){let r={},n={};void 0===o&&(o=new Set);const d=function(e){const t=[],a=e[l.A];return(0,l.i)(a)||((0,l.c)(a)?t.push(a):Object.keys(a).forEach(e=>{if(e!==l.T){const i=a[e];(0,l.c)(i)&&t.push(i)}})),t}(t),c=[];d?.forEach((t,l)=>{if((0,s.z)(t)){let d=(0,s.p)(t);if(d){const{translatedKeys:t,translatedJobParams:s}=I(e,d,a,i,o);r={...r,...t},n={...n,...s},c.push(l)}else if((0,s.r)(t)){const l=t.value.elements??[t.value];Array.from(l).forEach(t=>{if(d=(0,s.p)(t),d){const{translatedKeys:t,translatedJobParams:s}=I(e,d,a,i,o);r={...r,...t},n={...n,...s}}})}}}),c.length>0&&(c.sort(function(e,t){return t-e}),c.forEach(e=>{d.splice(e,1)}));const m=(0,s.q)({schema:a,rfxTemplate:t}),p=m?.rasterFunctionArguments,f=function(e,t){const a=[];return e.forEach(i=>{const o=(0,s.b)(i.name,t);if((0,l.i)(o?.editorStateTrigger))return;let r=i.value;o.dataType===h.d.boolean||isNaN(r)||(r=Number(r));const n=o.editorStateTrigger.active;!(0,l.i)(n)&&n&&o.editorStateTrigger.triggers?.forEach(t=>{let o,n,d;const c=t.autoRevert||!1,h=t.checkValuePresent?!(0,l.i)(r):Array.isArray(t.values)&&t.values.indexOf(r)>=0;(h||c)&&e.forEach(e=>{i.name!==e.name&&(o=(0,s.t)(t.active,e.name),n=(0,s.t)(t.inactive,e.name),d=n&&h||o&&!h&&c,d&&a.push(e.name))})})}),e.filter(e=>a.indexOf(e.name)<0)}(d,p),u=function(e,t){let a=t;if(e){a=t.filter(e=>!0===e.isPublic||"_Rasters"===e.name&&e.value?.elements?.some(e=>!0===e?.isPublic));const e=a.find(e=>"_Rasters"===e.name);if(!(0,l.i)(e)){const t=e.value?.elements;e.value.elements=t?.filter(e=>!0===e?.isPublic)}}return a}(e,f);return u?.forEach(e=>{let a,d=e.name,c=!1;if((0,l.l)(e))return;"LocalFunction"===t?.function?.type&&"_Rasters"===d&&(d="Rasters",c=!0,a=t.arguments?.Operation?.value);const h=(0,s.b)(d,p);if(!0!==h?.hidden)if(c)e.value?.elements?.forEach((e,t)=>{const s=E(e.name,o);o.add(s),r[s]=function(e,t,a,i){const{elementInfos:s}=a;let o=e.name;if(!(0,l.i)(s)){const e=s.find(e=>e.values.indexOf(i)>-1)?.inputArgs;(0,l.i)(e)||(o=e[t]?.displayName)}return o}(e,t,h,a),n[s]=b(e,i)});else{const t=E(d,o);o.add(t),r[t]=function(e,t){return t?.displayName??e.displayName??e.name}(e,h),n[t]=S(e,h,i)}}),{translatedKeys:r,translatedJobParams:n}}async function w(e,t,a,i){if((0,l.i)(e)||(0,l.i)(a))return{translatedKeys:{},translatedJobParams:{}};const o=await(0,h.a)(a);let r=o.rasterFunctions.rfxArgs;const n=o.rasterFunctionEditor.rfxArgsEditor,d=o.rasterFunctions.mainGenStrings;r={...r,...n},r={...r,...d};const c=await(0,s.G)(a),{honorIsPublic:m}=(0,s.B)(e);let{translatedKeys:p,translatedJobParams:f}=I(m,e,c,r);if(!(0,l.i)(t)){const{translatedOutputNameKeys:e,translatedOutputNameJobParams:a}=function(e,t,a){const i={},s={},o=JSON.parse(e);return i.outputName=t.outputName,s.outputName=o?.serviceProperties?.name??o.itemProperties?.title??void 0,!0!==a&&(i.outputType=t.outputLayerType,s.outputType="Image"===o?.serviceProperties?.capabilities?t.dynamicImageryLayer:t.tiledImageryLayer),i.saveInFolder=t.saveInFolder,s.saveInFolder=o?.itemProperties?.folderId,{translatedOutputNameKeys:i,translatedOutputNameJobParams:s}}(t,d,i);p={...p,...e},f={...f,...a}}return{translatedKeys:p,translatedJobParams:f}}async function R(e,t){if((0,l.i)(e)||(0,l.i)(t))return;const a=(await(0,h.a)(t)).rasterFunctions.rfx,i=await(0,s.G)(t),o=(0,s.q)({schema:i,rfxTemplate:e}),r=e.name;let n=r,d=o.name;if(r.toLowerCase()===e.function?.name?.toLowerCase()){if((0,l.i)(d)){const t=await(0,s.o)(e);d=a[Object.keys(a).find(e=>e.toLowerCase()===t?.toLowerCase()+"name")]}(0,l.i)(d)||(n=d)}return n}async function F(){const e=new Map,{rfxFunctions:t}=await(0,s.e)();for(const a of t)(0,l.i)(a)||("CellStatisticsFunction"===a.name&&e.set("LocalFunction__40",a.title),e.set(a.name,a.title));return e}function P(e){if((0,l.i)(e))return;const{name:t,description:a,thumbnailEx:i,functionType:s,definition:o,properties:r}=e;return{name:t,description:a,thumbnail:i,functionType:s,definitionQuery:o,properties:r}}function k(e,t){return(0,l.i)(t)?e:{...e,thumbnailEx:t.thumbnail,name:t.name,description:t.description??"",functionType:t.functionType,definition:t.definitionQuery,properties:t.properties}}function D(e){if((0,l.i)(e))return void console.warn("RFT Handler get RFT Blob: No model provided.");let t=JSON.stringify(e,null,2);t=t.replaceAll(/\??token=[^&"]+?\"/g,'"');return new Blob([t],{type:"text/json"})}const L="new-template",A="open-template",N="add-function",M="add-constant",O="add-raster",B="edit-template-properties",U="host",J="content",V="overlay-element",W="overlay-panel",H="list-wrapper",_="panel",j="arcgis--rtl",Z="action-bar",$=class{constructor(e){(0,i.r)(this,e),this.analysisRFTLaunch=(0,i.c)(this,"analysisRFTLaunch"),this.analysisTemplateSaved=(0,i.c)(this,"analysisTemplateSaved"),this.analysisTemplateNameChanged=(0,i.c)(this,"analysisTemplateNameChanged"),this.analysisRFTEditorClose=(0,i.c)(this,"analysisRFTEditorClose"),this.analysisRFTFailedToLoad=(0,i.c)(this,"analysisRFTFailedToLoad"),this.analysisRFTLoaded=(0,i.c)(this,"analysisRFTLoaded"),this.analysisRFTItemCreated=(0,i.c)(this,"analysisRFTItemCreated"),this.rftItemDetailsLinkClicked=(0,i.c)(this,"rftItemDetailsLinkClicked"),this.analysisDeprecatedFunctionFound=(0,i.c)(this,"analysisDeprecatedFunctionFound"),this.rfxCoreServices={diagramZoomInCommand:void 0,diagramZoomOutCommand:void 0,diagramAutoLayoutCommand:void 0,diagramStretchCommand:void 0,diagramPanCommand:void 0,diagramSelectCommand:void 0,addRFxFunctionCommand:void 0,addRasterNodeCommand:void 0,addScalarNodeCommand:void 0,addRFTPortalItemCommand:void 0,addRFTJSONCommand:void 0,getModelCommand:void 0,getDehydratedModelCommand:void 0,refreshDiagramViewCommand:void 0,deleteSelectedItemsCommand:void 0,getModelDisplayDataCommand:void 0},this.showRfxList=!1,this.rftItemId="rft-0",this.scale=o.C.s,this.headerElement=null,this.overlayElementsConfig={leftToolBar:{slot:"left",visible:!0,builder:()=>(({handleDiagramZoomIn:e,handleDiagramZoomOut:t,handleDiagramAutoLayout:a,handleDiagramStretch:s,handleDiagramSelect:r,handleDiagramPan:n,handleDiagramDeleteSelected:l,slot:d,scale:c=o.C.s})=>(0,i.h)("div",{slot:d},(0,i.h)("rfx-diagram-interaction-toolbar",{handleDiagramZoomIn:e,handleDiagramZoomOut:t,handleDiagramAutoLayout:a,handleDiagramStretch:s,handleDiagramSelect:r,handleDiagramPan:n,handleDiagramDeleteSelected:l,scale:c})))({handleDiagramZoomIn:this.handleDiagramZoomIn,handleDiagramZoomOut:this.handleDiagramZoomOut,handleDiagramAutoLayout:this.handleDiagramAutoLayout,handleDiagramStretch:this.handleDiagramStretch,handleDiagramSelect:this.handleDiagramSelect,handleDiagramPan:this.handleDiagramPan,handleDiagramDeleteSelected:this.handleDiagramDeleteSelected,slot:"left",scale:this.scale}),type:"static"},rightToolBar:{slot:"right",visible:!0,builder:()=>(({handleRFTLaunch:e,handleRFTSave:t,handleRFTSaveAs:a,handleOpenTemplateEditor:s,handleRFTShare:r,slot:n,templateId:l,scale:d=o.C.s})=>(0,i.h)("div",{slot:n},(0,i.h)("rfx-rft-interaction-toolbar",{handleRFTLaunch:e,handleRFTSave:t,handleRFTSaveAs:a,handleOpenTemplateEditor:s,handleRFTShare:r,templateId:l,scale:d})))({handleRFTLaunch:this.handleRFTLaunch,handleRFTSave:this.handleRFTSave,handleRFTSaveAs:this.handleRFTSaveAs,handleOpenTemplateEditor:this.handleOpenTemplateEditor,handleRFTShare:this.handleRFTShare,slot:"right",templateId:this.rftItemId,scale:this.scale}),type:"static"},rfxListView:{slot:"left",visible:!1,builder:({addRasterFunctionTitle:e})=>(({slot:e,handleTriggerSelectFunction:t,handlePanelClose:a,heading:s})=>(0,i.h)("div",{slot:e,class:H},(0,i.h)("rfx-panel",{heading:s,closable:!0,showFooter:!1,closed:!1,class:{[V]:!0,[W]:!0},onCalcitePanelClose:a},(0,i.h)("rfx-list-view",{mode:C.R.CORE,onTriggerSelectFunction:t}))))({slot:"left",heading:e,handleTriggerSelectFunction:this.handleRFxListViewTriggerSelectFunction,handlePanelClose:this.handleRFxListViewPanelClose}),type:"static"}},this.renderFlag=!1,this.showUnsavedChangesDialog=e=>void 0!==this.closeWithoutSavingModalElement?Promise.resolve(!1):new Promise(t=>{const a=document.createElement("rfx-close-without-saving-modal");a.rftTitle=e.rftProperties?.name||this.strings.newTemplate,a.handleCancel=()=>{a.remove(),this.closeWithoutSavingModalElement=void 0,t(!1)},a.handleDontSave=()=>{a.remove(),this.closeWithoutSavingModalElement=void 0,this.clearState(),t(!0)},a.handleSave=async()=>{a.remove(),this.closeWithoutSavingModalElement=void 0;const e=this.getTemplateInfo(this.rftItemId);if(void 0!==e?.portalItem&&!0===e?.canUpdateItem){try{await this.handleRFTSave(),this.analysisRFTEditorClose.emit()}catch{t(!1)}l.s.entryPoint===n.E.ITEM&&t(!0)}else t(await this.handleRFTSaveAs())},this.closeWithoutSavingModalElement=a,document.body.appendChild(a)}),this.showCloseWithoutSavingModal=(e,t)=>{const a=this.getTemplateInfo(),i=document.createElement("rfx-close-without-saving-modal");i.rftTitle=a.rftProperties?.name||this.strings.newTemplate,i.handleCancel=()=>{i.remove(),this.closeWithoutSavingModalElement=void 0},i.handleDontSave=e??this.handleDontSaveClick,i.handleSave=t??this.handleRFTSaveOnClose,this.closeWithoutSavingModalElement=i,document.body.appendChild(i)},this.handleRFTSaveOnClose=()=>{this.handleRFTSaveAs(),this.closeWithoutSavingModalElement.remove(),this.closeWithoutSavingModalElement=void 0},this.initializeRFxEditorCore=e=>{const t=e;var a;this.rfxEditorCoreElement=e,this.rfxCoreServices.diagramZoomInCommand=(a=t,{execute:async()=>{await a.zoomIn()}}),this.rfxCoreServices.diagramZoomOutCommand=(e=>({execute:async()=>{await e.zoomOut()}}))(t),this.rfxCoreServices.diagramAutoLayoutCommand=(e=>({execute:async()=>{await e.autoLayout()}}))(t),this.rfxCoreServices.diagramStretchCommand=(e=>({execute:async()=>{await e.stretch()}}))(t),this.rfxCoreServices.diagramPanCommand=(e=>({execute:async()=>{await e.pan()}}))(t),this.rfxCoreServices.diagramSelectCommand=(e=>({execute:async()=>{await e.select()}}))(t),this.rfxCoreServices.addRFxFunctionCommand=(e=>({execute:async t=>{await e.addRFxFunction(t)}}))(t),this.rfxCoreServices.addRasterNodeCommand=(e=>({execute:async t=>{const{value:a}=t||{};await e.addRasterNode({value:a})}}))(t),this.rfxCoreServices.addScalarNodeCommand=(e=>({execute:async t=>{const{value:a}=t||{};await e.addScalarNode({value:a})}}))(t),this.rfxCoreServices.addRFTPortalItemCommand=(e=>({execute:async t=>await e.addRFTPortalItem(t)}))(t),this.rfxCoreServices.addRFTJSONCommand=(e=>({execute:async t=>await e.addRFTJSON(t)}))(t),this.rfxCoreServices.getModelCommand=(e=>({execute:async()=>await e.getModel()}))(t),this.rfxCoreServices.getDehydratedModelCommand=(e=>({execute:async t=>await e.getDehydratedModel(t)}))(t),this.rfxCoreServices.refreshDiagramViewCommand=(e=>({execute:async()=>{await e.refreshDiagramView()}}))(t),this.rfxCoreServices.deleteSelectedItemsCommand=(e=>({execute:async()=>{await e.deleteSelected()}}))(t),this.rfxCoreServices.getModelDisplayDataCommand=(e=>({execute:async()=>{const{displayData:t}=await e.getModelDisplayData()||{};return t}}))(t)},this.handleNewTemplateClick=()=>{if(!0===this.getTemplateInfo(this.rftItemId).hasUnsavedChanges){const e=()=>{this.closeWithoutSavingModalElement?.remove(),this.closeWithoutSavingModalElement=void 0,this.clearState()};this.showCloseWithoutSavingModal(e)}else this.clearState()},this.handleOpenTemplateClick=()=>{const{portal:e}=this;this.itemBrowserElement=(0,v.b)({modalStrings:{header:this.strings.browseRFT},portal:e,user:e.user,filter:'(type: "Raster function template")',cardMessageOverrides:{preview:this.strings.previewDetails},onClose:this.closeItemBrowser,onSelection:this.handleItemBrowserSelection}),document.body.appendChild(this.itemBrowserElement)},this.handleItemBrowserSelection=async e=>{if(null!==e.detail){const t=e.detail.id;await this.loadRFT(t)}},this.loadRFT=async e=>{const t=this.getTemplateInfo();let a=!1;try{const i=await this.rfxCoreServices.addRFTPortalItemCommand.execute(e);if(null===i){const t=await(0,p.l)(e);a=await(0,p.i)(t)}if(void 0===t||void 0!==t.rftJSON||!1!==t.hasUnsavedChanges&&void 0!==t.hasUnsavedChanges||!this.isPortalItem())t.hasUnsavedChanges=!0;else{const a=await this.rfxCoreServices.getDehydratedModelCommand.execute(i);a.sourceItemId=e,t.rftJSON=a,t.rftProperties=P(t.rftJSON),void 0===t.portalItem&&await this.updateTemplateInfoPortalItem(t,e),this.analysisTemplateNameChanged.emit(t.rftProperties.name)}this.updateActiveRFTList(t),this.analysisRFTLoaded.emit({id:e,data:t.rftJSON})}catch(i){void 0!==t&&(a?this.analysisRFTLoaded.emit({id:e,data:t.rftJSON}):this.analysisRFTFailedToLoad.emit(e))}},this.addToActiveRFTList=e=>{void 0===l.s.activeRFxTemplates.find(t=>t.id===e.id)&&(l.s.activeRFxTemplates=[...l.s.activeRFxTemplates,e])},this.updateActiveRFTList=e=>{l.s.activeRFxTemplates=l.s.activeRFxTemplates.map(t=>t.id===e.id?e:t)},this.updateTemplateInfoPortalItem=async(e,t)=>{const a=await(0,p.l)(t,l.s.portal);this.updateTemplateInfoWithPortalItem(e,a)},this.updateTemplateInfoWithPortalItem=(e,t)=>{e.portalItem=t,e.canUpdateItem="admin"===t.itemControl||"update"===t.itemControl,0===t?.size&&(e.rftProperties={name:t.title,description:t.snippet,thumbnail:t.thumbnailUrl}),this.updateActiveRFTList(e)},this.createRfxDetailsEditor=({detailsEditorRfxTemplate:e,detailsEditorRfxSchema:t,detailsEditorRfxNode:a})=>{const i=(0,s.D)(e,this.translatedRFTNamesMap,!0)??e?.name,o=document.createElement("div");o.setAttribute("style","display: flex; width: 28rem; justify-content: space-between;"),o.slot="header",this.headerElement=o;const r=document.createElement("span");r.setAttribute("style","display: flex; align-items: center;"),r.innerHTML=i,this.header=i;const n=document.createElement("calcite-action");let d;n.scale="s",n.label="",n.text="",n.icon="information",n.onclick=this.handleRFxDetailsEditorHeadingHelpClick(e,i),o.appendChild(r),o.appendChild(n);let c=!0;!0===l.s.isViewerUserType&&(d={secondary:this.strings.close},c=!1);const h=(({rfxTemplate:e,mapLayers:t,portal:a,schema:i,title:s,labels:o,showPrimaryButton:r,handlePanelClose:n,handlePanelOk:l,handlePanelCancel:d,headerElementComponent:c,header:h,createLayerBrowse:m,mapView:p})=>{const f=document.createElement("rfx-details-editor");f.rfxTemplate=e,f.schema=i,f.mapLayers=t,f.portal=a,f.mapView=p,f.addEventListener("rfxDetailsEditorBrowseLayerClick",m),f.header=h;const u=(0,v.a)("rfx-modal","",{open:!0});u.labels=o,u.showPrimaryButton=r,u.setAttribute("style","--calcite-dialog-size-y: 34rem"),u.addEventListener("rfxModalClose",()=>{n()}),u.addEventListener("rfxModalPrimaryClick",async()=>{const e=await f.okClicked();l({rfxTemplate:e})}),u.addEventListener("rfxModalSecondaryClick",()=>{d()}),u.appendChild(c);const g=document.createElement("div");return g.slot=y.R.content,g.appendChild(f),u.appendChild(g),u})({rfxTemplate:e,schema:t,title:i,header:this.header,labels:d,showPrimaryButton:c,mapLayers:this.mapLayers,portal:this.portal,mapView:this.mapView,createLayerBrowse:this.createLayerBrowse,handlePanelClose:()=>{h.remove()},handlePanelOk:e=>{const{rfxTemplate:t}=e;a?.read(t),h.remove()},handlePanelCancel:()=>{h.remove()},headerElementComponent:o});document.body.appendChild(h)},this.createLayerBrowse=e=>{const t=e.detail;let a=(0,v.b)({modalStrings:{header:this.strings.selectLayer},portal:this.portal,user:this.portal.user,filter:t.filter||'(type: "Image Service")',selectionMode:"multi"===t.selectionMode?"multiple-sublayer":"single-sublayer",hideFilters:!0,onClose:()=>{a.remove(),a=void 0},onSelection:e=>{this.updateLayerValue(t.isFeatureSelectElement,t.referenceElement,e)}});document.body.appendChild(a)},this.updateLayerValue=(e,t,a)=>{if(null!==a.detail&&void 0!==a.detail){const e=a.detail;t.updateBrowsedLayer(e)}},this.handleAddFunctionClick=()=>{this.visibilityReducer({key:"rfxListView",visible:!0})},this.handleAddConstantClick=e=>{const{value:t}=e||{},a=this.getTemplateInfo();this.rfxCoreServices.addScalarNodeCommand.execute({value:t}),a.hasUnsavedChanges=!0,this.updateActiveRFTList(a)},this.handleAddRasterClick=e=>{const{value:t}=e||{},a=this.getTemplateInfo();this.rfxCoreServices.addRasterNodeCommand.execute({value:t}),a.hasUnsavedChanges=!0,this.updateActiveRFTList(a)},this.handleDontSaveClick=()=>{this.handleCloseClick(),this.closeWithoutSavingModalElement?.remove(),this.closeWithoutSavingModalElement=void 0},this.handleRunClick=()=>{},this.handleSaveClick=()=>{},this.handleCloseClick=()=>{this.clearState(),this.analysisRFTEditorClose.emit()},this.clearState=()=>{l.s.activeRFxTemplates=l.s.activeRFxTemplates.filter(e=>e.id!==this.rftItemId),this.rfxEditorCoreElement.clearAll(),this.analysisTemplateNameChanged.emit()},this.handleDiagramZoomIn=()=>{this.rfxCoreServices.diagramZoomInCommand.execute()},this.handleDiagramZoomOut=()=>{this.rfxCoreServices.diagramZoomOutCommand.execute()},this.handleDiagramAutoLayout=()=>{this.rfxCoreServices.diagramAutoLayoutCommand.execute()},this.handleDiagramStretch=()=>{this.rfxCoreServices.diagramStretchCommand.execute()},this.handleDiagramPan=()=>{this.rfxCoreServices.diagramPanCommand.execute()},this.handleDiagramDeleteSelected=()=>{this.rfxCoreServices.deleteSelectedItemsCommand.execute()},this.handleRFTLaunch=async()=>{try{let e=await this.rfxCoreServices.getModelCommand.execute();const t=this.getTemplateInfo();e=(0,l.i)(t.rftProperties)?{...e,name:this.strings.defaultTemplateName,description:""}:k(e,t.rftProperties),void 0!==t.portalItem&&(e.sourceItemId=t.portalItem.id);const a=()=>{this.closeWithoutSavingModalElement?.remove(),this.closeWithoutSavingModalElement=void 0,this.analysisRFTLaunch.emit(e)},i=()=>{this.handleRFTSaveOnClose()};void 0!==e&&(!0===t.hasUnsavedChanges?(this.showCloseWithoutSavingModal(a,i),t.rftJSON=e):this.analysisRFTLaunch.emit(e))}catch{this.showErrorModal()}},this.handleDiagramSelect=()=>{this.rfxCoreServices.diagramSelectCommand.execute()},this.handleRFTSave=async()=>{const e=this.getTemplateInfo();try{let t=await this.rfxCoreServices.getModelCommand.execute();t=k(t,e.rftProperties),e.rftJSON=t;const a=D(t),i=e.portalItem?.toJSON(),s=await(0,f.u)(e.portalItem,{itemProperties:{...i,title:e.rftProperties.name,description:e.rftProperties.description??"",snippet:e.rftProperties.description??"",thumbnail:e.rftProperties.thumbnail},itemData:a});s.success?(e.hasUnsavedChanges=!1,e.portalItem=s.item,this.updateActiveRFTList(e),document.body.appendChild((0,v.d)({modalStrings:{content:this.strings.saveSuccess.replace("${template}",s.item.title)}})),this.analysisTemplateSaved.emit({portalItem:e.portalItem,template:t})):console.error("Failed to save the item",s.errors[0].message)}catch{throw this.showErrorModal(),new Error("Invalid RFT.")}},this.showErrorModal=()=>{const e=(0,v.e)({modalStrings:{header:this.strings.templateInvalidModalTitle,content:this.strings.templateInvalidModalMsg}});!1===document.body.contains(e)&&(document.body.appendChild(e),e.open=!0)},this.closeSaveModal=()=>{void 0!==this.saveModalElement&&(this.saveModalElement.removeEventListener("cancelClick",this.closeSaveModal),this.saveModalElement.remove(),this.saveModalElement=void 0)},this.saveAsItem=async e=>{const t=e.detail.itemProperties,a={...this.getTemplateInfo()};a.rftProperties={...a.rftProperties,name:t.title,description:t.snippet};const i=k(a.rftJSON,a.rftProperties);a.rftJSON=i;const s=D(i);t.fileType="json";const o=await(0,f.c)({itemProperties:{...t,thumbnail:a.rftProperties.thumbnail},itemData:s},this.portal);if(o.success){a.hasUnsavedChanges=!1,this.updateTemplateInfoWithPortalItem(a,o.item),this.addToActiveRFTList({...a,hasUnsavedChanges:!1,portalItem:o.item,id:o.item.id});const e={modalStrings:{content:this.strings.saveSuccess.replace("${template}",o.item.title)}};l.s.entryPoint===n.E.ITEM&&(e.modalStrings.linkUrl=(0,p.a)(o.item),e.modalStrings.linkText=this.strings.openItemDetails,e.onLinkClicked=()=>{this.rftItemDetailsLinkClicked.emit()}),i.sourceItemId=o.item.id,document.body.appendChild((0,v.d)(e)),this.analysisTemplateSaved.emit({portalItem:o.item,template:i}),this.analysisRFTEditorClose.emit()}else{const e=o.errors[0];e.message.indexOf("already exists")>-1&&this.showSaveItemExistsAlert(e.message)}this.closeSaveModal()},this.showSaveItemExistsAlert=e=>{const t=(0,v.f)({modalStrings:{header:this.strings.saveItemExistsModalTitle,content:(0,l.w)(this.strings.saveItemExistsModalMsg,{fileName:e.match(/'([^']+)'/)[0].replace(/^'|'$/g,"")})}});document.body.appendChild(t)},this.closeItemBrowser=()=>{void 0!==this.itemBrowserElement&&(this.itemBrowserElement.removeEventListener("rfxItemBrowserClose",this.closeItemBrowser),this.itemBrowserElement.remove(),this.itemBrowserElement=void 0)},this.handleRFTSaveAs=async()=>new Promise(async e=>{const t=this.getTemplateInfo(),{portal:a,closeSaveModal:i,saveAsItem:s}=this;this.saveModalElement?.remove();try{const o=await this.rfxEditorCoreElement.getModel();t.rftJSON=o,void 0!==o&&(this.saveModalElement=(0,v.g)({portal:a,portalItem:t.portalItem,itemProps:void 0!==t.rftProperties?{title:t.rftProperties.name,snippet:t.rftProperties.description}:void 0,onCancel:()=>{i(),e(!1)},onSave:async t=>{await s(t),e(!0)}}),document.body.appendChild(this.saveModalElement))}catch{this.showErrorModal(),e(!1)}}),this.handleRFxTemplateEditorPanelClose=()=>{void 0!==this.templateEditorElement&&(this.templateEditorElement.remove(),this.templateEditorElement=void 0)},this.handleRFxTemplateEditorPanelSave=e=>{const t=this.getTemplateInfo();t.rftProperties=e,t.hasUnsavedChanges=!0,this.updateActiveRFTList(t),this.templateEditorElement?.remove()},this.handleOpenTemplateEditor=()=>{const e=this.getTemplateInfo();let t,a=!0;!0===l.s.isViewerUserType&&(a=!1,t=this.strings.close),this.templateEditorElement=(0,v.h)({templateProperties:e.rftProperties,portalItem:e.portalItem,modalStrings:{header:this.strings.templatePropertiesTitle,secondary:t},showPrimaryButton:a,onCancel:this.handleRFxTemplateEditorPanelClose,onSave:this.handleRFxTemplateEditorPanelSave}),document.body.appendChild(this.templateEditorElement)},this.handleRFTShare=()=>{const e=this.getTemplateInfo(),{portal:t}=this;this.shareModalElement?.remove(),this.shareModalElement=(0,v.i)({portal:t,portalItem:e.portalItem}),this.shareModalElement.addEventListener("rfxShareSuccessful",()=>{this.shareModalElement?.remove(),this.shareModalElement=void 0,document.body.appendChild((0,v.d)({modalStrings:{content:this.strings.shareSuccess.replace("${template}",e.portalItem.title)}}))}),document.body.appendChild(this.shareModalElement)},this.handleRFxListViewTriggerSelectFunction=async e=>{e.stopPropagation();const{detail:t}=e,a=this.getTemplateInfo(),i=await(0,s.g)(t);this.rfxCoreServices.addRFxFunctionCommand.execute(i),a.hasUnsavedChanges=!0,this.updateActiveRFTList(a)},this.handleRFxListViewPanelClose=e=>{e.stopPropagation(),this.visibilityReducer({key:"rfxListView",visible:!1})},this.createRasterNodeEditor=(e,t)=>{let a,i=!0;!0===l.s.isViewerUserType&&(a={secondary:this.strings.close},i=!1);const s=(0,v.j)({heading:this.strings.browseLayerDialogTitle,labels:a,showPrimaryButton:i,inputLayers:(0,d.g)(this.mapLayers).imageryLayers,layerValue:t,handlePanelOk:t=>{e.value=t.rasterValue,s?.remove()},handlePanelClose:()=>{s?.remove()},createLayerBrowse:this.createLayerBrowse});document.body.appendChild(s)},this.handlePopoverClose=()=>{(0,u.r)(this.toolHelpPopover)},this.handleRFxDetailsEditorHeadingHelpClick=(e,t)=>async()=>{const a=(0,s.j)(e),{helpTemplate:i,learnMoreUrl:o}=await(0,r.g)({rfxName:a,rfxTemplate:e,portal:this.portal,mode:n.M.EDITOR});this.toolHelpPopover=(0,u.s)(this.toolHelpPopover,{helpSrcdoc:i,helpId:"toolDescription",heading:t,referenceElement:this.headerElement,learnMoreUrl:o,offsetDistance:25,offsetSkidding:0}),this.toolHelpPopover.addEventListener("rfxHelpPopoverClose",this.handlePopoverClose)},this.handleRfxCoreNodeEditProperties=e=>{switch(this.handlePopoverClose(),e.dataType){case h.d.raster:this.createRasterNodeEditor(e.node,e.json);break;case h.d.rfxtemplate:const t=void 0===e.schema||(0,g.i)(e.schema),a=(0,g.a)(e.schema);if(t||a)return;this.createRfxDetailsEditor({detailsEditorRfxTemplate:e.json,detailsEditorRfxSchema:e.schema,detailsEditorRfxNode:e.node})}},this.handleRfxCoreNodeDuplicate=async e=>{switch(e.dataType){case h.d.raster:this.handleAddRasterClick({value:e.value});break;case h.d.scalar:this.handleAddConstantClick({value:e.value.value});break;case h.d.rfxtemplate:const t=(0,s.j)(e.json),a=await(0,s.g)(t);this.rfxCoreServices.addRFxFunctionCommand.execute(a)}},this.handleRfxCoreDeprecatedFunctionFound=e=>{const t=this.portal?.isPortal,a=this.portal?.sourceJSON?.helpBase||s.a.learnMoreDocBaseURL,i=(0,c.f)(a,this.locale);let o;if(!0===t){const e=s.a.learnMoreDocDeprecatedEnterpriseHelpID,{restUrl:t}=this.portal;o=`${i}${(0,r.a)(e)}`,o=(0,c.a)(o,t)}else o=(0,r.f)(i,s.a.learnMoreDocDeprecatedHelpID),this.analysisDeprecatedFunctionFound.emit();const n=`${this.strings.deprecatedFunctions}${e}`;this.rfxEditorPanelElement.appendChild((0,v.k)({modalStrings:{content:(0,l.w)(this.strings.deprecatedFunctionAlertContent,{docLink:o}),header:this.strings.deprecatedFunctionAlertHeader,functionNames:n}}))},this.handleRfxCoreUnsupportedFunctionFound=e=>{const t=this.portal?.isPortal,a=this.portal?.sourceJSON?.helpBase||s.a.learnMoreDocBaseURL,i=(0,c.f)(a,this.locale);let o;if(!0===t){const e=s.a.learnMoreDocDefaultEnterpriseHelpID,{restUrl:t}=this.portal;o=`${i}${(0,r.a)(e)}`,o=(0,c.a)(o,t)}else o=(0,r.f)(i,s.a.learnMoreDocDefaultHelpID);const n=`${this.strings.unsupportedFunctions} ${e}`;this.rfxEditorPanelElement.appendChild((0,v.l)({modalStrings:{content:(0,l.w)(this.strings.unsupportedFunctionAlertContent,{docLink:o}),header:this.strings.unsupportedFunctionAlertHeader,functionNames:n}}))},this.handleRfxCoreNodeDelete=()=>{const e=this.getTemplateInfo();e.hasUnsavedChanges=!0,this.updateActiveRFTList(e)},this.handleRfxCoreNodeValueChange=()=>{const e=this.getTemplateInfo();void 0!==e&&(!0===e.hasLoaded&&(e.hasUnsavedChanges=!0),this.updateActiveRFTList(e))}}onPortalChange(e){l.s.portal=e}async onRftItemIdChange(){if(void 0!==this.rftItemId){const e=this.getTemplateInfo(this.rftItemId)??{id:this.rftItemId};void 0===e.portalItem&&l.s.entryPoint!==n.E.ITEM||await this.updateTemplateInfoPortalItem(e,this.rftItemId),this.addToActiveRFTList(e)}}handleActionBarClick(e){if(e.detail.templateId===this.rftItemId)switch(e.detail.actionId){case L:this.handleNewTemplateClick();break;case A:this.handleOpenTemplateClick();break;case N:this.handleAddFunctionClick();break;case M:this.handleAddConstantClick();break;case O:this.handleAddRasterClick();break;case B:this.handleOpenTemplateEditor()}}async onPanelClose(e){return new Promise(async t=>{const a=this.getTemplateInfo(e);if(void 0!==a)return!0===l.s.isViewerUserType?(this.handleCloseClick(),void t(!0)):void(!0===a.hasUnsavedChanges?t(await this.showUnsavedChangesDialog(a)):(this.handleCloseClick(),t(!0)));t(!0)})}async canClose(e){return new Promise(t=>{const a=this.getTemplateInfo(e);!0===a.hasUnsavedChanges?t({canClose:!1,message:(0,l.w)(this.strings.unsavedChanges,{rftTitle:a?.rftProperties?.name})}):t({canClose:!0,message:""})})}async closeWithoutConfirmation(){return this.handleCloseClick(),Promise.resolve()}async reloadRFTItem(){void 0!==this.rftItemId&&(await this.onRftItemIdChange(),await this.loadRFT(this.rftItemId))}async getModelJSON(){const e=await this.rfxCoreServices.getModelDisplayDataCommand.execute(),t=this.rfxEditorCoreElement.getBoundingClientRect(),a=t.left,i=t.top;return e.map(e=>({...e,x:a+e.x,y:i+e.y,points:e.points.map(e=>({...e,x:a+e.x,y:i+e.y}))}))}updateTemplateInfo(e,t){const a=this.getTemplateInfo(e);return void 0!==t?.name&&void 0!==a&&(a.rftProperties.name=t.name,a.rftJSON.name=t.name,this.updateActiveRFTList(a)),Promise.resolve()}async componentWillLoad(){({strings:this.strings,dir:this.direction,locale:this.locale}=await(0,c.c)(this.hostElement,(0,i.d)("."))),void 0!==this.portal&&this.onPortalChange(this.portal),this.translatedRFTNamesMap=await F(),await this.onRftItemIdChange()}componentDidLoad(){if(void 0!==this.rftItemId){const e=this.getTemplateInfo(this.rftItemId);e.hasLoaded=!1,setTimeout(async()=>{this.isPortalItem()?void 0!==e.rftJSON?(await this.rfxCoreServices.addRFTJSONCommand.execute(e.rftJSON),this.analysisRFTLoaded.emit({id:this.rftItemId,data:e.rftJSON})):await this.loadRFT(this.rftItemId):(e.rftProperties={name:`${this.strings?.newRFT} ${this.rftItemId.split("-")[1]}`},this.updateActiveRFTList(e)),e.hasLoaded=!0},1)}}disconnectedCallback(){(0,u.r)(this.toolHelpPopover),this.handleCloseClick()}isPortalItem(){return-1===this.rftItemId.indexOf("rft")}getTemplateInfo(e){return l.s.activeRFxTemplates.find(t=>t.id===(e??this.rftItemId))}visibilityReducer({key:e,visible:t}){const a=this.overlayElementsConfig[e];if(a.visible!==t){if(!0===t){const e=Object.values(this.overlayElementsConfig).filter(e=>e.slot===a.slot);e.length>=2&&e.slice(1).forEach(e=>{e.visible=!1})}a.visible=t,this.scheduleRenderer()}}scheduleRenderer(){this.renderFlag=!this.renderFlag}renderOverlayElements(){const e={addRasterFunctionTitle:this.strings.addRasterFunctionTitle,templatePropertiesTitle:this.strings.templatePropertiesTitle,browseLayerDialogTitle:this.strings.browseLayerDialogTitle},t=this.overlayElementsConfig,a=Object.keys(t);!0===l.s.isViewerUserType&&(t.rightToolBar.visible=!1);return a.map(a=>{const i=t[a];if(!i.visible)return[];const s=i?.builder?.(e);return s})}_renderEditorCoreUI(){return(0,i.h)("rfx-editor-core",{ref:this.initializeRFxEditorCore,onRfxCoreNodeEditProperties:e=>{e.stopPropagation();const{detail:t}=e;this.handleRfxCoreNodeEditProperties(t)},onRfxCoreNodeDuplicate:async e=>{e.stopPropagation();const{detail:t}=e;await this.handleRfxCoreNodeDuplicate(t)},onRfxCoreDeprecatedFunctionFound:e=>{e.stopPropagation();const{detail:t}=e;this.handleRfxCoreDeprecatedFunctionFound(t)},onRfxCoreUnsupportedFunctionFound:e=>{e.stopPropagation();const{detail:t}=e;this.handleRfxCoreUnsupportedFunctionFound(t)},onRfxCoreNodeDelete:e=>{e.stopPropagation(),this.handleRfxCoreNodeDelete()},onRfxCoreNodeValueChange:e=>{e.stopPropagation(),this.handleRfxCoreNodeValueChange()}},this.renderOverlayElements())}render(){return(0,i.h)(i.H,{key:"7d2d8af1b0fe95eae96e1b8c8bcc3d8b1a15ec37",class:U},(0,i.h)("div",{key:"ba1b8f270a3fc4ce9d76eb6755b07d32ca9b4d3f",class:{[J]:!0,[j]:"rtl"===this.direction}},(0,i.h)("slot",{key:"a76bdb6d876fc2620dd6b8a2e9633ea7f26f560a",name:Z}),(0,i.h)("calcite-panel",{key:"1b74986a051a388e6795245551fa031c4b0f0419",class:_,heading:"",ref:e=>this.rfxEditorPanelElement=e},this._renderEditorCoreUI())))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,i.a)(this)}static get watchers(){return{portal:["onPortalChange"],rftItemId:["onRftItemIdChange"]}}};$.style=":root{--calcite-color-brand:#007ac2;--calcite-color-brand-hover:#00619b;--calcite-color-brand-press:#004874;--calcite-color-status-info:#00619b;--calcite-color-status-success:#35ac46;--calcite-color-status-warning:#edd317;--calcite-color-status-danger:#d83020;--calcite-color-status-danger-hover:#a82b1e;--calcite-color-status-danger-press:#7c1d13;--calcite-color-background:#f8f8f8;--calcite-color-foreground-1:#ffffff;--calcite-color-foreground-2:#f3f3f3;--calcite-color-foreground-3:#eaeaea;--calcite-color-text-1:#151515;--calcite-color-text-2:#4a4a4a;--calcite-color-text-3:#6a6a6a;--calcite-color-text-inverse:#ffffff;--calcite-color-text-link:#00619b;--calcite-color-border-1:#cacaca;--calcite-color-border-2:#d4d4d4;--calcite-color-border-3:#dfdfdf;--calcite-color-border-input:#949494;--rfx-quarter-spacing:0.25rem;--rfx-half-spacing:0.5rem;--rfx-three-quarter-spacing:0.75rem;--rfx-full-spacing:1rem;--rfx-component-default-width:100%;--rfx-ui-border-input:var(--calcite-color-border-2);--rfx-popover-content-min-height:30vh;--rfx-popover-content-max-height:60vh;--rfx-popover-content-height:45vh;--rfx-widget-content-height:30vh;--rfx-modal-width-small:32rem}.host{height:100%;width:100%}.content{height:100%;display:flex;overflow:hidden}.action-bar{height:100%;border-width:0 1px 0 0;border-style:solid;border-color:var(--calcite-color-border-2)}.menu-actions{display:inline-flex;justify-self:stretch}.header-actions{height:100%}.tooltip{white-space:nowrap}.arcgis--rtl .action-bar{border-width:0 0 0 1px}.editor-container{position:relative;}.overlay-element{z-index:3;box-shadow:0 0 5px rgba(0, 0, 0, 0.2);border-radius:0.25rem}.overlay-panel{max-height:90%;max-width:22rem;width:22rem}.list-wrapper{display:flex;height:100%}";const z="action-bar",K="tooltip",q=class{constructor(e){(0,i.r)(this,e),this.rfxEditorHeaderActionSelect=(0,i.c)(this,"rfxEditorHeaderActionSelect"),this.isBarExpanded=!1,this.hideCreateNewTemplate=!1,this.hideEditTemplateProperties=!0,this.hideRFxNodeActions=!1,this.scale=o.C.m,this.handleActionClick=e=>{const t={actionId:e.target.id,templateId:this.templateId};this.rfxEditorHeaderActionSelect.emit(t)}}async componentWillLoad(){({strings:this.strings,dir:this.direction}=await(0,c.c)(this.hostElement,(0,i.d)("."))),this.isBarExpanded=this.expanded}render(){const e=l.s.entryPoint===n.E.ITEM?this.strings.addTemplate:this.strings.openTemplate,t=l.s.isViewerUserType?this.strings.viewTemplateProperties:this.strings.editTemplateProperties;return(0,i.h)("calcite-action-bar",{key:"2fc191a9651b9df91350f54756559ba79eb608e0",class:z,onCalciteActionBarToggle:e=>{this.isBarExpanded=e.target.expanded},scale:this.scale,expanded:!0===this.isBarExpanded},!1===this.hideCreateNewTemplate&&(0,i.h)("calcite-action-group",{key:"e38d5a4a9eb2ba46f4479f052c06eb06be34fe71",scale:this.scale},(0,i.h)(i.F,{key:"5719e27ff28173bceb5416bdf7d7dcfc2ecf8224"},(0,i.h)("calcite-action",{key:"4a72e425f75464d681084e636f13272893c49ece",id:L,icon:"new-raster-function-template",text:this.strings.newTemplate,textEnabled:this.isBarExpanded,onClick:this.handleActionClick,scale:this.scale}),!this.isBarExpanded&&(0,i.h)("calcite-tooltip",{key:"3e223299d6d0afae39d9bb19dbedb7ec6dcfa17d",referenceElement:L},(0,i.h)("div",{key:"0965091f3a62212a4a3fb8706ccf8f9239df59cc",class:K},this.strings.newTemplate)))),!1===this.hideRFxNodeActions&&(0,i.h)("calcite-action-group",{key:"1567299c67e466af0d27381ef3a3b056e6d5f65b",scale:this.scale},(0,i.h)(i.F,{key:"9f5682a975cecae11c89b59f245b63a3c0af6aad"},(0,i.h)("calcite-action",{key:"243dd23c6565f9046505017e8832c8ea4ceacd7d",id:A,icon:"folder-open",text:e,textEnabled:this.isBarExpanded,onClick:this.handleActionClick,scale:this.scale}),!this.isBarExpanded&&(0,i.h)("calcite-tooltip",{key:"5d7efcbb80798cb964a954f933fee349ba57c05c",referenceElement:A},(0,i.h)("div",{key:"dbbc53ebf234418285a8bac79d6421290b9f2bdc",class:K},e))),(0,i.h)(i.F,{key:"f1bedfe0b3e264a2399d7622bbfbe8276bf2b45c"},(0,i.h)("calcite-action",{key:"00cd63ea3c2ed267ff088c527c249bcbdf8e8ef0",id:N,icon:"raster-function",text:this.strings.addFunction,textEnabled:this.isBarExpanded,onClick:this.handleActionClick,scale:this.scale}),!this.isBarExpanded&&(0,i.h)("calcite-tooltip",{key:"d0277bc23f8e5d774346ca0a646bd948daaf948a",referenceElement:N},(0,i.h)("div",{key:"b461303c3f40e9f1f878794260a27135b6752878",class:K},this.strings.addFunction))),(0,i.h)(i.F,{key:"46d0f725a0a30caf4d44df1ae66610039430c947"},(0,i.h)("calcite-action",{key:"315fdd1847c7b9436243208f094d0390bfab9614",id:M,icon:"add-constant",text:this.strings.addConstant,textEnabled:this.isBarExpanded,onClick:this.handleActionClick,scale:this.scale}),!this.isBarExpanded&&(0,i.h)("calcite-tooltip",{key:"18ffe0ed282b491cec43f77c84559c13cc57949f",referenceElement:M},(0,i.h)("div",{key:"a7c3bb9bf8de469a923255de80d81afca29b1ca6",class:K},this.strings.addConstant))),(0,i.h)(i.F,{key:"36accf7887d0bbff3a928421c2b3997b9d126f70"},(0,i.h)("calcite-action",{key:"4fade1e19182266f0d0e3696428ef3e852d4d68e",id:O,icon:"add-raster-variable",text:this.strings.addRaster,textEnabled:this.isBarExpanded,onClick:this.handleActionClick,scale:this.scale}),!this.isBarExpanded&&(0,i.h)("calcite-tooltip",{key:"21fc71773f93eae900dbb8c0d141f6ec74d28cc7",referenceElement:O},(0,i.h)("div",{key:"19e646ed7e052d0d097e748b93836b05cb97a185",class:K},this.strings.addRaster)))),!1===this.hideEditTemplateProperties&&(0,i.h)("calcite-action-group",{key:"20cb3972bc9b3bdab7995204bd2f6679d4e968ed",scale:this.scale},(0,i.h)(i.F,{key:"5db546203a7ee24ab8984ea5072c1a0f54e89e61"},(0,i.h)("calcite-action",{key:"bb6f8fb59d099063c081ac2d06d72f64193feadb",id:B,icon:"properties",text:t,textEnabled:this.isBarExpanded,onClick:this.handleActionClick,scale:this.scale}),!this.isBarExpanded&&(0,i.h)("calcite-tooltip",{key:"4cd2778d340b1d473a6ce77e6cc6d5c9806af3ff",referenceElement:B},(0,i.h)("div",{key:"9a7d1b29863c90a9330e69192c505596884dd59f",class:K},t)))),(0,i.h)("calcite-tooltip",{key:"88567dbc47d80eec5116f69779c03e433f3334fa",slot:"expand-tooltip"},(0,i.h)("div",{key:"92f26244f1e8e686ea8fb1daf8125f9460fdba79",class:K},this.strings.expand)))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,i.a)(this)}};q.style=":root{--calcite-color-brand:#007ac2;--calcite-color-brand-hover:#00619b;--calcite-color-brand-press:#004874;--calcite-color-status-info:#00619b;--calcite-color-status-success:#35ac46;--calcite-color-status-warning:#edd317;--calcite-color-status-danger:#d83020;--calcite-color-status-danger-hover:#a82b1e;--calcite-color-status-danger-press:#7c1d13;--calcite-color-background:#f8f8f8;--calcite-color-foreground-1:#ffffff;--calcite-color-foreground-2:#f3f3f3;--calcite-color-foreground-3:#eaeaea;--calcite-color-text-1:#151515;--calcite-color-text-2:#4a4a4a;--calcite-color-text-3:#6a6a6a;--calcite-color-text-inverse:#ffffff;--calcite-color-text-link:#00619b;--calcite-color-border-1:#cacaca;--calcite-color-border-2:#d4d4d4;--calcite-color-border-3:#dfdfdf;--calcite-color-border-input:#949494;--rfx-quarter-spacing:0.25rem;--rfx-half-spacing:0.5rem;--rfx-three-quarter-spacing:0.75rem;--rfx-full-spacing:1rem;--rfx-component-default-width:100%;--rfx-ui-border-input:var(--calcite-color-border-2);--rfx-popover-content-min-height:30vh;--rfx-popover-content-max-height:60vh;--rfx-popover-content-height:45vh;--rfx-widget-content-height:30vh;--rfx-modal-width-small:32rem}.action-bar{height:100%;border-width:0 1px 0 0;border-style:solid;border-color:var(--calcite-color-border-2)}.tooltip{white-space:nowrap}"}}]);