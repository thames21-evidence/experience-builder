/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-depende-a2c0b6.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-depende-a2c0b6"],{1654:(e,i,n)=>{n.d(i,{A:()=>b,B:()=>O,C:()=>M,D:()=>U,E:()=>g,F:()=>x,a:()=>s,b:()=>o,c:()=>t,d:()=>f,e:()=>S,f:()=>y,g:()=>_,h:()=>w,i:()=>h,j:()=>k,k:()=>N,l:()=>u,m:()=>d,n:()=>a,o:()=>C,p:()=>v,q:()=>p,r:()=>m,s:()=>j,t:()=>W,u:()=>c,v:()=>P,w:()=>T,x:()=>E,y:()=>G,z:()=>D});var l=n(46904);const r=e=>{var i,n,l;return"string"==typeof(null==e?void 0:e.role)&&(null==e?void 0:e.role)?null==e?void 0:e.role:null!==(n=null!==(i=null==e?void 0:e.roleId)&&void 0!==i?i:null==e?void 0:e.id)&&void 0!==n?n:null===(l=null==e?void 0:e.sourceJSON)||void 0===l?void 0:l.id};function o(e){return e&&!e.orgId}function t(e,i){return(0,l.u)(e,i)||"update"===e.itemControl||(0,l.c)([e],i)&&y(i)}function s(e,i){const n=(0,l.c)([e],i),r=(0,l.u)(e,i)||y(i)&&n,o=_(i)&&I(i);return!!(r||n&&o)}const a=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:manageLicenses"))},u=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:inviteUsers"))},d=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:manageRoles"))},c=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:changeUserRoles"))},v=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:viewGroups"))},p=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:viewUsers"))};function h(e){return["Trial Developer","Developer","Developer Subscription"].includes(null==e?void 0:e.type)}function g(e){return["Developer Subscription"].includes(null==e?void 0:e.type)}function m(e){return["Geoanalytics Engine","GeoAnalytics MS Fabric"].includes(null==e?void 0:e.type)}const f=e=>{var i;return null===(i=null==e?void 0:e.options)||void 0===i?void 0:i.includes("Developer")},D=e=>{var i;return null===(i=null==e?void 0:e.options)||void 0===i?void 0:i.includes("PublicSharingDisabled")},b=e=>{var i;return null===(i=null==e?void 0:e.options)||void 0===i?void 0:i.includes("HostedServicesPublicSharingDisabled")};function y(e){return"org_admin"===r(e)||"account_admin"===r(e)}function S(e){return["org_admin","account_admin"].includes(r(e))&&!(null==e?void 0:e.roleId)}function _(e){return!!(null==e?void 0:e.roleId)&&e.roleId.length>0}function k(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:updateItemCategorySchema"))}function w(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:updateGroups"))}function C(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:assignToGroups"))}const I=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:deleteItems"))};function P(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToGroup")}function T(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToOrg")}function O(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToPublic")}function G(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToOrg")}function M(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToPublic")}function E(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToGroup")}function N(e,i,n,l){const r=l&&!["Trial","Trial Press","Trial Developer","Developer Subscription","Evaluation"].includes(l.type),o=((null==i?void 0:i.privileges)||[]).includes("portal:admin:manageCollaborations");return!(!(null==e?void 0:e.collaborationsEnabled)||!i||!y(i)&&!o||!(null==n?void 0:n.isPortal)&&!r)}function x(e){return!!e&&(!_(e)||_(e)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:viewItems")}(e))}const U=({items:e,user:i,portal:n})=>{const r=e[0],o=r.owner;if(n.isPortal&&o!==i.username&&o.includes("esri_")&&!["esri_livingatlas"].includes(o))return!1;const s=(0,l.u)(r,i),a=_(i),u=A(i),d=t(r,i)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:updateItems")}(i)&&!a&&(function(e,i){return!function(e){return!(!e.urlKey||!e.customBaseUrl)||!!e.isPortal}(i)||P(e)||T(e)||!!i.canSharePublic&&O(e)}(i,n)||A(i));return s||d||(0,l.c)(e,i)&&u};function A(e){return E(e)||G(e)||M(e)}const L=["portal:user:createItem","portal:user:viewOrgItems","premium:publisher:createNotebooks","portal:publisher:createDataPipelines","features:user:edit","features:user:fullEdit","portal:admin:viewItems","portal:admin:updateItems","portal:admin:deleteItems"];function W(e){return e.some(e=>L.includes(e))}function j(e){return e.filter(e=>L.includes(e))}},76885:(e,i,n)=>{n.r(i),n.d(i,{arcgis_dependency_check_notice:()=>t});var l=n(87849),r=n(12192),o=n(37566);n(15332),n(94984),n(931),n(93814),n(1536),n(88878),n(83692),n(59317),n(37762),n(41473),n(54251),n(46904),n(72257),n(86562),n(3826),n(95878),n(15912),n(60958),n(26262),n(1654),n(63263),n(29599),n(52995);const t=class{constructor(e){(0,l.r)(this,e),this.arcgisDependencyCheckNoticeModalClose=(0,l.c)(this,"arcgisDependencyCheckNoticeModalClose",7),this.closeModal=()=>{this.modalOpen=!1,this.arcgisDependencyCheckNoticeModalClose.emit({sharingDetail:this.sharingDetail})},this.user=void 0,this.portal=void 0,this.config=void 0,this.api=void 0,this.item=void 0,this.sharingDetail=void 0,this.modalOpen=!1,this.hasSharingIssue=!1}async componentWillLoad(){const e=await(0,r.g)(this.el);this.i18n=e[0],this.validateSharingDependencies()}async onSharingDetailChange(){const{sharingDetail:e}=this;this.hasSharingIssue=!!e&&Object.keys(e).some(i=>e[i].length>0)}async validateSharingDependencies(){const{item:e,portal:i}=this,{result:n}=await(0,o.a)(e,i);return this.sharingDetail=n,{sharingDetail:n}}render(){const{hasSharingIssue:e,i18n:i,item:n,user:r,portal:o,config:t,sharingDetail:s,modalOpen:a,closeModal:u,validateSharingDependencies:d,el:c}=this;return e?(0,l.h)(l.H,null,(0,l.h)("calcite-notice",{icon:"",open:!0,closable:!1,kind:"warning"},(0,l.h)("div",{slot:"message"},i.mismatchSharing),(0,l.h)("calcite-link",{slot:"link",onClick:()=>this.modalOpen=!0},i.reviewLayerSharing)),s&&a&&(0,l.h)("arcgis-tunnel",{reference:c},(0,l.h)("arcgis-dependency-check",{items:[{item:n}],portal:o,user:r,config:t,isActive:a,onWorkflowCancel:u,onWorkflowComplete:()=>{u(),d.bind(this)()},preProcessedSharingDetail:s}))):null}get el(){return(0,l.a)(this)}static get watchers(){return{sharingDetail:["onSharingDetailChange"]}}}}}]);