/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-728811.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-728811"],{18973:(e,t,i)=>{i.r(t),i.d(t,{ArcgisMapConfigLayerViewJoinAddSelection:()=>L});var r=i(73679),s=i(4395),a=i(66228),o=(i(13661),i(21255),i(2801)),n=(i(2924),i(33752),i(44345),i(588),i(51072),i(76456)),l=i(83552),c=i(85643),d=i(73801);const p="flow",u="footer",y="info",g="list-header",h="text",m="footer-button",f="footer-top",b="browse",w=s.AH`.flow,.panel{height:100%}.footer{width:100%}.info{pointer-events:none;padding:1rem .75rem}.list-header{pointer-events:none;padding:1rem .75rem .3rem}.text{font-size:var(--calcite-font-size--2);line-height:1.375;color:var(--calcite-color-text-3);transition-duration:.15s;transition-timing-function:cubic-bezier(.4,0,.2,1);pointer-events:none;word-wrap:break-word;word-break:break-word}.footer-button{margin:0 10px 5px}.footer-top{display:flex}.notice{margin:8px}.browse{width:100%}`;class L extends d.WF{constructor(){super(...arguments),this._direction=(0,l.jH)(),this.listNode=(0,c._)(),this.backButtonNode=(0,c._)(),this.arcgisStatusChange=(0,d.lh)()}static{this.properties={props:0,status:9}}static{this.styles=w}load(){const{props:e}=this,{addItem:t,targetItem:i,targetLayer:r}=e;!t&&"group"===r.type&&(e.addItem=i,e.addLayer=r),e.addLayer&&"group"!==e.addLayer.type&&!(0,a.i)(e.addLayerId)&&(e.addLayerId=e.addLayer.layerId||void 0)}updated(){const{props:e}=this,{targetLayer:t,targetLayerId:i,addLayer:r,addLayerId:s}=e;"group"===t.type&&(0,o.a)(t).forEach(e=>{e.layerId!==i&&(e.visible=!1)}),r&&"group"===r.type&&(0,a.i)(s)?(0,o.a)(r).forEach(e=>{(t.id!==r.id||i!==e.layerId)&&(e.visible=e.layerId===s)}):r&&"group"!==r.type&&(r.visible=!0)}loaded(){requestAnimationFrame(()=>this.backButtonNode.value?.setFocus())}goBrowse(){this.arcgisStatusChange.emit({status:n.j.BROWSE_LAYER})}goBack(){this.arcgisStatusChange.emit({status:n.j.TARGET_SELECTION})}goNext(){this.arcgisStatusChange.emit({status:n.j.CONFIG})}onSelectionChange(){const{props:e}=this;let t=!1;this.listNode.value.querySelectorAll("calcite-list-item").forEach(i=>{i.selected&&(e.addLayerId=i.value,this.requestUpdate(),t=!0)}),t||(e.addLayerId=void 0,this.requestUpdate()),e.attributeRelationships=void 0,e.joinOperation=void 0}render(){const{props:e,status:t}=this,{_messages:i}=e;return this.el.classList.add("calcite-match-height"),s.qy`<calcite-flow class=${(0,d.CP)(p)} .customItemSelectors=${"arcgis-map-config-layer-view-join-browse-layer"}><calcite-flow-item .description=${i.join.joinLayer} class="panel" .selected=${t!==n.j.BROWSE_LAYER}>${this.renderFooterButtons()}${this.renderBrowse()}${this.renderSublayers()}</calcite-flow-item>${t===n.j.BROWSE_LAYER&&this.renderBrowseLayer()||""}</calcite-flow>`}renderFooterButtons(){const{props:e}=this,{addLayerId:t,addLayer:i,_messages:r}=e,o="rtl"===this._direction,n=!i||!(0,a.i)(t);return s.qy`<div slot=footer class=${(0,d.CP)(u)}><div class=${(0,d.CP)(f)}><calcite-button @click=${this.goBack} appearance=outline-fill width=half .iconStart=${o?"arrow-right":"arrow-left"} .label=${r.general.back} ${(0,c.K)(this.backButtonNode)}>${r.general.back}</calcite-button><calcite-button .disabled=${n} @click=${n?void 0:this.goNext} appearance=solid width=half .iconEnd=${o?"arrow-left":"arrow-right"} .label=${r.general.next}>${r.general.next}</calcite-button></div></div>`}renderBrowse(){const{props:e}=this,{_messages:t}=e;return s.qy`<div><div class=${(0,d.CP)(y)}><div class=${(0,d.CP)(h)}>${t.join.selectAddLayerPanelDescription}</div></div><div class=${(0,d.CP)(m)}><calcite-button id=arcgis-map-config-layer-view-join-browse @click=${this.goBrowse} appearance=outline-fill width=full .label=${t.join.browseForLayer}>${t.join.browseForLayer}</calcite-button></div></div>`}renderBrowseLayer(){const{props:e,status:t}=this;return s.qy`<arcgis-map-config-layer-view-join-browse-layer .props=${e} class=${(0,d.CP)(b)} .selected=${t===n.j.BROWSE_LAYER} @arcgisStatusChange=${e=>{e.detail.status===n.j.ADD_SELECTION&&setTimeout(()=>document.getElementById("arcgis-map-config-layer-view-join-browse")?.setFocus(),400)}}></arcgis-map-config-layer-view-join-browse-layer>`}renderSublayers(){const{props:e}=this,{targetLayer:t,addItem:i,addLayer:r,targetLayerId:a,_messages:n}=e;if(!r)return"";const l=[];"group"===r.type?(0,o.a)(r).forEach(e=>{(t.id!==r.id||a!==e.layerId)&&l.unshift(this.renderSublayer(e))}):l.push(this.renderSublayer(r));const p=n.join.selectFromItem;return s.qy`<div class=${(0,d.CP)(g)}><div class=${(0,d.CP)(h)}>${p.substring(0,p.indexOf("${"))}<b>${i.title}</b>${p.substring(p.indexOf("}")+1)}</div></div><calcite-list .label=${n.general.layers} selection-mode=single @calciteListChange=${this.onSelectionChange} ${(0,c.K)(this.listNode)}>${l}</calcite-list>`}renderSublayer(e){const{props:t}=this,{addLayerId:i}=t;return s.qy`<calcite-list-item .label=${e.title??""} .value=${e.layerId} .description=${(0,n.g)(e,t)} .selected=${i===e.layerId}></calcite-list-item>`}}(0,r.c)("arcgis-map-config-layer-view-join-add-selection",L)},76456:(e,t,i)=>{i.d(t,{a:()=>a,b:()=>s,g:()=>o,h:()=>n,j:()=>r});var r=(e=>(e[e.ERROR=0]="ERROR",e[e.LOADING=1]="LOADING",e[e.TARGET_SELECTION=2]="TARGET_SELECTION",e[e.ADD_SELECTION=3]="ADD_SELECTION",e[e.BROWSE_LAYER=4]="BROWSE_LAYER",e[e.CONFIG=5]="CONFIG",e[e.CREATE=6]="CREATE",e))(r||{});function s(e,t){const{fields:i,popupTemplate:r}=e,s=r?.fieldInfos,a=i.find(e=>t===e.name);return a&&s?.find(e=>e.fieldName===a.name)?.label||a?.alias||t}function a(e,t){const{fields:i}=e;return i.find(e=>t===e.name)?.type||""}function o(e,t){const{_messages:i}=t;return e.isTable?i.general.table:"point"===e.geometryType||"multipoint"===e.geometryType?i.join.pointLayer:"polyline"===e.geometryType?i.join.polylineLayer:"polygon"===e.geometryType?i.join.polygonLayer:""}function n(e){return e.sourceJSON.ownershipBasedAccessControlForFeatures&&(!1===e.sourceJSON.ownershipBasedAccessControlForFeatures?.allowAnonymousToQuery||!1===e.sourceJSON.ownershipBasedAccessControlForFeatures?.allowOthersToQuery)}}}]);