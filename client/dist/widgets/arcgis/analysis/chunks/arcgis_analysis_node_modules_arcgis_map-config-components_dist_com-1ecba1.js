/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_com-1ecba1.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_com-1ecba1"],{4265:(e,i,t)=>{t.d(i,{a:()=>o,d:()=>s,t:()=>a});const s=(e,i)=>{let t,s="idle";const o=async(...o)=>await new Promise(a=>{switch(s){case"flushed":s="idle",t?(clearTimeout(t),a(e(...o))):a(null);break;case"invoked":clearTimeout(t),s="idle",a(e(...o));break;case"cancelled":clearTimeout(t),s="idle",a(null);break;default:t&&clearTimeout(t),s="pending",t=setTimeout(()=>{s="idle",a(e(...o))},i)}});return o.flush=async function(...e){return s="flushed",await o(...e)},o.invoke=async function(...e){return s="invoked",await o(...e)},o.cancel=async function(...e){return s="cancelled",await o(...e)},o.getStatus=function(){return s},o},o=(e,i)=>{let t;return async(...s)=>await new Promise(o=>{t||(t=setTimeout(()=>{clearTimeout(t),t=void 0,o(e(...s))},i))})};function a(e){return new Promise(i=>setTimeout(i,e))}},24048:(e,i,t)=>{t.r(i),t.d(i,{ArcgisMapConfigSmartMappingColorSlider:()=>b});var s=t(73679),o=t(4395),a=t(54312),r=t(56451),l=t(91802),n=t(22001),d=t(24457),h=t(75430),u=t(1225),c=(t(44345),t(55448),t(62052)),m=(t(34031),t(63438),t(5933),t(89704),t(47550)),p=(t(5294),t(31521),t(23054),t(5077),t(23795),t(17902),t(87420),t(30161),t(81734),t(18423),t(96086),t(91813),t(21255),t(13078),t(21303),t(12627),t(31861)),g=t(65595),S=(t(77462),t(49403),t(66617),t(10628),t(59640),t(64451),t(6176),t(10454),t(28973)),f=(t(94916),t(52554),t(2156),t(4038),t(49851),t(75054),t(15223),t(70169),t(29614),t(52797),t(47207),t(70852),t(48103),t(39423),t(85681),t(18444),t(42411),t(9767),t(38218),t(91914),t(86605),t(68196),t(440),t(46547),t(28927),t(6238),t(7299),t(85643)),x=t(73801),V=t(4265);const v=o.AH`.slider-box{height:320px;.esri-color-slider,.esri-classed-color-slider{min-width:200px}.esri-color-slider .esri-slider .esri-slider__content,.esri-classed-color-slider .esri-slider .esri-slider__content{height:175px}.esri-color-slider__histogram-container,.esri-classed-color-slider__histogram-container{width:85px}.esri-color-slider .esri-slider .esri-slider__label,.esri-color-slider .esri-slider .esri-slider__min,.esri-color-slider .esri-slider .esri-slider__max,.esri-classed-color-slider .esri-slider .esri-slider__label,.esri-classed-color-slider .esri-slider .esri-slider__min,.esri-classed-color-slider .esri-slider .esri-slider__max{text-decoration:underline}.esri-color-slider .esri-slider .esri-slider__label:hover,.esri-color-slider .esri-slider .esri-slider__min:hover,.esri-color-slider .esri-slider .esri-slider__max:hover,.esri-classed-color-slider .esri-slider .esri-slider__label:hover,.esri-classed-color-slider .esri-slider .esri-slider__min:hover,.esri-classed-color-slider .esri-slider .esri-slider__max:hover{border:1px solid #bbb;background-color:#f3f3f3;text-decoration:none;z-index:1}}.slider-box-buttons-front{display:flex}.slider-container{overflow:hidden}`;class b extends x.WF{constructor(){super(...arguments),this.zoomButtonNode=(0,f._)(),this.currentStopValues=[],this.currentBreakValues=[],this.zigzagClick=!1,this.styleSheetStatus="not-loaded",this.smartMappingState=(0,g.u)(),this.histogramStatus=u.s.MISSING,this.statisticsStatus=u.s.MISSING,this.sliderZoomed=!1,this.arcgisSmartMappingColorSliderChange=(0,x.lh)(),this.arcgisSmartMappingColorSliderError=(0,x.lh)()}static{this.properties={histogramStatus:16,statisticsStatus:16,sliderZoomed:16}}static{this.styles=v}async updateStatistics(){this.statisticsStatus=u.s.MISSING,this.statistics=void 0,this.histogramStatus=u.s.MISSING,this.histogram=void 0,this.colorSlider?.destroy(),this.colorSlider=void 0,this.sliderZoomed=!1,this.getStatistics()}async updateColors(){if(this.colorSlider){const e=this.getUpdatedColorSliderConfig(),{zoomOptions:i,...t}=e;this.colorSlider.set(t)}}load(){this.getStatistics()}disconnectedCallback(){super.disconnectedCallback(),this.zoomOptionsHandle?.remove()}divRefHandler(e){if(e)if(this.colorSlider.container)e.append(this.colorSlider.container);else{const i=document.createElement("div");i.classList.add("slider-container"),e.append(i),this.colorSlider.container=i}}prepareColorSlider(){const{statistics:e,histogram:i,histogramStatus:t,smartMappingState:s}=this,{mapView:o}=s,a=(0,u.g)(s),r=(0,u.d)(s),d=["color-age","color-age-size"].includes(r),h=this.getFieldInfo().simpleFieldType===u.J.DATE,g=(0,u.c)(a,"color"),f=(0,u.p)(a,"color");let x,V,v;if(f?(x=(0,u.aC)(f.theme,g.stops),V=f.minSliderValue,v=f.maxSliderValue):(V=a.classBreakInfos[0].minValue,v=a.classBreakInfos[a.classBreakInfos.length-1].maxValue),({min:V,max:v}=(0,u.au)({min:V,max:v})),t===u.s.IN_PROGRESS)return!1;if(!this.colorSlider||g&&this.colorSlider.breaks||!g&&this.colorSlider.stops){this.colorSlider?.destroy(),this.colorSliderBars=[];let t={histogramConfig:{bins:i?.bins,average:Math.round(10*e.avg)/10,standardDeviation:e.stddev,standardDeviationCount:1},min:V??e.min,max:v??e.max};g?(t={...t,...x},h&&!d&&(t.hasTimeData=!0,(0,c.a)(t,o.timeZone)),t.stops=g.stops,t.precision=(0,m.g)(g.stops),t.histogramConfig.barCreatedFunction=i&&p.b.bind(this,g,i,this.colorSliderBars),this.colorSlider=new l.default(t),this.colorSlider&&this.colorSlider.min===this.colorSlider.max&&this.colorSlider.set(t)):(t.histogramConfig.min=a.classBreakInfos[0].minValue,t.histogramConfig.max=a.classBreakInfos[a.classBreakInfos.length-1].maxValue,this.sliderZoomed=!1,t.breaks=(0,S.g)(s),t.precision=(0,m.g)(t.breaks),t.histogramConfig.barCreatedFunction=i&&p.b.bind(this,t.breaks,i,this.colorSliderBars),this.colorSlider=new n.default(t),this.colorSlider&&this.colorSlider.min===this.colorSlider.max&&this.colorSlider.set(t),(0,p.u)(this.colorSlider,this.colorSliderBars,t.breaks,i)),this.createColorSliderChangeEvents()}return(0,u.V)(this.colorSlider)}handleInvertSlider(){const{smartMappingState:e}=this,i=(0,u.g)(e),t=(0,u.c)(i,"color");if((0,u.f)(),(0,p.u)(this.colorSlider,this.colorSliderBars,t||(0,S.g)(e),this.histogram),t){let e=t.stops.map(e=>e.color);e=e.reverse(),t.stops.forEach((i,t)=>{i.color=e[t]})}else{let e=i.classBreakInfos.map(e=>(0,u.i)(e.symbol)||new r.default({r:64,g:64,b:64,a:1}));e=e.reverse(),i.classBreakInfos.forEach((i,t)=>{(0,u.i)(i.symbol)&&(0,u.y)(i.symbol,e[t])})}(0,u.a4)(e);const s=this.getUpdatedColorSliderConfig(),{zoomOptions:o,...a}=s;this.colorSlider.set(a),this.arcgisSmartMappingColorSliderChange.emit()}async handleZoomSlider(e){const{smartMappingState:i}=this;if(this.histogramStatus===u.s.IN_PROGRESS)return;const{statistics:t}=this,s=(0,u.g)(i);this.sliderZoomed=(0,u.V)(e)?!!e:!this.sliderZoomed;const o=(0,u.c)(s,"color");o||(this.sliderZoomed=!1);const a=(0,u.p)(s,"color"),r=this.sliderZoomed?(0,u.av)(o.stops,a?.minSliderValue??t.min,a?.maxSliderValue??t.max):null,l=a?.minSliderValue===a?.maxSliderValue;await this.getHistogram({field:o.field,expression:o.valueExpression,expressionTitle:o.valueExpressionTitle,simpleFieldType:u.J.NUMBER},o.normalizationField??void 0,t,(r?.min||(l?t.min:a?.minSliderValue??t.min))??void 0,(r?.max||(l?t.max:a?.maxSliderValue??t.max))??void 0);const n=this.getUpdatedColorSliderConfig();this.colorSlider.set(n)}getStatistics(){const{smartMappingState:e}=this,{layer:i,useFeatureReduction:t,mapView:s}=e,o=i,a=(0,u.g)(e);let r,l;const n=this.getFieldInfo(),h=(0,u.c)(a,"color"),c=(h?h.normalizationField:a.normalizationField)??void 0,m=(0,u.p)(a,"color")||{};r=m.minSliderValue??a.classBreakInfos?.[0]?.minValue,l=m.maxSliderValue??a.classBreakInfos?.[a.classBreakInfos.length-1]?.maxValue,this.statisticsStatus=u.s.IN_PROGRESS,this.statistics||(0,d.default)({layer:o,view:s,field:n.field??void 0,valueExpression:n.expression??void 0,normalizationField:c,forBinning:t,outStatisticTypes:{exclude:["median"]}}).then(e=>{if(0===e.count){const[i,t]=this.getDefaultDataRange(n),s=m.minSliderValue||i,o=m.maxSliderValue||t;e.min=s,e.max=o,e.avg=(o+s)/2,(0,u.V)(m.minSliderValue)||(m.minSliderValue=s,m.maxSliderValue=o)}else if(!(0,u.V)(e.avg)||!(0,u.V)(e.min)||!(0,u.V)(e.max))return void(this.statisticsStatus=u.s.FAILED);e=(0,u.au)(e),({min:r,max:l}=(0,u.au)({min:r,max:l})),r=r??e.min,l=l??e.max,this.statistics=e,this.statisticsStatus=u.s.SUCCESS,this.getHistogram(n,c,e,r,l)},e=>{console.log(e),this.statisticsStatus=u.s.FAILED})}async getHistogram(e,i,t,s,o){const{layer:a,useFeatureReduction:r,mapView:l}=this.smartMappingState,n=a;if((t=t||this.statistics)&&0!==t.count){this.histogramStatus=u.s.IN_PROGRESS;try{const a=await(0,h.default)({layer:n,view:l,field:e.field??void 0,valueExpression:e.expression??void 0,numBins:50,minValue:(0,u.V)(s)?s:t.min??void 0,maxValue:(0,u.V)(o)?o:t.max??void 0,normalizationField:i,forBinning:r});a&&(this.histogram=a,this.histogramStatus=u.s.SUCCESS)}catch(e){console.log(e),this.histogramStatus=u.s.FAILED}}}async onMinMaxChange(e,i,t){const{statistics:s,smartMappingState:o}=this,a=(0,u.g)(o),r=(0,u.c)(a,"color"),l=(0,u.p)(a,"color")||{};if(!r){const t=a.classBreakInfos[0],s=a.classBreakInfos[a.classBreakInfos.length-1];t.minValue=e,t.label=(0,u.aw)(t,this.colorSlider.precision),s.maxValue=i,s.label=`> ${(0,u.aw)(s,this.colorSlider.precision)}`}"min"===t?l.minSliderValue=e:l.maxSliderValue=i;const n=(0,u.av)(r?.stops,l.minSliderValue,l.maxSliderValue);this.zoomButtonNode.value&&(this.sliderZoomed?this.zoomButtonNode.value.disabled=!1:!n||n.minMaxSame||!(0,u.V)(n.min)&&!(0,u.V)(n.max)?this.zoomButtonNode.value.disabled=!0:this.zoomButtonNode.value.disabled=!1),this.sliderZoomed&&(this.adjustedZoomOptions=this.colorSlider.zoomOptions,"min"===t?(this.adjustedZoomOptions.min=e,this.zoomAdjustment="min"):(this.adjustedZoomOptions.max=i,this.zoomAdjustment="max"));const d=this.getFieldInfo(),h=(r?r.normalizationField:a.normalizationField)??void 0;await this.getHistogram(d,h,s,e,i),(0,p.u)(this.colorSlider,this.colorSliderBars,r||(0,S.g)(o),this.histogram),e===l.minSliderValue&&i===l.maxSliderValue&&(this.sliderZoomed=!1),a.authoringInfo.classificationMethod="manual";const c=this.getUpdatedColorSliderConfig();this.colorSlider.set(c),this.arcgisSmartMappingColorSliderChange.emit()}createColorSliderChangeEvents(){const{smartMappingState:e}=this,i=(0,u.g)(e),t=(0,u.c)(i,"color");this.colorSlider&&(this.zoomOptionsHandle?.remove(),this.zoomOptionsHandle=a.watch(()=>this.colorSlider.zoomOptions,(e,i)=>{this.sliderZoomed&&(i?.min&&!e?.min||i?.max&&!e?.max)&&(this.zigzagClick=!0,this.handleZigzagClick(e))}),this.colorSlider.on("min-change",e=>{t?e.value>this.currentStopValues[0]?(this.colorSlider.stops.forEach((e,i)=>{e.value=this.currentStopValues[i]}),this.onMinMaxChange(this.currentStopValues[0],this.colorSlider.slider.max,"min")):this.onMinMaxChange(e.value,this.colorSlider.slider.max,"min"):e.value>this.currentBreakValues[0].max?this.onMinMaxChange(this.currentBreakValues[0].max,this.colorSlider.slider.max,"min"):this.onMinMaxChange(e.value,this.colorSlider.slider.max,"min")}),this.colorSlider.on("max-change",e=>{t?e.value<this.currentStopValues[this.currentStopValues.length-1]?(this.colorSlider.stops.forEach((e,i)=>{e.value=this.currentStopValues[i]}),this.onMinMaxChange(this.colorSlider.slider.min,this.currentStopValues[this.currentStopValues.length-1],"max")):this.onMinMaxChange(this.colorSlider.slider.min,e.value,"max"):e.value<this.currentBreakValues[this.currentBreakValues.length-1].min?this.onMinMaxChange(this.colorSlider.slider.min,this.currentBreakValues[this.currentBreakValues.length-1].min,"max"):this.onMinMaxChange(this.colorSlider.slider.min,e.value,"max")}),this.colorSlider.on("thumb-change",e=>{if(t){const i=this.getFieldInfo();if((0,u.aE)(i)&&0===e.value)return void this.requestUpdate();const t=this.colorSlider.stops;this.updateRendererStops(t)}else this.updateRendererBreaks(this.colorSlider.breaks)}),this.colorSlider.on("thumb-drag",(0,V.d)(()=>{if(t){const e=this.colorSlider.stops;this.updateRendererStops(e)}else this.updateRendererBreaks(this.colorSlider.breaks)},10)),this.colorSlider.on("segment-drag",(0,V.d)(()=>{if(t){const e=this.colorSlider.stops;this.updateRendererStops(e)}else this.updateRendererBreaks(this.colorSlider.breaks)},10)))}updateRendererStops(e){const{smartMappingState:i}=this,t=(0,u.g)(i),s=(0,u.c)(t,"color"),o=(0,u.p)(t,"color");5===e.length&&e.forEach(e=>e.label=""),s.stops=e,this.currentStopValues=s.stops.map(e=>e.value);const a=(0,u.av)(s?.stops,o.minSliderValue,o.maxSliderValue);this.sliderZoomed?this.zoomButtonNode.value.disabled=!1:!a||a.minMaxSame||!(0,u.V)(a.min)&&!(0,u.V)(a.max)?this.zoomButtonNode.value.disabled=!0:this.zoomButtonNode.value.disabled=!1,(0,p.u)(this.colorSlider,this.colorSliderBars,s,this.histogram),(0,u.a4)(i)}updateRendererBreaks(e){const{smartMappingState:i}=this,t=(0,u.g)(i);t.authoringInfo.classificationMethod="manual",t.classBreakInfos.forEach((i,t)=>{if(i.minValue!==e[t].min||i.maxValue!==e[t].max){i.minValue=e[t].min,i.maxValue=e[t].max;const s=t>0?"> ":"";i.label=`${s} ${(0,u.aw)(i,this.colorSlider.precision)}`,this.currentBreakValues[t].min=e[t].min,this.currentBreakValues[t].max=e[t].max}}),(0,p.u)(this.colorSlider,this.colorSliderBars,(0,S.g)(i),this.histogram),(0,u.a4)(i),this.arcgisSmartMappingColorSliderChange.emit()}getDefaultDataRange(e){if(e.simpleFieldType===u.J.DATE){const e=(new Date).getFullYear();return[new Date(`1/1/${e}`).getTime(),new Date(`12/31/${e}`).getTime()]}return[0,100]}getFieldInfo(){const{smartMappingState:e}=this,i=(0,u.g)(e),t=(0,u.c)(i,"color"),s=(0,u.K)(e,t?t.field:i.field);return{field:t?.field||i.field,expression:t?.valueExpression||i.valueExpression,expressionTitle:t?.valueExpressionTitle||i.valueExpressionTitle,simpleFieldType:s?s.simpleFieldType:u.J.NUMBER}}async handleZigzagClick(e){const{statistics:i,smartMappingState:t}=this,s=(0,u.g)(t),o=(0,u.c)(s,"color"),a=(0,u.p)(s,"color"),r=this.getFieldInfo(),l=(o?o.normalizationField:s.normalizationField)??void 0,n=a.minSliderValue===a.maxSliderValue;await this.getHistogram(r,l,i,e?.min??(n?i.min:a.minSliderValue),e?.max??(n?i.max:a.maxSliderValue)),e||(this.sliderZoomed=!1);const d=this.getUpdatedColorSliderConfig();this.colorSlider.set(d)}getUpdatedColorSliderConfig(){const{statistics:e,histogram:i,histogramStatus:t,sliderZoomed:s,smartMappingState:o}=this,{mapView:a}=o,r=(0,u.g)(o),l=(0,u.d)(o),n=["color-age","color-age-size"].includes(l),d=this.getFieldInfo().simpleFieldType===u.J.DATE,h=(0,u.c)(r,"color"),g=(0,u.p)(r,"color");let f,x,V;if(g?(f=(0,u.aC)(g.theme,h.stops),x=g.minSliderValue,V=g.maxSliderValue):(x=r.classBreakInfos[0].minValue,V=r.classBreakInfos[r.classBreakInfos.length-1].maxValue),({min:x,max:V}=(0,u.au)({min:x,max:V})),t===u.s.IN_PROGRESS)return;const v=this.colorSlider;if("dragging"===v.slider?.state)return;let b={histogramConfig:{bins:i?.bins,average:Math.round(10*e.avg)/10,standardDeviation:e.stddev,standardDeviationCount:1},min:x??e.min,max:V??e.max};return h?(b={...b,...f},b.stops=h.stops,b.precision=(0,m.g)(h.stops),b.hasTimeData=d&&!n,d&&!n&&(0,c.a)(b,a.timeZone),s?this.zigzagClick||(b.zoomOptions=(0,u.av)(h.stops,g?.minSliderValue??e.min,g?.maxSliderValue??e.max)):b.zoomOptions=null,b.histogramConfig.barCreatedFunction=i&&this.colorSliderBars&&p.b.bind(this,h,i,this.colorSliderBars),(0,p.u)(v,this.colorSliderBars,h,i)):(b.breaks=(0,S.g)(o),b.precision=(0,m.g)(b.breaks),b.histogramConfig.barCreatedFunction=i&&this.colorSliderBars&&p.b.bind(this,b.breaks,i,this.colorSliderBars),(0,p.u)(v,this.colorSliderBars,b.breaks,i)),this.sliderZoomed&&this.adjustedZoomOptions&&!this.zigzagClick&&(b.zoomOptions=this.adjustedZoomOptions,"min"===this.zoomAdjustment?(this.colorSlider.slider.min=b.zoomOptions.min,b.zoomOptions.min=null):(this.colorSlider.slider.max=b.zoomOptions.max,b.zoomOptions.max=null)),this.adjustedZoomOptions=void 0,this.zoomAdjustment=void 0,this.zigzagClick=!1,b}render(){const{config:e}=this.smartMappingState;return o.qy`<link rel=stylesheet href=${`${e.jsapiUrl}/themes/light/main.css`} @load=${()=>{this.styleSheetStatus="loaded",this.requestUpdate()}} @error=${()=>{this.styleSheetStatus="failed",this.requestUpdate()}}>${"loaded"===this.styleSheetStatus?this.renderColorSlider():"not-loaded"===this.styleSheetStatus?this.renderColorSliderLoading():null}`}renderColorSlider(){const{statisticsStatus:e,histogramStatus:i,sliderZoomed:t,smartMappingState:s}=this,{_messages:a}=s,r=(0,u.g)(s),l=(0,u.c)(r,"color");if(e===u.s.FAILED||e===u.s.MISSING||l&&1===l.stops.length||!l&&1===r.classBreakInfos.length)return this.colorSlider&&(this.colorSlider.destroy(),this.colorSlider=void 0),"";if(e===u.s.IN_PROGRESS||i===u.s.IN_PROGRESS&&!this.colorSlider)return this.renderColorSliderLoading();{const e=this.prepareColorSlider();let i=!1;if(l&&!t){const e=(0,u.p)(r,"color"),t=(0,u.av)(l.stops,e.minSliderValue,e.maxSliderValue);(t?.minMaxSame||!(0,u.V)(t?.min)&&!(0,u.V)(t?.max))&&(i=!0,this.zoomButtonNode.value&&(this.zoomButtonNode.value.disabled=!0))}return l?this.currentStopValues=l.stops.map(e=>e.value):this.currentBreakValues=r.classBreakInfos.map(e=>({min:e.minValue,max:e.maxValue})),(e||this.colorSlider)&&this.colorSlider.min!==this.colorSlider.max?o.qy`<div class="slider-box"><calcite-label>${a.panels.color.dataRange}</calcite-label><div class="slider-box-buttons-front">${this.renderInvertButton()}${l&&o.qy`<div>&nbsp;</div>${this.renderZoomButton(i)}`||""}</div><div ${(0,f.K)(this.divRefHandler)}></div></div>`:this.colorSlider&&this.colorSlider.min===this.colorSlider.max?"":this.renderColorSliderLoading()}}renderColorSliderLoading(){const{_messages:e}=this.smartMappingState;return o.qy`<div class="slider-box"><calcite-loader .label=${e.loading}></calcite-loader></div>`}renderInvertButton(){const{_messages:e}=this.smartMappingState;return o.qy`<arcgis-map-config-smart-mapping-action .text=${e.panels.color.invertSlider} icon=arrowUpDown @click=${()=>this.handleInvertSlider()}></arcgis-map-config-smart-mapping-action>`}renderZoomButton(e){const{_messages:i}=this.smartMappingState,{sliderZoomed:t}=this;return o.qy`<arcgis-map-config-smart-mapping-action .text=${i.panels.color.zoomSlider} .icon=${t?"magnifyingGlassMinus":"magnifyingGlassPlus"} .disabled=${e} @click=${()=>this.handleZoomSlider()} ${(0,f.K)(this.zoomButtonNode)}></arcgis-map-config-smart-mapping-action>`}}(0,s.c)("arcgis-map-config-smart-mapping-color-slider",b)},31861:(e,i,t)=>{t.d(i,{b:()=>o,u:()=>a});var s=t(56451);function o(e,i,t,s,o){const a=e?.length?l(e,i.bins[s]):r(e.stops,i.bins[s]);a&&(o.setAttribute("fill",a.toHex()),o.setAttribute("opacity",`${Math.max(a.a,.2)}`)),t?.push(o)}function a(e,i,t,s){e&&i?.forEach((i,o)=>{const a=(s||e.histogramConfig)?.bins?.[o],n="breaks"in e?l(t||e.breaks,a):r((t||e).stops,a);n&&(i.setAttribute("fill",n.toHex()),i.setAttribute("opacity",`${Math.max(n.a,.2)}`))})}function r(e,i){if(!i)return;const t=(i.maxValue-i.minValue)/2+i.minValue;let o=e[0],a=e[e.length-1];const r=o.value,l=a.value;if(t<r)return o.color;if(t>l)return a.color;const n=e.filter(e=>e.value===t);if(n.length>0)return n[0].color;o=null,a=null,e.forEach((i,s)=>{!o&&!a&&i.value>=t&&(o=e[s-1],a=i)});const d=(t-o.value)/(a.value-o.value);return s.default.blendColors(o.color,a.color,d)}function l(e,i){if(!i)return;const t=(i.maxValue-i.minValue)/2+i.minValue;let s=e[0],o=e[e.length-1];if(t<s.min||t>o.max)return;const a=e.filter(e=>e.min===t);return a.length>0?a[0].color:(s=e[e.length-1],o=null,e.forEach((i,a)=>{!o&&i.min>=t&&(s=e[a-1],o=i)}),s.color)}},47550:(e,i,t)=>{t.d(i,{a:()=>d,b:()=>n,g:()=>m,u:()=>l});var s=t(5294),o=t(52797),a=(t(54312),t(44345),t(55448),t(34031),t(63438),t(5933),t(28927),t(83368),t(89704),t(66228)),r=(t(56451),t(31521),t(23054),t(5077),t(23795),t(17902),t(87420),t(30161),t(81734),t(1225));t(83552),t(77462),t(49403),t(10281),t(83930),t(66617),t(10628),t(59640),t(64451),t(6176),t(10454),t(29614),t(94916),t(52554),t(2156),t(4038),t(49851),t(75054),t(15223),t(70169),t(47207),t(70852),t(48103),t(39423),t(85681),t(18444),t(42411),t(9767),t(38218),t(91914),t(86605),t(68196),t(440),t(46547),t(6238),t(7299);function l(e,i){const t=(0,r.g)(e),l=s.clone(t.classBreakInfos);t.classBreakInfos=[],l.forEach((e,s)=>{e=function(e,i,t,s){if((0,a.i)(i)&&0!==i)if(i<1){const a=Math.round(1/i);e.minValue="first"===s?Math.floor(e.minValue/i)/a:Math.round(e.minValue/i)/a,e.maxValue="last"===s?Math.ceil(e.maxValue/i)/a:Math.round(e.maxValue/i)/a,e.label=`${t>0?"> ":""}${e.minValue.toLocaleString(o.getLocale(),{maximumSignificantDigits:15})} - ${e.maxValue.toLocaleString(o.getLocale(),{maximumSignificantDigits:15})}`}else e.minValue="first"===s?Math.floor(e.minValue/i)*i:Math.round(e.minValue/i)*i,e.maxValue="last"===s?Math.ceil(e.maxValue/i)*i:Math.round(e.maxValue/i)*i,e.label=`${t>0?"> ":""}${e.minValue.toLocaleString()} - ${e.maxValue.toLocaleString()}`;return e}(e,i,s,0===s?"first":s===l.length-1?"last":void 0),t.addClassBreakInfo({minValue:e.minValue,maxValue:e.maxValue,symbol:e.symbol,label:e.label})})}function n(e,i){const t=(0,r.g)(e).classBreakInfos;let s=i,o=Number.POSITIVE_INFINITY;t.forEach(e=>{s||(s=Math.max(h(e.minValue),h(e.maxValue))),o=Math.min(o,e.maxValue-e.minValue)});const a=[];return o>1e7?(a.push(1e7),a.push(1e6),a.push(1e5),a.push(1e4),a.push(1e3),a.push(100),a.push(10),s>0&&a.push(1),s>1&&a.push(.1),s>2&&a.push(.01)):o>1e6?(a.push(1e6),a.push(1e5),a.push(1e4),a.push(1e3),a.push(100),a.push(10),s>0&&a.push(1),s>1&&a.push(.1),s>2&&a.push(.01)):o>1e5?(a.push(1e5),a.push(1e4),a.push(1e3),a.push(100),a.push(10),s>0&&a.push(1),s>1&&a.push(.1),s>2&&a.push(.01)):o>1e4?(a.push(1e4),a.push(1e3),a.push(100),a.push(10),s>0&&a.push(1),s>1&&a.push(.1),s>2&&a.push(.01)):o>1e3?(a.push(1e3),a.push(100),a.push(10),s>0&&a.push(1),s>1&&a.push(.1),s>2&&a.push(.01),s>3&&a.push(.001)):o>100?(a.push(100),a.push(10),s>0&&a.push(1),s>1&&a.push(.1),s>2&&a.push(.01),s>3&&a.push(.001),s>4&&a.push(1e-4),s>5&&a.push(1e-5)):o>10?(a.push(10),s>0&&a.push(1),s>1&&a.push(.1),s>2&&a.push(.01),s>3&&a.push(.001),s>4&&a.push(1e-4),s>5&&a.push(1e-5),s>6&&a.push(1e-6)):o>1?(s>0&&a.push(1),s>1&&a.push(.1),s>2&&a.push(.01),s>3&&a.push(.001),s>4&&a.push(1e-4),s>5&&a.push(1e-5),s>6&&a.push(1e-6)):o>.1?(s>1&&a.push(.1),s>2&&a.push(.01),s>3&&a.push(.001),s>4&&a.push(1e-4),s>5&&a.push(1e-5),s>6&&a.push(1e-6)):o>.01?(s>2&&a.push(.01),s>3&&a.push(.001),s>4&&a.push(1e-4),s>5&&a.push(1e-5),s>6&&a.push(1e-6)):o>.001?(s>3&&a.push(.001),s>4&&a.push(1e-4),s>5&&a.push(1e-5),s>6&&a.push(1e-6),s>7&&a.push(1e-7)):o>1e-4?(s>4&&a.push(1e-4),s>5&&a.push(1e-5),s>6&&a.push(1e-6),s>7&&a.push(1e-7),s>8&&a.push(1e-8)):o>1e-5&&(s>5&&a.push(1e-5),s>6&&a.push(1e-6),s>7&&a.push(1e-7),s>8&&a.push(1e-8),s>9&&a.push(1e-9)),a}function d(e){const i=(0,r.g)(e);let t=1e10;return i.classBreakInfos.forEach(e=>{t=Math.min(t,u(e.minValue)),t=Math.min(t,u(e.maxValue))}),t}function h(e){let i=1;for(;Math.round(e*i)/i!==e;)i*=10;return Math.log(i)/Math.LN10}function u(e){let i=1e-8;for(;c(Math.round(e/i)*i)===e;)i*=10;return i/10}function c(e){return Number.parseFloat(e.toPrecision(12))}function m(e){let i=0;e.forEach(e=>{(0,a.i)(e.value)?i=Math.max(h(c(e.value)),i):((0,a.i)(e.minValue)&&(i=Math.max(h(c(e.minValue)),i)),(0,a.i)(e.maxValue)&&(i=Math.max(h(c(e.maxValue)),i)),(0,a.i)(e.min)&&(i=Math.max(h(c(e.min)),i)),(0,a.i)(e.max)&&(i=Math.max(h(c(e.max)),i)))}),i=Math.min(i,3);const t=e[0],s=e[e.length-1],o=Math.min(t.minValue??t.min??t.value,s.minValue??s.min??s.value),r=Math.max(t.maxValue??t.max??t.value,s.maxValue??s.max??s.value)-o;return r/e.length<2e-7?i=8:r/e.length<2e-6?i=7:r/e.length<2e-5?i=6:r/e.length<2e-4?i=5:r/e.length<.002?i=4:r/e.length<.02?i=3:r/e.length<.2?i=Math.max(i,2):r/e.length<2&&(i=Math.max(i,1)),Math.round(i)}},62052:(e,i,t)=>{t.d(i,{a:()=>o,b:()=>r,d:()=>l,u:()=>a});var s=t(52797);function o(e,i){e.labelFormatFunction=e=>n(e,i,"short-date"),e.inputFormatFunction=e=>n(e,i,"short-date"),e.inputParseFunction=e=>function(e,i){if(!e)return e;let t;if(i&&"system"!==i)if("unknown"===i)t=e;else{const s=new Date;t=e+(new Date(s.toLocaleString("en-US",{timeZone:"utc"})).getTime()-new Date(s.toLocaleString("en-US",{timeZone:i})).getTime())}else t=e+6e4*(new Date).getTimezoneOffset();return console.log("mapTZToUTC",e," - ",new Date(e).toISOString()," - ",new Date(t).toISOString()),t}(Date.parse(e),i)}function a(e,i){let t;if(i&&"system"!==i)if("unknown"===i)t=new Date(e).toISOString();else{const s=(new Date).getTimezoneOffset(),o=new Date(e).toLocaleString("en-US",{timeZone:i});t=new Date(new Date(o).getTime()-6e4*s).toISOString()}else{const i=(new Date).getTimezoneOffset();t=new Date(e-6e4*i).toISOString()}return t}function r(e,i,t){let s;if(i&&"system"!==i)if("unknown"===i)s=new Date(e).toISOString();else{const t=(new Date).getTimezoneOffset(),o=new Date(e).toLocaleString("en-US",{timeZone:i});s=new Date(new Date(o).getTime()-6e4*t).toISOString()}else{const i=(new Date).getTimezoneOffset();s=new Date(e-6e4*i).toISOString()}return s=t?s.substring(11,19):s.substring(11,16),s}function l(e,i){let t,s=new Date(e);if(s=new Date(s.getTime()-6e4*s.getTimezoneOffset()),i&&"system"!==i)if("unknown"===i)t=s.getTime();else{const e=new Date(s.toLocaleString("en-US",{timeZone:"utc"})).getTime()-new Date(s.toLocaleString("en-US",{timeZone:i})).getTime();t=s.getTime()+e}else{const e=(new Date).getTimezoneOffset();t=s.getTime()+6e4*e}return t}function n(e,i,t){let o;return o="unknown"===i?s.formatDate(e,{...s.convertDateFormatToIntlOptions(t),timeZone:"utc",timeZoneName:"shortOffset"}):s.formatDate(e,{...s.convertDateFormatToIntlOptions(t),timeZone:i}),o}}}]);