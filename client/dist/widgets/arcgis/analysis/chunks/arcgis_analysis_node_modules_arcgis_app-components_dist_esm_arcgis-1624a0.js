/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-1624a0.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-1624a0"],{3826:(e,t,i)=>{i.d(t,{a:()=>s,b:()=>a,c:()=>n,d:()=>r});const r=(0,i(37762).c)({typeKeywords:[],customParameters:[],analyzedLocationTypes:[],allowStoredAuth:!0,isSecured:null,checkAuth:!1}),s=r.state,a=r.state,n=r.state},26854:(e,t,i)=>{i.d(t,{a:()=>c,c:()=>o,g:()=>a,h:()=>s,i:()=>n,r:()=>l});var r=i(15332);function s(e){const t=document.createElement("textarea");return t.innerHTML=e,t.innerText}function a(e){return function(e){return null==e?void 0:e.replace(/&#10;&#13;|&#10;|&#13;|\r\n|\r|\n/g,"<br>")}(function(e){return null==e?void 0:e.replace(/(?:\r)/g,"&#10;").replace(/(?:\n)/g,"&#13;")}(function(e){return null==e?void 0:e.replace(/(https?:\/\/[^\s]+)/g,e=>`<a href="${e}" target="_blank">${e}</a>`)}(function(e){return null==e?void 0:e.replace(/(?:&#10;)/g,"\r").replace(/(?:&#13;)/g,"\n")}(e))))}function n(e){return e.replace(/\$\{startSup\}/g,"<sup>").replace(/\$\{endSup\}/g,"</sup>")}function l(e,t,i){return e.replace(/\$\{startLink\}/g,`<calcite-link label="${i}" href="${t}" target="_blank">`).replace(/\$\{endLink\}/g,"</calcite-link>")}function c(e){return e.replace(/\$\{startStrong\}/g,"<strong>").replace(/\$\{endStrong\}/g,"</strong>")}function o(e){return(0,r.s)((null==e?void 0:e.trim())||"").replace(/[!*+\-&|()[\]{}^~?:"\\]/g,"\\$&")}},46904:(e,t,i)=>{i.d(t,{a:()=>n,b:()=>a,c:()=>o,d:()=>d,e:()=>p,f:()=>m,g:()=>h,i:()=>l,u:()=>c});i(93814);var r=i(41473);function s(e){var t;return!!(null===(t=e.owner)||void 0===t?void 0:t.toLowerCase().includes("esri"))}function a(e){var t;return s(e)&&!!(null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Requires Credits"))}function n(e){var t;return s(e)&&!!(null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Requires Subscription"))}function l(e,t){return e.owner===t.username}function c(e,t){return l(e,t)||function(e,t){var i;if(null!=e.isAdmin)return!!e.isAdmin;const r=e.owner,s="admin"===e.itemControl,a=["esri_livingatlas","esri_demographics","esri_boundaries"];if((null===(i=e.portal)||void 0===i?void 0:i.isPortal)&&!l(e,t)&&s&&r.includes("esri_")&&!a.includes(r))return!1;return s}(e,t)}const o=(e,t)=>!!t.orgId&&e.every(e=>e.isOrgItem),d=(e,t)=>`${(0,r.a)(t)}item.html?id=${e}`,p=(e,t)=>`${(0,r.g)(t)}/content/users/${e}`,m=e=>e.reduce((e,t)=>(e[t.owner]=e[t.owner]?[...e[t.owner],t.id]:[t.id],e),{}),h=(e,t)=>`${(0,r.a)(t)}content/items/${e}`},50178:(e,t,i)=>{i.r(t),i.d(t,{arcgis_new_item_pages_developer_credentials_item_access:()=>h});var r=i(87849),s=i(59317),a=i(41473),n=i(26854),l=i(83692),c=i(3826),o=i(95878),d=i(10578),p=i(1654),m=i(4429);i(37762),i(15332),i(931),i(93814),i(54251),i(29599),i(46904);const h=class{constructor(e){(0,r.r)(this,e),this.newItemUpdatePage=(0,r.c)(this,"newItemUpdatePage",7),this.newItemSetButtonState=(0,r.c)(this,"newItemSetButtonState",7),this.workflowComplete=(0,r.c)(this,"workflowComplete",7),this.handleItemBrowserSelect=(0,m.f)(async e=>{var t,i,r;const{developerCredentialsType:s}=c.a,n=[],d=[...e.detail],p=(0,a.g)(this.portal),m=e=>e.owner===this.user.username;if("apiToken"===s){this.newItemSetButtonState.emit({targetButton:"primary",state:{loading:!0,disabled:!0}});for(let e=0;e<d.length;++e){const s=d[e];if("Web Map"===s.type){const e=`${p}content/items/${s.id}/data`,a=await(0,l.r)(e);null===(t=a.baseMap.baseMapLayers)||void 0===t||t.forEach(e=>{e.itemId&&n.push(e.itemId)}),null===(i=a.operationalLayers)||void 0===i||i.forEach(e=>e.itemId&&n.push(e.itemId)),null===(r=a.tables)||void 0===r||r.forEach(e=>e.itemId&&n.push(e.itemId))}}if(n.length){const e={q:`id:(${n.join(" OR ")})`,num:100},t=await(0,l.r)(`${p}search`,e);t.results.length>0&&t.results.forEach(e=>{return t=e,!d.some(e=>((e=>"id"in e)(e)?e.id:e.item.id)===t.id)&&m(e)&&d.push(e);var t})}}if(d.length>100)return this.newItemSetButtonState.emit({targetButton:"primary",state:{loading:!1,disabled:!0}}),void(this.alertInfo={title:this.i18n.errors.itemLimitWarningTitle,description:this.i18n.errors.itemLimitWarningDescription,kind:"warning"});this.newItemSetButtonState.emit({targetButton:"primary",state:{loading:!1,disabled:!1}}),this.selectedItems=[...d],o.u.nextText=this.selectedItems.length>0?this.nextTextOnSelectItems:"skip"},500),this.selected=void 0,this.selectedItems=[],this.items=void 0,this.isLoading=!1,this.pagination=void 0,this.showItemBrowser=!1,this.alertInfo=void 0}componentWillLoad(){const{portal:e,user:t}=s.c,{selectedItemPrivileges:i,selectedAppPrivileges:r}=c.a;this.i18n=o.u.i18n.developerCredentialsItemAccess,this.privilegesI18n=o.u.i18n.developerCredentialsPrivilegePicker,this.portal=e,this.user=t,this.selectedItems=i||[],this.selectedAppPrivileges=r,this.isGlobalPrivileges=r.includes("features:user:edit")&&r.includes("features:user:fullEdit"),this.nextTextOnSelectItems=this.isGlobalPrivileges?"updateItemAccess":"addItems",o.u.nextText=this.selectedItems.length>0?this.nextTextOnSelectItems:"skip"}async handleNext(){const{selectedAppPrivileges:e,developerCredentialsType:t}=c.a;"apiToken"!==t||e.length||this.selectedItems.length||(0,p.r)(s.c.subscriptionInfo)?(c.a.selectedItemPrivileges=this.selectedItems,c.a.formattedItemPrivileges=(0,d.x)(this.selectedItems),this.newItemUpdatePage.emit("itemProperties")):this.alertInfo={title:this.i18n.errors.errorTitle,description:this.i18n.errors.emptyPrivilegesError}}handleButtonClick(){this.showItemBrowser=!this.showItemBrowser}renderAppPrivilegesSummary(){const{user:e,portal:t,config:i}=s.c,{subscriptionType:a,selectedAppPrivileges:n}=c.a,l=(0,p.s)(n);return(0,r.h)("arcgis-privileges-picker",{readonly:!0,privilegesToShow:l,portal:t,mode:a,user:e,portalConfig:i,value:l,limitToUserPrivileges:!0,isPersonalAPIToken:!0})}render(){const{portal:e,user:t,pagination:i,selectedItems:a,showItemBrowser:l,isGlobalPrivileges:o,i18n:d,privilegesI18n:m,alertInfo:h,selectedAppPrivileges:u}=this,{breadcrumbs:g}=c.a,f=(0,p.d)(s.c.subscriptionInfo),b=(0,p.t)(u),v=b?d.restrictItemAccess:d.grantItemAccess,w=b?d.restrictItemAccess:d.browseItems;let y={openType:"general",closedType:"general"};switch(!0){case o&&f:y={openType:"global",closedType:"globalWithLocationPlatform"};break;case o:y={openType:"global",closedType:"global"};break;case b:y={openType:"itemPrivilegesEnabled",closedType:"itemPrivilegesEnabled"}}return(0,r.h)(r.H,{key:"ef570bfc09c36954c316d0e42a62bd23b07874a0"},(0,r.h)("div",{key:"6e06fc5446f24a6a21e202e1e53fbe816a61bd8b",class:"breadcrumbs"},(0,r.h)("arcgis-new-item-breadcrumbs",{key:"7f8edcfe66acf2fa9cf109a98ea583d2310c8a7c",breadcrumbs:g})),!l&&(0,r.h)("div",{key:"be800e62b11a9c9143814b5028f6da9440fa2fd8",class:"header-wrap"},(0,r.h)("calcite-label",{key:"789e1194f795cf82a54a38f730c6490c823bc1ac",class:"header-container",layout:"inline"},b&&(0,r.h)("calcite-icon",{key:"91743ad4a507ac484144c83e8f3eaa55265634b3",scale:"s",class:"global-access-icon",icon:"exclamation-mark-triangle"}),(0,r.h)("p",{key:"24ac70b8026e199a7d5a6ff49cda8994e3d9291d",class:"header"},v)),(0,r.h)("p",{key:"1088735150d164393211265cc44f20a73cfed1db",class:"description",innerHTML:(0,n.a)(d.closedBrowserDescription[y.closedType])}),(0,r.h)("p",{key:"8e37258a21b952c2d32f6368998c5c0f5ee90286",class:"credentials-type-notice"},m.credentialsTypeNotice),(0,r.h)("div",{key:"1dc58477ff73075d490ae43e5e3150c511f129d3",class:"items-selected-container"},(0,r.h)("p",{key:"164609e9445a5e059c495d2c5dfa3e7df08ba983",class:"selected-items-text",innerHTML:d.itemsSelected.replace("${startBoldText}","<b>").replace("${endBoldText}","</b>").replace("${itemsLength}",`${a.length}`)}),(0,r.h)("calcite-button",{key:"03647c662232859f62f34d95c7e92216a7a73db4",iconStart:"list-radio",iconFlipRtl:"start",appearance:"outline-fill",onClick:()=>this.handleButtonClick()},w)),b&&(0,r.h)("p",{key:"a614b053364edd601be0d77156e17d621d60ea2f",class:"privilege-removal-text"},d.privilegeRemovalNotice),u.length>0&&!(0,p.r)(s.c.subscriptionInfo)&&b&&(0,r.h)("div",{key:"804cb6bac3a135302fcd5133e15c6e4e56bbdd2e"},this.renderAppPrivilegesSummary())),l&&(0,r.h)("div",{key:"1150fe33b376d0e882b6ba5bdfc12a1d42475beb",class:"open-item-browser h-full"},(0,r.h)("div",{key:"b4fad46dba09b90eaf7c2e00fb5ed55508f619c6",class:"header-wrap"},(0,r.h)("p",{key:"7f19a2372fba9af1d8efe878fbb35808634f574b",class:"header"},v),(0,r.h)("p",{key:"b5eb59b9bbb264c0000053fd382313236d9c6377",class:"description",innerHTML:(0,n.a)(d.openBrowserDescription[y.openType])}),(0,r.h)("p",{key:"f2f643ea7c62d2b152428daf80c80b2c370839cf",class:"credentials-type-notice"},m.credentialsTypeNotice)),(0,r.h)("div",{key:"13a74d903cce650dc91e9902fe6ed87fad322913",class:"item-browser"},(0,r.h)("arcgis-item-browser",{key:"6e27d9c44f6d12df93c8dae6fa865d35353561a4",class:"h-full min-h-0",onArcgisItemBrowserUpdate:e=>{const{results:t,num:i,start:r,total:s}=e.detail;this.items=t,this.selectedItems=a,this.pagination={start:r,num:i,total:s}},onArcgisItemBrowserSelect:e=>{const t=e.detail[0];t&&(this.selected={id:t.id,name:t.title}),this.handleItemBrowserSelect(e)},portal:e,user:t,selection:"multiple",bucket:"my",q:'(-tags: "Velocity") AND (-tags: "Realtime") AND (-listed:true OR -implicitlyListed:true)',selectedItems:a,height:"full",hidePreviewFooters:!0},(0,r.h)("arcgis-item-browser-top-bar",{key:"d8afb14a1ffea4d2490c5c4540c4e874479a97d3",slot:"top-bar"},(0,r.h)("arcgis-item-browser-search",{key:"210f143604f86959acf568bf6fbd4d9e92c6cec9",slot:"search",term:"",placeholder:d.search})),(0,r.h)("arcgis-item-browser-sort",{key:"1c1c4feeba37444726ca463459823141d741c126",options:["modified","title","relevance","owner"],slot:"sort"}),(0,r.h)("arcgis-item-browser-content",{key:"a5650ef458785e71d3df5d6de3fdcf8750651ab9",slot:"content"},this.items&&(0,r.h)("arcgis-item-browser-table",{key:"d3add57e06b9e7fd663c0f48bb33d17b85083e7d"},(this.items||[]).map((i,s)=>(0,r.h)("arcgis-item-browser-table-row",{key:s,index:s,item:i,name:"test",preview:"title",allowSharing:!0,portal:e,user:t})))),(0,r.h)("arcgis-item-browser-pagination",{key:"d89e0d4d47ddd028ddaa767321c3e340ea04fbaf",total:null==i?void 0:i.total,start:null==i?void 0:i.start,num:null==i?void 0:i.num,slot:"pagination"})))),(0,r.h)("arcgis-new-item-alert",{key:"71b1b18e419038d3054a6de89822488e69da6351",heading:null==h?void 0:h.title,description:null==h?void 0:h.description,active:!!h,kind:null==h?void 0:h.kind,onAlertDismiss:()=>this.alertInfo=null}))}get hostElement(){return(0,r.a)(this)}};h.style=":host{height:100%;overflow:hidden;background-color:var(--calcite-color-foreground-1);--arcgis-browser-sort-max-height:calc(100vh - 600px);--arcgis-browser-items-max-height:calc(100vh - 650px)}.header{padding:0px;font-size:1rem;font-weight:500;color:var(--calcite-color-text-1)}.header-wrap{padding-left:1rem;padding-right:1rem;padding-bottom:1rem;padding-top:0.5rem}.header-container{--calcite-label-margin-bottom:0}.description{margin-top:0px;margin-bottom:0px;font-size:0.875rem}.global-access-icon{--calcite-ui-icon-color:var(--calcite-color-status-warning)}.items-selected-container{display:flex;align-items:center}.selected-items-text{margin-inline-end:5rem}.credentials-type-notice{margin-top:0.25rem;font-size:0.875rem;line-height:1.5}.open-item-browser{display:flex;height:100%;flex-direction:column}.item-browser{height:100%;min-height:0px;flex:1 1 0%;overflow:hidden}.app-privileges-notice{margin-left:0.75rem;margin-right:0.75rem}.breadcrumbs{margin-inline-start:0.75rem;margin-top:0.75rem}.privilege-removal-text{padding-bottom:0.25rem}"},95878:(e,t,i)=>{i.d(t,{a:()=>r,u:()=>s});const r=(0,i(37762).c)({nextText:"next",cancelText:"cancel",workflow:"content",scale:"m",disableScroll:!1,onlyHosted:!1,featureFlags:{}}),s=r.state}}]);