/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-1d3a7b.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-1d3a7b"],{23208:(e,l,a)=>{a.d(l,{a:()=>i,b:()=>y,c:()=>d,d:()=>p,g:()=>f,r:()=>c,s:()=>I,u:()=>t});const s={facilityLayer:{facilityIdField:"FACILITY_ID",siteIdField:"SITE_ID",nameField:"NAME"},levelLayer:{levelIdField:"LEVEL_ID",facilityIdField:"FACILITY_ID",longNameField:"NAME",shortNameField:"NAME_SHORT",levelNumberField:"LEVEL_NUMBER",verticalOrderField:"VERTICAL_ORDER"},siteLayer:{siteIdField:"SITE_ID",nameField:"NAME"}};let r;const o=e=>{const l=e?.map;return r=r||l?.floorInfo||{...s},r.siteLayer=r?.siteLayer?.layerId?r.siteLayer:null,r},i=e=>{const l=e?.map,a=o(e);l&&n(a)?l.set("floorInfo",a):c(e)},t=(e,l)=>{const a=o(l),{name:r}=e,t=e.layer;if(t&&"floorInfo"in t&&"levelLayer"===r){const e={floorField:s.levelLayer.levelIdField};t.floorInfo=e}if(t){const e="sublayer"===t.type;a[r]={...s[r]},a[r]&&(a[r].layerId=e?t.layer?.id:t.id,a[r].sublayerId=e?t.id:void 0)}else a[r]=void 0;i(l)},c=e=>{const l=e?.map;l&&(l.floorInfo=null)},n=e=>!(!e?.facilityLayer?.layerId||!e?.levelLayer?.layerId||e?.siteLayer&&!e?.siteLayer.layerId),d=e=>{const l=s[e];return Object.values(l)},f=e=>{const{map:l}=e,a=l?.allLayers;let s=[];return a?.forEach(e=>{const{type:l,floorInfo:a}=e;"map-image"===l?s=s.concat(e.allSublayers.filter(e=>e.fieldsIndex&&!e?.floorInfo).toArray()):!a&&["feature","oriented-imagery"].includes(l)&&s.push(e)}),s},y=async e=>{const{map:l}=e,a=l?.allLayers?.map(async e=>await m(e)).filter(e=>"failed"!==e?.loadStatus),s=a?await Promise.all(a):[];let r=[];return s.forEach(e=>{const{type:l,geometryType:a}=e;"map-image"===l?r=r.concat(e.allSublayers.filter(e=>e.fieldsIndex&&"esriGeometryPolygon"===e.sourceJSON?.geometryType).toArray()):"feature"===l&&"polygon"===a&&r.push(e)}),r},m=async e=>(typeof e.loadAll<"u"?await e.loadAll():await e.load(),e),p=(e,l)=>{const a=l.map?.allLayers,s=o(l),r=s?.[e]?.layerId,i=s?.[e]?.sublayerId;let t=r?a?.find(e=>e.id===r):null;return"map-image"===t?.type&&(t=t.allSublayers.find(e=>e.id===i)),t},I=e=>{const{layer:l}=e;let a;if(a="arcgis-field-list"===e?.localName||"arcgis-map-config-floor-field-list"===e?.localName?Object.values(e.selection)[0]:e?.field,a){const e=l.floorInfo||{};e.floorField=a.name,l.set("floorInfo",e)}}},88953:(e,l,a)=>{a.r(l),a.d(l,{ArcgisMapConfigFloorSelectFields:()=>c});var s=a(73679),r=a(4395),o=a(23208),i=a(73801);const t=r.AH`.select-field-panel{padding:12px;background-color:#fff}.select-message{margin:14px 0}`;class c extends i.WF{static{this.properties={layers:0,_messages:0,view:0}}static{this.styles=t}async commit(){(this.el.shadowRoot?Array.from(this.el.shadowRoot.querySelectorAll("arcgis-map-config-floor-field-select")):[]).forEach(e=>(0,o.s)(e))}render(){const{layers:e}=this;return r.qy`<div class="select-field-panel"><calcite-label class="select-message">${this._messages.selectMessage}</calcite-label>${e.map(e=>this.renderSelect(e))}</div>`}renderSelect(e){return r.qy`<arcgis-map-config-floor-field-select .layer=${e}></arcgis-map-config-floor-field-select>`}}(0,s.c)("arcgis-map-config-floor-select-fields",c)}}]);