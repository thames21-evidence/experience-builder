/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_chu-91047e.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_chu-91047e"],{42855:(e,t,r)=>{r.d(t,{a:()=>s,f:()=>a,l:()=>n,s:()=>o});var a=(e=>(e.expression="expression/",e.raster="Raster.",e.relationship="relationships/",e))(a||{}),n=(e=>(e.cluster="cluster",e.feature="feature",e.mapNotes="mapNotes",e))(n||{}),o=(e=>(e.catalog="catalog",e.catalogFootprint="catalog-footprint",e.csv="csv",e.feature="feature",e.geojson="geojson",e.imagery="imagery",e.imageryTile="imagery-tile",e.knowledgeGraphSublayer="knowledge-graph-sublayer",e.mapImage="map-image",e.ogcFeature="ogc-feature",e.orientedImagery="oriented-imagery",e.parquet="parquet",e.scene="scene",e.stream="stream",e.subtype="subtype",e.tile="tile",e.voxel="voxel",e.wcs="wcs",e.wfs="wfs",e.wms="wms",e))(o||{}),s=(e=>(e.bigInteger="big-integer",e.blob="blob",e.date="date",e.dateOnly="date-only",e.double="double",e.globalId="global-id",e.guid="guid",e.integer="integer",e.long="long",e.number="number",e.oid="oid",e.single="single",e.smallInteger="small-integer",e.string="string",e.timeOnly="time-only",e.timestampOffset="timestamp-offset",e))(s||{})},60300:(e,t,r)=>{function a(e){return e?e/72*96:0}function n(e){return e?72*e/96:0}r.d(t,{a:()=>n,p:()=>a})},66228:(e,t,r)=>{r.d(t,{a:()=>w,b:()=>E,c:()=>R,d:()=>_,e:()=>k,f:()=>T,g:()=>g,h:()=>h,i:()=>y,j:()=>m,k:()=>v,l:()=>I,m:()=>O,n:()=>d,o:()=>S,p:()=>Q,q:()=>M,r:()=>F,s:()=>x,t:()=>$,u:()=>b});var a=r(63438),n=r(18423),o=r(96086),s=r(91813),i=r(21255),u=r(13078),l=r(21303),c=r(12627),f=r(42855);const d=["feature","scene","geojson","csv","subtype-sublayer","oriented-imagery","catalog-footprint","sublayer"],p=["feature"];function y(e){return null!=e}function m(e,t,r){const a=t.fieldName;if(a.includes(f.f.expression)){const e=r.get(a);return e?.title?e.title:a}return x(e)&&e.getFieldConfiguration(a)?e.getFieldAlias(a)||a:t.label||a}async function g(e){return new Map((await v(e)).filter(e=>e.visible).map(e=>[e.name,e]))}function h(e){const t=new Map;return e?.expressionInfos&&e.expressionInfos.forEach(e=>{const r=`${f.f.expression}${e.name}`;t.set(r,e)}),t}function w(e){return"map-image"===e?.layer?.type?f.s.mapImage:"subtype-sublayer"===e?.type?f.s.subtype:"tile"===e?.layer?.type?f.s.tile:"scene"===e?.type?f.s.scene:"ogc-feature"===e?.type?f.s.ogcFeature:"imagery"===e?.type?f.s.imagery:"imagery-tile"===e?.type?f.s.imageryTile:"wfs"===e?.type?f.s.wfs:"wcs"===e?.type?f.s.wcs:"wms"===e?.layer?.type?f.s.wms:"csv"===e?.type?f.s.csv:"geojson"===e?.type?f.s.geojson:"stream"===e?.type?f.s.stream:"oriented-imagery"===e?.type?f.s.orientedImagery:"catalog"===e?.type?f.s.catalog:"catalog-footprint"===e?.type?f.s.catalogFootprint:"knowledge-graph-sublayer"===e?.type?f.s.knowledgeGraphSublayer:"voxel"===e?.type?f.s.voxel:"parquet"===e?.type?f.s.parquet:f.s.feature}function b(e){const t=w(e);let r;return t===f.s.wms||t===f.s.mapImage?r=e?.layer.version:(t===f.s.imagery||t===f.s.feature||t===f.s.scene)&&(r=e.version),Number.parseFloat(r)}function x(e){return"fieldConfigurations"in e&&p.includes(e.type)}async function v(e){return await new Promise((t,r)=>{switch(w(e)){case f.s.feature:case f.s.ogcFeature:case f.s.stream:t(e.fields);break;case f.s.mapImage:{const a=e,n=a?.layer;n?.portalItem&&n.url.includes("https://demographics")&&n.url.includes(".arcgis.com")?n.portalItem?.fetchData().then(e=>{if(e?.thematicGroup){const r=new Map(a.fields.map(e=>[e.name,e])),n=e.thematicGroup.fieldNames,o=[];n.forEach(e=>{r.has(e)&&o.push(r.get(e))}),t(o)}else t(a.fields)}).catch(e=>{r(new Error(e))}):t(a.fields);break}case f.s.imagery:case f.s.imageryTile:case f.s.wcs:t(e.rasterFields);break;default:t("fields"in e?e.fields??[]:[])}})}function S(e){if(e)switch(e.type){case"point":return e;case"extent":return e.center;case"polygon":return e.centroid;case"multipoint":case"polyline":return e.extent?.center;default:return}}function O(e){return Number((100*(1-e)).toFixed(1))}function $(e){return Number((1-e/100).toFixed(3))}const _=(e,t)=>{const r=[];return e?.fieldInfos?.forEach(e=>{e.fieldName?.includes(f.f.expression)||r.push({name:e.fieldName,alias:e.label,type:"string"})}),r},E=async(e,t)=>{const r=new c.default;return r.geometry=t.extent,r.mapExtent=t.extent,r.returnGeometry=!0,r.tolerance=6,r.layerOption="popup",r.width=t.width,r.height=t.height,r.layerIds=[e.id],(await l.identify(e.layer.url,r))?.results?.[0]?.feature},k=async(e,t,r)=>{const a=await(await e.whenLayerView(t)).queryAggregates();return await N(r,a.features?.[0])},N=async(e,t)=>{let r;if(t)r=t.clone();else{r=new a.default;const t=_(e);if(t?.length){const e={};t.forEach(t=>{e[t.name]=""}),r.attributes=e}const o=new n.default;r.geometry=o}return r};function M(e,t){const r=t.startsWith("#"),a=t.startsWith(".");for((a||r)&&(t=t.slice(1));e;){if(r){if(e.id===t)return e}else if(a){if(e.classList.contains(t))return e}else if(e.tagName.toLowerCase()===t.toLowerCase())return e;e=e.parentElement??e.getRootNode()?.host??void 0}}async function R(e){if(w(e)===f.s.stream)return await Promise.resolve("point");if(e.geometryType)return await Promise.resolve(e.geometryType);if(w(e)===f.s.mapImage&&e?.layer?.sourceJSON?.layers){const t=e.layer?.sourceJSON.layers.find(t=>{if(t.id===e.id)return t})?.geometryType?.toLowerCase();if(t)return t.indexOf("point")>-1?await Promise.resolve("point"):t.indexOf("line")>-1?await Promise.resolve("polyline"):t.indexOf("polygon")>-1?await Promise.resolve("polygon"):await Promise.resolve(t);{const t=e?.layer?.findSublayerById(e.id);if(t){const e=await(t?.createFeatureLayer());return e?(await e.load(),await Promise.resolve(e?.geometryType)):void await Promise.resolve()}return void await Promise.resolve()}}await Promise.resolve()}function I(e,t,r){let a="";if(/^raster.(?:item|service)pixelvalue/iu.test(e))a="number";else if(t.has(e)){const r=t.get(e);a=r.type?r.type.toLowerCase():""}else if(r.has(e)){const t=r.get(e);a=t.returnType?t.returnType.toLowerCase():""}else a="number";return a}async function T(e,t){try{const r=w(e);if(r===f.s.mapImage&&e.layer.version>=10.5&&!e.layer.capabilities?.operations?.supportsQuery&&e.layer.capabilities?.operations?.supportsIdentify)return{features:[await E(e,t)||await C(e,t)]};if(r===f.s.scene&&!e.capabilities?.operations?.supportsQuery)return{features:[await C(e,t)]};const a=r===f.s.ogcFeature||r===f.s.stream?await t.whenLayerView(e):e,n=a.createQuery();n.where=a.definitionExpression||"1=1",n.outFields=["*"],n.returnM="hasM"in e&&e.hasM,n.returnZ="hasZ"in e&&e.hasZ,n.outSpatialReference=t.spatialReference,n.returnGeometry=!0,(a.sourceJSON?.advancedQueryCapabilities?.supportsPagination||r===f.s.ogcFeature)&&(n.start=0,n.num=1),n.outSpatialReference=t.spatialReference;const o=await a.queryFeatures(n);return o?.features?.length||(o.features[0]=await C(e,t)),o}catch(e){console.error(e)}}async function C(e,t){return await new Promise(r=>{const n=new a.default;if(e.fields?.length){const t={};e.fields.forEach(e=>{t[e.name]=e.defaultValue}),n.attributes=t}const l=t.extent;let c;"polygon"===e.geometryType?c=i.default.fromExtent(l):"point"===e.geometryType?c=l.center.clone():"multipoint"===e.geometryType?c=new o.default({points:[[l.center.x,l.center.y]],spatialReference:l.center.spatialReference.clone()}):"polyline"===e.geometryType?(c=new s.default({spatialReference:t.spatialReference.clone()}),c.addPath([[l.xmin,l.ymin],[l.xmax,l.ymax]])):"mesh"===e.geometryType&&(c=u.default.createBox(l.center.clone(),{size:{width:50,height:50,depth:50}})),n.geometry=c,r(n)})}function F(e){return w(e)===f.s.tile&&"url"in e&&"sublayer"===e.type&&-1===e.url?.indexOf(e.parent.url)&&!!e.fields?.length}function Q(e){return w(e)===f.s.tile&&"url"in e&&"sublayer"===e.type&&-1!==e.url?.indexOf(e.parent.url)&&!!e.fields?.length}},90628:(e,t,r)=>{r.d(t,{a:()=>i,b:()=>b,c:()=>p,d:()=>u,e:()=>l,f:()=>w,g:()=>h,h:()=>g,i:()=>s,l:()=>c,p:()=>y,s:()=>m});var a=r(60300),n=r(27290),o=r(59102);function s(e){return null!=e}const i=["bloom","dropShadow","blur","brightnessContrast","grayscale","hueRotate","saturate","invert","sepia"],u=["dropShadow_gray","strongDropShadow","dropShadow_transparency","dropShadow_blur","mutedBlur_light","mutedGray_light"],l=["bloom_gray","bloom_blur","bloom_transparency","mutedBlur_dark","mutedGray_dark"],c={bloom:{strength:2,radius:.75,threshold:.1},dropShadow:{line:{color:[0,0,0,255],xoffset:.75,yoffset:-.75,blurRadius:1.125},point:{color:[0,0,0,255],xoffset:1.125,yoffset:1.125,blurRadius:1.875},polygon:{color:[0,0,0,255],xoffset:1.125,yoffset:1.125,blurRadius:2.25}},blur:{radius:1.5},brightness:{amount:1.5},contrast:{amount:2},grayscale:{amount:1},hueRotate:{angle:100},saturate:{amount:1},invert:{amount:1},sepia:{amount:.7}},f=JSON.parse(JSON.stringify(c)),d=new Map;async function p(e,t,r){const a=Array.from(e.children).filter(e=>"calcite-list-item"===e.tagName.toLowerCase()&&e.querySelector("calcite-switch").checked),n=await Promise.all(a.map(async e=>await async function(e,t,r){const a=e.value;switch(a){case"bloom":return await async function(e,t){const r=await e.callQuerySelectorAll("calcite-input");let a=v(r[0]),n=v(r[1]),o=v(r[2]);if(!s(a)||!s(n)||!s(o))return;if(a=Math.round(10*a)/10,n=S(Math.round(10*n)/10),o=Math.round(o),o/=100,f.bloom={strength:a,radius:n,threshold:o},(await e.callQuerySelector(".auto")).checked){const{view:e}=t,r=e?.scale||1,s=2,i=1/s;return[{scale:.25*r,value:`bloom(${a*s}, ${n*s}pt, ${o})`},{scale:r,value:`bloom(${a}, ${n}pt, ${o})`},{scale:4*r,value:`bloom(${a*i}, ${n*i}pt, ${o})`}]}return`bloom(${a}, ${n}pt, ${o})`}(t.get(a),r);case"dropShadow":return await async function(e,t){const r=await e.callQuerySelector("calcite-color-picker"),a=function(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:Number.parseInt(t[1],16),g:Number.parseInt(t[2],16),b:Number.parseInt(t[3],16)}:null}(r.value),n=await e.callQuerySelectorAll("calcite-input");let o=v(n[0]),i=v(n[1]),u=v(n[2]),l=v(n[3]);if(!(s(r.value)&&s(o)&&s(i)&&s(u)&&s(l)))return;o=S(Math.round(o)),i=S(Math.round(i)),u=S(Math.round(-u)),l=Math.round(l),l/=100,f.dropShadow[h(t)]={color:[a.r,a.g,a.b,255*l],xoffset:i,yoffset:u,blurRadius:o};const c=`rgba(${a.r}, ${a.g}, ${a.b}, ${l})`;if((await e.callQuerySelector(".auto")).checked){const{view:e}=t,r=e?.scale||1,a=2,n=1/a;return[{scale:.25*r,value:`drop-shadow(${i*a}pt ${u*a}pt ${o*a}pt ${c})`},{scale:r,value:`drop-shadow(${i}pt ${u}pt ${o}pt ${c})`},{scale:4*r,value:`drop-shadow(${i*n}pt ${u*n}pt ${o*n}pt ${c})`}]}return`drop-shadow(${i}pt ${u}pt ${o}pt ${c})`}(t.get(a),r);case"blur":return await async function(e){const t=await e.callQuerySelector("calcite-input");let r=v(t);if(s(r))return r=S(Math.round(10*r)/10),f.blur={radius:r},`blur(${r}pt)`}(t.get(a));case"brightnessContrast":return await async function(e){const t=await e.callQuerySelectorAll("calcite-input");let r=v(t[0]),a=v(t[1]);if(s(r)&&s(a))return r=Math.round(r)/100,a=Math.round(a)/100,f.brightness={amount:r},f.contrast={amount:a},`brightness(${r}) contrast(${a})`}(t.get(a));case"grayscale":return await async function(e){const t=await e.callQuerySelector("calcite-input");let r=v(t);if(s(r))return r=Math.round(r)/100,f.grayscale={amount:r},`grayscale(${r})`}(t.get(a));case"hueRotate":return await async function(e){const t=await e.callQuerySelector("calcite-input");let r=v(t);if(s(r))return r=Math.round(r),f.hueRotate={angle:r},`hue-rotate(${r}deg)`}(t.get(a));case"saturate":return await async function(e){const t=await e.callQuerySelector("calcite-input");let r=v(t);if(s(r))return r=Math.round(r)/100,f.saturate={amount:r},`saturate(${r})`}(t.get(a));case"invert":return await async function(e){const t=await e.callQuerySelector("calcite-input");let r=v(t);if(s(r))return r=Math.round(r)/100,f.invert={amount:r},`invert(${r})`}(t.get(a));case"sepia":return await async function(e){const t=await e.callQuerySelector("calcite-input");let r=v(t);if(s(r))return r=Math.round(r)/100,f.sepia={amount:r},`sepia(${r})`}(t.get(a))}}(e,t,r)));let o,i="",u="";return n.forEach(e=>{e&&"string"==typeof e?o?o.forEach(t=>{t.value+=u+e}):i+=u+e:e&&"object"==typeof e&&(o?o.forEach(t=>{Array.from(e).filter(e=>t.scale===e.scale).forEach(e=>t.value+=u+e.value)}):(o=e,o.forEach(e=>{e.value=i+u+e.value}))),u=" "}),o||i}function y(e){const{layer:t,supportsFeatureEffects:r,backgroundTheme:a}=e,o=t;if(o.effect&&o.featureEffect)throw new Error("unsupported effect");if(o.featureEffect&&!r)throw new Error("unsupported effect");if(o.effect){const e=o.effect;if("string"==typeof e)return n.toJSON(e);if(3===e.length){if(function(e){const t=[e[0].value,e[1].value,e[2].value];return!i.some(e=>{if("brightnessContrast"===e){const e="brightness",r="contrast";return t[0].indexOf(e)>-1&&t[0].indexOf(r)>-1?-1===t[1].indexOf(e)||-1===t[2].indexOf(e)||-1===t[1].indexOf(r)||-1===t[2].indexOf(r):-1!==t[0].indexOf(e)||-1!==t[0].indexOf(r)||(t[1].indexOf(e)>-1||t[2].indexOf(e)>-1||t[1].indexOf(r)>-1||t[2].indexOf(r)>-1)}{const r=w(e);return t[0].indexOf(r)>-1?-1===t[1].indexOf(r)||-1===t[2].indexOf(r):t[1].indexOf(r)>-1||t[2].indexOf(r)>-1}})}(e))return n.toJSON(e[1].value);throw new Error("unsupported effect")}throw new Error("unsupported effect")}if(o.featureEffect){const e=o.featureEffect;if(!e.excludedLabelsVisible||e.includedEffect&&"string"!=typeof e.includedEffect||e.excludedEffect&&"string"!=typeof e.excludedEffect||e.filter?.geometry)throw new Error("unsupported effect");{const t=e.toJSON(),r=e.includedEffect?t.includedEffect:[],n=e.excludedEffect?t.excludedEffect:[];let o;for(const e of d.keys()){const t=d.get(e);if(x(t.included,r)&&x(t.excluded,n)){o=e;break}}const s="light"===a;return s&&o?.endsWith("_dark")?o=o.replace("_dark","_light"):!s&&o?.endsWith("_light")&&(o=o.replace("_light","_dark")),o}}return null}function m(e){const{effectsJSON:t}=e;if(!t)return;const r=t.map(e=>e.type);i.sort((e,t)=>{const a=r.indexOf(w(e)),n=r.indexOf(w(t));return a>-1&&n>-1&&a<n?-1:a>-1&&n>-1&&a>n?1:a>-1?-1:n>-1?1:0})}function g(e,t){const{effectsJSON:r}=t,a=r&&Array.from(r)?.filter(t=>t.type===w(e))?.[0];if(!a){if("dropShadow"===e){const r=h(t);return f[e][r]}return f[e]}return a}function h(e){const{layer:t}=e;let r="point";const a=t;return"csv"===t.type?r="point":a.geometryType&&(r="polyline"===a.geometryType?"line":["point","multipoint"].includes(a.geometryType)?"point":"polygon"),r}function w(e){switch(e){case"dropShadow":return"drop-shadow";case"hueRotate":return"hue-rotate";case"brightnessContrast":return"brightness";default:return e}}function b(e,t){const r=d.get(e);return o.default.fromJSON({filter:{where:t},includedEffect:r.included,excludedEffect:r.excluded,showExcludedLabels:!0})}function x(e,t){const r=JSON.parse(JSON.stringify(e)),a=JSON.parse(JSON.stringify(t));if(r.length!==a.length)return!1;r.sort((e,t)=>e.type.localeCompare(t.type)),a.sort((e,t)=>e.type.localeCompare(t.type));let n=!0;for(let e=0;e<r.length;e++){const t=r[e],o=a[e];if(Object.keys(t).length!==Object.keys(o).length){n=!1;break}if(n=Object.keys(t).every(e=>"string"==typeof t[e]&&"string"==typeof o[e]&&t[e]===o[e]||"number"==typeof t[e]&&"number"==typeof o[e]&&t[e]===o[e]||!(!t[e].length||t[e].length!==o[e].length||!t[e].every((t,r)=>t===o[e][r]))),!n)break}return n}function v(e){const t=Number(e.value);if(!s(t))return;const r=Math.min(e.max,Math.max(e.min,t));return e.value=`${r}`,r}function S(e){return Math.round(1e3*(0,a.a)(e))/1e3}d.set("dropShadow_gray",{included:[{type:"drop-shadow",color:[50,50,50,255],xoffset:1.5,yoffset:1.5,blurRadius:2.25}],excluded:[{type:"grayscale",amount:1},{type:"opacity",amount:.5}]}),d.set("strongDropShadow",{included:[{type:"drop-shadow",color:[0,0,0,255],xoffset:3,yoffset:3,blurRadius:3}],excluded:[]}),d.set("dropShadow_transparency",{included:[{type:"drop-shadow",color:[50,50,50,255],xoffset:1.5,yoffset:1.5,blurRadius:4.5}],excluded:[{type:"opacity",amount:.35}]}),d.set("dropShadow_blur",{included:[{type:"drop-shadow",color:[50,50,50,255],xoffset:1.5,yoffset:1.5,blurRadius:2.25}],excluded:[{type:"blur",radius:2.25},{type:"opacity",amount:.5}]}),d.set("bloom_gray",{included:[{type:"bloom",strength:1.3,radius:.6,threshold:0}],excluded:[{type:"grayscale",amount:1},{type:"opacity",amount:.5}]}),d.set("bloom_blur",{included:[{type:"bloom",strength:1.3,radius:.6,threshold:0}],excluded:[{type:"blur",radius:2.25},{type:"opacity",amount:.5}]}),d.set("bloom_transparency",{included:[{type:"bloom",strength:1.3,radius:.6,threshold:0}],excluded:[{type:"opacity",amount:.35}]}),d.set("mutedBlur_light",{included:[],excluded:[{type:"blur",radius:2.25},{type:"opacity",amount:.5}]}),d.set("mutedGray_light",{included:[],excluded:[{type:"grayscale",amount:1},{type:"opacity",amount:.5}]}),d.set("mutedBlur_dark",{included:[],excluded:[{type:"blur",radius:2.25},{type:"opacity",amount:.5}]}),d.set("mutedGray_dark",{included:[],excluded:[{type:"grayscale",amount:1},{type:"opacity",amount:.5}]})}}]);