/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-c84748.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-c84748"],{931:(e,t,n)=>{n.d(t,{l:()=>i});var r=n(93814);const i=async(e,t)=>(await r.e.exports.loadModules(e,t)).map(e=>e.__esModule&&e.default?e.default:e)},1402:(e,t,n)=>{n.d(t,{g:()=>i});var r=n(12192);async function i(e){const t=await(0,r.g)(e,"arcgis-member-browser");return t&&t.length?t[0]:null}},1654:(e,t,n)=>{n.d(t,{A:()=>w,B:()=>T,C:()=>_,D:()=>F,E:()=>m,F:()=>x,a:()=>a,b:()=>o,c:()=>l,d:()=>f,e:()=>C,f:()=>b,g:()=>S,h:()=>E,i:()=>h,j:()=>$,k:()=>A,l:()=>c,m:()=>u,n:()=>s,o:()=>k,p:()=>v,q:()=>g,r:()=>p,s:()=>U,t:()=>B,u:()=>d,v:()=>M,w:()=>O,x:()=>j,y:()=>P,z:()=>y});var r=n(46904);const i=e=>{var t,n,r;return"string"==typeof(null==e?void 0:e.role)&&(null==e?void 0:e.role)?null==e?void 0:e.role:null!==(n=null!==(t=null==e?void 0:e.roleId)&&void 0!==t?t:null==e?void 0:e.id)&&void 0!==n?n:null===(r=null==e?void 0:e.sourceJSON)||void 0===r?void 0:r.id};function o(e){return e&&!e.orgId}function l(e,t){return(0,r.u)(e,t)||"update"===e.itemControl||(0,r.c)([e],t)&&b(t)}function a(e,t){const n=(0,r.c)([e],t),i=(0,r.u)(e,t)||b(t)&&n,o=S(t)&&I(t);return!!(i||n&&o)}const s=e=>{var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:manageLicenses"))},c=e=>{var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:inviteUsers"))},u=e=>{var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:manageRoles"))},d=e=>{var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:changeUserRoles"))},v=e=>{var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:viewGroups"))},g=e=>{var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:viewUsers"))};function h(e){return["Trial Developer","Developer","Developer Subscription"].includes(null==e?void 0:e.type)}function m(e){return["Developer Subscription"].includes(null==e?void 0:e.type)}function p(e){return["Geoanalytics Engine","GeoAnalytics MS Fabric"].includes(null==e?void 0:e.type)}const f=e=>{var t;return null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.includes("Developer")},y=e=>{var t;return null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.includes("PublicSharingDisabled")},w=e=>{var t;return null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.includes("HostedServicesPublicSharingDisabled")};function b(e){return"org_admin"===i(e)||"account_admin"===i(e)}function C(e){return["org_admin","account_admin"].includes(i(e))&&!(null==e?void 0:e.roleId)}function S(e){return!!(null==e?void 0:e.roleId)&&e.roleId.length>0}function $(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:updateItemCategorySchema"))}function E(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:updateGroups"))}function k(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:assignToGroups"))}const I=e=>{var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:deleteItems"))};function M(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToGroup")}function O(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToOrg")}function T(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToPublic")}function P(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToOrg")}function _(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToPublic")}function j(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToGroup")}function A(e,t,n,r){const i=r&&!["Trial","Trial Press","Trial Developer","Developer Subscription","Evaluation"].includes(r.type),o=((null==t?void 0:t.privileges)||[]).includes("portal:admin:manageCollaborations");return!(!(null==e?void 0:e.collaborationsEnabled)||!t||!b(t)&&!o||!(null==n?void 0:n.isPortal)&&!i)}function x(e){return!!e&&(!S(e)||S(e)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:viewItems")}(e))}const F=({items:e,user:t,portal:n})=>{const i=e[0],o=i.owner;if(n.isPortal&&o!==t.username&&o.includes("esri_")&&!["esri_livingatlas"].includes(o))return!1;const a=(0,r.u)(i,t),s=S(t),c=R(t),u=l(i,t)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:updateItems")}(t)&&!s&&(function(e,t){return!function(e){return!(!e.urlKey||!e.customBaseUrl)||!!e.isPortal}(t)||M(e)||O(e)||!!t.canSharePublic&&T(e)}(t,n)||R(t));return a||u||(0,r.c)(e,t)&&c};function R(e){return j(e)||P(e)||_(e)}const D=["portal:user:createItem","portal:user:viewOrgItems","premium:publisher:createNotebooks","portal:publisher:createDataPipelines","features:user:edit","features:user:fullEdit","portal:admin:viewItems","portal:admin:updateItems","portal:admin:deleteItems"];function B(e){return e.some(e=>D.includes(e))}function U(e){return e.filter(e=>D.includes(e))}},4429:(e,t,n)=>{n.d(t,{a:()=>s,b:()=>d,c:()=>o,d:()=>c,e:()=>i,f:()=>r,g:()=>v,i:()=>g,m:()=>l,t:()=>a,u:()=>u});const r=(e,t)=>{let n,r="idle";const i=(...i)=>new Promise(o=>{switch(r){case"flushed":r="idle",n?(clearTimeout(n),o(e(...i))):o(null);break;case"invoked":clearTimeout(n),r="idle",o(e(...i));break;case"cancelled":clearTimeout(n),r="idle",o(null);break;default:n&&clearTimeout(n),r="pending",n=setTimeout(()=>(r="idle",o(e(...i))),t)}});return i.flush=function(...e){return r="flushed",i(...e)},i.invoke=function(...e){return r="invoked",i(...e)},i.cancel=function(...e){return r="cancelled",i(...e)},i.getStatus=function(){return r},i};function i(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function o(e){return null!=e}async function l(e,t){return await Promise.all([e,a(t)]),e}function a(e){return new Promise(t=>setTimeout(t,e))}const s=(e,t)=>Object.fromEntries((e||[]).map(e=>{const{key:n,data:r}=t(e);return[n,r]})),c=(e,t)=>e.length===t.length&&e.reduce((e,n)=>e&&t.indexOf(n)>-1,!0);function u(e,t){const n=[],r={};return e.forEach(e=>{const i=t(e);null==r[i]&&(r[i]=e,n.push(e))}),n}function d(e){const t={boolean:{},number:{},string:{}},n=[];return e.filter(e=>{let r=typeof e;return r in t?!t[r].hasOwnProperty(e)&&(t[r][e]=!0):!(n.indexOf(e)>=0)&&n.push(e)})}const v=(e,t)=>[...Array(Math.ceil(e.length/t))].map((n,r)=>e.slice(t*r,t+t*r)),g=(e,t)=>e.includes(t)},12192:(e,t,n)=>{n.d(t,{a:()=>l,g:()=>c});var r=n(15332),i=n(94984),o=n(87849);function l(e){var t,n,o;const l=null!==(t=(0,r.c)(e,"[lang]"))&&void 0!==t?t:null===(o=null===(n=e.shadowRoot)||void 0===n?void 0:n.ownerDocument)||void 0===o?void 0:o.documentElement,a=((null==l?void 0:l.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return i.l.has(a)?i.l.get(a):i.l.has(a.slice(0,2))?i.l.get(a.slice(0,2)):"en"}const a={};function s(e,t){const n=`${e}${t}`;return a[n]||(a[n]=function(e,t){return new Promise((n,r)=>{fetch((0,o.d)(`../arcgis-app-assets/i18n/${e}.i18n.${t}.json`)).then(e=>{e.ok?n(e.json()):r()},()=>r())})}(e,t)),a[n]}async function c(e,t){const n=t||e.tagName.toLowerCase(),o=l(e),a=function(e){var t,n,o;const l=null!==(t=(0,r.c)(e,"[lang]"))&&void 0!==t?t:null===(o=null===(n=e.shadowRoot)||void 0===n?void 0:n.ownerDocument)||void 0===o?void 0:o.documentElement,a=((null==l?void 0:l.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return i.l.has(a)?i.l.get(a):i.l.has(a.slice(0,2))?a:"en"}(e);let c;try{c=await s(n,o)}catch(e){console.warn(`no locale for ${n} (${o}) loading default locale en.`),c=await s(n,"en")}return[c,o,a]}},23966:(e,t,n)=>{n.d(t,{a:()=>l,g:()=>o,o:()=>a});var r=n(37762),i=n(74174);function o(e){return(0,i.g)(e,"arcgis-member-browser")}const l=(e,t)=>{e.onChange("view",e=>{t(e)})};(0,r.c)({type:"member-browser",includeExternalUsers:!1});const a=(e,t)=>{e.onChange("sort",e=>{t(e)})}},26262:(e,t,n)=>{n.d(t,{a:()=>i,g:()=>o,i:()=>l});var r=n(41473);const i=(e,t)=>(0,r.a)(`${(0,r.g)(e)}community/groups/${t.id}`),o=(e,t)=>`${((e,t)=>(0,r.a)(`${(0,r.g)(e)}content/groups/${t.id}`))(e,t)}search`,l=e=>{var t;return null===(t=null==e?void 0:e.capabilities)||void 0===t?void 0:t.includes("distributed")}},37362:(e,t,n)=>{n.d(t,{U:()=>r,a:()=>o,b:()=>i,g:()=>l});const r="/Categories",i=(e,t,n=!0)=>{const r=null!=e?e:"";return`${r}${r.endsWith("/")?"":"/"}${n?t.title.toLocaleLowerCase():t.title}`};function o(e){var t;let n=null===(t=null==e?void 0:e[0])||void 0===t?void 0:t.title;return n&&"/"!==n.charAt(0)&&(n=`/${n}`),n||r}const l=(e,t)=>`${e.replace(/\/([^\/]+)$/,`/${t}`)}`},46904:(e,t,n)=>{n.d(t,{a:()=>l,b:()=>o,c:()=>c,d:()=>u,e:()=>d,f:()=>v,g:()=>g,i:()=>a,u:()=>s});n(93814);var r=n(41473);function i(e){var t;return!!(null===(t=e.owner)||void 0===t?void 0:t.toLowerCase().includes("esri"))}function o(e){var t;return i(e)&&!!(null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Requires Credits"))}function l(e){var t;return i(e)&&!!(null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Requires Subscription"))}function a(e,t){return e.owner===t.username}function s(e,t){return a(e,t)||function(e,t){var n;if(null!=e.isAdmin)return!!e.isAdmin;const r=e.owner,i="admin"===e.itemControl,o=["esri_livingatlas","esri_demographics","esri_boundaries"];if((null===(n=e.portal)||void 0===n?void 0:n.isPortal)&&!a(e,t)&&i&&r.includes("esri_")&&!o.includes(r))return!1;return i}(e,t)}const c=(e,t)=>!!t.orgId&&e.every(e=>e.isOrgItem),u=(e,t)=>`${(0,r.a)(t)}item.html?id=${e}`,d=(e,t)=>`${(0,r.g)(t)}/content/users/${e}`,v=e=>e.reduce((e,t)=>(e[t.owner]=e[t.owner]?[...e[t.owner],t.id]:[t.id],e),{}),g=(e,t)=>`${(0,r.a)(t)}content/items/${e}`},50315:(e,t,n)=>{n.d(t,{a:()=>h,b:()=>d,c:()=>g,d:()=>p,e:()=>v,f:()=>u,g:()=>c,u:()=>m});var r=n(83692),i=n(37362),o=n(59317),l=n(26262),a=n(41473),s=n(1654);const c=async({portal:e,user:t,group:n,useCache:r=!1})=>{var i;try{const o=await(n?d(n.id,e,r):u(e,t,r));return{result:null!==(i=null==o?void 0:o.categorySchema)&&void 0!==i?i:null}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}};async function u(e,t,n=!0){if(null!=e||(e=o.c.portal),null!=t||(t=o.c.user),!(null==e?void 0:e.id)||t&&(0,s.b)(t))return null;const i=()=>(0,r.r)(`${(0,a.g)(e)}portals/${e.id}/categorySchema`);return n?(0,r.f)(i,"categorySchema",e.id):i()}async function d(e,t,n=!0){if(null!=t||(t=null===o.c||void 0===o.c?void 0:o.c.portal),!e||!t)return null;const i=()=>(0,r.r)(`${(0,l.a)(t,{id:e})}categorySchema`);return n?(0,r.f)(i,"categorySchema",e):i()}const v=async({user:e,portal:t,useCache:n=!1})=>{var r;const i=await g(t,e,n);return{result:null!==(r=null==i?void 0:i.memberCategorySchema)&&void 0!==r?r:null}};async function g(e,t,n=!0){if(null!=e||(e=o.c.portal),null!=t||(t=o.c.user),!(null==e?void 0:e.id)||t&&(0,s.b)(t))return null;const i=()=>(0,r.r)(`${(0,a.g)(e)}portals/${e.id}/memberCategorySchema`);return n?(0,r.f)(i,"memberCategorySchema",e.id):i()}async function h(e,t,n=!0){const i=()=>async function(e,t){var n;const i=(0,a.g)(e),o=(0,a.b)(e),s=await(0,r.r)(`${i}portals/self?culture=${o}`),c=await(0,r.r)(`${i}community/groups?q=${s.contentCategorySetsGroupQuery}`),u=null===(n=null==c?void 0:c.results)||void 0===n?void 0:n[0],d=(await(0,r.r)((0,l.g)(e,u),{q:`typekeywords: ${t}`})).results[0];return(0,r.r)(`${i}content/items/${d.id}/data`)}(e,t);return n?(0,r.f)(i,"categorySchema",t):i()}async function m({categories:e,itemIds:t,portal:n,group:i}){try{const o=`${(0,a.g)(n)}/content/${i?`groups/${i.id}/updateCategories`:"updateItems"}`,l=JSON.stringify(t.map(t=>{const n=Array.isArray(e)?e:e[t];return{[t]:i?n:{categories:n}}}));return{result:await(0,r.r)(o,{items:l},{},"post")}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}}const p=async({path:e,portal:t,group:n,updateInfo:r})=>{try{const o=(await f({category:e,portal:t,group:n,num:1})).total;if(0===o)return console.warn(`No items found with category ${e} when updating schema`),{};const l=100,a=Math.ceil(o/l),s=[];for(let o=0;o<a;o++)s.push(f({category:e,portal:t,group:n,start:o*l,num:l}).then(({results:t})=>{const o={};return t.forEach(t=>{var l;const a=null!==(l=n?t.groupCategories:t.categories)&&void 0!==l?l:[],s="change-title"===r.type?a.map(t=>{const n=(0,i.g)(e,r.newTitle);return t===e?n:t.replace(`${e}/`,`${n}/`)}):a.filter(t=>!t.startsWith(e));o[t.id]=s}),o}));const c=await Promise.all(s);return await Promise.all(c.map(e=>m({categories:e,itemIds:Object.keys(e),portal:t,group:n}))),{}}catch(t){return console.error(`Error ${r.type} items schema from path ${e}:`,t),{error:{code:"unhandledError"}}}},f=({category:e,num:t=100,start:n=0,portal:i,group:o})=>{const s={start:n,num:t,categories:JSON.stringify([e])},c=o?(0,l.g)(i,o):`${(0,a.g)(i)}search`;return(0,r.r)(c,Object.assign(Object.assign({},s),{q:o?void 0:`orgid: ${i.id}`}))}},54251:(e,t,n)=>{n.d(t,{g:()=>i});var r=n(59317);function i(e){var t,n,i,o;return null!=e||(e=null===r.c||void 0===r.c?void 0:r.c.portal),(null===(t=null==e?void 0:e.credential)||void 0===t?void 0:t.token)||(null==e?void 0:e.token)||(null===(i=null===(n=null==e?void 0:e.user)||void 0===n?void 0:n.credential)||void 0===i?void 0:i.token)||(null===(o=null==e?void 0:e.portalUser)||void 0===o?void 0:o.token)||""}},74174:(e,t,n)=>{n.d(t,{a:()=>o,b:()=>a,g:()=>c,i:()=>i,o:()=>l});var r=n(15332);const i=e=>"item-browser"===e.state.type,o=(e,t,n)=>{t.onChange("filters",t=>{t[e]&&t[e].value||n()})},l=(e,t)=>{e.onChange("preview",e=>{t()})},a=(e,t)=>{e.onChange("groupId",e=>{t()})},s=new Map;function c(e,t){const n=s.get(e);if(n)return n;const i=(0,r.c)(e,t);return i?(s.set(e,i.store),i.store):null}},83692:(e,t,n)=>{n.d(t,{a:()=>m,b:()=>h,c:()=>g,f:()=>d,g:()=>w,i:()=>v,p:()=>y,r:()=>p});var r=n(59317),i=n(4429),o=n(931),l=n(41473),a=n(54251);const s={},c={},u={};async function d(e,t,n,r){var i,o,l,a;const d=null===(o=null===(i=u[t])||void 0===i?void 0:i[n])||void 0===o?void 0:o.expireAt,v=!!d&&(new Date).getTime()>d;if((null===(l=s[t])||void 0===l?void 0:l[n])&&!v)return s[t][n];c[t]||(c[t]={}),c[t][n]&&!v||(c[t][n]=e());const g=await c[t][n];if(s[t]||(s[t]={}),u[t]||(u[t]={}),s[t][n]=g,r){const{expireAfter:e,getExpireAfterFromResult:i}=r,o=i||e?(new Date).getTime()+(null!==(a=null==i?void 0:i(g))&&void 0!==a?a:e):null;u[t][n]=Object.assign(Object.assign({},u[t][n]),{expireAt:o})}return g}function v(e,t){var n;return null===(n=null==s?void 0:s[e])||void 0===n?void 0:n[t]}const g=(e,t)=>{var n,r;t?(null===(n=s[e])||void 0===n||delete n[t],null===(r=c[e])||void 0===r||delete r[t]):(delete s[e],delete c[e])};function h(e){var t,n;return null!==(t=null==e?void 0:e.id)&&void 0!==t?t:null===(n=null==e?void 0:e.sourceJSON)||void 0===n?void 0:n.id}async function m(e,t,n={},r){const[i]=await(0,o.l)(["esri/request"]);e.includes("f=")||t.append("f","json");const l=(0,a.g)();return l&&!t.has("token")&&t.append("token",l),new Promise((o,l)=>{i(e,Object.assign(Object.assign({body:t},n),{timeout:n.timeout||0,method:r||"auto"})).then(e=>{o(e.data)}).catch(e=>l(e))})}async function p(e,t={},n={},i,l){const[a]=await(0,o.l)(["esri/request"]),{api:s,portal:c}=r.c,{customToken:u,addTokenManually:d,addSSL:v,useProxy:g}=n,h=Object.assign({},t);if(e.includes("f=")||!0===(null==l?void 0:l.excludeJson)||(h.f="json"),u)h.token=u;else if(!1!==d){const e=await w(c);e&&(h.token=e)}const m=!1===v?e:function(e){var t;const{config:n}=r.c;return"https:"===window.location.protocol||!0===(null===(t=null==n?void 0:n.self)||void 0===t?void 0:t.allSSL)?e.replace("http:","https:"):e}(e);if(3===s){const e=Object.assign({url:m,content:h,timeout:n.timeout||0},null==l?void 0:l.v3Request);n.withCredentials&&(e.withCredentials=n.withCredentials);return a(e,"post"===i?Object.assign({usePost:!0},n):n)}{const e=Object.assign(Object.assign(Object.assign({query:h,method:i||"auto"},n),{timeout:n.timeout||0,useProxy:g}),(null==n?void 0:n.disableIdentityLookup)?{authMode:"anonymous"}:{});return(await a(m,e)).data}}const f=[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,15,15,30,30,30,30,30,30,30,30,30,30,120];const y=async(e,t,n)=>{var r,o;const l=null!==(r=null==t?void 0:t.pendingStatuses)&&void 0!==r?r:["processing","partial","Pending","InProgress","EXECUTING"],a=null!==(o=null==t?void 0:t.successStatuses)&&void 0!==o?o:["completed","Completed","COMPLETED"];let s=0;const c=async()=>{const r=await p(e,null==t?void 0:t.requestParams,{},n),o=r.status||r.jobStatus;if(l.includes(o))return await(0,i.t)((u=s++,1e3*f[u>-1&&u<f.length-1?u:f.length-1])),c();if(a.includes(o)||"failed"===o||"esriJobFailed"===o)return r;throw r;var u};try{return c()}catch(e){throw console.error(e),e}},w=async e=>{var t;if(!(null==e?void 0:e.isPortal)||!(0,l.i)(e))return(0,a.g)(e);if(!(null==e?void 0:e.user)&&!(null==e?void 0:e.portalUser)&&(0,l.i)(e))return;const{token:n}=await d(()=>b(e),"platformSelf",null!==(t=h(e.user))&&void 0!==t?t:e.id,{getExpireAfterFromResult:e=>e.expires_in});return n},b=async e=>{const t=await(async e=>{var t,n;const[r]=await(0,o.l)(["esri/identity/IdentityManager"]);return null!==(n=null===(t=(await d(()=>r.getCredential((0,l.g)(e),{oAuthPopupConfirmation:!1}),"credential",h(e.user))).oAuthState)||void 0===t?void 0:t.appId)&&void 0!==n?n:"arcgisonline"})(e),n={"X-Esri-Auth-Client-Id":t,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")};return p(`${(0,l.g)(e)}/oauth2/platformSelf`,{},{disableIdentityLookup:!0,headers:n,addTokenManually:!1,withCredentials:!0},"post",{v3Request:{headers:n}})}},84411:(e,t,n)=>{n.r(t),n.d(t,{arcgis_member_browser_filter_categories:()=>d});var r=n(87849),i=n(50315),o=n(37362),l=n(59317),a=n(1654),s=n(74174),c=n(1402),u=n(23966);n(83692),n(931),n(93814),n(41473),n(54251),n(26262),n(37762),n(46904),n(15332),n(12192),n(94984);const d=class{constructor(e){(0,r.r)(this,e),this.arcgisMemberBrowserFilter=(0,r.c)(this,"arcgisMemberBrowserFilter",7),this.arcgisMemberBrowserCategorySchemaUpdate=(0,r.c)(this,"arcgisMemberBrowserCategorySchemaUpdate",7),this.arcgisMemberBrowserCategoryEditSuccess=(0,r.c)(this,"arcgisMemberBrowserCategoryEditSuccess",7),this.arcgisMemberBrowserCategoryEditRowWarningClick=(0,r.c)(this,"arcgisMemberBrowserCategoryEditRowWarningClick",7),this.refetchCategories=async()=>{(null===l.c||void 0===l.c?void 0:l.c.portal)&&await this.fetchMemberCategories(l.c.portal,!1)},this.setSchema=e=>{this.schema=e,this.arcgisMemberBrowserCategorySchemaUpdate.emit(e)},this.renderSchemaEditor=()=>{const{allowEdit:e,isEditing:t,handleEditSchemaComplete:n,setSchema:i,defaultCategories:o}=this,{user:a,portal:s}=l.c;return e?(0,r.h)("arcgis-tunnel",{reference:this.el},(0,r.h)("arcgis-member-category-schema-editor",{isActive:t,user:a,config:l.c.config,portal:s,defaultMemberCategories:o,onArcgisMemberCategoryEditorRowWarningClick:()=>this.arcgisMemberBrowserCategoryEditRowWarningClick.emit(),onWorkflowCancel:async e=>{e.detail?(n(e.detail.hasChangeSinceLastOpen),e.detail.hasChangeSinceLastOpen&&this.arcgisMemberBrowserCategoryEditSuccess.emit()):this.isEditing=!1},onNewSchemaWorkflowComplete:async({detail:e})=>{this.isEditing=!1,i(e.newSchema),this.arcgisMemberBrowserCategoryEditSuccess.emit()},onDeleteAllSchema:async()=>{n(!0),this.arcgisMemberBrowserCategoryEditSuccess.emit()}})):null},this.handleEditSchemaComplete=async e=>{this.isEditing=!1,e&&await this.refetchCategories();const{category:t,schema:n,clearFilter:r,checkSchemaFilterStillValid:i}=this;!t||"null"===t||n&&i(n,t,o.U)||r()},this.checkSchemaFilterStillValid=(e,t,n)=>e.some(e=>{var r;const i=(0,o.b)(n,e,!1);return i===t||!!(null===(r=e.categories)||void 0===r?void 0:r.length)&&this.checkSchemaFilterStillValid(e.categories,t,i)}),this.clearFilter=()=>{this.category=null,this.emitFilterEvent()},this.handleEdit=()=>{var e;(null===(e=this.isSystemReadonly)||void 0===e?void 0:e.call(this))||(this.isEditing=!0)},this.category=void 0,this.expanded=void 0,this.allowEdit=void 0,this.defaultCategories=[],this.isSystemReadonly=void 0,this.loading=void 0,this.schema=[],this.categoriesCount={},this.isEditing=!1,this.tooltipReferenceElement=void 0}async componentWillLoad(){var e;this.store=(0,u.g)(this.el),this.i18n=null===(e=await(0,c.g)(this.el))||void 0===e?void 0:e.filterCategories,(null===l.c||void 0===l.c?void 0:l.c.portal)?await this.fetchMemberCategories(l.c.portal):(0,l.o)("portal",e=>{this.fetchMemberCategories(e)}),(0,s.a)("categories",this.store,()=>this.category=null)}async componentDidLoad(){this.category&&this.emitFilterEvent()}async fetchMemberCategories(e,t=!1){var n,r;const o=await(0,i.c)(e,null===l.c||void 0===l.c?void 0:l.c.user,t),a=null===(r=null===(n=null==o?void 0:o.memberCategorySchema)||void 0===n?void 0:n[0])||void 0===r?void 0:r.categories;this.setSchema(a),this.loading=!1}emitFilterEvent(){const{category:e,i18n:t}=this,n="null"===e?"null":e?[e]:"",r=t.label.replace("${name}","null"===e?t.noCategoriesAssigned:null==e?void 0:e.replace(`${o.U}/`,""));this.arcgisMemberBrowserFilter.emit({id:"categories",param:"categories",value:n,label:r,category:e})}renderNestedCategories(e,t){return e.map(e=>{var n;const i=t?`${t}/${e.title}`:`${o.U}/${e.title}`,l=!!(null===(n=e.categories)||void 0===n?void 0:n.length);return(0,r.h)("calcite-tree-item",{"data-value":i,"data-children":l,selected:this.category===i,key:`${i}--${l}`},(0,r.h)("a",null,e.displayName||e.title),l&&(0,r.h)("calcite-tree",{slot:"children",selectionMode:"children"},this.renderNestedCategories(e.categories,i)))})}render(){const{loading:e,schema:t,i18n:n,allowEdit:i}=this,o=(null==t?void 0:t.length)>0;return this.store.state.groupId&&!this.store.state.myOrgView||!o&&!i||e||(0,a.b)(l.c.user)||this.store.state.includeExternalUsers?null:(0,r.h)(r.F,null,(0,r.h)("arcgis-browser-filter",{heading:this.i18n.title,expanded:this.expanded,active:!!this.category,filterID:"categories",onArcgisBrowserFilterRemove:()=>{this.category=null}},o?(0,r.h)("calcite-tree",{selectionMode:"children",onCalciteTreeSelect:e=>{var t,n;const r=e.target,i=null===(n=null===(t=null==r?void 0:r.selectedItems)||void 0===t?void 0:t[0])||void 0===n?void 0:n.dataset,o=(null==i?void 0:i.value)||"";this.category===o?this.category=null:this.category=o,this.emitFilterEvent()}},(0,r.h)("calcite-tree-item",{"data-value":"null",selected:"null"===this.category},(0,r.h)("a",null,n.noCategoriesAssigned)),this.renderNestedCategories(t)):(0,r.h)("div",null,(0,r.h)("p",{class:"no-category-title"},n.noCategoriesTitle),(0,r.h)("p",{class:"no-category-description"},n.noCategories),i&&(0,r.h)("calcite-button",{class:"add-category-button",appearance:"outline-fill",onClick:this.handleEdit},n.setupCategories)),o&&i&&(0,r.h)(r.F,null,(0,r.h)("calcite-button",{iconStart:"pencil",appearance:"transparent",kind:"neutral",slot:"action","aria-label":n.configureCategories,onClick:this.handleEdit,ref:e=>this.tooltipReferenceElement=e}),(0,r.h)("calcite-tooltip",{referenceElement:this.tooltipReferenceElement},n.configureCategories))),this.renderSchemaEditor())}get el(){return(0,r.a)(this)}};d.style=".no-category-title{margin-bottom:0.75rem;margin-top:1rem;font-size:1rem;font-weight:400}.no-category-description{overflow-wrap:break-word}.no-category-description:not(:last-child){margin-bottom:1rem;margin-top:0px}.add-category-button{margin-bottom:1rem;max-width:100%;overflow-wrap:break-word}"},94984:(e,t,n)=>{n.d(t,{C:()=>a,a:()=>d,b:()=>u,f:()=>s,g:()=>l,l:()=>o,s:()=>g});var r=n(15332),i=n(931);const o=new Map([["ar","ar"],["bg","bg"],["bs","bs"],["ca","ca"],["cs","cs"],["da","da"],["de","de"],["el","el"],["en","en"],["es","es"],["et","et"],["fi","fi"],["fr","fr"],["he","he"],["hr","hr"],["hu","hu"],["id","id"],["it","it"],["ja","ja"],["ko","ko"],["lt","lt"],["lv","lv"],["nb","no"],["no","no"],["nl","nl"],["pl","pl"],["pt-br","pt-BR"],["pt-pt","pt-PT"],["ro","ro"],["ru","ru"],["sk","sk"],["sl","sl"],["sr","sr"],["sv","sv"],["th","th"],["tr","tr"],["uk","uk"],["vi","vi"],["zh-cn","zh-CN"],["zh-hk","zh-HK"],["zh-tw","zh-TW"]]);function l(e){return function(e,t,n){const i=(0,r.c)(e,`[${t}]`);return i?i.getAttribute(t):n}(e,"dir","ltr")}const a={rtl:"arcgis--rtl"};async function s(e,t){const{api:n,type:r,places:o}=t||{};if(3===n){const[n]=await(0,i.l)(["dojo/number"]);return n.format(e,{type:r,places:o,pattern:null==t?void 0:t.pattern})}const[l]=await(0,i.l)(["esri/intl"]),a=l.convertNumberFormatToIntlOptions({places:o,style:r,digitSeparator:!0});return l.formatNumber(e,Object.assign(Object.assign({},a),{style:r}))}const c={};function u(e,t){let n=document.documentElement.lang;const r="bs"===n;if(r&&(n="hr"),t){const t=`${n}-full`,r={dateStyle:"full",timeStyle:"long"};return c[t]||(c[t]=new Intl.DateTimeFormat(n,r)),c[t].format(e)}const i={year:"numeric",month:r?"numeric":"short",day:"numeric"};return c[n]||(c[n]=new Intl.DateTimeFormat(n,i)),c[n].format(e)}function d(e,t,n,r){const i=null!=e?e:"en";let o=t.unknown;return(1===n||["id","ja","ko","th","vi","zh-cn","zh-hk","zh-tw"].includes(i))&&(o=t.single),1!==n&&["en","ca","da","de","el","es","et","fi","hi","hu","it","nb","nl","pt-pt","sv","tr"].includes(i)&&(o=t.multiple),g(o,Object.assign(Object.assign({},r),{number:n}))}const v=/\$\{([^}]+)\}/g;function g(e,t,n=v){let r=e;try{r=e.replace(n,(e,n)=>function(e,t){const n=e.split(".").reduce((e,t)=>e[t],t);return"string"==typeof n||"number"==typeof n?n:e}(n,t).toString())}catch(e){console.error(e)}return r}}}]);