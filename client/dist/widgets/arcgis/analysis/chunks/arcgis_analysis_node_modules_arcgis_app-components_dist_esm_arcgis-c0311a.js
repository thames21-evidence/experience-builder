/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-c0311a.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-c0311a"],{931:(e,t,n)=>{n.d(t,{l:()=>a});var r=n(93814);const a=async(e,t)=>(await r.e.exports.loadModules(e,t)).map(e=>e.__esModule&&e.default?e.default:e)},3826:(e,t,n)=>{n.d(t,{a:()=>a,b:()=>i,c:()=>l,d:()=>r});const r=(0,n(37762).c)({typeKeywords:[],customParameters:[],analyzedLocationTypes:[],allowStoredAuth:!0,isSecured:null,checkAuth:!1}),a=r.state,i=r.state,l=r.state},4429:(e,t,n)=>{n.d(t,{a:()=>s,b:()=>u,c:()=>i,d:()=>c,e:()=>a,f:()=>r,g:()=>f,i:()=>y,m:()=>l,t:()=>o,u:()=>d});const r=(e,t)=>{let n,r="idle";const a=(...a)=>new Promise(i=>{switch(r){case"flushed":r="idle",n?(clearTimeout(n),i(e(...a))):i(null);break;case"invoked":clearTimeout(n),r="idle",i(e(...a));break;case"cancelled":clearTimeout(n),r="idle",i(null);break;default:n&&clearTimeout(n),r="pending",n=setTimeout(()=>(r="idle",i(e(...a))),t)}});return a.flush=function(...e){return r="flushed",a(...e)},a.invoke=function(...e){return r="invoked",a(...e)},a.cancel=function(...e){return r="cancelled",a(...e)},a.getStatus=function(){return r},a};function a(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function i(e){return null!=e}async function l(e,t){return await Promise.all([e,o(t)]),e}function o(e){return new Promise(t=>setTimeout(t,e))}const s=(e,t)=>Object.fromEntries((e||[]).map(e=>{const{key:n,data:r}=t(e);return[n,r]})),c=(e,t)=>e.length===t.length&&e.reduce((e,n)=>e&&t.indexOf(n)>-1,!0);function d(e,t){const n=[],r={};return e.forEach(e=>{const a=t(e);null==r[a]&&(r[a]=e,n.push(e))}),n}function u(e){const t={boolean:{},number:{},string:{}},n=[];return e.filter(e=>{let r=typeof e;return r in t?!t[r].hasOwnProperty(e)&&(t[r][e]=!0):!(n.indexOf(e)>=0)&&n.push(e)})}const f=(e,t)=>[...Array(Math.ceil(e.length/t))].map((n,r)=>e.slice(t*r,t+t*r)),y=(e,t)=>e.includes(t)},46227:(e,t,n)=>{n.d(t,{g:()=>r});const r=()=>[2,1,1,1,3].map(e=>{let t="";for(let n=0;n<e;n++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t}).join("-")},46904:(e,t,n)=>{n.d(t,{a:()=>l,b:()=>i,c:()=>c,d:()=>d,e:()=>u,f:()=>f,g:()=>y,i:()=>o,u:()=>s});n(93814);var r=n(41473);function a(e){var t;return!!(null===(t=e.owner)||void 0===t?void 0:t.toLowerCase().includes("esri"))}function i(e){var t;return a(e)&&!!(null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Requires Credits"))}function l(e){var t;return a(e)&&!!(null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Requires Subscription"))}function o(e,t){return e.owner===t.username}function s(e,t){return o(e,t)||function(e,t){var n;if(null!=e.isAdmin)return!!e.isAdmin;const r=e.owner,a="admin"===e.itemControl,i=["esri_livingatlas","esri_demographics","esri_boundaries"];if((null===(n=e.portal)||void 0===n?void 0:n.isPortal)&&!o(e,t)&&a&&r.includes("esri_")&&!i.includes(r))return!1;return a}(e,t)}const c=(e,t)=>!!t.orgId&&e.every(e=>e.isOrgItem),d=(e,t)=>`${(0,r.a)(t)}item.html?id=${e}`,u=(e,t)=>`${(0,r.g)(t)}/content/users/${e}`,f=e=>e.reduce((e,t)=>(e[t.owner]=e[t.owner]?[...e[t.owner],t.id]:[t.id],e),{}),y=(e,t)=>`${(0,r.a)(t)}content/items/${e}`},54251:(e,t,n)=>{n.d(t,{g:()=>a});var r=n(59317);function a(e){var t,n,a,i;return null!=e||(e=null===r.c||void 0===r.c?void 0:r.c.portal),(null===(t=null==e?void 0:e.credential)||void 0===t?void 0:t.token)||(null==e?void 0:e.token)||(null===(a=null===(n=null==e?void 0:e.user)||void 0===n?void 0:n.credential)||void 0===a?void 0:a.token)||(null===(i=null==e?void 0:e.portalUser)||void 0===i?void 0:i.token)||""}},72257:(e,t,n)=>{n.d(t,{a:()=>i,g:()=>s,i:()=>l});var r=n(37762),a=n(86562);const i=(0,r.c)({title:"",snippet:"",tags:[],categories:[]}),l=i.state,o=new Map;function s(e){return(0,a.g)({el:e,tag:"arcgis-item-properties",cache:o})}},79238:(e,t,n)=>{n.d(t,{a:()=>r,e:()=>a,f:()=>i});const r={point:"point",line:"line",polygon:"polygon",multipatch:"cube",table:"table",multipoint:"layer-points"},a={esriGeometryPoint:"point",esriGeometryPolyline:"line",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"cube",esriGeometryMultipoint:"point",none:"table"},i={esriFieldTypeOID:"key",esriFieldTypeBoolean:"boolean",esriFieldTypeString:"string",esriFieldTypeSingle:"number",esriFieldTypeDouble:"number",esriFieldTypeInteger:"integer",esriFieldTypeSmallInteger:"integer",esriFieldTypeGlobalID:"key",esriFieldTypeDate:"date-time",esriFieldTypeBigInteger:"integer",esriFieldTypeDateOnly:"calendar",esriFieldTypeTimeOnly:"clock",esriFieldTypeTimestampOffset:"time-zone",esriFieldTypeGUID:"key"}},86562:(e,t,n)=>{n.d(t,{g:()=>a});var r=n(15332);function a(e){const{el:t,tag:n,cache:a}=e,i=(0,r.c)(t,n),l=a.get(i);return l||(i?(a.set(i,i.store),i.store):null)}},90250:(e,t,n)=>{n.r(t),n.d(t,{arcgis_new_item_pages_feature_layer_from_scratch:()=>y});var r=n(87849),a=n(90079),i=n(59317),l=n(4429),o=n(46227),s=n(3826),c=n(95878),d=n(88863),u=n(33547),f=n(79238);n(37762),n(41473),n(72257),n(86562),n(15332),n(62645),n(54251),n(46904),n(93814),n(32478),n(931);const y=class{constructor(e){(0,r.r)(this,e),this.newItemUpdatePage=(0,r.c)(this,"newItemUpdatePage",7),this.layerNameInputRefs={},this.nameFieldChangedByUser={},this.getDuplicateLayerNameId=()=>{const{layerInfos:e}=this,t={};for(let n=0;n<e.length;n++){const{name:r,id:a}=e[n];if(t[r])return a;t[r]=!0}return null},this.getDefaultName=e=>{const{layerInfos:t}=this,n=t.reduce((t,n)=>{const r=(a=n.name,parseInt(a.split("_")[1]));var a;return!n.name.startsWith(e)||isNaN(r)?t:t<=r?r+1:t},1);return`${e}_${n}`},this.addLayer=()=>{const{i18n:e,layerInfos:t,getDefaultName:n,layerNameInputRefs:r}=this,a=e.layer,i=(0,o.g)(),s=n(a);this.layerInfos=[...t,{id:i,type:"point",name:s}],(0,l.t)(100).then(()=>{var e;null===(e=r[i])||void 0===e||e.setFocus()})},this.deleteLayer=(e,t)=>{const{layerNameInputRefs:n,layerInfos:r,nameFieldChangedByUser:a}=this;1!==r.length&&(this.layerInfos=function(e,t){const n=[...e];return n.splice(t,1),n}(r,t),delete n[e],delete a[e])},this.changeLayerName=(e,t)=>{const{layerInfos:n,nameFieldChangedByUser:r}=this,a=n[e];a.name=t,r[a.id]=!0},this.changeLayerType=(e,t,n)=>{const{layerInfos:r,nameFieldChangedByUser:a,i18n:i,getDefaultName:l}=this,o=Object.assign({},r[e]);a[o.id]||("table"===t&&"table"!==n?o.name=l(i.layer):"table"!==t&&"table"===n&&(o.name=l(i.table))),o.type=n,this.layerInfos=[...r.slice(0,e),o,...r.slice(e+1)]},this.setAlertMessage=e=>{this.alertInfo=this.i18n.error[e]},this.alertInfo=void 0,this.layerInfos=[],this.layerPreference={captureGPS:!1,enableZDefaults:!1,enableMDefaults:!1}}async componentWillLoad(){this.addCreateI18n=c.u.i18n,this.i18n=this.addCreateI18n.featureLayerFromScratch;const{layerPreference:e,newLayerInfos:t}=(0,d.a)();this.layerPreference=e,t.length<=0?this.addLayer():this.layerInfos=[...t]}async handleNext(){var e,t,n;const{layerInfos:r,layerNameInputRefs:a,setAlertMessage:l,getDuplicateLayerNameId:o,newItemUpdatePage:c,layerPreference:f}=this,{portal:y}=i.c,m=null===(e=r.find(e=>!e.name.trim()))||void 0===e?void 0:e.id;if(m)return(0,u.f)("Missing layer name"),null===(t=a[m])||void 0===t||t.setFocus(),void l("emptyName");const p=o();if(p)return(0,u.f)("Layer names must be unique"),null===(n=a[p])||void 0===n||n.setFocus(),void l("duplicateTitle");1===this.layerInfos.length&&(s.a.initialTitle=this.layerInfos[0].name),(0,d.b)(this.layerInfos,f,y),c.emit("itemProperties")}render(){const{i18n:e,alertInfo:t,addCreateI18n:n,addLayer:i,layerInfos:l,layerNameInputRefs:o,deleteLayer:s,layerPreference:c,changeLayerName:d,changeLayerType:y}=this;return(0,r.h)(r.H,{key:"214e27e6527749422bab3b0d70a3cca285eabdbf"},(0,r.h)("arcgis-new-item-description",{key:"80d811964d7d45c8eba757bb4e0f72b93f1a4619",header:e.header}),(0,r.h)("div",{key:"516beb7826bdd779fff6b6f016af9ac39482853b",class:"add-new-container"},(0,r.h)("div",{key:"21984782bd0e84703f19e0175c7bca82fd8b51a2",class:"layer-container"},l.map(({id:e,name:t,type:i},c)=>{const u=l[c];return(0,r.h)("li",{class:"info-card",key:e,value:e},(0,r.h)("calcite-input",{value:t,class:"layer-name-input",label:n.featureLayerFromScratch.label,placeholder:n.featureLayer.placeholders[i],onCalciteInputInput:e=>{const t=e.target;d(c,t.value)},ref:t=>o[e]=t}),(0,r.h)("calcite-combobox",{label:n.featureLayer.type[u.type],class:"layer-type",selectionMode:"single",clearDisabled:!0,onCalciteComboboxChange:e=>{const t=e.target;y(c,u.type,t.selectedItems[0].value)}},a.f.filter(e=>"multipatch"!==e).map(e=>(0,r.h)("calcite-combobox-item",{textLabel:n.featureLayer.type[e],icon:f.a[e],selected:u.type===e,value:e}))),l.length>1&&(0,r.h)("calcite-button",{appearance:"transparent",kind:"danger",scale:"m",href:"","icon-start":"trash",onClick:()=>s(e,c)}))})),(0,r.h)("calcite-button",{key:"4ba9c9e57bf1f337c5969e8cf7e54e133a7a96bb",appearance:"transparent",scale:"m","icon-start":"plus",class:"add-layer",onClick:i},e.add)),(0,r.h)("arcgis-new-item-layer-preference",{key:"a55af04377e2bc1bd8fcb14fd46ddff29cd2daf4",i18n:e,defaultPreference:c,onLayerPreferenceChange:e=>{const{layerPreference:t}=this,n=e.detail;!t.captureGPS&&n.captureGPS&&(0,u.e)("captureGPS"),!t.enableZDefaults&&n.enableZDefaults&&(0,u.e)("enableZDefaults"),!t.enableMDefaults&&n.enableMDefaults&&(0,u.e)("enableMDefaults"),this.layerPreference=e.detail}}),(0,r.h)("arcgis-new-item-alert",{key:"925162df98f87404cfd5dbf32c9002938fdb46ca",heading:null==t?void 0:t.title,description:null==t?void 0:t.description,active:!!t,onAlertDismiss:()=>this.alertInfo=null}))}get el(){return(0,r.a)(this)}};y.style="p{margin-top:0px;margin-bottom:0px}button{cursor:pointer;transition-duration:200ms;border:none;box-shadow:none;background:transparent;line-height:16px}label{margin-bottom:0px}.add-new-container{margin-top:1rem;margin-bottom:1.5rem;padding:1.5rem;padding-bottom:2.5rem;background-color:var(--calcite-color-background)}.add-layer{margin-top:1rem;width:-moz-fit-content;width:fit-content}.info-card{--calcite-font-size--2:0.875rem;display:flex;flex-grow:1;align-items:center;border-width:1px;border-style:solid;background-color:var(--calcite-color-foreground-1);border-color:var(--calcite-color-border-1);padding:1rem}.info-card:not(:last-of-type){border-bottom-width:0px}.info-card:first-child{border-top-left-radius:var(--calcite-border-radius);border-top-right-radius:var(--calcite-border-radius)}.info-card:last-child{border-bottom-right-radius:var(--calcite-border-radius);border-bottom-left-radius:var(--calcite-border-radius)}.layer-icon{margin-inline-end:1rem}.layer-name-input,.layer-type{flex-grow:1;margin-inline-end:1rem;flex-basis:100%}.layer-type:last-child{margin-inline-end:0px}"},95878:(e,t,n)=>{n.d(t,{a:()=>r,u:()=>a});const r=(0,n(37762).c)({nextText:"next",cancelText:"cancel",workflow:"content",scale:"m",disableScroll:!1,onlyHosted:!1,featureFlags:{}}),a=r.state}}]);