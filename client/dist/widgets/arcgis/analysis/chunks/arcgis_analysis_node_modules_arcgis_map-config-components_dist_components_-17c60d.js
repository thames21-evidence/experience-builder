/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-17c60d.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-17c60d"],{54137:(e,t,s)=>{s.r(t),s.d(t,{ArcgisMapConfigSmartMappingSymbolStylerPopover:()=>r});var o=s(73679),i=s(4395),l=s(85643),a=s(73801);const n=i.AH`.styler-popover{--calcite-popover-z-index: 100}.styler-panel{width:328px;min-height:200px}.styler-div{width:100%}`;class r extends a.WF{constructor(){super(...arguments),this.popoverNode=(0,l._)(),this.panelNode=(0,l._)(),this.closeActionNode=(0,l._)(),this.contentNode=(0,l._)(),this.arcgisSmartMappingSymbolStylerPopoverClose=(0,a.lh)(),this.arcgisSmartMappingSymbolStylerPopoverDisconnected=(0,a.lh)()}static{this.properties={referenceElement:0,heading:1,smartMappingState:0}}static{this.styles=n}async getSymbolStylerElement(){let e=0;for(;!this.symbolStylerNode&&e<10;)await new Promise(e=>setTimeout(e,10)),e++;return this.symbolStylerNode}async setFocus(){await(this.closeActionNode.value?.setFocus())}async addEventHandler(e,t){this.listenOn(this.symbolStylerNode,e,t)}async loaded(){this.popoverNode.value&&requestAnimationFrame(async()=>await(this.closeActionNode.value?.setFocus()))}disconnectedCallback(){super.disconnectedCallback(),this.arcgisSmartMappingSymbolStylerPopoverDisconnected.emit()}async symbolStylerRefHandler(e){if(e){this.symbolStylerNode=e;const t=this.referenceElement.getBoundingClientRect();if(t?.bottom){const e=(t?.top??0)+45+53+20+(window.innerHeight-(t?.bottom??0));this.symbolStylerNode.style=`max-height: max(calc(100vh - ${e}px), 200px)`}if(!this.symbolStylerNode.popoverProps.refElement){let e=0;for(;!this.closeActionNode.value&&e<20;)await new Promise(e=>setTimeout(e,10)),e++;this.symbolStylerNode.popoverProps.refElement=this.closeActionNode.value}}}onOpen(){requestAnimationFrame(async()=>await this.setFocus())}render(){const{referenceElement:e,heading:t,smartMappingState:s}=this,{lastStylerSourceId:o,_messages:a}=s;return this.el.classList.add("js-app-flyout"),i.qy`<calcite-popover open placement=leading-start offset-distance=0 offset-skidding=45 pointer-disabled trigger-disabled .label=${t||a.styler.symbolStyle} .referenceElement=${e} class="smart-mapping-styler-popover js-app-flyout styler-popover" @calcitePopoverOpen=${this.onOpen} ${(0,l.K)(this.popoverNode)}><calcite-panel .heading=${t||a.styler.symbolStyle} class="styler-panel" @calcitePanelClose=${()=>{this.arcgisSmartMappingSymbolStylerPopoverClose.emit(),setTimeout(()=>e.parentElement.focus(),300)}} ${(0,l.K)(this.panelNode)}><calcite-action slot=header-actions-end icon=x .text=${a.close} @click=${()=>this.arcgisSmartMappingSymbolStylerPopoverClose.emit()} ${(0,l.K)(this.closeActionNode)}></calcite-action><div class="styler-div" ${(0,l.K)(this.contentNode)}><arcgis-map-config-symbol-styler .initialSourceId=${o} .config=${{...s.symbolStylerConfig,hideAnimation:!!s.mapImageSublayer}} .popoverProps=${{placement:"bottom-end",offsetDistance:10,offsetSkidding:s.isRTL?3:-3,pointerDisabled:"true",popoverWidth:315,refElement:this.closeActionNode.value}} @arcgisSourceIdChange=${({detail:e})=>s.lastStylerSourceId=e} ${(0,l.K)(this.symbolStylerRefHandler)}></arcgis-map-config-symbol-styler></div></calcite-panel></calcite-popover>`}}(0,o.c)("arcgis-map-config-smart-mapping-symbol-styler-popover",r)}}]);