/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-9a3e23.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-9a3e23"],{29318:(e,t,a)=>{a.r(t),a.d(t,{ArcgisMapConfigSmartMappingPanelsRasterColormap:()=>u});var s=a(73679),l=a(4395),i=a(5294),o=a(41631),n=a(1225),r=(a(54312),a(44345),a(55448),a(52797),a(34031),a(63438),a(5933),a(28927),a(83368),a(89704),a(18423),a(96086),a(91813),a(21255),a(13078),a(21303),a(12627),a(56451),a(23054),a(5077),a(23795),a(17902),a(87420),a(30161),a(81734),a(75698),a(10628),a(59640),a(64451),a(6176),a(65595)),c=(a(77462),a(49403),a(10281),a(83930),a(66617),a(10454),a(29614),a(94916),a(52554),a(2156),a(4038),a(49851),a(75054),a(15223),a(70169),a(47207),a(70852),a(48103),a(39423),a(85681),a(18444),a(42411),a(9767),a(38218),a(91914),a(31521),a(86605),a(68196),a(440),a(46547),a(6238),a(7299),a(85643)),d=a(73801);const p=l.AH`:host{width:100%;display:none}:host([selected]){display:flex}.flow-item{height:100%}.colormap-block{overflow-x:hidden}.table{width:100%}.color{display:flex;justify-content:center}.colorblock{border:1px solid #000}.hidden{display:none}.label{padding-top:5px;padding-bottom:5px}.label:focus{outline:2px solid var(--calcite-color-brand)}.label-cell{overflow-wrap:anywhere}.footer-buttons{width:100%;display:flex;flex-direction:column;gap:var(--calcite-spacing-sm)}`;class u extends d.WF{constructor(){super(...arguments),this.flowItemNode=(0,c._)(),this.manageStyleButtonNode=(0,c._)(),this.registerStyleButtonNode=(0,c._)(),this.inputNodes=[],this.labelNodes=[],this.smartMappingState=(0,r.u)(),this.menuOpen=!1,this.showBackButton=!1,this.selected=!1,this.arcgisSmartMappingPanelsRasterColormapBackClick=(0,d.lh)(),this.arcgisSmartMappingPanelsRasterColormapClose=(0,d.lh)()}static{this.properties={menuOpen:5,showBackButton:5,selected:7,beforeBack:0}}static{this.styles=p}async setFocus(){await(this.flowItemNode.value?.setFocus())}load(){const e=(0,n.T)(this.smartMappingState);this.originalRendererObj=i.clone((0,n.T)(this.smartMappingState)),e.colormapInfos.forEach((t,a)=>{t.label||(e.colormapInfos[a].label=" ")}),(0,n.ag)(this.smartMappingState)}async loaded(){requestAnimationFrame(async()=>await(this.flowItemNode.value?.setFocus()))}tableRefHandler(e){const{smartMappingState:t}=this;e&&queueMicrotask(()=>{const a=(0,n.T)(t);e.querySelectorAll(".color").forEach(e=>{const t=Number.parseInt(e.getAttribute("data-value"));this.afterCreateColor(e,a.colormapInfos[t])}),e.querySelectorAll(".input").forEach(e=>{const t=Number.parseInt(e.getAttribute("data-value"));this.inputNodes[t]=e}),e.querySelectorAll(".label").forEach(e=>{if(e){const t=Number.parseInt(e.getAttribute("data-value"));this.labelNodes[t]=e}})})}handleDone(){this.arcgisSmartMappingPanelsRasterColormapClose.emit("save")}handleCancel(){const{originalRendererObj:e,smartMappingState:t}=this;(0,n.ag)(t,e),this.arcgisSmartMappingPanelsRasterColormapClose.emit("cancel")}afterCreateColor(e,t){const a=o.renderColorRampPreviewHTML([t.color.clone()],{gradient:!1,width:20,height:20});a.classList.add("colorblock"),e.replaceChildren(a)}handleValueTextChange(e,t){const{smartMappingState:a}=this,s=(0,n.T)(a),l=t.currentTarget;""===l.value?this.inputNodes[e].value=this.labelNodes[e].textContent:s.colormapInfos[e].label=l.value,(0,n.ag)(a),this.requestUpdate()}render(){const{hideLayerTitle:e,layer:t,_messages:a}=this.smartMappingState,s=t.title;return this.el.classList.add("calcite-match-height"),l.qy`<calcite-flow-item .heading=${a.panels.colormap.styleOptions} .description=${e?void 0:s} class="flow-item" .closable=${(0,n.aa)(this.el)} .showBackButton=${this.showBackButton} .selected=${this.selected} @calciteFlowItemClose=${this.handleDone} @calciteFlowItemBack=${()=>this.arcgisSmartMappingPanelsRasterColormapBackClick.emit()} ${(0,c.K)(this.flowItemNode)}>${this.renderVisualization()}${this.renderFooterButtons()}</calcite-flow-item>`}renderVisualization(){const{smartMappingState:e}=this,{_messages:t}=e,a=(0,n.ah)(e,t.panels.colormap.colormap);return l.qy`<calcite-block class="colormap-block" .heading=${a} expanded>${this.renderManageStyleButton()}${this.renderColormapTable()}</calcite-block>`}renderManageStyleButton(){return l.qy`<arcgis-map-config-smart-mapping-raster-preset-renderer-button mode=edit .originalRasterProps=${{originalRendererObj:this.originalRendererObj}} @arcgisDone=${e=>{"delete"!==e.detail?this.requestUpdate():this.arcgisSmartMappingPanelsRasterColormapBackClick.emit("delete")}} ${(0,c.K)(this.manageStyleButtonNode)}></arcgis-map-config-smart-mapping-raster-preset-renderer-button>`}renderColormapTable(){const{smartMappingState:e}=this,{_messages:t}=e,a=(0,n.T)(e).colormapInfos.map((e,t)=>this.renderColormapRow(e,t));return l.qy`<calcite-table class="table" .caption=${t.panels.colormap.colormapTable} ${(0,c.K)(this.tableRefHandler)}><calcite-table-row slot=table-header><calcite-table-header .heading=${t.panels.colormap.color} alignment=center></calcite-table-header><calcite-table-header .heading=${t.panels.colormap.value} alignment=center></calcite-table-header><calcite-table-header .heading=${t.panels.colormap.label} alignment=center></calcite-table-header></calcite-table-row>${a}</calcite-table>`}renderColormapRow(e,t){return l.qy`<calcite-table-row><calcite-table-cell alignment=center>${this.renderColorNode(t)}</calcite-table-cell><calcite-table-cell alignment=center>${e.value}</calcite-table-cell><calcite-table-cell alignment=center class="label-cell">${this.renderLabelNode(e,t)}</calcite-table-cell></calcite-table-row>`}renderColorNode(e){return l.qy`<div class="color" data-value=${e??d.s6}></div>`}renderLabelNode(e,t){const{_messages:a}=this.smartMappingState;return l.qy`<div class="label" tabindex=0 data-value=${t??d.s6} .ariaLabel=${a.panels.classBreaks.accessibility.editLabelFor.replace("${value}",e.label)} @click=${e=>{this.inputNodes[t].classList.remove("hidden"),this.inputNodes[t].setFocus(),e.target.classList.add("hidden")}} @keydown=${e=>{e.stopPropagation(),(" "===e.key||"Enter"===e.key)&&(this.inputNodes[t].classList.remove("hidden"),this.inputNodes[t].setFocus(),e.target.classList.add("hidden"))}}>${e.label}</div><calcite-input class="input hidden" data-value=${t??d.s6} .value=${e.label??void 0} @calciteInputChange=${e=>{this.inputNodes[t].classList.add("hidden"),this.labelNodes[t].classList.remove("hidden"),this.handleValueTextChange(t,e),this.labelNodes[t].focus()}} @focusout=${e=>{if(this.inputNodes[t].classList.add("hidden"),this.labelNodes[t].classList.remove("hidden"),this.handleValueTextChange(t,e),e.relatedTarget?.className.includes("label")){const t=Number.parseInt(e.relatedTarget.getAttribute("data-value"));this.inputNodes[t].classList.remove("hidden"),this.inputNodes[t].setFocus(),this.labelNodes[t].classList.add("hidden")}}} @keydown=${a=>{if("Escape"===a.key){this.inputNodes[t].classList.add("hidden");const s=a.currentTarget;s.value=e.label||"",s.disabled=!0,this.handleValueTextChange(t,a),this.labelNodes[t].classList.remove("hidden"),s.disabled=!1,this.labelNodes[t].focus()}}}></calcite-input>`}renderFooterButtons(){return l.qy`<div class="footer-buttons" slot=footer>${this.renderDoneButton()}${this.renderRegisterStyleButton()}${this.renderCancelButton()}</div>`}renderRegisterStyleButton(){return l.qy`<arcgis-map-config-smart-mapping-raster-preset-renderer-button mode=register @arcgisDone=${e=>{const{smartMappingState:t}=this;if(this.requestUpdate(),"register"===e.detail){const e=(0,n.T)(t);this.originalRendererObj=i.clone(e)}this.manageStyleButtonNode.value&&this.manageStyleButtonNode.value.manager.component.requestUpdate(),this.registerStyleButtonNode.value.manager.component.requestUpdate()}} ${(0,c.K)(this.registerStyleButtonNode)}></arcgis-map-config-smart-mapping-raster-preset-renderer-button>`}renderDoneButton(){const{_messages:e}=this.smartMappingState;return l.qy`<calcite-button .label=${e.done} @click=${this.handleDone} appearance=solid width=full>${e.done}</calcite-button>`}renderCancelButton(){const{_messages:e}=this.smartMappingState;return l.qy`<calcite-button .label=${e.cancel} @click=${this.handleCancel} appearance=outline-fill width=full>${e.cancel}</calcite-button>`}}(0,s.c)("arcgis-map-config-smart-mapping-panels-raster-colormap",u)},65595:(e,t,a)=>{a.d(t,{c:()=>o,u:()=>n});var s=a(20936),l=a(1225),i=(a(54312),a(44345),a(55448),a(52797),a(34031),a(63438),a(5933),a(28927),a(83368),a(89704),a(5294),a(18423),a(96086),a(91813),a(21255),a(13078),a(21303),a(12627),a(56451),a(31521),a(23054),a(5077),a(23795),a(17902),a(87420),a(30161),a(81734),a(75698),a(10628),a(59640),a(64451),a(6176),a(83552));a(77462),a(49403),a(10281),a(83930),a(66617),a(10454),a(29614),a(94916),a(52554),a(2156),a(4038),a(49851),a(75054),a(15223),a(70169),a(47207),a(70852),a(48103),a(39423),a(85681),a(18444),a(42411),a(9767),a(38218),a(91914),a(86605),a(68196),a(440),a(46547),a(6238),a(7299);function o(e){e.selectedFields=[],e.layerFields=void 0,e.fields=void 0,e.hideLayerTitle=!1,e.supportsArcade=!1,e.stringFieldsCount=-1,e.dateFieldsCount=-1,e.numberFieldsCount=-1,e.containsFlow=!0,e.oneFeatureResponseStatus=l.s.MISSING,e.selectedAttribute=void 0,e.selectedAttributeText=void 0,e.selectedTypeValue=void 0,e.selectedValue=void 0,e.lastDefault=void 0,e.lastDefaults=void 0,e.dotColorSelected=void 0,e.backgroundStyleSelected=void 0,e.lastSettings=void 0,e.classedSymbolSelectedIdx=void 0,e.allUniqueValues=void 0,e.useFeatureReduction=void 0,e.symbolStylerConfig={},e.allowTimeSeriesConfiguration=!1,e.rasterInfo=void 0}function n(){const e=(0,i.Gk)(),t=e;e.manager.onLoad(()=>{t.smartMappingState=function(e,t){const a=r.get(e);if(a)return a;const l=(0,s.el)(e,t);return l&&"store"in l?(r.set(e,l.store),l.store):null}(e.el,"arcgis-map-config-smart-mapping")})}const r=new WeakMap}}]);