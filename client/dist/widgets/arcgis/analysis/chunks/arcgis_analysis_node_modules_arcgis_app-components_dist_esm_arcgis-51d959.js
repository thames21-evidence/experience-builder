/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-51d959.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-51d959"],{12192:(e,i,t)=>{t.d(i,{a:()=>s,g:()=>d});var l=t(15332),a=t(94984),r=t(87849);function s(e){var i,t,r;const s=null!==(i=(0,l.c)(e,"[lang]"))&&void 0!==i?i:null===(r=null===(t=e.shadowRoot)||void 0===t?void 0:t.ownerDocument)||void 0===r?void 0:r.documentElement,n=((null==s?void 0:s.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return a.l.has(n)?a.l.get(n):a.l.has(n.slice(0,2))?a.l.get(n.slice(0,2)):"en"}const n={};function o(e,i){const t=`${e}${i}`;return n[t]||(n[t]=function(e,i){return new Promise((t,l)=>{fetch((0,r.d)(`../arcgis-app-assets/i18n/${e}.i18n.${i}.json`)).then(e=>{e.ok?t(e.json()):l()},()=>l())})}(e,i)),n[t]}async function d(e,i){const t=i||e.tagName.toLowerCase(),r=s(e),n=function(e){var i,t,r;const s=null!==(i=(0,l.c)(e,"[lang]"))&&void 0!==i?i:null===(r=null===(t=e.shadowRoot)||void 0===t?void 0:t.ownerDocument)||void 0===r?void 0:r.documentElement,n=((null==s?void 0:s.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return a.l.has(n)?a.l.get(n):a.l.has(n.slice(0,2))?n:"en"}(e);let d;try{d=await o(t,r)}catch(e){console.warn(`no locale for ${t} (${r}) loading default locale en.`),d=await o(t,"en")}return[d,r,n]}},26854:(e,i,t)=>{t.d(i,{a:()=>o,c:()=>d,g:()=>r,h:()=>a,i:()=>s,r:()=>n});var l=t(15332);function a(e){const i=document.createElement("textarea");return i.innerHTML=e,i.innerText}function r(e){return function(e){return null==e?void 0:e.replace(/&#10;&#13;|&#10;|&#13;|\r\n|\r|\n/g,"<br>")}(function(e){return null==e?void 0:e.replace(/(?:\r)/g,"&#10;").replace(/(?:\n)/g,"&#13;")}(function(e){return null==e?void 0:e.replace(/(https?:\/\/[^\s]+)/g,e=>`<a href="${e}" target="_blank">${e}</a>`)}(function(e){return null==e?void 0:e.replace(/(?:&#10;)/g,"\r").replace(/(?:&#13;)/g,"\n")}(e))))}function s(e){return e.replace(/\$\{startSup\}/g,"<sup>").replace(/\$\{endSup\}/g,"</sup>")}function n(e,i,t){return e.replace(/\$\{startLink\}/g,`<calcite-link label="${t}" href="${i}" target="_blank">`).replace(/\$\{endLink\}/g,"</calcite-link>")}function o(e){return e.replace(/\$\{startStrong\}/g,"<strong>").replace(/\$\{endStrong\}/g,"</strong>")}function d(e){return(0,l.s)((null==e?void 0:e.trim())||"").replace(/[!*+\-&|()[\]{}^~?:"\\]/g,"\\$&")}},38026:(e,i,t)=>{t.r(i),t.d(i,{arcgis_field_add:()=>T,arcgis_field_add_pages_add_field:()=>S,arcgis_field_add_pages_pick_field_type:()=>R});var l=t(87849),a=t(59317),r=t(94984),s=t(12192),n=t(27137),o=t(37762),d=t(90079),c=t(931),p=t(41473),u=t(26854),m=t(74695),h=t(79238);t(15332),t(93814),t(88878),t(83692),t(54251),t(46904),t(24869),t(15912),t(72257),t(86562),t(3826),t(76246),t(58573),t(1536),t(95878),t(29599),t(60958),t(32478);const g=(0,o.c)({itemData:null,layer:null,selectedFieldType:null,selectedFieldTypeCategory:null,i18n:null,formattedStrings:null,options:null}),y=g.state,f=g.dispose,T=class{constructor(e){(0,l.r)(this,e),this.layer=void 0,this.options=void 0,this.primaryButtonText=void 0,this.firstPage={element:"arcgis-field-add-pages-pick-field-type"}}handleNewFieldAddition(){this.layer=y.layer}handlePageUpdate(e){const{i18n:i}=y;this.primaryButtonText=i.next,"arcgis-field-add-pages-add-field"===e.detail.element&&(this.primaryButtonText=i.addField)}async componentWillLoad(){var e,i,t,l;const{layer:o}=this,d=await(0,s.g)(this.el),c=Object.assign(Object.assign({},n.w.i18n),d[0]);y.i18n=c,this.primaryButtonText=y.i18n.next;const p=null!==(i=null===(e=o.portalItem)||void 0===e?void 0:e.portal)&&void 0!==i?i:this.options.portal;a.c.portal=p,a.c.user=p.user,y.layer=this.layer,y.options=this.options;const u={lowerRange:null!==(t=await(0,r.f)(-2147483648))&&void 0!==t?t:"-2147483648",upperRange:null!==(l=await(0,r.f)(2147483648))&&void 0!==l?l:"2147483648"};y.formattedStrings={esriFieldTypeIntegerDescription:c.numbers.types.esriFieldTypeInteger.description.replace("${lowerIntegerRange}",u.lowerRange).replace("${upperIntegerRange}",u.upperRange)}}componentDidLoad(){this.routeFirstPage()}routeFirstPage(){const{i18n:e}=y;this.firstPage={element:"arcgis-field-add-pages-pick-field-type"},this.primaryButtonText=e.next}render(){const{i18n:e}=y;return(0,l.h)(l.H,{key:"6682f662e21c39bac3c743969bea6796acfa1124"},(0,l.h)("arcgis-workflow",{key:"085a9532fc425ba02c12285d63a519e7be3b13a8",headerText:null==e?void 0:e.addField,primaryButtonText:this.primaryButtonText,firstPage:this.firstPage,onArcgisWorkflowUpdatePage:this.handlePageUpdate,onArcgisWorkflowCancel:()=>f()}))}get el(){return(0,l.a)(this)}};const A=2147483647,b=-2147483648,E=2147483647,I=-9e15,F=9e15,v=["text","numbers","dates","globalIdentifiers"],N=["esriFieldTypeString","esriFieldTypeDouble","esriFieldTypeInteger","esriFieldTypeBigInteger","esriFieldTypeDate","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset","esriFieldTypeGlobalID","esriFieldTypeGUID"],O={esriFieldTypeString:["binary","coordinate","dateAndTime","description","emailAddress","locationOrPlaceName","nameOrTitle","orderedOrRanked","phoneNumber","typeOrCategory","uniqueIdentifier"],esriFieldTypeInteger:["binary","coordinate","countOrAmount","currency","measurement","orderedOrRanked","percentageOrRatio","phoneNumber","typeOrCategory","uniqueIdentifier"],esriFieldTypeBigInteger:["countOrAmount","currency","measurement","orderedOrRanked","phoneNumber","typeOrCategory","uniqueIdentifier"],esriFieldTypeDouble:["binary","coordinate","countOrAmount","currency","measurement","orderedOrRanked","percentageOrRatio","typeOrCategory"],esriFieldTypeTime:["dateAndTime"],esriFieldTypeGUID:["uniqueIdentifier"]},D=["ABSOLUTE","ACCESS","ACTION","ADD","ALL","ALLOCATE","ALPHANUMERIC","ALTER","AND","ANY","ARE","AS","ASC","ASSERTION","AT","AUTHORIZATION","AUTOINCREMENT","AVG","BEGIN","BETWEEN","BINARY","BIT","BIT_LENGTH","BOOLEAN","BOTH","BY","BYTE","CASCADE","CASCADED","CASE","CAST","CATALOG","CHAR","CHAR_LENGTH","CHARACTER","CHARACTER_LENGTH","CHECK","CLOSE","COALESCE","COLLATE","COLLATION","COLUMN","COMMENT","COMMIT","CONNECT","CONNECTION","CONSTRAINT","CONSTRAINTS","CONTINUE","CONVERT","CORRESPONDING","COUNT","COUNTER","CREATE","CROSS","CURRENCY","CURRENT","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURSOR","DATABASE","DATE","DATETIME","DAY","DEALLOCATE","DEC","DECIMAL","DECLARE","DEFAULT","DEFERRABLE","DEFERRED","DELETE","DESC","DESCRIBE","DESCRIPTOR","DIAGNOSTICS","DISCONNECT","DISALLOW","DISTINCT","DISTINCTROW","DOMAIN","DOUBLE","DROP","EQV","ELSE","END","END-EXEC","ESCAPE","EXCEPT","EXCEPTION","EXEC","EXECUTE","EXISTS","EXTERNAL","EXTRACT","FALSE","FETCH","FIRST","FLOAT","FLOAT4","FLOAT8","FOR","FOREIGN","FOUND","FROM","FULL","GENERAL","GET","GLOBAL","GO","GOTO","GRANT","GROUP","GUID","HAVING","HOUR","IDENTITY","IEEEDOUBLE","IEEESINGLE","IGNORE","IMMEDIATE","IMAGE","IN","IMP","INDEX","INDICATOR","INITIALLY","INNER","INPUT","INSENSITIVE","INSERT","INT","INTEGER","INTEGER4","INTEGER1","INTEGER2","INTERSECT","INTERVAL","INTO","IS","ISOLATION","JOIN","KEY","LANGUAGE","LAST","LEADING","LEFT","LEVEL","LIKE","LOCAL","LOCK","LOGICAL","LOGICAL1","LONG","LONGBINARY","LONGTEXT","LOWER","MATCH","MAX","MEMO","MIN","MINUTE","MODULE","MONTH","MOD","MONEY","NAMES","NATIONAL","NATURAL","NCHAR","NEXT","NO","NOT","NULL","NULLIF","NUMBER","NUMERIC","OCTET_LENGTH","OF","OFF","OLEOBJECT","ON","ONLY","OPEN","OPTION","OR","ORDER","OUTER","OUTPUT","OWNERACCESS","OVERLAPS","PAD","PARTIAL","PARAMETERS","PERCENT","PIVOT","POSITION","PRECISION","PREPARE","PRESERVE","PRIMARY","PRIOR","PRIVILEGES","PROCEDURE","PUBLIC","READ","REAL","REFERENCES","RELATIVE","RESTRICT","REVOKE","RIGHT","ROLLBACK","ROWID","ROWS","SCHEMA","SCROLL","SECOND","SECTION","SELECT","SESSION","SESSION_USER","SET","SHORT","SINGLE","SIZE","SMALLINT","SOME","SPACE","SQL","SQLCODE","SQLERROR","SQLSTATE","STDEV","STDEVP","STRING","SUBTYPE","SUBSTRING","SUM","SYSTEM_USER","TABLE","TABLEID","TEMPORARY","TEXT","THEN","TIME","TIMESTAMP","TIMEZONE_HOUR","TIMEZONE_MINUTE","TO","TOP","TRAILING","TRANSACTION","TRANSFORM","TRANSLATE","TRANSLATION","TRIM","TRUE","TYPE","UNION","UNIQUE","UNKNOWN","UPDATE","UPPER","USAGE","USER","USING","VALUE","VALUES","VAR","VARCHAR","VARBINARY","VARP","VARYING","VIEW","WHEN","WHENEVER","WHERE","WITH","WORK","WRITE","XOR","YEAR","YESNO","ZONE"];const C={esriFieldTypeInteger:"intDefaultValueError",esriFieldTypeBigInteger:"bigIntDefaultValueError",esriFieldTypeDouble:"doubleDefaultValueError"},S=class{constructor(e){(0,l.r)(this,e),this.arcgisWorkflowCancel=(0,l.c)(this,"arcgisWorkflowCancel",7),this.arcgisWorkflowComplete=(0,l.c)(this,"arcgisWorkflowComplete",7),this.arcgisWorkflowPrimaryButtonTextChange=(0,l.c)(this,"arcgisWorkflowPrimaryButtonTextChange",7),this.arcgisFieldAddFieldAdded=(0,l.c)(this,"arcgisFieldAddFieldAdded",7),this.arcgisWorkflowToggleNavigationEnabled=(0,l.c)(this,"arcgisWorkflowToggleNavigationEnabled",7),this.arcgisWorkflowCloseButtonEnabled=(0,l.c)(this,"arcgisWorkflowCloseButtonEnabled",7),this.arcgisWorkflowLoadingScrimEnabled=(0,l.c)(this,"arcgisWorkflowLoadingScrimEnabled",7),this.selectedFieldValueType=null,this.showNullableToggle=!1,this.payload=void 0,this.layerAfterFieldAddition=void 0,this.nullValueInput=!0,this.payloadIsValid=!0,this.timeDateInputs=void 0,this.timeDatePickerIsValid=!0,this.fieldErrors={nameFieldError:null,lengthFieldError:null,bigIntDefaultValueError:null,doubleDefaultValueError:null,intDefaultValueError:null,timeDefaultValueFieldError:null,dateDefaultValueFieldError:null,timezoneDefaultValueFieldError:null,stringDefaultValueFieldError:null},this.nameFieldErrorTest=null,this.dateTimeDefaultValueIsValid=!0,this.dateTimeDefaultValueIsActive=!1,this.error=void 0,this.addInProgress=!1}async navigateToNextPage(){var e,i;const{i18n:t}=y,l=null===(e=a.c.portal.sourceJSON)||void 0===e?void 0:e.isReadOnly,r=await(null===(i=this.descriptionRef)||void 0===i?void 0:i.getErrorMessage());if(r)return void(this.error={title:t.error,message:r.translatedMessage});if(l)return void this.handleError(!0);if(!this.validatePayload())return this.payloadIsValid=!1,void(this.error={title:t.addFieldErrors.invalidFieldParameters,message:t.addFieldErrors.invalidInputsError});this.payload.type=y.selectedFieldType,this.payload.hasOwnProperty("defaultValue")&&!this.payload.defaultValue&&delete this.payload.defaultValue;const s={fields:[this.payload]},n=JSON.stringify(s);this.addInProgress=!0,this.disableModalButtons(!0),this.handleAddField(n,y.selectedFieldType)}handleFieldDescriptionInputChange(e){const{detail:i}=e;this.descriptionInput=i}handleAddScrim(){this.addInProgress?this.arcgisWorkflowLoadingScrimEnabled.emit({loading:!0,loadingText:y.i18n.addingField}):this.arcgisWorkflowLoadingScrimEnabled.emit({loading:!1})}async componentWillLoad(){var e,i;const{i18n:t,layer:l,selectedFieldType:a,options:r}=y;this.arcgisWorkflowPrimaryButtonTextChange.emit(t.addField),this.layerInfoToUpdate={},this.itemUrl=r?r.item.url:l.url;const s=null!==(e=null==l?void 0:l.portalItem)&&void 0!==e?e:r.item,n="Feature Layer"===l.type||"Table"===l.type||"feature"===l.type,o="Oriented Imagery Layer"===l.type||"oriented-imagery"===l.type;await this.loadAllModules(),await this.modules.IdentityManager.getCredential(s.url.replace("rest/services","rest/admin/services"));let d=0,c=l.popupTemplate;if(n||o){const e=new this.modules[""+(n?"FeatureLayer":"OrientedImageryLayer")]({url:`${this.itemUrl}/${null!==(i=null==l?void 0:l.layerId)&&void 0!==i?i:l.id}`,portalItem:s});await e.load(),d=await(null==e?void 0:e.queryFeatureCount()),l.popupTemplate||(c=e.popupTemplate)}else if(!l.popupTemplate&&"load"in l){c=(await l.load()).popupTemplate}switch(this.showNullableToggle=0===d,this.popupTemplate=c,await this.modules.request(this.itemUrl.replace("/rest/services","/rest/admin/services"),{query:{f:"json"},responseType:"json"}).then(async e=>{const i=e.data;this.maxFieldNameLength=i.maxFieldNameLength},()=>this.maxFieldNameLength=128),this.payload={name:"",type:"",alias:"",nullable:!0,editable:!0},this.timeDateInputs={date:"",time:""},a){case"esriFieldTypeGlobalID":this.payload.name="GlobalID",this.payload.alias="GlobalID",this.payload.nullable=!1,this.payload.editable=!1,this.payload.defaultValue="NEWID() WITH VALUES";break;case"esriFieldTypeString":this.payload.length=256;break;case"esriFieldTypeTimestampOffset":this.timeDateInputs.timezone="";break;case"esriFieldTypeGUID":this.selectedFieldValueType="uniqueIdentifier"}this.handlePickerConditions()}render(){const{error:e,fieldErrors:i,addInProgress:t}=this,{selectedFieldType:a,selectedFieldTypeCategory:r,i18n:s}=y,{nameFieldError:n}=i,o="esriFieldTypeTimeOnly"===a||"esriFieldTypeDateOnly"===a||"esriFieldTypeTimestampOffset"===a||"esriFieldTypeBigInteger"===a,d=s[r].types[a].title;let c=s[r].types[a].description;return"esriFieldTypeInteger"===a&&(c=y.formattedStrings.esriFieldTypeIntegerDescription),(0,l.h)(l.H,{key:"23e346897ae3ea15c9174bdb43854a1774fe5310",class:{"overflow-hidden":t}},(0,l.h)("div",{key:"3f9fba1a3393204eade28c9107a7dfe22e5d08a8",class:"field-header-section"},(0,l.h)("div",{key:"e7df8cf5320196ed862c9d4d21f82726b56d8f39",class:"field-type-header"},(0,l.h)("div",{key:"e716851f6ebac57f1554ce7367e7ea1d61f4d1dd",class:"field-type-text"},(0,l.h)("p",{key:"ec46582b8f961581ee53710ac21d54f74f967616",class:"field-type-title"},d),(0,l.h)("p",{key:"b4ead1ff427192dcd3bd160553e157bcc4ce0833",class:"field-type-description",innerHTML:"esriFieldTypeBigInteger"===a?(0,u.i)(c):c})),(0,l.h)("div",{key:"7aa491c80fe5af4b912be24af3b92755b06e2043",class:"field-type-icon"},(0,l.h)("calcite-icon",{key:"3cfc392982dffc80c4fbade08a7532aa76fb6180",icon:h.f[a]}))),(0,l.h)("hr",{key:"89a91c0c429f9af6e91ea0f846d97ac24b1ea747",class:"line-breaker"}),o&&(0,l.h)("calcite-notice",{key:"174cc95476ce8c16f4dacda56c2eeb85ce1a5ac6",open:!0,class:"new-field-type-notice",icon:"information",scale:"s"},(0,l.h)("div",{key:"129e8120c386abea8f0c1b5dfbb4fab92981caa5",slot:"title"},s.newFieldTypeNotice))),"esriFieldTypeGlobalID"!==a?(0,l.h)("div",{class:"main-input-fields-container"},(0,l.h)("calcite-label",{class:"field-section"},s.fieldName,(0,l.h)("calcite-input",{status:null==n?void 0:n.status,required:!0,onCalciteInputInput:e=>{const i=e.target.value;this.handlePayloadInput(i,"name")}}),n&&(0,l.h)("calcite-input-message",{icon:null==n?void 0:n.icon,status:null==n?void 0:n.status},null==n?void 0:n.message)),(0,l.h)("calcite-label",{class:"field-section"},s.displayName,(0,l.h)("calcite-input",{onCalciteInputInput:e=>{const i=e.target.value;this.handlePayloadInput(i,"alias")}})),"esriFieldTypeString"===a&&(0,l.h)("calcite-label",{class:"field-section"},s.length,this.renderLengthField()),this.renderNullableToggle(),(0,l.h)("hr",{class:"line-breaker"}),"esriFieldTypeGUID"!==a&&(0,l.h)("calcite-label",{class:"field-section"},s.defaultValue,this.fieldsToShow.enableNormalPicker?"esriFieldTypeString"===a?this.renderTextDefaultValue():this.renderNumberDefaultValue():(0,l.h)("div",{class:"time-date-pickers"},this.fieldsToShow.enableDatePicker&&this.renderDatePicker(),this.fieldsToShow.enableTimePicker&&this.renderTimePicker(),this.fieldsToShow.enableTimezonePicker&&this.renderTimezonePicker())),this.renderFieldDescriptionArea(),(0,l.h)("calcite-label",{class:"field-section"},s.fieldValueType,this.renderFieldValueTypeCombobox())):(0,l.h)("calcite-notice",{open:!0,class:"global-id-notice",icon:"information",scale:"s"},(0,l.h)("div",{slot:"title"},s.addGlobalIDNotice)),(0,l.h)("arcgis-new-item-alert",{key:"48c946bb34ac15cee4860ed92b5a06358e12027a",heading:null==e?void 0:e.title,description:null==e?void 0:e.message,active:!!e,onAlertDismiss:()=>this.error=null}))}renderNullableToggle(){const{i18n:e}=y;return(0,l.h)("calcite-label",{layout:"inline",class:"field-section"},(0,l.h)("calcite-switch",{id:"toggleNullValues",disabled:!this.showNullableToggle,checked:this.nullValueInput,onCalciteSwitchChange:e=>{this.nullValueInput=e.target.checked,this.handlePayloadInput(this.nullValueInput,"nullable")}}),e.allowNullValues,!this.showNullableToggle&&(0,l.h)("div",{class:"nullable-toggle-info"},(0,l.h)("calcite-icon",{id:"nullable-information",class:"nullable-info-tooltip",icon:"information",scale:"s"}),(0,l.h)("calcite-tooltip",{"reference-element":"nullable-information"},(0,l.h)("span",null,e.nullableTooltipInfo))))}renderTextDefaultValue(){const{stringDefaultValueFieldError:e}=this.fieldErrors;return(0,l.h)("div",null,(0,l.h)("calcite-input",{type:"text",onCalciteInputInput:e=>{const i=e.target.value;this.handlePayloadInput(i,"defaultValue")}}),e&&(0,l.h)("calcite-input-message",{class:"default-text-input-message",icon:null==e?void 0:e.icon,status:null==e?void 0:e.status},null==e?void 0:e.message))}renderNumberDefaultValue(){const{selectedFieldType:e}=y,{max:i,min:t}=function(e){let i,t;switch(e){case"esriFieldTypeBigInteger":i=Number.MAX_SAFE_INTEGER,t=Number.MIN_SAFE_INTEGER;break;case"esriFieldTypeDouble":default:i=F,t=I;break;case"esriFieldTypeInteger":i=E,t=b}return{max:i,min:t}}(e),a="esriFieldTypeDouble"===e,r=this.fieldErrors[C[e]];let s;const n=()=>{this.handlePayloadInput(s,"defaultValue"),this.inputNumberNode.value=this.payload.defaultValue};return(0,l.h)("calcite-input-number",{ref:e=>this.inputNumberNode=e,inputMode:"decimal",max:i,min:t,integer:!a,step:a?.01:1,status:r?"invalid":"idle","validation-icon":r?"exclamation-mark-triangle":null,"validation-message":r,onCalciteInputNumberInput:e=>{s=e.target.value,a||this.handlePayloadInput(s,"defaultValue")},onBlur:()=>{a&&n()}})}renderLengthField(){const{lengthFieldError:e}=this.fieldErrors;return(0,l.h)("calcite-input-number",{integer:!0,inputMode:"decimal",min:1,max:A,value:`${this.payload.length}`,required:!0,status:e?"invalid":"idle","validation-icon":e?"exclamation-mark-triangle":null,"validation-message":e,onCalciteInputNumberInput:e=>{const i=Number(e.target.value);this.handlePayloadInput(i,"length")}})}renderDatePicker(){const{dateDefaultValueFieldError:e}=this.fieldErrors;return(0,l.h)("calcite-input-date-picker",{placement:"bottom-start",overlayPositioning:"fixed",class:"time-date-picker "+(e?"error-active":""),required:!!e,status:e?"invalid":"idle","validation-icon":e?"exclamation-mark-triangle":null,"validation-message":e,onCalciteInputDatePickerChange:e=>{const i=e.target.value,t=Array.isArray(i)?i[0]:i;this.handleTimeDatePickerInputs(t,"date")}})}renderTimePicker(){const{timeDefaultValueFieldError:e}=this.fieldErrors;return(0,l.h)("calcite-input-time-picker",{step:1,class:"time-date-picker "+(e?"error-active":""),required:!!e,status:e?"invalid":"idle","validation-icon":e?"exclamation-mark-triangle":null,"validation-message":e,onCalciteInputTimePickerChange:e=>{const i=e.target.value;this.handleTimeDatePickerInputs(i,"time")}})}renderTimezonePicker(){const{timezoneDefaultValueFieldError:e}=this.fieldErrors;return(0,l.h)("calcite-input-time-zone",{clearable:!0,maxItems:8,value:this.timeDateInputs.timezone||null,ref:e=>this.timeZoneEl=e,class:"time-date-picker "+(e?"error-active":""),status:e?"invalid":"idle","validation-icon":e?"exclamation-mark-triangle":null,"validation-message":e,onCalciteInputTimeZoneChange:e=>{const i=e.target.value;this.handleTimeDatePickerInputs(i,"timezone")}})}renderFieldValueTypeCombobox(){const{i18n:e,selectedFieldType:i}=y,t="esriFieldTypeDate"===(a=i)||"esriFieldTypeDateOnly"===a||"esriFieldTypeTimeOnly"===a||"esriFieldTypeTimestampOffset"===a?"esriFieldTypeTime":i;var a;const r=O[t].sort(),s=Object.keys(e.fieldValueTypes).filter(e=>!r.includes(e)&&"none"!==e).sort();return(0,l.h)("calcite-combobox",{maxItems:7,label:e.fieldValueType,selectionMode:"single-persist",onCalciteComboboxChange:e=>{const i=e.target.value;this.selectedFieldValueType=i}},(0,l.h)("calcite-combobox-item-group",{label:e.suggestedHeader},r.map(t=>(0,l.h)("calcite-combobox-item",{value:t,textLabel:e.fieldValueTypes[t],selected:"esriFieldTypeGUID"===i&&"uniqueIdentifier"===t}))),(0,l.h)("calcite-combobox-item-group",{label:e.otherHeader},s.map(i=>(0,l.h)("calcite-combobox-item",{value:i,textLabel:e.fieldValueTypes[i]}))))}renderFieldDescriptionArea(){const{i18n:e}=y;return(0,l.h)("arcgis-field-description-input",{trimInput:!0,label:e.fieldDescription,placeholder:e.provideDescription,maxLength:500,ref:e=>this.descriptionRef=e})}async loadAllModules(){const[e,i,t,l,a,r,s,n,o,d]=await(0,c.l)(["esri/request","esri/layers/support/FeatureTemplate","esri/Graphic","esri/layers/FeatureLayer","esri/identity/IdentityManager","esri/layers/OrientedImageryLayer","esri/layers/support/FieldConfiguration","esri/layers/support/DateTimeFieldFormat","esri/layers/support/NumberFieldFormat","esri/popup/FieldInfo"]);this.modules={request:e,FeatureTemplate:i,Graphic:t,FeatureLayer:l,IdentityManager:a,OrientedImageryLayer:r,FieldConfiguration:s,DateTimeFieldFormat:n,NumberFieldFormat:o,FieldInfo:d}}async handleAddField(e,i){var t,l,a,r,s,n,o;const{layer:d,i18n:c}=y,{request:p}=this.modules;try{const c={layer:d},u=`${this.itemUrl}/${null!==(t=null==d?void 0:d.layerId)&&void 0!==t?t:d.id}`,h="esriFieldTypeGlobalID"===i||"global-id"===i;await(0,m.a)(e,u,h),await p(u,{query:{f:"json"},method:"post",responseType:"json"}).then(async e=>{c.serviceInfo=e.data,this.layerAfterFieldAddition=e.data},()=>this.handleError());const g=(null!==(a=null===(l=null==this?void 0:this.layerAfterFieldAddition)||void 0===l?void 0:l.fields)&&void 0!==a?a:null===(r=c.layer)||void 0===r?void 0:r.fields).filter(e=>e.name.toLowerCase()===this.payload.name.toLowerCase()&&(e.name!==this.payload.name&&(this.payload.name=e.name,c.name=e.name),!0))[0];this.newFieldName=g.name;const f=function(e,i,t){let l={};switch(i.type){case"esriFieldTypeBigInteger":case"esriFieldTypeInteger":l.places=0,l.digitSeparator=!0;break;case"esriFieldTypeDouble":l.places=2,l.digitSeparator=!0;break;case"esriFieldTypeTimestampOffset":case"esriFieldTypeDate":case"esriFieldTypeTimeOnly":l.dateFormat="short-date-short-time",l.digitSeparator=null;break;case"esriFieldTypeDateOnly":l.dateFormat="short-date",l.digitSeparator=null;break;default:l=null}const a=new t.FieldInfo(Object.assign(Object.assign({fieldName:i.name,label:i.alias,isEditable:i.editable,tooltip:""},l&&{format:l}),{visible:!0,stringFieldOption:"text-box"}));e&&e.fieldInfos&&(e.fieldInfos.some(e=>e.fieldName===(null==a?void 0:a.fieldName))||e.fieldInfos.push(a));return e}(null!==(n=null===(s=this.popupTemplate)||void 0===s?void 0:s.clone())&&void 0!==n?n:this.popupTemplate,g,this.modules);this.layerInfoToUpdate.popupInfo=f,c.popupInfo=f,y.layer.popupTemplate=f,this.updateTypesAndTemplatesOnLayer(),(null===(o=c.serviceInfo.templates)||void 0===o?void 0:o.length)?c.serviceInfo.templates.forEach(e=>{"esriFieldTypeGlobalID"!==y.selectedFieldType&&(e.prototype.attributes[g.name]=g.defaultValue||null)}):c.serviceInfo.types.forEach(e=>{e.templates.forEach(e=>{"esriFieldTypeGlobalID"!==y.selectedFieldType&&(e.prototype.attributes[g.name]=g.defaultValue||null)})}),this.updateFeatureService(g,i,c,this.modules.request)}catch(e){console.error(e),this.addInProgress=!1,this.disableModalButtons(!1),this.error={title:c.addFieldErrors.genericAddFieldError.title,message:c.addFieldErrors.genericAddFieldError.description}}}updateTypesAndTemplatesOnLayer(){var e;const{layerAfterFieldAddition:i}=this,t=i;if(null===(e=t.templates)||void 0===e?void 0:e.length){const e=this.updateTemplatesList(t.templates);t.templates=e}else if(t.types){const e=t.types;t.types=[],e.forEach(e=>{e.templates=this.updateTemplatesList(e.templates),this.addType(t,e)})}}updateTemplatesList(e){const{i18n:i}=y,{layerAfterFieldAddition:t}=this,{modules:l}=this,a=[];return(null!=e?e:[]).forEach(e=>{var r;const s=new l.FeatureTemplate;s.description=null!==(r=e.description)&&void 0!==r?r:"",s.name=e.name||i.newFeature,s.drawingTool=e.drawingTool||"point";const n={};t.fields.forEach(i=>{let t=!1;for(const l in e.prototype.attributes)if(l===i.name){t=!0,n[i.name]=e.prototype.attributes[i.name];break}!t&&i.editable&&(n[i.name]=i.defaultValue||null)});const o=new l.Graphic({attributes:n});s.prototype=o,a.push(s)}),a}addType(e,i){if(e.types){e.types.some(e=>e.id===i.id)||e.types.push(i)}else e.types=[i]}async updateFeatureService(e,i,t,l){var r,s,n;const{portal:o}=a.c,{i18n:c,layer:u,options:m}=y,{payload:h}=this,g=null!==(r=null==u?void 0:u.portalItem)&&void 0!==r?r:m.item,f=t.serviceInfo.types.flatMap(e=>e.templates);let T=t.serviceInfo.templates;if(!T.length&&!f.length){const e={name:c.newFeature,description:"",drawingTool:"esriFeatureEditToolPoint",prototype:{attributes:{}}};this.layerAfterFieldAddition.fields.forEach(i=>{"esriFieldTypeGlobalID"!==y.selectedFieldType&&(e.prototype.attributes[i.name]=i.defaultValue||null)}),T=[e]}const A={templates:T,types:t.serviceInfo.types};let b=JSON.stringify(A);if(this.selectedFieldValueType||this.descriptionInput){h.description=JSON.stringify({value:this.descriptionInput||"",fieldValueType:null!==(s=this.selectedFieldValueType)&&void 0!==s?s:""}),h.domain=null,A.fields=[h];b=JSON.stringify(A)}const E=`${this.itemUrl.replace("/rest/services","/rest/admin/services")}/${null!==(n=null==u?void 0:u.layerId)&&void 0!==n?n:u.id}/updateDefinition`,I={f:"json",updateDefinition:b};await l(E,{query:Object.assign(Object.assign({},I),{f:"json"}),method:"post",responseType:"json"}).then(async a=>{var r;if(null===(r=a.data)||void 0===r?void 0:r.success){const a=t.serviceInfo;if(a){const e=a.fields;e.forEach((i,t)=>e[t].type=d.e[e[t].type]),this.layerInfoToUpdate.fields=e}const r=`${(0,p.g)(o)}content/items/${g.id}/data`;await l(r,{query:{f:"json"},method:"get",responseType:"json"}).then(async a=>{var r;const s=a.data;if((null==s?void 0:s.layers)||(null==s?void 0:s.tables)){const a=u.isTable||"table"===u.type.toLowerCase(),n=a?s.tables:s.layers,d=null==n?void 0:n.findIndex(e=>{var i;return e.id===(null!==(i=null==u?void 0:u.layerId)&&void 0!==i?i:u.id)}),c=n[d],m=null==c?void 0:c.popupInfo;if(c){if(m&&(n[d].popupInfo.fieldInfos=[...t.popupInfo.fieldInfos]),c&&!c.layerType){const t=n[d].layerDefinition;(null===(r=null==t?void 0:t.fieldConfigurations)||void 0===r?void 0:r.length)>0&&(n[d].layerDefinition.fieldConfigurations=function(e,i,t,l){const a=[...e.layerDefinition.fieldConfigurations],r=function(e,i){switch(e){case"esriFieldTypeDouble":return new i.NumberFieldFormat({maximumFractionDigits:2,minimumFractionDigits:0,useGrouping:"auto"});case"esriFieldTypeInteger":case"esriFieldTypeBigInteger":return new i.NumberFieldFormat({maximumFractionDigits:0,minimumFractionDigits:0,useGrouping:"always"});case"esriFieldTypeDate":case"esriFieldTypeTimestampOffset":return new i.DateTimeFieldFormat({timeStyle:"short",dateStyle:"short",hour12:"always"});case"esriFieldTypeDateOnly":return new i.DateTimeFieldFormat({dateStyle:"short"});case"esriFieldTypeTimeOnly":return new i.DateTimeFieldFormat({hour12:"always",timeStyle:"short"});default:return null}}(t,l);if(r){const e={name:i.name,fieldFormat:r};a.push(new l.FieldConfiguration(e).toJSON())}return a}(c,e,i,this.modules))}const u=`${(0,p.g)(o)}content/users/${g.owner}/items/${g.id}/update`,h=a?Object.assign({tables:n},s.layers&&{layers:s.layers}):Object.assign({layers:n},s.tables&&{tables:s.tables}),y={f:"json",text:JSON.stringify(h)};await l(u,{query:Object.assign({f:"json"},y),method:"post",responseType:"json"}).then(e=>{var i;(null===(i=e.data)||void 0===i?void 0:i.success)?this.handleSuccess():this.handleError()},()=>this.handleError())}else this.handleSuccess()}else 200!==a.httpStatus||a.data&&"{}"!==JSON.stringify(a.data)?this.handleError():this.handleSuccess()},()=>this.handleError())}},()=>this.handleError())}validatePayload(){var e;return"esriFieldTypeGlobalID"!==y.selectedFieldType&&this.checkFieldErrors(),this.dateTimeDefaultValueIsValid&&(!this.fieldErrors.nameFieldError||"invalid"!==(null===(e=this.fieldErrors.nameFieldError)||void 0===e?void 0:e.status))&&!this.fieldErrors.lengthFieldError&&!this.fieldErrors.bigIntDefaultValueError&&!this.fieldErrors.doubleDefaultValueError&&!this.fieldErrors.intDefaultValueError}checkFieldErrors(){const{payload:e,fieldErrors:i,maxFieldNameLength:t}=this,{layer:l,selectedFieldType:a,i18n:r}=y,s=Object.assign({},i);switch(s.nameFieldError=function(e,i,t){const{addFieldErrors:l}=y.i18n,a={icon:"exclamation-mark-triangle",status:"invalid",message:null},r=e.toUpperCase(),s=D.includes(r),n=/[\`\~\@\#\$\%\^\&\*\(\)\\\-\+\=\|\,<>\?\/\{\}\.\!\'\[\]\:\;\n\r\s\"]/.test(e)||/[\`\~\@\#\$\%\^\&\*\(\)\\\-\+\=\|\,<>\?\/\{\}\.\!\'\[\]\:\;\n\r\d\_\"]/.test(e.charAt(0)),o=i.some(i=>i.name.toLowerCase()===e.toLowerCase()),d=e.length>t,c=+e[0],p=e.length>31;switch(!0){case!e.length:a.message=l.valueIsRequiredError;break;case!!c:case n:a.message=l.invalidNameInputInvalidCharactersError;break;case s:a.message=l.invalidNameInputSQLError;break;case o:a.message=l.existingFieldNameError;break;case d:a.message=l.lengthExceeds.replace("${maxFieldNameLength}",`${t}`);break;case p:a.icon="information",a.status="idle",a.message=y.i18n.fieldNameCharacterNotice}return a.message?a:null}(e.name,l.fields,t),!0){case"esriFieldTypeString"===a:s.lengthFieldError=function(e){const{addFieldErrors:i}=y.i18n;return e<1||e>A?i.outOfRangeValueError:null}(e.length),s.stringDefaultValueFieldError=e.defaultValue&&function(e,i){const{addFieldErrors:t}=y.i18n;return i.length>e?{icon:"information",status:"idle",message:t.defaultValueExceeds}:null}(e.length,e.defaultValue);break;case"esriFieldTypeInteger"===a:case"esriFieldTypeDouble"===a:case"esriFieldTypeBigInteger"===a:s[C[a]]=function(e,i){const{addFieldErrors:t}=y.i18n;switch(e){case"esriFieldTypeBigInteger":if(i>Number.MAX_SAFE_INTEGER||i<Number.MIN_SAFE_INTEGER)return t.outOfRangeValueError;break;case"esriFieldTypeDouble":if(i>F||i<I)return t.outOfRangeValueError;break;case"esriFieldTypeInteger":if(i>E||i<b)return t.outOfRangeValueError}return null}(a,e.defaultValue);break;case("esriFieldTypeDate"===a||"esriFieldTypeTimestampOffset"===a)&&!this.dateTimeDefaultValueIsValid:s.timeDefaultValueFieldError=this.timeDateInputs.time.length?null:r.addFieldErrors.valueIsRequiredError,s.dateDefaultValueFieldError=this.timeDateInputs.date.length?null:r.addFieldErrors.valueIsRequiredError,"esriFieldTypeTimestampOffset"===a&&(s.timezoneDefaultValueFieldError=this.timeDateInputs.timezone.length?null:r.addFieldErrors.valueIsRequiredError)}this.fieldErrors=Object.assign({},s)}handlePayloadInput(e,i){const{selectedFieldType:t}=y;let l=e;if("defaultValue"===i&&e)switch(t){case"esriFieldTypeTimeOnly":l=`${e}`;break;case"esriFieldTypeDouble":l=function(e){let i=e;if(null==e?void 0:e.includes(".")){const t=e.split(".");if(null==t?void 0:t.length){const e=t[1].length,l=Number(t[0]);l!==F&&l!==I||(i=Math.round(Number(i))),e>3&&(i=Number(i).toFixed(3))}}return`${i}`}(e)}this.payload[i]=l,this.checkFieldErrors()}checkIfTimeDatePickerValid(){const e=Object.values(this.timeDateInputs).every(e=>!!e),i=Object.values(this.timeDateInputs).every(e=>!e);return this.dateTimeDefaultValueIsValid=e||i,this.dateTimeDefaultValueIsValid}handleTimeDatePickerInputs(e,i){const{selectedFieldType:t}=y;switch(t){case"esriFieldTypeDate":this.timeDateInputs[i]=e,this.timeDateInputs.date&&this.timeDateInputs.time?this.handlePayloadInput((l=this.timeDateInputs.time,a=this.timeDateInputs.date,Date.parse(`${a} ${l}`)),"defaultValue"):this.timeDateInputs.date||this.timeDateInputs.time||(this.dateTimeDefaultValueIsValid=!0,this.handlePayloadInput("","defaultValue"));break;case"esriFieldTypeTimestampOffset":this.timeDateInputs[i]=e,this.timeDateInputs.timezone=this.timeZoneEl.value,this.timeDateInputs.date&&this.timeDateInputs.time&&this.timeDateInputs.timezone?this.handlePayloadInput(function(e,i,t){const l=Math.floor(Number(t)/60),a=l<0?-1*l:l,r=Number(t)%60;return`${e}T${i}${l<0?"-":"+"}${String(a).padStart(2,"0")}:${r>0?r:"00"}`}(this.timeDateInputs.date,this.timeDateInputs.time,this.timeDateInputs.timezone),"defaultValue"):this.timeDateInputs.date||this.timeDateInputs.time||this.timeDateInputs.timezone||(this.dateTimeDefaultValueIsValid=!0,this.handlePayloadInput("","defaultValue"));break;case"esriFieldTypeTimeOnly":case"esriFieldTypeDateOnly":this.handlePayloadInput(e,"defaultValue")}var l,a;this.dateTimeDefaultValueIsActive=Object.values(this.timeDateInputs).some(e=>e.length>0),this.checkIfTimeDatePickerValid()}handlePickerConditions(){const{selectedFieldType:e}=y,i="esriFieldTypeDate"===e||"esriFieldTypeTimestampOffset"===e,t=i||"esriFieldTypeTimeOnly"===e,l=i||"esriFieldTypeDateOnly"===e,a="esriFieldTypeTimestampOffset"===e,r=!t&&!l&&!a;this.fieldsToShow={enableNormalPicker:r,enableTimePicker:t,enableDatePicker:l,enableTimezonePicker:a}}disableModalButtons(e){this.arcgisWorkflowToggleNavigationEnabled.emit(!e),this.arcgisWorkflowCloseButtonEnabled.emit(!e)}handleSuccess(){(null==y?void 0:y.options)||this.displaySuccessAlert(),this.arcgisFieldAddFieldAdded.emit(this.newFieldName),f(),this.arcgisWorkflowComplete.emit("success")}displaySuccessAlert(){const{i18n:e}=y,i=document.createElement("calcite-alert");i.kind="success",i.icon="check-circle";const t=document.createElement("div");t.slot="message",t.innerHTML=e.fieldAdded,i.append(t),i.open=!0,i.autoClose=!0,document.body.append(i)}displayErrorAlert(){var e;const{i18n:i}=y;this.errorAlertNode&&(null===(e=this.errorAlertNode.parentElement)||void 0===e||e.removeChild(this.errorAlertNode),this.errorAlertNode=void 0);const t=this.errorAlertNode=document.createElement("calcite-alert");t.kind="danger",t.icon="exclamation-mark-triangle";const l=document.createElement("div");l.slot="message",l.innerHTML=i.fieldAdditionUnsuccessful,t.append(l),t.open=!0,t.autoClose=!0,document.body.append(t)}displayReadOnlyErrorAlert(){var e;const{i18n:i}=y,{portal:t}=a.c;this.errorAlertNode&&(null===(e=this.errorAlertNode.parentElement)||void 0===e||e.removeChild(this.errorAlertNode),this.errorAlertNode=void 0);const l=this.errorAlertNode=document.createElement("calcite-alert");l.kind="danger",l.autoCloseDuration="slow",l.icon="exclamation-mark-triangle";const r=document.createElement("div");r.slot="title",r.innerHTML=i.error;const s=document.createElement("div");if(s.slot="message",s.innerHTML=t.isPortal?i.addFieldErrors.readOnlyErrorMessageEnterprise:i.addFieldErrors.readOnlyErrorMessage,l.appendChild(r),l.appendChild(s),!t.isPortal){const e=document.createElement("calcite-link");e.slot="link",e.innerHTML=i.addFieldErrors.healthDashboard,e.href="https://status.arcgis.com",e.target="_blank",l.appendChild(e)}l.open=!0,l.autoClose=!0,document.body.append(l)}handleError(e){(null==y?void 0:y.options)?e?(this.arcgisFieldAddFieldAdded.emit(this.newFieldName),this.arcgisWorkflowCancel.emit("read-only-error")):this.arcgisWorkflowCancel.emit("error"):(e?(this.displayReadOnlyErrorAlert(),this.arcgisFieldAddFieldAdded.emit(this.newFieldName)):this.displayErrorAlert(),this.arcgisWorkflowCancel.emit())}get el(){return(0,l.a)(this)}static get watchers(){return{addInProgress:["handleAddScrim"]}}};S.style=".field-type-block.sc-arcgis-field-add-pages-add-field{margin-bottom:1.25rem}.time-date-pickers.sc-arcgis-field-add-pages-add-field{display:flex;flex-direction:column;gap:0.75rem}.new-field-type-notice.sc-arcgis-field-add-pages-add-field{padding-bottom:1rem;color:var(--calcite-color-text-1)}.field-section.sc-arcgis-field-add-pages-add-field{margin-bottom:0.75rem}.global-id-notice.sc-arcgis-field-add-pages-add-field{color:var(--calcite-color-text-1)}.error-active.sc-arcgis-field-add-pages-add-field{margin-bottom:0.5rem}.loader.sc-arcgis-field-add-pages-add-field{--calcite-loader-text-weight:500}.character-notice-icon.sc-arcgis-field-add-pages-add-field{--calcite-ui-icon-color:var(--calcite-color-brand)}calcite-block.sc-arcgis-field-add-pages-add-field{border-width:2px;border-style:solid;border-color:var(--calcite-color-border-3)}.default-text-input-message.sc-arcgis-field-add-pages-add-field{--calcite-input-message-spacing-value:0.75rem}.field-type-header.sc-arcgis-field-add-pages-add-field{margin-top:0.5rem;margin-bottom:0.75rem;display:flex;align-items:center}.field-type-title.sc-arcgis-field-add-pages-add-field{margin-top:0px;margin-bottom:0px;font-size:1rem;font-weight:500;color:var(--calcite-color-text-1)}.field-type-description.sc-arcgis-field-add-pages-add-field{margin-top:0px;margin-bottom:0px;font-size:0.875rem}.field-type-icon.sc-arcgis-field-add-pages-add-field{margin-inline-start:auto}.line-breaker.sc-arcgis-field-add-pages-add-field{margin-bottom:1rem;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-3)}.nullable-info-tooltip.sc-arcgis-field-add-pages-add-field{color:var(--calcite-color-text-3)}";const R=class{constructor(e){(0,l.r)(this,e),this.arcgisWorkflowUpdatePage=(0,l.c)(this,"arcgisWorkflowUpdatePage",7),this.arcgisWorkflowPrimaryButtonTextChange=(0,l.c)(this,"arcgisWorkflowPrimaryButtonTextChange",7),this.selectedFieldType=null,this.selectedFieldTypeCategory=null,this.errorMessage=void 0}async navigateToNextPage(){const{selectedFieldTypeCategory:e,selectedFieldType:i}=this,{i18n:t}=y;e||i?(y.selectedFieldTypeCategory=e,y.selectedFieldType=i,this.arcgisWorkflowUpdatePage.emit({element:"arcgis-field-add-pages-add-field"})):this.errorMessage={title:t.noFieldTypeSelected,description:t.nullFieldTypeError}}async componentWillLoad(){var e,i;const{selectedFieldTypeCategory:t,selectedFieldType:l,layer:r,i18n:s,options:n}=y;this.availableFieldTypes={},this.availableFieldTypeCategories=[...v],[...N].forEach(e=>{this.availableFieldTypes[e]={type:e,disabled:!1}}),this.selectedFieldTypeCategory=t,this.selectedFieldType=l,this.portal=a.c.portal,this.setUpAvailableDataTypes(null!==(i=null===(e=null==r?void 0:r.portalItem)||void 0===e?void 0:e.sourceJSON)&&void 0!==i?i:n),this.arcgisWorkflowPrimaryButtonTextChange.emit(s.next)}render(){const{availableFieldTypeCategories:e,selectedFieldTypeCategory:i,errorMessage:t}=this,{i18n:a}=y;return(0,l.h)(l.H,{key:"32691dceceb86cf4a15a91d36fac2487639030c3"},(0,l.h)("calcite-label",{key:"983959d5981a6996d7e9fde9844c4fc1b4641a23"},(0,l.h)("div",{key:"40a7167d6a72cede90df7db0154c7ee4ffd4ce6b",class:"header"}," ",a.selectDataType," "),e.map((e,t)=>(0,l.h)("calcite-accordion",{class:"field-type-accordion"},(0,l.h)("calcite-accordion-item",{key:t,heading:a[e].title,description:a[e].description,expanded:e===i},this.renderListItem(e))))),(0,l.h)("arcgis-new-item-alert",{key:"f136a1c16853fbd6476cb595c91460868010e397",heading:null==t?void 0:t.title,description:null==t?void 0:t.description,active:!!t,onAlertDismiss:()=>this.errorMessage=null}))}renderListItem(e){const{selectedFieldType:i}=this,{i18n:t}=y,a=function(e){return"esriFieldTypeString"===e||"esriFieldTypeBigInteger"===e||"esriFieldTypeTimestampOffset"===e||"esriFieldTypeGUID"===e};return(0,l.h)("calcite-list",{label:t.fieldTypes,"selection-appearance":"icon","selection-mode":"single-persist"},Object.values(this.availableFieldTypes).map(r=>{var s;const n=r.type,o=null===(s=null==r?void 0:r.tooltip)||void 0===s?void 0:s.enabled;if(t[e].types[n]){const s=t[e].types[n].title;let d=t[e].types[n].description;return"esriFieldTypeInteger"===n&&(d=y.formattedStrings.esriFieldTypeIntegerDescription),(0,l.h)(l.F,null,(0,l.h)("div",{class:{"field-type-popover":o}},(0,l.h)("calcite-list-item",{id:`${n}-list-item`,class:{"field-type-item":!0},disabled:r.disabled,label:s,description:d,value:{selectedFieldTypeCategory:e,selectedFieldType:n},selected:i===n,onCalciteListItemSelect:()=>{this.selectedFieldType=n,this.selectedFieldTypeCategory=e}},(0,l.h)("calcite-icon",{slot:"content-start",icon:h.f[n],scale:"s"}),"esriFieldTypeBigInteger"===n&&(0,l.h)("div",{slot:"content"},(0,l.h)("div",{class:"big-integer-title"}," ",s," "),(0,l.h)("div",{class:"big-integer-description",innerHTML:(0,u.i)(d)}))),o&&(0,l.h)("arcgis-information",{class:{"header-popover":!0,"bottom-border-enabled":!a(n),"disabled-border-style":r.disabled},label:r.tooltip.text,placement:"left",paddedContent:!0,setIconColor:!0},(0,l.h)("p",{class:"popover-add-field-content"},r.tooltip.text))))}}))}setUpAvailableDataTypes(e){const{layer:i,i18n:t}=y,l=null==i?void 0:i.fields.some(e=>"global-id"===e.type||"esriFieldTypeGlobalID"===e.type);this.portal.isPortal&&(this.availableFieldTypes.esriFieldTypeTimestampOffset.disabled=!0,this.availableFieldTypes.esriFieldTypeTimestampOffset.tooltip={enabled:!0,text:t.tooltipInfo.enterpriseTimestampOffset}),e.typeKeywords.includes("Spatiotemporal")&&(this.availableFieldTypes.esriFieldTypeTimestampOffset.disabled=!0,this.availableFieldTypes.esriFieldTypeTimeOnly.disabled=!0,this.availableFieldTypes.esriFieldTypeDateOnly.disabled=!0),(e.typeKeywords.includes("Spatiotemporal")||l)&&(this.availableFieldTypes.esriFieldTypeGlobalID.disabled=!0,this.availableFieldTypes.esriFieldTypeGlobalID.tooltip={enabled:!0,text:t.tooltipInfo.globalIDExists})}get el(){return(0,l.a)(this)}};R.style=".header.sc-arcgis-field-add-pages-pick-field-type{color:var(--calcite-color-text-1)}.info-icon.sc-arcgis-field-add-pages-pick-field-type{--calcite-ui-icon-color:var(--calcite-color-brand)}.conditional-notice.sc-arcgis-field-add-pages-pick-field-type{padding-top:0.5rem;font-size:var(--calcite-font-size--1)}.field-type-accordion.sc-arcgis-field-add-pages-pick-field-type{margin-bottom:0.25rem}.sync-enabled-notice.sc-arcgis-field-add-pages-pick-field-type{padding-top:0.75rem;padding-bottom:0.75rem;color:var(--calcite-color-text-1)}.field-type-popover.sc-arcgis-field-add-pages-pick-field-type{display:flex;flex-direction:row}.bottom-border-enabled.sc-arcgis-field-add-pages-pick-field-type{border-bottom-color:var(--calcite-color-border-2);border-bottom-style:solid;border-bottom-width:0.063rem}.disabled-border-style.sc-arcgis-field-add-pages-pick-field-type{border-bottom-color:rgba(212, 212, 212, 0.5)}.header-popover.sc-arcgis-field-add-pages-pick-field-type{margin-inline-start:auto;padding-right:1rem;color:var(--calcite-color-text-2)}.popover-add-field-content.sc-arcgis-field-add-pages-pick-field-type{margin:0px;max-width:20rem}.field-type-item.sc-arcgis-field-add-pages-pick-field-type{width:100%}.big-integer-title.sc-arcgis-field-add-pages-pick-field-type{color:var(--calcite-color-text-1);font-size:var(--calcite-font-size--1)}.big-integer-description.sc-arcgis-field-add-pages-pick-field-type{font-size:0.75rem;color:var(--calcite-color-text-3)}"},79238:(e,i,t)=>{t.d(i,{a:()=>l,e:()=>a,f:()=>r});const l={point:"point",line:"line",polygon:"polygon",multipatch:"cube",table:"table",multipoint:"layer-points"},a={esriGeometryPoint:"point",esriGeometryPolyline:"line",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"cube",esriGeometryMultipoint:"point",none:"table"},r={esriFieldTypeOID:"key",esriFieldTypeBoolean:"boolean",esriFieldTypeString:"string",esriFieldTypeSingle:"number",esriFieldTypeDouble:"number",esriFieldTypeInteger:"integer",esriFieldTypeSmallInteger:"integer",esriFieldTypeGlobalID:"key",esriFieldTypeDate:"date-time",esriFieldTypeBigInteger:"integer",esriFieldTypeDateOnly:"calendar",esriFieldTypeTimeOnly:"clock",esriFieldTypeTimestampOffset:"time-zone",esriFieldTypeGUID:"key"}},90079:(e,i,t)=>{t.d(i,{a:()=>r,b:()=>l,e:()=>s,f:()=>a,g:()=>n,r:()=>o});const l=["captureGPS","enableZDefaults","enableMDefaults"],a=["point","line","polygon","multipatch","multipoint","table"],r={esriGeometryPoint:"point",esriGeometryPolyline:"line",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",esriGeometryMultipoint:"multipoint"},s={esriFieldTypeOID:"oid",esriFieldTypeBoolean:"boolean",esriFieldTypeString:"string",esriFieldTypeDouble:"number",esriFieldTypeInteger:"number",esriFieldTypeSmallInteger:"number",esriFieldTypeSingle:"number",esriFieldTypeGlobalID:"string",esriFieldTypeDate:"date",esriFieldTypeBigInteger:"number",esriFieldTypeDateOnly:"date",esriFieldTypeTimeOnly:"date",esriFieldTypeTimestampOffset:"date",esriFieldTypeGUID:"guid"},n={point:"esriGeometryPoint",line:"esriGeometryPolyline",polygon:"esriGeometryPolygon",multipatch:"esriGeometryMultiPatch",multipoint:"esriGeometryMultipoint"},o={line:{type:"simple",symbol:{type:"esriSLS",style:"esriSLSSolid",color:[165,83,183,255],width:1}},point:{type:"simple",symbol:{type:"esriPMS",url:"RedSphere.png",imageData:"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",contentType:"image/png",width:15,height:15}},multipoint:{type:"simple",symbol:{type:"esriPMS",url:"RedSphere.png",imageData:"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",contentType:"image/png",width:15,height:15}},polygon:{type:"simple",symbol:{type:"esriSFS",style:"esriSFSSolid",color:[76,129,205,191],outline:{type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:.75}}},multipatch:{}}},94984:(e,i,t)=>{t.d(i,{C:()=>n,a:()=>p,b:()=>c,f:()=>o,g:()=>s,l:()=>r,s:()=>m});var l=t(15332),a=t(931);const r=new Map([["ar","ar"],["bg","bg"],["bs","bs"],["ca","ca"],["cs","cs"],["da","da"],["de","de"],["el","el"],["en","en"],["es","es"],["et","et"],["fi","fi"],["fr","fr"],["he","he"],["hr","hr"],["hu","hu"],["id","id"],["it","it"],["ja","ja"],["ko","ko"],["lt","lt"],["lv","lv"],["nb","no"],["no","no"],["nl","nl"],["pl","pl"],["pt-br","pt-BR"],["pt-pt","pt-PT"],["ro","ro"],["ru","ru"],["sk","sk"],["sl","sl"],["sr","sr"],["sv","sv"],["th","th"],["tr","tr"],["uk","uk"],["vi","vi"],["zh-cn","zh-CN"],["zh-hk","zh-HK"],["zh-tw","zh-TW"]]);function s(e){return function(e,i,t){const a=(0,l.c)(e,`[${i}]`);return a?a.getAttribute(i):t}(e,"dir","ltr")}const n={rtl:"arcgis--rtl"};async function o(e,i){const{api:t,type:l,places:r}=i||{};if(3===t){const[t]=await(0,a.l)(["dojo/number"]);return t.format(e,{type:l,places:r,pattern:null==i?void 0:i.pattern})}const[s]=await(0,a.l)(["esri/intl"]),n=s.convertNumberFormatToIntlOptions({places:r,style:l,digitSeparator:!0});return s.formatNumber(e,Object.assign(Object.assign({},n),{style:l}))}const d={};function c(e,i){let t=document.documentElement.lang;const l="bs"===t;if(l&&(t="hr"),i){const i=`${t}-full`,l={dateStyle:"full",timeStyle:"long"};return d[i]||(d[i]=new Intl.DateTimeFormat(t,l)),d[i].format(e)}const a={year:"numeric",month:l?"numeric":"short",day:"numeric"};return d[t]||(d[t]=new Intl.DateTimeFormat(t,a)),d[t].format(e)}function p(e,i,t,l){const a=null!=e?e:"en";let r=i.unknown;return(1===t||["id","ja","ko","th","vi","zh-cn","zh-hk","zh-tw"].includes(a))&&(r=i.single),1!==t&&["en","ca","da","de","el","es","et","fi","hi","hu","it","nb","nl","pt-pt","sv","tr"].includes(a)&&(r=i.multiple),m(r,Object.assign(Object.assign({},l),{number:t}))}const u=/\$\{([^}]+)\}/g;function m(e,i,t=u){let l=e;try{l=e.replace(t,(e,t)=>function(e,i){const t=e.split(".").reduce((e,i)=>e[i],i);return"string"==typeof t||"number"==typeof t?t:e}(t,i).toString())}catch(e){console.error(e)}return l}}}]);