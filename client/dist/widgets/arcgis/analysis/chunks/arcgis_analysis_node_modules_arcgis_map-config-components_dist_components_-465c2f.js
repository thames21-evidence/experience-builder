/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-465c2f.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-465c2f"],{36486:(e,i,t)=>{t.d(i,{u:()=>l});var s=t(83552),a=t(73679);const l=(0,s.yr)(a.g)},52868:(e,i,t)=>{t.r(i),t.d(i,{ArcgisMapConfigSymbolPickerFileUpload:()=>g});var s=t(73679),a=t(4395),l=t(1698),r=t(85643),o=t(73801),n=t(36486);const c=a.AH`:host{display:inline-block;background-color:#fff;width:100%;padding:20px 5px 15px;border-color:var(--calcite-color-border-1);border-width:2px;border-style:dashed;box-sizing:border-box}.file-step{text-align:center}.file-step__upload-icon{margin-bottom:.5rem;margin-top:.25rem;color:var(--calcite-color-text-3)}.file-step__upload-icon calcite-icon{width:4rem;height:4rem}.file-step__drag-text{font-size:.9rem;margin-bottom:.25rem}.file-step__browse-button{margin-top:1rem}.file-step__file-input{display:none}`;class g extends o.WF{constructor(){super(...arguments),this._messages=(0,n.u)({blocking:!0,name:"map-config-symbol-picker"}),this.fileInput=(0,r._)(),this.hideSvgUploadSymbols=!1,this.arcgisSymbolPickerFileUploadChange=(0,o.lh)(),this.arcgisSymbolPickerFileUploadError=(0,o.lh)(),this.arcgisSymbolPickerFileUploadInvalidFile=(0,o.lh)()}static{this.properties={portal:0,hideSvgUploadSymbols:5}}static{this.styles=c}handleDragOver(e){e.preventDefault()}async handleDrop(e){e.preventDefault(),e.dataTransfer?.files[0]&&await this.processFile(e.dataTransfer?.files[0])}async handleFileInputChange(e){const i=e.target;i.files?.length&&await this.processFile(i.files[0])}async processFile(e){const{portal:i}=this;if(e&&e){if(!this.isValidFile(e))return void this.arcgisSymbolPickerFileUploadInvalidFile.emit();if(this.isSVGFile(e)){const t=i.helperServices.symbols.url,s=new FileReader;s.onload=async i=>{const s={svgImage:i.target?.result};l.generateSymbol(t,s).then(i=>{this.arcgisSymbolPickerFileUploadChange.emit({cim:i.symbol,fileName:e.name||"",width:i.symbol.width,height:i.symbol.height})})},s.readAsText(e)}else{const i=new FileReader;i.onload=async i=>{const t=new Image;t.src=i.target?.result,t.onload=()=>{this.arcgisSymbolPickerFileUploadChange.emit({dataURL:i.target?.result,fileName:e.name||"",width:t.width,height:t.height})},t.onerror=()=>{this.arcgisSymbolPickerFileUploadError.emit()}},i.readAsDataURL(e)}}}isValidFile(e){const i=this.hideSvgUploadSymbols?/\.(gif|jpg|jpeg|png)$/iu:/\.(gif|jpg|jpeg|png|svg)$/iu;return e?.name&&i.test(e.name)}isSVGFile(e){return e?.name&&/\.(svg)$/iu.test(e.name)}render(){const e=this.hideSvgUploadSymbols?this._messages.fileUpload.dragDropNoSvg:this._messages.fileUpload.dragDrop;return a.qy`<div class="file-step" .ariaLabel=${e} @dragover=${this.handleDragOver} @dragenter=${this.handleDragOver} @drop=${this.handleDrop}><div><div class="file-step__drag-text" .ariaLabel=${e}>${e}</div><calcite-button class="file-step__browse-button" appearance=transparent icon-start=image @click=${()=>this.fileInput.value?.click()}>${this._messages.fileUpload.browse}</calcite-button><input @change=${this.handleFileInputChange} class="file-step__file-input" type=file accept=.jpg,.gif,.png,.svg,image/jpg,image/gif,image/png,image/svg+xml ${(0,r.K)(this.fileInput)}></div></div>`}}(0,s.c)("arcgis-map-config-symbol-picker-file-upload",g)}}]);