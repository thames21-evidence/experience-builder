/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_com-f09110.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_com-f09110"],{46317:(e,t,i)=>{i.d(t,{D:()=>r});var a=i(85282),s=i(34670),n=i(42466);const r=(0,s.u$)(class extends s.WL{constructor(){super(...arguments),this.key=a.s6}render(e,t){return this.key=e,t}update(e,[t,i]){return t!==this.key&&((0,n.mY)(e),this.key=t),i}})},65595:(e,t,i)=>{i.d(t,{c:()=>r,u:()=>l});var a=i(20936),s=i(1225),n=(i(54312),i(44345),i(55448),i(52797),i(34031),i(63438),i(5933),i(28927),i(83368),i(89704),i(5294),i(18423),i(96086),i(91813),i(21255),i(13078),i(21303),i(12627),i(56451),i(31521),i(23054),i(5077),i(23795),i(17902),i(87420),i(30161),i(81734),i(75698),i(10628),i(59640),i(64451),i(6176),i(83552));i(77462),i(49403),i(10281),i(83930),i(66617),i(10454),i(29614),i(94916),i(52554),i(2156),i(4038),i(49851),i(75054),i(15223),i(70169),i(47207),i(70852),i(48103),i(39423),i(85681),i(18444),i(42411),i(9767),i(38218),i(91914),i(86605),i(68196),i(440),i(46547),i(6238),i(7299);function r(e){e.selectedFields=[],e.layerFields=void 0,e.fields=void 0,e.hideLayerTitle=!1,e.supportsArcade=!1,e.stringFieldsCount=-1,e.dateFieldsCount=-1,e.numberFieldsCount=-1,e.containsFlow=!0,e.oneFeatureResponseStatus=s.s.MISSING,e.selectedAttribute=void 0,e.selectedAttributeText=void 0,e.selectedTypeValue=void 0,e.selectedValue=void 0,e.lastDefault=void 0,e.lastDefaults=void 0,e.dotColorSelected=void 0,e.backgroundStyleSelected=void 0,e.lastSettings=void 0,e.classedSymbolSelectedIdx=void 0,e.allUniqueValues=void 0,e.useFeatureReduction=void 0,e.symbolStylerConfig={},e.allowTimeSeriesConfiguration=!1,e.rasterInfo=void 0}function l(){const e=(0,n.Gk)(),t=e;e.manager.onLoad(()=>{t.smartMappingState=function(e,t){const i=o.get(e);if(i)return i;const s=(0,a.el)(e,t);return s&&"store"in s?(o.set(e,s.store),s.store):null}(e.el,"arcgis-map-config-smart-mapping")})}const o=new WeakMap},67097:(e,t,i)=>{i.r(t),i.d(t,{ArcgisMapConfigSmartMappingPanelsRelationshipSize:()=>m});var a=i(73679),s=i(4395),n=i(46317),r=i(5294),l=i(1225),o=i(89989),c=(i(44345),i(55448),i(52797),i(34031),i(63438),i(5933),i(28927),i(83368),i(89704),i(18423),i(96086),i(91813),i(21255),i(13078),i(21303),i(12627),i(56451),i(31521),i(23054),i(5077),i(23795),i(17902),i(87420),i(30161),i(81734),i(65595)),p=(i(77462),i(49403),i(10281),i(83930),i(54312),i(66617),i(10628),i(59640),i(64451),i(6176),i(10454),i(29614),i(94916),i(52554),i(2156),i(4038),i(49851),i(75054),i(15223),i(70169),i(47207),i(70852),i(48103),i(39423),i(85681),i(18444),i(42411),i(9767),i(38218),i(91914),i(86605),i(68196),i(440),i(46547),i(6238),i(7299),i(85643)),d=i(73801);const h=s.AH`:host{width:100%;display:none}:host([selected]){display:flex}.flow-item{height:100%}`;class m extends d.WF{constructor(){super(...arguments),this.flowItemNode=(0,p._)(),this.tileNodes={},this.smartMappingState=(0,c.u)(),this.menuOpen=!1,this.showBackButton=!1,this.selected=!1,this.arcgisSmartMappingPanelsRelationshipSizeBackClick=(0,d.lh)(),this.arcgisSmartMappingPanelsRelationshipSizeClose=(0,d.lh)(),this.arcgisSmartMappingPanelsRelationshipSizeError=(0,d.lh)(),this.smartMappingCompleteClose=(0,d.lh)()}static{this.properties={lastClick:16,menuOpen:5,showBackButton:5,selected:7,beforeBack:0}}static{this.styles=h}async setFocus(){await(this.flowItemNode.value?.setFocus())}load(){const{layer:e}=this.smartMappingState,t=(0,l.g)(this.smartMappingState);this.originalRendererJSON=t.toJSON(),this.originalFeatureReduction="featureReduction"in e&&e.featureReduction?r.clone(e.featureReduction):void 0;const i=(0,l.a9)(this.smartMappingState,this.el);"ARCGIS-MAP-CONFIG-SMART-MAPPING"===i.tagName?this.panelsParentNode=i.shadowRoot:this.panelsParentNode=i}async loaded(){requestAnimationFrame(async()=>await(this.flowItemNode.value?.setFocus())),this.scaleHandle=(0,o.w)(this.smartMappingState,this.flowItemNode.value,()=>this.smartMappingCompleteClose.emit("cancel"))}disconnectedCallback(){super.disconnectedCallback(),this.scaleHandle?.remove()}relationshipTileRefHandler(e){e&&(this.tileNodes.relationship=e)}sizeTileRefHandler(e){e&&(this.tileNodes.size=e)}handleOptionsClick(e){const{panelsParentNode:t}=this;switch(e){case"size":{const e=(0,d.dN)(s.qy`<arcgis-map-config-smart-mapping-panels-size hide-transparency hide-rotation .showBackButton=${!0} selected @arcgisSmartMappingPanelsSizeClose=${()=>this.cleanUpFlowItem(e)} @arcgisSmartMappingPanelsSizeBackClick=${()=>this.cleanUpFlowItem(e)} @arcgisSmartMappingPanelsSizeError=${({detail:e})=>this.arcgisSmartMappingPanelsRelationshipSizeError.emit(e)}></arcgis-map-config-smart-mapping-panels-size>`);t.appendChild(e),this.selected=!1;break}case"relationship":{const e=(0,d.dN)(s.qy`<arcgis-map-config-smart-mapping-panels-relationship hide-transparency hide-rotation .showBackButton=${!0} selected @arcgisSmartMappingPanelsRelationshipClose=${()=>this.cleanUpFlowItem(e)} @arcgisSmartMappingPanelsRelationshipBackClick=${()=>this.cleanUpFlowItem(e)} @arcgisSmartMappingPanelsRelationshipError=${({detail:e})=>this.arcgisSmartMappingPanelsRelationshipSizeError.emit(e)}></arcgis-map-config-smart-mapping-panels-relationship>`);t.appendChild(e),this.selected=!1;break}}}cleanUpFlowItem(e){e.remove(),this.focusSelectedTile(),this.selected=!0}focusSelectedTile(){setTimeout(()=>requestAnimationFrame(async()=>await(this.tileNodes[this.lastClick]?.setFocus())),300)}render(){const{layer:e,mapImageSublayer:t,hideLayerTitle:i,_messages:a}=this.smartMappingState,n=i?void 0:t?.title??e.title;return this.el.classList.add("calcite-match-height"),s.qy`<calcite-flow-item .heading=${a.panels.styleOptions} .description=${n} class="flow-item" .closable=${(0,l.aa)(this.el)} .showBackButton=${this.showBackButton} .selected=${this.selected} @calciteFlowItemClose=${()=>this.arcgisSmartMappingPanelsRelationshipSizeClose.emit("save")} @calciteFlowItemBack=${e=>{e.stopPropagation(),this.arcgisSmartMappingPanelsRelationshipSizeBackClick.emit()}} ${(0,p.K)(this.flowItemNode)}>${this.renderDoneButton()}${this.renderCancelButton()}${this.renderRelationshipTile()}${this.renderSizeTile()}${this.renderTransparency()}${this.renderRotation()}</calcite-flow-item>`}renderDoneButton(){const{_messages:e}=this.smartMappingState;return s.qy`<calcite-button slot=footer .label=${e.done} @click=${()=>this.arcgisSmartMappingPanelsRelationshipSizeClose.emit("save")} appearance=solid width=half>${e.done}</calcite-button>`}renderCancelButton(){const{smartMappingState:e}=this,{_messages:t}=e;return s.qy`<calcite-button slot=footer .label=${t.cancel} @click=${()=>{(0,l.a8)(e,this.originalRendererJSON,this.originalFeatureReduction),this.arcgisSmartMappingPanelsRelationshipSizeClose.emit("cancel")}} appearance=outline-fill width=half>${t.cancel}</calcite-button>`}renderRelationshipTile(){return s.qy`<arcgis-map-config-smart-mapping-tile type=relationship .selected=${"relationship"===this.lastClick} @arcgisSmartMappingTileSelect=${()=>{this.lastClick="relationship",this.handleOptionsClick("relationship")}} @arcgisSmartMappingTileOptions=${()=>this.handleOptionsClick("relationship")} @arcgisSmartMappingTileError=${e=>this.arcgisSmartMappingPanelsRelationshipSizeError.emit(e.detail)} ${(0,p.K)(this.relationshipTileRefHandler)}></arcgis-map-config-smart-mapping-tile>`}renderSizeTile(){const{smartMappingState:e}=this,t=(0,l.ab)(e,"size");return(0,n.D)(`tile-${t}`,s.qy`<arcgis-map-config-smart-mapping-tile type=size .selected=${"size"===this.lastClick} @arcgisSmartMappingTileSelect=${()=>{this.lastClick="size",this.handleOptionsClick("size")}} @arcgisSmartMappingTileOptions=${()=>this.handleOptionsClick("size")} @arcgisSmartMappingTileError=${e=>this.arcgisSmartMappingPanelsRelationshipSizeError.emit(e.detail)} @arcgisSmartMappingTileThemeChange=${()=>{queueMicrotask(()=>{this.el.shadowRoot.querySelectorAll("arcgis-map-config-smart-mapping-tile")[1].setThemeFocus()})}} ${(0,p.K)(this.sizeTileRefHandler)}></arcgis-map-config-smart-mapping-tile>`)}renderTransparency(){const{smartMappingState:e}=this,t=(0,l.g)(e),i=(0,l.c)(t,"opacity");return s.qy`<arcgis-map-config-smart-mapping-transparency .open=${!!i} @arcgisSmartMappingSymbolTransparencyError=${({detail:e})=>this.arcgisSmartMappingPanelsRelationshipSizeError.emit(e)}></arcgis-map-config-smart-mapping-transparency>`}renderRotation(){const{smartMappingState:e}=this,t=(0,l.g)(e),i=(0,l.c)(t,"opacity"),a=(0,l.c)(t,"rotation");return(0,l.p)(t,"spike")?"":s.qy`<arcgis-map-config-smart-mapping-rotation .open=${!i&&!!a} @arcgisSmartMappingRotationError=${({detail:e})=>this.arcgisSmartMappingPanelsRelationshipSizeError.emit(e)}></arcgis-map-config-smart-mapping-rotation>`}}(0,a.c)("arcgis-map-config-smart-mapping-panels-relationship-size",m)},89989:(e,t,i)=>{i.d(t,{w:()=>n});var a=i(54312),s=i(1225);i(44345),i(55448),i(52797),i(34031),i(63438),i(5933),i(28927),i(83368),i(89704),i(5294),i(18423),i(96086),i(91813),i(21255),i(13078),i(21303),i(12627),i(56451),i(31521),i(23054),i(5077),i(23795),i(17902),i(87420),i(30161),i(81734),i(75698),i(10628),i(59640),i(64451),i(6176),i(83552),i(77462),i(49403),i(10281),i(83930),i(66617),i(10454),i(29614),i(94916),i(52554),i(2156),i(4038),i(49851),i(75054),i(15223),i(70169),i(47207),i(70852),i(48103),i(39423),i(85681),i(18444),i(42411),i(9767),i(38218),i(91914),i(86605),i(68196),i(440),i(46547),i(6238),i(7299);function n(e,t,i){const{layer:n,mapView:l,useFeatureReduction:o}=e;return o&&"featureReduction"in n&&"binning"===n.featureReduction.type?a.watch(()=>l.scale,()=>{const a=n.featureReduction;l.scale<=a.maxScale&&!t.disabled?((0,s.f)(),function(e,t,i){const a=document.createElement("arcgis-map-config-smart-mapping-scale-alert-popover");a.smartMappingState=e,a.refElement=t,a.addEventListener("arcgisSmartMappingScaleAlertPopoverBack",()=>{r(),i()}),document.body.append(a)}(e,t,i),(0,s.h)(t,!0)):l.scale>a.maxScale&&t.disabled&&(r(),(0,s.h)(t,!1),t.setFocus())}):void 0}function r(){document.querySelectorAll("arcgis-map-config-smart-mapping-scale-alert-popover").forEach(e=>e.remove())}}}]);