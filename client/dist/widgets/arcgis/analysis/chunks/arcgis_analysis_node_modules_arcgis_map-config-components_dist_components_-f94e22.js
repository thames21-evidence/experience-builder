/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-f94e22.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-f94e22"],{65595:(e,t,a)=>{a.d(t,{c:()=>o,u:()=>l});var i=a(20936),s=a(1225),n=(a(54312),a(44345),a(55448),a(52797),a(34031),a(63438),a(5933),a(28927),a(83368),a(89704),a(5294),a(18423),a(96086),a(91813),a(21255),a(13078),a(21303),a(12627),a(56451),a(31521),a(23054),a(5077),a(23795),a(17902),a(87420),a(30161),a(81734),a(75698),a(10628),a(59640),a(64451),a(6176),a(83552));a(77462),a(49403),a(10281),a(83930),a(66617),a(10454),a(29614),a(94916),a(52554),a(2156),a(4038),a(49851),a(75054),a(15223),a(70169),a(47207),a(70852),a(48103),a(39423),a(85681),a(18444),a(42411),a(9767),a(38218),a(91914),a(86605),a(68196),a(440),a(46547),a(6238),a(7299);function o(e){e.selectedFields=[],e.layerFields=void 0,e.fields=void 0,e.hideLayerTitle=!1,e.supportsArcade=!1,e.stringFieldsCount=-1,e.dateFieldsCount=-1,e.numberFieldsCount=-1,e.containsFlow=!0,e.oneFeatureResponseStatus=s.s.MISSING,e.selectedAttribute=void 0,e.selectedAttributeText=void 0,e.selectedTypeValue=void 0,e.selectedValue=void 0,e.lastDefault=void 0,e.lastDefaults=void 0,e.dotColorSelected=void 0,e.backgroundStyleSelected=void 0,e.lastSettings=void 0,e.classedSymbolSelectedIdx=void 0,e.allUniqueValues=void 0,e.useFeatureReduction=void 0,e.symbolStylerConfig={},e.allowTimeSeriesConfiguration=!1,e.rasterInfo=void 0}function l(){const e=(0,n.Gk)(),t=e;e.manager.onLoad(()=>{t.smartMappingState=function(e,t){const a=r.get(e);if(a)return a;const s=(0,i.el)(e,t);return s&&"store"in s?(r.set(e,s.store),s.store):null}(e.el,"arcgis-map-config-smart-mapping")})}const r=new WeakMap},89989:(e,t,a)=>{a.d(t,{w:()=>n});var i=a(54312),s=a(1225);a(44345),a(55448),a(52797),a(34031),a(63438),a(5933),a(28927),a(83368),a(89704),a(5294),a(18423),a(96086),a(91813),a(21255),a(13078),a(21303),a(12627),a(56451),a(31521),a(23054),a(5077),a(23795),a(17902),a(87420),a(30161),a(81734),a(75698),a(10628),a(59640),a(64451),a(6176),a(83552),a(77462),a(49403),a(10281),a(83930),a(66617),a(10454),a(29614),a(94916),a(52554),a(2156),a(4038),a(49851),a(75054),a(15223),a(70169),a(47207),a(70852),a(48103),a(39423),a(85681),a(18444),a(42411),a(9767),a(38218),a(91914),a(86605),a(68196),a(440),a(46547),a(6238),a(7299);function n(e,t,a){const{layer:n,mapView:l,useFeatureReduction:r}=e;return r&&"featureReduction"in n&&"binning"===n.featureReduction.type?i.watch(()=>l.scale,()=>{const i=n.featureReduction;l.scale<=i.maxScale&&!t.disabled?((0,s.f)(),function(e,t,a){const i=document.createElement("arcgis-map-config-smart-mapping-scale-alert-popover");i.smartMappingState=e,i.refElement=t,i.addEventListener("arcgisSmartMappingScaleAlertPopoverBack",()=>{o(),a()}),document.body.append(i)}(e,t,a),(0,s.h)(t,!0)):l.scale>i.maxScale&&t.disabled&&(o(),(0,s.h)(t,!1),t.setFocus())}):void 0}function o(){document.querySelectorAll("arcgis-map-config-smart-mapping-scale-alert-popover").forEach(e=>e.remove())}},90971:(e,t,a)=>{a.r(t),a.d(t,{ArcgisMapConfigSmartMappingPanelsSimple:()=>d});var i=a(73679),s=a(4395),n=a(5294),o=a(1225),l=a(89989),r=(a(44345),a(55448),a(52797),a(34031),a(63438),a(5933),a(89704),a(18423),a(96086),a(91813),a(21255),a(13078),a(21303),a(12627),a(56451),a(31521),a(23054),a(5077),a(23795),a(17902),a(87420),a(30161),a(81734),a(65595)),c=(a(77462),a(49403),a(10281),a(83930),a(54312),a(66617),a(10628),a(59640),a(64451),a(6176),a(10454),a(29614),a(94916),a(52554),a(2156),a(4038),a(49851),a(75054),a(15223),a(70169),a(47207),a(70852),a(48103),a(39423),a(85681),a(18444),a(42411),a(9767),a(38218),a(91914),a(86605),a(68196),a(440),a(46547),a(28927),a(6238),a(7299),a(85643)),p=a(73801);const m=s.AH`:host{width:100%;display:none}:host([selected]){display:flex}.flow-item{height:100%}.simple-block{overflow-x:hidden}`;class d extends p.WF{constructor(){super(...arguments),this.flowItemNode=(0,c._)(),this.rotationNode=(0,c._)(),this.smartMappingState=(0,r.u)(),this.visualizationOpen=!1,this.menuOpen=!1,this.showBackButton=!1,this.selected=!1,this.arcgisSmartMappingPanelsSimpleBackClick=(0,p.lh)(),this.arcgisSmartMappingPanelsSimpleClose=(0,p.lh)(),this.arcgisSmartMappingPanelsSimpleError=(0,p.lh)(),this.smartMappingCompleteClose=(0,p.lh)()}static{this.properties={visualizationOpen:16,menuOpen:5,showBackButton:5,selected:7,beforeBack:0}}static{this.styles=m}async setFocus(){await(this.flowItemNode.value?.setFocus())}async load(){this.visualizationOpen=!0;const{layer:e}=this.smartMappingState;if(e&&"geo-rss"===e.type){const t=e;this.originalRenderer=[t.pointSymbol.clone(),t.lineSymbol.clone(),t.polygonSymbol.clone()]}else{const t=(0,o.g)(this.smartMappingState);this.originalRenderer=t.toJSON(),this.originalFeatureReduction="featureReduction"in e&&e.featureReduction?n.clone(e.featureReduction):void 0,await(0,o.a7)(this.smartMappingState)}}async loaded(){requestAnimationFrame(async()=>await(this.flowItemNode.value?.setFocus())),this.scaleHandle=(0,l.w)(this.smartMappingState,this.flowItemNode.value,()=>this.smartMappingCompleteClose.emit("cancel"))}disconnectedCallback(){super.disconnectedCallback(),this.scaleHandle?.remove()}handleDone(){this.arcgisSmartMappingPanelsSimpleClose.emit("save")}handleCancel(){const{originalRenderer:e,originalFeatureReduction:t,smartMappingState:a}=this,{layer:i}=a;if(i&&"geo-rss"===i.type){const t=e;i.pointSymbol=t[0],i.lineSymbol=t[1],i.polygonSymbol=t[2]}else(0,o.a8)(a,e,t);this.arcgisSmartMappingPanelsSimpleClose.emit("cancel")}render(){const{layer:e,useFeatureReduction:t,hideLayerTitle:a,_messages:i}=this.smartMappingState,n=t?"cluster"===e.featureReduction.type?i.panels.gallery.clusterStyles:i.panels.gallery.binStyles:i.panels.gallery.styles;return this.el.classList.add("calcite-match-height"),s.qy`<calcite-flow-item .heading=${n} .description=${a?void 0:e.title} class="flow-item" .closable=${(0,o.aa)(this.el)} .showBackButton=${this.showBackButton} .selected=${this.selected} @calciteFlowItemClose=${this.handleDone} @calciteFlowItemBack=${e=>{e.stopPropagation(),this.arcgisSmartMappingPanelsSimpleBackClick.emit()}} ${(0,c.K)(this.flowItemNode)}>${this.renderDoneButton()}${this.renderCancelButton()}${this.renderVisualization()}${this.renderTransparency()}${this.renderRotation()}</calcite-flow-item>`}renderDoneButton(){const{layer:e,_messages:t}=this.smartMappingState;return e?s.qy`<calcite-button slot=footer .label=${t.done} @click=${this.handleDone} appearance=solid width=half>${t.done}</calcite-button>`:""}renderCancelButton(){const{layer:e,_messages:t}=this.smartMappingState;return e?s.qy`<calcite-button slot=footer .label=${t.cancel} @click=${this.handleCancel} appearance=outline-fill width=half>${t.cancel}</calcite-button>`:""}renderVisualization(){const{visualizationOpen:e,smartMappingState:t}=this,{layer:a,_messages:i}=this.smartMappingState;return s.qy`<calcite-block class="simple-block" .heading=${i.panels.simple.simpleStyle} .collapsible=${"geo-rss"!==a.type&&(0,o.af)(t)} .expanded=${e} @calciteBlockOpen=${()=>this.visualizationOpen=!0} @calciteBlockClose=${()=>this.visualizationOpen=!1}>${"geo-rss"===a.type?this.renderGeoRssSymbols():this.renderSymbol()}</calcite-block>`}renderSymbol(){const{smartMappingState:e}=this,t=(0,o.g)(e).symbol;return s.qy`<arcgis-map-config-smart-mapping-symbol-button .symbol=${t} type=simple @arcgisSmartMappingSymbolButtonSymbolChange=${()=>{this.requestUpdate(),this.rotationNode.value&&this.rotationNode.value.manager.component.requestUpdate()}}></arcgis-map-config-smart-mapping-symbol-button>`}renderGeoRssSymbols(){return s.qy`<div>${this.renderGeoRssSymbol("point")}${this.renderGeoRssSymbol("line")}${this.renderGeoRssSymbol("polygon")}</div>`}renderGeoRssSymbol(e){const{layer:t,_messages:a}=this.smartMappingState,i=t,n="point"===e?i.pointSymbol:"line"===e?i.lineSymbol:i.polygonSymbol,o="point"===e?a.panels.simple.pointSymbolStyle:"line"===e?a.panels.simple.lineSymbolStyle:a.panels.simple.polygonSymbolStyle;return s.qy`<arcgis-map-config-smart-mapping-symbol-button .symbol=${n??void 0} .type=${"point"===e?"geo-rss-point":"line"===e?"geo-rss-line":"geo-rss-polygon"} .label=${o} @arcgisSmartMappingSymbolButtonSymbolChange=${()=>this.requestUpdate()}></arcgis-map-config-smart-mapping-symbol-button>`}renderTransparency(){const{smartMappingState:e}=this,t=(0,o.g)(e),a=(0,o.c)(t,"opacity");return s.qy`<arcgis-map-config-smart-mapping-transparency .open=${!!a} @arcgisSmartMappingSymbolTransparencyError=${({detail:e})=>this.arcgisSmartMappingPanelsSimpleError.emit(e)}></arcgis-map-config-smart-mapping-transparency>`}renderRotation(){const{smartMappingState:e}=this,t=(0,o.g)(e),a=(0,o.c)(t,"opacity"),i=(0,o.c)(t,"rotation");return s.qy`<arcgis-map-config-smart-mapping-rotation .open=${!a&&!!i} @arcgisSmartMappingRotationError=${({detail:e})=>this.arcgisSmartMappingPanelsSimpleError.emit(e)} ${(0,c.K)(this.rotationNode)}></arcgis-map-config-smart-mapping-rotation>`}}(0,i.c)("arcgis-map-config-smart-mapping-panels-simple",d)}}]);