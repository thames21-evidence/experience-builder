/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_com-930c3f.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_com-930c3f"],{60300:(e,t,a)=>{function o(e){return e?e/72*96:0}function l(e){return e?72*e/96:0}a.d(t,{a:()=>l,p:()=>o})},65595:(e,t,a)=>{a.d(t,{c:()=>i,u:()=>r});var o=a(20936),l=a(1225),n=(a(54312),a(44345),a(55448),a(52797),a(34031),a(63438),a(5933),a(28927),a(83368),a(89704),a(5294),a(18423),a(96086),a(91813),a(21255),a(13078),a(21303),a(12627),a(56451),a(31521),a(23054),a(5077),a(23795),a(17902),a(87420),a(30161),a(81734),a(75698),a(10628),a(59640),a(64451),a(6176),a(83552));a(77462),a(49403),a(10281),a(83930),a(66617),a(10454),a(29614),a(94916),a(52554),a(2156),a(4038),a(49851),a(75054),a(15223),a(70169),a(47207),a(70852),a(48103),a(39423),a(85681),a(18444),a(42411),a(9767),a(38218),a(91914),a(86605),a(68196),a(440),a(46547),a(6238),a(7299);function i(e){e.selectedFields=[],e.layerFields=void 0,e.fields=void 0,e.hideLayerTitle=!1,e.supportsArcade=!1,e.stringFieldsCount=-1,e.dateFieldsCount=-1,e.numberFieldsCount=-1,e.containsFlow=!0,e.oneFeatureResponseStatus=l.s.MISSING,e.selectedAttribute=void 0,e.selectedAttributeText=void 0,e.selectedTypeValue=void 0,e.selectedValue=void 0,e.lastDefault=void 0,e.lastDefaults=void 0,e.dotColorSelected=void 0,e.backgroundStyleSelected=void 0,e.lastSettings=void 0,e.classedSymbolSelectedIdx=void 0,e.allUniqueValues=void 0,e.useFeatureReduction=void 0,e.symbolStylerConfig={},e.allowTimeSeriesConfiguration=!1,e.rasterInfo=void 0}function r(){const e=(0,n.Gk)(),t=e;e.manager.onLoad(()=>{t.smartMappingState=function(e,t){const a=s.get(e);if(a)return a;const l=(0,o.el)(e,t);return l&&"store"in l?(s.set(e,l.store),l.store):null}(e.el,"arcgis-map-config-smart-mapping")})}const s=new WeakMap},74462:(e,t,a)=>{a.d(t,{a:()=>r,c:()=>s,f:()=>c});var o=a(56451),l=a(9767),n=a(38218),i=(a(52797),a(54312),a(44345),a(55448),a(34031),a(63438),a(5933),a(28927),a(83368),a(89704),a(5294),a(18423),a(96086),a(91813),a(21255),a(13078),a(21303),a(12627),a(1225));a(23054),a(5077),a(23795),a(17902),a(87420),a(30161),a(81734),a(83552),a(77462),a(49403),a(10281),a(83930),a(66617),a(10628),a(59640),a(64451),a(6176),a(10454),a(29614),a(94916),a(52554),a(2156),a(4038),a(49851),a(75054),a(15223),a(70169),a(47207),a(70852),a(48103),a(39423),a(85681),a(18444),a(42411),a(91914),a(31521),a(86605),a(68196),a(440),a(46547),a(6238),a(7299);async function r(e,t){const{layer:a,mapView:o}=e,n=a;return t=t||{},await l.createRenderer({layer:n,view:o,theme:t.flowTheme||"flow-line",includeColorVariable:t.includeColorVariable,legendOptions:t.legendOptions,flowRepresentation:t.flowRepresentation,flowScheme:t.flowScheme||c(e)}).then(e=>(e.layerEffect&&!e.layerEffect.includes("drop-shadow")&&(n.effect=e.layerEffect),e.renderer.color=e.renderer.color&&(t.color||e.renderer.color),e))}async function s(e,t){const{layer:a,mapView:n}=e,r=a;t=t||{};const s=(0,i.T)(e),d=(0,i.c)(s,"color"),p=s.authoringInfo,g=t.flowTheme||p?.flowTheme||"flow-line";return await l.createRenderer({layer:r,view:n,theme:g,includeColorVariable:t.includeColorVariable??!!d,legendOptions:t.legendOptions||d?.legendOptions,flowRepresentation:t.flowRepresentation||s.flowRepresentation,flowScheme:t.flowScheme}).then(a=>{const l=(0,i.p)(s,"color"),n=(0,i.p)(a.renderer,"color");l?.minSliderValue&&l?.maxSliderValue&&n&&(n.minSliderValue=l.minSliderValue,n.maxSliderValue=l.maxSliderValue);const r=(0,i.c)((0,i.T)(e),"color"),d=(0,i.c)(a.renderer,"color");return r&&d&&r.stops.forEach((e,t)=>{d.stops[t].value=e.value}),a.renderer.color=a.renderer.color&&(t.color||s.color||a.renderer.color),(t.flowScheme||c(e))&&r&&d&&r.stops.forEach((e,t)=>{d.stops[t].color=new o.default(e.color.toJSON())}),g===p.flowTheme&&(a.renderer.flowSpeed=s.flowSpeed,a.renderer.density=s.density,a.renderer.trailLength=s.trailLength,a.renderer.trailWidth=s.trailWidth,a.renderer.trailCap=s.trailCap),a})}function c(e){const{mapView:t}=e,a=(0,i.T)(e),o=(0,i.c)(a,"color");if(!o)return null;const l=o.stops.map(e=>e.color),r=n.getSchemes({basemap:t.map?.basemap||"topo"}),s=[r.primaryScheme].concat(r.secondarySchemes),c=[];return s.forEach(e=>{let t=l.some((t,a)=>!(0,i.W)(e.colors[a],t));t?(e.colors=e.colors.reverse(),t=l.some((t,a)=>!(0,i.W)(e.colors[a],t)),t||c.push(e)):c.push(e)}),c.length?c[0]:null}},75518:(e,t,a)=>{let o,l;function n(e){e.loading=!1}async function i(e,t){return function(e){e.loading=!0,l=!1,o&&clearTimeout(o),o=setTimeout(()=>{n(e),l=!0},6e4)}(t),await e.then(e=>{if(n(t),l)throw new Error("timeout");return e}).catch(e=>{throw n(t),e})}a.d(t,{r:()=>i})},90481:(e,t,a)=>{a.r(t),a.d(t,{ArcgisMapConfigSmartMappingPanelsRasterFlow:()=>m});var o=a(73679),l=a(4395),n=a(5294),i=a(1225),r=(a(54312),a(44345),a(55448),a(52797),a(34031),a(63438),a(5933),a(28927),a(83368),a(75518)),s=(a(89704),a(18423),a(96086),a(91813),a(21255),a(13078),a(21303),a(12627),a(56451),a(23054),a(5077),a(23795),a(17902),a(87420),a(30161),a(81734),a(75698),a(10628),a(59640),a(64451),a(6176),a(65595)),c=(a(77462),a(49403),a(66617),a(10454),a(29614),a(94916),a(52554),a(2156),a(4038),a(49851),a(75054),a(15223),a(70169),a(47207),a(70852),a(48103),a(39423),a(85681),a(18444),a(42411),a(74462)),d=(a(91914),a(31521),a(86605),a(68196),a(440),a(46547),a(6238),a(7299),a(60300)),p=a(85643),g=a(73801);const h=l.AH`:host{width:100%;display:none}:host([selected]){display:flex}.flow-item{height:100%}.flow-block{overflow-x:hidden}.block-content-padding{padding-bottom:10px}.block-content-padding-large{padding-bottom:20px}.color-wrapper{display:flex;flex-direction:column;width:100%}.symbol-button-padding{padding-bottom:12px}.mode-hover{cursor:pointer}.toggles{padding-top:10px}.toggle-text{width:100%}.hint-text{font-size:smaller;margin-top:-8px}.hint-text.disabled{opacity:.5}.footer-buttons{width:100%;display:flex;flex-direction:column;gap:var(--calcite-spacing-sm)}`;class m extends g.WF{constructor(){super(...arguments),this.flowItemNode=(0,p._)(),this.manageStyleButtonNode=(0,p._)(),this.registerStyleButtonNode=(0,p._)(),this.singleColorNode=(0,p._)(),this.colorRampNode=(0,p._)(),this.smartMappingState=(0,s.u)(),this.menuOpen=!1,this.showBackButton=!1,this.selected=!1,this.arcgisSmartMappingPanelsRasterFlowBackClick=(0,g.lh)(),this.arcgisSmartMappingPanelsRasterFlowClose=(0,g.lh)(),this.arcgisSmartMappingPanelsRasterFlowError=(0,g.lh)()}static{this.properties={menuOpen:5,showBackButton:5,selected:7,beforeBack:0}}static{this.styles=h}async setFocus(){await(this.flowItemNode.value?.setFocus())}load(){const{layer:e}=this.smartMappingState,t=e;this.originalRendererObj=n.clone((0,i.T)(this.smartMappingState)),this.originalEffect=t.effect??void 0}async loaded(){requestAnimationFrame(async()=>await(this.flowItemNode.value?.setFocus()))}symbolButtonRefHandler(e){e&&(this.symbolButtonNode=e)}sliderRefHandler(e){e&&(this.flowColorSliderNode=e)}capsSwitchRefHandler(e){e&&(this.roundCapToggleNode=e)}handleDone(){this.arcgisSmartMappingPanelsRasterFlowClose.emit("save")}handleCancel(){const{originalRendererObj:e,originalEffect:t,smartMappingState:a}=this,{layer:o}=a;o.effect=t,(0,i.ag)(a,e),this.arcgisSmartMappingPanelsRasterFlowClose.emit("cancel")}handleModeChange(e){const{smartMappingState:t}=this,a=(0,i.T)(t).authoringInfo,o="wave-front"===a.flowTheme,l="wave-front"===a.flowTheme?"flow-line":"wave-front";(!o&&"wavefront"===e||o&&"flowline"===e)&&((0,i.f)(),(0,r.r)((0,c.c)(t,{flowTheme:l}),this.flowItemNode.value).then(e=>{(0,i.ag)(t,e.renderer),this.roundCapToggleNode.checked=!1,this.requestUpdate()},e=>this.arcgisSmartMappingPanelsRasterFlowError.emit(e)))}handleColorTypeChange(e){(0,i.f)();const{smartMappingState:t}=this,a={includeColorVariable:"colorRamp"===e};"colorRamp"!==e?this.lastFlowTheme=(0,c.f)(t):this.lastFlowTheme&&(a.flowScheme=this.lastFlowTheme),(0,r.r)((0,c.c)(t,a),this.flowItemNode.value).then(e=>{(0,i.ag)(t,e.renderer),this.requestUpdate()},e=>{this.singleColorNode.value.checked?(this.singleColorNode.value.checked=!1,this.colorRampNode.value.checked=!0):(this.colorRampNode.value.checked=!1,this.singleColorNode.value.checked=!0),this.arcgisSmartMappingPanelsRasterFlowError.emit(e)})}handleDirectionChange(e){const{smartMappingState:t}=this;(0,i.T)(t).flowRepresentation="from"===e?"flow-from":"flow-to",(0,i.ag)(t)}handleRoundCapsToggle(){const{smartMappingState:e}=this,t=(0,i.T)(e);t.trailCap="round"===t.trailCap?"butt":"round",(0,i.ag)(e)}handleIncludeInLegendToggle(){const{smartMappingState:e}=this,t=(0,i.T)(e),a=(0,i.c)(t,"color"),o=a.legendOptions;o&&!1===o.showLegend?o.title?o.showLegend=!0:a.legendOptions=void 0:(a.legendOptions=o||{},a.legendOptions.showLegend=!1),(0,i.ag)(e)}handleEffectToggle(){const{smartMappingState:e}=this,{layer:t}=e,a=t,o=(0,i.T)(e);if(a.effect)a.effect=void 0;else{const t=o.authoringInfo;(0,c.a)(e,{flowTheme:t.flowTheme}).then(t=>{a.effect=t.layerEffect,(0,i.ag)(e)},e=>this.arcgisSmartMappingPanelsRasterFlowError.emit(e))}}render(){const{hideLayerTitle:e,layer:t,_messages:a}=this.smartMappingState,o=t.title;return this.el.classList.add("calcite-match-height"),l.qy`<calcite-flow-item .heading=${a.panels.flow.styleOptions} .description=${e?void 0:o} class="flow-item" .closable=${(0,i.aa)(this.el)} .showBackButton=${this.showBackButton} .selected=${this.selected} @calciteFlowItemClose=${this.handleDone} @calciteFlowItemBack=${()=>this.arcgisSmartMappingPanelsRasterFlowBackClick.emit()} ${(0,p.K)(this.flowItemNode)}>${this.renderVisualization()}${this.renderFooterButtons()}</calcite-flow-item>`}renderVisualization(){const{smartMappingState:e}=this,{_messages:t}=e,a=(0,i.ah)(e,t.panels.flow.flowStyle);return l.qy`<calcite-block class="flow-block" .heading=${a} expanded>${this.renderManageStyleButton()}${this.renderMode()}${this.renderSpeed()}${this.renderDensity()}${this.renderLength()}${this.renderWidth()}${this.renderColor()}${this.renderColorSlider()}${this.renderDirection()}${this.renderRoundCaps()}${this.renderShowInLegend()}${this.renderEffects()}</calcite-block>`}renderManageStyleButton(){return l.qy`<arcgis-map-config-smart-mapping-raster-preset-renderer-button mode=edit .originalRasterProps=${{originalRendererObj:this.originalRendererObj,originalEffect:this.originalEffect}} @arcgisDone=${e=>{"delete"!==e.detail?this.requestUpdate():this.arcgisSmartMappingPanelsRasterFlowBackClick.emit("delete")}} ${(0,p.K)(this.manageStyleButtonNode)}></arcgis-map-config-smart-mapping-raster-preset-renderer-button>`}renderMode(){const{smartMappingState:e}=this,{_messages:t}=e,a=(0,i.T)(e),o=a.authoringInfo,n=o?.flowTheme?"wave-front"===o?.flowTheme:a.trailLength<1;return l.qy`<div class="block-content-padding-large"><calcite-chip value=flowline .label=${t.panels.flow.flowline} .appearance=${n?"outline-fill":"solid"} .kind=${n?"neutral":"brand"} class=${(0,g.CP)(n?"mode-hover":"")} scale=s @click=${()=>this.handleModeChange("flowline")}>${t.panels.flow.flowline}</calcite-chip><span>&nbsp;</span><calcite-chip value=wavefront .label=${t.panels.flow.wavefront} .appearance=${n?"solid":"outline-fill"} .kind=${n?"brand":"neutral"} class=${(0,g.CP)(n?"":"mode-hover")} scale=s @click=${()=>this.handleModeChange("wavefront")}>${t.panels.flow.wavefront}</calcite-chip></div>`}renderSpeed(){const{smartMappingState:e}=this,{_messages:t}=e,a=(0,i.T)(e),o="wave-front"===a.authoringInfo.flowTheme,{flowSpeed:n}=a;return l.qy`<calcite-label>${t.panels.flow.speed}<arcgis-map-config-smart-mapping-raster-slider renderer-type=flow type=speed min=0 .max=${o?20:40} .values=${[n]} precision=1 .minLabel=${t.panels.flow.slow} .maxLabel=${t.panels.flow.fast}></arcgis-map-config-smart-mapping-raster-slider></calcite-label>`}renderDensity(){const{smartMappingState:e}=this,{_messages:t}=e,a=(0,i.T)(e),{density:o}=a;return l.qy`<calcite-label>${t.panels.flow.density}<arcgis-map-config-smart-mapping-raster-slider renderer-type=flow type=density min=0.1 max=1 .values=${[o]} precision=1 .minLabel=${t.panels.flow.low} .maxLabel=${t.panels.flow.high}></arcgis-map-config-smart-mapping-raster-slider></calcite-label>`}renderLength(){const{smartMappingState:e}=this,{_messages:t}=e,a=(0,i.T)(e),o="wave-front"===a.authoringInfo.flowTheme,{trailLength:n}=a;return l.qy`<calcite-label>${t.panels.flow.length}<arcgis-map-config-smart-mapping-raster-slider renderer-type=flow type=trail-length .min=${o?.1:1} .max=${o?50:200} .values=${[(0,d.p)(n)]} .precision=${o?1:0} .minLabel=${t.panels.flow.short} .maxLabel=${t.panels.flow.long}></arcgis-map-config-smart-mapping-raster-slider></calcite-label>`}renderWidth(){const{smartMappingState:e}=this,{_messages:t}=e,a=(0,i.T)(e),o="wave-front"===a.authoringInfo.flowTheme,{trailWidth:n}=a,r=Math.round(10*(0,d.p)(n))/10;return l.qy`<div class="block-content-padding-large"><calcite-label>${t.panels.flow.width}</calcite-label><arcgis-map-config-smart-mapping-slider-input .min=${o?Math.min(5,Math.floor(r)):.1} .max=${Math.max(o?12:5,Math.ceil(r))} .values=${[r]} precision=1 .suffixText=${t.panels.flow.px} @arcgisSmartMappingSliderInputChange=${t=>{const a=(0,i.T)(e),o=t.detail;a.trailWidth=(0,d.a)(o),(0,i.ag)(e)}}></arcgis-map-config-smart-mapping-slider-input></div>`}renderColor(){const{smartMappingState:e}=this,{_messages:t}=e,a=(0,i.T)(e),o=(0,i.c)(a,"color");return l.qy`<calcite-radio-button-group class="block-content-padding" name=colorType @calciteRadioButtonGroupChange=${e=>this.handleColorTypeChange(e.target.selectedItem.value)}><div class="color-wrapper"><div><calcite-label layout=inline><calcite-radio-button .checked=${!o} value=singleColor ${(0,p.K)(this.singleColorNode)}></calcite-radio-button>${t.panels.flow.singleColor}</calcite-label>${!o&&this.renderSingleColor()||""}</div><div><calcite-label layout=inline><calcite-radio-button .checked=${!!o} value=colorRamp ${(0,p.K)(this.colorRampNode)}></calcite-radio-button>${t.panels.flow.colorRamp}</calcite-label>${o&&this.renderColorRamp()||""}</div></div></calcite-radio-button-group>`}renderSingleColor(){const{smartMappingState:e}=this,t=(0,i.T)(e),{color:a}=t,o=(0,i.q)();return o.color=a,o.outline.color=a,l.qy`<div class="symbol-button-padding"><arcgis-map-config-smart-mapping-symbol-button .symbol=${o} hide-label type=raster-flow ramp-type=continuous @arcgisSmartMappingSymbolButtonSymbolChange=${()=>{(0,i.ag)(e),this.requestUpdate()}}></arcgis-map-config-smart-mapping-symbol-button></div>`}renderColorRamp(){const{smartMappingState:e}=this,t=(0,i.T)(e),a=(0,i.c)(t,"color");if(!a)return"";const o=a.stops.map(e=>{const t=e.color.clone();return t.a=1,t});return l.qy`<div class="symbol-button-padding"><arcgis-map-config-smart-mapping-symbol-button .colors=${o} hide-label type=raster-flow ramp-type=continuous @arcgisSmartMappingSymbolButtonSymbolChange=${()=>{(0,i.ag)(e),this.requestUpdate(),this.flowColorSliderNode&&this.flowColorSliderNode.manager.component.requestUpdate()}} ${(0,p.K)(this.symbolButtonRefHandler)}></arcgis-map-config-smart-mapping-symbol-button></div>`}renderColorSlider(){const{smartMappingState:e}=this,t=(0,i.T)(e);return(0,i.c)(t,"color")?l.qy`<arcgis-map-config-smart-mapping-flow-color-slider @arcgisSmartMappingFlowColorSliderChange=${()=>{this.requestUpdate(),this.symbolButtonNode&&this.symbolButtonNode.manager.component.requestUpdate()}} @arcgisSmartMappingFlowColorSliderError=${e=>this.arcgisSmartMappingPanelsRasterFlowError.emit(e.detail)} ${(0,p.K)(this.sliderRefHandler)}></arcgis-map-config-smart-mapping-flow-color-slider>`:""}renderDirection(){const{smartMappingState:e}=this,{_messages:t}=e,a=(0,i.T)(e),{flowRepresentation:o}=a;return l.qy`<calcite-label layout=inline-space-between class="block-content-padding">${t.panels.flow.flowDirection}<calcite-segmented-control layout=horizontal appearance=solid @calciteSegmentedControlChange=${e=>this.handleDirectionChange(e.target.selectedItem.value)}><calcite-segmented-control-item value=to .checked=${"flow-from"!==o}>${t.panels.flow.to}</calcite-segmented-control-item><calcite-segmented-control-item value=from .checked=${"flow-from"===o}>${t.panels.flow.from}</calcite-segmented-control-item></calcite-segmented-control></calcite-label>`}renderRoundCaps(){const{smartMappingState:e}=this,{_messages:t}=e,a=(0,i.T)(e),{trailWidth:o,authoringInfo:n}=a,r="flow-line"===n.flowTheme,s="round"===a.trailCap,c=Math.round(1e3*o)/1e3>3;return l.qy`<div class="toggles block-content-padding"><calcite-label class="toggle-text" layout=inline-space-between>${t.panels.flow.roundEndCaps}<calcite-switch .disabled=${!c} .checked=${s} @calciteSwitchChange=${()=>this.handleRoundCapsToggle()} ${(0,p.K)(this.capsSwitchRefHandler)}></calcite-switch></calcite-label>${r?l.qy`<div class=${"hint-text "+(c?"":"disabled")}>${t.panels.flow.forWideLines}</div>`:null}</div>`}renderShowInLegend(){const{smartMappingState:e}=this,{_messages:t}=e,a=(0,i.T)(e),o=(0,i.c)(a,"color");if(!o)return"";const n=o.legendOptions,r=!n||!1!==n.showLegend;return l.qy`<calcite-label layout=inline-space-between class="toggle-text toggles block-content-padding">${t.panels.flow.includeInLegend}<calcite-switch .checked=${r} @calciteSwitchChange=${()=>this.handleIncludeInLegendToggle()}></calcite-switch></calcite-label>`}renderEffects(){const{layer:e,_messages:t}=this.smartMappingState,a=e;return l.qy`<div class="toggles block-content-padding"><calcite-label class="toggle-text" layout=inline-space-between>${t.panels.flow.layerEffects}<calcite-switch .checked=${!!a.effect} @calciteSwitchChange=${()=>this.handleEffectToggle()}></calcite-switch></calcite-label><div class="hint-text">${t.panels.flow.adjustEffects}</div></div>`}renderFooterButtons(){return l.qy`<div class="footer-buttons" slot=footer>${this.renderDoneButton()}${this.renderRegisterStyleButton()}${this.renderCancelButton()}</div>`}renderRegisterStyleButton(){return l.qy`<arcgis-map-config-smart-mapping-raster-preset-renderer-button mode=register @arcgisDone=${e=>{const{smartMappingState:t}=this,{layer:a}=t,o=a;if(this.requestUpdate(),"register"===e.detail){const e=(0,i.T)(t);this.originalRendererObj=n.clone(e),this.originalEffect=o.effect??void 0}this.manageStyleButtonNode.value&&this.manageStyleButtonNode.value.manager.component.requestUpdate(),this.registerStyleButtonNode.value.manager.component.requestUpdate()}} ${(0,p.K)(this.registerStyleButtonNode)}></arcgis-map-config-smart-mapping-raster-preset-renderer-button>`}renderDoneButton(){const{_messages:e}=this.smartMappingState;return l.qy`<calcite-button .label=${e.done} @click=${this.handleDone} appearance=solid width=full>${e.done}</calcite-button>`}renderCancelButton(){const{_messages:e}=this.smartMappingState;return l.qy`<calcite-button .label=${e.cancel} @click=${this.handleCancel} appearance=outline-fill width=full>${e.cancel}</calcite-button>`}}(0,o.c)("arcgis-map-config-smart-mapping-panels-raster-flow",m)}}]);