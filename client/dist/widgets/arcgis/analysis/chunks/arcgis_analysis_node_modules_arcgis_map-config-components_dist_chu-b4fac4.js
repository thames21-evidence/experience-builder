/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_chu-b4fac4.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_chu-b4fac4"],{44263:(e,o,l)=>{l.d(o,{a:()=>v,b:()=>I,c:()=>R,d:()=>k,e:()=>S,f:()=>b,g:()=>h,h:()=>w});var t=l(5294),n=l(56451),r=l(23054),s=l(5077),a=l(23795),i=l(17902),c=l(87420),u=l(30161),f=l(81734),d=l(1225);l(54312),l(44345),l(55448),l(52797),l(34031),l(63438),l(5933),l(28927),l(83368),l(89704),l(18423),l(96086),l(91813),l(21255),l(13078),l(21303),l(12627),l(75698),l(10628),l(59640),l(64451),l(6176),l(83552),l(77462),l(49403),l(66617),l(10454),l(29614),l(94916),l(52554),l(2156),l(4038),l(49851),l(75054),l(15223),l(70169),l(47207),l(70852),l(48103),l(39423),l(85681),l(18444),l(42411),l(9767),l(38218),l(91914),l(31521),l(86605),l(68196),l(440),l(46547),l(6238),l(7299);const p="polygon";function m(){return[new n.default("#ff4040"),new n.default("#ff8200"),new n.default("#faa83f"),new n.default("#ffd159"),new n.default("#74b566"),new n.default("#008977"),new n.default("#33e3c8"),new n.default("#43abeb"),new n.default("#4c64c9"),new n.default("#9868ed"),new n.default("#b155e6"),new n.default("#db5181"),new n.default("#e03b99"),new n.default("#2b2b2b"),new n.default("#bdbdbd"),new n.default("#ffffff")]}function y(e,o,l){return document.URL.includes("debug=true")&&(console.log("symbol",JSON.stringify(o,null,2)),console.log("props",JSON.stringify({...l,portal:"..."}))),e.edit(o,l)}function g(e,o){const{symbol:l,info:{marker:t,stroke:n,fill:r}}=o.detail;document.URL.includes("debug=true")&&(console.log("onStylerEdit - symbol:",JSON.stringify(l?.toJSON(),null,2)),console.log("onStylerEdit - info.marker:",JSON.stringify(t)),console.log("onStylerEdit - info.stroke:",JSON.stringify(n)),console.log("onStylerEdit - info.fill:",JSON.stringify(r))),e(o)}async function w(e,o){const{mapView:l,portal:t,_messages:n}=e,r=(0,d.T)(e),{onChange:a,symbolStylerPopoverNode:i}=o,c=(0,d.c)(r,"color"),f=await i.getSymbolStylerElement();let w,h;if(c){const o=c.stops.map(e=>e.color),r=u.getSchemes({basemapTheme:await s.getBackgroundColorTheme(l),geometryType:p,theme:"high-to-low"});let i=(0,d.k)(r,0);i=i.filter(e=>e.colors?.length===c.stops.length);const m=i.map(e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name}));w=({detail:o})=>{const l=(0,d.T)(e);(0,d.c)(l,"color").stops.reverse().forEach((e,l)=>{e.color=o.info.fill.color[l]}),a()},h=y(f,(0,d.e)(e),{portal:t,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color-ramp",style:"continuous",open:!0,colorRamps:m}},fill:{color:o.reverse()}}),f.stringOverrides={fillColor:n.styler.color,fillTransparency:n.styler.transparency}}else{const o=m();w=({detail:o})=>{(0,d.T)(e).color=o.symbol.color,a()},h=y(f,(0,d.e)(e),{portal:t,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color",optional:!1,open:!0,suggestedColorsOpen:!0,transparencyOpen:!0,suggestedColors:o}},fill:{color:r.color||o[1]},fillEnabled:!0}),f.stringOverrides={fillColor:n.styler.color,fillTransparency:n.styler.transparency}}i.addEventHandler("arcgisEdit",g.bind(null,w)),await h}async function h(e,o){const{_messages:l}=e,s=(0,d.T)(e),{onChange:a,symbolStylerPopoverNode:i}=o,c=await i.getSymbolStylerElement();o.defaultColors=s.colorRamp?C(s.colorRamp).map(e=>new n.default(e)):null;const u=c.edit(new r.default,E(e,o));c.stringOverrides={fillColor:l.styler.color};i.addEventHandler("arcgisFillChange",({detail:o})=>{const l=t.clone(o.color);(0,d.T)(e).colorRamp=R(l.reverse()),a()}),await u}async function b(e,o){const{_messages:l}=e,s=(0,d.T)(e),{onChange:a,symbolStylerPopoverNode:i}=o,c=await i.getSymbolStylerElement();o.defaultColors=s.colorRamp?C(s.colorRamp).map(e=>new n.default(e)):null;const u=c.edit(new r.default,E(e,o));c.stringOverrides={fillColor:l.styler.color};i.addEventHandler("arcgisFillChange",({detail:o})=>{const l=t.clone(o.color);(0,d.T)(e).colorRamp=R(l.reverse()),a()}),await u}async function v(e,o){const{classedSymbolSelectedIdx:l,portal:r,_messages:s}=e,a=(0,d.T)(e),{onChange:i,symbolStylerPopoverNode:c}=o,u=(0,d.U)(e),f=a.classBreakInfos?.length?t.clone(a.classBreakInfos[l].symbol):(0,d.e)(e,u),p="picture-marker"!==f.type&&!!f.color,w=(0,d.r)(f),h=m();let b;if("simple-fill"===f.type){const e=f;e.outline&&(b={color:e.outline.color||new n.default([0,0,0,.5]),size:e.outline.width,style:e.outline.style})}const v=await c.getSymbolStylerElement(),S=y(v,t.clone(f),{portal:r,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:(0,d.x)(f),suggestedColors:h,parts:{transparency:!1}}},fill:{color:(0,d.i)(f)},stroke:b,fillEnabled:p,strokeEnabled:w});v.stringOverrides={fillColor:s.styler.color,fillTransparency:s.styler.transparency},c.addEventHandler("arcgisEdit",g.bind(null,({detail:{symbol:o}})=>{o.outline&&(o.outline.width=0);const t=(0,d.T)(e),n=t.classBreakInfos.slice();n[l].symbol=o,t.classBreakInfos=n,i()})),await S}async function S(e,o){const{_messages:l}=e,s=(0,d.T)(e),{onChange:a,symbolStylerPopoverNode:i}=o;let c=O(s.authoringInfo.colorRamp,s.classBreakInfos.length).map(e=>new n.default(e.slice(1)));s.classBreakInfos&&(c=s.classBreakInfos.map(e=>e.symbol.color));const u=await i.getSymbolStylerElement();o.defaultColors=(s.authoringInfo?.colorRamp?c:[[0,0,255],[0,255,255],[255,255,0],[255,0,0]]).map(e=>new n.default(e)),V(o.defaultColors);const f=u.edit(new r.default,E(e,o));u.stringOverrides={fillColor:l.styler.color,fillTransparency:l.styler.transparency};i.addEventHandler("arcgisFillChange",({detail:o})=>{const l=t.clone(o.color),r=(0,d.T)(e),s=t.clone(l).reverse();r.classBreakInfos.map((e,o)=>e.symbol.color=new n.default(s[o]));const i=function(e,o){const l=(0,d.T)(e),r=T(),s=t.clone(r);s.forEach(e=>{e.stops=O(R(e.stops),l.classBreakInfos.length).map(e=>new n.default(e.slice(1))).reverse()});const a=s.filter(e=>{const l=JSON.stringify(e.stops)===JSON.stringify(o),n=JSON.stringify(t.clone(e.stops).reverse())===JSON.stringify(o);return l||n});if(a.length){const e=r.filter(e=>e.name===a[0].name);return R(e[0]?.stops)}return null}(e,l);i&&(r.authoringInfo.colorRamp=i),a()}),await f}function C(e){if("multipart"===e?.type){const o=e.colorRamps,l=o.map(e=>e.fromColor);return l.push(o[o.length-1].toColor),l}return[e.fromColor,e.toColor]}async function k(e,o){const{mapView:l}=e,s=(0,d.T)(e),{onChange:a,symbolStylerPopoverNode:i}=o,u=s.uniqueValueInfos,m=await i.getSymbolStylerElement(),y=f.getSchemes({basemap:l.map?.basemap??"topo",geometryType:(0,d.j)(e)||p}),g=[],w=(0,d.k)(y,Math.min(u.length,10)),h=w[0].colors;g.push(...u?.length?s.uniqueValueInfos.map((e,o)=>(0,d.i)(e.symbol)||new n.default(h[o%h.length])):[]);const b=w.map(e=>({stops:e.colors,tags:e.scheme.tags,name:e.scheme.name}));if(!s.authoringInfo?.colorRamp&&g||!function(e){return!!c.getColorRampName(e)}(s.authoringInfo?.colorRamp)&&!function(e,o){if(!o?.colorRamps)return!1;const{mapView:l}=e,n=(0,d.T)(e).uniqueValueInfos,r=f.getSchemes({basemap:l.map?.basemap??"topo",geometryType:(0,d.j)(e)||p}),s=(0,d.k)(r,Math.min(n.length,10)).filter(e=>e.colors.length===o.colorRamps.length+1),a=[];return a.push(o.colorRamps[0].fromColor),o.colorRamps.forEach(e=>{a.push(e.toColor)}),s.filter(e=>{const o=JSON.stringify(e.colors)===JSON.stringify(a),l=JSON.stringify(t.clone(e.colors).reverse())===JSON.stringify(a);return o||l}).length>0}(e,s.authoringInfo?.colorRamp))o.defaultColors=g.reverse()||null;else{const e=O(s.authoringInfo?.colorRamp,s.uniqueValueInfos.length).map(e=>e.slice(1));JSON.stringify(e)!==JSON.stringify(g)&&(o.defaultColors=g.reverse()||null)}o.extraColorRamps=b,o.defaultColors||(o.defaultColors=s.authoringInfo?.colorRamp?C(s.authoringInfo.colorRamp).reverse().map(e=>new n.default(e)):g.reverse()||null),V(o.defaultColors);const v=m.edit(new r.default,E(e,o));m.stringOverrides={fillColor:""};i.addEventHandler("arcgisFillChange",({detail:o})=>{const l=R(t.clone(o.color)),r=(0,d.T)(e),s=r.authoringInfo||{};s.colorRamp=l,r.authoringInfo=s;const i=O(l,r.uniqueValueInfos.length).map(e=>e.slice(1)),c=[];r.uniqueValueInfos.forEach((e,o)=>{e=e.clone(),c.push(e),(0,d.y)(e.symbol,new n.default(i[o]))}),r.uniqueValueInfos=c,a()}),await v}async function I(e,o){const{mapView:l,selectedValue:r,lastDefault:s,portal:a}=e,i=(0,d.T)(e),c=(0,d.U)(e),{onChange:u,symbolStylerPopoverNode:p}=o,m=(0,d.o)(e);let w=-1===r?i.defaultSymbol||s.defaultSymbol:i.uniqueValueInfos[r].symbol;(function(e){return["simple-fill","simple-marker","simple-line","picture-marker","cim"].includes(e?.type)})(w)||(w=(0,d.e)(e,c),-1===r&&!i.defaultSymbol&&(s.defaultSymbol=w));const h="picture-marker"!==w.type&&!!w.color,b=(0,d.r)(w);let v;if(-1===r)v=[new n.default([255,255,255]),new n.default([178,178,178]),new n.default([128,128,128]),new n.default([92,92,92]),new n.default([77,77,77]),new n.default([51,51,51]),new n.default([26,26,26])];else{const o=f.getSchemes({basemap:l.map?.basemap??"topo",geometryType:(0,d.j)(e)});v=(0,d.t)(o).slice(0,16)}let S;const C=w;S=C.outline?{color:C.outline.color?C.outline.color:new n.default([0,0,0,.5]),size:C.outline.width,style:C.outline.style,autoAdjusted:!1}:{color:new n.default([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!1};const k=y(await p.getSymbolStylerElement(),t.clone(w),{portal:a,symbolFilter:m&&!(0,d.v)(e)?"simple":void 0,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,parts:{transparency:!1}}},fill:{color:(0,d.i)(w)||N(v[r],.85)},stroke:S,fillEnabled:h,strokeEnabled:b});p.addEventHandler("arcgisEdit",g.bind(null,({detail:{symbol:o}})=>{o.outline&&(o.outline.width=0);const l=(0,d.T)(e);if(-1===r)l.defaultSymbol=o;else{const e=l.uniqueValueInfos.slice();e[r].symbol=o,l.uniqueValueInfos=e}u()})),await k}function R(e){const o=[];for(let l=0;l<e.length-1;l++)o[l]=new a.default({algorithm:"hsv",fromColor:e[l],toColor:e[l+1]||new n.default({r:255,g:255,b:255,a:1})});return e.length>2?new i.default({colorRamps:o}):o[0]}function E(e,o){const{layer:l,portal:t}=e,r=l,s=(0,d.T)(e),{defaultColors:a,extraColorRamps:i}=o,c={color:a?.reverse()||[new n.default([255,255,255,1]),new n.default([0,0,0,1])]},u={color:new n.default([0,0,0,.5]),size:1,style:"solid"},f=T();i&&f.push(...i),f.sort(e=>e.tags.indexOf("raster")>-1?-1:1);return"class-breaks"===s.type?f.forEach(e=>{e.stops=O(R(e.stops),s.classBreakInfos.length).map(e=>new n.default(e.slice(1))).reverse()}):["unique-value","raster-stretch","raster-shaded-relief"].includes(s.type)&&f.forEach(e=>e.stops.reverse()),{portal:t,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color-ramp",style:"class-breaks"===s.type?"discrete":"continuous",colorRamps:f,open:!0,colorRampsOpen:!0,parts:{colorRamps:!0,transparency:"imagery-tile"===r.type&&"unique-value"!==s.type},extraParts:{autoStrokeAdjust:!1,width:!0}}},stroke:{...u,color:[new n.default([13,38,68,1]),new n.default([56,98,122,1]),new n.default([98,158,176,1]),new n.default([177,205,194,1]),new n.default([255,252,212,1])]},fill:c}}function T(){return c.all().map(({name:e,colors:o})=>({name:e,stops:o,tags:["raster"]}))}function O(e,o){return c.convertColorRampToColormap(e,{numColors:o,interpolateAlpha:!0})}function N(e,o){return e&&(e.a=o),e}function V(e){e?.forEach((o,l)=>{0===o.r&&0===o.g&&0===o.b&&0===o.a&&(e[l]=new n.default([255,255,255,0]))})}},65595:(e,o,l)=>{l.d(o,{c:()=>s,u:()=>a});var t=l(20936),n=l(1225),r=(l(54312),l(44345),l(55448),l(52797),l(34031),l(63438),l(5933),l(28927),l(83368),l(89704),l(5294),l(18423),l(96086),l(91813),l(21255),l(13078),l(21303),l(12627),l(56451),l(31521),l(23054),l(5077),l(23795),l(17902),l(87420),l(30161),l(81734),l(75698),l(10628),l(59640),l(64451),l(6176),l(83552));l(77462),l(49403),l(10281),l(83930),l(66617),l(10454),l(29614),l(94916),l(52554),l(2156),l(4038),l(49851),l(75054),l(15223),l(70169),l(47207),l(70852),l(48103),l(39423),l(85681),l(18444),l(42411),l(9767),l(38218),l(91914),l(86605),l(68196),l(440),l(46547),l(6238),l(7299);function s(e){e.selectedFields=[],e.layerFields=void 0,e.fields=void 0,e.hideLayerTitle=!1,e.supportsArcade=!1,e.stringFieldsCount=-1,e.dateFieldsCount=-1,e.numberFieldsCount=-1,e.containsFlow=!0,e.oneFeatureResponseStatus=n.s.MISSING,e.selectedAttribute=void 0,e.selectedAttributeText=void 0,e.selectedTypeValue=void 0,e.selectedValue=void 0,e.lastDefault=void 0,e.lastDefaults=void 0,e.dotColorSelected=void 0,e.backgroundStyleSelected=void 0,e.lastSettings=void 0,e.classedSymbolSelectedIdx=void 0,e.allUniqueValues=void 0,e.useFeatureReduction=void 0,e.symbolStylerConfig={},e.allowTimeSeriesConfiguration=!1,e.rasterInfo=void 0}function a(){const e=(0,r.Gk)(),o=e;e.manager.onLoad(()=>{o.smartMappingState=function(e,o){const l=i.get(e);if(l)return l;const n=(0,t.el)(e,o);return n&&"store"in n?(i.set(e,n.store),n.store):null}(e.el,"arcgis-map-config-smart-mapping")})}const i=new WeakMap}}]);