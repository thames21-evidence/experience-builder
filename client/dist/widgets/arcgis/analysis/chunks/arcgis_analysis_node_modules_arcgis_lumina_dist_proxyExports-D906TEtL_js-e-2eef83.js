/*! For license information please see arcgis_analysis_node_modules_arcgis_lumina_dist_proxyExports-D906TEtL_js-e-2eef83.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_lumina_dist_proxyExports-D906TEtL_js-e-2eef83"],{93461:(e,t,i)=>{i.d(t,{p:()=>s});var a=i(4713),l=i(44319);const s=e=>(...t)=>{const i=(0,a.d)(),s=new e(...t),c=s.exports;(0,a.b)(i.at(-1));const o=s.component.manager;o.W(s,c),s.watchExports(o.W.bind(o,s)),(0,a.j)(s);const n=[s.component,...i].reverse();return(0,l.t)(n,e=>void 0===e?void 0:r(s,e,c),c)},r=(e,{host:t,key:i,isReactive:l},s)=>{const r=t,c=r[i]!==e.exports,o=r[i]!==s,n=s!==e.exports;c&&!o&&n&&(r[i]=e.exports);if(t===e.component){if(l){const t=e.component.manager;o&&t.W(e,r[i]),e.onUpdate(a=>{if(a.has(i)){const a=r[i];a!==e.exports&&t.W(e,a)}})}e.O=l?void 0:i}const d=e.component.constructor.elementProperties.get(i)?.readOnly;e.watchExports(()=>{r[i]!==e.exports&&(d?(0,a.f)(()=>{r[i]=e.exports}):r[i]=e.exports)})}},98866:(e,t,i)=>{i.r(t),i.d(t,{ArcgisMapConfigFieldCalculateLayerFieldSwitcher:()=>n});var a=i(73679),l=i(4395),s=i(73801),r=i(28275),c=(i(34031),i(63438),i(5933),i(52797),i(59290),i(31526),i(44345),i(55448),i(2924));const o=l.AH`.combobox{width:100%}.label{--calcite-label-margin-bottom: 0px;width:100%}.switchers{max-width:97%;display:flex;column-gap:10px;margin:10px 12px}`;class n extends s.WF{constructor(){super(...arguments),this.fields={},this.layers=[],this.fieldSwitcherDisabled=!1,this.layerSwitcherDisabled=!1,this.arcgisFieldSwitcherChange=(0,s.lh)(),this.arcgisLayerSwitcherChange=(0,s.lh)(),this.arcgisSwitcherOpen=(0,s.lh)()}static{this.properties={fieldSwitcherDisabled:5,layerSwitcherDisabled:5}}static{this.styles=o}async load(){const{layer:e}=r.f,t=[],i=[],a={},l=await c.default.fromPortalItem({portalItem:{id:e.portalItem.id}});if("loadAll"in l){const e=l;await e.loadAll(),e.allLayers.forEach(e=>{["feature","oriented-imagery"].includes(e.type)&&(0,r.c)(e)&&t.unshift(e)}),e.allTables.forEach(e=>{i.unshift(e)}),t.push(...i)}else t.push(e);t.forEach(e=>{if(e?.portalItem?.id){const t=`${e?.portalItem?.id}-${e?.layerId}`;a[t]=[],e.fields.forEach(e=>{(0,r.a)(e)&&a[t].push(e)})}}),this.fields=a,this.layers=t}render(){return l.qy`<div class="switchers">${this.renderLayerSwitcher()}${this.renderFieldSwitcher()}</div>`}renderFieldSwitcher(){const{layer:e,originalField:t,_messages:i}=r.f,a=`${e?.portalItem?.id}-${e?.layerId}`;return!a||this.fields[a]?.length<2?"":l.qy`<calcite-label class="label" layout=inline>${i.field}<calcite-combobox scale=s class="combobox" .disabled=${this.fieldSwitcherDisabled} .label=${i.field} .flipPlacements=${["bottom"]} selection-mode=single-persist @calciteComboboxChange=${e=>{const t=this.fields[a].find(t=>t.name===e.currentTarget.value);t&&this.arcgisFieldSwitcherChange.emit(t)}} @calciteComboboxOpen=${()=>this.arcgisSwitcherOpen.emit()}>${this.fields[a].map(e=>l.qy`<calcite-combobox-item .selected=${e.name===t.name} .heading=${e.alias??e.name} .value=${e.name}></calcite-combobox-item>`)}</calcite-combobox></calcite-label>`}renderLayerSwitcher(){const{layer:e,_messages:t}=r.f;return this.layers.length<2?"":l.qy`<calcite-label class="label" layout=inline>${t.layer}<calcite-combobox scale=s class="combobox" .disabled=${"language-select"!==r.f.workflowState||this.layerSwitcherDisabled} .label=${t.layer} selection-mode=single-persist @calciteComboboxChange=${e=>{const t=Array.isArray(e.currentTarget.value)?e.currentTarget.value:e.currentTarget.value.split(","),i=t[0],a=Number.parseInt(t[1]),l=this.layers.find(e=>e.portalItem.id===i&&e.layerId===a);if(l){const e=`${l?.portalItem?.id}-${l?.layerId}`;this.arcgisLayerSwitcherChange.emit({layer:l,field:this.fields[e][0]})}}} @calciteComboboxOpen=${()=>this.arcgisSwitcherOpen.emit()}>${this.layers.map(t=>l.qy`<calcite-combobox-item .selected=${t.portalItem.id===e.portalItem.id&&t.layerId===e?.layerId} .value=${[t?.portalItem?.id,t?.layerId]} .heading=${t.title||""}></calcite-combobox-item>`)}</calcite-combobox></calcite-label>`}}(0,a.c)("arcgis-map-config-field-calculate-layer-field-switcher",n)}}]);