/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-47d5c2.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-47d5c2"],{1654:(e,i,t)=>{t.d(i,{A:()=>y,B:()=>L,C:()=>E,D:()=>M,E:()=>v,F:()=>F,a:()=>a,b:()=>s,c:()=>n,d:()=>f,e:()=>A,f:()=>w,g:()=>x,h:()=>I,i:()=>g,j:()=>k,k:()=>T,l:()=>c,m:()=>p,n:()=>l,o:()=>S,p:()=>u,q:()=>h,r:()=>m,s:()=>B,t:()=>j,u:()=>d,v:()=>D,w:()=>C,x:()=>$,y:()=>O,z:()=>b});var r=t(46904);const o=e=>{var i,t,r;return"string"==typeof(null==e?void 0:e.role)&&(null==e?void 0:e.role)?null==e?void 0:e.role:null!==(t=null!==(i=null==e?void 0:e.roleId)&&void 0!==i?i:null==e?void 0:e.id)&&void 0!==t?t:null===(r=null==e?void 0:e.sourceJSON)||void 0===r?void 0:r.id};function s(e){return e&&!e.orgId}function n(e,i){return(0,r.u)(e,i)||"update"===e.itemControl||(0,r.c)([e],i)&&w(i)}function a(e,i){const t=(0,r.c)([e],i),o=(0,r.u)(e,i)||w(i)&&t,s=x(i)&&P(i);return!!(o||t&&s)}const l=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:manageLicenses"))},c=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:inviteUsers"))},p=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:manageRoles"))},d=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:changeUserRoles"))},u=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:viewGroups"))},h=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:viewUsers"))};function g(e){return["Trial Developer","Developer","Developer Subscription"].includes(null==e?void 0:e.type)}function v(e){return["Developer Subscription"].includes(null==e?void 0:e.type)}function m(e){return["Geoanalytics Engine","GeoAnalytics MS Fabric"].includes(null==e?void 0:e.type)}const f=e=>{var i;return null===(i=null==e?void 0:e.options)||void 0===i?void 0:i.includes("Developer")},b=e=>{var i;return null===(i=null==e?void 0:e.options)||void 0===i?void 0:i.includes("PublicSharingDisabled")},y=e=>{var i;return null===(i=null==e?void 0:e.options)||void 0===i?void 0:i.includes("HostedServicesPublicSharingDisabled")};function w(e){return"org_admin"===o(e)||"account_admin"===o(e)}function A(e){return["org_admin","account_admin"].includes(o(e))&&!(null==e?void 0:e.roleId)}function x(e){return!!(null==e?void 0:e.roleId)&&e.roleId.length>0}function k(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:updateItemCategorySchema"))}function I(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:updateGroups"))}function S(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:assignToGroups"))}const P=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:deleteItems"))};function D(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToGroup")}function C(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToOrg")}function L(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToPublic")}function O(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToOrg")}function E(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToPublic")}function $(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToGroup")}function T(e,i,t,r){const o=r&&!["Trial","Trial Press","Trial Developer","Developer Subscription","Evaluation"].includes(r.type),s=((null==i?void 0:i.privileges)||[]).includes("portal:admin:manageCollaborations");return!(!(null==e?void 0:e.collaborationsEnabled)||!i||!w(i)&&!s||!(null==t?void 0:t.isPortal)&&!o)}function F(e){return!!e&&(!x(e)||x(e)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:viewItems")}(e))}const M=({items:e,user:i,portal:t})=>{const o=e[0],s=o.owner;if(t.isPortal&&s!==i.username&&s.includes("esri_")&&!["esri_livingatlas"].includes(s))return!1;const a=(0,r.u)(o,i),l=x(i),c=_(i),p=n(o,i)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:updateItems")}(i)&&!l&&(function(e,i){return!function(e){return!(!e.urlKey||!e.customBaseUrl)||!!e.isPortal}(i)||D(e)||C(e)||!!i.canSharePublic&&L(e)}(i,t)||_(i));return a||p||(0,r.c)(e,i)&&c};function _(e){return $(e)||O(e)||E(e)}const R=["portal:user:createItem","portal:user:viewOrgItems","premium:publisher:createNotebooks","portal:publisher:createDataPipelines","features:user:edit","features:user:fullEdit","portal:admin:viewItems","portal:admin:updateItems","portal:admin:deleteItems"];function j(e){return e.some(e=>R.includes(e))}function B(e){return e.filter(e=>R.includes(e))}},5821:(e,i,t)=>{t.d(i,{a:()=>a,b:()=>n,g:()=>s,s:()=>o,u:()=>l});var r=t(4429);function o(e,i,t,r){!function(e,i,t){t=t||{};let r=null==t?void 0:t.expires;if("number"==typeof r){const e=new Date,i=24*r*60*60*1e3;e.setTime(Date.now()+i),r=t.expires=e}"string"!=typeof r&&(null==r?void 0:r.toUTCString)&&(t.expires=r.toUTCString());let o,s=`${e}=${encodeURIComponent(i)}`;for(o in t){s+=`; ${o}`;const e=t[o];!0!==e&&(s+=`=${e}`)}document.cookie=s}(e,r?JSON.stringify(i):i,t)}function s(e,i){const t=function(e){const i=document.cookie,t=new RegExp(`(?:^|; )${(0,r.e)(e)}=([^;]*)`),o=i.match(t);return o?decodeURIComponent(o[1]):void 0}(e);return t&&i?JSON.parse(t):t}function n(e,i,t){window.localStorage.setItem(e,t?JSON.stringify(i):i)}function a(e,i){const t=window.localStorage.getItem(e);return t&&i?JSON.parse(t):t}function l(e,i,t){const r=new Date(i);var s;r.setFullYear(i.getFullYear()+1),o(e,t,{expires:r}),t?n(e,"true",!1):(s=e,window.localStorage.removeItem(s))}},26032:(e,i,t)=>{t.r(i),t.d(i,{arcgis_app_switcher:()=>P,arcgis_app_switcher_link:()=>C});var r=t(87849),o=t(96034),s=t(59317),n=t(94984),a=t(12192),l=t(41473),c=t(1654),p=t(54251),d=t(28830),u=t(94737),h=t(5821);t(37762),t(15332),t(931),t(93814),t(46904),t(83692);const g={};function v(e){var i;return(null===(i=g[e.toLowerCase()])||void 0===i?void 0:i.valid)||!1}async function m(e){const i=(0,l.g)();if(!i||!e)return;return I(`${i}content/items/${e}/data`)}async function f(e){var i;const{portal:t,user:r}=s.c;if(!(null==t?void 0:t.id)||!r)return;const o=await async function(e){const i=`owner:"${e?"esri":"esri_config"}" AND title:"AppSwitcher Config" AND type:"Application Configuration"`,t=(0,l.g)();if(!t)return;return I(`${t}search`,{num:1,start:0,sortField:"title",sortOrder:"asc",q:i})}(e),n=null===(i=null==o?void 0:o.results)||void 0===i?void 0:i[0];if(!n)return;const a=n.id;return await m(a)}async function b(){const{user:e}=s.c;return I(`${(0,l.g)()}community/users/${e.username}/properties`)}async function y(){const{portal:e}=s.c;return I(`${(0,l.g)()}portals/${e.id}/approvedApps`,{returnAllApps:!1})}async function w(){const{user:e}=s.c,i=`${(0,l.g)()}community/users/${e.username}/provisionedListings`;return(0,u.f)(i,{returnAppClientIds:!0,returnAllProvisions:!0},"provisionedListings")}async function A(){const e=`${(0,l.g)()}portals/self/subscriptionInfo`;try{const i=await I(e);return(null==i?void 0:i.orgCapabilities)||[]}catch(e){return[]}}async function x(){var e,i;const t=`${(0,l.g)()}search`;try{const r=await I(t,{num:10,start:0,sortField:"title",sortOrder:"asc",q:'owner:"esri" AND title:"BlockedApps Config" AND type: "Application Configuration"'});if(!r)return[];const o=(null===(i=null===(e=r.results)||void 0===e?void 0:e[0])||void 0===i?void 0:i.id)||"",s=await m(o);return(null==s?void 0:s.blockedApps)||[]}catch(e){return[]}}async function k(){const e=`${(0,l.g)()}portals/self/signinSettings`;return await I(e)}async function I(e,i){i||(i={}),i.f="json";const t=(0,p.g)();t&&(i.token=t);const r=new URL(e);Object.keys(i).forEach(e=>r.searchParams.append(e,i[e]));const o=await fetch(r);return await o.json()}async function S(e){const{user:i}=s.c,t=function(e){let i=(0,l.g)();return"/"!==i.slice(-1)&&(i+="/"),`${i}${e}`}(`community/users/${i.username}/setProperties`),r=new FormData;return r.append("properties",JSON.stringify(e)),async function(e,i){i.append("f","json");const t=(0,p.g)();t&&i.append("token",t),fetch(e,{method:"POST",body:i})}(t,r)}const P=class{constructor(e){(0,r.r)(this,e),this.arcgisAppSwitcherToggle=(0,r.c)(this,"arcgisAppSwitcherToggle",7),this.willQueryForItems=!0,this.blockedApps=[],this.servers=[],this.orgCapabilities=[],this.updateAppsProperties=async()=>{const e=this.getIdsFromDOM(this.primaryContainer),i=this.getAppsByIds(e),t=this.convertToAppData(i),r=this.getIdsFromDOM(this.secondaryContainer),o=this.getAppsByIds(r),s=this.convertToAppData(o),n=Object.assign({},this.userProperties);n.appLauncher={primary:t,secondary:s},await S(n),this.userProperties=n;const a=this.secondaryApps.length;this.primaryApps=i,this.secondaryApps=o,a>0&&!this.secondaryApps.length&&(this.hoveringOverSecondary=!1)},this.handleToggle=()=>{this.open=!this.open,this.arcgisAppSwitcherToggle.emit(this.open)},this.handleShowMore=()=>{this.secondaryExpanded=!0},this.handleDismissIntro=()=>{this.updateAppsProperties(),this.displayIntro=!1},this.keydownHandler=e=>{var i;"Escape"===e.key&&this.open&&(this.handleToggle(),null===(i=this.toggleButton)||void 0===i||i.focus())},this.api=void 0,this.portal=void 0,this.user=void 0,this.newMapViewerEnabled=!0,this.notebookServerEnabled=!0,this.trackViewerEnabled=!0,this.shouldExpand=!1,this.noBoxShadow=!1,this.open=!1,this.displayIntro=!1,this.primaryApps=[],this.secondaryApps=[],this.hoveringOverSecondary=!1,this.secondaryExpanded=!1,this.sorting=!1,this.focusItemId=void 0,this.dragging=!1}handleLinkClick(){this.open=!1,this.arcgisAppSwitcherToggle.emit(this.open)}handleLinkActivated(){this.secondaryExpanded=!0}async handleLinkMove(e){const{uid:i,keyCode:t,index:r}=e.detail;this.focusItemId=i;const o=this.primaryApps.length,s=this.secondaryApps.length,n=r<o;let a;if(n){a=r<3*Math.ceil(o/3)-3||("ArrowLeft"===t||"ArrowUp"===t||"ArrowRight"===t&&r<o-1)}else a=!(r>=o+3)&&("ArrowRight"!==t&&"ArrowDown"!==t&&!("ArrowLeft"===t&&r>o));let l=-1;let c;if(n&&a||!n&&!a?"ArrowUp"===t?l=r-3:"ArrowRight"===t?l=r+1:"ArrowDown"===t?l=r+3:"ArrowLeft"===t&&(l=r-1):n?"ArrowRight"===t?l=o:"ArrowDown"===t&&(l=r%3+o):l=o,c=n?this.primaryApps.splice(r,1)[0]:this.secondaryApps.splice(r-o,1)[0],a)this.primaryApps.splice(l,0,c);else{const e=l-o;this.secondaryApps.splice(e,0,c)}const p=this.convertToAppData(this.primaryApps),d=this.convertToAppData(this.secondaryApps),u=Object.assign({},this.userProperties);u.appLauncher={primary:p,secondary:d},await S(u),this.userProperties=u,s>0&&!this.secondaryApps.length&&(this.hoveringOverSecondary=!1),window.setTimeout(()=>{this.focusItemId=""},100)}async handleLinkRemove(e){const i=e.detail,t=Object.assign({},this.userProperties);let{primary:r,secondary:o}=t.appLauncher;r=r.filter(e=>e.uid!==i),o=o.filter(e=>e.uid!==i),t.appLauncher={primary:r,secondary:o},await S(t),this.userProperties=t,this.primaryApps=this.primaryApps.filter(e=>(e.itemId||e.title)!==i),this.secondaryApps=this.secondaryApps.filter(e=>(e.itemId||e.title)!==i)}handleShouldExpandChange(e){this.open=e}componentDidLoad(){[/Android/i,/webOS/i,/iPhone/i,/iPad/i].some(e=>navigator.userAgent.match(e))||(o.S.create(this.primaryContainer,{animation:150,group:"apps",filter:".secondary-drag-text",dragClass:"app-item--dragging",onUpdate:this.updateAppsProperties,onAdd:this.updateAppsProperties,onMove:e=>{this.hoveringOverSecondary="secondary-target"===e.to.className},onStart:()=>{this.dragging=!0},onEnd:()=>{this.dragging=!1}}),o.S.create(this.secondaryContainer,{animation:150,group:"apps",filter:".secondary-drag-text",dragClass:"app-item--dragging",onUpdate:this.updateAppsProperties,onAdd:this.updateAppsProperties}))}componentDidRender(){this.primaryContainer.contains(this.secondaryDragText)&&this.secondaryContainer.appendChild(this.secondaryDragText)}async componentWillLoad(){var e,i,t;const r=await(0,a.g)(this.el);if(this.strings=r[0],this.willQueryForItems=function(){const e=(0,h.g)("APSW-query",!0);if((null==e?void 0:e.expires)>(new Date).setHours((new Date).getHours()))return!0;const i={expires:(new Date).setHours((new Date).getHours()+5)};return(0,h.s)("APSW-query",i,{path:"/",domain:document.domain,sameSite:"Strict"},!0),!1}(),this.initializeConfig(),!(null===(e=s.c.portal)||void 0===e?void 0:e.id)||!s.c.user)return;const[o,n,l,c,p]=await Promise.all([f(null===(i=s.c.portal)||void 0===i?void 0:i.isPortal),w(),b(),y(),A()]);this.orgCapabilities=p,this.userProperties=(null==l?void 0:l.properties)||{},this.userApps=null==o?void 0:o.appSwitcher,s.c.portal.isPortal||(this.userApps.apps=this.userApps.apps.filter(e=>"Map Viewer Classic"!==e.title||s.c.portal.created<new Date("February 26 2025")),this.userApps.apps.unshift(this.getAgoApp())),this.approvedApps=(null===(t=c.approvedApps)||void 0===t?void 0:t.filter(e=>!e.hideForNonPrivilegedMember))||[],this.userProperties.appLauncher||(this.willQueryForItems=!1,this.displayIntro=!0),this.provisionedListings=n||[],this.provisionedListings.forEach(e=>{var i;const t=null===(i=e.clientId)||void 0===i?void 0:i.toLowerCase();t&&(g[t]={valid:!0,itemId:e.itemId,clientId:e.clientId})}),null==p||p.forEach(e=>{var i;const t=null===(i=e.id)||void 0===i?void 0:i.toLowerCase();t&&(g[t]={valid:!0,clientId:e.id})}),await this.init(),this.primaryApps.forEach(e=>{e.fontSize=this.calcFontSize(e)})}convertToAppData(e){return e.map(e=>({label:e.label,uid:e.itemId||e.title}))}getAppsByIds(e){const i=[...this.primaryApps,...this.secondaryApps];return e.map(e=>i.find(i=>i.itemId===e||i.title===e))}getIdsFromDOM(e){const i=[];return e.querySelectorAll(".app-item").forEach(e=>{i.push(e.dataset.id)}),i}calcFontSize(e){if(!e.abbr)return;const i=[0,32,24,20,18,16,14,12,10,8,6];let t=Math.ceil((0,d.g)({text:e.abbr,font:"avenir"})/5);return t>i.length-1&&(t=i.length-1),`${i[t]}px`}async getBlockedApps(){const[e,i]=await Promise.all([k(),x()]),t=(null==e?void 0:e.blockedApps)||[];return(t.length||e.blockBetaApps)&&(null==i?void 0:i.length)?(e.blockBetaApps&&i.forEach(e=>{e.isBeta&&!t.includes(e.clientid)&&t.push(e.clientid)}),t.forEach(e=>{const t=i.find(i=>i.clientid===e);t&&this.blockedApps.push(t)}),this.blockedApps):[]}filterBlockedApps(e){return e.filter(e=>{var i;return!(null===(i=this.blockedApps)||void 0===i?void 0:i.some(i=>e.itemId&&e.itemId===i.itemid||e.title&&e.title===i.title))})}populateAppIdentifiers(e,i){let t=Object.keys(this.appDictionary).map(e=>this.appDictionary[e]).filter(e=>e.itemId===i.uid||e.title===i.uid).shift();return t&&!this.appDictionary[i.uid]&&(i.uid=t.itemId||t.title),(null==t?void 0:t.hasBeenPopulated)||(t?((i.hasChanged||t.hasChanged||!t.canAccess&&!t.ignoreNoAccess)&&this.isAdmin()&&(this.appDictionary[i.uid].hasChanged=!0,this.appDictionary[i.uid].ignoreNoAccess=i.ignoreNoAccess),i.isNew&&(this.appDictionary[i.uid].isNew=!0),delete this.newAppDictionary[i.uid]):(t=i,t.canAccess=!1,t.itemId=i.uid,this.appDictionary[i.uid]=t),this.appDictionary[i.uid].hasBeenPopulated=!0,e.push(t)),e}getAppExceptions(){const{portal:e,user:i}=s.c;return{"Open Data":{hasAccess:()=>function(e){return!!(!(null==e?void 0:e.portalProperties)||e.portalProperties.openData&&e.portalProperties.openData.enabled)&&v("HubforArcGIS")}(e)},AppStudio:{hasAccess:()=>v("arcgisWebApps")},"ArcGIS Velocity":{hasAccess:()=>function(e){const i=["portal:publisher:publishFeeds","portal:publisher:publishRealTimeAnalytics","portal:publisher:publishBigDataAnalytics"],t=((null==e?void 0:e.privileges)||[]).some(e=>i.indexOf(e)>-1),r=v("velocity");return t&&r}(i)},"ArcGIS Hub":{hasAccess:()=>v("HubforArcGIS")},"ArcGIS Enterprise Sites":{hasAccess:()=>v("HubforArcGIS")},"ArcGIS QuickCapture Web Designer":{hasAccess:()=>v("arcgisWebApps")},"ArcGIS Dashboards":{hasAccess:()=>v("dashboards")},"Map Viewer":{hasAccess:()=>function(e,i){var t;const r=e.isPortal&&!1===(null===(t=e.portalProperties)||void 0===t?void 0:t.newMapViewerEnabled);return i&&!r&&v("arcgisWebApps")}(e,this.newMapViewerEnabled)},"Map Viewer Classic":{hasAccess:()=>v("arcgisWebApps")},"Operations Dashboard for ArcGIS":{hasAccess:()=>v("opsdashboard")},"ArcGIS Dashboards Classic":{hasAccess:()=>v("opsdashboard")},"Ortho Maker":{hasAccess:()=>function(e){var i;return!!(null===(i=e.helperServices)||void 0===i?void 0:i.rasterAnalytics)&&!!e.helperServices.orthoMapping}(e)},Notebook:{hasAccess:()=>function(e,i,t){var r;const o=t&&(!e.isPortal||e.supportsHostedNotebooks),s=!!(null===(r=null==i?void 0:i.privileges)||void 0===r?void 0:r.length)&&i.privileges.some(e=>"premium:publisher:createNotebooks"===e);return o&&s}(e,i,this.notebookServerEnabled)},"Scene Viewer":{hasAccess:()=>v("arcgisWebApps")},"Story Maps":{hasAccess:()=>v("arcgisWebApps")},Survey123:{hasAccess:()=>v("survey123")},"Track Viewer":{hasAccess:()=>function(e,i){var t;return!!(null===(t=e.helperServices)||void 0===t?void 0:t.locationTracking)&&i}(e,this.trackViewerEnabled)},"Instant Apps":{hasAccess:()=>v("arcgisWebApps")},"ArcGIS Maps for Adobe Creative Cloud":{hasAccess:()=>v("arcgisWebApps")&&!s.c.portal.isPortal}}}getExcludedProvisionedListings(){let e={opsdashboard:1,arcgisWebApps:1,Workforce:1,geoplanner:1,webappbuilder:1,HubforArcGIS:1,appstudio:1,survey123:1,storymaps:1,mapsForOffice:1,mapsForO365:1,mapsForSharePoint:1,mapsForCreativeCloud:1,indoorsweb:1,indoorskiosk:1,indoorsspaceplanner:1,locationplatformWebApps:1};const{portal:i}=s.c;return i.isPortal&&(e=Object.assign(Object.assign({},e),{arcgisonline:1,arcgisUrban:1,arcgisinstantapps:1})),e}getImagePath(e){return(0,r.d)(`./assets/${(null==e?void 0:e.image)?e.image:""}`)}modifyWebAppForView(e){var i,t;return(null===(i=e.appSwitcher)||void 0===i?void 0:i.image)||e.icon?e.image=this.getWebMappingAppImgPath(e):e.placeHolderIcon=`${this.getImagePath()}svg-app-circle.svg`,e.abbr=(null===(t=e.appSwitcher)||void 0===t?void 0:t.abbr)||e.abbreviation,delete e.abbreviation,delete e.appSwitcher,delete e.approvedApp,delete e.webMappingApp,e}modifySystemAppForView(e,i){var t;const{portal:r}=s.c;if(e.image?e.image=this.getImagePath(e):e.placeHolderIcon=`${this.getImagePath()}svg-app-icon.svg`,0===(null===(t=e.url)||void 0===t?void 0:t.indexOf("../"))){const i=r.urlKey?`${r.urlKey}.${r.customBaseUrl}`:r.portalHostname;e.url=`${location.protocol}//${i}${e.url.substring(2,e.url.length)}`}return delete e.isLicensed,delete e.privileges,e.itemId=i,e}getWebMappingAppImgPath(e){const{portal:i}=s.c,t=(0,p.g)(i);return e.icon?`${(0,l.g)()}portals/self/resources/${e.icon}?token=${t}`:`${(0,l.g)()}content/items/${e.itemId}/resources/${e.appSwitcher.image}?token=${t}`}modifyPartnerAppForView(e){var i,t,r;e.appSwitcher=null===(i=e.properties)||void 0===i?void 0:i.appSwitcher;const o=(null===(t=e.appSwitcher)||void 0===t?void 0:t.image)||e.icon;return{abbr:(null===(r=e.appSwitcher)||void 0===r?void 0:r.abbr)||e.abbreviation,itemId:e.itemId,canAccess:!0,webMappingApp:!0,image:o?this.getWebMappingAppImgPath(e):null,label:e.title||e.label,url:e.url,placeHolderIcon:e.placeHolderIcon||`${this.getImagePath()}svg-app-circle.svg`}}async getLicensedApps(){var e,i,t,r,o,n,a,l,c,p;const{portal:d,user:u}=s.c,h={},g={},v=this.getAppExceptions(),m=this.getExcludedProvisionedListings(),f=[],b=this.userApps.apps.length,y=this.isLocationPlatform();for(let s=0;s<b;s++){const m=this.userApps.apps[s],b=m.itemId||m.title;let w=!0;const A=!m.serverFunction||(null===(e=this.servers)||void 0===e?void 0:e.some(e=>{var i;return((null===(i=e.serverFunction)||void 0===i?void 0:i.split(","))||[]).includes(m.serverFunction)})),x=null===(i=this.blockedApps)||void 0===i?void 0:i.some(e=>m.itemId&&m.itemId===e.itemid||m.title&&m.title===e.title);if(h[b]=1,g[b]=m,x)continue;if(y&&!m.showInLocationPlatform)continue;if("ArcGISEnterpriseOnKubernetes"===(d.portalDeploymentType||(null===(t=d.sourceJSON)||void 0===t?void 0:t.portalDeploymentType))&&!1===m.supportsKubernetes)continue;if(v[m.title]&&!v[m.title].hasAccess(m.title))continue;const k=d.subscriptionInfo||(null===(r=d.sourceJSON)||void 0===r?void 0:r.subscriptionInfo);if(m.subscriptionType){(null==k?void 0:k.type)===m.subscriptionType&&(g[b].canAccess=!0,f.push(this.modifySystemAppForView(m,b)));continue}if(m.orgCapabilities){if(null===(o=this.orgCapabilities)||void 0===o?void 0:o.length){this.orgCapabilities.some(e=>m.orgCapabilities.includes(e.id))&&(g[b].canAccess=!0,f.push(this.modifySystemAppForView(m,b)))}continue}if(!(null===(n=m.privileges)||void 0===n?void 0:n.length)&&!m.isLicensed&&A&&("ArcGIS Location Platform"!==m.label||y)){g[b].canAccess=!0,f.push(this.modifySystemAppForView(m,b));continue}if("storytellerut"===(null===(l=(null==u?void 0:u.userLicenseTypeId)||(null===(a=null==u?void 0:u.sourceJSON)||void 0===a?void 0:a.userLicenseTypeId))||void 0===l?void 0:l.toLowerCase())&&"storymaps"===(null===(c=m.label)||void 0===c?void 0:c.toLowerCase()))g[b].canAccess=!0,f.push(this.modifySystemAppForView(m,b));else{if((null===(p=m.privileges)||void 0===p?void 0:p.length)>0&&(null==u?void 0:u.privileges)){for(let e=0;e<m.privileges.length;e++)if(u.privileges.indexOf(m.privileges[e])<0){w=!1;break}if(!m.isLicensed&&w&&A){g[b].canAccess=!0,f.push(this.modifySystemAppForView(m,b));continue}}if(m.isLicensed&&w&&A)for(let e=0;e<this.provisionedListings.length;e++)if(b===this.provisionedListings[e].itemId||b===this.provisionedListings[e].title){g[b].canAccess=!0,f.push(this.modifySystemAppForView(m,b));break}}}this.provisionedListings.forEach(e=>{if("Web Mapping Application"===e.type&&!m[e.clientId]&&!h[e.itemId]&&e.url&&e.title&&!h[e.title]&&e.typeKeywords.indexOf("hideFromAppSwitcher")<0){const i=this.modifyPartnerAppForView(e);g[e.itemId]=i,f.push(i)}});return{apps:[...this.approvedApps.map(e=>{const i=Object.assign(Object.assign({},e.appProperties),{itemId:e.itemId,webMappingApp:!0,approvedApp:!0,canAccess:!this.willQueryForItems});return g[e.itemId]=i,this.modifyWebAppForView(i)}),...f],appDictionary:g}}isAdmin(){const{user:e}=s.c;return!!e&&("org_admin"===e.role||"account_admin"===e.role)}mapAppTitles(e){const{portal:i}=s.c;e.forEach(e=>{"Map Viewer Beta"===e.uid&&(e.uid="Map Viewer"),i.isPortal&&("Operations Dashboard for ArcGIS"===e.uid?e.uid="ArcGIS Dashboards Classic":"Workforce for ArcGIS"===e.uid&&(e.uid="ArcGIS Workforce"))})}isLocationPlatform(){var e,i;const{portal:t}=s.c,r=t.subscriptionInfo||(null===(e=t.sourceJSON)||void 0===e?void 0:e.subscriptionInfo);return null===(i=null==r?void 0:r.options)||void 0===i?void 0:i.includes("Developer")}async init(){var e;s.c.portal.isPortal&&(this.servers=await async function(){const e=`${(0,l.g)()}portals/self/servers`,i=await I(e);return(null==i?void 0:i.servers)||[]}()),await this.getBlockedApps();const{apps:i,appDictionary:t}=await this.getLicensedApps();if(this.appDictionary=t,this.userProperties.appLauncher&&(this.userProperties.appLauncher.primary&&this.mapAppTitles(this.userProperties.appLauncher.primary),this.userProperties.appLauncher.secondary&&this.mapAppTitles(this.userProperties.appLauncher.secondary)),this.userProperties.appLauncher&&this.userProperties.appLauncher.primary&&this.userProperties.appLauncher.secondary){const i=await async function(e,i){if(!i||!(null==e?void 0:e.length))return;return I(`${(0,l.g)()}search`,{num:100,q:`id:(${e.map(e=>`"${e.itemId}"`).join(" OR ")})`})}(this.approvedApps,this.willQueryForItems);(null===(e=null==i?void 0:i.results)||void 0===e?void 0:e.length)>0&&i.results.forEach(e=>{const i=this.appDictionary[e.id];i.canAccess=!0,i.hasChanged=i.url!==e.url&&!!e.url}),this.newAppDictionary=Object.assign({},this.appDictionary),this.userProperties.appLauncher.primary.forEach(e=>{"Map Viewer"===e.label&&(e.uid="Map Viewer")}),this.primaryApps=this.userProperties.appLauncher.primary.reduce(this.populateAppIdentifiers.bind(this),[])||[],this.secondaryApps=this.userProperties.appLauncher.secondary.reduce(this.populateAppIdentifiers.bind(this),[])||[],this.primaryApps=this.filterBlockedApps(this.primaryApps),this.secondaryApps=this.filterBlockedApps(this.secondaryApps),this.isLocationPlatform()&&(this.primaryApps=this.primaryApps.filter(e=>e.canAccess),this.secondaryApps=this.secondaryApps.filter(e=>e.canAccess));for(const e in this.newAppDictionary)this.newAppDictionary[e].canAccess&&(this.newAppDictionary[e].isNew=!0,this.appDictionary[e]=this.newAppDictionary[e],this.primaryApps.push(this.newAppDictionary[e]));return}return this.primaryApps=i.slice().sort((e,i)=>e.label<i.label?-1:1),this.primaryApps=this.filterBlockedApps(this.primaryApps),void(this.secondaryApps=[])}getAgoApp(){const{portal:e,user:i}=s.c,t=`${location.protocol}//${e.urlKey?`${e.urlKey}.${e.customBaseUrl}`:e.portalHostname}/home/`,{landingPage:r}=this.userProperties;return{image:"arcgis-online.png",label:"ArcGIS Online",title:"ArcGIS Online",url:`${t}${(null==r?void 0:r.url)?r.url:(0,c.f)(i)?"organization.html":"index.html"}`}}initializeConfig(){s.c.api=this.api,s.c.user=this.user,s.c.portal=this.portal}render(){const e=this.primaryApps.length+this.secondaryApps.length,i="rtl"===(0,n.g)(this.el);return(0,r.h)(r.H,{key:"3920e24125754681d785cd3fc06ca147988bc8dc",onKeyDown:this.keydownHandler},(0,r.h)("calcite-button",{key:"5a49d93b90fd453c59b5b33e3a3cd440cd9448a7",appearance:"transparent",kind:"neutral",class:{"toggle-button":!0,"toggle-button--expanded":this.open,"no-box-shadow":this.noBoxShadow},label:this.strings.appLauncher,onClick:this.handleToggle,ref:e=>this.toggleButton=e,"aria-expanded":`${this.open}`,"aria-controls":"app-switcher-content-container"},(0,r.h)("calcite-icon",{key:"34ff3f3d861e839c5b4cebdc67a823e8d12d3fbf",class:"toggle-button__icon",icon:"app-launcher",scale:"m"})),(0,r.h)("div",{key:"af4d5b67a5f3d740d85749233bd59baa604ecc5f",id:"app-switcher-content-container",class:"apps-content-container"},(0,r.h)("div",{key:"cff51c4095da7aac03e967908c14f9fef9cfdd76",class:{"apps-content":!0,"apps-content--rtl":i,"apps-content--expanded":this.open,"apps-content--dragging":this.dragging},"aria-hidden":"false"},(0,r.h)("nav",{key:"0f238f12594bd200c360c9883bca5a5a286f83ce",class:"dropdown-menu dropdown-right",role:"menu"},this.displayIntro&&(0,r.h)("div",{key:"f2b083a530d6677bf1ab4224f026ee91a59db831",class:"intro-container"},(0,r.h)("p",{key:"164b89a622961cdc49a969ddb2c0c84364967765",class:"drag-and-drop-intro intro-text"},this.strings.dragDrop),(0,r.h)("calcite-button",{key:"5f6eb6b244a43a57e199a23e2ff928e730ffa546",appearance:"outline-fill",kind:"neutral",onClick:this.handleDismissIntro},this.strings.gotIt)),(0,r.h)("ul",{key:"9b83218b94545a652a335f148f505e81499d80e2",class:"apps-list",ref:e=>this.primaryContainer=e},this.primaryApps.map((i,t)=>(0,r.h)("li",{"data-id":i.itemId||i.title,key:i.itemId,class:{"app-item":!0,"app-item--missing":!i.canAccess}},(0,r.h)("arcgis-app-switcher-link",{app:i,index:t,total:e,focusItemId:this.focusItemId,openText:this.strings.openWindow,strings:this.strings})))),!this.secondaryExpanded&&(0,r.h)("button",{key:"30d2e818e66e7b4fc135dd2f96c83985fa375623",class:"show-more",onClick:this.handleShowMore},this.strings.showMore," ",(0,r.h)("calcite-icon",{key:"3d1989771e93cf875e98935e55f2c88c882c8256",icon:"chevron-down",scale:"s"})),(0,r.h)("div",{key:"5411aa13f5d66bd230d9a781d4a7d0929b424661",class:{"secondary-container":!0,"secondary-container--hidden":!this.secondaryExpanded},"aria-expanded":"true"},(0,r.h)("ul",{key:"da142fa8cc6d37a2c6d5c0980d53686e4753a7e2",class:{"secondary-target":0===this.secondaryApps.length,"secondary-list":0!==this.secondaryApps.length,"secondary-target--hover":this.hoveringOverSecondary&&0===this.secondaryApps.length},ref:e=>this.secondaryContainer=e},0===this.secondaryApps.length&&!this.hoveringOverSecondary&&(0,r.h)("p",{key:"9edab81264256a5fde07b5844f280c20bfe21dfd",class:"secondary-drag-text",ref:e=>this.secondaryDragText=e},this.strings.dragSecondary),this.secondaryApps.map((i,t)=>(0,r.h)("li",{"data-id":i.itemId,key:i.itemId,class:{"app-item":!0,"app-item--missing":!i.canAccess}},(0,r.h)("arcgis-app-switcher-link",{app:i,index:this.primaryApps.length+t,total:e,focusItemId:this.focusItemId,openText:this.strings.openWindow})))))))))}static get assetsDirs(){return["assets"]}get el(){return(0,r.a)(this)}static get watchers(){return{shouldExpand:["handleShouldExpandChange"]}}};P.style=":host{--arcgis-app-switcher-size:3.5rem;--arcgis-app-switcher-content-border:none;--arcgis-app-switcher-content-box-shadow:none;--calcite-offset-invert-focus:1}.apps-content-container{position:relative}.toggle-button{margin:0px;display:block;cursor:pointer;overflow:visible;border-width:0px;padding:0px;-webkit-appearance:button;background-color:transparent;height:var(--arcgis-app-switcher-size);width:var(--arcgis-app-switcher-size)}.toggle-button:not(.toggle-button--expanded):not(.no-box-shadow):hover{box-shadow:inset 0 -3px 0 0 rgba(0, 121, 193, 0.5)}.toggle-button--expanded:not(.no-box-shadow){box-shadow:inset 0 -3px 0 0 var(--calcite-color-brand)}.toggle-button__icon{display:block;height:1.5rem;width:1.5rem}:host{position:relative;color:var(--calcite-color-text-2)}.apps-content{position:absolute;right:0px;display:none;border:var(--arcgis-app-switcher-content-border);box-shadow:var(--arcgis-app-switcher-content-box-shadow)}.apps-content--rtl{left:0px;right:auto}.apps-content--expanded{display:block}.apps-content ::-webkit-scrollbar{width:0.5rem}.apps-content ::-webkit-scrollbar-thumb{border-radius:var(--calcite-border-radius);background-color:rgba(0, 0, 0, 0.5);box-shadow:0 0 1px rgba(255, 255, 255, 0.5)}.dropdown-menu{top:0px;cursor:default;overflow-y:auto;overflow-x:hidden;background-color:var(--calcite-color-background);border-top:1px solid var(--calcite-color-border-1);max-height:85vh;max-width:480px;min-width:475px}.intro-container{background-color:var(--calcite-color-background);text-align:center}.intro-text{margin:0px;background-color:var(--calcite-color-background);padding-left:4rem;padding-right:4rem;padding-top:1rem;padding-bottom:0.75rem;font-size:0.875rem;color:var(--calcite-color-text-3)}.apps-list{margin-top:0px;margin-bottom:0px;list-style-type:none;flex-direction:row;flex-wrap:wrap;overflow:hidden;background-color:var(--calcite-color-background);padding-top:0.5rem;padding-bottom:0.5rem;padding-left:0.5rem;padding-right:0.5rem;text-align:left}.apps-list .secondary-drag-text{display:none}.app-item{position:relative;float:none;margin:0px;box-sizing:border-box;display:inline-block;cursor:pointer;overflow-wrap:break-word;text-align:left;vertical-align:top;font-size:0.875rem;height:110px;width:150px}@-moz-document url-prefix(){.app-item{width:146px}}.apps-content:not(.apps-content--dragging) .app-item:not(.app-item--missing):hover{color:var(--calcite-color-text-1);outline:1px solid var(--calcite-color-brand)}.app-item--dragging{outline-offset:-1px}.app-item--missing{padding-top:0.5rem}.show-more{display:flex;width:100%;cursor:pointer;align-items:center;justify-content:center;border-style:none;background-color:var(--calcite-color-foreground-3);padding:0.25rem;font-size:0.875rem;color:var(--calcite-color-text-3)}.secondary-container{background-color:var(--calcite-color-foreground-2);padding-top:0.25rem;padding-bottom:0.25rem;border-top:1px solid var(--calcite-color-border-3)}.secondary-container--hidden{display:none}.secondary-target{margin-top:0.75rem;margin-bottom:0.75rem;margin-left:1.5rem;margin-right:1.5rem;overflow:hidden;padding-left:2rem;padding-right:2rem;text-align:center;font-size:0.875rem;border:2px dashed var(--calcite-color-border-2);letter-spacing:normal;height:100px}.secondary-target--hover{border-color:var(--calcite-color-brand)}.secondary-list{margin:0px;padding-top:0.75rem;padding-bottom:0.75rem;padding-left:0.5rem;padding-right:0.5rem;text-align:left}";const D=({index:e,total:i,active:t})=>{const o=0===e,s=e<=2,n=e===i-1,a=e>=3*Math.ceil(i/3)-3;return(0,r.h)("span",{class:{"arrow--hidden":!t}},!o&&(0,r.h)("div",{class:"arrow arrow--left"}),!n&&(0,r.h)("div",{class:"arrow arrow--right"}),!s&&(0,r.h)("div",{class:"arrow arrow--top"}),!a&&(0,r.h)("div",{class:"arrow arrow--bottom"}))},C=class{constructor(e){(0,r.r)(this,e),this.arcgisAppSwitcherLinkActivated=(0,r.c)(this,"arcgisAppSwitcherLinkActivated",7),this.arcgisAppSwitcherLinkMove=(0,r.c)(this,"arcgisAppSwitcherLinkMove",7),this.arcgisAppSwitcherLinkRemove=(0,r.c)(this,"arcgisAppSwitcherLinkRemove",7),this.arcgisAppSwitcherLinkClick=(0,r.c)(this,"arcgisAppSwitcherLinkClick",7),this.isFirstRow=!1,this.isLastRow=!1,this.moveElement=e=>{this.arcgisAppSwitcherLinkMove.emit({uid:this.app.itemId||this.app.title,index:this.index,keyCode:e})},this.handleKey=e=>{let i=!0;switch(e.code){case"Space":this.sortingActive=!this.sortingActive,this.arcgisAppSwitcherLinkActivated.emit();break;case"ArrowUp":case"ArrowRight":case"ArrowDown":case"ArrowLeft":this.sortingActive&&this.moveElement(e.code);break;default:i=!1}i&&(e.preventDefault(),e.stopPropagation())},this.handleBlur=()=>{this.sortingActive=!1},this.handleRemove=()=>{this.arcgisAppSwitcherLinkRemove.emit(this.app.itemId||this.app.title)},this.handleRemoveKeydown=e=>{switch(e.code){case"Space":case"Enter":this.handleRemove(),e.preventDefault()}},this.handleClick=()=>{this.arcgisAppSwitcherLinkClick.emit()},this.app=void 0,this.index=void 0,this.total=void 0,this.focusItemId=void 0,this.openText=void 0,this.strings=void 0,this.sortingActive=!1}componentDidRender(){var e,i;!this.focusItemId||this.focusItemId!==this.app.itemId&&this.focusItemId!==this.app.title||(this.sortingActive=!0,this.app.canAccess?null===(e=this.linkElement)||void 0===e||e.focus():this.app.canAccess||null===(i=this.missingElement)||void 0===i||i.focus())}render(){var e,i,t,o,s;const a="rtl"===(0,n.g)(this.el);let l=null===(i=null===(e=this.strings)||void 0===e?void 0:e.descriptions)||void 0===i?void 0:i[this.app.title];l||(l=null===(o=null===(t=this.strings)||void 0===t?void 0:t.descriptions)||void 0===o?void 0:o[this.app.label]),"ArcGIS Online"===this.app.title&&(l="ArcGIS Online");let c=this.app.image;return(0,r.h)(r.H,{key:"21600b3e235067f3e09f4cd521d56de1621ffcd7"},(null===(s=this.app)||void 0===s?void 0:s.canAccess)&&(0,r.h)(r.F,{key:"e961e88d4d51a2a8842652b7e7725e9157407c86"},(0,r.h)("a",{key:"680cd0b44a5e4ad054a8b5ff79953064b6c49e40",id:`app-switcher-link-${this.app.title}`,ref:e=>this.linkElement=e,href:this.app.url,class:"app-link",onKeyDown:this.handleKey,onBlur:this.handleBlur,onClick:this.handleClick,draggable:!1,target:"_blank",role:"menuitem"},(0,r.h)("span",{key:"b7529935a2d861740213f5bd30d2430d4566dcda",class:"icon-wrapper"},(0,r.h)(D,{key:"b89be272573f2ade07a682f8027472ae3b1c3f16",active:this.sortingActive,index:this.index,total:this.total}),!this.app.image&&this.app.abbr&&(0,r.h)("span",{key:"d4d54cd96afd024771543e22604d0741ab39a523",style:{fontSize:this.app.fontSize||"20px"},class:"avenir icon-abbr"},this.app.abbr),!this.app.image&&this.app.abbr&&this.app.placeHolderIcon&&(0,r.h)("img",{key:"e8d47d80dd6bd0034a022bb55244ef6041020fc4",src:this.app.placeHolderIcon,alt:""}),this.app.image&&(0,r.h)("img",{key:"90278f1a32552e54e83f128b214cf65779c47721",src:c,class:"icon-img",alt:""})),this.app.isNew&&(0,r.h)("span",{key:"0d5d8ea46a3f8ca8bef66ec7dac53d2e155b559c",class:{indicator:!0,"indicator--new":!0,"indicator--new-rtl":a}}),(0,r.h)("span",{key:"5fddb6ef25d208d9442ea94fd8b64d3f77e36603",class:"label-text"},this.app.label),(0,r.h)("span",{key:"39253c5f8fa6896452068ea5ee9a32ea3528411f",class:"screen-readers"},this.openText)),l&&(0,r.h)("calcite-tooltip",{key:"b3e3d53e6e31e909c211a7c78fa1deeac8e96812",referenceElement:`app-switcher-link-${this.app.title}`,placement:"top",overlayPositioning:"fixed"},(0,r.h)("span",{key:"0b0e63659384e26de8db8a9a2be3c5f0c8fa306e"},l))),this.app&&!this.app.canAccess&&(0,r.h)(r.F,{key:"bd2a6ca8c4931b836b360b3c5372f082ae126a1a"},(0,r.h)("div",{key:"58af43745bf6a1dc94eea0540429a9159821dab5",class:{indicator:!0,"indicator--remove":!0,"indicator--remove-rtl":a},tabIndex:0,onClick:this.handleRemove,onKeyDown:this.handleRemoveKeydown},(0,r.h)("calcite-icon",{key:"11897783f2ceb86ffa732d2bc225218b51649248",scale:"s",icon:"x"})),(0,r.h)("div",{key:"9cfda388df2f637a1b75269bb37d248cc7f0c77e",ref:e=>this.missingElement=e,class:"missing-icon",tabIndex:0,onKeyDown:this.handleKey,onBlur:this.handleBlur},(0,r.h)(D,{key:"6323c073abffe4a417ec65999254b29ffb2f9e7e",active:this.sortingActive,index:this.index,total:this.total})),(0,r.h)("p",{key:"779842fcd1b87a75743bbf951b52daa7c56955a3",class:"label-text"},this.app.label)))}get el(){return(0,r.a)(this)}};C.style=":host{display:block;height:93%}.app-link{position:relative;display:block;height:100%;-webkit-user-select:text;-moz-user-select:text;user-select:text;padding-left:0.5rem;padding-right:0.5rem;padding-top:0.5rem;text-decoration-line:none;color:inherit}.app-link:focus{outline:1px solid var(--calcite-color-brand)}.arrow{position:absolute;height:0px;width:0px}.arrow--hidden{visibility:hidden}.arrow--left{border-right:5px solid var(--calcite-color-brand);border-bottom:5px solid transparent;border-top:5px solid transparent;left:38px;top:27px}.arrow--right{border-left:5px solid var(--calcite-color-brand);border-bottom:5px solid transparent;border-top:5px solid transparent;right:38px;top:27px}.arrow--top{border-bottom:5px solid var(--calcite-color-brand);border-left:5px solid transparent;border-right:5px solid transparent;top:0;right:70px}.arrow--bottom{border-top:5px solid var(--calcite-color-brand);border-left:5px solid transparent;border-right:5px solid transparent;top:59px;right:70px}.missing-icon .arrow--top{top:-4px}.icon-wrapper{margin-top:0px;margin-bottom:0px;margin-left:auto;margin-right:auto;margin-bottom:0.5rem;display:block;height:3rem;width:3rem;background-size:contain;background-repeat:no-repeat;text-align:center;font-size:1.125rem;color:var(--calcite-color-text-2)}.icon-abbr{position:absolute;width:3rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:1.25rem;font-weight:700;color:var(--calcite-color-foreground-1);line-height:3rem;text-shadow:0 1px 8px var(--calcite-color-text-3);transform:translateZ(0)}.icon-img{pointer-events:none;height:3rem;width:3rem}.indicator{position:absolute;clear:both;box-sizing:border-box;height:1rem;width:1rem;border-radius:50%;border:2px solid var(--calcite-color-foreground-1);z-index:50}.indicator--new{background-color:var(--calcite-color-status-success);top:4px;right:46px}.indicator--new-rtl{right:auto;left:46px}.indicator--remove{display:flex;cursor:pointer;align-items:center;justify-content:center;background-color:var(--calcite-color-foreground-1);line-height:2px;padding:1px;right:42px;top:2px}.indicator--remove-rtl{right:auto;left:42px}.indicator--remove:hover,.indicator--remove:focus{outline:2px solid transparent;outline-offset:2px;border-color:var(--calcite-color-status-danger);color:var(--calcite-color-status-danger)}.missing-icon{margin-top:0px;margin-bottom:0px;margin-left:auto;margin-right:auto;margin-bottom:0.5rem;box-sizing:border-box;display:block;height:3rem;width:3rem;cursor:pointer;background-color:var(--calcite-color-foreground-3);text-align:center;border:1px dashed var(--calcite-color-inverse);border-radius:6px;outline-color:var(--calcite-color-brand)}.label-text{margin-top:0px;margin-bottom:0px;margin-left:auto;margin-right:auto;display:block;text-align:center;line-height:17px;width:128px}.screen-readers{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}"},28830:(e,i,t)=>{t.d(i,{g:()=>s});const r=document.createElement("canvas").getContext("2d"),o={};function s({text:e,font:i}){if(o[i]=o[i]||{},o[i][e])return o[i][e];r.font=i||"14px 'Avenir Next'";const t=r.measureText(e);return o[i][e]=t.width,o[i][e]}},46904:(e,i,t)=>{t.d(i,{a:()=>n,b:()=>s,c:()=>c,d:()=>p,e:()=>d,f:()=>u,g:()=>h,i:()=>a,u:()=>l});t(93814);var r=t(41473);function o(e){var i;return!!(null===(i=e.owner)||void 0===i?void 0:i.toLowerCase().includes("esri"))}function s(e){var i;return o(e)&&!!(null===(i=e.typeKeywords)||void 0===i?void 0:i.includes("Requires Credits"))}function n(e){var i;return o(e)&&!!(null===(i=e.typeKeywords)||void 0===i?void 0:i.includes("Requires Subscription"))}function a(e,i){return e.owner===i.username}function l(e,i){return a(e,i)||function(e,i){var t;if(null!=e.isAdmin)return!!e.isAdmin;const r=e.owner,o="admin"===e.itemControl,s=["esri_livingatlas","esri_demographics","esri_boundaries"];if((null===(t=e.portal)||void 0===t?void 0:t.isPortal)&&!a(e,i)&&o&&r.includes("esri_")&&!s.includes(r))return!1;return o}(e,i)}const c=(e,i)=>!!i.orgId&&e.every(e=>e.isOrgItem),p=(e,i)=>`${(0,r.a)(i)}item.html?id=${e}`,d=(e,i)=>`${(0,r.g)(i)}/content/users/${e}`,u=e=>e.reduce((e,i)=>(e[i.owner]=e[i.owner]?[...e[i.owner],i.id]:[i.id],e),{}),h=(e,i)=>`${(0,r.a)(i)}content/items/${e}`},54251:(e,i,t)=>{t.d(i,{g:()=>o});var r=t(59317);function o(e){var i,t,o,s;return null!=e||(e=null===r.c||void 0===r.c?void 0:r.c.portal),(null===(i=null==e?void 0:e.credential)||void 0===i?void 0:i.token)||(null==e?void 0:e.token)||(null===(o=null===(t=null==e?void 0:e.user)||void 0===t?void 0:t.credential)||void 0===o?void 0:o.token)||(null===(s=null==e?void 0:e.portalUser)||void 0===s?void 0:s.token)||""}},83692:(e,i,t)=>{t.d(i,{a:()=>v,b:()=>g,c:()=>h,f:()=>d,g:()=>y,i:()=>u,p:()=>b,r:()=>m});var r=t(59317),o=t(4429),s=t(931),n=t(41473),a=t(54251);const l={},c={},p={};async function d(e,i,t,r){var o,s,n,a;const d=null===(s=null===(o=p[i])||void 0===o?void 0:o[t])||void 0===s?void 0:s.expireAt,u=!!d&&(new Date).getTime()>d;if((null===(n=l[i])||void 0===n?void 0:n[t])&&!u)return l[i][t];c[i]||(c[i]={}),c[i][t]&&!u||(c[i][t]=e());const h=await c[i][t];if(l[i]||(l[i]={}),p[i]||(p[i]={}),l[i][t]=h,r){const{expireAfter:e,getExpireAfterFromResult:o}=r,s=o||e?(new Date).getTime()+(null!==(a=null==o?void 0:o(h))&&void 0!==a?a:e):null;p[i][t]=Object.assign(Object.assign({},p[i][t]),{expireAt:s})}return h}function u(e,i){var t;return null===(t=null==l?void 0:l[e])||void 0===t?void 0:t[i]}const h=(e,i)=>{var t,r;i?(null===(t=l[e])||void 0===t||delete t[i],null===(r=c[e])||void 0===r||delete r[i]):(delete l[e],delete c[e])};function g(e){var i,t;return null!==(i=null==e?void 0:e.id)&&void 0!==i?i:null===(t=null==e?void 0:e.sourceJSON)||void 0===t?void 0:t.id}async function v(e,i,t={},r){const[o]=await(0,s.l)(["esri/request"]);e.includes("f=")||i.append("f","json");const n=(0,a.g)();return n&&!i.has("token")&&i.append("token",n),new Promise((s,n)=>{o(e,Object.assign(Object.assign({body:i},t),{timeout:t.timeout||0,method:r||"auto"})).then(e=>{s(e.data)}).catch(e=>n(e))})}async function m(e,i={},t={},o,n){const[a]=await(0,s.l)(["esri/request"]),{api:l,portal:c}=r.c,{customToken:p,addTokenManually:d,addSSL:u,useProxy:h}=t,g=Object.assign({},i);if(e.includes("f=")||!0===(null==n?void 0:n.excludeJson)||(g.f="json"),p)g.token=p;else if(!1!==d){const e=await y(c);e&&(g.token=e)}const v=!1===u?e:function(e){var i;const{config:t}=r.c;return"https:"===window.location.protocol||!0===(null===(i=null==t?void 0:t.self)||void 0===i?void 0:i.allSSL)?e.replace("http:","https:"):e}(e);if(3===l){const e=Object.assign({url:v,content:g,timeout:t.timeout||0},null==n?void 0:n.v3Request);t.withCredentials&&(e.withCredentials=t.withCredentials);return a(e,"post"===o?Object.assign({usePost:!0},t):t)}{const e=Object.assign(Object.assign(Object.assign({query:g,method:o||"auto"},t),{timeout:t.timeout||0,useProxy:h}),(null==t?void 0:t.disableIdentityLookup)?{authMode:"anonymous"}:{});return(await a(v,e)).data}}const f=[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,15,15,30,30,30,30,30,30,30,30,30,30,120];const b=async(e,i,t)=>{var r,s;const n=null!==(r=null==i?void 0:i.pendingStatuses)&&void 0!==r?r:["processing","partial","Pending","InProgress","EXECUTING"],a=null!==(s=null==i?void 0:i.successStatuses)&&void 0!==s?s:["completed","Completed","COMPLETED"];let l=0;const c=async()=>{const r=await m(e,null==i?void 0:i.requestParams,{},t),s=r.status||r.jobStatus;if(n.includes(s))return await(0,o.t)((p=l++,1e3*f[p>-1&&p<f.length-1?p:f.length-1])),c();if(a.includes(s)||"failed"===s||"esriJobFailed"===s)return r;throw r;var p};try{return c()}catch(e){throw console.error(e),e}},y=async e=>{var i;if(!(null==e?void 0:e.isPortal)||!(0,n.i)(e))return(0,a.g)(e);if(!(null==e?void 0:e.user)&&!(null==e?void 0:e.portalUser)&&(0,n.i)(e))return;const{token:t}=await d(()=>w(e),"platformSelf",null!==(i=g(e.user))&&void 0!==i?i:e.id,{getExpireAfterFromResult:e=>e.expires_in});return t},w=async e=>{const i=await(async e=>{var i,t;const[r]=await(0,s.l)(["esri/identity/IdentityManager"]);return null!==(t=null===(i=(await d(()=>r.getCredential((0,n.g)(e),{oAuthPopupConfirmation:!1}),"credential",g(e.user))).oAuthState)||void 0===i?void 0:i.appId)&&void 0!==t?t:"arcgisonline"})(e),t={"X-Esri-Auth-Client-Id":i,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")};return m(`${(0,n.g)(e)}/oauth2/platformSelf`,{},{disableIdentityLookup:!0,headers:t,addTokenManually:!1,withCredentials:!0},"post",{v3Request:{headers:t}})}},94737:(e,i,t)=>{t.d(i,{f:()=>o});var r=t(83692);async function o(e,i,t="results",o=!1){let s,n,a,l,c=1,p=[];i.start=c,i.num||(i.num=100);try{const d=await(0,r.r)(e,i);if(!(null==d?void 0:d[t]))return p;for(p=[...p,...d[t]],c=d.nextStart,s=d.total-p.length,n=Math.ceil(s/i.num),a=[],l=0;l<n;l++)if(i.start=c+l*i.num,o){const o=await(0,r.r)(e,i);(null==o?void 0:o[t])&&(p=[...p,...o[t]])}else a.push((0,r.r)(e,Object.assign({},i)));if(!o){(await Promise.all(a)).forEach(e=>{p=[...p,...e[t]]})}return p}catch(e){return p}}}}]);