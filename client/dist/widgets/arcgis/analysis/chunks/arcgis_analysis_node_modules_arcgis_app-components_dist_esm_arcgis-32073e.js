/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-32073e.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-32073e"],{3826:(e,t,a)=>{a.d(t,{a:()=>s,b:()=>o,c:()=>n,d:()=>i});const i=(0,a(37762).c)({typeKeywords:[],customParameters:[],analyzedLocationTypes:[],allowStoredAuth:!0,isSecured:null,checkAuth:!1}),s=i.state,o=i.state,n=i.state},37762:(e,t,a)=>{a.d(t,{c:()=>c});var i=a(87849);const s=e=>!("isConnected"in e)||e.isConnected,o=((e,t)=>{let a;return(...i)=>{a&&clearTimeout(a),a=setTimeout(()=>{a=0,e(...i)},t)}})(e=>{for(let t of e.keys())e.set(t,e.get(t).filter(s))},2e3),n=e=>"function"==typeof e?e():e,r=(e,t)=>{const a=e.indexOf(t);a>=0&&(e[a]=e[e.length-1],e.length--)},c=(e,t)=>{const a=((e,t=(e,t)=>e!==t)=>{const a=n(e);let i=new Map(Object.entries(null!=a?a:{}));const s={dispose:[],get:[],set:[],reset:[]},o=()=>{var t;i=new Map(Object.entries(null!==(t=n(e))&&void 0!==t?t:{})),s.reset.forEach(e=>e())},c=e=>(s.get.forEach(t=>t(e)),i.get(e)),d=(e,a)=>{const o=i.get(e);t(a,o,e)&&(i.set(e,a),s.set.forEach(t=>t(e,a,o)))},l="undefined"==typeof Proxy?{}:new Proxy(a,{get:(e,t)=>c(t),ownKeys:e=>Array.from(i.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(e,t)=>i.has(t),set:(e,t,a)=>(d(t,a),!0)}),h=(e,t)=>(s[e].push(t),()=>{r(s[e],t)});return{state:l,get:c,set:d,on:h,onChange:(t,a)=>{const i=h("set",(e,i)=>{e===t&&a(i)}),s=h("reset",()=>a(n(e)[t]));return()=>{i(),s()}},use:(...e)=>{const t=e.reduce((e,t)=>(t.set&&e.push(h("set",t.set)),t.get&&e.push(h("get",t.get)),t.reset&&e.push(h("reset",t.reset)),t.dispose&&e.push(h("dispose",t.dispose)),e),[]);return()=>t.forEach(e=>e())},dispose:()=>{s.dispose.forEach(e=>e()),o()},reset:o,forceUpdate:e=>{const t=i.get(e);s.set.forEach(a=>a(e,t,t))}}})(e,t);return a.use((()=>{if("function"!=typeof i.g)return{};const e=new Map;return{dispose:()=>e.clear(),get:t=>{const a=(0,i.g)();a&&((e,t,a)=>{const i=e.get(t);i?i.includes(a)||i.push(a):e.set(t,[a])})(e,t,a)},set:t=>{const a=e.get(t);a&&e.set(t,a.filter(i.f)),o(e)},reset:()=>{e.forEach(e=>e.forEach(i.f)),o(e)}}})()),a}},86194:(e,t,a)=>{a.r(t),a.d(t,{arcgis_new_item_pages_service_connection:()=>c});var i=a(87849),s=a(3826),o=a(95878);a(37762);const n="example.com",r="Authorization",c=class{constructor(e){(0,i.r)(this,e),this.newItemUpdatePage=(0,i.c)(this,"newItemUpdatePage",7),this.allowedAuthenticationSchemes=["token","basic"],this.allowedOptions=new Set(["host"]),this.parameterLocations=["header","query"],this.handleAuthenticationSchemeChange=e=>{const t=e.target.selectedOption.value;this.authenticationScheme!==t&&("token"===this.authenticationScheme?(this.username=void 0,this.password=void 0):"basic"===this.authenticationScheme&&(this.parameterName=void 0,this.parameterLocation="header",this.token=void 0,this.tokenPrefix=void 0),this.authenticationScheme=t)},this.authenticationScheme="token",this.loading=!1,this.loaderType="indeterminate",this.loaderMessage=void 0,this.host=void 0,this.username=void 0,this.password=void 0,this.parameterLocation="header",this.parameterName=void 0,this.tokenPrefix=void 0,this.token=void 0,this.emptyRequiredFields=new Set,this.error=void 0}async handleNext(){const e=this.getSerializedHost();s.a.host=e,s.a.authenticationScheme=this.authenticationScheme,"basic"===this.authenticationScheme?(s.a.username=this.username,s.a.password=this.password):(s.a.parameterLocation=this.parameterLocation,s.a.parameterName=this.parameterName,s.a.tokenPrefix=this.tokenPrefix,s.a.token=this.token),this.emptyRequiredFields=this.checkValidFields(),this.emptyRequiredFields.size>0?this.handleError({code:"unhandledError"}):(s.a.initialTitle=`${this.i18n.title}_${e}`,this.newItemUpdatePage.emit("itemProperties"))}async componentWillLoad(){this.i18n=o.u.i18n.serviceConnection,this.populateFields(),s.a.hasPopulatedOptions||(this.populateOptions(),s.a.hasPopulatedOptions=!0)}checkValidFields(){const{host:e,username:t,password:a,parameterName:i,parameterLocation:s,token:o}=this,n=Object.assign({host:e},"token"===this.authenticationScheme?{parameterName:i,parameterLocation:s,token:o}:{username:t,password:a});return new Set(Object.entries(n).filter(([e,t])=>!t||""===t.trim()).map(([e])=>e))}populateFields(){var e,t;this.host=s.a.host,this.authenticationScheme=null!==(e=s.a.authenticationScheme)&&void 0!==e?e:"token","basic"===this.authenticationScheme?(this.username=s.a.username,this.password=s.a.password):(this.parameterLocation=null!==(t=s.a.parameterLocation)&&void 0!==t?t:"header",this.parameterName=s.a.parameterName,this.tokenPrefix=s.a.tokenPrefix,this.token=s.a.token)}populateOptions(){const{initialPageOptions:e}=s.a;e&&Object.entries(e).forEach(([e,t])=>{const a=e;this.allowedOptions.has(a)?this[a]=t:console.warn(`${e} is not an allowed service connection option.`)})}handleError(e){this.loading=!1;let t=this.i18n.errors.validationFailedTitle,a=this.i18n.errors.invalidConnection;this.error={title:t,description:a,details:e.details}}getPreview(){var e,t;let a;const i="*".repeat(16);if("basic"===this.authenticationScheme)a=`${r}: Basic ${i}`;else if("token"===this.authenticationScheme){const s=null!==(e=this.getSerializedHost())&&void 0!==e?e:n,o="query"===this.parameterLocation?"key":r,c=(null===(t=this.parameterName)||void 0===t?void 0:t.length)>0?this.parameterName:o,d=this.token?"*".repeat(this.token.length):i,l=`${this.tokenPrefix||""}${d}`;if("query"===this.parameterLocation){a=`https://${s}?${encodeURIComponent(c).replace(/%20/g,"+")}=${encodeURIComponent(l).replace(/%20/g,"+")}`}else a=`${c}: ${l}`}return a}getSerializedHost(){let e=this.host;if(e&&e.startsWith("http"))try{e=new URL(e).hostname}catch(e){}return e}render(){const{i18n:e,authenticationScheme:t,host:a,username:s,password:o,parameterName:c,parameterLocation:d,token:l,tokenPrefix:h,error:p}=this;return(0,i.h)("div",{key:"8e800dd49d495bade9c594662849c292e2c7d1f5"},(0,i.h)("arcgis-new-item-loader",{key:"892214a97e38a20eb0f0ccded4234b10842f836f",type:this.loaderType,active:this.loading,text:this.loaderMessage}),(0,i.h)("div",{key:"d58e6b2d543298e576514ac258314498d448aa54",class:"configure-form"},(0,i.h)("calcite-label",{key:"44f7ca548edf783c5601221585195e77bb95a0ce"},e.host,(0,i.h)("calcite-input",{key:"8609b6d9ad79a314d3e180dd02cc73954d2f6f05",placeholder:n,prefixText:"https://",value:a,onCalciteInputInput:e=>this.host=e.target.value.trim(),required:!0}),this.emptyRequiredFields.has("host")&&(0,i.h)("calcite-input-message",{key:"9298d76523fb6579415dfaecd17d428d6118a2c6",icon:"exclamation-mark-triangle",status:"invalid"},e.errors.noHost)),(0,i.h)("calcite-label",{key:"42159266eca9f12f339f9eb06c5d9e924bf6c114"},e.authenticationScheme,(0,i.h)("calcite-select",{key:"110db04be9bc2d6c8e1d2dbf999fd6351f506c1c",value:t,label:e.authenticationScheme,onCalciteSelectChange:this.handleAuthenticationSchemeChange},this.allowedAuthenticationSchemes.map(t=>(0,i.h)("calcite-option",{value:t,key:t},"token"===t?e.apiKey:e[t])))),"basic"===t&&(0,i.h)("div",{key:"c5e065bd9d42bc3401256bcf658aa57ed844035f"},(0,i.h)("calcite-label",{key:"0d05baa517e221a355ba0c2411deffafc96b8100"},e.username,(0,i.h)("calcite-input",{key:"6ddb693a012a8c1fa34fcfd2395f5227198c4df0",value:s,onCalciteInputInput:e=>this.username=e.target.value.trim(),required:!0}),this.emptyRequiredFields.has("username")&&(0,i.h)("calcite-input-message",{key:"1cd2359af9abf7db164c3c76674ef80dcb8665a4",icon:"exclamation-mark-triangle",status:"invalid"},e.errors.noUsername)),(0,i.h)("calcite-label",{key:"dedb17592670a108aa32ef7b0d5999b5c005a4d0"},e.password,(0,i.h)("calcite-input",{key:"68afe11a9d52aab965070e525dcb9b6616e72df7",type:"password",value:o,onCalciteInputInput:e=>this.password=e.target.value.trim(),required:!0}),this.emptyRequiredFields.has("password")&&(0,i.h)("calcite-input-message",{key:"20096045e4e5733d1a250d70043cfc162d6a012a",icon:"exclamation-mark-triangle",status:"invalid"},e.errors.noPassword))),"token"===t&&(0,i.h)("div",{key:"ee122de5d492990b082e82c540faff5463aeaa14"},(0,i.h)("calcite-label",{key:"83ab855dab8fa27404243b014932ef721a0e2bbd"},e.parameterLocation,(0,i.h)("calcite-select",{key:"8208035b7617cdfa224060d3c0893050ab221c61",value:d,label:e.parameterLocation,onCalciteSelectChange:e=>this.parameterLocation=e.target.selectedOption.value},this.parameterLocations.map(t=>(0,i.h)("calcite-option",{value:t,key:t},e[t])))),(0,i.h)("calcite-label",{key:"95ad5209b109929ae5c55d433f94c13d8dc154b8"},e.parameterName,(0,i.h)("calcite-input",{key:"641f2fba33377e64dab8c15f85a7b4376b773bf3",placeholder:"query"===d?"key":r,value:c,onCalciteInputInput:e=>this.parameterName=e.target.value.trim(),required:!0}),this.emptyRequiredFields.has("parameterName")&&(0,i.h)("calcite-input-message",{key:"26ab6a8f6c5707b75ad7587235c03ab5bb375b68",icon:"exclamation-mark-triangle",status:"invalid"},e.errors.noParameterName)),(0,i.h)("calcite-label",{key:"c74a51ab644ba9f37eb488e96a71a23cb15ef6ea"},e.token,(0,i.h)("calcite-input",{key:"031876acf96e62b9fb5870b793f87bb537fdba73",type:"password",value:l,onCalciteInputInput:e=>this.token=e.target.value.trim(),required:!0}),this.emptyRequiredFields.has("token")&&(0,i.h)("calcite-input-message",{key:"b3fbeaf01fa1be8cc89a433129a788900b83ff85",icon:"exclamation-mark-triangle",status:"invalid"},e.errors.noToken)),(0,i.h)("calcite-label",{key:"d57c7ed258725ea307d6a7ade9ce1608ddfed6b1"},e.tokenPrefix,(0,i.h)("calcite-input",{key:"ccbf015920655453c580b6959cd1e3272f56239f",value:h,onCalciteInputInput:e=>this.tokenPrefix=e.target.value}))),(0,i.h)("calcite-label",{key:"b1772253370b5ee5b4d55cb3fdff3a0c6bd705c8"},"token"===this.authenticationScheme&&"query"===this.parameterLocation?e.requestPreview:e.headerPreview,(0,i.h)("div",{key:"d34d99b3d3917317b37fbcd2290eac9b4100eca7",class:"preview"},(0,i.h)("code",{key:"a170cebf4ca95132b08edac3c6696834be7cfac8"},(0,i.h)("span",{key:"697db6f0bd264167149914d0e3975a1996b2ff52",dir:"ltr"},this.getPreview()))))),(0,i.h)("arcgis-new-item-alert",{key:"79f1d4132f4813454a403415c82e341aa8f8d01f",heading:null==p?void 0:p.title,description:null==p?void 0:p.description,details:null==p?void 0:p.details,detailsPopoverLabel:e.errorDetails,active:!!p,onAlertDismiss:()=>this.error=void 0}))}};c.style=".configure-form{margin-top:1.5rem}.preview{display:flex;align-items:center;background-color:var(--calcite-color-foreground-2);border-inline-start:var(--calcite-border-width-lg) solid var(--calcite-color-border-1);padding:var(--calcite-spacing-md) var(--calcite-spacing-lg);min-height:1rem}.preview code{width:100%;white-space:pre-wrap;overflow-wrap:break-word;font-family:Consolas, Andale Mono, Lucida Console, Monaco, monospace}calcite-label{--calcite-label-margin-bottom:1.25rem}"},95878:(e,t,a)=>{a.d(t,{a:()=>i,u:()=>s});const i=(0,a(37762).c)({nextText:"next",cancelText:"cancel",workflow:"content",scale:"m",disableScroll:!1,onlyHosted:!1,featureFlags:{}}),s=i.state}}]);