/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_com-e075bd.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_com-e075bd"],{32173:(e,a,t)=>{t.d(a,{A:()=>l,a:()=>c,b:()=>n,r:()=>r});var i=t(4395),s=t(73801);function l(e,a,t,l=!0){const n=document.getElementById(t);n&&n.remove();const r=(0,s.dN)(i.qy`<calcite-tooltip class="smart-mapping-tooltip" id=${t??s.s6} .referenceElement=${e} .open=${l} .innerHTML=${a??""}></calcite-tooltip>`);document.body.append(r)}function n(e,a,t=!0,l){const n=(0,s.dN)(i.qy`<calcite-tooltip class="smart-mapping-tooltip" .referenceElement=${e} .open=${t} .placement=${l??"auto"} .innerHTML=${a??""}></calcite-tooltip>`);document.body.append(n)}function r(){document.querySelectorAll(".smart-mapping-tooltip").forEach(e=>e.remove())}function c(e){const a=document.getElementById(e);"smart-mapping-tooltip"===a?.className&&a.remove()}},43733:(e,a,t)=>{t.r(a),t.d(a,{ArcgisMapConfigSmartMappingPanelsHeatmap:()=>g});var i=t(73679),s=t(4395),l=t(5294),n=t(75698),r=t(1225),c=t(89989),o=(t(44345),t(55448),t(52797),t(34031),t(63438),t(5933),t(89704),t(18423),t(96086),t(91813),t(21255),t(13078),t(21303),t(12627),t(56451),t(31521),t(23054),t(5077),t(23795),t(17902),t(87420),t(30161),t(81734),t(65595)),d=(t(77462),t(49403),t(10281),t(83930),t(54312),t(66617),t(10628),t(59640),t(64451),t(6176),t(10454),t(29614),t(94916),t(52554),t(2156),t(4038),t(89374)),p=(t(75054),t(15223),t(70169),t(47207),t(70852),t(48103),t(39423),t(85681),t(18444),t(42411),t(9767),t(38218),t(91914),t(86605),t(68196),t(440),t(46547),t(28927),t(6238),t(7299),t(32173)),m=t(85643),u=t(73801);const h=s.AH`:host{width:100%;display:none}:host([selected]){display:flex}.flow-item{height:100%}.heatmap-block{overflow-x:hidden}.attribute-name{word-break:break-all}.slider-labels{display:flex;justify-content:space-between}.top-bottom-margin-small{margin:10px 0}.top-margin-medium{margin-top:18px}`;class g extends u.WF{constructor(){super(...arguments),this.flowItemNode=(0,m._)(),this.calciteSwitchNode=(0,m._)(),this.smartMappingState=(0,o.u)(),this.menuOpen=!1,this.showBackButton=!1,this.selected=!1,this.arcgisSmartMappingPanelsHeatmapBackClick=(0,u.lh)(),this.arcgisSmartMappingPanelsHeatmapClose=(0,u.lh)(),this.arcgisSmartMappingPanelsHeatmapError=(0,u.lh)(),this.smartMappingCompleteClose=(0,u.lh)()}static{this.properties={menuOpen:5,showBackButton:5,selected:7,beforeBack:0}}static{this.styles=h}async setFocus(){await(this.flowItemNode.value?.setFocus())}load(){const{layer:e}=this.smartMappingState,a=(0,r.g)(this.smartMappingState);this.originalRendererJSON=a.toJSON(),this.originalFeatureReduction="featureReduction"in e&&e.featureReduction?l.clone(e.featureReduction):void 0}async loaded(){requestAnimationFrame(async()=>await(this.flowItemNode.value?.setFocus())),this.scaleHandle=(0,c.w)(this.smartMappingState,this.flowItemNode.value,()=>this.smartMappingCompleteClose.emit("cancel"))}disconnectedCallback(){super.disconnectedCallback(),(0,p.r)(),this.scaleHandle?.remove()}sliderRefHandler(e){e&&(this.sliderNode=e)}handleDone(){(0,r.f)(),this.arcgisSmartMappingPanelsHeatmapClose.emit("save")}handleCancel(){const{originalRendererJSON:e,originalFeatureReduction:a,smartMappingState:t}=this;(0,r.a8)(t,e,a),this.arcgisSmartMappingPanelsHeatmapClose.emit("cancel")}render(){const{hideLayerTitle:e,layer:a,mapImageSublayer:t,_messages:i}=this.smartMappingState,l=e?void 0:t?.title??a.title;return this.el.classList.add("calcite-match-height"),s.qy`<calcite-flow-item class="flow-item" .heading=${i.panels.heatmap.styleOptions} .description=${l} .closable=${(0,r.aa)(this.el)} .showBackButton=${this.showBackButton} .selected=${this.selected} @calciteFlowItemClose=${this.handleDone} @calciteFlowItemBack=${e=>{e.stopPropagation(),this.arcgisSmartMappingPanelsHeatmapBackClick.emit()}} ${(0,m.K)(this.flowItemNode)}>${this.renderVisualization()}${this.renderDoneButton()}${this.renderCancelButton()}</calcite-flow-item>`}renderCancelButton(){const{_messages:e}=this.smartMappingState;return s.qy`<calcite-button slot=footer .label=${e.cancel} @click=${this.handleCancel} appearance=outline-fill width=half>${e.cancel}</calcite-button>`}renderDoneButton(){const{_messages:e}=this.smartMappingState;return s.qy`<calcite-button slot=footer .label=${e.done} @click=${this.handleDone} appearance=solid width=half>${e.done}</calcite-button>`}renderVisualization(){const{smartMappingState:e}=this,{_messages:a}=e,t=(0,r.g)(e),i=t.field?(0,r.K)(e,t.field)?.label:void 0;return s.qy`<calcite-block class="heatmap-block" .heading=${a.panels.heatmap.heatmapStyle} expanded>${i?s.qy`<calcite-label class="attribute-name">${i}</calcite-label>`:null}${this.renderSymbol()}${this.renderHeatmapSlider()}${this.renderSoftEdges()}${this.renderInfluenceValue()}${this.renderLock()}${this.renderRegenerateStyle()}</calcite-block>`}renderSymbol(){const{smartMappingState:e}=this,a=(0,r.g)(e).colorStops.map(e=>{const a=e.color.clone();return a.a=1,a});return s.qy`<arcgis-map-config-smart-mapping-symbol-button type=heatmap-ramp ramp-type=continuous .colors=${a} @arcgisSmartMappingSymbolButtonSymbolChange=${()=>{this.requestUpdate(),this.sliderNode&&this.sliderNode.manager.component.requestUpdate()}}></arcgis-map-config-smart-mapping-symbol-button>`}renderHeatmapSlider(){return s.qy`<arcgis-map-config-smart-mapping-heatmap-slider ${(0,m.K)(this.sliderRefHandler)}></arcgis-map-config-smart-mapping-heatmap-slider>`}renderSoftEdges(){const{smartMappingState:e}=this,{_messages:a}=e,t=n.fromJSON(this.originalRendererJSON);return s.qy`<div><calcite-label> ${a.panels.heatmap.softenEdges} </calcite-label><calcite-slider min=0 max=1 .minLabel=${a.panels.heatmap.less} .maxLabel=${a.panels.heatmap.more} step=0.01 .value=${t.authoringInfo?.fadeRatio||0} @calciteSliderInput=${a=>{const t=a.target.value;if((0,r.g)(e).authoringInfo?.fadeRatio===t)return;const i=(0,d.u)(e,t);(0,r.a4)(e,i),this.sliderNode&&this.sliderNode.manager.component.requestUpdate()}}></calcite-slider><div class="slider-labels" aria-hidden=true><calcite-label>${a.panels.heatmap.less}</calcite-label><calcite-label>${a.panels.heatmap.more}</calcite-label></div></div>`}renderInfluenceValue(){const{smartMappingState:e}=this,{_messages:a}=e,t=n.fromJSON(this.originalRendererJSON);return s.qy`<div class="top-bottom-margin-small"><calcite-label>${a.panels.heatmap.areaOfInfluence}</calcite-label><calcite-slider min=1 max=60 .minLabel=${a.panels.heatmap.smaller} .maxLabel=${a.panels.heatmap.larger} .value=${t.radius||0} @calciteSliderInput=${a=>{const t=a.target;(0,r.g)(e).radius=t.value||10,(0,r.a4)(e)}}></calcite-slider><div class="slider-labels" aria-hidden=true><calcite-label>${a.panels.heatmap.smaller}</calcite-label><calcite-label>${a.panels.heatmap.larger}</calcite-label></div></div>`}renderLock(){const{smartMappingState:e}=this,{mapImageSublayer:a,_messages:t}=e;if(a)return"";const i=(0,r.g)(e),{referenceScale:l}=i;return s.qy`<div class="top-margin-medium"><calcite-label layout=inline-space-between>${t.panels.heatmap.lock}<calcite-switch .checked=${!!l} @calciteSwitchChange=${()=>{const{mapView:a}=this.smartMappingState,t=(0,r.g)(e);t.referenceScale=t.referenceScale?0:a.scale,(0,r.a4)(e)}} @mouseover=${()=>(0,p.b)(this.calciteSwitchNode.value,t.panels.heatmap.lockHelp)} @mouseout=${()=>(0,p.r)()} @focus=${()=>(0,p.b)(this.calciteSwitchNode.value,t.panels.heatmap.lockHelp)} @focusout=${()=>(0,p.r)()} ${(0,m.K)(this.calciteSwitchNode)}></calcite-switch></calcite-label></div>`}renderRegenerateStyle(){const{smartMappingState:e}=this,{mapImageSublayer:a}=e;return a?"":s.qy`<arcgis-map-config-smart-mapping-regenerate-style></arcgis-map-config-smart-mapping-regenerate-style>`}}(0,i.c)("arcgis-map-config-smart-mapping-panels-heatmap",g)},65595:(e,a,t)=>{t.d(a,{c:()=>n,u:()=>r});var i=t(20936),s=t(1225),l=(t(54312),t(44345),t(55448),t(52797),t(34031),t(63438),t(5933),t(28927),t(83368),t(89704),t(5294),t(18423),t(96086),t(91813),t(21255),t(13078),t(21303),t(12627),t(56451),t(31521),t(23054),t(5077),t(23795),t(17902),t(87420),t(30161),t(81734),t(75698),t(10628),t(59640),t(64451),t(6176),t(83552));t(77462),t(49403),t(10281),t(83930),t(66617),t(10454),t(29614),t(94916),t(52554),t(2156),t(4038),t(49851),t(75054),t(15223),t(70169),t(47207),t(70852),t(48103),t(39423),t(85681),t(18444),t(42411),t(9767),t(38218),t(91914),t(86605),t(68196),t(440),t(46547),t(6238),t(7299);function n(e){e.selectedFields=[],e.layerFields=void 0,e.fields=void 0,e.hideLayerTitle=!1,e.supportsArcade=!1,e.stringFieldsCount=-1,e.dateFieldsCount=-1,e.numberFieldsCount=-1,e.containsFlow=!0,e.oneFeatureResponseStatus=s.s.MISSING,e.selectedAttribute=void 0,e.selectedAttributeText=void 0,e.selectedTypeValue=void 0,e.selectedValue=void 0,e.lastDefault=void 0,e.lastDefaults=void 0,e.dotColorSelected=void 0,e.backgroundStyleSelected=void 0,e.lastSettings=void 0,e.classedSymbolSelectedIdx=void 0,e.allUniqueValues=void 0,e.useFeatureReduction=void 0,e.symbolStylerConfig={},e.allowTimeSeriesConfiguration=!1,e.rasterInfo=void 0}function r(){const e=(0,l.Gk)(),a=e;e.manager.onLoad(()=>{a.smartMappingState=function(e,a){const t=c.get(e);if(t)return t;const s=(0,i.el)(e,a);return s&&"store"in s?(c.set(e,s.store),s.store):null}(e.el,"arcgis-map-config-smart-mapping")})}const c=new WeakMap},89374:(e,a,t)=>{t.d(a,{a:()=>n,c:()=>l,u:()=>r});var i=t(49851),s=(t(52797),t(54312),t(44345),t(55448),t(34031),t(63438),t(5933),t(1225));t(89704),t(5294),t(18423),t(96086),t(91813),t(21255),t(13078),t(21303),t(12627),t(56451),t(31521),t(23054),t(5077),t(23795),t(17902),t(87420),t(30161),t(81734),t(83552),t(77462),t(49403),t(10281),t(83930),t(66617),t(10628),t(59640),t(64451),t(6176),t(10454),t(29614),t(94916),t(52554),t(2156),t(4038),t(75054),t(15223),t(70169),t(47207),t(70852),t(48103),t(39423),t(85681),t(18444),t(42411),t(9767),t(38218),t(91914),t(86605),t(68196),t(440),t(46547),t(28927),t(6238),t(7299);async function l(e,a){const{layer:t,mapView:l}=e,n=t,r=(0,s.g)(e);return a=a||{},"heatmap"===(0,s.d)(e)&&(a.radius=a.radius||r.radius,a.heatmapScheme=a.heatmapScheme||(0,s.$)(e)),a.fieldInfos?.length&&(0,s.a0)(e,[a.fieldInfos[0].field]),await i.createRenderer({layer:n,view:l,field:a.fieldInfos?.length?a.fieldInfos[0].field:null,radius:a.radius||10,heatmapScheme:a.heatmapScheme||void 0})}async function n(e,a){const{layer:t,mapView:l}=e,n=t;a=a||{};const r=(0,s.g)(e),c=r.authoringInfo;return await i.createRenderer({layer:n,view:l,field:a.fieldInfos?.length?a.fieldInfos[0].field:r.field,fadeRatio:a.fadeRatio??c?.fadeRatio,radius:a.radius||r.radius||10,heatmapScheme:a.heatmapScheme||(0,s.$)(e)})}function r(e,a){const t=(0,s.g)(e);return i.updateRenderer({renderer:t,fadeRatio:a})}},89989:(e,a,t)=>{t.d(a,{w:()=>l});var i=t(54312),s=t(1225);t(44345),t(55448),t(52797),t(34031),t(63438),t(5933),t(28927),t(83368),t(89704),t(5294),t(18423),t(96086),t(91813),t(21255),t(13078),t(21303),t(12627),t(56451),t(31521),t(23054),t(5077),t(23795),t(17902),t(87420),t(30161),t(81734),t(75698),t(10628),t(59640),t(64451),t(6176),t(83552),t(77462),t(49403),t(10281),t(83930),t(66617),t(10454),t(29614),t(94916),t(52554),t(2156),t(4038),t(49851),t(75054),t(15223),t(70169),t(47207),t(70852),t(48103),t(39423),t(85681),t(18444),t(42411),t(9767),t(38218),t(91914),t(86605),t(68196),t(440),t(46547),t(6238),t(7299);function l(e,a,t){const{layer:l,mapView:r,useFeatureReduction:c}=e;return c&&"featureReduction"in l&&"binning"===l.featureReduction.type?i.watch(()=>r.scale,()=>{const i=l.featureReduction;r.scale<=i.maxScale&&!a.disabled?((0,s.f)(),function(e,a,t){const i=document.createElement("arcgis-map-config-smart-mapping-scale-alert-popover");i.smartMappingState=e,i.refElement=a,i.addEventListener("arcgisSmartMappingScaleAlertPopoverBack",()=>{n(),t()}),document.body.append(i)}(e,a,t),(0,s.h)(a,!0)):r.scale>i.maxScale&&a.disabled&&(n(),(0,s.h)(a,!1),a.setFocus())}):void 0}function n(){document.querySelectorAll("arcgis-map-config-smart-mapping-scale-alert-popover").forEach(e=>e.remove())}}}]);