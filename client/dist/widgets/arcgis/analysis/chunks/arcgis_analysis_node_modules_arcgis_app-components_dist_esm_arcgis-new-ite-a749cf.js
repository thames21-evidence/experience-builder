/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-new-ite-a749cf.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-new-ite-a749cf"],{10556:(e,t,i)=>{i.d(t,{a:()=>r,b:()=>c,f:()=>a,i:()=>o,m:()=>s});var l=i(4429),n=i(15912);function a(e,t){let i;i=t?t.map(e=>e.type):Object.keys(n.a);let l=[];return i.forEach(t=>{var i;(null===(i=n.a[t].fileExt)||void 0===i?void 0:i.indexOf(e))>=0&&l.push(n.a[t])}),l}function s(e){return e?(0,l.b)(e.flatMap(e=>{var t;return null===(t=n.a[e])||void 0===t?void 0:t.fileExt}).filter(e=>!!e)):null}const o=e=>e/1024/1024>50,r=e=>e/1024/1024>20,c=e=>e/1024/1024>10},13446:(e,t,i)=>{i.d(t,{a:()=>o,r:()=>s});var l=i(72257),n=i(3826),a=i(95878);function s(){n.d.reset(),l.a.reset()}const o=()=>{if(n.a.existingItem||"register"===a.u.workflow)return;n.d.reset();const e=l.i.folder;l.a.reset(),l.i.folder=e}},24869:(e,t,i)=>{i.d(t,{a:()=>a,f:()=>c,g:()=>r,s:()=>s,v:()=>o});var l=i(15912),n=i(46227);function a(e,t){const i=/(?:\.([^.]+))?$/;let l=null==e?void 0:e.replace(/^.*(\\|\/|:)/,""),a=l&&i.exec(l)[1]?i.exec(l)[1].toLowerCase():"",s="";if((null==l?void 0:l.indexOf(".rft."))>-1){const[e,t]=l.split(".rft.");a=`rft.${t}`,s=e}return l&&!s&&(s=-1===l.lastIndexOf(".")?l:l.substring(0,l.lastIndexOf("."))),s=s.replace(/\.|-/g,"_"),t&&(s=function(e){return`${e}_${(0,n.g)()}`}(s),l=`${s}.${a}`),{title:s,fileName:l,extension:a}}function s(e,t){return a(e.name,!!t)}function o(e,t){let i=e;const l=e.lastIndexOf("\\");return l>-1&&(i=i.substring(l+1,i.length)),i.replace(/\ /g,"_")===t.replace(/\ /g,"_")}function r(e){return l.a[e]?l.a[e]:l.a[Object.keys(l.a).find(t=>l.a[t].type===e)]}function c(e){if(!e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return`${Math.round(e/Math.pow(1024,t))} ${["B","KB","MB","GB","TB"][t]}`}},34613:(e,t,i)=>{i.d(t,{r:()=>n});const l={fileName:/\$\{fileName\}/g,fileType:/\$\{type\}/g,typeList:/\$\{typeList\}/g,missingFields:/\$\{\missingFields\}/g,layerType:/\$\{layerType\}/g},n=(e,t,i)=>{const n=new RegExp(l[i]);return null==e?void 0:e.replace(n,t)}},46227:(e,t,i)=>{i.d(t,{g:()=>l});const l=()=>[2,1,1,1,3].map(e=>{let t="";for(let i=0;i<e;i++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t}).join("-")},63259:(e,t,i)=>{i.r(t),i.d(t,{arcgis_new_item_pages_home:()=>g});var l=i(87849),n=i(59317),a=i(24869),s=i(1654),o=i(1536),r=i(3826),c=i(95878),d=i(13446),u=i(15912),p=i(34613),f=i(10556),m=i(10578);i(37762),i(46904),i(93814),i(41473),i(88878),i(83692),i(931),i(54251),i(72257),i(86562),i(15332),i(29599);const g=class{constructor(e){(0,l.r)(this,e),this.newItemUpdatePage=(0,l.c)(this,"newItemUpdatePage",7),this.allowedFileTypes=null,this.fileSelectHandler=async(e,t)=>{const{user:i,portal:l,config:{helpMap:s,helpBase:o},telemetry:d}=n.c,u=t?"your device":"drag drop",p={eventType:"new item click",pageName:"my content",category:"new item",label:u};null==d||d.logEvent(p),c.u.telemetryDetails=u,c.u.onlyHosted=!1;const{title:g,fileName:h,extension:w}=(0,a.s)(e);r.a.initialTitle=g,r.a.file=e,r.a.fileName=h,r.a.newItemMode="file",r.a.extension=w,r.a.selectedFields=void 0;const y=(0,f.f)(w),b="map"===c.u.workflow;if(1===y.length){const t=y[0].type;if("GeoJson"===t&&b&&!await(0,m.a)(i,t,l)&&(0,f.i)(e.size))return void(this.error={description:c.u.i18n.publishSelect.bigGeoJsonHintPublicAccount,linkText:c.u.i18n.common.learnMore,link:`${o}${s[120003923]}`});r.a.type=t,["Microsoft Excel","CSV","GeoJson"].includes(t)&&(r.a.id=null,r.a.analyzeResults=null,r.a.selectedFields=null,"GeoJson"!==t&&(r.a.selectedSheet=null)),r.a.tileLayerPublishType="3DTiles Package"===t?"3dTiles":void 0;const a=y[0].nextStep,d=["CSV","Microsoft Excel"];b&&!await(0,m.a)(i,t,l)&&d.includes(t)||"3DTiles Package"===t?(r.a.enablePublishing=!1,this.newItemUpdatePage.emit("publishSelect")):!await(0,m.a)(i,t,l)||!n.c.allowPublish&&"publishSelect"===a?(r.a.enablePublishing=!1,this.newItemUpdatePage.emit("itemProperties")):this.newItemUpdatePage.emit(a)}else"zip"===w&&(this.newItemUpdatePage.emit("zipSelect"),r.a.applicationFile=null)},this.managedFocus=!0,this.error=void 0}async componentWillLoad(){(0,d.a)();const{allowedItemTypes:e,user:t,portal:i}=n.c;if(e){const e=["CSV","GeoJson","KML"],l=[];await Promise.all(n.c.allowedItemTypes.map(async n=>{(!(0,u.i)(n)||e.includes(n))&&t&&(e.includes(n)||!(0,s.b)(t)&&await(0,m.a)(t,n,i))&&l.push(n)})),this.allowedFileTypes=l;const a=c.u.i18n;this.browserHelpText=(0,p.r)(a.common.supportFileTypes,this.allowedFileTypes.map(e=>{var t;return null!==(t=a.itemTypeInfo.lowercaseDisplayName[e])&&void 0!==t?t:e}).join(", "),"typeList")}"map"!==c.u.workflow||r.a.existingItem||this.removeExistingFile()}onTransitionComplete(){var e;null===(e=this.fileBrowserRef)||void 0===e||e.focusMainInput()}async removeExistingFile(){const e=r.a.id;e&&(r.a.id=null,await(0,o.d)(e,{permanentDelete:!0}))}render(){const e="map"===c.u.workflow,{allowedFileTypes:t,error:i,fileSelectHandler:a}=this,{portal:s,config:o,user:d,userLicensedItems:u}=n.c;return(0,l.h)(l.H,{key:"0a3fa3921feac6ee5c6833ebe7d5f3b8ca37e2c5"},n.c.allowedModes.includes("file")&&(0,l.h)("arcgis-file-browser",{key:"908ad9d41cbaa86af691a8daa48311741e3c00c4",ref:e=>this.fileBrowserRef=e,class:{"full-height":e},allowedExtensions:t?(0,f.m)(t):void 0,helpText:this.browserHelpText,fullHeight:e,portal:s,config:o,user:d,userLicensedItems:u,onCloudDriveConnected:e=>{var t;const i=e.detail,l={eventType:"new item click",pageName:"my content",category:"new item",label:i};null===(t=n.c.telemetry)||void 0===t||t.logEvent(l),c.u.telemetryDetails=i,r.a.cloudProvider=i,this.newItemUpdatePage.emit("cloud")},onFileSelect:({detail:{file:e,source:t}})=>{a(e,"local-device"===t)}}),!e&&(0,l.h)("arcgis-new-item-create-layers-list",{key:"3ca0e7fefc0beb78ee5e4b2fe77f424a8eefbe59"}),(0,l.h)("arcgis-new-item-alert",{key:"86fb919ecb84d455f049b54c0f9d13c17541db8c",description:null==i?void 0:i.description,link:{href:null==i?void 0:i.link,title:null==i?void 0:i.linkText},active:!!i,onAlertDismiss:()=>this.error=null}))}}}}]);