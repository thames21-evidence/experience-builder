/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-9c5038.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-9c5038"],{3826:(e,t,n)=>{n.d(t,{a:()=>s,b:()=>i,c:()=>a,d:()=>r});const r=(0,n(37762).c)({typeKeywords:[],customParameters:[],analyzedLocationTypes:[],allowStoredAuth:!0,isSecured:null,checkAuth:!1}),s=r.state,i=r.state,a=r.state},4429:(e,t,n)=>{n.d(t,{a:()=>l,b:()=>u,c:()=>i,d:()=>c,e:()=>s,f:()=>r,g:()=>f,i:()=>h,m:()=>a,t:()=>o,u:()=>d});const r=(e,t)=>{let n,r="idle";const s=(...s)=>new Promise(i=>{switch(r){case"flushed":r="idle",n?(clearTimeout(n),i(e(...s))):i(null);break;case"invoked":clearTimeout(n),r="idle",i(e(...s));break;case"cancelled":clearTimeout(n),r="idle",i(null);break;default:n&&clearTimeout(n),r="pending",n=setTimeout(()=>(r="idle",i(e(...s))),t)}});return s.flush=function(...e){return r="flushed",s(...e)},s.invoke=function(...e){return r="invoked",s(...e)},s.cancel=function(...e){return r="cancelled",s(...e)},s.getStatus=function(){return r},s};function s(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function i(e){return null!=e}async function a(e,t){return await Promise.all([e,o(t)]),e}function o(e){return new Promise(t=>setTimeout(t,e))}const l=(e,t)=>Object.fromEntries((e||[]).map(e=>{const{key:n,data:r}=t(e);return[n,r]})),c=(e,t)=>e.length===t.length&&e.reduce((e,n)=>e&&t.indexOf(n)>-1,!0);function d(e,t){const n=[],r={};return e.forEach(e=>{const s=t(e);null==r[s]&&(r[s]=e,n.push(e))}),n}function u(e){const t={boolean:{},number:{},string:{}},n=[];return e.filter(e=>{let r=typeof e;return r in t?!t[r].hasOwnProperty(e)&&(t[r][e]=!0):!(n.indexOf(e)>=0)&&n.push(e)})}const f=(e,t)=>[...Array(Math.ceil(e.length/t))].map((n,r)=>e.slice(t*r,t+t*r)),h=(e,t)=>e.includes(t)},10556:(e,t,n)=>{n.d(t,{a:()=>l,b:()=>c,f:()=>i,i:()=>o,m:()=>a});var r=n(4429),s=n(15912);function i(e,t){let n;n=t?t.map(e=>e.type):Object.keys(s.a);let r=[];return n.forEach(t=>{var n;(null===(n=s.a[t].fileExt)||void 0===n?void 0:n.indexOf(e))>=0&&r.push(s.a[t])}),r}function a(e){return e?(0,r.b)(e.flatMap(e=>{var t;return null===(t=s.a[e])||void 0===t?void 0:t.fileExt}).filter(e=>!!e)):null}const o=e=>e/1024/1024>50,l=e=>e/1024/1024>20,c=e=>e/1024/1024>10},24869:(e,t,n)=>{n.d(t,{a:()=>i,f:()=>c,g:()=>l,s:()=>a,v:()=>o});var r=n(15912),s=n(46227);function i(e,t){const n=/(?:\.([^.]+))?$/;let r=null==e?void 0:e.replace(/^.*(\\|\/|:)/,""),i=r&&n.exec(r)[1]?n.exec(r)[1].toLowerCase():"",a="";if((null==r?void 0:r.indexOf(".rft."))>-1){const[e,t]=r.split(".rft.");i=`rft.${t}`,a=e}return r&&!a&&(a=-1===r.lastIndexOf(".")?r:r.substring(0,r.lastIndexOf("."))),a=a.replace(/\.|-/g,"_"),t&&(a=function(e){return`${e}_${(0,s.g)()}`}(a),r=`${a}.${i}`),{title:a,fileName:r,extension:i}}function a(e,t){return i(e.name,!!t)}function o(e,t){let n=e;const r=e.lastIndexOf("\\");return r>-1&&(n=n.substring(r+1,n.length)),n.replace(/\ /g,"_")===t.replace(/\ /g,"_")}function l(e){return r.a[e]?r.a[e]:r.a[Object.keys(r.a).find(t=>r.a[t].type===e)]}function c(e){if(!e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return`${Math.round(e/Math.pow(1024,t))} ${["B","KB","MB","GB","TB"][t]}`}},27968:(e,t,n)=>{n.r(t),n.d(t,{arcgis_new_item_pages_data_upload:()=>c});var r=n(87849),s=n(59317),i=n(24869),a=n(3826),o=n(95878),l=n(10556);n(37762),n(15912);const c=class{constructor(e){(0,r.r)(this,e),this.newItemUpdatePage=(0,r.c)(this,"newItemUpdatePage",7),this.newItemSetButtonState=(0,r.c)(this,"newItemSetButtonState",7),this.workflowComplete=(0,r.c)(this,"workflowComplete",7),this.allowedExtensions=null,this.loading=!1,this.loaderMessage=void 0,this.loaderType="indeterminate",this.error=void 0}componentWillLoad(){const{existingItem:e,fileName:t}=a.a,n=e.type;this.i18n=o.u.i18n.appendUpload,this.newItemSetButtonState.emit({targetButton:"primary",state:{loading:!1,disabled:!0}}),this.header=this.i18n.updatePackages.replace("${type}",n.toLowerCase()).replace("${hostedLayerName}",t)}async fileSelectHandler(e){var t;this.sourceName=(null===(t=a.a.existingItem.sourceData)||void 0===t?void 0:t.name)||a.a.existingItem.name;const n=e.detail.file,r=a.a.existingItem.type,{title:s,fileName:o,extension:c}=(0,i.s)(n);if("Vector Tile Service"===r){if("json"!==c)return void this.handleError({code:"invalidExtension"})}else if(0!==o.localeCompare(this.sourceName))return void this.handleError({code:"useSameFileName"});a.a.initialTitle=s,a.a.file=n,a.a.fileName=o,a.a.newItemMode="file",a.a.extension=c;const d=(0,l.f)(c);if(1===d.length){const e=d[0].type;a.a.type=e}this.newItemUpdatePage.emit("appendSelectUpdate")}async handleError(e){let t=this.i18n.errors.errorWhileUpload;switch(this.loading=!1,e.code){case"invalidExtension":t=this.i18n.errors.invalidStyleFileExtension;case"useSameFileName":t=this.i18n.errors.sameFileName.replace("${x}",this.sourceName);break;case"unhandledError":t=this.i18n.errors.errorUpdate}this.error={title:o.u.i18n.error,description:t}}render(){const{header:e,loaderType:t,loading:n,loaderMessage:i,error:a,allowedExtensions:o}=this,{portal:l,config:c,user:d}=s.c;return(0,r.h)(r.H,{key:"0d4addfbfd4bcbd107d6ef7cb60b48446c63c99e"},(0,r.h)("arcgis-new-item-loader",{key:"8621e1a47ba0a48533891ecdaa1d5884baf32fb8",type:t,active:n,text:i}),(0,r.h)("arcgis-new-item-description",{key:"0c2732ac1ed53015008cc4a09a61a632dd72fd51",header:e}),(0,r.h)("arcgis-file-browser",{key:"778047a22683a5511d52a6ab435fd9cbc23bada8",class:"arcgis-file-browser",cloud:!1,insideModal:!0,fullHeight:!0,portal:l,config:c,user:d,allowedExtensions:o}),(0,r.h)("arcgis-new-item-alert",{key:"41a3ec2f53690ec47455482536109787c191ae36",heading:null==a?void 0:a.title,description:null==a?void 0:a.description,link:{href:null==a?void 0:a.link,title:null==a?void 0:a.linkText},active:!!a,onAlertDismiss:()=>this.error=null}))}};c.style=".arcgis-file-browser{display:block;height:95%}"},37762:(e,t,n)=>{n.d(t,{c:()=>l});var r=n(87849);const s=e=>!("isConnected"in e)||e.isConnected,i=((e,t)=>{let n;return(...r)=>{n&&clearTimeout(n),n=setTimeout(()=>{n=0,e(...r)},t)}})(e=>{for(let t of e.keys())e.set(t,e.get(t).filter(s))},2e3),a=e=>"function"==typeof e?e():e,o=(e,t)=>{const n=e.indexOf(t);n>=0&&(e[n]=e[e.length-1],e.length--)},l=(e,t)=>{const n=((e,t=(e,t)=>e!==t)=>{const n=a(e);let r=new Map(Object.entries(null!=n?n:{}));const s={dispose:[],get:[],set:[],reset:[]},i=()=>{var t;r=new Map(Object.entries(null!==(t=a(e))&&void 0!==t?t:{})),s.reset.forEach(e=>e())},l=e=>(s.get.forEach(t=>t(e)),r.get(e)),c=(e,n)=>{const i=r.get(e);t(n,i,e)&&(r.set(e,n),s.set.forEach(t=>t(e,n,i)))},d="undefined"==typeof Proxy?{}:new Proxy(n,{get:(e,t)=>l(t),ownKeys:e=>Array.from(r.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(e,t)=>r.has(t),set:(e,t,n)=>(c(t,n),!0)}),u=(e,t)=>(s[e].push(t),()=>{o(s[e],t)});return{state:d,get:l,set:c,on:u,onChange:(t,n)=>{const r=u("set",(e,r)=>{e===t&&n(r)}),s=u("reset",()=>n(a(e)[t]));return()=>{r(),s()}},use:(...e)=>{const t=e.reduce((e,t)=>(t.set&&e.push(u("set",t.set)),t.get&&e.push(u("get",t.get)),t.reset&&e.push(u("reset",t.reset)),t.dispose&&e.push(u("dispose",t.dispose)),e),[]);return()=>t.forEach(e=>e())},dispose:()=>{s.dispose.forEach(e=>e()),i()},reset:i,forceUpdate:e=>{const t=r.get(e);s.set.forEach(n=>n(e,t,t))}}})(e,t);return n.use((()=>{if("function"!=typeof r.g)return{};const e=new Map;return{dispose:()=>e.clear(),get:t=>{const n=(0,r.g)();n&&((e,t,n)=>{const r=e.get(t);r?r.includes(n)||r.push(n):e.set(t,[n])})(e,t,n)},set:t=>{const n=e.get(t);n&&e.set(t,n.filter(r.f)),i(e)},reset:()=>{e.forEach(e=>e.forEach(r.f)),i(e)}}})()),n}},46227:(e,t,n)=>{n.d(t,{g:()=>r});const r=()=>[2,1,1,1,3].map(e=>{let t="";for(let n=0;n<e;n++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t}).join("-")},59317:(e,t,n)=>{n.d(t,{c:()=>s,o:()=>i});const r=(0,n(37762).c)({portal:null,user:null,api:4,scale:"m"}),s=r.state,i=r.onChange},95878:(e,t,n)=>{n.d(t,{a:()=>r,u:()=>s});const r=(0,n(37762).c)({nextText:"next",cancelText:"cancel",workflow:"content",scale:"m",disableScroll:!1,onlyHosted:!1,featureFlags:{}}),s=r.state}}]);