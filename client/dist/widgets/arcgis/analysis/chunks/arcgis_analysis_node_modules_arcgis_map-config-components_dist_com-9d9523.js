/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_com-9d9523.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_com-9d9523"],{9939:(e,i,t)=>{t.r(i),t.d(i,{ArcgisMapConfigSmartMappingTile:()=>z});var l=t(73679),s=t(4395),o=t(46317),r=t(56451),a=t(29614),n=t(83930),c=t(1225),p=(t(54312),t(44345),t(55448),t(52797),t(34031),t(63438),t(5933),t(28927),t(83368),t(75518)),d=(t(89704),t(5294),t(18423),t(96086),t(91813),t(21255),t(13078),t(21303),t(12627),t(31521),t(23054),t(5077),t(23795),t(17902),t(87420),t(30161),t(81734),t(65595)),m=(t(77462),t(49403),t(66617),t(10628),t(59640),t(64451),t(6176),t(10454),t(28973)),u=t(87735),g=(t(2156),t(4038),t(49851),t(75054),t(15223),t(70169),t(47207),t(70852),t(48103),t(39423),t(85681),t(18444),t(11751)),y=(t(9767),t(38218),t(91914),t(86605),t(68196),t(440),t(46547),t(6238),t(7299),t(20936)),h=(t(83552),t(10281),t(94916),t(52554),t(42411),t(85643)),f=t(73801);const b=s.AH`.tile{background-color:#fff;position:relative;margin:6px;cursor:pointer;box-shadow:0 1px 10px 2px #0000000d,0 0 0 1px #e0e0e0;transition:box-shadow 125ms ease-in-out}.tile:hover{z-index:5;box-shadow:0 1px 0 2px #0000000d,0 0 0 1px #e0e0e0}.tile:focus{outline:2px solid var(--calcite-color-brand)}.tile-selected{box-shadow:0 1px 10px 2px #0000000d,0 0 0 1px var(--calcite-color-brand)}.tile-selected:focus{box-shadow:0 1px 10px 2px #0000000d,0 0 0 2px var(--calcite-color-brand)}.tile-selected:hover{z-index:5;box-shadow:0 1px 0 2px #0000000d,0 0 0 1px var(--calcite-color-brand)}.tile-check{position:absolute;top:10px;right:10px}.tile-check.rtl{right:auto;left:10px}.style-link{padding:9px}.style-link-title{font-weight:700;padding-bottom:5px}.style-link-title.info{display:flex}.style-link-sub-text{font-size:80%;padding:0 0 6px;font-weight:400}.style-link-options{color:#0079c1;display:flex;flex-direction:row nowrap;svg{fill:#0079c1}}.tile-image{height:100px;width:100%;background-size:cover;display:flex;align-items:center;justify-content:center}.tile-image-selected{height:68px}.tile-image.rtl{transform:scaleX(-1)}.style-sub-text{font-size:80%;padding:0 0 6px}.style-link-info{height:18px;margin-top:-2px;margin-inline-start:5px}`;class z extends f.WF{constructor(){super(...arguments),this.themeButtonNode=(0,h._)(),this.smartMappingState=(0,d.u)(),this.tileType="default",this.selected=!1,this.arcgisSmartMappingTileError=(0,f.lh)(),this.arcgisSmartMappingTileOptions=(0,f.lh)(),this.arcgisSmartMappingTileSelect=(0,f.lh)(),this.arcgisSmartMappingTileThemeChange=(0,f.lh)()}static{this.properties={tileType:1,type:1,rasterPresetRendererName:1,selected:5,fields:0}}static{this.styles=b}async setFocus(){requestAnimationFrame(()=>this.tileNode?.focus())}async setThemeFocus(){requestAnimationFrame(()=>this.themeButtonNode.value?.setFocus())}async removePopover(){this.removeInfoPopover()}load(){this.tileInfo=function(e,i,t,l){const{selectedFields:s,_messages:o}=e;let r=(0,c.l)(e)?"raster":(0,c.j)(e);"multipoint"===r&&(r="point");let a=s.length;(0,c.V)(a)||(a=1);const n=(0,c.l)(e)?(0,c.U)(e):(0,c.d)(e);let p=!1,d=!1;switch(s.length&&(p=s[0].simpleFieldType===c.J.DATE||"date-only"===(0,c.K)(e,s[0].field)?.layerField?.type,d=p,s.length>1&&(d=s[1].simpleFieldType===c.J.DATE)),i){case"simple":default:return{title:o.tile.simpleStyle,moreInfo:o.tile.tooltips.location,helpId:"120003675",imageFile:`${r}/Simple.png`};case"color":return{title:p?o.tile.colorStyleDate:o.tile.colorStyle,subText:["gallery","assist"].includes(t)?"":s[0].expressionTitle||s[0].featureReductionExpressionTitle||(0,c.K)(e,s[0].field).label,moreInfo:p?o.tile.tooltips.colorDate:o.tile.tooltips.color,helpId:p?"120003262":"120003251",imageFile:p?`${r}/Color_Time.png`:`${r}/Color.png`};case"size":return{title:"chart-size"!==n||["gallery","assist"].includes(t)?1===a&&p||2===a&&d?o.tile.sizeStyleDate:o.tile.sizeStyle:o.tile.sizeStyleChart,subText:["gallery","assist"].includes(t)?"":"chart-size"===n||"predominance-size"===n?o.sumOfCategories:"relationship-size"===n?s[2].expressionTitle||s[2].featureReductionExpressionTitle||(0,c.K)(e,s[2].field)?.label:s[1].expressionTitle||s[1].featureReductionExpressionTitle||(0,c.K)(e,s[1].field)?.label,moreInfo:"predominance-size"===n?o.tile.tooltips.sizeForPredominance:1===a&&p||2===a&&d?o.tile.tooltips.sizeDate:o.tile.tooltips.size,helpId:1===a&&p||2===a&&d?"120003263":"120003252",imageFile:"chart-size"!==n||["gallery","assist"].includes(t)?1===a&&p||2===a&&d?`${r}/Size_Time.png`:`${r}/Size.png`:`${r}/ChartSizeSize.jpg`};case"type":return{title:p?o.tile.typeStyleDate:o.tile.typeStyle,subText:!["gallery","assist"].includes(t)&&null!=n&&["type-size","type-size-age"].includes(n)?s[0].expressionTitle||s[0].featureReductionExpressionTitle||(0,c.K)(e,s[0].field).label:"",moreInfo:p?o.tile.tooltips.typeDate:o.tile.tooltips.type,helpId:p?"120003266":"120003260",imageFile:`${r}/Type.png`};case"color-age":return{title:o.tile.colorAgeStyle,subText:["gallery","assist"].includes(t)?"":s[0].expressionTitle||s[0].featureReductionExpressionTitle||(0,c.K)(e,s[0].field).label,moreInfo:o.tile.tooltips.colorAge,helpId:"120003264",imageFile:`${r}/Color_Age.png`};case"size-age":return{title:o.tile.sizeAgeStyle,subText:["gallery","assist"].includes(t)?"":s[1].expressionTitle||s[1].featureReductionExpressionTitle||(0,c.K)(e,s[1].field)?.label,moreInfo:o.tile.tooltips.sizeAge,helpId:"120003265",imageFile:`${r}/Size_Age.png`};case"color-size":return{title:o.tile.colorSizeStyle,moreInfo:p?d?o.tile.tooltips.colorDate_SizeDate:o.tile.tooltips.colorDate_Size:d?o.tile.tooltips.color_SizeDate:o.tile.tooltips.color_Size,helpId:"120003254",imageFile:p||d?`${r}/ColorSize_Time.png`:`${r}/ColorSize.png`};case"color-age-size":return{title:o.tile.colorAgeSizeStyle,moreInfo:o.tile.tooltips.colorAge_Size,helpId:"120003267",imageFile:`${r}/ColorSize_Age.png`};case"color-size-age":return{title:o.tile.colorSizeAgeStyle,moreInfo:o.tile.tooltips.color_SizeAge,helpId:"120003267",imageFile:`${r}/ColorSize_Age.png`};case"type-size":return{title:o.tile.typeSizeStyle,moreInfo:p?o.tile.tooltips.typeDate_Size:d?o.tile.tooltips.type_SizeDate:o.tile.tooltips.type_Size,helpId:"120003261",imageFile:d?`${r}/TypeSize_Time.png`:`${r}/TypeSize.png`};case"type-size-age":return{title:o.tile.typeSizeAgeStyle,moreInfo:o.tile.tooltips.type_SizeAge,helpId:"120003268",imageFile:`${r}/TypeSize_Age.png`};case"dot-density":return{title:o.tile.dotDensityStyle,moreInfo:o.tile.tooltips.dotDensity,helpId:"120003253",imageFile:`${r}/DotDensity.png`};case"heatmap":return{title:o.tile.heatmapStyle,moreInfo:o.tile.tooltips.heatMap,helpId:"120003250",imageFile:`${r}/HeatMap.png`};case"relationship":return{title:o.tile.relationshipStyle,subText:["gallery","assist"].includes(t)||"relationship-size"!==n?"":[(0,c.K)(e,s[0].field).label,(0,c.K)(e,s[1].field).label],moreInfo:o.tile.tooltips.relationship,helpId:"120003258",imageFile:`${r}/Relationship.png`};case"relationship-size":return{title:o.tile.relationshipSizeStyle,moreInfo:o.tile.tooltips.relationshipSize,helpId:"120003259",imageFile:`${r}/RelationshipSize.png`};case"predominance":return{title:o.tile.predominanceStyle,moreInfo:o.tile.tooltips.predominance,helpId:"120003256",imageFile:`${r}/Predominance.png`};case"predominance-size":return{title:o.tile.predominanceSizeStyle,moreInfo:o.tile.tooltips.predominanceSize,helpId:"120003257",imageFile:`${r}/PredominanceSize.png`};case"chart":return{title:"chart-size"!==n||["gallery","assist"].includes(t)?o.tile.chartStyle:o.tile.chartStyleColor,moreInfo:o.tile.tooltips.chart,helpId:"120003729",imageFile:`${r}/Chart.jpg`};case"chart-size":return{title:o.tile.chartSizeStyle,moreInfo:o.tile.tooltips.chartSize,helpId:"120003730",imageFile:`${r}/ChartSize.jpg`};case"compare":return{title:o.tile.compareStyle,moreInfo:o.tile.tooltips.compare,helpId:"120003255",imageFile:`${r}/Ratio.png`};case"raster-stretch":return{title:l??o.tile.symbologyStretchStyle,subText:l?o.panels.gallery.customStyle:void 0,moreInfo:o.tile.tooltips.stretch,helpId:"120003269",imageFile:`${r}/stretch.png`};case"raster-rgb":return{title:l??o.tile.symbologyRGBStyle,subText:l?o.panels.gallery.customStyle:void 0,moreInfo:o.tile.tooltips.rgb,helpId:"120003270",imageFile:`${r}/rgb.png`};case"raster-unique-value":return{title:l??o.tile.symbologyUniqueValuesStyle,subText:l?o.panels.gallery.customStyle:void 0,moreInfo:o.tile.tooltips.uniqueValues,helpId:"120003271",imageFile:`${r}/uniqueValues.png`};case"raster-shaded-relief":return{title:l??o.tile.symbologyShadedReliefStyle,subText:l?o.panels.gallery.customStyle:void 0,moreInfo:o.tile.tooltips.shadedRelief,helpId:"120003273",imageFile:`${r}/shadedRelief.png`};case"raster-vector-field":return{title:l??o.tile.symbologyVectorFieldStyle,subText:l?o.panels.gallery.customStyle:void 0,moreInfo:o.tile.tooltips.vectorField,helpId:"120003275",imageFile:`${r}/vectorField.png`};case"raster-colormap":return{title:l??o.tile.symbologyColormapStyle,subText:l?o.panels.gallery.customStyle:void 0,moreInfo:o.tile.tooltips.colormap,helpId:"120003274",imageFile:`${r}/colormap.png`};case"raster-class-breaks":return{title:l??o.tile.symbologyClassBreaksStyle,subText:l?o.panels.gallery.customStyle:void 0,moreInfo:o.tile.tooltips.classify,helpId:"120003272",imageFile:`${r}/classBreaks.png`};case"raster-flow":return{title:l??o.tile.rasterFlowStyle,subText:l?o.panels.gallery.customStyle:void 0,moreInfo:o.tile.tooltips.flow,helpId:"120003676",imageFile:`${r}/flow.png`}}}(this.smartMappingState,this.type,this.tileType,this.rasterPresetRendererName)}loaded(){this.flowItemNode=(0,y.el)(this.el,"calcite-flow-item")}disconnectedCallback(){super.disconnectedCallback(),this.removeInfoPopover()}changeTheme(e){const{smartMappingState:i}=this,{layer:t,mapView:l}=i,{type:s}=this,o=(0,c.g)(i),d=(0,c.d)(i),y=(0,c.c)(o,"size"),h=(0,c.p)((0,c.g)(i),"reference-size"),f=(0,c.p)(o,"spike"),b="univariate-color-size"===o.authoringInfo?.type;if("color"!==s&&"color-age"!==s||!["color","color-age","color-size","color-age-size","color-size-age"].includes(d))if("size"!==s&&"size-age"!==s||!["size","size-age","color-size","color-age-size","color-size-age","type-size","type-size-age","relationship-size"].includes(d))"color-size"===s&&b&&(0,p.r)((0,g.c)(i,{theme:e.detail}),this.flowItemNode).then(t=>{(0,c.a4)(i,t.renderer),this.requestUpdate(),this.arcgisSmartMappingTileThemeChange.emit(e.detail)},e=>{this.arcgisSmartMappingTileError.emit(e)});else{const s=h,o="reference-size"===e.detail,m=!s&&o||s&&!o,g=f,b="spike"===e.detail,z=!g&&b||g&&!b;let v=u.d;["size-age","color-size-age","type-size-age"].includes(d)?v=u.e:m&&(v=u.d);const S={theme:e.detail};if(o&&(S.referenceSizeOptions={symbolStyle:"circle"}),b){const e="color-size"===d?"triangle-solid-fill-open-outline":"triangle-gradient-fill-open";S.spikeOptions={symbolStyle:e}}m&&(S.layer=t,S.mapView=l,S.fieldInfos=[{field:y?y.field:h?h.field:f.field}],S.noReuse=!0),z&&(S.layer=t,S.mapView=l,S.field=y?y.field:f?f.field:h.field,S.noReuse=!0),(0,p.r)(v(i,S),this.flowItemNode).then(async s=>{if(m||z)if(["type-size","relationship-size"].includes(d)){const{smartMappingState:e}=this,i=(0,c.g)(e);i.visualVariables=s.renderer.visualVariables,i.authoringInfo.visualVariables=s.renderer.authoringInfo.visualVariables,i.uniqueValueInfos.forEach(e=>{const i=(0,c.i)(e?.symbol)||new r.default("gray"),t=s.renderer.classBreakInfos[0].symbol.clone();"cim"===t.type?n.applyCIMSymbolColor(t,i,{layersToColor:"fill-and-outline"}):(0,c.y)(t,i),e.symbol=t}),i.defaultSymbol=void 0,i.defaultLabel=void 0,i.backgroundFillSymbol=void 0,(0,c.a4)(e,i)}else if("color-size"===d){const{smartMappingState:e}=this,{useFeatureReduction:i}=e,o=(0,c.g)(e),r=(0,c.c)(o,"color"),n=(0,c.p)(o,"color"),{renderer:p}=await a.createContinuousRenderer({layer:t,view:l,field:r.field,valueExpression:r.valueExpression??void 0,valueExpressionTitle:r.valueExpressionTitle??void 0,normalizationField:r.normalizationField??void 0,theme:n?.theme,colorScheme:(0,c.a2)(e),forBinning:i});if(s.renderer.visualVariables.push(r),p.authoringInfo?.visualVariables?.length){const e=(0,c.p)(p,"color");s.renderer.authoringInfo.visualVariables.push(e)}s.renderer.field=r.field,s.renderer.valueExpression=r.valueExpression,s.renderer.valueExpressionTitle=r.valueExpressionTitle,s.renderer.normalizationField=r.normalizationField,(0,c.a4)(e,s.renderer)}else(0,c.a4)(i,s.renderer);else if(["size","size-age"].includes(d))(0,c.a4)(i,s.renderer);else{const e=(0,c.g)(i);e.visualVariables=(0,c.H)(e,"size")||[],e.visualVariables.push((0,c.c)(s.renderer,"size")),e.authoringInfo.visualVariables=(0,c.P)(e,"size")||[],e.authoringInfo.visualVariables.push((0,c.p)(s.renderer,"size")),(0,c.a4)(i)}this.requestUpdate(),this.arcgisSmartMappingTileThemeChange.emit(e.detail)},async e=>{this.arcgisSmartMappingTileError.emit(e)})}else{let t=m.a;["color-age","color-age-size"].includes(d)&&(t=m.b),(0,p.r)(t(i,{theme:e.detail}),this.flowItemNode).then(t=>{if(["color-size","color-age-size","color-size-age"].includes(d)){const e=(0,c.g)(i);e.visualVariables=(0,c.H)(e,"color")||[],e.visualVariables.push((0,c.c)(t.renderer,"color")),e.authoringInfo.visualVariables=(0,c.P)(e,"color")||[],e.authoringInfo.visualVariables.push((0,c.p)(t.renderer,"color")),(0,c.a4)(i)}else(0,c.a4)(i,t.renderer);this.requestUpdate(),this.arcgisSmartMappingTileThemeChange.emit(e.detail)},e=>{this.arcgisSmartMappingTileError.emit(e)})}}divRefHandler(e){e&&(this.tileNode=e)}buttonRefHandler(e){e&&(this.infoIconNode=e)}handleInfoClick(){const{tileInfo:e,flowItemNode:i,smartMappingState:t}=this,{title:l,moreInfo:o,helpId:r}=e;this.removeOtherInfoPopovers(),this.infoPopoverNode&&document.body.contains(this.infoPopoverNode)?this.removeInfoPopover():(this.infoPopoverNode=(0,f.dN)(s.qy`<arcgis-map-config-smart-mapping-info-popover .smartMappingState=${t} .props=${{title:l,moreInfo:o,helpId:r,flowItemNode:i}} .referenceElement=${this.infoIconNode} @arcgisSmartMappingInfoPopoverClose=${e=>{e.stopPropagation(),this.removeInfoPopover(),setTimeout(()=>this.infoIconNode.setFocus(),200)}}></arcgis-map-config-smart-mapping-info-popover>`),document.body.appendChild(this.infoPopoverNode),this.infoPopoverNode.open=!0,this.infoPopoverNode.reposition(),setTimeout(()=>this.infoPopoverNode?.setFocus(),100))}removeInfoPopover(){this.infoPopoverNode?.remove(),this.infoPopoverNode=void 0}removeOtherInfoPopovers(){document.querySelectorAll("arcgis-map-config-smart-mapping-info-popover").forEach(e=>{e.referenceElement!==this.infoIconNode&&e.remove()})}checkboxChangeHandler(e){const{selected:i}=this;e.preventDefault();const t=e.target;t.checked?(this.removeInfoPopover(),i?this.arcgisSmartMappingTileOptions.emit():this.arcgisSmartMappingTileSelect.emit()):t.checked=!0}handleClick(e){const{selected:i}=this;e.preventDefault(),"CALCITE-CHECKBOX"!==e?.target?.nodeName&&(e.stopPropagation(),this.removeInfoPopover(),i?this.arcgisSmartMappingTileOptions.emit():this.arcgisSmartMappingTileSelect.emit())}handleKeyUp(e){const{selected:i}=this;(" "===e.key||"Enter"===e.key)&&(e.preventDefault(),e.stopPropagation(),this.removeInfoPopover(),i?this.arcgisSmartMappingTileOptions.emit():this.arcgisSmartMappingTileSelect.emit())}handleKeyDown(e){" "===e.key&&(e.stopPropagation(),e.preventDefault())}render(){const{selected:e,tileInfo:i,tileType:t,smartMappingState:o}=this,{title:r,imageFile:a}=i,{isRTL:n,_messages:c}=o,p={tile:!0,"tile-selected":e},d={"tile-image":"assist"!==t,"tile-image-selected":("gallery"===t||"raster-gallery"===t)&&e,rtl:n},m={"tile-check":!0,rtl:n},u=`${r} ${e?"assist"===t?c.tile.customize:c.tile.styleOptions:c.tile.selectStyle}`;return this.el.setAttribute("aria-label",u),this.el.setAttribute("aria-selected",String(e)),this.el.setAttribute("role","button"),this.el.setAttribute("tabindex","0"),s.qy`<div class=${(0,f.CP)(p)} tabindex=0 @click=${this.handleClick} @keyup=${this.handleKeyUp} @keydown=${this.handleKeyDown} ${(0,h.K)(this.divRefHandler)}><div class=${(0,f.CP)(d)} style=${(0,f.zl)({backgroundImage:`url(${(0,l.g)("./assets/map-config-smart-mapping/map-config-smart-mapping-thumbnails/")}${a})`})} aria-hidden=true></div>${["gallery","raster-gallery","assist"].includes(t)&&s.qy`<div class=${(0,f.CP)(m)} aria-label aria-hidden=true><calcite-checkbox name=style-tile-check-name .checked=${e} tabindex=-1 @calciteCheckboxChange=${this.checkboxChangeHandler}></calcite-checkbox></div>`||""}${this.renderTileLink()}</div>`}renderTheme(){const{smartMappingState:e}=this,{layer:i}=e,{tileType:t,type:l}=this;if("imagery"===i.type||"imagery-tile"===i.type||"assist"===t)return"";const r=(0,c.d)(e);if("chart-size"===r||!["color","size","color-age","size-age","color-size"].includes(l)||!["color","size","color-age","size-age","color-size","color-age-size","color-size-age","type-size","type-size-age","relationship-size"].includes(r)||"gallery"===t&&["type-size","relationship-size","color-age-size","color-size-age","type-size-age"].includes(r))return"";const a=(0,c.g)(e),n="univariate-color-size"===a.authoringInfo?.type,p=(0,c.p)(a,"color"),d=(0,c.p)(a,"size"),m=(0,c.p)(a,"reference-size"),u=(0,c.p)(a,"spike");if("gallery"===t&&"color-size"===r&&!n)return"";const g=(0,c.c)(a,"color");if("gallery"===t&&"color"===r&&!g)return"";const y=(0,c.c)(a,"size");if("gallery"===t&&"size"===r&&!y&&!m&&!u)return"";const f="color-age"===l?"color":"size-age"===l?"size":"color-size"===l?"colorSize":l;return(0,o.D)("color"===f?p?.theme:d?.theme,s.qy`<arcgis-map-config-smart-mapping-theme-button .rendererSubtype=${f} button-version=minimal @arcgisSmartMappingThemeButtonBeforeOpen=${()=>(0,c.f)()} @arcgisSmartMappingThemeButtonChange=${this.changeTheme} ${(0,h.K)(this.themeButtonNode)}></arcgis-map-config-smart-mapping-theme-button>`)}renderTileLink(){const{selected:e,tileInfo:i,tileType:t,fields:l,smartMappingState:o,rasterPresetRendererName:r}=this,{title:a,subText:n}=i,{_messages:c}=o;return s.qy`<div class="style-link" .ariaLabel=${a}><div class=${"style-link-title "+("gallery"===t||"raster-gallery"===t&&!r?"info":"")}><div aria-hidden=true>${a}</div>${("gallery"===t||"raster-gallery"===t&&!r)&&s.qy`<calcite-button class="style-link-info" scale=s icon-start=information appearance=transparent kind=neutral @click=${e=>{e.stopPropagation(),this.handleInfoClick()}} .label=${c.tile.moreInfo} @keydown=${e=>{" "===e.key&&(e.stopPropagation(),e.preventDefault())}} ${(0,h.K)(this.buttonRefHandler)}></calcite-button>`||""}${"gallery"!==t&&n&&s.qy`<div class="style-link-sub-text">${"string"==typeof n?n:n.map(e=>s.qy`<div>${e}</div>`)}</div>`||""}${"assist"===t&&!!l?.length&&s.qy`<div class="style-link-sub-text">${`${c.tile.fields} ${l.toString().replace(",",", ")}`}</div>`||""}</div>${"assist"!==t&&(e||"gallery"!==t)&&this.renderTheme()||""}${(e||!["gallery","raster-gallery","assist"].includes(t))&&this.renderStyleOptions()||""}</div>`}renderStyleOptions(){const{tileType:e,smartMappingState:i}=this,{_messages:t}=i;return s.qy`<calcite-button appearance=outline-fill width=full scale=s .kind=${"assist"===e?"neutral":"brand"} .label=${"assist"===e?t.tile.customize:t.tile.styleOptions}>${"assist"===e?t.tile.customize:t.tile.styleOptions}</calcite-button>`}}(0,l.c)("arcgis-map-config-smart-mapping-tile",z)},11751:(e,i,t)=>{t.d(i,{a:()=>c,c:()=>p,g:()=>d});var l=t(5294),s=t(56451),o=t(42411),r=t(1225),a=(t(54312),t(44345),t(55448),t(52797),t(34031),t(63438),t(5933),t(89704),t(66228)),n=(t(31521),t(23054),t(5077),t(23795),t(17902),t(87420),t(30161),t(81734),t(83552),t(77462),t(49403),t(66617),t(10628),t(59640),t(64451),t(6176),t(10454),t(28973));t(94916),t(52554),t(2156),t(4038),t(49851),t(75054),t(15223),t(70169),t(29614),t(47207),t(70852),t(48103),t(39423),t(85681),t(18444),t(9767),t(38218),t(91914),t(86605),t(68196),t(440),t(46547),t(28927),t(6238),t(7299);async function c(e,i){const{layer:t,useFeatureReduction:l,mapImageSublayer:s,mapView:c}=e,p=t;i=i||{};const d=(0,r.d)(e),m=(0,r.a)(e,(0,r.g)(e)),u=i.fieldInfos?i.fieldInfos[0]:null,g=i.theme?i.theme:"high-to-low",y={layer:p,view:c,field:u.field,valueExpression:u.expression,valueExpressionTitle:u.expressionTitle,normalizationField:i.normalizationField,theme:g,legendOptions:i.legendOptions,colorOptions:{colorScheme:i.colorScheme||(0,r.a2)(e,g),isContinuous:!!(0,a.i)(i.isContinuous)&&i.isContinuous},symbolOptions:(0,r.n)(e)?void 0:{symbolStyle:i.symbolOptions||"caret"},symbols:i.symbols||void 0,minValue:i.min,maxValue:i.max,sizeOptimizationEnabled:!s&&"above-and-below"!==g&&(!!(0,a.i)(i.sizeOptimizationEnabled)&&i.sizeOptimizationEnabled),defaultSymbolEnabled:!1,forBinning:l};return await o.createContinuousRenderer(y).then(t=>{if(!i.noReuse&&["color","color-size","color-size-age"].includes(d)&&(0,n.s)(e,i)){const i=(0,r.c)((0,r.g)(e),"color"),l=(0,r.p)((0,r.g)(e),"color");i&&l&&g===l.univariateTheme&&(t.renderer.visualVariables=[i],m.sizeOutlineVisVar&&t.renderer.visualVariables.push(m.sizeOutlineVisVar),t.renderer.authoringInfo.visualVariables=[l],(0,r.Q)(e,t.renderer))}return(0,r.b)(m,t.renderer),t})}async function p(e,i){const{layer:t,useFeatureReduction:n,mapImageSublayer:c,mapView:p}=e,d=t;i=i||{};const m=(0,r.g)(e),u=(0,r.c)(m,"color");if(u&&i.fieldInfos?.[0]&&i.fieldInfos?.[0].field===u.field&&i.fieldInfos?.[0].expression===u.valueExpression&&i.normalizationField===u.normalizationField&&(delete i.fieldInfos,(0,r.O)(i)))return{renderer:m.clone()};const g=(0,r.a)(e,m),y=(0,r.c)(m,"size"),h=m.authoringInfo,f=(0,r.p)(m,"size"),b=i.fieldInfos?i.fieldInfos[0]:u?{field:u.field,expression:u.valueExpression,expressionTitle:u.valueExpressionTitle,simpleFieldType:(0,r.K)(e,u.field)?.simpleFieldType||r.J.NUMBER}:{field:m.field,expression:m.valueExpression,expressionTitle:m.valueExpressionTitle,simpleFieldType:(0,r.K)(e,m.field)?.simpleFieldType||r.J.NUMBER},z=null===i.normalizationField?void 0:i.normalizationField?i.normalizationField:u?u.normalizationField:m.normalizationField,v=i.theme?i.theme:h?h.univariateTheme:"high-to-low",S="above-and-below"===h.univariateTheme,I="above-and-below"===v,x="custom"===h.univariateSymbolStyle;"custom"===i.symbolStyle&&!i.symbols&&(1===m.classBreakInfos.length?i.symbols=[l.clone(m.classBreakInfos[0].symbol),l.clone(m.classBreakInfos[0].symbol)]:i.symbols=[l.clone(m.classBreakInfos[0].symbol),l.clone(m.classBreakInfos[1].symbol)]);const k=(0,a.i)(i.isContinuous)?i.isContinuous:!(!S&&I)&&!!u,T="picture-marker"===m.classBreakInfos[0].symbol?.type||"picture-marker"===m.classBreakInfos[2===m.classBreakInfos.length?1:0].symbol?.type,$=!S&&I||T&&k?"caret":I?i.symbolStyle?["single","custom"].includes(i.symbolStyle)?void 0:i.symbolStyle:i.symbols?void 0:"custom"!==h.univariateSymbolStyle?h.univariateSymbolStyle:void 0:void 0,F=!(T&&k)&&("custom"===i.symbolStyle||!i.symbolStyle&&x);let B=I&&!(0,r.n)(e)?{symbolStyle:$,symbols:$?void 0:2===i.symbols?.length?{below:i.symbols[0],above:i.symbols[1]}:1===i.symbols?.length?void 0:F?{below:m.classBreakInfos[0].symbol,above:m.classBreakInfos[2===m.classBreakInfos.length?1:0].symbol}:void 0}:void 0;!B?.symbolStyle&&!B?.symbols&&(B=void 0),k&&B?.symbols&&((0,r.y)(B?.symbols.below,new s.default([0,0,0,.5])),(0,r.y)(B?.symbols.above,new s.default([0,0,0,.5])));const w=m.defaultSymbol,C=m.defaultLabel,E=m.backgroundFillSymbol;let V=!1;v===h?.univariateTheme&&(0,a.i)(y.minSize)&&(V=y.minSize.stops?y.minSize.stops[0].size>y.maxSize.stops[0].size:y.minSize>y.maxSize);let M=!1;(null===i.normalizationField||i.normalizationField||i.fieldInfos?.[0])&&(M=!0);const P=I&&!S||!I&&S,O=i.discardMinMax?void 0:(0,a.i)(i.min)?i.min:M?void 0:f?f.minSliderValue:void 0,_=i.discardMinMax?void 0:(0,a.i)(i.max)?i.max:M?void 0:f?f.maxSliderValue:void 0,D="below"===h.univariateTheme,R="below"===v,N=R&&!D||!R&&D,A=i.colorScheme||!P&&(0,r.a2)(e,v),q={layer:d,view:p,field:b.field,valueExpression:b.expression,valueExpressionTitle:b.expressionTitle,theme:v,legendOptions:i.legendOptions||y.legendOptions,colorOptions:{colorScheme:A,isContinuous:k},symbolOptions:B,normalizationField:z,minValue:O,maxValue:_,sizeOptimizationEnabled:!c&&"above-and-below"!==v&&((0,a.i)(i.sizeOptimizationEnabled)?i.sizeOptimizationEnabled:!!g.sizeAutoVisVar),defaultSymbolEnabled:(0,a.i)(i.defaultSymbolEnabled)?i.defaultSymbolEnabled:!!m.defaultSymbol,forBinning:n};return await o.createContinuousRenderer(q).then(e=>{if(i.discardMinMax){const i=(0,r.c)(m,"color"),t=(0,r.c)(e.renderer,"color");i?.stops.forEach((e,i)=>e.value=t?.stops[i].value);const l=(0,r.c)(m,"size"),s=(0,r.c)(e.renderer,"size");"above-and-below"===h.univariateTheme?l.stops?.forEach((e,i)=>{s.stops&&(e.value=s.stops[i].value)}):(l.minDataValue=s.minDataValue,l.maxDataValue=s.maxDataValue)}if((0,r.b)(g,e.renderer),I){const t=(0,r.i)(e.renderer.classBreakInfos[0].symbol),o=e.renderer.classBreakInfos[1]?(0,r.i)(e.renderer.classBreakInfos[1].symbol):t;if(!$)if(1===i.symbols?.length&&1===e.renderer.classBreakInfos.length)e.renderer.classBreakInfos[0].symbol=i.symbols[0];else if(2===i.symbols?.length&&1===e.renderer.classBreakInfos.length){const i=l.clone(m.classBreakInfos[0].symbol);e.renderer.classBreakInfos[0].symbol=i}else if("single"===i.symbolStyle&&2===e.renderer.classBreakInfos.length){const i=l.clone(m.classBreakInfos[0].symbol);e.renderer.classBreakInfos[0].symbol=i.clone(),(0,r.y)(i,(0,r.i)(e.renderer.classBreakInfos[1].symbol)),e.renderer.classBreakInfos[1].symbol=i,e.renderer.authoringInfo.univariateSymbolStyle=void 0}else{let i=l.clone(m.classBreakInfos[0].symbol);e.renderer.classBreakInfos[0].symbol=i,e.renderer.classBreakInfos[1]&&(i=m.classBreakInfos[1]?l.clone(m.classBreakInfos[1].symbol):l.clone(m.classBreakInfos[0].symbol),e.renderer.classBreakInfos[1].symbol=i)}const a=(0,r.c)(e.renderer,"color");if(a){const i=new s.default([0,0,0,.5]);(0,r.y)(e.renderer.classBreakInfos[0].symbol,i),e.renderer.classBreakInfos[1]&&(0,r.y)(e.renderer.classBreakInfos[1].symbol,i)}else u||a?((0,r.y)(e.renderer.classBreakInfos[0].symbol,t),e.renderer.classBreakInfos[1]&&(0,r.y)(e.renderer.classBreakInfos[1].symbol,o)):((0,r.y)(e.renderer.classBreakInfos[0].symbol,(0,r.i)(m.classBreakInfos[0].symbol)),(0,r.y)(e.renderer.classBreakInfos[1].symbol,(0,r.i)(m.classBreakInfos[1].symbol)))}else I||(1===i.symbols?.length?e.renderer.classBreakInfos[0].symbol=i.symbols[0]:1===m.classBreakInfos?.length&&(e.renderer.classBreakInfos[0].symbol=m.classBreakInfos[0].symbol));if(S&&I&&!M){const i=(0,r.c)(e.renderer,"size"),t=(0,r.c)(e.renderer,"color");i.stops=l.clone(y.stops),t&&t.stops.forEach((e,i)=>{e.value=y.stops[i].value}),2===e.renderer.classBreakInfos.length&&(e.renderer.classBreakInfos[0].maxValue=y.stops[2].value,e.renderer.classBreakInfos[1].minValue=y.stops[2].value)}if(N&&A&&u){const i=(0,r.c)(e.renderer,"color"),t=u.stops.length-1;i.stops.forEach((e,i)=>{e.color=u.stops[t-i].color})}if(w&&(e.renderer.defaultSymbol=w,e.renderer.defaultLabel=C),e.renderer.backgroundFillSymbol=E||void 0,V){const i=(0,r.c)(e.renderer,"size"),t=i.minSize;i.minSize=i.maxSize,i.maxSize=t}return e})}function d(e){const{mapView:i}=e,t=(0,r.g)(e),l=(0,r.c)(t,"color"),s=(0,r.c)(t,"size"),o=i.scale,{minSize:a,maxSize:n}=s;let c;if(s.stops)c=l.stops.map((e,i)=>{const t=s.stops[i];return{color:e.color,size:t.size,value:t.value}});else{const e=l.stops.length-1;if("number"==typeof a)c=l.stops.map((i,t)=>({color:i.color,value:i.value,size:0===t?a:t===e?n:null}));else{let i,t;const r=a.stops.length-1;o>a.stops[r].value?(i=a.stops[r].size,t=n.stops[r].size):a.stops.forEach((e,l)=>{o<=e.value&&(i=e.size,t=n.stops[l].size)});const p=s.minDataValue,d=s.maxDataValue,m=(d-p)/4;c=l.stops.map((l,s)=>({color:l.color,value:0===s?p:s===e?d:p+s*m,size:0===s?i:s===e?t:void 0}))}}return c}},46317:(e,i,t)=>{t.d(i,{D:()=>r});var l=t(85282),s=t(34670),o=t(42466);const r=(0,s.u$)(class extends s.WL{constructor(){super(...arguments),this.key=l.s6}render(e,i){return this.key=e,i}update(e,[i,t]){return i!==this.key&&((0,o.mY)(e),this.key=i),t}})},75518:(e,i,t)=>{let l,s;function o(e){e.loading=!1}async function r(e,i){return function(e){e.loading=!0,s=!1,l&&clearTimeout(l),l=setTimeout(()=>{o(e),s=!0},6e4)}(i),await e.then(e=>{if(o(i),s)throw new Error("timeout");return e}).catch(e=>{throw o(i),e})}t.d(i,{r:()=>r})}}]);