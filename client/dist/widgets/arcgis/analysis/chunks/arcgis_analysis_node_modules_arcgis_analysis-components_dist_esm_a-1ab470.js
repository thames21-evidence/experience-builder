/*! For license information please see arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_a-1ab470.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_a-1ab470"],{25735:(e,t,i)=>{i.r(t),i.d(t,{analysis_areal_unit_input:()=>T,analysis_attribute_expression:()=>n.D,analysis_boolean_input:()=>n.A,analysis_calculation_expression:()=>z,analysis_calculation_expression_modal:()=>q,analysis_chip_group:()=>n.a,analysis_data_file_input:()=>n.b,analysis_dataset_input:()=>n.p,analysis_dataset_input_popover:()=>Q,analysis_date_input:()=>n.c,analysis_expression_group:()=>n.C,analysis_field_input:()=>n.d,analysis_field_select:()=>n.e,analysis_folder_input:()=>K,analysis_geoenrichment_databrowser:()=>n.g,analysis_geoenrichment_input:()=>n.f,analysis_help_popover:()=>n.v,analysis_item_input:()=>n.h,analysis_layer_input:()=>n.l,analysis_layer_input_popover:()=>se,analysis_linear_unit_input:()=>n.i,analysis_multiple_input:()=>n.q,analysis_number_input:()=>n.o,analysis_output_name:()=>no,analysis_query_builder:()=>n.z,analysis_query_input:()=>n.x,analysis_query_modal:()=>n.y,analysis_query_target_select:()=>n.B,analysis_sketch:()=>fo,analysis_spatial_expression:()=>n.E,analysis_spatial_reference_input:()=>n.t,analysis_spatial_reference_selector:()=>n.s,analysis_string_input:()=>n.j,analysis_summary_fields:()=>n.m,analysis_summary_fields_popover:()=>ko,analysis_time_unit_input:()=>xo,analysis_traffic_time_input:()=>n.k,analysis_tree:()=>n.r,analysis_unsupported_input:()=>n.w,analysis_workflow_select:()=>n.u,analysis_workflow_select_popover:()=>Co,variable_multi_popover:()=>n.V,variable_node_input_popover:()=>n.n});var s=i(44471),r=i(44188),n=i(13830),a=i(91685),o=i(47937),l=i(84121),c=i(32513),h=i(588),u=i(44345),d=(i(55448),i(18423),i(91813),i(21255),i(54312),i(34031)),p=i(9316),f=i(13661),m=i(43786),g=(i(61320),i(64016),i(56451),i(6550)),y=(i(2924),i(5258),i(52373),i(33752)),v=(i(53976),i(49403),i(77462),i(23054),i(73645),i(82567),i(28927)),b=i(35970),_=i(5933),w=(i(57295),i(72349),i(89962),i(97703),i(71802));i(74791),i(43284),i(22741),i(76451),i(52095);function k(e,t,i,s){for(var r=-1,n=null==e?0:e.length;++r<n;){var a=e[r];t(s,a,i(a),e)}return s}e=i.hmd(e);var x,C=(x=function(e,t){return e&&(0,o.f)(e,t,l.x)},function(e,t){if(null==e)return e;if(!(0,l.g)(e))return x(e,t);for(var i=e.length,s=-1,r=Object(e);++s<i&&!1!==t(r[s],s,r););return e});function E(e,t,i,s){return C(e,function(e,r,n){t(s,e,i(e),n)}),s}var S,L,I=(S=function(e,t,i){e[i?0:1].push(t)},L=function(){return[[],[]]},function(e,t){var i=(0,l.p)(e)?k:E,s=L?L():{};return i(e,S,(0,o.h)(t),s)});const T=class{constructor(e){(0,s.r)(this,e),this.analysisArealUnitInputChange=(0,s.c)(this,"analysisArealUnitInputChange",7),this.analysisHelpClick=(0,s.c)(this,"analysisHelpClick",7),this.required=!1,this.readOnly=!1,this.hideHelp=!1,this.isValid=!0,this.areaChange=e=>{const t=e?.target,i=t?.value,s=this.value?.units;void 0===t||Array.isArray(i)||"multi"===(e?.target).selectionMode||(void 0!==i&&"number"==typeof i?(this.value={units:s,area:i},this.onUnitChoiceListChange()):this.value=void 0,this.analysisArealUnitInputChange.emit())},this.unitChanged=e=>{const t=e?.target;this.value={area:this.value?.area,units:t?.value},this.validate(),void 0!==this.value?.area&&this.analysisArealUnitInputChange.emit()}}onUnitChoiceListChange(){const e=this.value?.units;void 0===this.unitChoiceList||void 0!==e&&this.unitChoiceList.includes(e)||(this.value={area:this.value?.area,units:this.unitChoiceList[0]})}async componentWillLoad(){({strings:this.strings,dir:this.dir}=await(0,r.u)(this.hostElement,(0,s.a)("."))),this.onUnitChoiceListChange()}async checkValidity(){return await this.validate(),Promise.resolve(this.isValid)}async validate(){const e=this.hostElement.shadowRoot?.querySelector("analysis-number-input"),t=await(e?.checkValidity())??!1,i=!this.required||void 0!==this.value?.units&&this.unitChoiceList?.includes(this.value?.units);return this.isValid=t&&i,Promise.resolve()}render(){return void 0!==this.value?.units&&(void 0===this.unitChoiceList||this.unitChoiceList.includes(this.value?.units)||(this.unitChoiceList=[...this.value?.units,...this.unitChoiceList])),(0,s.h)(s.H,{key:"87929343642a471d77a7ae7d78a2659e6ae04df5"},(0,s.h)(n.F,{key:"1b739f3f35744d62476a5380c5778a03ae81be6d",label:this.label,required:this.required,value:this.value,minimum:this.minimum,maximum:this.maximum,excludeMinValue:this.excludeMinValue,excludeMaxValue:this.excludeMaxValue,placeholderText:this.placeholderText,strings:this.strings,dir:this.dir,unitChoiceList:this.unitChoiceList,hideHelp:this.hideHelp??!0,amountChoiceList:this.areaChoiceList,amountChange:this.areaChange,unitChanged:this.unitChanged,analysisHelpClick:this.analysisHelpClick,choiceListLabels:this.choiceListLabels,scale:r.g.Scale,readOnly:this.readOnly}))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,s.d)(this)}static get watchers(){return{unitChoiceList:["onUnitChoiceListChange"]}}};T.style=":root{--analysis-quarter-spacing:0.25rem;--analysis-half-spacing:0.5rem;--analysis-three-quarter-spacing:0.75rem;--analysis-full-spacing:1rem;--analysis-component-default-width:100%;--analysis-ui-border-input:var(--calcite-color-border-2);--analysis-label-font-size:var(--calcite-font-size--2);--analysis-popover-content-min-height-s:7.5rem;--analysis-popover-content-min-height-m:8.75rem;--analysis-popover-content-max-height:60vh;--analysis-popover-content-height:45vh;--analysis-popover-z-index:calc(var(--calcite-z-index-overlay) - 1)}:host{display:flex;flex-direction:column;--calcite-color-border-input:var(--analysis-ui-border-input)}.controls-container{display:flex;column-gap:5%}.control{flex:1 1 0}.text{cursor:pointer;padding-bottom:var(--analysis-quarter-spacing);margin-block-start:0;margin-block-end:0}.unit-select{margin-bottom:var(--analysis-half-spacing)}";const O="calcite-list",A="code-block",j="code-block-background",P="code-block-tooltip-text",M="error-message",z=class{constructor(e){(0,s.r)(this,e),this.analysisCalculationExpressionChange=(0,s.c)(this,"analysisCalculationExpressionChange",7),this.analysisHelpClick=(0,s.c)(this,"analysisHelpClick",7),this.required=!1,this.skipFeatureLayerValidate=!1,this.readOnly=!1,this.showModal=!1,this.handleAnalysisCalculationExpressionModalAdd=e=>{const{calcExpression:t,expressionType:i}=e.detail;this.error=void 0,this.value={calcExpression:t,expressionType:i},this.analysisCalculationExpressionChange.emit(this.value),this.validate()},this.handleAnalysisCalculationExpressionModalDismissed=()=>{this.showModal=!1,this.validate()},this.handleDeleteExpression=()=>{this.value=void 0,this.analysisCalculationExpressionChange.emit(this.value),this.validate()},this.renderValueState=()=>(0,r.P)(this.value)&&(0,s.h)(s.F,null,(0,s.h)("calcite-list",{class:O,scale:r.g.Scale,ref:e=>this.calciteListRef=e,label:"",interactionMode:"static"},(0,s.h)("calcite-list-item",{label:this.strings.expression,value:"expression",iconStart:"brackets-curly",disabled:this.readOnly},(0,s.h)("calcite-action",{ref:e=>this.deleteExpressionActionRef=e,slot:"actions-end",icon:"trash",text:this.strings.deleteExpression,onClick:this.handleDeleteExpression},(0,s.h)("calcite-tooltip",{referenceElement:this.deleteExpressionActionRef,ref:e=>this.deleteExpressionTooltipRef=e,overlayPositioning:"fixed",placement:"top"},this.strings.deleteExpression)),(0,s.h)("calcite-action",{ref:e=>this.editExpressionActionRef=e,slot:"actions-end",icon:"pencil",text:this.strings.editExpression,onClick:()=>this.showModal=!0},(0,s.h)("calcite-tooltip",{referenceElement:this.editExpressionActionRef,ref:e=>this.editExpressionTooltipRef=e,overlayPositioning:"fixed",placement:"top"},this.strings.editExpression)),(0,s.h)("div",{slot:"content-bottom",class:A},(0,s.h)("div",{class:j},(0,s.h)("code",{tabindex:"0"},this.value.calcExpression))))),(0,s.h)("calcite-tooltip",{referenceElement:this.calciteListRef,ref:e=>this.codeBlockTooltipRef=e,overlayPositioning:"fixed",placement:"right"},(0,s.h)("div",{class:P},this.value.calcExpression))),this.renderInitialState=()=>(0,s.h)("calcite-list",{label:"",class:O,scale:r.g.Scale},(0,s.h)("calcite-list-item",{ref:e=>{e&&(this.createExpressionListItemRef=e)},onKeyDown:e=>{" "!==e.key&&"Enter"!==e.key||(this.showModal=!0)},disabled:this.readOnly||void 0!==this.disabledTooltip,label:this.strings.expression,value:"expression",iconStart:"brackets-curly",iconEnd:"plus",onClick:()=>this.showModal=!0}),!this.readOnly&&(0,s.h)("calcite-tooltip",{referenceElement:this.createExpressionListItemRef,ref:e=>this.createExpressionTooltipRef=e,overlayPositioning:"fixed",placement:"top"},this.disabledTooltip??this.strings.createExpression))}async layerChange(e){void 0!==e&&await this.loadLayer(e)}async componentWillLoad(){({strings:this.strings}=await(0,r.u)(this.hostElement,(0,s.a)("."))),this.layerChange(this.layer)}componentDidRender(){(0,r.P)(this.editExpressionTooltipRef)&&(0,r.P)(this.editExpressionActionRef)&&(this.editExpressionTooltipRef.referenceElement=this.editExpressionActionRef),(0,r.P)(this.deleteExpressionTooltipRef)&&(0,r.P)(this.deleteExpressionActionRef)&&(this.deleteExpressionTooltipRef.referenceElement=this.deleteExpressionActionRef),(0,r.P)(this.createExpressionTooltipRef)&&(0,r.P)(this.createExpressionListItemRef)&&(this.createExpressionTooltipRef.referenceElement=this.createExpressionListItemRef),(0,r.P)(this.codeBlockTooltipRef)&&(0,r.P)(this.calciteListRef)&&(this.codeBlockTooltipRef.referenceElement=this.calciteListRef)}disconnectedCallback(){this.abortController?.abort(),this.showModal=!1}async checkValidity(){if(!1===this.validate())return Promise.resolve(!1);let e=!0;if(!1===this.skipFeatureLayerValidate&&!0===this.layer?.sourceJSON?.supportsValidateSQL&&void 0!==this.value)try{const t=new FormData;t.append("sql",this.value.calcExpression),t.append("sqlType","expression"),t.append("f","json");const i=await(0,r.a6)(`${this.layer?.url}/${this.layer?.layerId}/validateSQL`,{body:t,timeout:0,method:"post",responseType:"json"});this.error=!1===i.data.isValidSQL?this.strings.validationFailedInvalidSQL:void 0,e=void 0===this.error}catch(t){this.error=this.strings.validationFailedInvalidSQL,e=!1}return Promise.resolve(e)}validate(){let e;return(0,r.y)(this.value)&&this.required?(e=!1,this.error=this.strings.isRequired):(0,r.P)(this.error)||(0,r.P)(this.validationParams)&&"error"===this.validationParams.type?e=!1:(e=!0,this.error=void 0),e}async loadLayer(e){this.abortController?.abort(),this.abortController=new AbortController;try{await(e?.load({signal:this.abortController.signal}))}catch(e){this.error=this.strings.layerLoadError}}render(){let e;return e=(0,r.P)(this.value)?this.renderValueState():this.renderInitialState(),(0,s.h)(s.H,{key:"ad1dd1afa21c9e8bbfdea946651091996e58698b"},(0,s.h)("calcite-label",{key:"0facb031a38856c590b690171aee36d39511fc79",scale:r.g.Scale},(0,r.P)(this.label)&&(0,s.h)("analysis-label",{key:"84b8ea41ede42aa1352a6d3fb01e599bad4124a9",label:this.label,required:this.required,onAnalysisLabelHelpActionClick:()=>this.analysisHelpClick.emit()}),e),!1===this.readOnly&&(0,s.h)("calcite-input-message",{key:"ecf7f9eb1b440cdf51189930676f0aca253d856c",class:M,hidden:(0,r.y)(this.validationParams)&&(0,r.y)(this.error),icon:"exclamationMarkTriangle",status:r.r.INVALID,scale:r.g.Scale},this.validationParams?.message??this.error),(0,s.h)("arcgis-tunnel",{key:"f8dc9946b1535ae61ea46fcc347f27ebd1670665",reference:this.hostElement},(0,s.h)("analysis-calculation-expression-modal",{key:"d5e9019906e1f2e6e6baa2a91d48df601cc0f248",open:this.showModal,fieldName:this.fieldName,editorOptions:this.editorOptions,whereClause:this.whereClause,value:this.value,layer:this.layer,editorLanguage:this.value?.expressionType??this.language,onAnalysisCalculationExpressionModalAdd:this.handleAnalysisCalculationExpressionModalAdd,onAnalysisCalculationExpressionModalDismissed:this.handleAnalysisCalculationExpressionModalDismissed})))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,s.d)(this)}static get watchers(){return{layer:["layerChange"]}}};z.style=":root{--analysis-quarter-spacing:0.25rem;--analysis-half-spacing:0.5rem;--analysis-three-quarter-spacing:0.75rem;--analysis-full-spacing:1rem;--analysis-component-default-width:100%;--analysis-ui-border-input:var(--calcite-color-border-2);--analysis-label-font-size:var(--calcite-font-size--2);--analysis-popover-content-min-height-s:7.5rem;--analysis-popover-content-min-height-m:8.75rem;--analysis-popover-content-max-height:60vh;--analysis-popover-content-height:45vh;--analysis-popover-z-index:calc(var(--calcite-z-index-overlay) - 1)}.calcite-list{border:1px solid var(--calcite-color-border-1)}.code-block{padding:var(--calcite-spacing-md);padding-top:0;display:flex;flex-direction:column}.code-block code{flex-grow:1;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;text-overflow:ellipsis;overflow:hidden;line-height:20px;-webkit-line-clamp:4;max-height:calc(var(line-height) * var(-webkit-line-clamp));white-space:normal;word-break:break-word}.code-block-background{background:var(--calcite-color-background);border:1px solid var(--calcite-color-border-3);padding:var(--calcite-spacing-md)}.code-block-tooltip-text{word-wrap:break-word}.error-message{margin-top:0}";const B="dialog-height",F="where-clause-code-block",D="choose-language-label",R="language-select-description",V="language-select-header",N="language-select-text",H="validation-notice",$="sql-editor",q=class{constructor(e){(0,s.r)(this,e),this.analysisCalculationExpressionModalAdd=(0,s.c)(this,"analysisCalculationExpressionModalAdd",7),this.analysisCalculationExpressionModalDismissed=(0,s.c)(this,"analysisCalculationExpressionModalDismissed",7),this.view="editor-select",this.validate=()=>{let e=!0;return(0,r.y)(this.expression)?(this.error=this.strings.valueCannotBeBlank,e=!1):void 0!==this.editorErrorMessage?(this.error=this.strings.badSyntaxSQLExpression,e=!1):this.error=void 0,e},this.closeModal=()=>{this.analysisCalculationExpressionModalDismissed.emit()},this.handleAddClick=()=>{this.validate()&&(this.analysisCalculationExpressionModalAdd.emit({calcExpression:this.expression,expressionType:this.editorLanguage}),this.closeModal())},this.handleArcgisSQLScriptChange=e=>{this.expression=e.detail},this.handleArcgisSQLDiagnosticsChange=e=>{const t=e.detail[0]?.message;this.editorErrorMessage=t},this.renderSQLEditor=()=>{let e=(0,r.a7)(this.layer)?void 0:this.layer;if(void 0!==e){const t=e?.fields?.filter(e=>!1===(this.editorOptions?.hiddenFieldTypes??[]).includes(e.type));e={title:e?.title,fields:t}}return(0,s.h)("arcgis-sql-expression-editor",{class:$,profile:{id:"field-calculation",definitions:{$layer:e},hiddenApiItems:this.editorOptions?.hiddenFunctions??[]},script:this.expression,onArcgisScriptChange:this.handleArcgisSQLScriptChange,onArcgisDiagnosticsChange:this.handleArcgisSQLDiagnosticsChange})},this.renderArcadeEditor=()=>(0,s.h)("arcgis-arcade-editor",{class:"editor",script:this.expression,onArcgisScriptChange:e=>{this.expression=e.detail}}),this.renderModalFooterButtons=()=>(0,s.h)(s.F,null,(0,s.h)("calcite-button",{slot:"footer-end",appearance:"outline",onClick:this.closeModal},this.strings.cancel),"editor-select"===this.view&&(0,s.h)(s.F,null,(0,s.h)("calcite-button",{onClick:()=>this.view="expression-editor",slot:"footer-end"},this.strings.next)),"expression-editor"===this.view&&(0,s.h)(s.F,null,(0,s.h)("calcite-button",{slot:"footer-end",onClick:this.handleAddClick},this.strings.add)))}async componentWillLoad(){({strings:this.strings}=await(0,r.u)(this.hostElement,(0,s.a)("."))),(0,r.P)(this.layer?.definitionExpression)&&(0,r.y)(this.whereClause)&&(this.whereClause=this.layer?.definitionExpression),(0,r.P)(this.value)&&(this.expression=this.value.calcExpression,this.view="expression-editor"),(0,r.P)(this.editorLanguage)&&(this.view="expression-editor"),this.editorLanguage=(0,r.y)(this.editorLanguage)?"sql":this.editorLanguage}renderEditorSelector(){return(0,s.h)(s.F,null,(0,s.h)("calcite-label",{class:D},this.strings.chooseLanguage),(0,s.h)("calcite-tile-group",{label:this.strings.languageSelect,layout:"horizontal",class:"language-select",selectionMode:"single-persist"},(0,s.h)("calcite-tile",{class:"language-select-tile",selected:"sql"===this.editorLanguage,onCalciteTileSelect:()=>this.editorLanguage="sql"},(0,s.h)("div",{slot:"content-bottom",class:R},(0,s.h)("calcite-label",{class:V},this.strings.sql),(0,s.h)("calcite-label",null,this.strings.idealFor,(0,s.h)("ul",{class:N},(0,s.h)("li",null,this.strings.tileSelectSqlUseCase1),(0,s.h)("li",null,this.strings.tileSelectSqlUseCase2),(0,s.h)("li",null,this.strings.tileSelectSqlUseCase3))))),(0,s.h)("calcite-tile",{class:"language-select-tile",selected:"arcade"===this.editorLanguage,onCalciteTileSelect:()=>this.editorLanguage="arcade"},(0,s.h)("div",{slot:"content-bottom",class:R},(0,s.h)("calcite-label",{class:V},this.strings.arcade),(0,s.h)("calcite-label",null,this.strings.idealFor,(0,s.h)("ul",{class:N},(0,s.h)("li",null,this.strings.tileSelectArcadeUseCase1),(0,s.h)("li",null,this.strings.tileSelectArcadeUseCase2)))))))}renderExpressionEditor(){const e=(0,r.a)(this.strings.fieldToCalculate,{fieldName:this.fieldName});return(0,s.h)(s.F,null,(0,r.P)(this.fieldName)&&(0,s.h)("calcite-label",null,e),(0,r.P)(this.whereClause)&&(0,s.h)("code",{class:F},"WHERE ",this.whereClause),"sql"===this.editorLanguage&&this.renderSQLEditor(),"arcade"===this.editorLanguage&&this.renderArcadeEditor())}render(){let e;void 0===this.layer?e=this.strings.noLayerProvidedNoFields:void 0!==this.layer&&!1===this.layer.loaded&&(e=this.strings.layerLoadFailNoFields);let t=this.strings.calculationExpressionEditor;return"expression-editor"===this.view&&(t="sql"===this.editorLanguage?this.strings.sqlExpressionEditor:this.strings.arcadeExpressionEditor),(0,s.h)(s.H,{key:"757755370040bdb05eaa136a8eebcd9ee8a5e82b"},(0,s.h)("calcite-dialog",{key:"53fc825cd7df3cda268bf8550aa5768fbd61c86d",class:"expression-editor"===this.view?B:"",modal:!0,escapeDisabled:!0,outsideCloseDisabled:!0,open:this.open,heading:t,onCalciteDialogClose:this.closeModal},"editor-select"===this.view&&this.renderEditorSelector(),"expression-editor"===this.view&&this.renderExpressionEditor(),this.renderModalFooterButtons(),"expression-editor"===this.view&&((0,r.P)(this.error)||(0,r.P)(e))&&(0,s.h)("calcite-notice",{key:"cad3688fee3bc92411659bffed2f1338224c0bda",class:H,scale:r.g.Scale,kind:(0,r.P)(this.error)?"danger":"warning",open:!0,slot:"footer-start"},(0,s.h)("div",{key:"89d5abd54046ee66bc3014e6e2f42a3dc8341217",slot:"message"},this.error??e))))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,s.d)(this)}};q.style=":root{--analysis-quarter-spacing:0.25rem;--analysis-half-spacing:0.5rem;--analysis-three-quarter-spacing:0.75rem;--analysis-full-spacing:1rem;--analysis-component-default-width:100%;--analysis-ui-border-input:var(--calcite-color-border-2);--analysis-label-font-size:var(--calcite-font-size--2);--analysis-popover-content-min-height-s:7.5rem;--analysis-popover-content-min-height-m:8.75rem;--analysis-popover-content-max-height:60vh;--analysis-popover-content-height:45vh;--analysis-popover-z-index:calc(var(--calcite-z-index-overlay) - 1)}.dialog-height{--calcite-dialog-size-y:min(900px, calc(80vh + 100px))}.where-clause-code-block{padding-bottom:var(--analysis-full-spacing)}.editor-selection-tile{width:50%}.language-select-description{display:flex;flex-direction:column;width:100%}.language-select-description .language-select-header{font-weight:500}.language-select-description .language-select-text{list-style:revert;margin:revert;padding:revert;color:var(--calcite-color-text-3);font-size:var(--calcite-font-size-sm)}.choose-language-label{padding-top:var(--analysis-half-spacing)}.validation-notice{margin-left:0}.sql-editor{--calcite-panel-content-space:0}";const U="analysis-popover",W="popover-content",G="js-app-flyout",J="list-item",Q=class{constructor(e){(0,s.r)(this,e),this.analysisDatasetInputPopoverClose=(0,s.c)(this,"analysisDatasetInputPopoverClose",7),this.analysisDatasetInputPopoverSelectionChange=(0,s.c)(this,"analysisDatasetInputPopoverSelectionChange",7),this.placement="auto",this.buildListItem=e=>(0,s.h)("calcite-list-item",{class:J,key:e.id,value:e.id,label:e.name,description:e.description,selected:void 0!==this.selectedDatasetIds&&this.selectedDatasetIds.includes(e.id)}),this.onListChange=()=>{const e=this.list?.selectedItems.map(e=>e.value);this.analysisDatasetInputPopoverSelectionChange.emit({selectedDatasetIds:e}),"multiple"!==this.selectionMode&&(this.open=!1)}}async componentWillLoad(){({strings:this.strings}=await(0,r.u)(this.hostElement,(0,s.a)(".")))}componentDidLoad(){setTimeout(()=>requestAnimationFrame(()=>this.popoverElement?.setFocus?.()),1),setTimeout(()=>{this.popoverElement?.reposition?.()},r.g.PopoverTimer)}async reposition(){await(this.popoverElement?.reposition?.())}render(){const e=this.popoverWidth??this.referenceElement?.getBoundingClientRect().width;return(0,s.h)(s.H,{key:"575f537d3bad3afa17160507c47896905485e162",class:`${U} ${G}`},(0,s.h)("calcite-popover",{key:"da557899127846915e4732c1bfd0869c6c776a17",ref:e=>{this.popoverElement=e},autoClose:!0,referenceElement:this.referenceElement??"analysis-dataset-input",placement:this.placement,open:this.open,closable:!0,heading:this.strings.heading,label:this.strings.heading,focusTrapDisabled:!0,onCalcitePopoverClose:()=>this.analysisDatasetInputPopoverClose.emit()},(0,s.h)("calcite-panel",{key:"802c491e3f3d19b89e61383b07dc47dc6f06288c",style:{width:void 0!==e?`${e}px`:void 0,maxWidth:r.g.MaxPopoverWidth}},(0,s.h)("calcite-list",{key:"b4c4720f77abae76a2829b6274a16cb0abe27e5d",class:W,label:"",selectionMode:this.selectionMode,onCalciteListChange:this.onListChange,filterEnabled:!0,ref:e=>{this.list=e}},this.analysisDatasets?.map(this.buildListItem)))))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,s.d)(this)}};Q.style=":root{--analysis-quarter-spacing:0.25rem;--analysis-half-spacing:0.5rem;--analysis-three-quarter-spacing:0.75rem;--analysis-full-spacing:1rem;--analysis-component-default-width:100%;--analysis-ui-border-input:var(--calcite-color-border-2);--analysis-label-font-size:var(--calcite-font-size--2);--analysis-popover-content-min-height-s:7.5rem;--analysis-popover-content-min-height-m:8.75rem;--analysis-popover-content-max-height:60vh;--analysis-popover-content-height:45vh;--analysis-popover-z-index:calc(var(--calcite-z-index-overlay) - 1)}:host{display:flex;--calcite-popover-z-index:var(--analysis-popover-z-index)}.popover-content{height:var(--analysis-popover-content-height)}.list-item{--calcite-font-size--1:var(--calcite-font-size--2)}";const K=class{constructor(e){(0,s.r)(this,e),this.analysisFolderInputChange=(0,s.c)(this,"analysisFolderInputChange",6),this.analysisHelpClick=(0,s.c)(this,"analysisHelpClick",7),this.hideHelp=!1,this.disabled=!1,this.validate=async()=>!0===await this.folderPicker.saveActiveFolder(),this.folderSelect=e=>{const t=e.detail.id;this.value=(t===this.user.username?"":t)??"",this.analysisFolderInputChange.emit(this.value)},this.setDefaultFolder=()=>{const e=this.folderPicker.folders.find(e=>e.id===this.value);this.folderPicker.folder=void 0!==e?e:{id:this.folderPicker.folders[0]?.id}},this.setRef=e=>{(0,r.P)(e)&&(this.folderPicker=e)}}async checkValidity(){return await this.validate()}render(){return(0,s.h)(s.H,{key:"e5ac607e27640aafc4d762503ff34cbc1c7c7771"},void 0!==this.label&&""!==this.label?(0,s.h)("analysis-label",{label:this.label,onAnalysisLabelHelpActionClick:()=>this.analysisHelpClick.emit(),hideHelp:this.hideHelp}):null,(0,s.h)("arcgis-folder-picker",{key:this.value,ref:this.setRef,api:4,user:this.user,disabled:this.disabled,portal:this.user.portal,scale:r.g.Scale,label:"",onArcgisFolderPickerLoad:this.setDefaultFolder,onArcgisFolderPickerChange:e=>this.folderSelect(e)}))}get hostElement(){return(0,s.d)(this)}};K.style=":root{--analysis-quarter-spacing:0.25rem;--analysis-half-spacing:0.5rem;--analysis-three-quarter-spacing:0.75rem;--analysis-full-spacing:1rem;--analysis-component-default-width:100%;--analysis-ui-border-input:var(--calcite-color-border-2);--analysis-label-font-size:var(--calcite-font-size--2);--analysis-popover-content-min-height-s:7.5rem;--analysis-popover-content-min-height-m:8.75rem;--analysis-popover-content-max-height:60vh;--analysis-popover-content-height:45vh;--analysis-popover-z-index:calc(var(--calcite-z-index-overlay) - 1)}:host{--calcite-color-border-input:var(--analysis-ui-border-input)}";const Y="analysis-popover",X="js-app-flyout",Z="popover-content",ee="half-margin",te="list-message",ie="layers-list",se=class{constructor(e){(0,s.r)(this,e),this.analysisLayerInputPopoverClose=(0,s.c)(this,"analysisLayerInputPopoverClose",7),this.analysisLayerInputPopoverSelectionChange=(0,s.c)(this,"analysisLayerInputPopoverSelectionChange",7),this.analysisLayerInputPopoverLayerBrowsed=(0,s.c)(this,"analysisLayerInputPopoverLayerBrowsed",7),this.analysisLayerInputPopoverConfirm=(0,s.c)(this,"analysisLayerInputPopoverConfirm",7),this.hideAddToMap=!1,this.hideModelVariableLayers=!1,this.analysisSessionLayers=[],this.hideBrowseButton=!1,this.showNoticeMessage=!1,this.placement="auto",this.itemBrowserFilter="",this.itemBrowserQ="",this.pointerDisabled=!1,this.noSearchedLayersMessageActive=!1,this.hasLivingAtlasGroup=!0,this.checkForMatchingLayer=()=>{this.calciteFilterSearchTerm=this.listElement?.filterText,this.noSearchedLayersMessageActive=0===this.listElement?.filteredItems?.length&&0!==this.listElement?.filterText.length},this.buildLayerListItem=e=>{let t=e;return(0,r.a8)(e)&&(t=(0,r.a9)(e)),(0,s.h)("calcite-list-item",{class:ie,key:e.id,value:e.id,label:(0,r.aa)(e),description:(0,r.a8)(e)?(0,r.Y)(t)?this.strings.table:this.strings[e.geometryType]:"",selected:void 0!==this.selectedIds&&this.selectedIds.includes(e.id),onClick:this.onListChange,"data-layer-title":e.title})},this.buildVariableListItem=e=>{const{id:t,isDerived:i,name:r,dataType:n,layer:a}=e,o=!0===i?"":void 0!==a&&"GPRecordSet"===n?this.strings.table:this.strings[a.geometryType];return(0,s.h)("calcite-list-item",{class:ie,key:t,value:t,label:r,description:o,selected:void 0!==this.selectedIds&&this.selectedIds.includes(t),onClick:this.onListChange,"data-layer-title":r})},this.openItemBrowser=()=>{this.itemBrowserElement?.remove(),this.itemBrowserElement=document.createElement("analysis-item-browser"),this.itemBrowserElement.header=this.strings.heading,this.itemBrowserElement.hideAddToMap=this.hideAddToMap,this.itemBrowserElement.filter=this.itemBrowserFilter,this.itemBrowserElement.q=this.itemBrowserQ,this.itemBrowserElement.allowedGeometries=this.itemBrowserAllowedGeometries,this.itemBrowserElement.layerFilterType=this.layerFilterType,this.itemBrowserElement.portal=this.portal,this.itemBrowserElement.bucketOptions=this.bucketOptions,this.itemBrowserElement.user=this.user,this.itemBrowserElement.viewIsSceneView=(0,a.v)(this.mapView),this.itemBrowserElement.selectionMode="multi"!==this.selectionMode?"single-sublayer":"multiple-sublayer",this.itemBrowserElement.addEventListener("analysisItemBrowserClose",this.closeModals),this.itemBrowserElement.addEventListener("analysisItemBrowserAddToMap",this.handleItemBrowserAddToMap),this.itemBrowserElement.addEventListener("analysisItemBrowserSelection",this.handleItemBrowserSelection),this.popoverElement.autoClose=!1,this.popoverElement.hidden=!0,document.body.appendChild(this.itemBrowserElement)},this.closeModals=()=>{this.popoverElement.autoClose=!0,this.popoverElement.hidden=!1,void 0!==this.itemBrowserElement&&(this.itemBrowserElement.removeEventListener("analysisItemBrowserClose",this.closeModals),this.itemBrowserElement.removeEventListener("analysisItemBrowserAddToMap",this.handleItemBrowserAddToMap),this.itemBrowserElement.removeEventListener("analysisItemBrowserSelection",this.handleItemBrowserSelection),this.itemBrowserElement.remove(),this.itemBrowserElement=void 0)},this.addLayersToMap=(e,t)=>{const i=I(t,e=>(0,r.Y)(e)),s=i[1].map(e=>(0,r.a8)(e)?(0,r.a9)(e):e);e?.addMany(s),e?.tables.addMany(i[0])},this.handleItemBrowserAddToMap=e=>{this.addLayersToMap(this.mapView.map,e.detail),this.analysisLayerInputPopoverLayerBrowsed.emit(e.detail),this.open=!1},this.handleItemBrowserSelection=e=>{this.analysisLayerInputPopoverLayerBrowsed.emit(e.detail),this.open=!1},this.onListChange=()=>{const e=this.listElement?.selectedItems;this.analysisLayerInputPopoverSelectionChange.emit(e?.map(e=>e.value)),"multi"!==this.selectionMode&&(this.open=!1)},this.onConfirm=()=>{const e=this.listElement?.selectedItems??[];this.analysisLayerInputPopoverConfirm.emit(e?.map(e=>e.value)),this.open=!1}}get bucketOptions(){const e=["my","favorites","group","org","all"];if(this.hasLivingAtlasGroup){const t=this.isImageryLayerBrowser()?"living atlas":"living atlas analysis";e.splice(4,0,t)}return e}isImageryLayerBrowser(){const e=Array.isArray(this.layerFilterType)?this.layerFilterType:[this.layerFilterType];return e?.map(e=>!!e&&e.indexOf("imagery")>-1).includes(!0)}async componentWillLoad(){({strings:this.strings,dir:this.dir}=await(0,r.u)(this.hostElement,(0,s.a)("."))),this.hasLivingAtlasGroup=!this.portal.isPortal||(this.isImageryLayerBrowser()?await(0,r.ab)(this.portal):await(0,r.ac)(this.portal))}componentDidLoad(){this.focusTimeoutId=setTimeout(async()=>{await(this.listElement?.setFocus?.())},r.g.PopoverTimer),setTimeout(()=>{this.popoverElement?.reposition?.()},r.g.PopoverTimer)}disconnectedCallback(){void 0!==this.focusTimeoutId&&clearTimeout(this.focusTimeoutId),this.closeModals()}async reposition(){await(this.popoverElement?.reposition?.())}render(){const e=this.popoverWidth??this.referenceElement?.getBoundingClientRect().width,t=(0,r.a)(this.strings.noMatchesFound,{searchTerm:this.calciteFilterSearchTerm??""}),i=0===this.analysisSessionLayers?.length&&0===this.mapLayers?.length&&(void 0===this.modelVariables||0===this.modelVariables?.length),n=!0===this.hideBrowseButton;return(0,s.h)(s.H,{key:"afd052f97b17538f280c32e3889fff10e5d9401d",dir:this.dir,class:`${Y} ${X}`},(0,s.h)("calcite-popover",{key:"acd68a272603ffe2cb06283c24259d3324554dd4",ref:e=>{this.popoverElement=e},autoClose:!0,closable:!0,heading:this.heading??this.strings.heading,referenceElement:this.referenceElement??"analysis-layer-input",placement:this.placement,open:this.open,label:"",focusTrapDisabled:!0,pointerDisabled:this.pointerDisabled,onCalcitePopoverClose:()=>this.analysisLayerInputPopoverClose.emit()},(0,s.h)("calcite-panel",{key:"d265f6f4687c0b00f0cb396a071005a83e22e557",style:{maxHeight:void 0!==this.maxHeight?this.maxHeight-50+"px":void 0,width:void 0!==e?`${e}px`:void 0,maxWidth:r.g.MaxPopoverWidth}},(0,s.h)("calcite-list",{key:"34b267828e881e348614d7d7ed8c88cefddc7fd0",class:Z,label:"",selectionMode:"multi"===this.selectionMode?"multiple":"single",filterEnabled:!0,ref:e=>{this.listElement=e},onCalciteListFilter:this.checkForMatchingLayer},(0,s.h)("calcite-notice",{key:"3177ae497ab8ad48f8e3080d10a324e4419392a0",open:this.showNoticeMessage,class:this.showNoticeMessage?ee:"",kind:"warning",scale:r.g.Scale},(0,s.h)("div",{key:"ac1b31431075369f3717e891c1e9e1a66d8ff235",slot:"message"},Array.from(new Set(this.noticeMessage))?.map(e=>(0,s.h)("p",{innerHTML:e})))),this.noSearchedLayersMessageActive&&(0,s.h)("p",{key:"c5231260141f61f8478bef716019209ec80c6b77",class:te},t),i&&!1===this.noSearchedLayersMessageActive?(0,s.h)("p",{class:te},this.strings.noCompatibleLayers):(0,s.h)("div",null,(0,s.h)("calcite-list-item-group",{heading:this.strings.analysisSessionLayers,hidden:0===this.analysisSessionLayers?.length},(this.analysisSessionLayers??[]).map(e=>this.buildLayerListItem(e))),(this.modelVariables?.length??0)>0&&!1===this.hideModelVariableLayers&&(0,s.h)("calcite-list-item-group",{heading:this.strings.modelVariableLayers},(this.modelVariables??[]).map(e=>this.buildVariableListItem(e))),(0,s.h)("calcite-list-item-group",{heading:this.strings.mapLayers,hidden:0===this.mapLayers?.length},(this.mapLayers??[]).map(e=>this.buildLayerListItem(e))))),!n&&(0,s.h)("calcite-button",{key:"46318a262f1e45b50c1b5f300ececcc297210d36",slot:"footer-actions",appearance:"transparent",width:"full",onClick:this.openItemBrowser},this.strings.browseAnalysisLayers),n&&(0,s.h)(s.F,{key:"e5c052db7344a2773a35409a5e78f090ac10c7c6"},(0,s.h)("calcite-button",{key:"3b085426bce93a6dc895bc16a5013e88980796d7",slot:"footer-actions",appearance:"outline",width:"half",onClick:()=>this.analysisLayerInputPopoverClose.emit()},this.strings.cancel),(0,s.h)("calcite-button",{key:"4186978c0e9bb76b28dacfc22b2dfe314db11945",slot:"footer-actions",appearance:"solid",width:"half",onClick:this.onConfirm},this.strings.add)))))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,s.d)(this)}};function re(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}se.style=":root{--analysis-quarter-spacing:0.25rem;--analysis-half-spacing:0.5rem;--analysis-three-quarter-spacing:0.75rem;--analysis-full-spacing:1rem;--analysis-component-default-width:100%;--analysis-ui-border-input:var(--calcite-color-border-2);--analysis-label-font-size:var(--calcite-font-size--2);--analysis-popover-content-min-height-s:7.5rem;--analysis-popover-content-min-height-m:8.75rem;--analysis-popover-content-max-height:60vh;--analysis-popover-content-height:45vh;--analysis-popover-z-index:calc(var(--calcite-z-index-overlay) - 1)}:host{display:flex}.popover-content{height:var(--analysis-popover-content-height)}.fab{justify-content:center;padding:var(--analysis-half-spacing)}.half-margin{margin:var(--analysis-half-spacing)}.list-message{font-size:var(--calcite-font-size--2);background-color:var(--calcite-color-background);padding:var(--analysis-half-spacing);margin:0}.layers-list{--calcite-font-size--1:var(--calcite-font-size--2)}";var ne,ae={exports:{}};const oe=re(function(){if(ne)return ae.exports;function e(e,t,i,s){var r=function(e){return null==e||"number"==typeof e||"boolean"==typeof e}(s)?s:i(s),n=t.get(r);return typeof n>"u"&&(n=e.call(this,s),t.set(r,n)),n}function t(e,t,i){var s=Array.prototype.slice.call(arguments,3),r=i(s),n=t.get(r);return typeof n>"u"&&(n=e.apply(this,s),t.set(r,n)),n}function i(e,t,i,s,r){return i.bind(t,e,s,r)}function s(s,r){return i(s,this,1===s.length?e:t,r.cache.create(),r.serializer)}function r(){return JSON.stringify(arguments)}function n(){this.cache=Object.create(null)}ne=1,n.prototype.has=function(e){return e in this.cache},n.prototype.get=function(e){return this.cache[e]},n.prototype.set=function(e,t){this.cache[e]=t};var a={create:function(){return new n}};return ae.exports=function(e,t){var i=t&&t.cache?t.cache:a,n=t&&t.serializer?t.serializer:r;return(t&&t.strategy?t.strategy:s)(e,{cache:i,serializer:n})},ae.exports.strategies={variadic:function(e,s){return i(e,this,t,s.cache.create(),s.serializer)},monadic:function(t,s){return i(t,this,e,s.cache.create(),s.serializer)}},ae.exports}());var le="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g,ce="object"==typeof self&&self&&self.Object===Object&&self,he=le||ce||Function("return this")(),ue=he.Symbol,de=Object.prototype,pe=de.hasOwnProperty,fe=de.toString,me=ue?ue.toStringTag:void 0;var ge=Object.prototype.toString;var ye=ue?ue.toStringTag:void 0;function ve(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":ye&&ye in Object(e)?function(e){var t=pe.call(e,me),i=e[me];try{e[me]=void 0;var s=!0}catch{}var r=fe.call(e);return s&&(t?e[me]=i:delete e[me]),r}(e):function(e){return ge.call(e)}(e)}function be(e){return null!=e&&"object"==typeof e}function _e(e){return"symbol"==typeof e||be(e)&&"[object Symbol]"==ve(e)}function we(e,t){for(var i=-1,s=null==e?0:e.length,r=Array(s);++i<s;)r[i]=t(e[i],i,e);return r}var ke=Array.isArray,xe=ue?ue.prototype:void 0,Ce=xe?xe.toString:void 0;function Ee(e){if("string"==typeof e)return e;if(ke(e))return we(e,Ee)+"";if(_e(e))return Ce?Ce.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Se(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Le(e){return e}function Ie(e){if(!Se(e))return!1;var t=ve(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var Te,Oe=he["__core-js_shared__"],Ae=(Te=/[^.]+$/.exec(Oe&&Oe.keys&&Oe.keys.IE_PROTO||""))?"Symbol(src)_1."+Te:"";var je=Function.prototype.toString;function Pe(e){if(null!=e){try{return je.call(e)}catch{}try{return e+""}catch{}}return""}var Me=/^\[object .+?Constructor\]$/,ze=Function.prototype,Be=Object.prototype,Fe=ze.toString,De=Be.hasOwnProperty,Re=RegExp("^"+Fe.call(De).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ve(e){return!(!Se(e)||function(e){return!!Ae&&Ae in e}(e))&&(Ie(e)?Re:Me).test(Pe(e))}function Ne(e,t){var i=function(e,t){return e?.[t]}(e,t);return Ve(i)?i:void 0}var He=Ne(he,"WeakMap");function $e(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}var qe=Date.now;function Ue(e){return function(){return e}}var We=function(){try{var e=Ne(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Ge=We?function(e,t){return We(e,"toString",{configurable:!0,enumerable:!1,value:Ue(t),writable:!0})}:Le,Je=function(e){var t=0,i=0;return function(){var s=qe(),r=16-(s-i);if(i=s,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(Ge);function Qe(e){return e!=e}function Ke(e,t){return!!(null==e?0:e.length)&&function(e,t,i){return t==t?function(e,t,i){for(var s=i-1,r=e.length;++s<r;)if(e[s]===t)return s;return-1}(e,t,i):function(e,t,i){for(var s=e.length,r=i+-1;++r<s;)if(t(e[r],r,e))return r;return-1}(e,Qe,i)}(e,t,0)>-1}var Ye=/^(?:0|[1-9]\d*)$/;function Xe(e,t){var i=typeof e;return!!(t=t??9007199254740991)&&("number"==i||"symbol"!=i&&Ye.test(e))&&e>-1&&e%1==0&&e<t}function Ze(e,t,i){"__proto__"==t&&We?We(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function et(e,t){return e===t||e!=e&&t!=t}var tt=Object.prototype.hasOwnProperty;function it(e,t,i){var s=e[t];(!tt.call(e,t)||!et(s,i)||void 0===i&&!(t in e))&&Ze(e,t,i)}function st(e,t,i,s){var r=!i;i||(i={});for(var n=-1,a=t.length;++n<a;){var o=t[n],l=s?s(i[o],e[o],o,i,e):void 0;void 0===l&&(l=e[o]),r?Ze(i,o,l):it(i,o,l)}return i}var rt=Math.max;function nt(e,t,i){return t=rt(void 0===t?e.length-1:t,0),function(){for(var s=arguments,r=-1,n=rt(s.length-t,0),a=Array(n);++r<n;)a[r]=s[t+r];r=-1;for(var o=Array(t+1);++r<t;)o[r]=s[r];return o[t]=i(a),$e(e,this,o)}}function at(e,t){return Je(nt(e,t,Le),e+"")}function ot(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function lt(e){return null!=e&&ot(e.length)&&!Ie(e)}function ct(e){return at(function(t,i){var s=-1,r=i.length,n=r>1?i[r-1]:void 0,a=r>2?i[2]:void 0;for(n=e.length>3&&"function"==typeof n?(r--,n):void 0,a&&function(e,t,i){if(!Se(i))return!1;var s=typeof t;return!!("number"==s?lt(i)&&Xe(t,i.length):"string"==s&&t in i)&&et(i[t],e)}(i[0],i[1],a)&&(n=r<3?void 0:n,r=1),t=Object(t);++s<r;){var o=i[s];o&&e(t,o,s,n)}return t})}var ht=Object.prototype;function ut(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ht)}function dt(e){return be(e)&&"[object Arguments]"==ve(e)}var pt=Object.prototype,ft=pt.hasOwnProperty,mt=pt.propertyIsEnumerable,gt=dt(function(){return arguments}())?dt:function(e){return be(e)&&ft.call(e,"callee")&&!mt.call(e,"callee")};var yt="object"==typeof exports&&exports&&!exports.nodeType&&exports,vt=yt&&e&&!e.nodeType&&e,bt=vt&&vt.exports===yt?he.Buffer:void 0,_t=(bt?bt.isBuffer:void 0)||function(){return!1},wt={};function kt(e){return function(t){return e(t)}}wt["[object Float32Array]"]=wt["[object Float64Array]"]=wt["[object Int8Array]"]=wt["[object Int16Array]"]=wt["[object Int32Array]"]=wt["[object Uint8Array]"]=wt["[object Uint8ClampedArray]"]=wt["[object Uint16Array]"]=wt["[object Uint32Array]"]=!0,wt["[object Arguments]"]=wt["[object Array]"]=wt["[object ArrayBuffer]"]=wt["[object Boolean]"]=wt["[object DataView]"]=wt["[object Date]"]=wt["[object Error]"]=wt["[object Function]"]=wt["[object Map]"]=wt["[object Number]"]=wt["[object Object]"]=wt["[object RegExp]"]=wt["[object Set]"]=wt["[object String]"]=wt["[object WeakMap]"]=!1;var xt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ct=xt&&e&&!e.nodeType&&e,Et=Ct&&Ct.exports===xt&&le.process,St=function(){try{return Ct&&Ct.require&&Ct.require("util").types||Et&&Et.binding&&Et.binding("util")}catch{}}(),Lt=St&&St.isTypedArray,It=Lt?kt(Lt):function(e){return be(e)&&ot(e.length)&&!!wt[ve(e)]},Tt=Object.prototype.hasOwnProperty;function Ot(e,t){var i=ke(e),s=!i&&gt(e),r=!i&&!s&&_t(e),n=!i&&!s&&!r&&It(e),a=i||s||r||n,o=a?function(e,t){for(var i=-1,s=Array(e);++i<e;)s[i]=t(i);return s}(e.length,String):[],l=o.length;for(var c in e)(t||Tt.call(e,c))&&(!a||!("length"==c||r&&("offset"==c||"parent"==c)||n&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Xe(c,l)))&&o.push(c);return o}function At(e,t){return function(i){return e(t(i))}}var jt=At(Object.keys,Object),Pt=Object.prototype.hasOwnProperty;function Mt(e){if(!ut(e))return jt(e);var t=[];for(var i in Object(e))Pt.call(e,i)&&"constructor"!=i&&t.push(i);return t}function zt(e){return lt(e)?Ot(e):Mt(e)}var Bt=Object.prototype.hasOwnProperty;ct(function(e,t){if(ut(t)||lt(t))st(t,zt(t),e);else for(var i in t)Bt.call(t,i)&&it(e,i,t[i])});var Ft=Object.prototype.hasOwnProperty;function Dt(e){if(!Se(e))return function(e){var t=[];if(null!=e)for(var i in Object(e))t.push(i);return t}(e);var t=ut(e),i=[];for(var s in e)"constructor"==s&&(t||!Ft.call(e,s))||i.push(s);return i}function Rt(e){return lt(e)?Ot(e,!0):Dt(e)}ct(function(e,t,i,s){st(t,Rt(t),e,s)});var Vt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Nt=/^\w*$/;function Ht(e,t){if(ke(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!_e(e))||(Nt.test(e)||!Vt.test(e)||null!=t&&e in Object(t))}var $t=Ne(Object,"create");var qt=Object.prototype.hasOwnProperty;var Ut=Object.prototype.hasOwnProperty;function Wt(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var s=e[t];this.set(s[0],s[1])}}function Gt(e,t){for(var i=e.length;i--;)if(et(e[i][0],t))return i;return-1}Wt.prototype.clear=function(){this.__data__=$t?$t(null):{},this.size=0},Wt.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Wt.prototype.get=function(e){var t=this.__data__;if($t){var i=t[e];return"__lodash_hash_undefined__"===i?void 0:i}return qt.call(t,e)?t[e]:void 0},Wt.prototype.has=function(e){var t=this.__data__;return $t?void 0!==t[e]:Ut.call(t,e)},Wt.prototype.set=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=$t&&void 0===t?"__lodash_hash_undefined__":t,this};var Jt=Array.prototype.splice;function Qt(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var s=e[t];this.set(s[0],s[1])}}Qt.prototype.clear=function(){this.__data__=[],this.size=0},Qt.prototype.delete=function(e){var t=this.__data__,i=Gt(t,e);return!(i<0)&&(i==t.length-1?t.pop():Jt.call(t,i,1),--this.size,!0)},Qt.prototype.get=function(e){var t=this.__data__,i=Gt(t,e);return i<0?void 0:t[i][1]},Qt.prototype.has=function(e){return Gt(this.__data__,e)>-1},Qt.prototype.set=function(e,t){var i=this.__data__,s=Gt(i,e);return s<0?(++this.size,i.push([e,t])):i[s][1]=t,this};var Kt=Ne(he,"Map");function Yt(e,t){var i=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?i["string"==typeof t?"string":"hash"]:i.map}function Xt(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var s=e[t];this.set(s[0],s[1])}}Xt.prototype.clear=function(){this.size=0,this.__data__={hash:new Wt,map:new(Kt||Qt),string:new Wt}},Xt.prototype.delete=function(e){var t=Yt(this,e).delete(e);return this.size-=t?1:0,t},Xt.prototype.get=function(e){return Yt(this,e).get(e)},Xt.prototype.has=function(e){return Yt(this,e).has(e)},Xt.prototype.set=function(e,t){var i=Yt(this,e),s=i.size;return i.set(e,t),this.size+=i.size==s?0:1,this};function Zt(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var i=function(){var s=arguments,r=t?t.apply(this,s):s[0],n=i.cache;if(n.has(r))return n.get(r);var a=e.apply(this,s);return i.cache=n.set(r,a)||n,a};return i.cache=new(Zt.Cache||Xt),i}Zt.Cache=Xt;var ei=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ti=/\\(\\)?/g,ii=function(e){var t=Zt(e,function(e){return 500===i.size&&i.clear(),e}),i=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ei,function(e,i,s,r){t.push(s?r.replace(ti,"$1"):i||e)}),t});function si(e,t){return ke(e)?e:Ht(e,t)?[e]:ii(function(e){return null==e?"":Ee(e)}(e))}function ri(e){if("string"==typeof e||_e(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ni(e,t){for(var i=0,s=(t=si(t,e)).length;null!=e&&i<s;)e=e[ri(t[i++])];return i&&i==s?e:void 0}function ai(e,t,i){var s=null==e?void 0:ni(e,t);return void 0===s?i:s}function oi(e,t){for(var i=-1,s=t.length,r=e.length;++i<s;)e[r+i]=t[i];return e}var li=ue?ue.isConcatSpreadable:void 0;function ci(e){return ke(e)||gt(e)||!!(li&&e&&e[li])}function hi(e,t,i,s,r){var n=-1,a=e.length;for(i||(i=ci),r||(r=[]);++n<a;){var o=e[n];i(o)?oi(r,o):s||(r[r.length]=o)}return r}function ui(e){return(null==e?0:e.length)?hi(e):[]}function di(e){return Je(nt(e,void 0,ui),e+"")}var pi=At(Object.getPrototypeOf,Object),fi=Function.prototype,mi=Object.prototype,gi=fi.toString,yi=mi.hasOwnProperty,vi=gi.call(Object);function bi(e){if(!be(e)||"[object Object]"!=ve(e))return!1;var t=pi(e);if(null===t)return!0;var i=yi.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&gi.call(i)==vi}at(function(e,t){try{return $e(e,void 0,t)}catch(e){return function(e){if(!be(e))return!1;var t=ve(e);return"[object Error]"==t||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!bi(e)}(e)?e:new Error(e)}});function _i(e){var t=this.__data__=new Qt(e);this.size=t.size}function wi(){return[]}_i.prototype.clear=function(){this.__data__=new Qt,this.size=0},_i.prototype.delete=function(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i},_i.prototype.get=function(e){return this.__data__.get(e)},_i.prototype.has=function(e){return this.__data__.has(e)},_i.prototype.set=function(e,t){var i=this.__data__;if(i instanceof Qt){var s=i.__data__;if(!Kt||s.length<199)return s.push([e,t]),this.size=++i.size,this;i=this.__data__=new Xt(s)}return i.set(e,t),this.size=i.size,this},"object"==typeof exports&&exports&&!exports.nodeType&&exports&&e&&e.nodeType;var ki=Object.prototype.propertyIsEnumerable,xi=Object.getOwnPropertySymbols,Ci=xi?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var i=-1,s=null==e?0:e.length,r=0,n=[];++i<s;){var a=e[i];t(a,i,e)&&(n[r++]=a)}return n}(xi(e),function(t){return ki.call(e,t)}))}:wi,Ei=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)oi(t,Ci(e)),e=pi(e);return t}:wi;function Si(e,t,i){var s=t(e);return ke(e)?s:oi(s,i(e))}function Li(e){return Si(e,zt,Ci)}function Ii(e){return Si(e,Rt,Ei)}var Ti=Ne(he,"DataView"),Oi=Ne(he,"Promise"),Ai=Ne(he,"Set"),ji="[object Map]",Pi="[object Promise]",Mi="[object Set]",zi="[object WeakMap]",Bi="[object DataView]",Fi=Pe(Ti),Di=Pe(Kt),Ri=Pe(Oi),Vi=Pe(Ai),Ni=Pe(He),Hi=ve;(Ti&&Hi(new Ti(new ArrayBuffer(1)))!=Bi||Kt&&Hi(new Kt)!=ji||Oi&&Hi(Oi.resolve())!=Pi||Ai&&Hi(new Ai)!=Mi||He&&Hi(new He)!=zi)&&(Hi=function(e){var t=ve(e),i="[object Object]"==t?e.constructor:void 0,s=i?Pe(i):"";if(s)switch(s){case Fi:return Bi;case Di:return ji;case Ri:return Pi;case Vi:return Mi;case Ni:return zi}return t});var $i=Object.prototype.hasOwnProperty;var qi=he.Uint8Array;function Ui(e){var t=new e.constructor(e.byteLength);return new qi(t).set(new qi(e)),t}var Wi=/\w*$/;var Gi=ue?ue.prototype:void 0,Ji=Gi?Gi.valueOf:void 0;function Qi(e,t,i){var s=e.constructor;switch(t){case"[object ArrayBuffer]":return Ui(e);case"[object Boolean]":case"[object Date]":return new s(+e);case"[object DataView]":return function(e){var t=Ui(e.buffer);return new e.constructor(t,e.byteOffset,e.byteLength)}(e);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e){var t=Ui(e.buffer);return new e.constructor(t,e.byteOffset,e.length)}(e);case"[object Map]":case"[object Set]":return new s;case"[object Number]":case"[object String]":return new s(e);case"[object RegExp]":return function(e){var t=new e.constructor(e.source,Wi.exec(e));return t.lastIndex=e.lastIndex,t}(e);case"[object Symbol]":return function(e){return Ji?Object(Ji.call(e)):{}}(e)}}var Ki=St&&St.isMap,Yi=Ki?kt(Ki):function(e){return be(e)&&"[object Map]"==Hi(e)};var Xi=St&&St.isSet,Zi=Xi?kt(Xi):function(e){return be(e)&&"[object Set]"==Hi(e)},es="[object Arguments]",ts="[object Function]",is="[object Object]",ss={};function rs(e,t,i,s,r,n){var a;if(i&&(a=r?i(e,s,r,n):i(e)),void 0!==a)return a;if(!Se(e))return e;var o=ke(e);if(o)a=function(e){var t=e.length,i=new e.constructor(t);return t&&"string"==typeof e[0]&&$i.call(e,"index")&&(i.index=e.index,i.input=e.input),i}(e);else{var l=Hi(e),c=l==ts||"[object GeneratorFunction]"==l;if(_t(e))return function(e){return e.slice()}(e);if(l==is||l==es||c&&!r)a={};else{if(!ss[l])return r?e:{};a=Qi(e,l)}}n||(n=new _i);var h=n.get(e);if(h)return h;n.set(e,a),Zi(e)?e.forEach(function(s){a.add(rs(s,t,i,s,e,n))}):Yi(e)&&e.forEach(function(s,r){a.set(r,rs(s,t,i,r,e,n))});var u=o?void 0:Ii(e);return function(e,t){for(var i=-1,s=null==e?0:e.length;++i<s&&!1!==t(e[i],i,e););}(u||e,function(s,r){u&&(s=e[r=s]),it(a,r,rs(s,t,i,r,e,n))}),a}ss[es]=ss["[object Array]"]=ss["[object ArrayBuffer]"]=ss["[object DataView]"]=ss["[object Boolean]"]=ss["[object Date]"]=ss["[object Float32Array]"]=ss["[object Float64Array]"]=ss["[object Int8Array]"]=ss["[object Int16Array]"]=ss["[object Int32Array]"]=ss["[object Map]"]=ss["[object Number]"]=ss[is]=ss["[object RegExp]"]=ss["[object Set]"]=ss["[object String]"]=ss["[object Symbol]"]=ss["[object Uint8Array]"]=ss["[object Uint8ClampedArray]"]=ss["[object Uint16Array]"]=ss["[object Uint32Array]"]=!0,ss["[object Error]"]=ss[ts]=ss["[object WeakMap]"]=!1;function ns(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new Xt;++t<i;)this.add(e[t])}function as(e,t){for(var i=-1,s=null==e?0:e.length;++i<s;)if(t(e[i],i,e))return!0;return!1}function os(e,t){return e.has(t)}ns.prototype.add=ns.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},ns.prototype.has=function(e){return this.__data__.has(e)};function ls(e,t,i,s,r,n){var a=1&i,o=e.length,l=t.length;if(o!=l&&!(a&&l>o))return!1;var c=n.get(e),h=n.get(t);if(c&&h)return c==t&&h==e;var u=-1,d=!0,p=2&i?new ns:void 0;for(n.set(e,t),n.set(t,e);++u<o;){var f=e[u],m=t[u];if(s)var g=a?s(m,f,u,t,e,n):s(f,m,u,e,t,n);if(void 0!==g){if(g)continue;d=!1;break}if(p){if(!as(t,function(e,t){if(!os(p,t)&&(f===e||r(f,e,i,s,n)))return p.push(t)})){d=!1;break}}else if(f!==m&&!r(f,m,i,s,n)){d=!1;break}}return n.delete(e),n.delete(t),d}function cs(e){var t=-1,i=Array(e.size);return e.forEach(function(e,s){i[++t]=[s,e]}),i}function hs(e){var t=-1,i=Array(e.size);return e.forEach(function(e){i[++t]=e}),i}var us=ue?ue.prototype:void 0,ds=us?us.valueOf:void 0;var ps=Object.prototype.hasOwnProperty;var fs="[object Arguments]",ms="[object Array]",gs="[object Object]",ys=Object.prototype.hasOwnProperty;function vs(e,t,i,s,r,n){var a=ke(e),o=ke(t),l=a?ms:Hi(e),c=o?ms:Hi(t),h=(l=l==fs?gs:l)==gs,u=(c=c==fs?gs:c)==gs,d=l==c;if(d&&_t(e)){if(!_t(t))return!1;a=!0,h=!1}if(d&&!h)return n||(n=new _i),a||It(e)?ls(e,t,i,s,r,n):function(e,t,i,s,r,n,a){switch(i){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!n(new qi(e),new qi(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return et(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var o=cs;case"[object Set]":var l=1&s;if(o||(o=hs),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;s|=2,a.set(e,t);var h=ls(o(e),o(t),s,r,n,a);return a.delete(e),h;case"[object Symbol]":if(ds)return ds.call(e)==ds.call(t)}return!1}(e,t,l,i,s,r,n);if(!(1&i)){var p=h&&ys.call(e,"__wrapped__"),f=u&&ys.call(t,"__wrapped__");if(p||f){var m=p?e.value():e,g=f?t.value():t;return n||(n=new _i),r(m,g,i,s,n)}}return!!d&&(n||(n=new _i),function(e,t,i,s,r,n){var a=1&i,o=Li(e),l=o.length;if(l!=Li(t).length&&!a)return!1;for(var c=l;c--;){var h=o[c];if(!(a?h in t:ps.call(t,h)))return!1}var u=n.get(e),d=n.get(t);if(u&&d)return u==t&&d==e;var p=!0;n.set(e,t),n.set(t,e);for(var f=a;++c<l;){var m=e[h=o[c]],g=t[h];if(s)var y=a?s(g,m,h,t,e,n):s(m,g,h,e,t,n);if(!(void 0===y?m===g||r(m,g,i,s,n):y)){p=!1;break}f||(f="constructor"==h)}if(p&&!f){var v=e.constructor,b=t.constructor;v!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b)&&(p=!1)}return n.delete(e),n.delete(t),p}(e,t,i,s,r,n))}function bs(e,t,i,s,r){return e===t||(null==e||null==t||!be(e)&&!be(t)?e!=e&&t!=t:vs(e,t,i,s,bs,r))}function _s(e){return e==e&&!Se(e)}function ws(e,t){return function(i){return null!=i&&(i[e]===t&&(void 0!==t||e in Object(i)))}}function ks(e){var t=function(e){for(var t=zt(e),i=t.length;i--;){var s=t[i],r=e[s];t[i]=[s,r,_s(r)]}return t}(e);return 1==t.length&&t[0][2]?ws(t[0][0],t[0][1]):function(i){return i===e||function(e,t,i,s){var r=i.length,n=r;if(null==e)return!n;for(e=Object(e);r--;){var a=i[r];if(a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++r<n;){var o=(a=i[r])[0],l=e[o],c=a[1];if(a[2]){if(void 0===l&&!(o in e))return!1}else if(!bs(c,l,3,s,new _i))return!1}return!0}(i,0,t)}}function xs(e,t){return null!=e&&t in Object(e)}function Cs(e,t){return null!=e&&function(e,t,i){for(var s=-1,r=(t=si(t,e)).length,n=!1;++s<r;){var a=ri(t[s]);if(!(n=null!=e&&i(e,a)))break;e=e[a]}return n||++s!=r?n:!!(r=null==e?0:e.length)&&ot(r)&&Xe(a,r)&&(ke(e)||gt(e))}(e,t,xs)}function Es(e){return Ht(e)?function(e){return function(t){return t?.[e]}}(ri(e)):function(e){return function(t){return ni(t,e)}}(e)}function Ss(e){return"function"==typeof e?e:null==e?Le:"object"==typeof e?ke(e)?function(e,t){return Ht(e)&&_s(t)?ws(ri(e),t):function(i){var s=ai(i,e);return void 0===s&&s===t?Cs(i,e):bs(t,s,3)}}(e[0],e[1]):ks(e):Es(e)}function Ls(e){return be(e)&&lt(e)}function Is(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var Ts=Math.min;function Os(e){return Ls(e)?e:[]}function As(e,t){return t.length<2?e:ni(e,function(e,t,i){var s=-1,r=e.length;t<0&&(t=-t>r?0:r+t),(i=i>r?r:i)<0&&(i+=r),r=t>i?0:i-t>>>0,t>>>=0;for(var n=Array(r);++s<r;)n[s]=e[s+t];return n}(t,0,-1))}at(function(e){var t=Is(e),i=we(e,Os);return t===Is(i)?t=void 0:i.pop(),i.length&&i[0]===e[0]?function(e,t){for(var i=Ke,s=e[0].length,r=e.length,n=r,a=Array(r),o=1/0,l=[];n--;){var c=e[n];n&&t&&(c=we(c,kt(t))),o=Ts(c.length,o),a[n]=t||s>=120&&c.length>=120?new ns(n&&c):void 0}c=e[0];var h=-1,u=a[0];e:for(;++h<s&&l.length<o;){var d=c[h],p=t?t(d):d;if(d=0!==d?d:0,!(u?os(u,p):i(l,p))){for(n=r;--n;){var f=a[n];if(!(f?os(f,p):i(e[n],p)))continue e}u&&u.push(p),l.push(d)}}return l}(i,Ss(t)):[]});var js=Object.prototype.hasOwnProperty;function Ps(e,t){return null==(e=As(e,t=si(t,e)))||delete e[ri(Is(t))]}function Ms(e){return bi(e)?void 0:e}var zs=di(function(e,t){var i={};if(null==e)return i;var s=!1;t=we(t,function(t){return t=si(t,e),s||(s=t.length>1),t}),st(e,Ii(e),i),s&&(i=rs(i,7,Ms));for(var r=t.length;r--;)Ps(i,t[r]);return i});function Bs(e,t,i,s){if(!Se(e))return e;for(var r=-1,n=(t=si(t,e)).length,a=n-1,o=e;null!=o&&++r<n;){var l=ri(t[r]),c=i;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(r!=a){var h=o[l];void 0===(c=void 0)&&(c=Se(h)?h:Xe(t[r+1])?[]:{})}it(o,l,c),o=o[l]}return e}function Fs(e,t){return function(e,t,i){for(var s=-1,r=t.length,n={};++s<r;){var a=t[s],o=ni(e,a);i(o,a)&&Bs(n,si(a,e),o)}return n}(e,t,function(t,i){return Cs(e,i)})}di(function(e,t){return null==e?{}:Fs(e,t)});var Ds=Math.floor,Rs=Math.min;function Vs(e,t,i){return function(e,t,i){var s=0,r=null==e?0:e.length;if(0===r)return 0;for(var n=(t=i(t))!=t,a=null===t,o=_e(t),l=void 0===t;s<r;){var c=Ds((s+r)/2),h=i(e[c]),u=void 0!==h,d=null===h,p=h==h,f=_e(h);if(n)var m=p;else m=l?p&&u:a?p&&u&&!d:o?p&&u&&!d&&!f:!d&&!f&&h<t;m?s=c+1:r=c}return Rs(r,4294967294)}(e,t,Ss(i))}var Ns=Ai&&1/hs(new Ai([,-0]))[1]==1/0?function(e){return new Ai(e)}:function(){};at(function(e){var t=Is(e);return Ls(t)&&(t=void 0),function(e,t,i){var s=-1,r=Ke,n=e.length,a=!0,o=[],l=o;if(n>=200){var c=t?null:Ns(e);if(c)return hs(c);a=!1,r=os,l=new ns}else l=t?[]:o;e:for(;++s<n;){var h=e[s],u=t?t(h):h;if(h=0!==h?h:0,a&&u==u){for(var d=l.length;d--;)if(l[d]===u)continue e;t&&l.push(u),o.push(h)}else r(l,u,i)||(l!==o&&l.push(u),o.push(h))}return o}(hi(e,0,Ls,!0),Ss(t))});var Hs={exports:{}},$s={},qs={exports:{}},Us={};function Ws(){var e={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1};return e}var Gs=/javascript\s*\:/gim;Us.whiteList=Ws(),Us.getDefaultWhiteList=Ws,Us.onAttr=function(e,t,i){},Us.onIgnoreAttr=function(e,t,i){},Us.safeAttrValue=function(e,t){return Gs.test(t)?"":t};var Js={indexOf:function(e,t){var i,s;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,s=e.length;i<s;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var s,r;if(Array.prototype.forEach)return e.forEach(t,i);for(s=0,r=e.length;s<r;s++)t.call(i,e[s],s,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},Qs=Js;var Ks=function(e,t){";"!==(e=Qs.trimRight(e))[e.length-1]&&(e+=";");var i=e.length,s=!1,r=0,n=0,a="";function o(){if(!s){var i=Qs.trim(e.slice(r,n)),o=i.indexOf(":");if(-1!==o){var l=Qs.trim(i.slice(0,o)),c=Qs.trim(i.slice(o+1));if(l){var h=t(r,a.length,l,c,i);h&&(a+=h+"; ")}}}r=n+1}for(;n<i;n++){var l=e[n];if("/"===l&&"*"===e[n+1]){var c=e.indexOf("*/",n+2);if(-1===c)break;r=(n=c+1)+1,s=!1}else"("===l?s=!0:")"===l?s=!1:";"===l?s||o():"\n"===l&&o()}return Qs.trim(a)},Ys=Us,Xs=Ks;function Zs(e){return null==e}function er(e){(e=function(e){var t={};for(var i in e)t[i]=e[i];return t}(e||{})).whiteList=e.whiteList||Ys.whiteList,e.onAttr=e.onAttr||Ys.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Ys.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Ys.safeAttrValue,this.options=e}er.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,i=t.whiteList,s=t.onAttr,r=t.onIgnoreAttr,n=t.safeAttrValue;return Xs(e,function(e,t,a,o,l){var c=i[a],h=!1;if(!0===c?h=c:"function"==typeof c?h=c(o):c instanceof RegExp&&(h=c.test(o)),!0!==h&&(h=!1),o=n(a,o)){var u,d={position:t,sourcePosition:e,source:l,isWhite:h};if(h)return Zs(u=s(a,o,d))?a+":"+o:u;if(!Zs(u=r(a,o,d)))return u}})};var tr=er;!function(e,t){var i=Us,s=tr;for(var r in(t=e.exports=function(e,t){return new s(t).process(e)}).FilterCSS=s,i)t[r]=i[r]}(qs,qs.exports);var ir=qs.exports,sr={indexOf:function(e,t){var i,s;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,s=e.length;i<s;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var s,r;if(Array.prototype.forEach)return e.forEach(t,i);for(s=0,r=e.length;s<r;s++)t.call(i,e[s],s,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1}},rr=ir.FilterCSS,nr=ir.getDefaultWhiteList,ar=sr;function or(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var lr=new rr;function cr(e){return e.replace(hr,"&lt;").replace(ur,"&gt;")}var hr=/</g,ur=/>/g,dr=/"/g,pr=/&quot;/g,fr=/&#([a-zA-Z0-9]*);?/gim,mr=/&colon;?/gim,gr=/&newline;?/gim,yr=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,vr=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,br=/u\s*r\s*l\s*\(.*/gi;function _r(e){return e.replace(dr,"&quot;")}function wr(e){return e.replace(pr,'"')}function kr(e){return e.replace(fr,function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))})}function xr(e){return e.replace(mr,":").replace(gr," ")}function Cr(e){for(var t="",i=0,s=e.length;i<s;i++)t+=e.charCodeAt(i)<32?" ":e.charAt(i);return ar.trim(t)}function Er(e){return e=Cr(e=xr(e=kr(e=wr(e))))}function Sr(e){return e=cr(e=_r(e))}$s.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},$s.getDefaultWhiteList=or,$s.onTag=function(e,t,i){},$s.onIgnoreTag=function(e,t,i){},$s.onTagAttr=function(e,t,i){},$s.onIgnoreTagAttr=function(e,t,i){},$s.safeAttrValue=function(e,t,i,s){if(i=Er(i),"href"===t||"src"===t){if("#"===(i=ar.trim(i)))return"#";if("http://"!==i.substr(0,7)&&"https://"!==i.substr(0,8)&&"mailto:"!==i.substr(0,7)&&"tel:"!==i.substr(0,4)&&"data:image/"!==i.substr(0,11)&&"ftp://"!==i.substr(0,6)&&"./"!==i.substr(0,2)&&"../"!==i.substr(0,3)&&"#"!==i[0]&&"/"!==i[0])return""}else if("background"===t){if(yr.lastIndex=0,yr.test(i))return""}else if("style"===t){if(vr.lastIndex=0,vr.test(i)||(br.lastIndex=0,br.test(i)&&(yr.lastIndex=0,yr.test(i))))return"";!1!==s&&(i=(s=s||lr).process(i))}return i=Sr(i)},$s.escapeHtml=cr,$s.escapeQuote=_r,$s.unescapeQuote=wr,$s.escapeHtmlEntities=kr,$s.escapeDangerHtml5Entities=xr,$s.clearNonPrintableCharacter=Cr,$s.friendlyAttrValue=Er,$s.escapeAttrValue=Sr,$s.onIgnoreTagStripAll=function(){return""},$s.StripTagBody=function(e,t){"function"!=typeof t&&(t=function(){});var i=!Array.isArray(e),s=[],r=!1;return{onIgnoreTag:function(n,a,o){if(function(t){return!!i||-1!==ar.indexOf(e,t)}(n)){if(o.isClosing){var l="[/removed]",c=o.position+10;return s.push([!1!==r?r:o.position,c]),r=!1,l}return r||(r=o.position),"[removed]"}return t(n,a,o)},remove:function(e){var t="",i=0;return ar.forEach(s,function(s){t+=e.slice(i,s[0]),i=s[1]}),t+=e.slice(i)}}},$s.stripCommentTag=function(e){for(var t="",i=0;i<e.length;){var s=e.indexOf("\x3c!--",i);if(-1===s){t+=e.slice(i);break}t+=e.slice(i,s);var r=e.indexOf("--\x3e",s);if(-1===r)break;i=r+3}return t},$s.stripBlankChar=function(e){var t=e.split("");return(t=t.filter(function(e){var t=e.charCodeAt(0);return 127!==t&&(!(t<=31)||(10===t||13===t))})).join("")},$s.cssFilter=lr,$s.getDefaultCSSWhiteList=nr;var Lr={},Ir=sr;function Tr(e){var t,i=Ir.spaceIndex(e);return t=-1===i?e.slice(1,-1):e.slice(1,i+1),"/"===(t=Ir.trim(t).toLowerCase()).slice(0,1)&&(t=t.slice(1)),"/"===t.slice(-1)&&(t=t.slice(0,-1)),t}function Or(e){return"</"===e.slice(0,2)}var Ar=/[^a-zA-Z0-9\\_:.-]/gim;function jr(e,t){for(;t<e.length;t++){var i=e[t];if(" "!==i)return"="===i?t:-1}}function Pr(e,t){for(;t<e.length;t++){var i=e[t];if(" "!==i)return"'"===i||'"'===i?t:-1}}function Mr(e,t){for(;t>0;t--){var i=e[t];if(" "!==i)return"="===i?t:-1}}function zr(e){return function(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}(e)?e.substr(1,e.length-2):e}Lr.parseTag=function(e,t,i){var s="",r=0,n=!1,a=!1,o=0,l=e.length,c="",h="";e:for(o=0;o<l;o++){var u=e.charAt(o);if(!1===n){if("<"===u){n=o;continue}}else if(!1===a){if("<"===u){s+=i(e.slice(r,o)),n=o,r=o;continue}if(">"===u){s+=i(e.slice(r,n)),c=Tr(h=e.slice(n,o+1)),s+=t(n,s.length,c,h,Or(h)),r=o+1,n=!1;continue}if('"'===u||"'"===u)for(var d=1,p=e.charAt(o-d);""===p.trim()||"="===p;){if("="===p){a=u;continue e}p=e.charAt(o-++d)}}else if(u===a){a=!1;continue}}return r<e.length&&(s+=i(e.substr(r))),s},Lr.parseAttr=function(e,t){var i=0,s=0,r=[],n=!1,a=e.length;function o(e,i){if(!((e=(e=Ir.trim(e)).replace(Ar,"").toLowerCase()).length<1)){var s=t(e,i||"");s&&r.push(s)}}for(var l=0;l<a;l++){var c,h=e.charAt(l);if(!1!==n||"="!==h)if(!1===n||l!==s)if(/\s|\n|\t/.test(h)){if(e=e.replace(/\s|\n|\t/g," "),!1===n){if(-1===(c=jr(e,l))){o(Ir.trim(e.slice(i,l))),n=!1,i=l+1;continue}l=c-1;continue}if(-1===(c=Mr(e,l-1))){o(n,zr(Ir.trim(e.slice(i,l)))),n=!1,i=l+1;continue}}else;else{if(-1===(c=e.indexOf(h,l+1)))break;o(n,Ir.trim(e.slice(s+1,c))),n=!1,i=(l=c)+1}else n=e.slice(i,l),i=l+1,s='"'===e.charAt(i)||"'"===e.charAt(i)?i:Pr(e,l+1)}return i<e.length&&(!1===n?o(e.slice(i)):o(n,zr(Ir.trim(e.slice(i))))),Ir.trim(r.join(" "))};var Br=ir.FilterCSS,Fr=$s,Dr=Lr,Rr=Dr.parseTag,Vr=Dr.parseAttr,Nr=sr;function Hr(e){return null==e}function $r(e){(e=function(e){var t={};for(var i in e)t[i]=e[i];return t}(e||{})).stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=Fr.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=function(e){var t={};for(var i in e)Array.isArray(e[i])?t[i.toLowerCase()]=e[i].map(function(e){return e.toLowerCase()}):t[i.toLowerCase()]=e[i];return t}(e.whiteList||e.allowList):e.whiteList=Fr.whiteList,e.onTag=e.onTag||Fr.onTag,e.onTagAttr=e.onTagAttr||Fr.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||Fr.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||Fr.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||Fr.safeAttrValue,e.escapeHtml=e.escapeHtml||Fr.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new Br(e.css))}$r.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,i=t.whiteList,s=t.onTag,r=t.onIgnoreTag,n=t.onTagAttr,a=t.onIgnoreTagAttr,o=t.safeAttrValue,l=t.escapeHtml,c=this.cssFilter;t.stripBlankChar&&(e=Fr.stripBlankChar(e)),t.allowCommentTag||(e=Fr.stripCommentTag(e));var h=!1;t.stripIgnoreTagBody&&(h=Fr.StripTagBody(t.stripIgnoreTagBody,r),r=h.onIgnoreTag);var u=Rr(e,function(e,t,h,u,d){var p={sourcePosition:e,position:t,isClosing:d,isWhite:Object.prototype.hasOwnProperty.call(i,h)},f=s(h,u,p);if(!Hr(f))return f;if(p.isWhite){if(p.isClosing)return"</"+h+">";var m=function(e){var t=Nr.spaceIndex(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var i="/"===(e=Nr.trim(e.slice(t+1,-1)))[e.length-1];return i&&(e=Nr.trim(e.slice(0,-1))),{html:e,closing:i}}(u),g=i[h],y=Vr(m.html,function(e,t){var i=-1!==Nr.indexOf(g,e),s=n(h,e,t,i);return Hr(s)?i?(t=o(h,e,t,c))?e+'="'+t+'"':e:Hr(s=a(h,e,t,i))?void 0:s:s});return u="<"+h,y&&(u+=" "+y),m.closing&&(u+=" /"),u+=">"}return Hr(f=r(h,u,p))?l(u):f},l);return h&&(u=h.remove(u)),u};var qr=$r;function Ur(e){if(null==e||"string"==typeof e&&""===e)return!1;if(e instanceof Date)return!Number.isNaN(e.getTime());if(bi(e)&&function(e){if(null==e)return!0;if(lt(e)&&(ke(e)||"string"==typeof e||"function"==typeof e.splice||_t(e)||It(e)||gt(e)))return!e.length;var t=Hi(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(ut(e))return!Mt(e).length;for(var i in e)if(js.call(e,i))return!1;return!0}(e)||Array.isArray(e)&&e.length<1)return!1;if("object"==typeof e&&!Array.isArray(e)){let t=!0;for(const i in e){const s=e?.[i];if(!0===e.hasOwnProperty(i)&&null!=s&&""!==s){t=!1;break}}return!t}return!0}async function Wr(e,t){return(0,u.default)(e,t)}!function(e,t){var i=$s,s=Lr,r=qr;function n(e,t){return new r(t).process(e)}(t=e.exports=n).filterXSS=n,t.FilterXSS=r,function(){for(var e in i)t[e]=i[e];for(var r in s)t[r]=s[r]}(),typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)}(Hs,Hs.exports);const Gr={Arabic:"ar",Bosnian:"bs",Bulgarian:"bg",Catalan:"ca",Czech:"cs",Danish:"da",German:"de",Greek:"el",English:"en",EnglishUSA:"en-US",Spanish:"es",Estonian:"et",Finnish:"fi",French:"fr",Hebrew:"he",Croatian:"hr",Hungarian:"hu",Indonesian:"id",Italian:"it",Japanese:"ja",Korean:"ko",Lithuanian:"lt",Latvian:"lv",Norwegian:"no",Dutch:"nl",Polish:"pl",PortugueseBrazil:"pt-BR",PortuguesePortugal:"pt-PT",Romanian:"ro",Russian:"ru",Serbian:"sr",Slovenian:"sl",Slovak:"sk",Swedish:"sv",Thai:"th",Turkish:"tr",Ukrainian:"uk",Vietnamese:"vi",ChineseChina:"zh-CN",ChineseHongKong:"zh-HK",ChineseTaiwan:"zh-TW"},Jr=[...Object.values(Gr),"ar-u-nu-latn","en-AU","en-GB","es-ES","es-MX","fr-CA","de-AT","de-CH","de-DE","it-CH","it-IT"],Qr=[Gr.Arabic,Gr.Hebrew];function Kr(e){let t=Gr.English;if(void 0!==e){const i=Object.values(Gr),s=i.filter(e=>-1!==e.indexOf("-"));if(-1!==e.indexOf("-")){const[t,i]=e.split("-");e=`${t}-${i.toUpperCase()}`}if(!0===s.includes(e))t=e;else{const s=function(e){const t=e?.match(/^([a-z]{2})-([A-Z]{1,2})$/);let i=Gr.English;return null!=t&&t?.length>1?i=t[1]:2===e?.length&&e.toLowerCase()===e&&(i=e),i}(e);!0===i.includes(s)?t=s:["nb","nn"].includes(s)&&(t="no")}}return t}function Yr(e=document.documentElement){const t=function(e,t){return function t(i){let s;return s=void 0===i||i===document||i===window?null:i.closest(e)||t(i.getRootNode().host),s}(t)}("[lang]",e)?.lang??window.navigator.language,i=Kr(t),s=function(e){let t=Jr.find(t=>t===e);if(void 0===t&&(t=e),void 0!==t&&-1!==t.indexOf("-")){const[e,i]=t.split("-");t=`${e}-${i.toUpperCase()}`}return"ar"===t?t="ar-u-nu-latn":("nn"===t||"nn-NO"===t)&&(t="no-NN"),t}(t);return{locale:i,rtl:Qr.includes(i),formatLocale:s}}class Xr extends Error{constructor(e,t,i,s){super(t),this.name=e,this.details=i,this.cause=s}}const Zr="networkError",en="portalLoadError",tn="webToolFailedFetch",sn="accessBlocked";function rn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var nn,an,on,ln,cn,hn,un,dn;function pn(){return hn||(hn=1,cn=(an||(an=1,nn=function(){return!("object"!=typeof globalThis||!globalThis)&&globalThis.Array===Array}),nn)()?globalThis:function(){if(ln)return on;ln=1;var e=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};return on=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return e()}try{return __global__||e()}finally{delete Object.prototype.__global__}}()}()),cn}var fn,mn,gn,yn,vn,bn,_n,wn,kn,xn,Cn,En,Sn,Ln,In,Tn,On,An,jn,Pn,Mn,zn,Bn,Fn,Dn,Rn,Vn,Nn,Hn,$n,qn,Un,Wn,Gn,Jn,Qn,Kn,Yn,Xn,Zn,ea,ta,ia,sa,ra,na,aa,oa,la,ca,ha,ua,da,pa,fa,ma={exports:{}};function ga(){if(mn)return fn;mn=1;return fn=function(e){return null!=e}}function ya(){if(bn)return vn;bn=1;var e=function(){if(yn)return gn;yn=1;var e=ga(),t={object:!0,function:!0,undefined:!0};return gn=function(i){return!!e(i)&&hasOwnProperty.call(t,typeof i)}}();return vn=function(t){if(!e(t))return!1;try{return!!t.constructor&&t.constructor.prototype===t}catch{return!1}}}function va(){if(xn)return kn;xn=1;var e=function(){if(wn)return _n;wn=1;var e=ya();return _n=function(t){if("function"!=typeof t||!hasOwnProperty.call(t,"length"))return!1;try{if("number"!=typeof t.length||"function"!=typeof t.call||"function"!=typeof t.apply)return!1}catch{return!1}return!e(t)}}(),t=/^\s*class[\s{/}]/,i=Function.prototype.toString;return kn=function(s){return!(!e(s)||t.test(i.call(s)))}}function ba(){if(An)return On;An=1;var e=(Tn||(Tn=1,In=function(){}),In)();return On=function(t){return t!==e&&null!==t}}function _a(){return zn||(zn=1,Mn=(Ln||(Ln=1,Sn=function(){try{return!0}catch{return!1}}),Sn)()?Object.keys:function(){if(Pn)return jn;Pn=1;var e=ba(),t=Object.keys;return jn=function(i){return t(e(i)?Object(i):i)}}()),Mn}function wa(){if(Rn)return Dn;Rn=1;var e=_a(),t=function(){if(Fn)return Bn;Fn=1;var e=ba();return Bn=function(t){if(!e(t))throw new TypeError("Cannot use null or undefined");return t}}(),i=Math.max;return Dn=function(s,r){var n,a,o,l=i(arguments.length,2);for(s=Object(t(s)),o=function(e){try{s[e]=r[e]}catch(e){n||(n=e)}},a=1;a<l;++a)e(r=arguments[a]).forEach(o);if(void 0!==n)throw n;return s},Dn}function ka(){return Nn||(Nn=1,Vn=(En||(En=1,Cn=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}),Cn)()?Object.assign:wa()),Vn}function xa(){return Qn||(Qn=1,Jn=function(){if(Un)return qn;Un=1;var e="razdwatrzy";return qn=function(){return"function"==typeof e.contains&&!0===e.contains("dwa")&&!1===e.contains("foo")}}()()?String.prototype.contains:function(){if(Gn)return Wn;Gn=1;var e=String.prototype.indexOf;return Wn=function(t){return e.call(this,t,arguments[1])>-1},Wn}()),Jn}function Ca(){if(Kn)return ma.exports;Kn=1;var e=ga(),t=va(),i=ka(),s=function(){if($n)return Hn;$n=1;var e=ba(),t=Array.prototype.forEach,i=Object.create;return Hn=function(s){var r=i(null);return t.call(arguments,function(t){e(t)&&function(e,t){var i;for(i in e)t[i]=e[i]}(Object(t),r)}),r},Hn}(),r=xa(),n=ma.exports=function(t,n){var a,o,l,c,h;return arguments.length<2||"string"!=typeof t?(c=n,n=t,t=null):c=arguments[2],e(t)?(a=r.call(t,"c"),o=r.call(t,"e"),l=r.call(t,"w")):(a=l=!0,o=!1),h={value:n,configurable:a,enumerable:o,writable:l},c?i(s(c),h):h};return n.gs=function(n,a,o){var l,c,h,u;return"string"!=typeof n?(h=o,o=a,a=n,n=null):h=arguments[3],e(a)?t(a)?e(o)?t(o)||(h=o,o=void 0):o=void 0:(h=a,a=o=void 0):a=void 0,e(n)?(l=r.call(n,"c"),c=r.call(n,"e")):(l=!0,c=!1),u={get:a,set:o,configurable:l,enumerable:c},h?i(s(h),u):u},ma.exports}function Ea(){if(ea)return Zn;ea=1;var e=(Xn||(Xn=1,Yn=function(e){return!(!e||"symbol"!=typeof e&&(!e.constructor||"Symbol"!==e.constructor.name||"Symbol"!==e[e.constructor.toStringTag]))}),Yn);return Zn=function(t){if(!e(t))throw new TypeError(t+" is not a symbol");return t}}function Sa(){if(la)return oa;la=1;var e,t,i,s=Ca(),r=Ea(),n=pn().Symbol,a=function(){if(ia)return ta;ia=1;var e=Ca(),t=Object.create,i=Object.defineProperty,s=Object.prototype,r=t(null);return ta=function(t){for(var n,a,o=0;r[t+(o||"")];)++o;return r[t+=o||""]=!0,i(s,n="@@"+t,e.gs(null,function(t){a||(a=!0,i(this,n,e(t)),a=!1)})),n}}(),o=function(){if(ra)return sa;ra=1;var e=Ca(),t=pn().Symbol;return sa=function(i){return Object.defineProperties(i,{hasInstance:e("",t&&t.hasInstance||i("hasInstance")),isConcatSpreadable:e("",t&&t.isConcatSpreadable||i("isConcatSpreadable")),iterator:e("",t&&t.iterator||i("iterator")),match:e("",t&&t.match||i("match")),replace:e("",t&&t.replace||i("replace")),search:e("",t&&t.search||i("search")),species:e("",t&&t.species||i("species")),split:e("",t&&t.split||i("split")),toPrimitive:e("",t&&t.toPrimitive||i("toPrimitive")),toStringTag:e("",t&&t.toStringTag||i("toStringTag")),unscopables:e("",t&&t.unscopables||i("unscopables"))})}}(),l=function(){if(aa)return na;aa=1;var e=Ca(),t=Ea(),i=Object.create(null);return na=function(s){return Object.defineProperties(s,{for:e(function(e){return i[e]?i[e]:i[e]=s(String(e))}),keyFor:e(function(e){var s;for(s in t(e),i)if(i[s]===e)return s})})}}(),c=Object.create,h=Object.defineProperties,u=Object.defineProperty;if("function"==typeof n)try{String(n()),i=!0}catch{}else n=null;return t=function(i){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return e(i)},oa=e=function e(r){var o;if(this instanceof e)throw new TypeError("Symbol is not a constructor");return i?n(r):(o=c(t.prototype),r=void 0===r?"":String(r),h(o,{__description__:s("",r),__name__:s("",a(r))}))},o(e),l(e),h(t.prototype,{constructor:s(e),toString:s("",function(){return this.__name__})}),h(e.prototype,{toString:s(function(){return"Symbol ("+r(this).__description__+")"}),valueOf:s(function(){return r(this)})}),u(e.prototype,e.toPrimitive,s("",function(){var e=r(this);return"symbol"==typeof e?e:e.toString()})),u(e.prototype,e.toStringTag,s("c","Symbol")),u(t.prototype,e.toStringTag,s("c",e.prototype[e.toStringTag])),u(t.prototype,e.toPrimitive,s("c",e.prototype[e.toPrimitive])),oa}function La(){return ha||(ha=1,ca=function(){if(dn)return un;dn=1;var e=pn(),t={object:!0,symbol:!0};return un=function(){var i=e.Symbol;return"function"==typeof i&&(i("test symbol"),!(!t[typeof i.iterator]||!t[typeof i.toPrimitive]||!t[typeof i.toStringTag]))}}()()?pn().Symbol:Sa()),ca}!function(){if(fa)return pa;fa=1;const e=La(),t=function(){if(da)return ua;da=1;const e="modeNone",t="modeDefault",i="modeMatch",s=(e,t)=>e.length>t.length?-1:e.length<t.length?1:0,r=(e,t)=>-1!==e.indexOf(t,e.length-t.length);class n{constructor(t,i,s){this.factory=t,this.str=i,this.forEachToken=s,this.previousChr="",this.toMatch="",this.currentToken="",this.modeStack=[e],this.currentIndex=0}getCurrentMode(){return this.modeStack[this.modeStack.length-1]}setCurrentMode(e){return this.modeStack.push(e)}completeCurrentMode(){const e=this.getCurrentMode();return e===t&&this.pushDefaultModeTokenizables(),(e===i&&""===this.currentToken||""!==this.currentToken)&&this.push(this.currentToken),this.currentToken="",this.modeStack.pop()}push(e){let t="";if(this.factory.convertLiterals&&this.getCurrentMode()!==i)switch(e.toLowerCase()){case"null":e=null;break;case"true":e=!0;break;case"false":e=!1;break;default:isFinite(e)&&(e=Number(e))}else t=this.toMatch;this.forEachToken&&this.forEachToken(e,t,this.currentIndex)}tokenize(){let t=0;for(;t<this.str.length;)this.currentIndex=t,this.consume(this.str.charAt(t++));for(;this.getCurrentMode()!==e;)this.completeCurrentMode()}consume(e){this[this.getCurrentMode()](e),this.previousChr=e}[e](e){if(!this.factory.matchMap[e])return this.setCurrentMode(t),this.consume(e);this.setCurrentMode(i),this.toMatch=e}[t](e){if(this.factory.delimiterMap[e])return this.completeCurrentMode();if(this.factory.matchMap[e]){let t=0;for(;t<this.factory.tokenizeList.length;)if(r(this.currentToken,this.factory.tokenizeList[t++]))return this.completeCurrentMode(),this.consume(e)}return this.currentToken+=e,this.currentToken}pushDefaultModeTokenizables(){let e=0,t=1/0,i=null;for(;this.currentToken&&e<this.factory.tokenizeList.length;){const s=this.factory.tokenizeList[e++],r=this.currentToken.indexOf(s);-1!==r&&r<t&&(t=r,i=s)}if(i&&(t>0&&this.push(this.currentToken.substring(0,t)),-1!==t))return this.push(i),this.currentToken=this.currentToken.substring(t+i.length),this.pushDefaultModeTokenizables()}[i](e){if(e===this.toMatch){if(this.previousChr!==this.factory.escapeCharacter)return this.completeCurrentMode();this.currentToken=this.currentToken.substring(0,this.currentToken.length-1)}return this.currentToken+=e,this.currentToken}}return ua=class{constructor(e){e||(e={}),e=Object.assign({},this.constructor.defaultConfig,e),this.convertLiterals=e.convertLiterals,this.escapeCharacter=e.escapeCharacter,this.tokenizeList=[],this.tokenizeMap={},this.matchList=[],this.matchMap={},this.delimiterList=[],this.delimiterMap={},e.shouldTokenize.sort(s).forEach(e=>{this.tokenizeMap[e]||(this.tokenizeList.push(e),this.tokenizeMap[e]=e)}),e.shouldMatch.forEach(e=>{this.matchMap[e]||(this.matchList.push(e),this.matchMap[e]=e)}),e.shouldDelimitBy.forEach(e=>{this.delimiterMap[e]||(this.delimiterList.push(e),this.delimiterMap[e]=e)})}tokenize(e,t){return new n(this,e,t).tokenize()}static get defaultConfig(){return{shouldTokenize:["(",")",",","*","/","%","+","-","=","!=","!","<",">","<=",">=","^"],shouldMatch:['"',"'","`"],shouldDelimitBy:[" ","\n","\r","\t"],convertLiterals:!0,escapeCharacter:"\\"}}}}(),i=e("-"),s={[i]:1};class r{constructor(e,t,i){this.value=e,this.type=t,this.precedence=i}toJSON(){return this.value}toString(){return`${this.value}`}}pa=class{constructor(e){e||(e={}),e=Object.assign({},this.constructor.defaultConfig,e),this.tokenizer=new t(e.tokenizer),this.operators={},e.operators.forEach((e,t)=>{Object.keys(e).concat(Object.getOwnPropertySymbols(e)).forEach(i=>{this.operators[i]=new r(i,e[i],t)})})}parse(e,t){const s=[],r=[];let n,a=0,o=!1;for(t||(t=this.defaultEvaluator),this.tokenizer.tokenize(`(${e})`,(e,l)=>{if(a++,"string"!=typeof e||l)r.push(e),o=!1;else{let l=e.toUpperCase();if(this.operators[l]){if("BETWEEN"===n&&"AND"===l)return void(n="AND");for("-"===l&&(1===a||o)&&(l=i);s[s.length-1]&&"("!==s[s.length-1]&&this.operatorPrecedenceFromValues(l,s[s.length-1]);){const e=this.operators[s.pop()],i=[];let n=e.type;for(;n--;)i.unshift(r.pop());r.push(t(e.value,i))}s.push(l),n=l,o=!0}else if("("===e)s.push(e),o=!0;else if(")"===e){for(;s.length&&"("!==s[s.length-1];){const e=this.operators[s.pop()],i=[];let n=e.type;for(;n--;)i.unshift(r.pop());r.push(t(e.value,i))}if(!s.length)throw new SyntaxError("Unmatched parenthesis.");s.pop(),o=!1}else r.push(e),o=!1}});s.length;){const e=s.pop();if("("===e)throw new SyntaxError("Unmatched parenthesis.");const i=this.operators[e],n=[];let a=i.type;for(;a--;)n.unshift(r.pop());r.push(t(i.value,n))}if(r.length>1)throw new SyntaxError("Could not reduce to a single expression.");return r[0]}toArray(e){let t,s=[],n=0;const a=[];for(this.tokenizer.tokenize(`(${e})`,(e,o)=>{switch(n++,e){case"(":a.push(s.length);break;case")":const l=a.pop();let c=s.splice(l,s.length);for(;c&&c.constructor===Array&&1===c.length;)c=c[0];s.push(c);break;case"":case",":break;default:let h=null;o||(h=this.getOperator(e),"-"===e&&(1===n||"("===t||t&&t.constructor===r)&&(h=this.getOperator(i))),s.push(h||e)}t=e});s&&s.constructor===Array&&1===s.length;)s=s[0];return s}operatorPrecedenceFromValues(e,t){return this.operators[t].precedence<=this.operators[e].precedence}getOperator(e){return"string"==typeof e?this.operators[e.toUpperCase()]:"symbol"==typeof e?this.operators[e]:null}defaultEvaluator(e,t){return e===i&&(e="-"),","===e?[].concat(t[0],t[1]):{[e]:t}}static get defaultConfig(){return{operators:[{"!":1},s,{"^":2},{"*":2,"/":2,"%":2},{"+":2,"-":2},{"=":2,"<":2,">":2,"<=":2,">=":2,"!=":2},{",":2},{NOT:1},{BETWEEN:3,IN:2,IS:2,LIKE:2},{AND:2},{OR:2}],tokenizer:{shouldTokenize:["(",")",",","*","/","%","+","-","=","!=","!","<",">","<=",">=","^"],shouldMatch:['"',"'","`"],shouldDelimitBy:[" ","\n","\r","\t"]}}}static get Operator(){return r}static get OPERATOR_UNARY_MINUS(){return i}}}();const Ia="standard",Ta="raster";var Oa,Aa={exports:{}};const ja=rn(function(){if(Oa)return Aa.exports;function e(e,t,i,s){var r=function(e){return null==e||"number"==typeof e||"boolean"==typeof e}(s)?s:i(s),n=t.get(r);return typeof n>"u"&&(n=e.call(this,s),t.set(r,n)),n}function t(e,t,i){var s=Array.prototype.slice.call(arguments,3),r=i(s),n=t.get(r);return typeof n>"u"&&(n=e.apply(this,s),t.set(r,n)),n}function i(e,t,i,s,r){return i.bind(t,e,s,r)}function s(s,r){return i(s,this,1===s.length?e:t,r.cache.create(),r.serializer)}function r(){return JSON.stringify(arguments)}function n(){this.cache=Object.create(null)}Oa=1,n.prototype.has=function(e){return e in this.cache},n.prototype.get=function(e){return this.cache[e]},n.prototype.set=function(e,t){this.cache[e]=t};var a={create:function(){return new n}};return Aa.exports=function(e,t){var i=t&&t.cache?t.cache:a,n=t&&t.serializer?t.serializer:r;return(t&&t.strategy?t.strategy:s)(e,{cache:i,serializer:n})},Aa.exports.strategies={variadic:function(e,s){return i(e,this,t,s.cache.create(),s.serializer)},monadic:function(t,s){return i(t,this,e,s.cache.create(),s.serializer)}},Aa.exports}()),Pa=["SingleLine","Address","Address2","Address3","Neighborhood","City","Subregion","Region","Postal","PostalExt","CountryCode"];ja(async({data:e,toolUIStrings:t})=>{const i=Fa(e,"geocodeServiceURL");let s;try{({data:{detailedCountries:s}}=await Wr(`${i}?f=json`,{responseType:"json"}))}catch{return[]}const{locale:r}=Yr(),n=s.map(e=>{const t=e.localizedNames,i=r.length>2&&r;let s;if("boolean"!=typeof i&&(s=t[i]),void 0===s){const e=2===r.length?r:r.slice(0,2);if(s=t[e],void 0===s){const i=Object.keys(t).find(t=>t.startsWith(e));void 0!==i&&(s=t[i])}}return(null==s||""===s)&&(s=t[Gr.English]??t[Gr.EnglishUSA]),{name:e.name,label:s}});if(!0===(function(e){return null!==e.match(/(arcgis.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi)}(i)||function(e){return null!==e.match(/(\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/gi)}(i))){const e={name:"",label:t?.world??"World"};n.splice(Vs(n,e,"label"),0,e)}return n},{serializer:e=>{const{data:{geocodeServiceURL:t}}=e;return t??"EMPTY_KEY"}}),ja(async(e,t)=>{const i=function(e,t){const{locale:i}=Yr(),s=Fa(e,"geocodeServiceURL");let r={asyncGeocodeUrl:t.helperServices.asyncGeocode.url,geocodeServiceURL:s,locale:i};const n=Ra(ai(e,"inputFileItem.itemId"),t),a=Fa(e,"inputTable");if(Ur(n?.id)){const e="CSV"===n.type?"csv":"xlsx";r={...r,inputFileItem:{itemid:n.id},inputFileParameters:{fileType:e,headerRowExists:"true",columnDelimiter:"",textQualifier:""}}}else Ur(a?.url)&&(r={...r,inputTable:{url:a.url,serviceToken:a.serviceToken}});return r}(e,t);let s,r,n;try{s=await Da(i)}catch{return{geocodeParameters:void 0,addressFields:[],labels:{},values:[]}}try{r=JSON.parse(s.field_info),n=JSON.parse(s.field_mapping).reduce((e,t)=>({...e,[t[1]]:t[0]}),{})}catch{return{addressFields:[],labels:{},values:[]}}const a=r.map(e=>e[0]),o=a.reduce((e,t)=>({...e,[t]:t}),{});return{geocodeParameters:s,addressFields:a,labels:o,values:Pa.map(e=>n[e])}},{serializer:e=>{const{geocodeServiceURL:t,inputFileItem:i,inputTable:s}=e[0],r=i?.itemId,n=s?.url;return Ur(t)&&(Ur(r)||Ur(n))?`${t}${r}${n}`:"EMPTY_KEY"}});async function Ma(e,t){const s=await async function(e=Yr().locale){let t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-81c771").then(i.bind(i,33590));switch(e){case Gr.Arabic:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-dc50b6").then(i.bind(i,11129));break;case Gr.Bosnian:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-aa1be8").then(i.bind(i,19490));break;case Gr.Bulgarian:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-ff7109").then(i.bind(i,98208));break;case Gr.Catalan:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-ab12fe").then(i.bind(i,97961));break;case Gr.Czech:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-6dd664").then(i.bind(i,28085));break;case Gr.Danish:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-1049fb").then(i.bind(i,77633));break;case Gr.German:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-3fb78f").then(i.bind(i,24362));break;case Gr.Greek:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-c6af63").then(i.bind(i,32004));break;case Gr.EnglishUSA:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-d90e25").then(i.bind(i,42721));break;case Gr.Spanish:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-4d0d8c").then(i.bind(i,47868));break;case Gr.Estonian:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-b7e0bb").then(i.bind(i,4534));break;case Gr.Finnish:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-55965f").then(i.bind(i,64732));break;case Gr.French:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-82fbf1").then(i.bind(i,45069));break;case Gr.Hebrew:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-862f94").then(i.bind(i,10966));break;case Gr.Croatian:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-60cdc9").then(i.bind(i,23481));break;case Gr.Hungarian:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-e8a552").then(i.bind(i,18824));break;case Gr.Indonesian:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-9a6446").then(i.bind(i,24667));break;case Gr.Italian:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-4d76e8").then(i.bind(i,94798));break;case Gr.Japanese:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-de1718").then(i.bind(i,87128));break;case Gr.Korean:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-3ec75d").then(i.bind(i,91812));break;case Gr.Lithuanian:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-42133f").then(i.bind(i,98657));break;case Gr.Latvian:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-45b9e9").then(i.bind(i,89259));break;case Gr.Norwegian:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-37495b").then(i.bind(i,96457));break;case Gr.Dutch:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-85ea39").then(i.bind(i,29870));break;case Gr.Polish:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-0c6ae0").then(i.bind(i,83550));break;case Gr.PortugueseBrazil:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-4fefa0").then(i.bind(i,42067));break;case Gr.PortuguesePortugal:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-f1c2ca").then(i.bind(i,66964));break;case Gr.Romanian:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-348791").then(i.bind(i,76526));break;case Gr.Russian:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-8a0174").then(i.bind(i,94422));break;case Gr.Serbian:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-938f0d").then(i.bind(i,9794));break;case Gr.Slovak:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-6e1109").then(i.bind(i,62690));break;case Gr.Slovenian:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-da876d").then(i.bind(i,99104));break;case Gr.Swedish:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-93aaec").then(i.bind(i,69760));break;case Gr.Thai:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-914fff").then(i.bind(i,93942));break;case Gr.Turkish:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-5d9ca1").then(i.bind(i,49152));break;case Gr.Ukrainian:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-431f1a").then(i.bind(i,57104));break;case Gr.Vietnamese:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-5d5fa5").then(i.bind(i,34786));break;case Gr.ChineseChina:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-a9381c").then(i.bind(i,90577));break;case Gr.ChineseHongKong:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-574d6d").then(i.bind(i,57231));break;case Gr.ChineseTaiwan:t=await i.e("extensions_widgets_arcgis_analysis_node_modules_arcgis_analysis-components_dist_esm_errors_t9-eff8dc").then(i.bind(i,7079))}return t}(),r=s[e]??s.defaultError;throw new Xr(e,r,{type:"analysis_ui"},t)}p.debounce(async(e,t,i=!1,s)=>{const r=function(e){let t=e;return function(e){return void 0!==e&&"type"in e&&"subtype-sublayer"===e.type}(e)&&(t=e.parent),(function(e){return"feature"===e.type}(e)||function(e){return void 0!==e&&"type"in e&&"subtype-group"===e.type}(e))&&(t=e),t}(e),n={cacheHint:!0,where:Ur(r.definitionExpression)?r.definitionExpression:"1=1"};if(Ur(r.timeInfo)&&!i&&(!0===r.useViewTime&&Ur(t?.timeExtent)?n.timeExtent=t.timeExtent:n.timeExtent=r.timeExtent),Ur(s)){const e=new f.default({xmin:s.xmin,ymin:s.ymin,xmax:s.xmax,ymax:s.ymax,spatialReference:new m.default({wkid:s.spatialReference.latestWkid??s.spatialReference.wkid,wkt:s.spatialReference.wkt})});n.geometry=e}const a=new d.default(n);return await e.queryFeatureCount(a)});const za={Standalone:"standalone"};function Ba(e){e??=Ia;let t="";if(e===Ta)t="_ra";else t="";return t}function Fa(e,t){return ai(e,t)}Zt(async e=>{const{locale:t,name:i,assetPrefix:s,analysisEngine:r,uiMode:n=za.Standalone,memoizedHelper:a,version:o}=e,l=`${i.toLowerCase()}${Ba(r)}`;let c,h,u,d,p,f="",m="";if("modelbuilder"===n){const e=`${s}/tool-ui-json/mb/mb-overrides-manifest.json`,t=await a(e),i=t?.overrides,r=void 0!==t&&i?.includes(l),n=function(e){return Ur(e)&&"V1"!==e?`${e.toLowerCase()}/`:""}(o);f=`${s}/tool-ui-json/${!0===r?`mb/${n}`:""+(n?`mb/${n}`:"")}${l}.tool.ui.json`,m=`${s}/tool-ui-json/mb/allToolOverrides.json`}else f=`${s}/tool-ui-json/${l}.tool.ui.json`;c=await a(f);const g=`${s}/tool-json/${l}.tool.json`,y=`${s}/t9n/${l}/${l}.t9n.${t}.json`,v=`${s}/t9n/common.t9n.${t}.json`;let b=t;(t===Gr.English||t===Gr.EnglishUSA)&&(b="");const _=`${s}/help/${""!==b?b+"/":""}${i}${Ba(r)}.html`;try{h=await a(y),u=await a(v),h={...u,...h},"modelbuilder"===n?p=await a(m):d=await a(g)}catch{c=void 0}return{toolJson:d,toolUIJson:c,toolT9n:h,toolHelpFilePath:_,allToolOverrides:p}}),Zt(e=>{const t={};let i;if(void 0!==e.featureSet){if(t.source=_.default.fromJSON(e.featureSet).features,i=e.layerDefinition,void 0!==i.fields&&(t.fields=i.fields.map(e=>v.default.fromJSON(e))),void 0!==i.objectIdField&&(t.objectIdField=i.objectIdField),void 0!==i.geometryType){let e="point";switch(i.geometryType){case"esriGeometryMultipoint":e="multipoint";break;case"esriGeometryPoint":e="point";break;case"esriGeometryPolygon":e="polygon";break;case"esriGeometryPolyline":e="polyline"}t.geometryType=e}void 0!==i.spatialReference&&(t.spatialReference=i.spatialReference),void 0!==i.drawingInfo?.renderer&&(t.renderer=b.default.fromJSON(i.drawingInfo.renderer))}return new g.default(t)}),Zt(async(e,t)=>{let i=!1;if(!0===window.location.href.includes("://localhost:")||void 0===t)i=!0;else{const s=`${t}/sharing/rest/portals/checkurl`;try{const t=await Wr(s,{query:{url:e,f:"json"},responseType:"json"});i=Ur(t.data)&&200===t.data.httpStatusCode}catch{i=!1}}return!0===i?e:void 0}),ja(async e=>{const{url:t}=e,i=`${t}/sharing/rest/community/self`,s=h.default.findCredential(i);let r;void 0!==s&&(r=s.token);const n={query:{returnUserLicensedItems:!0,token:r,f:"json"}};try{const{data:{userLicensedItems:e}}=await Wr(i,n);return[...e.map(({entitlements:e})=>e)].flat()}catch{await Ma(Zr)}return[]},{serializer:e=>`${e?.user?.username}`}),ja(e=>function(e){const t=new Set(e.map(e=>e.id));return Array.from(t).map(t=>e.find(e=>e.id===t))}(e),{serializer:e=>Array.isArray(e)?e.map(e=>{let t=e.id;return"source"in e&&Ur(e.source?.length)&&(t+=`-${e.source.length}`),t}).join("-"):""}),ja(async e=>{let t={isMultidimensional:!1};const i="imagery-tile"===e.type?e.serviceRasterInfo?.multidimensionalInfo:e.multidimensionalInfo,s=e.multidimensionalSubset;if(null!=i){const r=null!=s?e.getMultidimensionalSubsetVariables():i.variables;if(void 0!==r&&r.length>0){const e=[],i=[],s={},n={},a={},o={},l={},c={},h={};r.forEach((t,r)=>{let a="";const u=t.name;t.dimensions.forEach((t,i)=>{const d=t.name;-1===e.indexOf(d)&&e.push(d);const p=i>0?`,${d}=${t.values?.length}`:`${d}=${t.values?.length}`;if(a=a.concat(p),0===i&&(n[u]={}),void 0===s[d]&&(s[d]=[]),n[u][d]=t.values,0===r){const e=t.values;if(void 0!==e)if("StdTime"!==d||void 0!==t.unit&&"ISO8601"!==t.unit)Array.isArray(e)&&"number"==typeof e[0]?o[d]=l[d]=e.map(String):Array.isArray(e?.[0])&&Array.isArray(e[1])&&(o[d]=e[0].map(String),l[d]=e[1].map(String));else{const t=[],i=[],s={},r={};e?.forEach(e=>{if("number"==typeof e){const n=new Date(e),a=n.toLocaleString(),o=n.toISOString();t.push(o),i.push(o),s[o]=a,r[o]=a}else if(Array.isArray(e)){const n=new Date(e[0]),a=new Date(e[1]),o=n.toISOString(),l=a.toISOString();t.push(o),i.push(l),s[o]=n.toLocaleString(),r[l]=a.toLocaleString()}}),o[d]=t,l[d]=i,c[d]=s,h[d]=r}}s[d].push(u)}),i.push({name:u,alias:`${u}[${a}](${t.description})`,type:"string"})});for(const e in s){const t=i.filter(t=>s[e].indexOf(t.name)>-1);a[e]={id:"1",name:e,description:"DimensionVariables",getFields:()=>Promise.resolve(t)}}t={isMultidimensional:!0,dimensions:e,dimensionVariableDatasets:a,dimensionValues:n,variablesDataset:{id:"1",name:"Variables",description:"Variables",getFields:()=>Promise.resolve(i)},dimensionMinValues:o,dimensionMaxValues:l,dimensionMinValuesWithLabels:c,dimensionMaxValuesWithLabels:h}}}let r;try{r=await e.generateRasterInfo(e.rasterFunction)}catch{r=e.serviceRasterInfo}return t.rasterInfo=r,t});const Da=async e=>{const{asyncGeocodeUrl:t}=e,i=await w.submitJob(`${t}/AnalyzeGeocodeInput`,{...zs(e,"asyncGeocodeUrl"),f:"json"});return await i.waitForJobCompletion(),(await i.fetchResultData("geocodeParameters")).value},Ra=ja((e,t)=>new y.default({id:e,portal:t}),{serializer:e=>`${e[0]}-${e[1]?.url}`});ja(async e=>{const{restUrl:t}=e,i=`${t}/portals/helpmap`;let s;try{s=await((await(0,u.default)(i,{query:{f:"json"},responseType:"json",method:"auto"})).data?.helpMap)??void 0}catch{s=void 0}return s},{serializer:e=>`${e[0]}-${e[1]?.url}`}),oe(async e=>{const t=new c.default({url:e});t.authMode="immediate";try{await t.load()}catch{await Ma(en)}return t});const Va="standard",Na="geoanalytics",Ha="raster";function $a(e,t,i=!1){let s=t.helperServices.analysis.url;switch(e){case Na:s=t.helperServices.geoanalytics.url;break;case Ha:s=t.helperServices.rasterAnalytics.url;break;case Va:s=i?t.helperServices.asyncGeocode.url:t.helperServices.analysis.url}return s}const qa=e=>{const t=Array.from(e).map(e=>{let t;return t="object"==typeof e&&void 0!==e.id?e.id:e,t});return JSON.stringify(t)},Ua=oe(async(e,t,i)=>{const s=`${$a(t,i,"BatchGeocode"===e)}/${e}?f=json`,r=await(await(0,u.default)(s,{responseType:"json",authMode:"no-prompt"})).data;return r.parameters?.forEach(e=>{null===e.defaultValue&&(e.defaultValue=void 0)}),r},{serializer:qa}),Wa=oe(async(e,t)=>{const i=$a(e,t),s=await(0,u.default)(`${i}?f=json`,{responseType:"json"}),{data:{tasks:r}}=s,n=r.map(i=>Ua(i,e,t));return await Promise.all(n)},{serializer:qa});oe(async(e,t)=>{let i=[];return i=void 0!==t?await Wa(t,e):[...await Wa(Va,e),...await Wa(Ha,e),...await Wa(Na,e)],new Map(i.map(e=>[e.name.toLowerCase(),e]))},{serializer:qa}),oe(async e=>{const{helperServices:t}=e;let i;if(void 0!==t.routingUtilities){const e=await w.execute(`${t.routingUtilities.url}/GetTravelModes?f=json`),{results:[{value:{features:s}},{value:r}]}=e;i={travelModes:s.map(e=>JSON.parse(e.attributes.TravelMode)),defaultTravelModeId:r}}return i},{serializer:qa});const Ga=oe(async e=>(await(0,u.default)(`${e}?f=json`,{responseType:"json"})).data),Ja=oe(async(e,t)=>{const i=`${e}/${t}?f=json`,s=await((await(0,u.default)(i,{responseType:"json",authMode:"no-prompt"}))?.data);return void 0!==s?.parameters&&s.parameters?.forEach(e=>{null===e.defaultValue&&(e.defaultValue=void 0)}),s});oe(async e=>{const t=await(0,u.default)(`${e}?f=json`,{responseType:"json"}),{data:{tasks:i}}=t,s=i.map(t=>Ja(e,t));return await Promise.all(s)}),oe(async(e,t)=>{let i,s;try{i=await Ja(e,t),s=await Ga(e)}catch(e){throw function(e){if(!(e instanceof Xr))throw e}(e),"OAUTH_0070"===e.details?.messageCode?new Xr(sn,e.message,e.details):new Xr(tn,e.message,e.details)}return i.serviceInfo=s,{...i,serviceInfo:s}});const Qa="error-message",Ka="string-item-browser-input-wrapper",Ya="layer-overwrite-checkbox",Xa="calcite-input",Za="item-browser-layer-button",eo="top-spacing",to="list-item",io="intermediateData",so="hostedLayer",ro="overwriteExistingLayer",no=class{constructor(e){(0,s.r)(this,e),this.analysisOutputNameValueChange=(0,s.c)(this,"analysisOutputNameValueChange",7),this.analysisHelpPopoverOpen=(0,s.c)(this,"analysisHelpPopoverOpen",7),this.clearVariableById=(0,s.c)(this,"clearVariableById",7),this.required=!1,this.isOutputNameTaken=!1,this.readOnly=!1,this.overwriteExistingLayer=!0,this.outputName="",this.showItemBrowser=!1,this.overwriteMode=io,this.filter='(type: "Feature Service")',this.itemBrowserBucketOptions=["my","favorites","group","org"],this.handleAnalysisHelpPopoverClose=()=>{(0,r.ad)(this.toolHelpPopover),this.toolHelpPopover?.removeEventListener("analysisHelpPopoverClose",this.handleAnalysisHelpPopoverClose),this.toolHelpPopover=void 0},this.updateValue=()=>{if(this.hasVariable)return;let e;if(this.overwriteMode===so||this.overwriteMode===ro&&void 0!==this.selectedOverwriteItem){const t=this.folderId??this.folderInputRef?.value??"";e={serviceProperties:{name:this.outputName},itemProperties:{overwrite:this.overwriteExistingLayer,folderId:t},overwriteMode:this.overwriteMode},e.itemProperties=this.selectedOverwriteItem?{...e.itemProperties,id:this.selectedOverwriteItem.id??void 0}:e.itemProperties,e=this.serializeOutputName(e,this.toolData)}else this.overwriteMode===ro&&void 0===this.selectedOverwriteItem&&(e={serviceProperties:{name:""},itemProperties:{overwrite:!0},overwriteMode:this.overwriteMode});this.value=e,this.analysisOutputNameValueChange.emit(this.value)},this.formatUnavailableItemErrorMessage=e=>{let t=this.strings.itemNameTaken;return!1===e?t=this.strings.noPermissionToOverwrite:this.overwriteMode===ro?t=this.strings.cannotUndoOverwrite:this.overwriteMode===so&&!0===this.overwriteExistingLayer&&(t=this.strings.layerExistsOverwritten),{message:t,uiInputStatus:this.overwriteExistingLayer&&e?r.r.IDLE:r.r.INVALID}},this.validateOutputName=async()=>{if(this.isOutputNameTaken=!1,(0,r.y)(this.outputName))return void(this.error={message:this.strings.requiredError,uiInputStatus:r.r.INVALID});if(!1===(0,r.ak)([this.outputName]))return void(this.error={message:this.strings.specialCharactersInServiceNameError,uiInputStatus:r.r.INVALID});const e=await async function(e){const{portal:{url:t,id:i},itemType:s,includeItemId:r=!1}=e,{serviceName:n}=e,a=`${t}/sharing/rest/portals/${i}/isServiceNameAvailable?f=json`,o={query:{f:"json",name:n,type:s,includeitemid:r}};let l={available:!0};try{const e=await(0,u.default)(a,o);l=void 0!==e.data.itemId?{available:e.data.available,itemId:e.data.itemId,inRecycleBin:e.data.inRecycleBin}:{available:e.data.available,inRecycleBin:e.data.inRecycleBin}}catch{await Ma(Zr)}return l}({portal:this.portal,itemType:"Feature Service",serviceName:this.outputName,includeItemId:!0}),{itemId:t,available:i,inRecycleBin:s}=e??{};if(!0===s)this.error={message:this.strings.recycleBinError,uiInputStatus:r.r.INVALID};else if(!1===i&&(0,r.P)(t)){this.isOutputNameTaken=!0;const e=await(0,r.ae)(t),i=(0,r.af)(e,this.portal.user);!0===this.overwriteExistingLayer&&(this.folderId=e.ownerFolder),this.error=this.formatUnavailableItemErrorMessage(i)}else!1===i&&(0,r.y)(t)?this.error={message:this.strings.noPermissionToOverwrite,uiInputStatus:r.r.INVALID}:this.error=void 0},this.debouncedValidateOutputName=(0,o.l)(this.validateOutputName,500),this.setOutputNameFromSelectedItem=e=>{this.overwriteExistingLayer=!0,this.outputName=e.name??(0,r.ag)(e.url),this.isOutputNameTaken=!0,this.folderId=e.ownerFolder,(0,r.af)(e,this.portal.user)?(this.selectedOverwriteItem=e,this.error={message:this.strings.cannotUndoOverwrite,uiInputStatus:r.r.IDLE}):this.error={message:this.strings.noPermissionToOverwrite,uiInputStatus:r.r.INVALID}},this.removeItemBrowser=()=>{this.itemBrowserElement?.removeEventListener("analysisItemBrowserClose",this.handleItemBrowserClose),this.itemBrowserElement?.removeEventListener("analysisItemBrowserSelection",this.handleItemBrowserSelection),this.itemBrowserElement?.remove(),this.itemBrowserElement=void 0},this.openItemBrowser=()=>{this.removeItemBrowser(),this.itemBrowserElement=document.createElement("analysis-item-browser"),this.itemBrowserElement.header=this.strings.selectLayerToOverwrite,this.itemBrowserElement.hideAddToMap=!0,this.itemBrowserElement.filter=this.filter,this.itemBrowserElement.portal=this.portal,this.itemBrowserElement.bucketOptions=this.itemBrowserBucketOptions,this.itemBrowserElement.user=this.portal.user,this.itemBrowserElement.selectionMode="single",this.itemBrowserElement.addEventListener("analysisItemBrowserClose",this.handleItemBrowserClose),this.itemBrowserElement.addEventListener("analysisItemBrowserSelection",this.handleItemBrowserSelection),document.body.appendChild(this.itemBrowserElement)},this.renderItemBrowser=()=>(0,s.h)(s.F,null,(0,s.h)("analysis-label",{class:eo,label:this.strings.overwriteLayer,ref:e=>this.itemBrowserRef=e,required:!0,onAnalysisLabelHelpActionClick:()=>{this.createHelpPopover(this.strings.overwriteLayer,"existingLayerToOverwrite",this.itemBrowserRef)}}),this.selectedOverwriteItem?this.renderSelectedLayer():(0,s.h)("calcite-button",{class:Za,scale:r.g.Scale,appearance:"outline",kind:"neutral",disabled:this.readOnly,iconStart:"add-layer",onMouseOver:!1===this.readOnly?this.addTooltip:void 0,onMouseOut:this.removeTooltip,onClick:this.handleOpenItemBrowserClick},this.strings.layer),!1===this.readOnly&&this.renderErrorMessage()),this.renderStringInput=()=>(0,s.h)(s.F,null,(0,s.h)("analysis-label",{class:eo,label:this.strings.outputName,ref:e=>this.outputNameLabelRef=e,required:!0,onAnalysisLabelHelpActionClick:()=>{this.createHelpPopover(this.strings.outputName,"outputName",this.outputNameLabelRef)}}),(0,s.h)("div",{class:Ka},(0,s.h)("calcite-input",{class:Xa,scale:r.g.Scale,type:"text",readOnly:this.readOnly,value:this.outputName,status:this.error?.uiInputStatus,placeholder:this.readOnly?void 0:this.strings.enterUniqueName,onCalciteInputInput:this.handleStringInputChange})),!1===this.readOnly&&this.renderErrorMessage()),this.renderLayerOverwriteCheckbox=()=>(0,s.h)("div",{class:Ya},(0,s.h)("analysis-boolean-input",{ref:e=>this.layerOverwriteCheckboxRef=e,label:this.strings.layerExistsAutomaticallyOverwrite,onAnalysisBooleanInputChange:this.handleLayerOverwriteBooleanInputChange,value:this.overwriteExistingLayer,readOnly:this.readOnly,onAnalysisHelpClick:()=>{this.createHelpPopover(this.strings.overwrite,"layerExistsAutomaticallyOverwrite",this.layerOverwriteCheckboxRef)}})),this.renderFolderInput=()=>(0,s.h)("analysis-folder-input",{ref:e=>this.folderInputRef=e,label:this.strings.saveInFolder,value:this.folderId,user:this.portal.user,disabled:this.isOutputNameTaken||this.readOnly,onAnalysisFolderInputChange:this.handleFolderInputChange,onAnalysisHelpClick:()=>{this.createHelpPopover(this.strings.saveInFolder,"saveResultIn",this.folderInputRef)}}),this.renderErrorMessage=()=>void 0!==this.error?.message&&void 0!==this.error?.uiInputStatus&&(0,s.h)("calcite-input-message",{class:Qa,status:this.error.uiInputStatus,hidden:!1,scale:r.g.Scale,icon:"exclamationMarkTriangle"},this.error.message),this.renderVariableDisplay=e=>{const t=this.modelVariables?.find(t=>t.id===e);if(void 0===t)return this.clearVariableById.emit(e),null;const i=t?.value?.overwriteMode??io;return(0,s.h)("variable-node-display",{variableNode:{id:e,dataType:"GPKeyValue",name:t.name,value:t?.value??{}},outputName:!0,readOnly:this.readOnly,choiceLabel:this.choiceList[i],onClearVariable:e=>!0!==this.readOnly&&this.clearVariableById.emit(e.detail)})},this.handleOverwriteModeChange=async()=>{this.overwriteMode=this.stringInputRef.value,this.overwriteMode===so?await this.validateOutputName():this.overwriteMode===ro&&void 0===this.selectedOverwriteItem?this.error={message:this.strings.requiredError,uiInputStatus:r.r.INVALID}:this.overwriteMode===ro&&void 0!==this.selectedOverwriteItem&&this.setOutputNameFromSelectedItem(this.selectedOverwriteItem),this.updateValue()},this.addTooltip=e=>{const t=e.target;void 0===this.tooltipElement&&(this.tooltipElement=document.createElement("calcite-tooltip"),this.tooltipElement.placement="bottom",this.tooltipElement.innerText=this.strings.chooseLayerToOverwrite,this.tooltipElement.offsetDistance=14,this.tooltipElement.referenceElement=t),(0,r.ah)(document,this.tooltipElement)},this.removeTooltip=()=>{(0,r.ad)(this.tooltipElement)},this.handleStringInputChange=async e=>{const t=e.target.value;this.outputName=t,await this.debouncedValidateOutputName(),this.updateValue()},this.handleLayerOverwriteBooleanInputChange=async e=>{const t=e.target.value;this.overwriteExistingLayer=t,await this.validateOutputName(),this.updateValue()},this.handleFolderInputChange=e=>{const t=e.target.value;t!==this.folderId&&(this.folderId=t,this.updateValue())},this.handleItemBrowserSelection=e=>{const t=e.detail;this.setOutputNameFromSelectedItem(t),this.updateValue()},this.handleRemoveSelectedItem=async()=>{this.selectedOverwriteItem=void 0,this.outputName="",this.overwriteExistingLayer=!1,this.folderId=void 0,await this.validateOutputName(),this.updateValue()},this.handleOpenItemBrowserClick=()=>{this.openItemBrowser()},this.handleItemBrowserClose=()=>{this.showItemBrowser=!1,this.removeItemBrowser()},this.replaceLayer=e=>{const t=e.target;"calcite-list-item"===t?.localName&&this.openItemBrowser()},this.handleMouseOver=e=>{const t=e.target;"calcite-list-item"===t?.localName&&!1===this.readOnly&&(void 0===this.replaceTooltip&&(this.replaceTooltip=document.createElement("calcite-tooltip"),this.replaceTooltip.placement="bottom",this.replaceTooltip.innerText=this.strings.replaceLayer),this.replaceTooltip.referenceElement=t,(0,r.ah)(document,this.replaceTooltip))},this.handleMouseOut=()=>{(0,r.ad)(this.replaceTooltip)}}async componentWillLoad(){let e="";({strings:this.strings,locale:e}=await(0,r.u)(this.hostElement,(0,s.a)("."))),(0,r.P)(this.value)&&(this.outputName=this.value.serviceProperties?.name??"",this.overwriteExistingLayer=this.value.itemProperties?.overwrite??!1,this.folderId=this.value.itemProperties?.folderId,this.overwriteMode=this.value.overwriteMode??io,(0,r.P)(this.value.itemProperties?.id)&&(this.selectedOverwriteItem=await(0,r.ae)(this.value.itemProperties.id)),!1===this.readOnly&&await this.validateOutputName()),this.portalChange(this.portal),this.updateValue(),this.setToolHelpFilePath(e)}disconnectedCallback(){this.toolHelpPopover?.removeEventListener("analysisHelpPopoverClose",this.handleAnalysisHelpPopoverClose),(0,r.ad)(this.toolHelpPopover)}portalChange(e){void 0!==e?.user&&(this.itemBrowserBucketOptions=(0,r.ai)(e.user)?["my","favorites","group","org"]:["my","favorites"])}get hasError(){return this.error?.uiInputStatus===r.r.INVALID}async checkValidity(){const e=void 0===this.error||!1===this.hasError;return Promise.resolve(e)}setToolHelpFilePath(e){if(void 0===this.toolHelpFilePath){let t=e;switch(e){case r.al.English:case r.al.EnglishUSA:t=""}this.toolHelpFilePath=(0,s.a)(`assets/help/${""!==t?t+"/":""}AnalysisOutputName.html`)}}serializeOutputName(e,t){const i=(0,r.aj)(e,t);return void 0!==t.itemProperties&&(i.itemProperties={...i.itemProperties,...t.itemProperties}),i}createHelpPopover(e,t,i){(0,r.E)(),void 0!==this.toolHelpPopover&&(this.toolHelpPopover.removeEventListener("analysisHelpPopoverClose",this.handleAnalysisHelpPopoverClose),this.toolHelpPopover=void 0),void 0!==this.toolHelpFilePath&&(this.toolHelpPopover=(0,o.s)(this.toolHelpPopover,{heading:e,helpFileName:"AnalysisOutputName",helpId:t,helpUrl:this.toolHelpFilePath,isHelpFileExternalAsset:!0,learnMoreBaseUrl:this.portal?.sourceJSON.helpBase??void 0,portal:this.portal,referenceElement:i}),this.toolHelpPopover.addEventListener("analysisHelpPopoverClose",this.handleAnalysisHelpPopoverClose),this.analysisHelpPopoverOpen.emit())}renderSelectedLayer(){const e=this.selectedOverwriteItem.name??(0,r.ag)(this.selectedOverwriteItem.url),t=(0,r.a)(this.strings.layerAction,{layerName:e});return(0,s.h)("calcite-list",{label:"",onClick:this.replaceLayer,onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut},(0,s.h)("calcite-list-item",{key:this.selectedOverwriteItem.id??void 0,label:e,disabled:this.readOnly,class:to,description:this.selectedOverwriteItem.type??""},!1===this.readOnly&&(0,s.h)("calcite-action",{"data-layerId":this.selectedOverwriteItem.id,text:t,label:t,slot:"actions-end",appearance:"transparent",icon:"x",onClick:this.handleRemoveSelectedItem})))}get hasVariable(){return!0===(0,r.l)(this.value)}get choiceList(){return{[io]:this.strings.createIntermediateData,[so]:this.strings.createHostedLayer,[ro]:this.strings.overwriteExistingLayer}}render(){const e=this.hasVariable?this.value?.variable:void 0;return void 0!==e?(0,s.h)(s.H,null,this.renderVariableDisplay(e)):(0,s.h)(s.H,null,(0,s.h)("analysis-string-input",{readOnly:this.readOnly,label:this.strings.resultType,required:!0,value:this.overwriteMode,ref:e=>this.stringInputRef=e,onAnalysisHelpClick:()=>{this.createHelpPopover(this.strings.resultType,"resultType",this.stringInputRef)},choiceList:[io,so,ro],choiceListLabels:this.choiceList,choiceListPositioning:"fixed",onAnalysisStringInputChange:this.handleOverwriteModeChange}),this.overwriteMode===io&&!1===this.readOnly&&(0,s.h)("calcite-input-message",{class:eo,status:"idle",hidden:!1,scale:r.g.Scale,icon:"exclamationMarkTriangle"},this.strings.intermediateDataWarning),this.overwriteMode===so&&(0,s.h)("div",null,this.renderStringInput(),this.renderLayerOverwriteCheckbox(),this.renderFolderInput()),this.overwriteMode===ro&&this.renderItemBrowser())}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,s.d)(this)}static get watchers(){return{portal:["portalChange"]}}};no.style=":root{--analysis-quarter-spacing:0.25rem;--analysis-half-spacing:0.5rem;--analysis-three-quarter-spacing:0.75rem;--analysis-full-spacing:1rem;--analysis-component-default-width:100%;--analysis-ui-border-input:var(--calcite-color-border-2);--analysis-label-font-size:var(--calcite-font-size--2);--analysis-popover-content-min-height-s:7.5rem;--analysis-popover-content-min-height-m:8.75rem;--analysis-popover-content-max-height:60vh;--analysis-popover-content-height:45vh;--analysis-popover-z-index:calc(var(--calcite-z-index-overlay) - 1)}:host{display:block}.error-message{margin-top:var(--analysis-half-spacing)}.string-item-browser-input-wrapper{display:flex;gap:var(--analysis-half-spacing)}.layer-overwrite-checkbox{margin:var(--analysis-half-spacing) 0}.calcite-input{flex-grow:1}.calcite-dropdown{width:100%}.item-browser-layer-button{width:100%}.top-spacing{margin-top:var(--analysis-half-spacing)}.negative-top-spacing{margin-top:calc(-1 * var(--analysis-half-spacing))}.list-item{--calcite-font-size--1:var(--calcite-font-size--2);border:1px solid var(--calcite-color-border-input);margin-bottom:var(--analysis-half-spacing)}";const ao="circle",oo="polygon",lo="polyline",co="point",ho="rectangle",uo="text",po="bezier-curve",fo=class{constructor(e){(0,s.r)(this,e),this.analysisSketchLayerChange=(0,s.c)(this,"analysisSketchLayerChange",7),this.analysisSketchToolsRendered=(0,s.c)(this,"analysisSketchToolsRendered",7),this.analysisSketchRemove=(0,s.c)(this,"analysisSketchRemove",7),this.mapLayers=[],this.sketchUpdated=!1,this.sketchLayerTitleNumber=1,this.createSketch=()=>{void 0!==this.sketchElement&&this.removeSketch();const e=(0,r.am)();this.reactiveUtilsHandler=e.on(()=>this.mapView?.map?.allLayers,"change",()=>this.handleMapViewLayersChange()),this.createSketchLayer(),this.sketchLayer.load().then(()=>{this.mapView?.map?.add(this.sketchLayer),this.mapView?.when(()=>{this.sketchElement=document.createElement("arcgis-map-config-sketch-layer-editor"),this.sketchElement.mapView=this.mapView,this.sketchElement.showSketchToolsOnly=!0,this.sketchElement.layer=this.sketchLayer,this.sketchElement.sketchToolsToHide=this.hiddenSketchTools,this.sketchElement.sketchToolsPopoverProps={refElement:this.referenceElement,mobilePlacement:"bottom-start"};const e=this.mapLayers.filter(e=>!0===e?.title?.includes(this.sketchLayerTitle));this.sketchElement.hideSelectionTools=!(e.length>0),this.sketchElement.addEventListener("arcgisContentReRender",this.handleSketchContentReRender),this.sketchElement.addEventListener("arcgisChange",this.handleSketchUpdated),this.hostElement.appendChild(this.sketchElement),this.setupMutationObserver()}),setTimeout(()=>requestAnimationFrame(()=>this.sketchElement?.setFocus()),1)})},this.emitSketchFeatureLayer=()=>{const e=this.mapLayers.find(e=>!0===e?.title?.includes(this.sketchLayerTitle)&&"geometryType"in e&&e?.geometryType===this.currentSketchTool);void 0!==e&&(this.previousSketchFeatureLayer=e),this.analysisSketchLayerChange.emit(e)},this.handleSketchUpdated=()=>{this.sketchUpdated=!0},this.handleSketchContentReRender=e=>{const t=e.detail;t===ho||t===ao?this.currentSketchTool=oo:(0,r.P)(t)&&(this.currentSketchTool=t),this.emitSketchFeatureLayer()}}mapLayersChange(e,t){const i=e.find(e=>e.title===this.previousSketchFeatureLayer?.title),s=this.previousSketchFeatureLayer?.source?.length!==i?.source?.length;e?.length===t?.length&&!0!==s||!0!==this.sketchUpdated||(this.emitSketchFeatureLayer(),this.updateSketchTools())}get hiddenSketchTools(){const e=Array.isArray(this.layerFilterType)?this.layerFilterType:[this.layerFilterType];let t=[co,lo,oo,ho,ao,uo,po];return!1===e.includes("feature")?e.forEach(e=>{"feature_point"===e||"feature_multiPoint"===e?t=t.filter(e=>e!==co):"feature_line"===e?t=t.filter(e=>e!==lo):"feature_polygon"===e&&(t=t.filter(e=>e!==oo&&e!==ho&&e!==ao))}):t=[uo,po],t}async componentWillLoad(){({strings:this.strings}=await(0,r.u)(this.hostElement,(0,s.a)("."))),this.createSketch()}async disconnectedCallback(){await this.removeSketch(),this.mutationObserver?.disconnect()}async removeSketch(){this.sketchUpdated=!1,this.reactiveUtilsHandler?.remove(),await(this.sketchElement?.done()),this.sketchElement?.removeEventListener("arcgisContentReRender",this.handleSketchContentReRender),this.sketchElement?.removeEventListener("arcgisChange",this.handleSketchUpdated),this.sketchElement?.remove(),this.sketchElement=void 0}setupMutationObserver(){this.mutationObserver=new MutationObserver(e=>{e.forEach(e=>{if(e.addedNodes.length>0){void 0!==Array.from(e.addedNodes).find(e=>"ARCGIS-MAP-CONFIG-SKETCH-LAYER-EDITOR-TOOLS"===e.nodeName)&&this.analysisSketchToolsRendered.emit(!0)}})}),this.mutationObserver.observe(document,{childList:!0,subtree:!0})}updateSketchTools(){const e=this.mapLayers.filter(e=>!0===e?.title?.includes(this.sketchLayerTitle));void 0!==this.sketchElement&&(this.sketchElement.hideSelectionTools=!(e.length>0),this.sketchElement.updateSketchTools())}createSketchLayer(){this.setSketchLayerName(),this.sketchLayer=(0,r.an)(this.sketchLayerTitle)}setSketchLayerName(){let e=`${this.toolTitle?.trim()??""} ${this.label} ${this.strings.sketchLayerTitle}`.trim();e=(0,r.ao)(e);const t=this.mapView?.map?.allLayers.filter(t=>!0===t?.title?.includes(e))??[];if(0===t?.length)this.sketchLayerTitle=e;else{let t=!1;for(;!1===t;){const i=`${e} ${this.sketchLayerTitleNumber}`;t=void 0===this.mapView?.map?.allLayers.find(e=>e?.title===i),!0===t?this.sketchLayerTitle=i:this.sketchLayerTitleNumber+=1}}}handleMapViewLayersChange(){const e=this.mapView?.map?.allLayers.find(e=>e.title===this.sketchLayerTitle);void 0===e&&this.analysisSketchRemove.emit()}render(){return(0,s.h)(s.H,{key:"fe1cf7e2425f8c1d2c6070290e09143a6bbee61d"})}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,s.d)(this)}static get watchers(){return{mapLayers:["mapLayersChange"]}}};fo.style="";const mo="analysis-popover",go="popover-content",yo="js-app-flyout",vo="toggle-select-all-button",bo="analysis--rtl",_o="fields-message",wo="list-item",ko=class{constructor(e){(0,s.r)(this,e),this.analysisSummaryFieldSelectionDone=(0,s.c)(this,"analysisSummaryFieldSelectionDone",6),this.analysisSummaryFieldPopoverClose=(0,s.c)(this,"analysisSummaryFieldPopoverClose",7),this.showFieldDescription=!1,this.usePopupTemplatesInfo=!0,this.allowDateType=!1,this.allowDateOnlyType=!1,this.allowTimeOnlyType=!1,this.allowStringType=!1,this.selection=new Set,this.showSelectAllString=!0,this.hasEmptySearchResults=!1,this.onSelectionDone=()=>{this.analysisSummaryFieldSelectionDone.emit(this.selection),this.open=!1},this.onCalciteListItemChange=e=>{const t=e.target,i=t.value,s=new Set(this.selection);t.selected?s.add(i):s.delete(i),this.selection=s},this.handleSelectAllClick=()=>{this.showSelectAllString?this.selection=new Set(this.fields?.map(e=>e.name)):this.selection=new Set},this.handleCalciteListFilterChange=e=>{const t=e.target;this.hasEmptySearchResults=0===t.filteredData.length,this.searchString=t.filterText},this.renderMessages=()=>{const{noInputSelected:e,noFieldsAvailable:t,noSearchResults:i}=this.strings,n=(0,r.y)(this.layer)&&(0,s.h)("calcite-label",{class:_o},this.noLayersText??(0,r.a)(void 0!==this.layerInputLocalizedLabel?e.withLayerInputLabel:e.withoutLayerInputLabel,{layerInputLabel:this.layerInputLocalizedLabel})),a=(0,r.P)(this.layer)&&0===this.fields?.length&&(0,s.h)("calcite-label",{class:_o},this.noFieldsText??(0,r.a)(t,{layerName:this.layer.title})),o=this.noSearchResults&&(0,s.h)("calcite-label",{class:_o},i);return(0,s.h)("div",null,n,a,o)},this.renderFields=()=>(0,s.h)("calcite-list",{class:go,label:"",selectionMode:"multiple",filterEnabled:!0,onCalciteListFilter:this.handleCalciteListFilterChange},this.shouldDisplaySelectAllButton&&(0,s.h)("calcite-button",{class:vo,appearance:"transparent",onClick:this.handleSelectAllClick,scale:r.g.Scale},this.showSelectAllString?this.strings.selectAll:this.strings.deselectAll),this.fields?.map(e=>{const{name:t,alias:i,type:r,description:n}=e;return(0,s.h)("calcite-list-item",{onCalciteListItemSelect:this.onCalciteListItemChange,selected:this.selection.has(t),key:t,value:t,label:i??void 0,description:this.showFieldDescription?n??void 0:`{${t}}`,"data-field-type":r,class:wo})}),this.renderMessages())}async layerChange(){void 0!==this.layer?(this.fields=await(0,r.ap)(this.layer,this.usePopupTemplatesInfo),this.fields=(0,r.aq)({fields:this.fields,layer:this.layer,allowObjectId:!1,allowDateType:this.allowDateType,allowStringType:this.allowStringType,allowDateOnlyType:this.allowDateOnlyType,allowTimeOnlyType:this.allowTimeOnlyType,allowBigIntType:!0,allowGeometryFields:!1})):this.fields=[]}onSelectionChange(){this.showSelectAllString=this.selection.size!==this.fields?.length}get noSearchResults(){return""!==this.searchString&&this.hasEmptySearchResults}get shouldDisplaySelectAllButton(){return(this.fields?.length??0)>0&&!this.noSearchResults}async componentWillLoad(){({strings:this.strings,dir:this.dir}=await(0,r.u)(this.hostElement,(0,s.a)("."))),await this.layerChange(),this.onSelectionChange()}componentDidLoad(){setTimeout(()=>requestAnimationFrame(()=>this.summaryFieldsPopover?.setFocus()),1),setTimeout(()=>{this.summaryFieldsPopover?.reposition?.()},r.g.PopoverTimer)}async reposition(){await(this.summaryFieldsPopover?.reposition?.())}render(){const e=this.referenceElement?.offsetWidth;return(0,s.h)(s.H,{key:"a4d5b10e3be4c151b514f0844a5dca24c3afc443",dir:this.dir,class:`${mo} ${yo} ${"rtl"===this.dir?bo:""}`},(0,s.h)("calcite-popover",{key:"ab37d66504b62ab8e7357d82710f7f9912fc7243",ref:e=>{this.summaryFieldsPopover=e},autoClose:!0,label:this.strings.summaryFieldsPopover,referenceElement:this.referenceElement,placement:"trailing",closable:!0,heading:this.strings.addField,open:this.open,focusTrapDisabled:!0,onCalcitePopoverClose:()=>this.analysisSummaryFieldPopoverClose.emit()},(0,s.h)("calcite-panel",{key:"6de51c779db1e802e0dbf820582dc126c8a8aabe",style:{width:void 0!==e?`${e}px`:void 0,maxWidth:r.g.MaxPopoverWidth}},this.renderFields(),(0,s.h)("calcite-button",{key:"767284fa705e7b4499aae0d6789969c49d16f492",slot:"footer",width:"full",name:"done",scale:"m",onClick:this.onSelectionDone},this.strings.done))))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,s.d)(this)}static get watchers(){return{layer:["layerChange"],usePopupTemplatesInfo:["layerChange"],selection:["onSelectionChange"]}}};ko.style=":root{--analysis-quarter-spacing:0.25rem;--analysis-half-spacing:0.5rem;--analysis-three-quarter-spacing:0.75rem;--analysis-full-spacing:1rem;--analysis-component-default-width:100%;--analysis-ui-border-input:var(--calcite-color-border-2);--analysis-label-font-size:var(--calcite-font-size--2);--analysis-popover-content-min-height-s:7.5rem;--analysis-popover-content-min-height-m:8.75rem;--analysis-popover-content-max-height:60vh;--analysis-popover-content-height:45vh;--analysis-popover-z-index:calc(var(--calcite-z-index-overlay) - 1)}:host{display:flex}.popover-content{height:var(--analysis-popover-content-height)}.toggle-select-all-button{margin:0;margin-left:var(--analysis-quarter-spacing);margin-bottom:var(--analysis-quarter-spacing)}.chip-group{margin:var(--analysis-quarter-spacing)}.fields-message{background-color:var(--calcite-color-background);padding:var(--analysis-three-quarter-spacing)}.list-item{--calcite-font-size--1:var(--calcite-font-size--2)}:host(.analysis--rtl) .toggle-select-all-button{margin:0;margin-right:var(--analysis-quarter-spacing);margin-top:var(--analysis-quarter-spacing)}";const xo=class{constructor(e){(0,s.r)(this,e),this.analysisTimeUnitInputChange=(0,s.c)(this,"analysisTimeUnitInputChange",7),this.analysisHelpClick=(0,s.c)(this,"analysisHelpClick",7),this.required=!1,this.numberType="float",this.readOnly=!1,this.hideHelp=!1,this.isValid=!0,this.timeChange=e=>{const t=e?.target,i=t?.value,s=this.value?.units;void 0===t||Array.isArray(i)||"multi"===(e?.target).selectionMode||(void 0!==i&&"number"==typeof i?(this.value={units:s,time:i},this.onUnitChoiceListChange()):this.value=void 0,this.analysisTimeUnitInputChange.emit())},this.unitChanged=e=>{const t=e?.target;this.value={time:this.value?.time,units:t?.value},this.validate(),void 0!==this.value?.time&&this.analysisTimeUnitInputChange.emit()}}onUnitChoiceListChange(){const e=this.value?.units;void 0===this.unitChoiceList||void 0!==e&&this.unitChoiceList.includes(e)||(this.value={time:this.value?.time,units:this.unitChoiceList[0]})}async componentWillLoad(){({strings:this.strings,dir:this.dir}=await(0,r.u)(this.hostElement,(0,s.a)("."))),"integer"===this.numberType&&void 0!==this.value?.time&&(this.value={units:this.value?.units,time:Math.round(this.value?.time)},this.analysisTimeUnitInputChange.emit()),this.onUnitChoiceListChange()}async checkValidity(){return await this.validate(),Promise.resolve(this.isValid)}async validate(){const e=this.hostElement.shadowRoot?.querySelector("analysis-number-input"),t=await(e?.checkValidity())??!1,i=!this.required||void 0!==this.value?.units&&this.unitChoiceList?.includes(this.value?.units);return this.isValid=t&&i,Promise.resolve()}render(){return(0,s.h)(s.H,{key:"aca446c97dc4379d650ccbe0eb101ad84e3f24fb"},(0,s.h)(n.F,{key:"927d58929201d6c39f83fb39b2249036da1e19e5",label:this.label,required:this.required,value:this.value,minimum:this.minimum,maximum:this.maximum,excludeMinValue:this.excludeMinValue,excludeMaxValue:this.excludeMaxValue,placeholderText:this.placeholderText,strings:this.strings,dir:this.dir,unitChoiceList:this.unitChoiceList,hideHelp:this.hideHelp??!0,amountChoiceList:this.timeChoiceList,amountChange:this.timeChange,unitChanged:this.unitChanged,analysisHelpClick:this.analysisHelpClick,choiceListLabels:this.choiceListLabels,scale:r.g.Scale,numberType:this.numberType,readOnly:this.readOnly}))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,s.d)(this)}static get watchers(){return{unitChoiceList:["onUnitChoiceListChange"]}}};xo.style=":root{--analysis-quarter-spacing:0.25rem;--analysis-half-spacing:0.5rem;--analysis-three-quarter-spacing:0.75rem;--analysis-full-spacing:1rem;--analysis-component-default-width:100%;--analysis-ui-border-input:var(--calcite-color-border-2);--analysis-label-font-size:var(--calcite-font-size--2);--analysis-popover-content-min-height-s:7.5rem;--analysis-popover-content-min-height-m:8.75rem;--analysis-popover-content-max-height:60vh;--analysis-popover-content-height:45vh;--analysis-popover-z-index:calc(var(--calcite-z-index-overlay) - 1)}:host{display:flex;flex-direction:column;--calcite-color-border-input:var(--analysis-ui-border-input)}.controls-container{display:flex;column-gap:5%}.control{flex:1 1 0}.text{cursor:pointer;padding-bottom:var(--analysis-quarter-spacing);margin-block-start:0;margin-block-end:0}.unit-select{margin-bottom:var(--analysis-half-spacing)}";const Co=class{constructor(e){(0,s.r)(this,e),this.open=!0}render(){const e=this.popoverOptions?.referenceElement,t=e?.getBoundingClientRect().width,i={...this.popoverOptions,width:void 0!==t?`${t}px`:void 0,open:this.open};return(0,s.h)("calcite-popover",{key:"0164e93de41e6f9e215c6c254c69d59ec9003e47",...i},this.renderPopoverContent())}get hostElement(){return(0,s.d)(this)}}}}]);