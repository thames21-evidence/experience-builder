/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_com-0186f1.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_com-0186f1"],{31861:(e,i,s)=>{s.d(i,{b:()=>a,u:()=>l});var t=s(56451);function a(e,i,s,t,a){const l=e?.length?n(e,i.bins[t]):o(e.stops,i.bins[t]);l&&(a.setAttribute("fill",l.toHex()),a.setAttribute("opacity",`${Math.max(l.a,.2)}`)),s?.push(a)}function l(e,i,s,t){e&&i?.forEach((i,a)=>{const l=(t||e.histogramConfig)?.bins?.[a],r="breaks"in e?n(s||e.breaks,l):o((s||e).stops,l);r&&(i.setAttribute("fill",r.toHex()),i.setAttribute("opacity",`${Math.max(r.a,.2)}`))})}function o(e,i){if(!i)return;const s=(i.maxValue-i.minValue)/2+i.minValue;let a=e[0],l=e[e.length-1];const o=a.value,n=l.value;if(s<o)return a.color;if(s>n)return l.color;const r=e.filter(e=>e.value===s);if(r.length>0)return r[0].color;a=null,l=null,e.forEach((i,t)=>{!a&&!l&&i.value>=s&&(a=e[t-1],l=i)});const u=(s-a.value)/(l.value-a.value);return t.default.blendColors(a.color,l.color,u)}function n(e,i){if(!i)return;const s=(i.maxValue-i.minValue)/2+i.minValue;let t=e[0],a=e[e.length-1];if(s<t.min||s>a.max)return;const l=e.filter(e=>e.min===s);return l.length>0?l[0].color:(t=e[e.length-1],a=null,e.forEach((i,l)=>{!a&&i.min>=s&&(t=e[l-1],a=i)}),t.color)}},47550:(e,i,s)=>{s.d(i,{a:()=>u,b:()=>r,g:()=>m,u:()=>n});var t=s(5294),a=s(52797),l=(s(54312),s(44345),s(55448),s(34031),s(63438),s(5933),s(28927),s(83368),s(89704),s(66228)),o=(s(56451),s(31521),s(23054),s(5077),s(23795),s(17902),s(87420),s(30161),s(81734),s(1225));s(83552),s(77462),s(49403),s(10281),s(83930),s(66617),s(10628),s(59640),s(64451),s(6176),s(10454),s(29614),s(94916),s(52554),s(2156),s(4038),s(49851),s(75054),s(15223),s(70169),s(47207),s(70852),s(48103),s(39423),s(85681),s(18444),s(42411),s(9767),s(38218),s(91914),s(86605),s(68196),s(440),s(46547),s(6238),s(7299);function n(e,i){const s=(0,o.g)(e),n=t.clone(s.classBreakInfos);s.classBreakInfos=[],n.forEach((e,t)=>{e=function(e,i,s,t){if((0,l.i)(i)&&0!==i)if(i<1){const l=Math.round(1/i);e.minValue="first"===t?Math.floor(e.minValue/i)/l:Math.round(e.minValue/i)/l,e.maxValue="last"===t?Math.ceil(e.maxValue/i)/l:Math.round(e.maxValue/i)/l,e.label=`${s>0?"> ":""}${e.minValue.toLocaleString(a.getLocale(),{maximumSignificantDigits:15})} - ${e.maxValue.toLocaleString(a.getLocale(),{maximumSignificantDigits:15})}`}else e.minValue="first"===t?Math.floor(e.minValue/i)*i:Math.round(e.minValue/i)*i,e.maxValue="last"===t?Math.ceil(e.maxValue/i)*i:Math.round(e.maxValue/i)*i,e.label=`${s>0?"> ":""}${e.minValue.toLocaleString()} - ${e.maxValue.toLocaleString()}`;return e}(e,i,t,0===t?"first":t===n.length-1?"last":void 0),s.addClassBreakInfo({minValue:e.minValue,maxValue:e.maxValue,symbol:e.symbol,label:e.label})})}function r(e,i){const s=(0,o.g)(e).classBreakInfos;let t=i,a=Number.POSITIVE_INFINITY;s.forEach(e=>{t||(t=Math.max(d(e.minValue),d(e.maxValue))),a=Math.min(a,e.maxValue-e.minValue)});const l=[];return a>1e7?(l.push(1e7),l.push(1e6),l.push(1e5),l.push(1e4),l.push(1e3),l.push(100),l.push(10),t>0&&l.push(1),t>1&&l.push(.1),t>2&&l.push(.01)):a>1e6?(l.push(1e6),l.push(1e5),l.push(1e4),l.push(1e3),l.push(100),l.push(10),t>0&&l.push(1),t>1&&l.push(.1),t>2&&l.push(.01)):a>1e5?(l.push(1e5),l.push(1e4),l.push(1e3),l.push(100),l.push(10),t>0&&l.push(1),t>1&&l.push(.1),t>2&&l.push(.01)):a>1e4?(l.push(1e4),l.push(1e3),l.push(100),l.push(10),t>0&&l.push(1),t>1&&l.push(.1),t>2&&l.push(.01)):a>1e3?(l.push(1e3),l.push(100),l.push(10),t>0&&l.push(1),t>1&&l.push(.1),t>2&&l.push(.01),t>3&&l.push(.001)):a>100?(l.push(100),l.push(10),t>0&&l.push(1),t>1&&l.push(.1),t>2&&l.push(.01),t>3&&l.push(.001),t>4&&l.push(1e-4),t>5&&l.push(1e-5)):a>10?(l.push(10),t>0&&l.push(1),t>1&&l.push(.1),t>2&&l.push(.01),t>3&&l.push(.001),t>4&&l.push(1e-4),t>5&&l.push(1e-5),t>6&&l.push(1e-6)):a>1?(t>0&&l.push(1),t>1&&l.push(.1),t>2&&l.push(.01),t>3&&l.push(.001),t>4&&l.push(1e-4),t>5&&l.push(1e-5),t>6&&l.push(1e-6)):a>.1?(t>1&&l.push(.1),t>2&&l.push(.01),t>3&&l.push(.001),t>4&&l.push(1e-4),t>5&&l.push(1e-5),t>6&&l.push(1e-6)):a>.01?(t>2&&l.push(.01),t>3&&l.push(.001),t>4&&l.push(1e-4),t>5&&l.push(1e-5),t>6&&l.push(1e-6)):a>.001?(t>3&&l.push(.001),t>4&&l.push(1e-4),t>5&&l.push(1e-5),t>6&&l.push(1e-6),t>7&&l.push(1e-7)):a>1e-4?(t>4&&l.push(1e-4),t>5&&l.push(1e-5),t>6&&l.push(1e-6),t>7&&l.push(1e-7),t>8&&l.push(1e-8)):a>1e-5&&(t>5&&l.push(1e-5),t>6&&l.push(1e-6),t>7&&l.push(1e-7),t>8&&l.push(1e-8),t>9&&l.push(1e-9)),l}function u(e){const i=(0,o.g)(e);let s=1e10;return i.classBreakInfos.forEach(e=>{s=Math.min(s,h(e.minValue)),s=Math.min(s,h(e.maxValue))}),s}function d(e){let i=1;for(;Math.round(e*i)/i!==e;)i*=10;return Math.log(i)/Math.LN10}function h(e){let i=1e-8;for(;c(Math.round(e/i)*i)===e;)i*=10;return i/10}function c(e){return Number.parseFloat(e.toPrecision(12))}function m(e){let i=0;e.forEach(e=>{(0,l.i)(e.value)?i=Math.max(d(c(e.value)),i):((0,l.i)(e.minValue)&&(i=Math.max(d(c(e.minValue)),i)),(0,l.i)(e.maxValue)&&(i=Math.max(d(c(e.maxValue)),i)),(0,l.i)(e.min)&&(i=Math.max(d(c(e.min)),i)),(0,l.i)(e.max)&&(i=Math.max(d(c(e.max)),i)))}),i=Math.min(i,3);const s=e[0],t=e[e.length-1],a=Math.min(s.minValue??s.min??s.value,t.minValue??t.min??t.value),o=Math.max(s.maxValue??s.max??s.value,t.maxValue??t.max??t.value)-a;return o/e.length<2e-7?i=8:o/e.length<2e-6?i=7:o/e.length<2e-5?i=6:o/e.length<2e-4?i=5:o/e.length<.002?i=4:o/e.length<.02?i=3:o/e.length<.2?i=Math.max(i,2):o/e.length<2&&(i=Math.max(i,1)),Math.round(i)}},59701:(e,i,s)=>{s.r(i),s.d(i,{ArcgisMapConfigSmartMappingRelationshipColorSlider:()=>x});var t=s(73679),a=s(4395),l=s(85643),o=s(56451),n=s(22001),r=s(24457),u=s(75430),d=s(1225),h=(s(54312),s(44345),s(55448),s(52797),s(34031),s(63438),s(5933),s(75518)),c=(s(89704),s(47550)),m=(s(5294),s(31521),s(23054),s(5077),s(23795),s(17902),s(87420),s(30161),s(81734),s(18423),s(96086),s(91813),s(21255),s(13078),s(21303),s(12627),s(31861)),f=s(65595),p=(s(77462),s(49403),s(66617),s(10628),s(59640),s(64451),s(6176),s(10454),s(29614),s(94916),s(52554),s(2156),s(4038),s(49851),s(75054),s(15223),s(70169),s(47207),s(70852),s(48103),s(39423),s(78778)),g=(s(18444),s(42411),s(9767),s(38218),s(91914),s(86605),s(68196),s(440),s(46547),s(28927),s(6238),s(7299),s(73801)),S=s(20936);const b=a.AH`.slider-box{height:310px;margin-top:6px}.esri-classed-color-slider{min-width:200px}.esri-classed-color-slider__histogram-container{width:70px}.esri-classed-color-slider .esri-slider .esri-slider__content{height:200px}.esri-classed-color-slider .esri-slider .esri-slider__label,.esri-classed-color-slider .esri-slider .esri-slider__min,.esri-classed-color-slider .esri-slider .esri-slider__max{text-decoration:underline}.esri-classed-color-slider .esri-slider .esri-slider__label:hover,.esri-classed-color-slider .esri-slider .esri-slider__min:hover,.esri-classed-color-slider .esri-slider .esri-slider__max:hover{border:1px solid #bbb;background-color:#f3f3f3;text-decoration:none;z-index:1}.slider-container{overflow:hidden}`;class x extends g.WF{constructor(){super(...arguments),this.currentBreakValues=[],this.styleSheetStatus="not-loaded",this.smartMappingState=(0,f.u)(),this.histogramStatus=d.s.MISSING,this.statisticsStatus=d.s.MISSING,this.arcgisSmartMappingRelationshipColorSliderChange=(0,g.lh)(),this.arcgisSmartMappingRelationshipColorSliderError=(0,g.lh)()}static{this.properties={histogramStatus:16,statisticsStatus:16,fieldPos:9}}static{this.styles=b}async updateStatistics(){this.statisticsStatus=d.s.MISSING,this.statistics=void 0,this.histogramStatus=d.s.MISSING,this.histogram=void 0,this.colorSlider?.destroy(),this.colorSlider=void 0,this.getStatistics()}load(){this.flowItemNode=(0,S.el)(this.el,"calcite-flow-item"),this.getStatistics()}divRefHandler(e){if(e)if(this.colorSlider.container)e.append(this.colorSlider.container);else{const i=document.createElement("div");i.classList.add("slider-container"),e.append(i),this.colorSlider.container=i}}createColorSliderChangeEvents(){this.colorSlider&&(this.colorSlider.on("min-change",e=>{e.value>this.currentBreakValues[0].max?this.onMinMaxChange(this.currentBreakValues[0].max,this.colorSlider.slider.max):this.onMinMaxChange(e.value,this.colorSlider.slider.max)}),this.colorSlider.on("max-change",e=>{e.value<this.currentBreakValues[this.currentBreakValues.length-1].min?this.onMinMaxChange(this.colorSlider.slider.min,this.currentBreakValues[this.currentBreakValues.length-1].min):this.onMinMaxChange(this.colorSlider.slider.min,e.value)}),this.colorSlider.on("thumb-change",()=>{this.updateRendererBreaks(this.colorSlider.breaks)}),this.colorSlider.on("thumb-drag",()=>{this.updateRendererBreaks(this.colorSlider.breaks)}))}getClassBreaksColors(){const{smartMappingState:e}=this,i=(0,d.g)(e),s=i.authoringInfo,t=(0===this.fieldPos?s.field1.classBreakInfos:s.field2.classBreakInfos).map(e=>({min:e.minValue,max:e.maxValue,color:new o.default([0,0,0])}));let a=new o.default([0,0,0,1]),l=new o.default([0,0,0,1]);i.uniqueValueGroups[0].classes.forEach(e=>{"HH"===e.values[0].value?a=(0,d.i)(e.symbol):"LL"===e.values[0].value&&(l=(0,d.i)(e.symbol))});let n=(a.r+a.g+a.b)/3;const r=(l.r+l.g+l.b)/3;if(2===t.length)t[1].color=new o.default([n,n,n,1]),t[0].color=new o.default([r,r,r,1]);else if(3===t.length)t[2].color=new o.default([n,n,n,1]),n=(n+r)/2,t[1].color=new o.default([n,n,n,1]),t[0].color=new o.default([r,r,r,1]);else{t[3].color=new o.default([n,n,n,1]);let e=n+(r-n)/3;t[2].color=new o.default([e,e,e,1]),e=n+2*(r-n)/3,t[1].color=new o.default([e,e,e,1]),t[0].color=new o.default([r,r,r,1])}return t}getHistogram(e,i,s,t,a){const{layer:l,useFeatureReduction:o,mapView:n}=this.smartMappingState,r=l;(s=s||this.statistics)&&0!==s.count&&(this.histogramStatus=d.s.IN_PROGRESS,(0,u.default)({layer:r,view:n,field:e.field??void 0,numBins:50,minValue:t??s.min,maxValue:a??s.max,normalizationField:i,forBinning:o}).then(e=>{this.histogram=e,this.histogramStatus=d.s.SUCCESS},e=>{console.log("error-histogram",e),this.histogramStatus=d.s.FAILED}))}getStatistics(){const{smartMappingState:e}=this,{layer:i,useFeatureReduction:s,mapView:t}=e,a=i,l=(0,d.g)(e).authoringInfo,o=0===this.fieldPos?l.field1:l.field2,n=o.classBreakInfos;if(!n||this.statistics)return;const u={field:o.field,simpleFieldType:d.J.NUMBER},h=o.normalizationField;let c=n[0].minValue,m=n[n.length-1].maxValue;this.statisticsStatus=d.s.IN_PROGRESS,(0,r.default)({layer:a,view:t,field:o.field,normalizationField:h,forBinning:s,outStatisticTypes:{exclude:["median"]}}).then(e=>{if(0===e.count)e.min=0,e.max=100,e.avg=(m+c)/2;else if(!(0,d.V)(e.avg)||!(0,d.V)(e.min)||!(0,d.V)(e.max))return void(this.statisticsStatus=d.s.FAILED);e=(0,d.au)(e),({min:c,max:m}=(0,d.au)({min:c,max:m})),c=c??e.min??void 0,m=m??e.max??void 0,this.statistics=e,this.statisticsStatus=d.s.SUCCESS,this.getHistogram(u,h,e,c,m)},e=>{console.log("error-summaryStatistics",e),this.statisticsStatus=d.s.FAILED})}onMinMaxChange(e,i){const{statistics:s,smartMappingState:t}=this,a=(0,d.g)(t),l=a.authoringInfo,o=0===this.fieldPos?l.field1:l.field2,n=o.normalizationField,r={field:o.field,simpleFieldType:d.J.NUMBER},u=0===this.fieldPos?l.field1.classBreakInfos:l.field2.classBreakInfos;u[0].minValue=e,u[u.length-1].maxValue=i,(0,h.r)((0,p.u)(t),this.flowItemNode).then(a=>{(0,d.a4)(t,a),this.getHistogram(r,n,s,e,i),(0,m.u)(this.colorSlider,this.colorSliderBars,this.getClassBreaksColors(),this.histogram)}),a.authoringInfo.classificationMethod="manual",this.arcgisSmartMappingRelationshipColorSliderChange.emit()}prepareColorSlider(){const{statistics:e,histogram:i,histogramStatus:s,smartMappingState:t}=this,a=(0,d.g)(t).authoringInfo,l=0===this.fieldPos?a.field1.classBreakInfos:a.field2.classBreakInfos;if(!l||s===d.s.IN_PROGRESS)return!1;let o=l[0].minValue,r=l[l.length-1].maxValue;if(({min:o,max:r}=(0,d.au)({min:o,max:r})),this.colorSlider){const s=this.colorSlider;if("dragging"===s.slider?.state)return!0;const t=this.getClassBreaksColors(),a=(0,c.g)(t),l={histogramConfig:{bins:i?.bins,average:Math.round(10*e.avg)/10,standardDeviation:e.stddev,standardDeviationCount:1,barCreatedFunction:i&&this.colorSliderBars&&m.b.bind(this,t,i,this.colorSliderBars)},min:o??e.min,max:r??e.max,breaks:t,precision:a};(0,m.u)(s,this.colorSliderBars,t,i),this.colorSlider.set(l)}else{const e=this.getClassBreaksColors(),i=(0,c.g)(e),s={histogramConfig:{bins:this.histogram?.bins,average:Math.round(10*this.statistics.avg)/10,standardDeviation:this.statistics.stddev,standardDeviationCount:1,barCreatedFunction:this.histogram&&m.b.bind(this,e,this.histogram,this.colorSliderBars)},min:o??this.statistics.min,max:r??this.statistics.max,breaks:e,precision:i};this.colorSliderBars=[],(0,m.u)(this.colorSlider,this.colorSliderBars,e,this.histogram),this.colorSlider=new n.default(s),this.colorSlider&&this.colorSlider.min===this.colorSlider.max&&this.colorSlider.set(s),this.createColorSliderChangeEvents()}return(0,d.V)(this.colorSlider)}updateRendererBreaks(e){const{smartMappingState:i}=this,s=(0,d.g)(i).authoringInfo,t=0===this.fieldPos?s.field1:s.field2;s.classificationMethod="manual",t.classBreakInfos&&(t.classBreakInfos.forEach((i,s)=>{(i.minValue!==e[s].min||i.maxValue!==e[s].max)&&(i.minValue=e[s].min,i.maxValue=e[s].max,this.currentBreakValues[s].min=e[s].min,this.currentBreakValues[s].max=e[s].max)}),(0,h.r)((0,p.u)(i),this.flowItemNode).then(e=>{(0,d.a4)(i,e),(0,m.u)(this.colorSlider,this.colorSliderBars,this.getClassBreaksColors(),this.histogram)}),this.arcgisSmartMappingRelationshipColorSliderChange.emit())}render(){const{statisticsStatus:e,smartMappingState:i}=this,s=(0,d.g)(i).authoringInfo;if(e===d.s.FAILED||e===d.s.MISSING)return this.colorSlider?.destroy(),this.colorSlider=void 0,"";if(this.statisticsStatus===d.s.IN_PROGRESS||this.histogramStatus===d.s.IN_PROGRESS&&!this.colorSlider)return this.renderColorSliderLoading();{const e=this.prepareColorSlider(),i=0===this.fieldPos?s.field1.classBreakInfos:s.field2.classBreakInfos;if(this.currentBreakValues=i.map(e=>({min:e.minValue,max:e.maxValue})),(e||this.colorSlider)&&this.colorSlider.min!==this.colorSlider.max){const{config:e}=this.smartMappingState;return a.qy`<link rel=stylesheet href=${`${e.jsapiUrl}/themes/light/main.css`} @load=${()=>{this.styleSheetStatus="loaded",this.requestUpdate()}} @error=${()=>{this.styleSheetStatus="failed",this.requestUpdate()}}>${"loaded"===this.styleSheetStatus?this.renderColorSlider():"not-loaded"===this.styleSheetStatus?this.renderColorSliderLoading():null}`}return this.colorSlider&&this.colorSlider.min===this.colorSlider.max?"":this.renderColorSliderLoading()}}renderColorSlider(){const{smartMappingState:e}=this,{_messages:i}=e;return a.qy`<div class="slider-box"><calcite-label>${i.panels.relationship.dataRange}</calcite-label><div ${(0,l.K)(this.divRefHandler)}></div></div>`}renderColorSliderLoading(){const{_messages:e}=this.smartMappingState;return a.qy`<div class="slider-box"><calcite-loader .label=${e.loading}></calcite-loader></div>`}}(0,t.c)("arcgis-map-config-smart-mapping-relationship-color-slider",x)},65595:(e,i,s)=>{s.d(i,{c:()=>o,u:()=>n});var t=s(20936),a=s(1225),l=(s(54312),s(44345),s(55448),s(52797),s(34031),s(63438),s(5933),s(28927),s(83368),s(89704),s(5294),s(18423),s(96086),s(91813),s(21255),s(13078),s(21303),s(12627),s(56451),s(31521),s(23054),s(5077),s(23795),s(17902),s(87420),s(30161),s(81734),s(75698),s(10628),s(59640),s(64451),s(6176),s(83552));s(77462),s(49403),s(10281),s(83930),s(66617),s(10454),s(29614),s(94916),s(52554),s(2156),s(4038),s(49851),s(75054),s(15223),s(70169),s(47207),s(70852),s(48103),s(39423),s(85681),s(18444),s(42411),s(9767),s(38218),s(91914),s(86605),s(68196),s(440),s(46547),s(6238),s(7299);function o(e){e.selectedFields=[],e.layerFields=void 0,e.fields=void 0,e.hideLayerTitle=!1,e.supportsArcade=!1,e.stringFieldsCount=-1,e.dateFieldsCount=-1,e.numberFieldsCount=-1,e.containsFlow=!0,e.oneFeatureResponseStatus=a.s.MISSING,e.selectedAttribute=void 0,e.selectedAttributeText=void 0,e.selectedTypeValue=void 0,e.selectedValue=void 0,e.lastDefault=void 0,e.lastDefaults=void 0,e.dotColorSelected=void 0,e.backgroundStyleSelected=void 0,e.lastSettings=void 0,e.classedSymbolSelectedIdx=void 0,e.allUniqueValues=void 0,e.useFeatureReduction=void 0,e.symbolStylerConfig={},e.allowTimeSeriesConfiguration=!1,e.rasterInfo=void 0}function n(){const e=(0,l.Gk)(),i=e;e.manager.onLoad(()=>{i.smartMappingState=function(e,i){const s=r.get(e);if(s)return s;const a=(0,t.el)(e,i);return a&&"store"in a?(r.set(e,a.store),a.store):null}(e.el,"arcgis-map-config-smart-mapping")})}const r=new WeakMap},75518:(e,i,s)=>{let t,a;function l(e){e.loading=!1}async function o(e,i){return function(e){e.loading=!0,a=!1,t&&clearTimeout(t),t=setTimeout(()=>{l(e),a=!0},6e4)}(i),await e.then(e=>{if(l(i),a)throw new Error("timeout");return e}).catch(e=>{throw l(i),e})}s.d(i,{r:()=>o})},78778:(e,i,s)=>{s.d(i,{a:()=>o,c:()=>n,u:()=>r});var t=s(85681),a=s(1225),l=(s(54312),s(44345),s(55448),s(52797),s(34031),s(63438),s(5933),s(89704),s(5294),s(66228));s(56451),s(31521),s(23054),s(5077),s(23795),s(17902),s(87420),s(30161),s(81734),s(83552),s(77462),s(49403),s(66617),s(10628),s(59640),s(64451),s(6176),s(10454),s(29614),s(94916),s(52554),s(2156),s(4038),s(49851),s(75054),s(15223),s(70169),s(47207),s(70852),s(48103),s(39423),s(18444),s(42411),s(9767),s(38218),s(91914),s(86605),s(68196),s(440),s(46547),s(28927),s(6238),s(7299);async function o(e,i){const{layer:s,useFeatureReduction:o,mapImageSublayer:n,mapView:r}=e,u=s,d=(0,a.d)(e);let h=i.relationshipScheme;if(!h&&["relationship","relationship-size"].includes(d)&&(h=(0,a.S)(e)),i=i||{},"relationship-size"===d){const s=(0,a.g)(e).clone(),t=s.authoringInfo,l=(0,a.p)(s,"spike");if(t&&i.fieldInfos?.length>1&&i.fieldInfos[0].field===t.field1.field&&i.fieldInfos[1].field===t.field2.field){if(s.visualVariables=(0,a.H)(s,"size"),s.authoringInfo.visualVariables=(0,a.P)(s,"size"),(0,a.o)(e)||l){const i=(0,a.e)(e),t=s.uniqueValueInfos.slice();t.forEach(e=>{const s=(0,a.i)(e.symbol);e.symbol=i.clone(),(0,a.y)(e.symbol,s)}),s.uniqueValueInfos=t}return{renderer:s}}}const c=(0,a.a)(e,(0,a.g)(e)),m={layer:u,view:r,field1:{field:i.fieldInfos[0].field},field2:{field:i.fieldInfos[1].field},classificationMethod:"quantile",numClasses:3,focus:"HH",relationshipScheme:h,outlineOptimizationEnabled:!n&&(!(0,l.i)(i.outlineOptimizationEnabled)||i.outlineOptimizationEnabled),sizeOptimizationEnabled:!n&&(!(0,l.i)(i.sizeOptimizationEnabled)||i.sizeOptimizationEnabled),legendOptions:i.legendOptions,defaultSymbolEnabled:!1,forBinning:o};return await t.createRenderer(m).then(e=>((0,a.b)(c,e.renderer),e))}async function n(e,i){const{layer:s,useFeatureReduction:o,mapImageSublayer:n,mapView:r}=e,u=s;i=i||{};const d=(0,a.g)(e),h=(0,a.d)(e),c=d.authoringInfo,m=(0,a.c)(d,"size");if(i.fieldInfos&&i.fieldInfos.length>1&&i.fieldInfos[0].field===c.field1.field&&i.normalizationField1===c.field1.normalizationField&&i.fieldInfos[1].field===c.field2.field&&i.normalizationField2===c.field2.normalizationField&&(delete i.fieldInfos,delete i.normalizationField1,delete i.normalizationField2,(0,a.O)(i)&&!m))return{renderer:d.clone()};let f=i.relationshipScheme;!f&&["relationship","relationship-size"].includes(h)&&(f=(0,a.S)(e));const p=(0,a.a)(e,d),g=i.fieldInfos?i.fieldInfos[0]:{field:c.field1.field,simpleFieldType:a.J.NUMBER},S=i.fieldInfos?i.fieldInfos[1]:{field:c.field2.field,simpleFieldType:a.J.NUMBER},b=void 0!==i.normalizationField1?i.normalizationField1:c.field1.normalizationField,x=void 0!==i.normalizationField2?i.normalizationField2:c.field2.normalizationField,V=d.uniqueValueInfos?.length?d.uniqueValueInfos[0].symbol:null,v=d.defaultSymbol,I=d.defaultLabel,M=i.numClasses?i.numClasses:c.numClasses,C={layer:u,view:r,field1:{field:g?g.field:d.field,normalizationField:b},field2:{field:S?S.field:d.field,normalizationField:x},classificationMethod:i.classificationMethod?i.classificationMethod:"manual"!==c.classificationMethod?c.classificationMethod:"quantile",numClasses:M,focus:i.focus?i.focus:c.focus,relationshipScheme:f,outlineOptimizationEnabled:!n&&((0,l.i)(i.outlineOptimizationEnabled)?i.outlineOptimizationEnabled:!!p.sizeOutlineVisVar),sizeOptimizationEnabled:!n&&((0,l.i)(i.sizeOptimizationEnabled)?i.sizeOptimizationEnabled:!!p.sizeAutoVisVar),legendOptions:i.legendOptions?i.legendOptions:d.legendOptions,defaultSymbolEnabled:(0,l.i)(i.defaultSymbolEnabled)?i.defaultSymbolEnabled:!!d.defaultSymbol,forBinning:o};return await t.createRenderer(C).then(i=>((0,a.b)(p,i.renderer),V&&i.renderer.uniqueValueInfos.forEach(e=>{const i=V.clone();(0,a.y)(i,(0,a.i)(e.symbol)),e.symbol=i}),(0,a.g)(e).uniqueValueInfos.forEach(e=>{const s=i.renderer.uniqueValueInfos.find(i=>e.value===i.value);s&&(s.label=e.label)}),v&&(i.renderer.defaultSymbol=v,i.renderer.defaultLabel=I),i))}async function r(e,i){i=i||{};const s=(0,a.g)(e),l=s.authoringInfo;return await t.updateRenderer({field1:l.field1,field2:l.field2,numClasses:i.numClasses?i.numClasses:l.numClasses,focus:i.focus?"none"===i.focus?null:i.focus:l.focus,colors:i.colors,renderer:s})}}}]);