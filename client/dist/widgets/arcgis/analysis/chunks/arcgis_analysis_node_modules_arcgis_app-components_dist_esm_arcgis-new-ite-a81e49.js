/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-new-ite-a81e49.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-new-ite-a81e49"],{57067:(e,i,t)=>{t.r(i),t.d(i,{arcgis_new_item_pages_data_store_select_database:()=>o});var r=t(87849),a=t(3826),n=t(64589),s=t(95878),l=t(59317);t(37762),t(41473),t(60958),t(83692),t(931),t(93814),t(54251),t(86686),t(58573),t(76246),t(15912),t(1536),t(88878),t(46904),t(72257),t(86562),t(15332),t(74695),t(24869),t(27137),t(29599),t(32478);const o=class{constructor(e){(0,r.r)(this,e),this.newItemUpdatePage=(0,r.c)(this,"newItemUpdatePage",7),this.missingHostingServer=!1,this.handlePublisherFileDropEvent=e=>{const i=e.detail,t=`${this.hostingServer.adminUrl}/admin/uploads/upload`,r=new FormData;r.append("itemFile",i),this.resetPublisherFile(),this.importingPublisherFile=!0,(0,n.h)(t,r,this.hostingServer.adminUrl||"").then(e=>{this.publisherFileName=e.result.itemName,this.publisherFileProps=e.result.connectionStringProps,this.publisherConnectionString=e.result.connectionString,this.importingPublisherFile=!1})},this.handleServerFileDropEvent=e=>{const i=e.detail,t=`${this.hostingServer.adminUrl}/admin/uploads/upload`,r=new FormData;r.append("itemFile",i),this.resetServerFile(),this.importingServerFile=!0,(0,n.h)(t,r,this.hostingServer.adminUrl||"").then(e=>{this.serverFileName=e.result.itemName,this.serverFileProps=e.result.connectionStringProps,this.serverConnectionString=e.result.connectionString,this.importingServerFile=!1})},this.error=null,this.allowedExtensions=["sde"],this.serverDatabaseOption=null,this.publisherFiles=void 0,this.publisherFileName=void 0,this.serverFiles=void 0,this.serverFileName=void 0,this.publisherConnectionString="",this.serverConnectionString="",this.importingPublisherFile=!1,this.importingServerFile=!1,this.hostingServer=void 0,this.publisherFileProps=void 0,this.serverFileProps=void 0}async componentWillLoad(){this.i18n=s.u.i18n.dataStoreSelectDatabase,this.hostingServer=a.a.hostingServer,this.hostingServer||(this.missingHostingServer=!0),this.publisherConnectionString=a.a.publisherConnectionString,this.publisherFileName=a.a.publisherFileName,this.publisherFileProps=a.a.publisherFileProps,this.serverDatabaseOption=a.a.serverDatabaseOption||null,this.serverConnectionString=a.a.serverConnectionString,this.serverFileName=a.a.serverFileName,this.serverFileProps=a.a.serverFileProps}validFileInputs(){const{publisherConnectionString:e,serverConnectionString:i,serverDatabaseOption:t}=this;return e?!("newConnection"===t&&!i)||(this.error="invalidServerConnectionFile",!1):(this.error="invalidPublisherConnectionFile",!1)}handleNext(){if(this.validFileInputs()){const{publisherConnectionString:e,serverConnectionString:i,serverDatabaseOption:t}=this;a.a.publisherConnectionString=e,a.a.publisherFileName=this.publisherFileName,a.a.publisherFileProps=this.publisherFileProps,a.a.serverDatabaseOption=t,"newConnection"===t?(a.a.serverConnectionString=i,a.a.serverFileName=this.serverFileName,a.a.serverFileProps=this.serverFileProps):(a.a.serverConnectionString=null,a.a.serverFileName=null,a.a.serverFileProps=null),this.newItemUpdatePage.emit("dataStoreSelectServerList")}}propIsNotPassword(e){return["ENCRYPTED_PASSWORD_UTF8","ENCRYPTED_PASSWORD"].indexOf(e.key)<=-1}resetPublisherFile(){this.publisherFiles=null,this.publisherFileProps=null,this.publisherConnectionString=null,this.publisherFileName=null}resetServerFile(){this.serverFiles=null,this.serverFileProps=null,this.serverConnectionString=null,this.serverFileName=null}renderErrorItem(){var e,i;const{i18n:t,error:a}=this;return(0,r.h)("arcgis-new-item-alert",{heading:null===(e=t.errors[a])||void 0===e?void 0:e.heading,description:null===(i=t.errors[a])||void 0===i?void 0:i.description,active:null!==a,onAlertDismiss:()=>{this.error=null}})}render(){const{i18n:e,missingHostingServer:i,allowedExtensions:t,publisherFileProps:a,serverFileProps:n,importingPublisherFile:s,importingServerFile:o,serverFileName:c,publisherFileName:d}=this,{config:b}=l.c;return(0,r.h)("div",{key:"4a9204295db9ff4481b62057753e8c0e26a6ce6b"},(0,r.h)("arcgis-new-item-description",{key:"dd5492cc1077ba6c4be4cc17a952f28954346737",header:i?e.errors.hostingServerError:e.heading}),!i&&(0,r.h)("div",{key:"c642a7208d0194bcc201d53fb58a9d2679c9d6a7"},(0,r.h)("div",{key:"5f65faed6353cbb5560d4c99c4ce014daad1f658",class:"input-label"},(0,r.h)("calcite-label",{key:"4b9d4effd3b9d02314b7295438636d3b2148a0bd"},e.publisherDatabaseConnection," ",e.sdeFile,!s&&!a&&(0,r.h)("arcgis-drag-and-drop",{key:"91b692852e385b341a239c49a78d225efb2dbc69",files:this.publisherFiles,allowedExtensions:t,insideModal:!0,fullHeight:!0,config:b,onArcgisDropSuccess:this.handlePublisherFileDropEvent},(0,r.h)("div",{key:"d4f6645da883ba80da28db0d7fc7f0e3e38a0d55",class:"file-input"},(0,r.h)("input",{key:"755d7507ae1d099341416a053d6a7b0990d2eb40",class:"hidden-file-input",onChange:e=>{this.publisherFiles=Object.assign({},e.target.files)},ref:e=>this.publisherInputElement=e,accept:null==t?void 0:t.map(e=>`.${e}`).join(","),tabIndex:-1,type:"file"}),(0,r.h)("svg",{key:"43ca5327dfa6ac20c7af92a40ea181726dfeaf81",width:"42",height:"54",viewBox:"0 0 42 54",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false"},(0,r.h)("path",{key:"4d2575a9c1ec344789499d8af41497b3df02b476",d:"M31.566 0H0V53.8H41.8V10.234L31.566 0ZM31.8 1.366L40.434 10H31.8V1.366ZM0.799999 53V0.8H31V10.8H41V53H0.799999Z",fill:"#6A6A6A"}),")",(0,r.h)("path",{key:"d7c79b43e9b1a37d309f36730d80e476403a61d2","fill-rule":"evenodd","clip-rule":"evenodd",d:"M20.9004 38V25.707L18.2544 28.354L17.5474 27.647L21.4004 23.793L25.2544 27.647L24.5474 28.354L21.9004 25.707V38H20.9004ZM14.9004 21H27.9004V20H14.9004V21Z",fill:"#6A6A6A"})),(0,r.h)("div",{key:"e9e2eab53bc93428417d0c24278ae654a89f6dad",class:"text-container"},(0,r.h)("h3",{key:"13b148e61a4c3b5838c6806c4932ce05bd11b0a0",class:"device-select"},e.dragAndDropOrSelectFile)),(0,r.h)("button",{key:"3c2470c1bffe4c03fad8c1b392120b5af2e883e2",class:"file-browser-button",onClick:()=>{var e;return null===(e=this.publisherInputElement)||void 0===e?void 0:e.click()}},(0,r.h)("span",{key:"9d4f0ea8404286914e0541dfb2d13bd1c2eba3e0",class:"file-browser-button__icon"},(0,r.h)("calcite-icon",{key:"604d5470043f9077e9dd9a2461aedbfa49772eb8",icon:"desktop"})),(0,r.h)("span",{key:"e8d1f3ae79450a042a6d0c265c350a38d86f5e2f",class:"file-browser-button__text"},e.selectFile)))),s&&(0,r.h)("div",{key:"4ff9dc6be265dc110391e7ef8471dd1c3411ce10",class:"loader-container"},(0,r.h)("calcite-loader",{key:"33f9fcd4ee3ba33cdfbbc26e6929b15df623b914",inline:!0,label:"importing-publisher-file-loader"}),e.importingConnectionFile),a&&(0,r.h)("div",{key:"3a547f5124ad55cd38d4f943b61438734fd30b50"},(0,r.h)("table",{key:"ab727cf6a708fa719f15e30089eb0f152ea67d02",class:"database-connection-table"},(0,r.h)("thead",{key:"0f319d5d0aa201664050ed6bc80f5af63fe56003"},(0,r.h)("tr",{key:"a9c67a7668966eed952acee7e37f93ce311fdd00"},(0,r.h)("th",{key:"09264804d77100b83887e4c31b52ca8f63548468",colSpan:2},e.fileChosen,":"," ",(0,r.h)("span",{key:"edbc80510ff16691fe5fc5249d68bbf74d401f39",class:"server-file-name"},d)))),(0,r.h)("tbody",{key:"45e80812a1029cbe6c6765574d79392f4aa8aff0"},a.map(e=>this.propIsNotPassword(e)&&(0,r.h)("tr",null,(0,r.h)("td",null,e.key),(0,r.h)("td",{class:"value-cell"},e.value))))),(0,r.h)("div",{key:"a9d06827d22c46fb2882e66092b38e1d657ed5e9",class:"change-file"},(0,r.h)("span",{key:"3852fe39a5f1c56d5ffa544f93798aef34feae32",class:"change-file-btn",onClick:()=>{this.resetPublisherFile()}},e.chooseDifferentFile))))),(0,r.h)("div",{key:"42b6acadafebf40bb23bc4fcc51fd84dd1f45d4f",class:"input-label"},(0,r.h)("calcite-label",{key:"802c0ae089125802e50e4f77977217c9f9cdb02e"},e.serverDatabaseConnection," ",e.sdeFile)),(0,r.h)("calcite-tile-select-group",{layout:"vertical",key:"server-database-connection-select",class:"server-database-connection-select"},(0,r.h)("calcite-tile-select",{class:"tile-select",key:"publisher-database-connection-select",checked:null===this.serverDatabaseOption,description:e.sameAsPublisher,name:"same-as-publisher-database-connection","input-enabled":!0,width:"full",type:"radio",value:null,onCalciteTileSelectChange:()=>{this.serverDatabaseOption=null}}),(0,r.h)("calcite-tile-select",{class:"tile-select",key:"new-server-database-connection-select",checked:"newConnection"===this.serverDatabaseOption,description:e.newConnection,name:"new-server-database-connection","input-enabled":!0,width:"full",type:"radio",value:"newConnection",onCalciteTileSelectChange:()=>{this.serverDatabaseOption="newConnection"}})),"newConnection"===this.serverDatabaseOption&&(0,r.h)("calcite-label",{key:"e99190b178e9798d72d76d9854e6d4d8c4ffb36f"},!o&&!n&&(0,r.h)("arcgis-drag-and-drop",{key:"0f4144b6cce1b5515920ccf65b8e06e31d7ba36e",files:this.serverFiles,allowedExtensions:t,insideModal:!0,fullHeight:!0,config:b,onArcgisDropSuccess:this.handleServerFileDropEvent},(0,r.h)("div",{key:"f0581213174ec644c4bc5659e5ab1cbbff6d118a",class:"file-input"},(0,r.h)("input",{key:"b552e17416f7478f25e4dd5ac88279a41dce44e8",class:"hidden-file-input",onChange:e=>{this.serverFiles=Object.assign({},e.target.files)},ref:e=>this.serverInputElement=e,accept:null==t?void 0:t.map(e=>`.${e}`).join(","),tabIndex:-1,type:"file"}),(0,r.h)("svg",{key:"35c247496213e35a2a324dd6f82294eec6fa20e2",width:"42",height:"54",viewBox:"0 0 42 54",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false"},(0,r.h)("path",{key:"48eca92d3feb6ab5724555eeb4f0937d57a26012",d:"M31.566 0H0V53.8H41.8V10.234L31.566 0ZM31.8 1.366L40.434 10H31.8V1.366ZM0.799999 53V0.8H31V10.8H41V53H0.799999Z",fill:"#6A6A6A"}),")",(0,r.h)("path",{key:"7b73a3e09c9cf925138ad1b3dc24af3b8179aba4","fill-rule":"evenodd","clip-rule":"evenodd",d:"M20.9004 38V25.707L18.2544 28.354L17.5474 27.647L21.4004 23.793L25.2544 27.647L24.5474 28.354L21.9004 25.707V38H20.9004ZM14.9004 21H27.9004V20H14.9004V21Z",fill:"#6A6A6A"})),(0,r.h)("div",{key:"fc95c213a721115acefd17f3f4a8ac9d77d26d90",class:"text-container"},(0,r.h)("h3",{key:"ae9c24fe4452aa3c7fdf15d63aec86cb1a9b14b4",class:"device-select"},e.dragAndDropOrSelectFile)),(0,r.h)("button",{key:"facc7340139b037cb51f7531cff0d9a355d1a16f",class:"file-browser-button",onClick:()=>{var e;return null===(e=this.serverInputElement)||void 0===e?void 0:e.click()}},(0,r.h)("span",{key:"e2da57ca6b09ee856d0c907e4dc9dbb728c87eb6",class:"file-browser-button__icon"},(0,r.h)("calcite-icon",{key:"9c44317fbfd6ecfd47a5069bb0284b79d73626f7",icon:"desktop"})),(0,r.h)("span",{key:"cf5e2b4c6e8899a44e256eb68806ec08828fdb23",class:"file-browser-button__text"},e.selectFile)))),o&&(0,r.h)("div",{key:"e261a7ebbde50cfe88a1b261311a7fd195afd0a6",class:"loader-container"},(0,r.h)("calcite-loader",{key:"74eab8ebc71f45192b25bc0990b89fe4dd0dd38d",inline:!0,label:"importing-publisher-file-loader"}),e.importingConnectionFile),n&&(0,r.h)("div",{key:"c81fd38f0f8ecd5e65472a0a3a4a4d219ebe6bc5"},(0,r.h)("table",{key:"4fad20cd04d1946e01627362e4882416c1b805b6",class:"database-connection-table"},(0,r.h)("thead",{key:"aa801755e508232efffff59a89802e48074b22ca"},(0,r.h)("tr",{key:"5c670ca85aa0d96f7830783f27a01d03326157af"},(0,r.h)("th",{key:"bfe701dc1b847b58aa23d98f4cff0002c6bff741",colSpan:2},e.fileChosen,":"," ",(0,r.h)("span",{key:"0ed004871042f34895555cb8d57952cb28a4e20b",class:"server-file-name"},c)))),(0,r.h)("tbody",{key:"11ec1a69fca9154d1d6cec247329fe3bc0b7e5b5"},n.map(e=>this.propIsNotPassword(e)&&(0,r.h)("tr",null,(0,r.h)("td",null,e.key),(0,r.h)("td",{class:"value-cell"},e.value))))),(0,r.h)("div",{key:"4f16c03485ca496f410cef82da5cbb157a738431",class:"change-file"},(0,r.h)("span",{key:"dcf2537095a08b280c2f66ea9423340677f9cd20",class:"change-file-btn",onClick:()=>{this.resetServerFile()}},e.chooseDifferentFile)))),this.renderErrorItem()))}};o.style=".input-label{margin-top:1.25rem}.hidden-file-input{display:none}.device-select{margin-top:0.5rem;margin-bottom:0.5rem;font-size:1rem;font-weight:500;color:var(--calcite-color-text-1)}.server-database-connection-select{padding-bottom:0.5rem}.tile-select{margin-bottom:0.125rem}.server-file-name{font-weight:700}.file-input{margin-bottom:2rem;box-sizing:border-box;width:100%;border-width:2px;border-style:dashed;border-color:var(--calcite-color-border-1);background-color:var(--calcite-color-background);padding-top:2rem;padding-bottom:2rem;text-align:center}.file-browser-button{margin-top:0px;margin-bottom:0px;margin-left:0.75rem;margin-right:0.75rem;box-sizing:border-box;display:inline-flex;width:auto;cursor:pointer;align-items:center;border-radius:0;padding:0px;font-size:0.875rem;color:var(--calcite-color-text-1);border:1px solid var(--calcite-color-border-1);background-color:white;transition:all 150ms ease-in-out;outline-offset:0px;outline-color:transparent;font-family:inherit}.file-browser-button:hover{border-color:var(--calcite-color-brand)}.file-browser-button:focus{outline:2px solid var(--calcite-color-brand);outline-offset:-2px}.file-browser-button__icon{background-color:#f8f8f8;color:var(--calcite-color-text-link);box-sizing:border-box;display:flex;height:2rem;width:2rem;align-items:center;justify-content:center;padding:0.25rem}.file-browser-button__icon svg{width:100%}.file-browser-button__text{padding:0.5rem}.change-file{padding-top:0.5rem}.change-file-btn{cursor:pointer;color:#0079c1}.database-connection-table{width:100%;border-collapse:collapse;text-align:left}.database-connection-table tr{border-width:1px;border-style:solid;border-color:var(--calcite-color-border-1)}.database-connection-table td{padding:0.5rem;font-size:0.875rem;font-weight:300;border-left:1px solid #ccc;border-right:1px solid #ccc}.database-connection-table th{padding:0.5rem;font-size:1rem;font-weight:300;background-color:#efefef}tbody tr:nth-child(even){background-color:var(--calcite-color-background)}.text-container{margin-top:2rem;margin-bottom:2rem}.loader-container{display:flex}"}}]);