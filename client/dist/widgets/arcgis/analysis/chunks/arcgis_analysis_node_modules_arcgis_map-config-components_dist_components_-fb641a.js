/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-fb641a.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-fb641a"],{60303:(t,i,e)=>{e.r(i),e.d(i,{ArcgisMapConfigXySlider:()=>r});var s=e(73679),h=e(4395),n=e(85643),a=e(73801);const o=h.AH`:host{display:inline-flex}.container{position:relative;width:100px;height:100px}.grid{width:100px;height:100px}.thumb{position:absolute;background-color:var(--calcite-color-brand);width:12px;height:12px;display:inline-block;border-radius:50%;margin-left:-6px;margin-top:-6px;pointer-events:none}`;class r extends a.WF{constructor(){super(...arguments),this.thumbEl=(0,n._)(),this.gridHovered=!1,this.snapKeyDown=!1,this.dragging=!1,this.width=100,this.height=100,this.globalMouseMoveHandler=t=>{const{el:i,activeGridRect:e}=this;if(!i.isConnected)return;let s,h;const n=e,{clientX:a,clientY:o}=t;if(this.gridHovered)s=a-n.x,h=o-n.y;else{const t=n.width,i=n.height;s=a<n.x+t&&a>n.x?a-n.x:a<n.x?0:t,h=o<n.y+i&&o>n.y?o-n.y:o<n.y?0:i}this.captureValue(s,h),this.drawGrid()},this.globalMouseUpHandler=()=>{this.dragging=!1,this.arcgisChange.emit(),document.removeEventListener("mousemove",this.globalMouseMoveHandler),document.removeEventListener("pointermove",this.globalMouseMoveHandler)},this.maxX=10,this.minX=-10,this.maxY=10,this.minY=-10,this.snappable=!1,this.step=1,this.x=0,this.y=0,this.arcgisChange=(0,a.lh)(),this.arcgisInput=(0,a.lh)()}static{this.properties={maxX:9,minX:9,maxY:9,minY:9,snappable:5,step:9,x:9,y:9}}static{this.styles=o}async setFocus(){this.thumbEl.value?.focus()}willUpdate(t){t.has("x")&&(this.hasUpdated||0!==this.x)&&(this.x=this.clampX(this.x),this.hasUpdated&&this.drawGrid()),t.has("y")&&(this.hasUpdated||0!==this.y)&&(this.y=this.clampY(this.y),this.hasUpdated&&this.drawGrid())}gridMouseDownHandler(t){const{offsetX:i,offsetY:e}=t;this.dragging=!0,this.captureValue(i,e),t.preventDefault(),document.addEventListener("pointermove",this.globalMouseMoveHandler),document.addEventListener("pointerup",this.globalMouseUpHandler,{once:!0}),this.activeGridRect=this.context.canvas.getBoundingClientRect(),this.setFocus(),this.drawGrid()}gridMouseEnter(){this.gridHovered=!0}gridMouseLeave(){this.gridHovered=!1}handleThumbKeyDown(t){let i,e;const{key:s}=t;["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(s)&&(t.preventDefault(),t.stopPropagation()),e="ArrowDown"===s?this.clamp(this.y+this.step,this.maxY,this.minY):"ArrowUp"===s?this.clamp(this.y-this.step,this.maxY,this.minY):this.y,i="ArrowLeft"===s?this.clamp(this.x-this.step,this.maxX,this.minX):"ArrowRight"===s?this.clamp(this.x+this.step,this.maxX,this.minX):this.x,this.userSetXY(i,e),this.drawGrid()}handleKeyUp({shiftKey:t}){this.snapKeyDown=t}handleKeyDown({shiftKey:t}){this.snapKeyDown=t}clamp(t,i,e){return Math.min(i,Math.max(e,t))}clampX(t){return this.clamp(t,this.maxX,this.minX)}clampY(t){return this.clamp(t,this.maxY,this.minY)}userSetXY(t,i){t=this.getNormalizedValue(t),i=this.getNormalizedValue(i),t=Math.round(1e7*t)/1e7,i=Math.round(1e7*i)/1e7,(this.x!==t||this.y!==i)&&(this.x=t,this.y=i,this.arcgisInput.emit(),this.dragging||this.arcgisChange.emit())}mapToRange(t,i,e,s,h){return s+(t-i)*(h-s)/(e-i)}setCanvasContextSize(t,{height:i,width:e}){const s=window.devicePixelRatio||1;t.width=e*s,t.height=i*s,t.style.height=`${i}px`,t.style.width=`${e}px`,t.getContext("2d").scale(s,s)}initGrid(t){t&&(this.context=t.getContext("2d"),this.setCanvasContextSize(t,{width:this.width,height:this.height}),this.drawGrid())}getNormalizedValue(t){return this.snappable||this.snapKeyDown?Math.floor(t/this.step):t}captureValue(t,i){this.userSetXY(this.mapToRange(t,0,this.width,this.minX,this.maxX),this.mapToRange(i,0,this.height,this.minY,this.maxY))}drawGrid(){const{context:t,height:i,width:e}=this,s=t;s.fillStyle="#ffffff",s.strokeStyle="#d4d4d4",s.lineWidth=2,s.setLineDash([2]),s.fillRect(0,0,e,i),s.strokeRect(0,0,e,i),s.beginPath(),s.moveTo(0,i/2),s.lineTo(e,i/2),s.stroke(),s.beginPath(),s.moveTo(e/2,0),s.lineTo(e/2,i),s.stroke(),s.setLineDash([]);const h=this.mapToRange(this.x,this.minX,this.maxX,0,this.width),n=this.mapToRange(this.y,this.minY,this.maxY,0,this.height);s.strokeStyle="rgba(0, 97, 155, 0.4)",s.lineWidth=2,s.beginPath(),s.moveTo(e/2,i/2),s.lineTo(h,n),s.stroke()}render(){const t=`${this.mapToRange(this.x,this.minX,this.maxX,0,this.width)}%`,i=`${this.mapToRange(this.y,this.minY,this.maxY,0,this.height)}%`;return h.qy`<div class="container" @keyup=${this.handleKeyUp} @keydown=${this.handleKeyDown}><canvas class="grid" @pointerdown=${this.gridMouseDownHandler} @pointerenter=${this.gridMouseEnter} @pointerleave=${this.gridMouseLeave} ${(0,n.K)(this.initGrid)}></canvas><div class="thumb" style=${(0,a.zl)({left:t,top:i})} tabindex=0 @keydown=${this.handleThumbKeyDown} ${(0,n.K)(this.thumbEl)}></div></div>`}}(0,s.c)("arcgis-map-config-xy-slider",r)}}]);