/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_publis-b49d78.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_publis-b49d78"],{8417:(e,a,i)=>{i.d(a,{b:()=>n,u:()=>o});var l=i(50315),r=i(74695),t=i(1536),s=i(83692);async function n(e){const{addResponseId:a,publishResponse:i,categories:n,portal:o}=e;try{const e=[a,null==i?void 0:i.id].filter(e=>e);n&&await(0,l.u)({portal:o,itemIds:e,categories:n}),await(0,r.g)(i.id,{jobId:i.jobId});const c=i.serviceUrl;let u;if(o.isPortal){const e=c.indexOf("rest/services")+14,a=c.substring(0,e);u=await async function(e,a,i){const l=await(0,s.g)(i),r=`${e}System/SceneCachingControllers/GPServer/Manage%20Scene%20Cache/submitJob`,t=function(e,a,i,l){return{service_url:e,num_of_caching_service_instances:2,layer:JSON.stringify(l),update_mode:a,update_extent:"DEFAULT",area_of_interest:JSON.stringify({displayFieldName:"",geometryType:"esriGeometryPolygon",spatialReference:{wkid:54051,latestWkid:54051},fields:[{name:"OID",type:"esriFieldTypeOID",alias:"OID"},{name:"updateGeom_Length",type:"esriFieldTypeDouble",alias:"updateGeom_Length"},{name:"updateGeom_Area",type:"esriFieldTypeDouble",alias:"updateGeom_Area"}],features:[],exceededTransferLimit:!1}),f:"json",token:i}}(a,"RECREATE_ALL_NODES",l,{});return await(0,s.r)(r,t,{},"post")}(a,c,o);const i=`${a}System/SceneCachingControllers/GPServer/jobs/${u.jobId}`;u.jobUrl=i}else{const e=`${c.replace("rest/services","rest/admin/services")}/rebuildCache`;u=await(0,s.r)(e,{layers:0},{},"post")}return await(0,t.u)(null==i?void 0:i.id,{properties:JSON.stringify({cacheJobId:u.jobId,cacheJobUrl:u.jobUrl}),id:null==i?void 0:i.id}),{}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}}function o(e,a){e.includes("GaussianSplat")&&["IntegratedMesh","3DObject"].forEach(a=>{const i=e.indexOf(a);-1!==i&&e.splice(i,1)}),"GaussianSplat"!==a||e.includes("GaussianSplat")||e.includes("IntegratedMesh")||e.push("IntegratedMesh")}},26262:(e,a,i)=>{i.d(a,{a:()=>r,g:()=>t,i:()=>s});var l=i(41473);const r=(e,a)=>(0,l.a)(`${(0,l.g)(e)}community/groups/${a.id}`),t=(e,a)=>`${((e,a)=>(0,l.a)(`${(0,l.g)(e)}content/groups/${a.id}`))(e,a)}search`,s=e=>{var a;return null===(a=null==e?void 0:e.capabilities)||void 0===a?void 0:a.includes("distributed")}},37362:(e,a,i)=>{i.d(a,{U:()=>l,a:()=>t,b:()=>r,g:()=>s});const l="/Categories",r=(e,a,i=!0)=>{const l=null!=e?e:"";return`${l}${l.endsWith("/")?"":"/"}${i?a.title.toLocaleLowerCase():a.title}`};function t(e){var a;let i=null===(a=null==e?void 0:e[0])||void 0===a?void 0:a.title;return i&&"/"!==i.charAt(0)&&(i=`/${i}`),i||l}const s=(e,a)=>`${e.replace(/\/([^\/]+)$/,`/${a}`)}`},50315:(e,a,i)=>{i.d(a,{a:()=>v,b:()=>d,c:()=>y,d:()=>m,e:()=>p,f:()=>u,g:()=>c,u:()=>g});var l=i(83692),r=i(37362),t=i(59317),s=i(26262),n=i(41473),o=i(1654);const c=async({portal:e,user:a,group:i,useCache:l=!1})=>{var r;try{const t=await(i?d(i.id,e,l):u(e,a,l));return{result:null!==(r=null==t?void 0:t.categorySchema)&&void 0!==r?r:null}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}};async function u(e,a,i=!0){if(null!=e||(e=t.c.portal),null!=a||(a=t.c.user),!(null==e?void 0:e.id)||a&&(0,o.b)(a))return null;const r=()=>(0,l.r)(`${(0,n.g)(e)}portals/${e.id}/categorySchema`);return i?(0,l.f)(r,"categorySchema",e.id):r()}async function d(e,a,i=!0){if(null!=a||(a=null===t.c||void 0===t.c?void 0:t.c.portal),!e||!a)return null;const r=()=>(0,l.r)(`${(0,s.a)(a,{id:e})}categorySchema`);return i?(0,l.f)(r,"categorySchema",e):r()}const p=async({user:e,portal:a,useCache:i=!1})=>{var l;const r=await y(a,e,i);return{result:null!==(l=null==r?void 0:r.memberCategorySchema)&&void 0!==l?l:null}};async function y(e,a,i=!0){if(null!=e||(e=t.c.portal),null!=a||(a=t.c.user),!(null==e?void 0:e.id)||a&&(0,o.b)(a))return null;const r=()=>(0,l.r)(`${(0,n.g)(e)}portals/${e.id}/memberCategorySchema`);return i?(0,l.f)(r,"memberCategorySchema",e.id):r()}async function v(e,a,i=!0){const r=()=>async function(e,a){var i;const r=(0,n.g)(e),t=(0,n.b)(e),o=await(0,l.r)(`${r}portals/self?culture=${t}`),c=await(0,l.r)(`${r}community/groups?q=${o.contentCategorySetsGroupQuery}`),u=null===(i=null==c?void 0:c.results)||void 0===i?void 0:i[0],d=(await(0,l.r)((0,s.g)(e,u),{q:`typekeywords: ${a}`})).results[0];return(0,l.r)(`${r}content/items/${d.id}/data`)}(e,a);return i?(0,l.f)(r,"categorySchema",a):r()}async function g({categories:e,itemIds:a,portal:i,group:r}){try{const t=`${(0,n.g)(i)}/content/${r?`groups/${r.id}/updateCategories`:"updateItems"}`,s=JSON.stringify(a.map(a=>{const i=Array.isArray(e)?e:e[a];return{[a]:r?i:{categories:i}}}));return{result:await(0,l.r)(t,{items:s},{},"post")}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}}const m=async({path:e,portal:a,group:i,updateInfo:l})=>{try{const t=(await S({category:e,portal:a,group:i,num:1})).total;if(0===t)return console.warn(`No items found with category ${e} when updating schema`),{};const s=100,n=Math.ceil(t/s),o=[];for(let t=0;t<n;t++)o.push(S({category:e,portal:a,group:i,start:t*s,num:s}).then(({results:a})=>{const t={};return a.forEach(a=>{var s;const n=null!==(s=i?a.groupCategories:a.categories)&&void 0!==s?s:[],o="change-title"===l.type?n.map(a=>{const i=(0,r.g)(e,l.newTitle);return a===e?i:a.replace(`${e}/`,`${i}/`)}):n.filter(a=>!a.startsWith(e));t[a.id]=o}),t}));const c=await Promise.all(o);return await Promise.all(c.map(e=>g({categories:e,itemIds:Object.keys(e),portal:a,group:i}))),{}}catch(a){return console.error(`Error ${l.type} items schema from path ${e}:`,a),{error:{code:"unhandledError"}}}},S=({category:e,num:a=100,start:i=0,portal:r,group:t})=>{const o={start:i,num:a,categories:JSON.stringify([e])},c=t?(0,s.g)(r,t):`${(0,n.g)(r)}search`;return(0,l.r)(c,Object.assign(Object.assign({},o),{q:t?void 0:`orgid: ${r.id}`}))}},54077:(e,a,i)=>{i.d(a,{a:()=>u,b:()=>S,c:()=>n,d:()=>m,e:()=>o,f:()=>p,g:()=>d,i:()=>g});var l=i(4429),r=i(1654),t=i(3826),s=i(10578);const n={WORLD:"World",EU:"Europe",AD:"Andorra",AE:"United Arab Emirates",AF:"Afghanistan",AG:"Antigua and Barbuda",AI:"Anguilla",AL:"Albania",AM:"Armenia",AO:"Angola",AQ:"Antarctica",AR:"Argentina",AS:"American Samoa",AT:"Austria",AU:"Australia",AW:"Aruba",AZ:"Azerbaijan",BA:"Bosnia and Herzegovina",BB:"Barbados",BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BL:"Saint Barth\xe9lemy",BM:"Bermuda",BN:"Brunei Darussalam",BO:"Bolivia, Plurinational State of",BQ:"Bonaire, Sint Eustatius and Saba",BR:"Brazil",BS:"Bahamas",BT:"Bhutan",BV:"Bouvet Island",BW:"Botswana",BY:"Belarus",BZ:"Belize",CA:"Canada",CD:"Congo, the Democratic Republic of the",CF:"Central African Republic",CG:"Congo",CH:"Switzerland",CI:"C\xf4te d'Ivoire",CK:"Cook Islands",CL:"Chile",CM:"Cameroon",CN:"China",CO:"Colombia",CR:"Costa Rica",CU:"Cuba",CV:"Cape Verde",CW:"Cura\xe7ao",CY:"Cyprus",CZ:"Czech Republic",DE:"Germany",DJ:"Djibouti",DK:"Denmark",DM:"Dominica",DO:"Dominican Republic",DZ:"Algeria",EC:"Ecuador",EE:"Estonia",EG:"Egypt",EH:"Western Sahara",ER:"Eritrea",ES:"Spain",ET:"Ethiopia",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands (Malvinas)",FM:"Micronesia, Federated States of",FO:"Faroe Islands",FR:"France",GA:"Gabon",GB:"United Kingdom",GD:"Grenada",GE:"Georgia",GF:"French Guiana",GG:"Guernsey",GH:"Ghana",GI:"Gibraltar",GL:"Greenland",GM:"Gambia",GN:"Guinea",GP:"Guadeloupe",GQ:"Equatorial Guinea",GR:"Greece",GS:"South Georgia and the South Sandwich Islands",GT:"Guatemala",GW:"Guinea-Bissau",GY:"Guyana",HK:"Hong Kong",HM:"Heard Island and McDonald Islands",HN:"Honduras",HR:"Croatia",HT:"Haiti",HU:"Hungary",ID:"Indonesia",IE:"Ireland",IL:"Israel",IM:"Isle of Man",IN:"India",IO:"British Indian Ocean Territory",IQ:"Iraq",IR:"Iran, Islamic Republic of",IS:"Iceland",IT:"Italy",JE:"Jersey",JM:"Jamaica",JO:"Jordan",JP:"Japan",KE:"Kenya",KG:"Kyrgyzstan",KH:"Cambodia",KI:"Kiribati",KM:"Comoros",KN:"Saint Kitts and Nevis",KP:"Korea, Democratic People's Republic of",KR:"Korea, Republic of",KW:"Kuwait",KY:"Cayman Islands",KZ:"Kazakhstan",LA:"Lao People's Democratic Republic",LB:"Lebanon",LC:"Saint Lucia",LI:"Liechtenstein",LK:"Sri Lanka",LR:"Liberia",LS:"Lesotho",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",LY:"Libya",MA:"Morocco",MC:"Monaco",MD:"Moldova, Republic of",ME:"Montenegro",MF:"Saint Martin (French part)",MG:"Madagascar",MH:"Marshall Islands",MK:"Macedonia, the former Yugoslav Republic of",ML:"Mali",MM:"Myanmar",MN:"Mongolia",MO:"Macao",MP:"Northern Mariana Islands",MQ:"Martinique",MR:"Mauritania",MS:"Montserrat",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"Mexico",MY:"Malaysia",MZ:"Mozambique",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NG:"Nigeria",NI:"Nicaragua",NL:"Netherlands",NO:"Norway",NP:"Nepal",NR:"Nauru",NU:"Niue",NZ:"New Zealand",OM:"Oman",PA:"Panama",PE:"Peru",PF:"French Polynesia",PG:"Papua New Guinea",PH:"Philippines",PK:"Pakistan",PL:"Poland",PM:"Saint Pierre and Miquelon",PN:"Pitcairn",PS:"Palestine, State of",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"Qatar",RE:"R\xe9union",RO:"Romania",RS:"Serbia",RU:"Russian Federation",RW:"Rwanda",SA:"Saudi Arabia",SB:"Solomon Islands",SC:"Seychelles",SD:"Sudan",SE:"Sweden",SG:"Singapore",SH:"Saint Helena, Ascension and Tristan da Cunha",SI:"Slovenia",SJ:"Svalbard and Jan Mayen",SK:"Slovakia",SL:"Sierra Leone",SM:"San Marino",SN:"Senegal",SO:"Somalia",SR:"Suriname",SS:"South Sudan",ST:"Sao Tome and Principe",SV:"El Salvador",SX:"Sint Maarten (Dutch part)",SY:"Syrian Arab Republic",SZ:"Swaziland",TC:"Turks and Caicos Islands",TD:"Chad",TF:"French Southern Territories",TG:"Togo",TH:"Thailand",TJ:"Tajikistan",TK:"Tokelau",TL:"Timor-Leste",TM:"Turkmenistan",TN:"Tunisia",TO:"Tonga",TR:"Turkey",TT:"Trinidad and Tobago",TV:"Tuvalu",TW:"Taiwan, Province of China",TZ:"Tanzania, United Republic of",UA:"Ukraine",UG:"Uganda",UM:"United States Minor Outlying Islands",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VA:"Holy See (Vatican City State)",VC:"Saint Vincent and the Grenadines",VE:"Venezuela, Bolivarian Republic of",VG:"Virgin Islands, British",VN:"Vietnam",VU:"Vanuatu",WF:"Wallis and Futuna",WS:"Samoa",XK:"Republic of Kosovo",YE:"Yemen",YT:"Mayotte",ZA:"South Africa",ZM:"Zambia",ZW:"Zimbabwe"};function o(e,a){const{sourceCountry:i,locationType:l,analyzeResults:r,candidateFieldsType:s,coordinateFieldType:n,type:o,standardizedFieldNames:d,selectedFields:p}=t.a,y=u(),v=a?t.a.backupLayerFields:Object.values(p),g=Object.assign(Object.assign({locationType:l||"address",sourceCountry:i,candidateFieldsType:s},"coordinates"===l&&function(e,a){return e.reduce((e,i)=>{switch(i.locationType){case"latitude":e.latitudeFieldName=i.name,a||(e.coordinateFieldType="LatitudeAndLongitude");break;case"longitude":e.longitudeFieldName=i.name,a||(e.coordinateFieldType="LatitudeAndLongitude");break;case"mgrs":"MGRS"===a&&(e.coordinateFieldName=i.name,a||(e.coordinateFieldType="MGRS"));break;case"usng":"USNG"===a&&(e.coordinateFieldName=i.name,a||(e.coordinateFieldType="USNG"))}return e},{coordinateFieldType:a})}(v,n)),"address"===l&&{addressFields:c(v,e,d)});let m;return m=a||"Microsoft Excel"!==o?Object.assign(Object.assign({},r.publishParameters),g):Object.assign(Object.assign({},r.publishParameters),{layers:[Object.assign(Object.assign({},y),g)],hasStaticData:!0,maxRecordCount:2e3,layerInfo:{capabilities:"Query"}}),"coordinates"===l&&["USNG","MGRS"].includes(n)&&(delete m.latitudeFieldName,delete m.longitudeFieldName),m}function c(e,a,i){if("Single"===a){const a=Object.keys(i)[0]||"Address",l=e.find(({locationType:e})=>e===a||"address"===(null==e?void 0:e.toLowerCase()));return{[a]:(null==l?void 0:l.name)||""}}return e.reduce((e,a)=>("unknown"!==a.locationType&&(e[a.locationType]=a.name),e),{})}function u(e,a){var i,l,r,s,n,o,c;const{type:u,analyzeResults:d=e,selectedSheet:p}=t.a,y=null==d?void 0:d.publishParameters;if(a)return"CSV"===u?null==y?void 0:y.layerInfo:null!==(l=null===(i=null==y?void 0:y.layers)||void 0===i?void 0:i[p])&&void 0!==l?l:null===(r=null==y?void 0:y.layers)||void 0===r?void 0:r[0];switch(u){case"Microsoft Excel":return null!==(n=null===(s=null==y?void 0:y.layers)||void 0===s?void 0:s[p])&&void 0!==n?n:null===(o=null==y?void 0:y.layers)||void 0===o?void 0:o[0];case"GeoJson":return null===(c=null==y?void 0:y.layers)||void 0===c?void 0:c[0];default:return null==y?void 0:y.layerInfo}}function d(e){switch(e){case"esriFieldTypeBigInteger":return["esriFieldTypeBigInteger","esriFieldTypeDouble","esriFieldTypeString"];case"esriFieldTypeSmallInteger":return["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString"];case"esriFieldTypeInteger":return["esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString"];case"esriFieldTypeSingle":return["esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString"];case"esriFieldTypeDouble":return["esriFieldTypeDouble","esriFieldTypeString"];case"esriFieldTypeDate":return["esriFieldTypeDate","esriFieldTypeString"];case"esriFieldTypeDateOnly":return["esriFieldTypeDateOnly","esriFieldTypeString"];case"esriFieldTypeTimeOnly":return["esriFieldTypeTimeOnly","esriFieldTypeString"];case"esriFieldTypeTimestampOffset":return["esriFieldTypeTimestampOffset","esriFieldTypeString"];case"esriFieldTypeOID":return["esriFieldTypeOID","esriFieldTypeInteger","esriFieldTypeString"];default:return["esriFieldTypeString"]}}function p(e,a){const i=null==a?void 0:a.filter(a=>a.url===e);return(null==i?void 0:i.length)?i.shift():null}function y(e=""){return!!(null==e?void 0:e.match(/(arcgis\.com.*\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/gi))}function v(e=""){return!!(null==e?void 0:e.match(/(arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi))}function g(e){return!!e&&(v(e)||y(e))}function m(e,a,i){let l=i||e||a||"";return l="wo"===(null==l?void 0:l.toLowerCase())?"world":l,n[l.toUpperCase()]||(l="world"),l}function S(e,a,i){var t;let n=(0,s.m)(a)&&(0,s.o)(a);const o=function(e,a,i){return e.filter(e=>{const r=Object.assign({},e),t=v(null==r?void 0:r.url),s=y(null==r?void 0:r.url);return(t||s)&&((0,l.c)(r.name)?"Esri World Geocoder"!==r.name&&"ArcGIS Geocoding service"!==r.name||(r.name="ArcGIS Geocoding Service"):r.name="ArcGIS World Geocoding Service"),(!t||!i&&!a)&&((0,l.c)(r.batch)?!!r.batch:t||s)})}(e,!n,i),c=null===(t=o[0])||void 0===t?void 0:t.url;if(null==o?void 0:o.length){n=!0;const e=p(o[0].url,o),l=v(null==e?void 0:e.url),t=y(null==e?void 0:e.url),s=l||t;let u=s||!!e.batch;return{allowGeocode:(!(0,r.g)(a)||n)&&(!i&&u||i&&(!l||t)&&u),isAgoWorldGeocodeServer:l,isServiceProxyAgoWorldGeocodeServer:t,isWorldGeocodeServer:s,geocodeServers:o,geocodeServiceUrl:c}}return null}},82149:(e,a,i)=>{i.d(a,{D:()=>t,T:()=>n,a:()=>u,b:()=>p,c:()=>y,d:()=>s,e:()=>o,f:()=>l,g:()=>c,p:()=>d,t:()=>r});const l=["standard","custom"],r=["IntegratedMesh","3DObject","GaussianSplat"],t=r[0],s=["vector","raster"],n=147914382,o=0,c=[{level:0,label:"1:591,657,528",scale:591657527.591555},{level:1,label:"1:295,828,764",scale:295828763.795777},{level:2,label:"1:147,914,382",scale:147914381.897889},{level:3,label:"1:73,957,191",scale:73957190.948944},{level:4,label:"1:36,978,595",scale:36978595.474472},{level:5,label:"1:18,489,298",scale:18489297.737236},{level:6,label:"1:9,244,649",scale:9244648.868618},{level:7,label:"1:4,622,324",scale:4622324.434309},{level:8,label:"1:2,311,162",scale:2311162.217155},{level:9,label:"1:1,155,581",scale:1155581.108577},{level:10,label:"1:577,791",scale:577790.554289},{level:11,label:"1:288,895",scale:288895.277144},{level:12,label:"1:144,448",scale:144447.638572},{level:13,label:"1:72,224",scale:72223.819286},{level:14,label:"1:36,112",scale:36111.909643},{level:15,label:"1:18,056",scale:18055.954822},{level:16,label:"1:9,028",scale:9027.977411},{level:17,label:"1:4,514",scale:4513.988705},{level:18,label:"1:2,257",scale:2256.994353},{level:19,label:"1:1,128",scale:1128.497176},{level:20,label:"1:564",scale:564.248588},{level:21,label:"1:282",scale:282.124294},{level:22,label:"1:141",scale:141.062147}],u={spatialReference:{wkid:102100,latestWkid:3857},origin:{x:-20037508.342787,y:20037508.342787},rows:256,cols:256,dpi:96,preciseDpi:96,lods:[{level:0,resolution:156543.033928,scale:591657527.591555},{level:1,resolution:78271.5169639999,scale:295828763.795777},{level:2,resolution:39135.7584820001,scale:147914381.897889},{level:3,resolution:19567.8792409999,scale:73957190.948944},{level:4,resolution:9783.93962049996,scale:36978595.474472},{level:5,resolution:4891.96981024998,scale:18489297.737236},{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.99245256249,scale:4622324.434309},{level:8,resolution:611.49622628138,scale:2311162.217155},{level:9,resolution:305.748113140558,scale:1155581.108577},{level:10,resolution:152.874056570411,scale:577790.554289},{level:11,resolution:76.4370282850732,scale:288895.277144},{level:12,resolution:38.2185141425366,scale:144447.638572},{level:13,resolution:19.1092570712683,scale:72223.819286},{level:14,resolution:9.55462853563415,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.38865713397468,scale:9027.977411},{level:17,resolution:1.19432856685505,scale:4513.988705},{level:18,resolution:.597164283559817,scale:2256.994353},{level:19,resolution:.298582141647617,scale:1128.497176},{level:20,resolution:.14929107082380833,scale:564.248588},{level:21,resolution:.07464553541190416,scale:282.124294},{level:22,resolution:.03732276770595208,scale:141.062147}]},d={spatialReference:{wkid:102100,latestWkid:3857},origin:{x:-20037508.342787,y:20037508.342787},rows:512,cols:512,dpi:96,preciseDpi:96,lods:[{level:0,resolution:78271.51696399994,scale:295828763.795777},{level:1,resolution:39135.75848200009,scale:147914381.897889},{level:2,resolution:19567.87924099992,scale:73957190.948944},{level:3,resolution:9783.93962049996,scale:36978595.474472},{level:4,resolution:4891.96981024998,scale:18489297.737236},{level:5,resolution:2445.98490512499,scale:9244648.868618},{level:6,resolution:1222.992452562495,scale:4622324.434309},{level:7,resolution:611.4962262813797,scale:2311162.217155},{level:8,resolution:305.74811314055756,scale:1155581.108577},{level:9,resolution:152.87405657041106,scale:577790.554289},{level:10,resolution:76.43702828507324,scale:288895.277144},{level:11,resolution:38.21851414253662,scale:144447.638572},{level:12,resolution:19.10925707126831,scale:72223.819286},{level:13,resolution:9.554628535634155,scale:36111.909643},{level:14,resolution:4.77731426794937,scale:18055.954822},{level:15,resolution:2.388657133974685,scale:9027.977411},{level:16,resolution:1.1943285668550503,scale:4513.988705},{level:17,resolution:.5971642835598172,scale:2256.994353},{level:18,resolution:.29858214164761665,scale:1128.497176},{level:19,resolution:.14929107082380833,scale:564.248588},{level:20,resolution:.07464553541190416,scale:282.124294},{level:21,resolution:.03732276770595208,scale:141.062147},{level:22,resolution:.01866138385297604,scale:70.5310735},{level:23,resolution:.009330691929342804,scale:35.265536760789715}]},p={format:"indexedVector",compressionQuality:0,antialiasing:!1},y={format:"PNG32",compressionQuality:0,antialiasing:!0}},98704:(e,a,i)=>{i.d(a,{a:()=>y,c:()=>v,p:()=>m});var l=i(59317),r=i(3826),t=i(95878),s=i(82149),n=i(80562),o=i(54077),c=i(74695),u=i(1536),d=i(83692),p=i(8417);async function y({publishResponse:e,portalUser:a,addResponse:i}){var t,n,o,c,d,y,v;const g=null!==(t=null!=a?a:l.c.user)&&void 0!==t?t:l.c.portal.user,{cloudProviderResource:m,geoJSONResource:S,locationType:b,csvResource:h,existingItem:f}=r.a,{result:T}=await(0,u.b)(e.id),I=[...T.typeKeywords];if((m||S||h)&&I.push("Cloud Drive"),"address"===b&&I.push("showUnmatchedAddresses"),"object3d"!==r.a.addSceneLayerType||I.includes("3DObject")||I.push("3DObject"),(null===(o=null===(n=l.c.portal)||void 0===n?void 0:n.sourceJSON)||void 0===o?void 0:o.hasClassificationSchema)&&(r.a.classification.createdUser=l.c.user.username,r.a.classification.createdDate=Date.now()),["3DTiles Package","3DTiles Service"].includes(T.type))if("3dTiles"===r.a.tileLayerPublishType){(0,p.u)(I,r.a.tilesLayer3dType);const{result:e}=await(0,u.b)(i.id),a=[...e.typeKeywords];(0,p.u)(a,r.a.tilesLayer3dType),await(0,u.u)(null==i?void 0:i.id,Object.assign({typeKeywords:null==a?void 0:a.join(",")},(null===(d=null===(c=l.c.portal)||void 0===c?void 0:c.sourceJSON)||void 0===d?void 0:d.hasClassificationSchema)?{classification:JSON.stringify(r.a.classification)}:{}),g)}else if(f){const e=[...f.typeKeywords].find(e=>s.t.includes(e));e&&I.push(e)}return(0,u.u)(e.id,Object.assign({typeKeywords:null==I?void 0:I.join(",")},(null===(v=null===(y=l.c.portal)||void 0===y?void 0:y.sourceJSON)||void 0===v?void 0:v.hasClassificationSchema)?{classification:JSON.stringify(r.a.classification)}:{}),g)}async function v(e){const a=await(0,c.g)(e.id,{success:e.success});if("failed"===a.status)throw new Error(a.statusMessage)}function g(e,a,i){const{selectedFields:l,timezone:t,analyzeResults:s,type:n}=r.a,c=s.publishParameters,u=(0,o.a)();u.fields=Object.keys(l).map(e=>{const a=l[e];var i;return i=a.type,["esriFieldTypeDouble","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeSmallInteger"].includes(i)&&(a.sqlType=function(e){switch(e){case"esriFieldTypeDouble":return"sqlTypeDouble";case"esriFieldTypeInteger":case"esriFieldTypeOID":return"sqlTypeInteger";case"esriFieldTypeString":return"sqlTypeNVarchar";case"esriFieldTypeSingle":return"sqlTypeFloat";case"esriFieldTypeSmallInteger":return"sqlTypeSmallInt";case"esriFieldTypeDate":return"sqlTypeDate";default:return"sqlTypeOther"}}(a.type),delete a.length),a}),u.capabilities="Query",c.capabilities="Query",u.hasStaticData=!0,c.hasStaticData=!0,c.persistErrorRecordsForReview=!0,c.name=e;const d=(null==i?void 0:i.isPortal)?{timeZone:t||"UTC"}:{ianaTimeZone:t||Intl.DateTimeFormat().resolvedOptions().timeZone||"GMT"};return a||"GeoJson"===n?u.dateFieldsTimeReference=d:c.dateFieldsTimeReference=d,c}async function m(e,a){var i,l,s,o,c;const{user:u,portal:p,title:y,itemId:v,extension:m,type:S,dataUrl:b,itemOwnerUrl:h}=e;null!=a||(a=Object.assign({},function(e,a,i,l,t,s){a=(0,n.f)(a);let o="Scene Service"===t?t:i.toLowerCase();"zip"===o&&(o=t);const c="Microsoft Excel"===t,u={name:a,maxRecordCount:2e3},d=("GeoJson"===t||"CSV"===t)&&s,p=r.a.cloudProvider||d?{deleteSourceItemUponCompletion:!0}:{},y=JSON.stringify(u),v=JSON.stringify(Object.assign(Object.assign(Object.assign({},u),{hasStaticData:!0,layerInfo:{capabilities:"Query"}}),"geojson"===o||"json"===o?{fieldTypesVersion:"V2"}:{}));switch(o){case"3tz":return{itemId:e,publishParameters:JSON.stringify({name:a}),filetype:"3DTilesPackage",outputType:"3DTilesService"};case"csv":case"xls":case"xlsx":return Object.assign({itemId:e,filetype:c?"excel":"csv",publishParameters:JSON.stringify(g(a,c,l))},p);case"featurecollection":return{itemId:e,filetype:"featureCollection",publishParameters:v};case"geojson":case"json":return Object.assign({itemId:e,filetype:"geojson",publishParameters:v},p);case"tpk":case"tpkx":return{itemId:e,filetype:"tilePackage",publishParameters:y,buildInitialCache:!0};case"vtpk":return{itemId:e,filetype:"vectortilepackage",publishParameters:y,outputType:"vectorTiles",buildInitialCache:!0};case"spk":case"slpk":return{itemId:e,filetype:"scenepackage",publishParameters:y,outputType:"sceneService",buildInitialCache:!0};case"Scene Service":return{itemId:e,filetype:"featureService",publishParameters:JSON.stringify({name:a,targetSR:{wkid:4326,latestWkid:4326}}),outputType:"sceneService",buildInitialCache:!1};case"sd":return{itemId:e,filetype:"serviceDefinition",buildInitialCache:!1};case"File Geodatabase":return Object.assign({itemId:e,filetype:"fileGeodatabase",publishParameters:v},p);case"Shapefile":return Object.assign({itemId:e,filetype:"shapefile",publishParameters:v},p);case"gpkg":return{itemId:e,filetype:"geoPackage",publishParameters:y};case"Image Collection":return{itemId:e,filetype:"imageCollection",outputType:"image service",publishParameters:y};default:return{itemId:e,publishParameters:y}}}(v,y,m,p,S,b)));const f=`${"append"===t.u.workflow?h:u.userContentUrl}/publish`;try{const e=await(0,d.r)(f,a,{},"post");if(e.services&&e.services.length){if(null===(l=null===(i=e.services[0])||void 0===i?void 0:i.error)||void 0===l?void 0:l.message)throw null===(o=null===(s=e.services[0])||void 0===s?void 0:s.error)||void 0===o?void 0:o.message;return{result:e}}throw this.i18n.errorPublishing}catch(e){return console.error(e),(null===(c=null==e?void 0:e.message)||void 0===c?void 0:c.includes("Service name"))||"string"==typeof e&&e.includes("Service name")?{error:{code:"serviceNameExists"}}:{error:{code:"unhandledError"}}}}}}]);