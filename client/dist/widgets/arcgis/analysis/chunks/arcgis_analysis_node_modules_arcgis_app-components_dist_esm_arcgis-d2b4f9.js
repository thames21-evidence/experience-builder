/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-d2b4f9.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-d2b4f9"],{931:(e,t,n)=>{n.d(t,{l:()=>i});var o=n(93814);const i=async(e,t)=>(await o.e.exports.loadModules(e,t)).map(e=>e.__esModule&&e.default?e.default:e)},4429:(e,t,n)=>{n.d(t,{a:()=>l,b:()=>u,c:()=>r,d:()=>c,e:()=>i,f:()=>o,g:()=>h,i:()=>p,m:()=>s,t:()=>a,u:()=>d});const o=(e,t)=>{let n,o="idle";const i=(...i)=>new Promise(r=>{switch(o){case"flushed":o="idle",n?(clearTimeout(n),r(e(...i))):r(null);break;case"invoked":clearTimeout(n),o="idle",r(e(...i));break;case"cancelled":clearTimeout(n),o="idle",r(null);break;default:n&&clearTimeout(n),o="pending",n=setTimeout(()=>(o="idle",r(e(...i))),t)}});return i.flush=function(...e){return o="flushed",i(...e)},i.invoke=function(...e){return o="invoked",i(...e)},i.cancel=function(...e){return o="cancelled",i(...e)},i.getStatus=function(){return o},i};function i(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function r(e){return null!=e}async function s(e,t){return await Promise.all([e,a(t)]),e}function a(e){return new Promise(t=>setTimeout(t,e))}const l=(e,t)=>Object.fromEntries((e||[]).map(e=>{const{key:n,data:o}=t(e);return[n,o]})),c=(e,t)=>e.length===t.length&&e.reduce((e,n)=>e&&t.indexOf(n)>-1,!0);function d(e,t){const n=[],o={};return e.forEach(e=>{const i=t(e);null==o[i]&&(o[i]=e,n.push(e))}),n}function u(e){const t={boolean:{},number:{},string:{}},n=[];return e.filter(e=>{let o=typeof e;return o in t?!t[o].hasOwnProperty(e)&&(t[o][e]=!0):!(n.indexOf(e)>=0)&&n.push(e)})}const h=(e,t)=>[...Array(Math.ceil(e.length/t))].map((n,o)=>e.slice(t*o,t+t*o)),p=(e,t)=>e.includes(t)},12192:(e,t,n)=>{n.d(t,{a:()=>s,g:()=>c});var o=n(15332),i=n(94984),r=n(87849);function s(e){var t,n,r;const s=null!==(t=(0,o.c)(e,"[lang]"))&&void 0!==t?t:null===(r=null===(n=e.shadowRoot)||void 0===n?void 0:n.ownerDocument)||void 0===r?void 0:r.documentElement,a=((null==s?void 0:s.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return i.l.has(a)?i.l.get(a):i.l.has(a.slice(0,2))?i.l.get(a.slice(0,2)):"en"}const a={};function l(e,t){const n=`${e}${t}`;return a[n]||(a[n]=function(e,t){return new Promise((n,o)=>{fetch((0,r.d)(`../arcgis-app-assets/i18n/${e}.i18n.${t}.json`)).then(e=>{e.ok?n(e.json()):o()},()=>o())})}(e,t)),a[n]}async function c(e,t){const n=t||e.tagName.toLowerCase(),r=s(e),a=function(e){var t,n,r;const s=null!==(t=(0,o.c)(e,"[lang]"))&&void 0!==t?t:null===(r=null===(n=e.shadowRoot)||void 0===n?void 0:n.ownerDocument)||void 0===r?void 0:r.documentElement,a=((null==s?void 0:s.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return i.l.has(a)?i.l.get(a):i.l.has(a.slice(0,2))?a:"en"}(e);let c;try{c=await l(n,r)}catch(e){console.warn(`no locale for ${n} (${r}) loading default locale en.`),c=await l(n,"en")}return[c,r,a]}},23860:(e,t,n)=>{n.r(t),n.d(t,{arcgis_layers_and_tables_summary_popup:()=>u});var o=n(87849),i=n(59317),r=n(4429),s=n(12192),a=n(31106),l=n(37762),c=n(29369);n(15332),n(94984),n(931),n(93814),n(41473),n(54251),n(83692),n(58573),n(76246),n(15912);const d=(0,l.c)({}).state,u=class{constructor(e){(0,o.r)(this,e),this.handleClick=async()=>{var e,t;const{layers:n,item:o}=this;null===(e=this.button)||void 0===e||e.focus(),n||(this.loading=!0),d[o.id]||(d[o.id]=this.fetchServiceInfo());const i=await d[o.id];i.error&&(this.error=this.i18n.error,"serviceNotExist"===i.error.code&&(this.error.message=this.i18n.error.noServiceMessage)),i.result?this.sublayers=(0,a.s)(null===(t=i.result)||void 0===t?void 0:t.sublayers,n):this.sublayers=n,this.loading=!1},this.handleWindowClick=({target:e})=>{this.el.contains(e)||(this.popoverNode.open=!1)},this.handleKeyPress=({key:e})=>{switch(e){case"Esc":case"Escape":this.popoverNode&&(this.popoverNode.open=!1)}},this.api=void 0,this.config=void 0,this.user=void 0,this.item=void 0,this.portal=void 0,this.layers=void 0,this.searchTerm=void 0,this.border=void 0,this.tooltip=void 0,this.telemetry=void 0,this.button=void 0,this.loading=!0,this.error=void 0,this.sublayers=void 0}async componentWillLoad(){const e=await(0,s.g)(this.el);this.i18n=e[0],i.c.api=this.api,i.c.portal=this.portal,i.c.config=this.config,i.c.user=this.user,this.layers||(this.loading=!0)}async fetchServiceInfo(){const{item:e,portal:t,layers:n}=this;return await(0,r.m)((0,a.f)({item:e,portal:t,layers:n,isSecure:!1}),500)}render(){const{i18n:e,portal:t,user:n,item:i,handleClick:s,handleKeyPress:a,loading:l,searchTerm:d,error:u,tooltip:h,telemetry:p}=this,v=this.sublayers||this.layers;return(0,o.h)(o.H,{key:"572b0a7b1a23aa27c132205aa62817bcdb3e1794",onFocusout:e=>{e.relatedTarget&&!this.el.contains(e.relatedTarget)&&(this.popoverNode.open=!1)}},(0,o.h)("calcite-popover-manager",{key:"6202b0d0c021ea81ce45e2ec7a58d1e8dc391a4c",autoClose:!0},(0,o.h)("button",Object.assign({key:"3f7b877e018a29274e2dcff365f3169c27a20e5d",class:{button:!0,"button--border":this.border},ref:e=>this.button=e,onClick:s,onTouchStart:s,onKeyPress:a},h?{title:h}:{}),(0,o.h)("span",{key:"6c4823dbd623791d1655099ce82d9bb080511d5e",class:"button-text"},(0,o.h)("slot",{key:"a8401b0543a204f8a2c35941456798be15e52317"}),(0,o.h)("calcite-icon",{key:"33c943f8d9d4683b60a9f7fd4148ccbd9cc6c4fb",icon:"caret-down",scale:"s",class:"button--icon"}))),(0,o.h)("calcite-popover",{key:"6b6ec7b8aa892c1fabbbce62765d4080f284f59c",ref:e=>this.popoverNode=e,label:e.layersAndTables,pointerDisabled:!0,referenceElement:this.button,closable:!0,class:"popover",placement:"bottom",overlayPositioning:"fixed",heading:e.layersAndTables,onCalcitePopoverOpen:()=>{var e;null===(e=this.telemetry)||void 0===e||e.logEvent({category:"preview popup",action:"click",pageName:(0,c.g)(),pageUrl:window.location.href}),window.addEventListener("click",this.handleWindowClick)},onCalcitePopoverClose:(0,r.f)(()=>{var e;null===(e=this.telemetry)||void 0===e||e.logEvent({category:"preview popup",action:"close",pageName:(0,c.g)(),pageUrl:window.location.href}),window.removeEventListener("click",this.handleWindowClick)},200)},(0,o.h)("div",{key:"cb9d3f8808f1607148bc33821d6c6dcfe80b68fa",class:"popover-content"},l?(0,o.h)("div",{class:"skeleton"},(0,o.h)("div",{class:"skeleton-content"},(0,o.h)("div",{class:"skeleton-left"}),(0,o.h)("div",{class:"skeleton-main"},(0,o.h)("div",{class:"skeleton-title"}),(0,o.h)("div",{class:"skeleton-subtitle"})),(0,o.h)("div",{class:"skeleton-right"}))):(0,o.h)("arcgis-layers-and-tables-summary",{portal:t,user:n,item:i,layers:v,showMatched:d&&!!this.layers,error:u,loading:!this.sublayers,telemetry:p,onLayersAndTablesFocusEnd:()=>{this.popoverNode.open=!1}})))))}get el(){return(0,o.a)(this)}};u.style=":host{max-width:100%}arcgis-layers-and-tables-summary:not(.hydrated){visibility:hidden}.popover-content{width:380px;min-height:6rem;background-color:var(--calcite-color-background)}.skeleton{margin:1rem;margin-bottom:3rem}@keyframes pulse{50%{opacity:.5}}.skeleton{animation:pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;padding:0.5rem;border:1px solid var(--calcite-color-border-2)}.skeleton-content{display:flex}.skeleton-left,.skeleton-right{height:1rem;width:1rem;background-color:var(--calcite-color-border-3)}.skeleton-main{margin-left:1rem;margin-right:1rem;flex:1 1 0%}.skeleton-title{height:1rem;background-color:var(--calcite-color-border-2)}.skeleton-subtitle{margin-top:0.25rem;height:1rem;background-color:var(--calcite-color-border-3)}@keyframes pulse{0%,100%{opacity:1}50%{opacity:0.5}}.button{max-width:100%;cursor:pointer;border-style:none;padding:0px;outline:2px solid transparent;outline-offset:2px;transition-property:all;color:inherit;background:transparent;font-family:inherit;font-size:inherit;line-height:1.5}.button:focus{outline:2px solid var(--calcite-color-brand);outline-offset:4px}.button--border{padding-left:0.5rem;padding-right:0.5rem;padding-top:0.25rem;padding-bottom:0.25rem;border:1px solid var(--calcite-color-foreground-3)}.button--border:focus{outline-offset:0}.button-text{pointer-events:none;display:flex}.button--icon{margin-inline-start:0.25rem;vertical-align:-3px}"},29369:(e,t,n)=>{function o(){const{hash:e,pathname:t}=window.location;if(t.includes("group.html"))return"group page";if(t.includes("search.html"))return"search result page";switch(e){case"#favorites":return"favorites";case"#groups":return"my groups content";case"#organization":return"my org content";case"#livingAtlas":return"living atlas";default:return"my content"}}n.d(t,{g:()=>o})},54251:(e,t,n)=>{n.d(t,{g:()=>i});var o=n(59317);function i(e){var t,n,i,r;return null!=e||(e=null===o.c||void 0===o.c?void 0:o.c.portal),(null===(t=null==e?void 0:e.credential)||void 0===t?void 0:t.token)||(null==e?void 0:e.token)||(null===(i=null===(n=null==e?void 0:e.user)||void 0===n?void 0:n.credential)||void 0===i?void 0:i.token)||(null===(r=null==e?void 0:e.portalUser)||void 0===r?void 0:r.token)||""}},83692:(e,t,n)=>{n.d(t,{a:()=>g,b:()=>v,c:()=>p,f:()=>u,g:()=>y,i:()=>h,p:()=>b,r:()=>f});var o=n(59317),i=n(4429),r=n(931),s=n(41473),a=n(54251);const l={},c={},d={};async function u(e,t,n,o){var i,r,s,a;const u=null===(r=null===(i=d[t])||void 0===i?void 0:i[n])||void 0===r?void 0:r.expireAt,h=!!u&&(new Date).getTime()>u;if((null===(s=l[t])||void 0===s?void 0:s[n])&&!h)return l[t][n];c[t]||(c[t]={}),c[t][n]&&!h||(c[t][n]=e());const p=await c[t][n];if(l[t]||(l[t]={}),d[t]||(d[t]={}),l[t][n]=p,o){const{expireAfter:e,getExpireAfterFromResult:i}=o,r=i||e?(new Date).getTime()+(null!==(a=null==i?void 0:i(p))&&void 0!==a?a:e):null;d[t][n]=Object.assign(Object.assign({},d[t][n]),{expireAt:r})}return p}function h(e,t){var n;return null===(n=null==l?void 0:l[e])||void 0===n?void 0:n[t]}const p=(e,t)=>{var n,o;t?(null===(n=l[e])||void 0===n||delete n[t],null===(o=c[e])||void 0===o||delete o[t]):(delete l[e],delete c[e])};function v(e){var t,n;return null!==(t=null==e?void 0:e.id)&&void 0!==t?t:null===(n=null==e?void 0:e.sourceJSON)||void 0===n?void 0:n.id}async function g(e,t,n={},o){const[i]=await(0,r.l)(["esri/request"]);e.includes("f=")||t.append("f","json");const s=(0,a.g)();return s&&!t.has("token")&&t.append("token",s),new Promise((r,s)=>{i(e,Object.assign(Object.assign({body:t},n),{timeout:n.timeout||0,method:o||"auto"})).then(e=>{r(e.data)}).catch(e=>s(e))})}async function f(e,t={},n={},i,s){const[a]=await(0,r.l)(["esri/request"]),{api:l,portal:c}=o.c,{customToken:d,addTokenManually:u,addSSL:h,useProxy:p}=n,v=Object.assign({},t);if(e.includes("f=")||!0===(null==s?void 0:s.excludeJson)||(v.f="json"),d)v.token=d;else if(!1!==u){const e=await y(c);e&&(v.token=e)}const g=!1===h?e:function(e){var t;const{config:n}=o.c;return"https:"===window.location.protocol||!0===(null===(t=null==n?void 0:n.self)||void 0===t?void 0:t.allSSL)?e.replace("http:","https:"):e}(e);if(3===l){const e=Object.assign({url:g,content:v,timeout:n.timeout||0},null==s?void 0:s.v3Request);n.withCredentials&&(e.withCredentials=n.withCredentials);return a(e,"post"===i?Object.assign({usePost:!0},n):n)}{const e=Object.assign(Object.assign(Object.assign({query:v,method:i||"auto"},n),{timeout:n.timeout||0,useProxy:p}),(null==n?void 0:n.disableIdentityLookup)?{authMode:"anonymous"}:{});return(await a(g,e)).data}}const m=[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,15,15,30,30,30,30,30,30,30,30,30,30,120];const b=async(e,t,n)=>{var o,r;const s=null!==(o=null==t?void 0:t.pendingStatuses)&&void 0!==o?o:["processing","partial","Pending","InProgress","EXECUTING"],a=null!==(r=null==t?void 0:t.successStatuses)&&void 0!==r?r:["completed","Completed","COMPLETED"];let l=0;const c=async()=>{const o=await f(e,null==t?void 0:t.requestParams,{},n),r=o.status||o.jobStatus;if(s.includes(r))return await(0,i.t)((d=l++,1e3*m[d>-1&&d<m.length-1?d:m.length-1])),c();if(a.includes(r)||"failed"===r||"esriJobFailed"===r)return o;throw o;var d};try{return c()}catch(e){throw console.error(e),e}},y=async e=>{var t;if(!(null==e?void 0:e.isPortal)||!(0,s.i)(e))return(0,a.g)(e);if(!(null==e?void 0:e.user)&&!(null==e?void 0:e.portalUser)&&(0,s.i)(e))return;const{token:n}=await u(()=>w(e),"platformSelf",null!==(t=v(e.user))&&void 0!==t?t:e.id,{getExpireAfterFromResult:e=>e.expires_in});return n},w=async e=>{const t=await(async e=>{var t,n;const[o]=await(0,r.l)(["esri/identity/IdentityManager"]);return null!==(n=null===(t=(await u(()=>o.getCredential((0,s.g)(e),{oAuthPopupConfirmation:!1}),"credential",v(e.user))).oAuthState)||void 0===t?void 0:t.appId)&&void 0!==n?n:"arcgisonline"})(e),n={"X-Esri-Auth-Client-Id":t,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")};return f(`${(0,s.g)(e)}/oauth2/platformSelf`,{},{disableIdentityLookup:!0,headers:n,addTokenManually:!1,withCredentials:!0},"post",{v3Request:{headers:n}})}},94984:(e,t,n)=>{n.d(t,{C:()=>a,a:()=>u,b:()=>d,f:()=>l,g:()=>s,l:()=>r,s:()=>p});var o=n(15332),i=n(931);const r=new Map([["ar","ar"],["bg","bg"],["bs","bs"],["ca","ca"],["cs","cs"],["da","da"],["de","de"],["el","el"],["en","en"],["es","es"],["et","et"],["fi","fi"],["fr","fr"],["he","he"],["hr","hr"],["hu","hu"],["id","id"],["it","it"],["ja","ja"],["ko","ko"],["lt","lt"],["lv","lv"],["nb","no"],["no","no"],["nl","nl"],["pl","pl"],["pt-br","pt-BR"],["pt-pt","pt-PT"],["ro","ro"],["ru","ru"],["sk","sk"],["sl","sl"],["sr","sr"],["sv","sv"],["th","th"],["tr","tr"],["uk","uk"],["vi","vi"],["zh-cn","zh-CN"],["zh-hk","zh-HK"],["zh-tw","zh-TW"]]);function s(e){return function(e,t,n){const i=(0,o.c)(e,`[${t}]`);return i?i.getAttribute(t):n}(e,"dir","ltr")}const a={rtl:"arcgis--rtl"};async function l(e,t){const{api:n,type:o,places:r}=t||{};if(3===n){const[n]=await(0,i.l)(["dojo/number"]);return n.format(e,{type:o,places:r,pattern:null==t?void 0:t.pattern})}const[s]=await(0,i.l)(["esri/intl"]),a=s.convertNumberFormatToIntlOptions({places:r,style:o,digitSeparator:!0});return s.formatNumber(e,Object.assign(Object.assign({},a),{style:o}))}const c={};function d(e,t){let n=document.documentElement.lang;const o="bs"===n;if(o&&(n="hr"),t){const t=`${n}-full`,o={dateStyle:"full",timeStyle:"long"};return c[t]||(c[t]=new Intl.DateTimeFormat(n,o)),c[t].format(e)}const i={year:"numeric",month:o?"numeric":"short",day:"numeric"};return c[n]||(c[n]=new Intl.DateTimeFormat(n,i)),c[n].format(e)}function u(e,t,n,o){const i=null!=e?e:"en";let r=t.unknown;return(1===n||["id","ja","ko","th","vi","zh-cn","zh-hk","zh-tw"].includes(i))&&(r=t.single),1!==n&&["en","ca","da","de","el","es","et","fi","hi","hu","it","nb","nl","pt-pt","sv","tr"].includes(i)&&(r=t.multiple),p(r,Object.assign(Object.assign({},o),{number:n}))}const h=/\$\{([^}]+)\}/g;function p(e,t,n=h){let o=e;try{o=e.replace(n,(e,n)=>function(e,t){const n=e.split(".").reduce((e,t)=>e[t],t);return"string"==typeof n||"number"==typeof n?n:e}(n,t).toString())}catch(e){console.error(e)}return o}}}]);