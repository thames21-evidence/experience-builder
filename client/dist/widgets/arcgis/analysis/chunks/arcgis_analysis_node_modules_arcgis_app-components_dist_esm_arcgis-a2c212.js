/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-a2c212.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-a2c212"],{591:(e,i,r)=>{r.r(i),r.d(i,{arcgis_member_browser_list_card:()=>a});var t=r(87849),n=r(59317),s=r(94984),o=r(1654),l=r(23966);r(37762),r(15332),r(931),r(93814),r(46904),r(41473),r(74174);const a=class{constructor(e){var i;(0,t.r)(this,e),this.arcgisMemberCardSelect=(0,t.c)(this,"arcgisMemberCardSelect",7),this.arcgisMemberBrowserCardPreview=(0,t.c)(this,"arcgisMemberBrowserCardPreview",7),this.arcgisMemberBrowserActionsOpen=(0,t.c)(this,"arcgisMemberBrowserActionsOpen",7),this.arcgisMemberBrowserInternalUIAction=(0,t.c)(this,"arcgisMemberBrowserInternalUIAction",7),this.arcgisMemberBrowserCredsLinkClick=(0,t.c)(this,"arcgisMemberBrowserCredsLinkClick",7),this.arcgisMemberBrowserUserTypeLinkClick=(0,t.c)(this,"arcgisMemberBrowserUserTypeLinkClick",7),this.arcgisMemberBrowserRoleChange=(0,t.c)(this,"arcgisMemberBrowserRoleChange",7),this.arcgisMemberBrowserLicensesClick=(0,t.c)(this,"arcgisMemberBrowserLicensesClick",7),this.arcgisMemberBrowserGroupsClick=(0,t.c)(this,"arcgisMemberBrowserGroupsClick",7),this.arcgisMemberBrowserAdminContactsLinkClick=(0,t.c)(this,"arcgisMemberBrowserAdminContactsLinkClick",7),this.creditsText="",this.member=void 0,this.user=void 0,this.portal=void 0,this.selected=void 0,this.disabled=void 0,this.baseUrl=null===(i=null===n.c||void 0===n.c?void 0:n.c.config)||void 0===i?void 0:i.baseUrl,this.actions=[],this.showDisabledState=!1,this.showCreditsLink=!1,this.showUserTypeLink=!1,this.showRoleSelect=!1,this.disableRoleSelect=!1,this.groups=void 0,this.groupsTotal=void 0,this.groupsThumbCount=4,this.columns=[]}componentWillLoad(){var e,i,r,t,n,s;this.store=(0,l.g)(this.el),this.i18n=Object.assign(Object.assign({},(null===(r=null===(i=null===(e=this.store)||void 0===e?void 0:e.state)||void 0===i?void 0:i.i18n)||void 0===r?void 0:r.tableRow)||{}),(null===(s=null===(n=null===(t=this.store)||void 0===t?void 0:t.state)||void 0===n?void 0:n.i18n)||void 0===s?void 0:s.listCard)||{})}async componentWillRender(){const{member:e,i18n:i}=this;if(void 0===e.availableCredits)return;if(-1===e.availableCredits)return void(this.creditsText=i.noLimit);const r=await(0,s.f)(e.availableCredits===e.assignedCredits?e.availableCredits:Math.floor(e.availableCredits)),t=await(0,s.f)(e.assignedCredits),n=i.creditsNumber.replace("${remain}",`${r}`).replace("${total}",`${t}`);this.creditsText=n}onClick(e){return{onClick:()=>{e()},onKeyDown:i=>{"Enter"!==i.key&&" "!==i.key||e()}}}emitInternalAction(e){this.arcgisMemberBrowserInternalUIAction.emit({category:"card action",action:e})}hasNeverLoggedIn(){return[0,-1,1e3].includes(this.member.lastLogin)}getLastLoginLabel(){const{member:e,i18n:i}=this;if(this.hasNeverLoggedIn())return i.hasNotLoggedIn;const r=new Date,t=new Date;t.setDate(t.getDate()-1);const n=new Date(e.lastLogin).toDateString();let o="";return o=r.toDateString()===n?i.today.toLowerCase():t.toDateString()===n?i.yesterday.toLowerCase():(0,s.b)(e.lastLogin),(0,s.s)(i.lastLoggedIn,{value:o})}renderUserType(){var e;const i=null===(e=this.store.state.userTypes)||void 0===e?void 0:e.find(e=>e.id===this.member.userLicenseTypeId);return(0,t.h)("div",null,this.showUserTypeLink?(0,t.h)("calcite-button",{appearance:"transparent",onClick:()=>{this.arcgisMemberBrowserUserTypeLinkClick.emit()}},null==i?void 0:i.name):null==i?void 0:i.name)}renderRole(){const{portal:e,user:i,member:r,showRoleSelect:n,disableRoleSelect:s}=this;return(0,t.h)("arcgis-member-browser-role-column",{portal:e,user:i,member:r,showRoleSelect:n,disableRoleSelect:s,onArcgisRoleColumnRoleChange:e=>{this.arcgisMemberBrowserRoleChange.emit(e.detail)},onArcgisRoleColumnContactsLinkClick:()=>{this.arcgisMemberBrowserAdminContactsLinkClick.emit()},onArcgisRoleLinkClick:()=>{this.arcgisMemberBrowserUserTypeLinkClick.emit()}})}renderCredits(){return(0,t.h)("div",null,this.showCreditsLink?(0,t.h)("calcite-button",{class:"credits-button",appearance:"transparent",onClick:()=>{this.arcgisMemberBrowserCredsLinkClick.emit()}},this.creditsText):this.creditsText)}renderGroups(){var e;const{i18n:i,portal:r,groups:n,groupsTotal:s,groupsThumbCount:l,user:a}=this;if((0,o.p)(a)&&(0,o.q)(a))return(0,t.h)("div",{tabIndex:0,class:"info-section clickable-section groups-section",onClick:()=>this.arcgisMemberBrowserGroupsClick.emit()},(0,t.h)("div",{class:"info-section-title"},i.groups),(0,t.h)("div",null,(null===(e=this.groups)||void 0===e?void 0:e.length)?(0,t.h)("arcgis-group-thumbnail-stack",{portal:r,groups:n,total:s,maxGroups:l}):(0,t.h)("div",{class:"configure-link"},i.viewGroups)))}renderLicenses(){const{i18n:e,user:i}=this;if((0,o.n)(i))return(0,t.h)("div",{tabIndex:0,class:"info-section clickable-section licenses-section",onClick:()=>this.arcgisMemberBrowserLicensesClick.emit()},(0,t.h)("div",{class:"info-section-title"},e.addonLicenses),(0,t.h)("div",null,(0,t.h)("slot",{name:"addonLicenses"})))}render(){const{member:e,portal:i,selected:r,baseUrl:n,i18n:o}=this;if(!o)return;const l=!r&&this.store.state.maxSelected&&this.store.state.selectedMembers&&this.store.state.selectedMembers.length>=this.store.state.maxSelected,a=this.disabled||l;return(0,t.h)("section",{class:{"member-list-card":!0,"member-list-card--disabled":e.disabled&&this.showDisabledState}},"multiple"===this.store.state.selection&&(0,t.h)("div",null,(0,t.h)("calcite-checkbox",{disabled:a,checked:r,value:e.username,onClick:e=>{e.stopPropagation()},onCalciteCheckboxChange:()=>{this.arcgisMemberCardSelect.emit({member:e,selected:!this.selected})}},(0,t.h)("span",{class:"screen-readers-only"},e.fullName))),(0,t.h)("div",{class:{"content-section":!0,"content-section--disabled":e.disabled&&this.showDisabledState}},(0,t.h)("div",null,(0,t.h)("arcgis-user-popup",{user:e,fullName:e.fullName,showUsername:!0,underline:!0,portal:i,baseUrl:n,scale:"l",wrap:!0,onArcgisUserPopupInternalUIAction:e=>{var i;this.emitInternalAction(null===(i=e.detail)||void 0===i?void 0:i.action)}}),this.columns.includes("lastlogin")&&(0,t.h)("div",{class:"last-login"},(0,t.h)("div",{id:`last-login-label-${e.id}`,class:"last-login-label"},this.getLastLoginLabel()),this.hasNeverLoggedIn()&&(0,t.h)("calcite-tooltip",{referenceElement:`last-login-label-${e.id}`},(0,t.h)("div",null,(0,s.s)(o.neverSignedInTooltip,{date:(0,s.b)(e.created)}))))),(0,t.h)("div",{class:"member-info-container"},this.columns.includes("usertype")&&(0,t.h)("div",{class:"info-section"},(0,t.h)("div",{class:"info-section-title"},o.userType),this.renderUserType()),this.columns.includes("role")&&(0,t.h)("div",{class:"info-section role-section"},(0,t.h)("div",{class:"info-section-title"},o.role),this.renderRole()),this.columns.includes("credits")&&(0,t.h)("div",{class:"info-section credits-section"},(0,t.h)("div",{class:"info-section-title"},o.creditsRemaining),this.renderCredits()),this.renderLicenses(),this.renderGroups())),(0,t.h)("div",null,(0,t.h)("span",null,this.actions.length>0&&(0,t.h)("calcite-button",{kind:"neutral",iconStart:"ellipsis",appearance:"transparent",label:this.i18n.moreOptions,slot:"trigger",onClick:e=>{this.arcgisMemberBrowserActionsOpen.emit({el:e.target,actions:this.actions})}}))))}get el(){return(0,t.a)(this)}};a.style=".member-list-card{margin-bottom:1rem;display:flex;background-color:var(--calcite-color-foreground-1);padding:1rem;--tw-shadow:0 4px 8px -1px rgba(0, 0, 0, 0.08), 0 2px 4px -1px rgba(0, 0, 0, 0.04);--tw-shadow-colored:0 4px 8px -1px var(--tw-shadow-color), 0 2px 4px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.content-section--disabled{opacity:0.5}.content-section{margin-left:1rem;margin-right:1rem;flex:1 1 0%}.member-info-container{margin-top:1rem;display:flex;width:100%;flex-wrap:wrap}.screen-readers-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.role-select-container{display:flex;align-items:center}.role-select{flex:1 1 0%}.role-info{margin-inline-end:1rem;display:none}.role-info--visible{display:inline-block}.role-info-container{width:20rem;padding:1rem}.role-info-heading{font-size:1rem;font-weight:500}.role-info-content{margin-bottom:0px}.last-login{margin-inline-start:3.5rem;font-size:0.75rem}.last-login-label{display:inline-block}.info-section{box-sizing:border-box;min-width:180px;flex:1 1 0%;padding:1rem;border-inline-end:1px solid var(--calcite-color-border-3)}.info-section-title{font-size:0.75rem}.role-section,.credits-section{padding-inline-start:1rem}.groups-section{border-inline-end-width:0px}.clickable-section{cursor:pointer}.clickable-section:hover{background-color:var(--calcite-color-background)}.configure-link{font-size:0.875rem;color:var(--calcite-color-text-link)}.credits-button{max-width:100%}"},931:(e,i,r)=>{r.d(i,{l:()=>n});var t=r(93814);const n=async(e,i)=>(await t.e.exports.loadModules(e,i)).map(e=>e.__esModule&&e.default?e.default:e)},1654:(e,i,r)=>{r.d(i,{A:()=>w,B:()=>B,C:()=>D,D:()=>O,E:()=>m,F:()=>A,a:()=>l,b:()=>s,c:()=>o,d:()=>b,e:()=>k,f:()=>C,g:()=>y,h:()=>L,i:()=>p,j:()=>x,k:()=>U,l:()=>c,m:()=>d,n:()=>a,o:()=>I,p:()=>v,q:()=>h,r:()=>g,s:()=>G,t:()=>$,u:()=>u,v:()=>T,w:()=>S,x:()=>R,y:()=>_,z:()=>f});var t=r(46904);const n=e=>{var i,r,t;return"string"==typeof(null==e?void 0:e.role)&&(null==e?void 0:e.role)?null==e?void 0:e.role:null!==(r=null!==(i=null==e?void 0:e.roleId)&&void 0!==i?i:null==e?void 0:e.id)&&void 0!==r?r:null===(t=null==e?void 0:e.sourceJSON)||void 0===t?void 0:t.id};function s(e){return e&&!e.orgId}function o(e,i){return(0,t.u)(e,i)||"update"===e.itemControl||(0,t.c)([e],i)&&C(i)}function l(e,i){const r=(0,t.c)([e],i),n=(0,t.u)(e,i)||C(i)&&r,s=y(i)&&M(i);return!!(n||r&&s)}const a=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:manageLicenses"))},c=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:inviteUsers"))},d=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:manageRoles"))},u=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:changeUserRoles"))},v=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:viewGroups"))},h=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:viewUsers"))};function p(e){return["Trial Developer","Developer","Developer Subscription"].includes(null==e?void 0:e.type)}function m(e){return["Developer Subscription"].includes(null==e?void 0:e.type)}function g(e){return["Geoanalytics Engine","GeoAnalytics MS Fabric"].includes(null==e?void 0:e.type)}const b=e=>{var i;return null===(i=null==e?void 0:e.options)||void 0===i?void 0:i.includes("Developer")},f=e=>{var i;return null===(i=null==e?void 0:e.options)||void 0===i?void 0:i.includes("PublicSharingDisabled")},w=e=>{var i;return null===(i=null==e?void 0:e.options)||void 0===i?void 0:i.includes("HostedServicesPublicSharingDisabled")};function C(e){return"org_admin"===n(e)||"account_admin"===n(e)}function k(e){return["org_admin","account_admin"].includes(n(e))&&!(null==e?void 0:e.roleId)}function y(e){return!!(null==e?void 0:e.roleId)&&e.roleId.length>0}function x(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:updateItemCategorySchema"))}function L(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:updateGroups"))}function I(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:assignToGroups"))}const M=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:deleteItems"))};function T(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToGroup")}function S(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToOrg")}function B(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToPublic")}function _(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToOrg")}function D(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToPublic")}function R(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToGroup")}function U(e,i,r,t){const n=t&&!["Trial","Trial Press","Trial Developer","Developer Subscription","Evaluation"].includes(t.type),s=((null==i?void 0:i.privileges)||[]).includes("portal:admin:manageCollaborations");return!(!(null==e?void 0:e.collaborationsEnabled)||!i||!C(i)&&!s||!(null==r?void 0:r.isPortal)&&!n)}function A(e){return!!e&&(!y(e)||y(e)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:viewItems")}(e))}const O=({items:e,user:i,portal:r})=>{const n=e[0],s=n.owner;if(r.isPortal&&s!==i.username&&s.includes("esri_")&&!["esri_livingatlas"].includes(s))return!1;const l=(0,t.u)(n,i),a=y(i),c=P(i),d=o(n,i)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:updateItems")}(i)&&!a&&(function(e,i){return!function(e){return!(!e.urlKey||!e.customBaseUrl)||!!e.isPortal}(i)||T(e)||S(e)||!!i.canSharePublic&&B(e)}(i,r)||P(i));return l||d||(0,t.c)(e,i)&&c};function P(e){return R(e)||_(e)||D(e)}const z=["portal:user:createItem","portal:user:viewOrgItems","premium:publisher:createNotebooks","portal:publisher:createDataPipelines","features:user:edit","features:user:fullEdit","portal:admin:viewItems","portal:admin:updateItems","portal:admin:deleteItems"];function $(e){return e.some(e=>z.includes(e))}function G(e){return e.filter(e=>z.includes(e))}},23966:(e,i,r)=>{r.d(i,{a:()=>o,g:()=>s,o:()=>l});var t=r(37762),n=r(74174);function s(e){return(0,n.g)(e,"arcgis-member-browser")}const o=(e,i)=>{e.onChange("view",e=>{i(e)})};(0,t.c)({type:"member-browser",includeExternalUsers:!1});const l=(e,i)=>{e.onChange("sort",e=>{i(e)})}},46904:(e,i,r)=>{r.d(i,{a:()=>o,b:()=>s,c:()=>c,d:()=>d,e:()=>u,f:()=>v,g:()=>h,i:()=>l,u:()=>a});r(93814);var t=r(41473);function n(e){var i;return!!(null===(i=e.owner)||void 0===i?void 0:i.toLowerCase().includes("esri"))}function s(e){var i;return n(e)&&!!(null===(i=e.typeKeywords)||void 0===i?void 0:i.includes("Requires Credits"))}function o(e){var i;return n(e)&&!!(null===(i=e.typeKeywords)||void 0===i?void 0:i.includes("Requires Subscription"))}function l(e,i){return e.owner===i.username}function a(e,i){return l(e,i)||function(e,i){var r;if(null!=e.isAdmin)return!!e.isAdmin;const t=e.owner,n="admin"===e.itemControl,s=["esri_livingatlas","esri_demographics","esri_boundaries"];if((null===(r=e.portal)||void 0===r?void 0:r.isPortal)&&!l(e,i)&&n&&t.includes("esri_")&&!s.includes(t))return!1;return n}(e,i)}const c=(e,i)=>!!i.orgId&&e.every(e=>e.isOrgItem),d=(e,i)=>`${(0,t.a)(i)}item.html?id=${e}`,u=(e,i)=>`${(0,t.g)(i)}/content/users/${e}`,v=e=>e.reduce((e,i)=>(e[i.owner]=e[i.owner]?[...e[i.owner],i.id]:[i.id],e),{}),h=(e,i)=>`${(0,t.a)(i)}content/items/${e}`},74174:(e,i,r)=>{r.d(i,{a:()=>s,b:()=>l,g:()=>c,i:()=>n,o:()=>o});var t=r(15332);const n=e=>"item-browser"===e.state.type,s=(e,i,r)=>{i.onChange("filters",i=>{i[e]&&i[e].value||r()})},o=(e,i)=>{e.onChange("preview",e=>{i()})},l=(e,i)=>{e.onChange("groupId",e=>{i()})},a=new Map;function c(e,i){const r=a.get(e);if(r)return r;const n=(0,t.c)(e,i);return n?(a.set(e,n.store),n.store):null}},94984:(e,i,r)=>{r.d(i,{C:()=>l,a:()=>u,b:()=>d,f:()=>a,g:()=>o,l:()=>s,s:()=>h});var t=r(15332),n=r(931);const s=new Map([["ar","ar"],["bg","bg"],["bs","bs"],["ca","ca"],["cs","cs"],["da","da"],["de","de"],["el","el"],["en","en"],["es","es"],["et","et"],["fi","fi"],["fr","fr"],["he","he"],["hr","hr"],["hu","hu"],["id","id"],["it","it"],["ja","ja"],["ko","ko"],["lt","lt"],["lv","lv"],["nb","no"],["no","no"],["nl","nl"],["pl","pl"],["pt-br","pt-BR"],["pt-pt","pt-PT"],["ro","ro"],["ru","ru"],["sk","sk"],["sl","sl"],["sr","sr"],["sv","sv"],["th","th"],["tr","tr"],["uk","uk"],["vi","vi"],["zh-cn","zh-CN"],["zh-hk","zh-HK"],["zh-tw","zh-TW"]]);function o(e){return function(e,i,r){const n=(0,t.c)(e,`[${i}]`);return n?n.getAttribute(i):r}(e,"dir","ltr")}const l={rtl:"arcgis--rtl"};async function a(e,i){const{api:r,type:t,places:s}=i||{};if(3===r){const[r]=await(0,n.l)(["dojo/number"]);return r.format(e,{type:t,places:s,pattern:null==i?void 0:i.pattern})}const[o]=await(0,n.l)(["esri/intl"]),l=o.convertNumberFormatToIntlOptions({places:s,style:t,digitSeparator:!0});return o.formatNumber(e,Object.assign(Object.assign({},l),{style:t}))}const c={};function d(e,i){let r=document.documentElement.lang;const t="bs"===r;if(t&&(r="hr"),i){const i=`${r}-full`,t={dateStyle:"full",timeStyle:"long"};return c[i]||(c[i]=new Intl.DateTimeFormat(r,t)),c[i].format(e)}const n={year:"numeric",month:t?"numeric":"short",day:"numeric"};return c[r]||(c[r]=new Intl.DateTimeFormat(r,n)),c[r].format(e)}function u(e,i,r,t){const n=null!=e?e:"en";let s=i.unknown;return(1===r||["id","ja","ko","th","vi","zh-cn","zh-hk","zh-tw"].includes(n))&&(s=i.single),1!==r&&["en","ca","da","de","el","es","et","fi","hi","hu","it","nb","nl","pt-pt","sv","tr"].includes(n)&&(s=i.multiple),h(s,Object.assign(Object.assign({},t),{number:r}))}const v=/\$\{([^}]+)\}/g;function h(e,i,r=v){let t=e;try{t=e.replace(r,(e,r)=>function(e,i){const r=e.split(".").reduce((e,i)=>e[i],i);return"string"==typeof r||"number"==typeof r?r:e}(r,i).toString())}catch(e){console.error(e)}return t}}}]);