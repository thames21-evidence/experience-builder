"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_arcgis-raster-function-editor_-b8403e"],{33797:(e,t,a)=>{a.d(t,{C:()=>s,U:()=>n,a:()=>i,u:()=>r});const n={Scale:"s",PopoverTimer:60},s={s:"s",m:"m",l:"l"},i={absolute:"absolute",fixed:"fixed"},r=e=>e===s.s?s.m:s.l},51349:(e,t,a)=>{a.r(t),a.d(t,{rfx_cte_subset_bands_combo_editor:()=>n.R});var n=a(76596);a(92265),a(69843),a(5294),a(13661),a(18423),a(21255),a(35431),a(38949),a(32513),a(33752),a(44345),a(588),a(55448),a(2924),a(11840),a(52373),a(440),a(66744),a(33797),a(71802),a(36596),a(23795),a(17902),a(56451)},69843:(e,t,a)=>{a.d(t,{D:()=>o,S:()=>n,a:()=>u,b:()=>l,c:()=>h,f:()=>g,g:()=>c});const n={Arabic:"ar",Bosnian:"bs",Bulgarian:"bg",Catalan:"ca",Czech:"cs",Danish:"da",German:"de",Greek:"el",English:"en",EnglishUSA:"en-US",Spanish:"es",Estonian:"et",Finnish:"fi",French:"fr",Hebrew:"he",Hindi:"hi",Croatian:"hr",Hungarian:"hu",Indonesian:"id",Italian:"it",Japanese:"ja",Korean:"ko",Lithuanian:"lt",Latvian:"lv",Norwegian:"no",Dutch:"nl",Polish:"pl",PortugueseBrazil:"pt-BR",PortuguesePortugal:"pt-PT",Romanian:"ro",Russian:"ru",Serbian:"sr",Slovenian:"sl",Slovak:"sk",Swedish:"sv",Thai:"th",Turkish:"tr",Ukrainian:"uk",Vietnamese:"vi",ChineseChina:"zh-CN",ChineseHongKong:"zh-HK",ChineseTaiwan:"zh-TW"},s=["ar","de","es","fr","it","ja","ko","ru","pl","pt-br","zh-cn"],i={"ar-BH":"ar","en-AU":"en","en-CA":"en","en-GB":"en","en-US":"en","es-ES":"es","es-MX":"es","de-CH":"de","de-AT":"de","de-DE":"de","fr-CA":"fr","fr-CH":"fr","fr-FR":"fr","it-CH":"it","it-IT":"it",nb:"no",nn:"no","nn-no":"no",ind:"id",ukr:"uk"},r=[n.Arabic,n.Hebrew],o=n.English;function l(e){return!0===e?"rtl":"ltr"}function d(e,t){const a=o;let s=e?.toLowerCase();if(void 0!==s&&-1!==s.indexOf("-")){const[e,t]=s.split("-");s=`${e}-${t.toUpperCase()}`}if(!s)return a;const r=Object.keys(i);if(!0===r.includes(s))return t[s];const l=Object.values(n);if(!1===l.includes(s)){const e=function(e){const t=e?.match(/^([a-z]{2})-([A-Z]{1,2})$/);let a=n.English;return null!=t&&t?.length>1?a=t[1]:2===e?.length&&e.toLowerCase()===e&&(a=e),a}(s);!0===l.includes(e)?s=e:!0===r.includes(e)&&(s=t[e])}return s}function c(e=document.documentElement){const t=(a="[lang]",function e(t){let n;return n=void 0===t||t===document||t===window?null:t.closest(a)||e(t.getRootNode().host),n}(e));var a;const s=t?.lang??window.navigator.language,l=Object.values(n),c=o,h=d(s,i);return{locale:l.includes(h)?h:c,rtl:r.includes(s)}}async function h(e,t){const a=e.tagName.toLowerCase(),{locale:n,rtl:s}=c(e),i=await async function(e){const{path:t,locale:a,baseURL:n}=e;let s={};try{const e=await fetch(`${n}t9n/${t}.t9n.${a}.json`);s=await e.json()}catch(e){const a=await fetch(`${n}t9n/${t}.t9n.${o}.json`);s=await a.json()}return s}({path:a,locale:n,baseURL:t});return{strings:i,dir:l(s),locale:n}}function u(e,t){if(!1===/^(?:[a-z]+:)?\/\//i.test(e)){const a=window.location.href,n=new URL(a).origin,s=new URL(t).origin;n!==s&&(e=`${s}${e}`)}return e}function g(e,t="en"){let a=t;!0===Object.keys(i).includes(t)&&(a=i[t]);const n=a.toLocaleLowerCase();return!0===s.includes(n)&&(e=e.replace(/^https?:\/\/[^/]+\/en/,e=>e.replace("en",n))),e}},76596:(e,t,a)=>{a.d(t,{R:()=>h});var n=a(92265),s=a(69843),i=(a(5294),a(13661),a(18423),a(21255),a(35431),a(38949)),r=(a(588),a(55448),a(2924),a(11840),a(52373),a(33752),a(440),a(66744),a(44345),a(33797));a(71802),a(36596),a(23795),a(17902),a(56451);const o="subsetBandCombinationHelpClickHandler",l="range-container",d="dropdown",c="add-button",h=class{constructor(e){(0,n.r)(this,e),this.rfxArgumentChange=(0,n.c)(this,"rfxArgumentChange"),this.rfxArgHelpClick=(0,n.c)(this,"rfxArgHelpClick"),this.helpActionClickEventHandlers=new Map,this.ranges="",this.onMethodChange=e=>{const t=e.target;this.method=Number.parseInt(t.value,10),this.widgetArgs.inputArgs?.Method&&(this.widgetArgs.inputArgs.Method.value=this.method);const a=0===this.method?"bandIds":1===this.method?"bandWavelength":"bandNames",n=this.getBandOptions(a);return this.options=n,this.selectedMin=n[0]?.label||"",2!==this.method&&(this.selectedMax=n[1]?.label||n[0]?.label||""),this.ranges="",this.method},this.handleMinimumChange=e=>{const t=e.detail;t&&(this.selectedMin=t.value)},this.handleMaximumChange=e=>{const t=e.detail;t&&(this.selectedMax=t.value)}}connectedCallback(){this.processWidgetArgs()}async componentWillLoad(){({strings:this.strings,dir:this.direction}=await(0,s.c)(this.hostElement,(0,n.d)("."))),this.setupInitialState()}componentDidLoad(){this.attachHelpClickEventHandlers()}processWidgetArgs(){if(!this.widgetArgs?.rasterArgs)return;this.rasterArg=this.widgetArgs.rasterArgs.Raster,this.rasterArg?.input?.addEventListener("rfxArgumentChange",()=>{this.updateRasterArg()});const e=this.widgetArgs.triggerArgs.Method;this.method=e,e.input?.addEventListener("rfxArgumentChange",this.onMethodChange.bind(this))}setupInitialState(){this.updateRasterArg(),this.setMethodValue(),this.ranges=this.getRangeValue()}attachHelpClickEventHandlers(){const e=this.widgetArgs.onHelpActionClick({heading:this.widgetArgs?.inputArgs?.Bands?.displayName,referenceElement:this.subsetBandCombinationContainer,helpTextID:this.widgetArgs.helpTextIDs?.subsetbands_combination??this.widgetArgs.helpTextIDs?.labelbadbands_combination});this.helpActionClickEventHandlers.set(o,e)}async setMethodValue(){this.method=this.widgetArgs.triggerArgs?.Method?.value;const e=0===this.method?"bandIds":1===this.method?"bandWavelength":"bandNames",t=this.getBandOptions(e);this.options=t}getBandOptions(e){if(!this.bandProperties)return[];return this.bandProperties[e].map(e=>({key:e.label.toString(),label:e.label}))}async updateRasterArg(){const e=this.rasterArg&&this.rasterArg.input;this.layer=await(e?.getSelectedLayer?.()),await this.updateBands()}async updateBands(){this.layer&&(this.layer.loaded?(await this.updateBandsOnLayerLoad(),await this.setMethodValue()):this.layer.when(async()=>{await this.updateBandsOnLayerLoad(),this._setupValues(),await this.setMethodValue()}))}_setupValues(){const e=this.widgetArgs.inputArgs;e&&e.Method&&void 0!==e.Method.value?this.method=e.Method.value:!e.BandIds||e.BandNames||e.BandWavelengths?!e.BandNames||e.BandIds||e.BandWavelengths?!e.bandWavelengths||e.BandIds||e.BandNames||(this.method=1):this.method=0:this.method=2}async updateBandsOnLayerLoad(){let e=[],t=[],a=[];const n=await(this.layer?.generateRasterInfo(this.layer.rasterFunction)),s=n?.keyProperties;if(s?.BandProperties?.forEach((n,s)=>{e.push({label:String(s+1)}),t.push({label:n.BandName??`Band_${s+1}`}),a.push({label:n.Wavelength})}),!s.BandProperties||s.BandProperties&&!s.BandProperties.length){const a=this._getDefaultBandProperties(n.bandCount);t=a.bandNames,e=a.bandIds}this.bandProperties={bandIds:e,bandNames:t,bandWavelength:a}}_getDefaultBandProperties(e){const t=[],a=[],n=[];for(let s=1;s<=e;s++)t.push({label:String(s)}),a.push({label:`Band_${s}`}),n.push({label:String(s)});return{bandNames:a,bandIds:t,bandWavelength:n}}addRange(){let e;const t=this.options.find(e=>e.key===this.selectedMin)?.label||this.options[0]?.label,a=2!==this.method?this.options.find(e=>e.key===this.selectedMax)?.label||this.options[1]?.label:"";if(t){if(t===a||""===a)e=t;else{const n=[t,a].sort((e,t)=>e.localeCompare(t));e=`${n[0]}-${n[1]}`}return this.ranges=this.ranges?`${this.ranges} ${e}`:e,this.updateRangeValue(),this.ranges}}handleRangeInput(e){const t=e.target;this.ranges=t.value.split(" ").map(e=>e.trim()).filter(e=>e.length>0).join(" ")}updateRangeValue(){const e=this.widgetArgs.inputArgs;e&&(e.Bands.value=this.ranges)}getRangeValue(){const e=this.widgetArgs.inputArgs;return e?.Bands?.value}render(){return(0,n.h)("div",{key:"1aedb26d67c630340ac9a5f782ff85fc3ebc14a5"},(0,n.h)("div",{key:"4ea142826b303528030e77d4d3eb2d7533a43f68",class:l},(0,n.h)("calcite-label",{key:"2b019fb47a8dd25e6c5da4d0de4ec8c467d8ef34",alignment:"start",scale:i.s.scale??r.U.Scale,layout:"default",ref:e=>{this.subsetBandCombinationContainer=e}},(0,n.h)("rfx-label",{key:"2a8e93dee966fc3f244d3915fa65bb9c3b7ddc06",label:this.strings.minimum,hideHelp:!0}),(0,n.h)("rfx-dtex-common-select",{key:"967440a9a607a48202372addaefe84b6b1f6afed",mode:this.widgetArgs.mode,options:this.options,value:void 0!==this.selectedMin?this.selectedMin:this.options[0]?.label,class:d,onRfxArgumentChange:this.handleMinimumChange})),2!==this.method&&(0,n.h)("calcite-label",{key:"72930c0cded5aa8dab3a3b7da2ffad11e4b052f8",alignment:"start",scale:i.s.scale??r.U.Scale,layout:"default",ref:e=>{this.subsetBandCombinationContainer=e}},(0,n.h)("rfx-label",{key:"a6e03502a08c481e1c49c309b5d54395ea490888",label:this.strings.maximum,hideHelp:!0}),(0,n.h)("rfx-dtex-common-select",{key:"2d7539f635d0262c253711ace723b6f478026f74",mode:this.widgetArgs.mode,options:this.options,value:void 0!==this.selectedMax?this.selectedMax:this.options[1]?.label,class:d,hidden:2===this.method,onRfxArgumentChange:this.handleMaximumChange})),(0,n.h)("calcite-button",{key:"2fecfa44001991ee9378265962451370b8d4234f",slot:"action","icon-start":"plus",scale:"s",width:"auto",class:c,onClick:()=>this.addRange()})),(0,n.h)("calcite-label",{key:"fd643bb508dfad3e6a7d99528b19ccd7bad10161",alignment:"start",scale:i.s.scale??r.U.Scale,layout:"default",ref:e=>{this.subsetBandCombinationContainer=e}},(0,n.h)("rfx-label",{key:"61bb5f4b6ac63e3ee6ad3d40e48e60b6541af8d0",label:this.strings.combination,onRfxLabelHelpActionClick:()=>this.helpActionClickEventHandlers?.get(o)()}),(0,n.h)("calcite-input-text",{key:"7e10c1f32bd85048e1112874cd423fa3c420a333",scale:i.s.scale??r.U.Scale,dir:this.direction,value:this.ranges,status:"idle",alignment:"start",onCalciteInputTextChange:e=>this.handleRangeInput(e),ref:e=>{this.bandCombinationElement=e}})))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,n.a)(this)}};h.style=":root{--calcite-color-brand:#007ac2;--calcite-color-brand-hover:#00619b;--calcite-color-brand-press:#004874;--calcite-color-status-info:#00619b;--calcite-color-status-success:#35ac46;--calcite-color-status-warning:#edd317;--calcite-color-status-danger:#d83020;--calcite-color-status-danger-hover:#a82b1e;--calcite-color-status-danger-press:#7c1d13;--calcite-color-background:#f8f8f8;--calcite-color-foreground-1:#ffffff;--calcite-color-foreground-2:#f3f3f3;--calcite-color-foreground-3:#eaeaea;--calcite-color-text-1:#151515;--calcite-color-text-2:#4a4a4a;--calcite-color-text-3:#6a6a6a;--calcite-color-text-inverse:#ffffff;--calcite-color-text-link:#00619b;--calcite-color-border-1:#cacaca;--calcite-color-border-2:#d4d4d4;--calcite-color-border-3:#dfdfdf;--calcite-color-border-input:#949494;--rfx-quarter-spacing:0.25rem;--rfx-half-spacing:0.5rem;--rfx-three-quarter-spacing:0.75rem;--rfx-full-spacing:1rem;--rfx-component-default-width:100%;--rfx-ui-border-input:var(--calcite-color-border-2);--rfx-popover-content-min-height:30vh;--rfx-popover-content-max-height:60vh;--rfx-popover-content-height:45vh;--rfx-widget-content-height:30vh;--rfx-modal-width-small:32rem}.range-container{display:flex;flex-direction:row;justify-content:space-between}.dropdown{width:150px;padding:5px;-webkit-appearance:none;-moz-appearance:none;appearance:none}.add-button{width:auto;align-self:center;margin-top:1.6rem}"}}]);