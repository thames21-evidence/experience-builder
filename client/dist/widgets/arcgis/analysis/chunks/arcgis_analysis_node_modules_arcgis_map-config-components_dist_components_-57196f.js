/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-57196f.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-57196f"],{6154:(s,e,a)=>{a.r(e),a.d(e,{ArcgisMapConfigSmartMappingClassBreaksColorSlider:()=>m});var l=a(73679),r=a(4395),i=a(85643),t=a(56451),n=a(22001),o=a(1225),h=(a(54312),a(44345),a(55448),a(52797),a(34031),a(63438),a(5933),a(28927),a(83368),a(89704),a(47550)),u=(a(5294),a(23054),a(5077),a(23795),a(17902),a(87420),a(30161),a(81734),a(75698),a(10628),a(59640),a(64451),a(6176),a(18423),a(96086),a(91813),a(21255),a(13078),a(21303),a(12627),a(65595)),c=(a(77462),a(49403),a(66617),a(10454),a(28973)),d=(a(94916),a(52554),a(2156),a(4038),a(49851),a(75054),a(15223),a(70169),a(29614),a(47207),a(70852),a(48103),a(39423),a(85681),a(18444),a(42411),a(9767),a(38218),a(91914),a(31521),a(86605),a(68196),a(440),a(46547),a(6238),a(7299),a(73801));const p=r.AH`.slider-box{height:320px;.esri-classed-color-slider{min-width:200px}.esri-classed-color-slider .esri-slider .esri-slider__content{height:175px}.esri-classed-color-slider .esri-slider .esri-slider__label,.esri-classed-color-slider .esri-slider .esri-slider__min,.esri-classed-color-slider .esri-slider .esri-slider__max{text-decoration:underline}.esri-classed-color-slider .esri-slider .esri-slider__label:hover,.esri-classed-color-slider .esri-slider .esri-slider__min:hover,.esri-classed-color-slider .esri-slider .esri-slider__max:hover{border:1px solid #bbb;background-color:#f3f3f3;text-decoration:none;z-index:1}}.slider-box-buttons-front{display:flex}`;class m extends d.WF{constructor(){super(...arguments),this.styleSheetStatus="not-loaded",this.smartMappingState=(0,u.u)(),this.arcgisSmartMappingClassBreaksColorSliderChange=(0,d.lh)(),this.arcgisSmartMappingClassBreaksColorSliderError=(0,d.lh)()}static{this.styles=p}divRefHandler(s){if(s)if(this.classBreaksColorSlider.container)s.append(this.classBreaksColorSlider.container);else{const e=document.createElement("div");s.append(e),this.classBreaksColorSlider.container=e}}prepareClassBreaksColorSlider(){const{smartMappingState:s}=this,e=(0,o.T)(s);let a,l;a=e.classBreakInfos[0].minValue,l=e.classBreakInfos[e.classBreakInfos.length-1].maxValue,({min:a,max:l}=(0,o.au)({min:a,max:l}));const r=(0,c.g)(s),i={min:a,max:l,breaks:r,precision:(0,h.g)(r)};return this.classBreaksColorSlider?this.classBreaksColorSlider.set(i):(this.classBreaksColorSlider=new n.default(i),this.classBreaksColorSlider&&this.classBreaksColorSlider.min===this.classBreaksColorSlider.max&&this.classBreaksColorSlider.set(i),this.createClassBreaksColorSliderChangeEvents()),(0,o.V)(this.classBreaksColorSlider)}createClassBreaksColorSliderChangeEvents(){const{smartMappingState:s}=this;this.classBreaksColorSlider&&(this.classBreaksColorSlider.on("min-change",e=>{const a=(0,o.T)(s).classBreakInfos;e.value>a[0].maxValue?this.handleMinMaxChange(a[0].maxValue,a[a.length-1].maxValue):this.handleMinMaxChange(e.value,a[a.length-1].maxValue)}),this.classBreaksColorSlider.on("max-change",e=>{const a=(0,o.T)(s).classBreakInfos;e.value<a[a.length-1].minValue?this.handleMinMaxChange(a[0].minValue,a[a.length-1].minValue):this.handleMinMaxChange(a[0].minValue,e.value)}),this.classBreaksColorSlider.on("thumb-change",()=>this.updateRasterRendererBreaks(this.classBreaksColorSlider.breaks)),this.classBreaksColorSlider.on("thumb-drag",()=>this.updateRasterRendererBreaks(this.classBreaksColorSlider.breaks)))}handleInvertSlider(){const{smartMappingState:s}=this,e=(0,o.T)(s);(0,o.f)();let a=e.classBreakInfos.map(s=>(0,o.i)(s.symbol)||new t.default({r:64,g:64,b:64,a:1}));a=a.reverse(),e.classBreakInfos.forEach((s,e)=>{(0,o.i)(s.symbol)&&(0,o.y)(s.symbol,a[e])}),(0,o.ag)(s),this.arcgisSmartMappingClassBreaksColorSliderChange.emit({invertColors:!0})}handleMinMaxChange(s,e){const{smartMappingState:a}=this,l=(0,o.T)(a),r=l.classBreakInfos[0],i=l.classBreakInfos[l.classBreakInfos.length-1];r.minValue=s,r.label=(0,o.aw)(r,this.classBreaksColorSlider.precision),i.maxValue=e,i.label=(0,o.aw)(i,this.classBreaksColorSlider.precision),(0,o.ag)(a),this.arcgisSmartMappingClassBreaksColorSliderChange.emit({updateValues:!0})}updateRasterRendererBreaks(s){const{smartMappingState:e}=this;(0,o.T)(e).classBreakInfos.forEach((e,a)=>{(e.minValue!==s[a].min||e.maxValue!==s[a].max)&&(e.minValue=s[a].min,e.maxValue=s[a].max,e.label=(0,o.aw)(e,this.classBreaksColorSlider.precision))}),(0,o.ag)(e),this.arcgisSmartMappingClassBreaksColorSliderChange.emit({updateValues:!0})}render(){const{config:s}=this.smartMappingState;return r.qy`<link rel=stylesheet href=${`${s.jsapiUrl}/themes/light/main.css`} @load=${()=>{this.styleSheetStatus="loaded",this.requestUpdate()}} @error=${()=>{this.styleSheetStatus="failed",this.requestUpdate()}}>${"loaded"===this.styleSheetStatus?this.renderClassBreaksColorSlider():"not-loaded"===this.styleSheetStatus?this.renderClassBreaksColorSliderLoading():null}`}renderClassBreaksColorSlider(){const{smartMappingState:s}=this,{_messages:e}=s;return 1===(0,o.T)(s).classBreakInfos.length?(this.classBreaksColorSlider&&(this.classBreaksColorSlider.destroy(),this.classBreaksColorSlider=void 0),""):(this.prepareClassBreaksColorSlider()||this.classBreaksColorSlider)&&this.classBreaksColorSlider.min!==this.classBreaksColorSlider.max?r.qy`<div class="slider-box"><calcite-label>${e.panels.classBreaks.dataRange}</calcite-label><div class="slider-box-buttons-front">${this.renderInvertButton()}</div><div ${(0,i.K)(this.divRefHandler)}></div></div>`:this.classBreaksColorSlider&&this.classBreaksColorSlider.min===this.classBreaksColorSlider.max?"":this.renderClassBreaksColorSliderLoading()}renderInvertButton(){const{_messages:s}=this.smartMappingState;return r.qy`<arcgis-map-config-smart-mapping-action .text=${s.panels.classBreaks.invertSlider} icon=arrowUpDown @click=${()=>this.handleInvertSlider()}></arcgis-map-config-smart-mapping-action>`}renderClassBreaksColorSliderLoading(){const{_messages:s}=this.smartMappingState;return r.qy`<div class="slider-box"><calcite-loader .label=${s.loading}></calcite-loader></div>`}}(0,l.c)("arcgis-map-config-smart-mapping-class-breaks-color-slider",m)},47550:(s,e,a)=>{a.d(e,{a:()=>h,b:()=>o,g:()=>p,u:()=>n});var l=a(5294),r=a(52797),i=(a(54312),a(44345),a(55448),a(34031),a(63438),a(5933),a(28927),a(83368),a(89704),a(66228)),t=(a(56451),a(31521),a(23054),a(5077),a(23795),a(17902),a(87420),a(30161),a(81734),a(1225));a(83552),a(77462),a(49403),a(10281),a(83930),a(66617),a(10628),a(59640),a(64451),a(6176),a(10454),a(29614),a(94916),a(52554),a(2156),a(4038),a(49851),a(75054),a(15223),a(70169),a(47207),a(70852),a(48103),a(39423),a(85681),a(18444),a(42411),a(9767),a(38218),a(91914),a(86605),a(68196),a(440),a(46547),a(6238),a(7299);function n(s,e){const a=(0,t.g)(s),n=l.clone(a.classBreakInfos);a.classBreakInfos=[],n.forEach((s,l)=>{s=function(s,e,a,l){if((0,i.i)(e)&&0!==e)if(e<1){const i=Math.round(1/e);s.minValue="first"===l?Math.floor(s.minValue/e)/i:Math.round(s.minValue/e)/i,s.maxValue="last"===l?Math.ceil(s.maxValue/e)/i:Math.round(s.maxValue/e)/i,s.label=`${a>0?"> ":""}${s.minValue.toLocaleString(r.getLocale(),{maximumSignificantDigits:15})} - ${s.maxValue.toLocaleString(r.getLocale(),{maximumSignificantDigits:15})}`}else s.minValue="first"===l?Math.floor(s.minValue/e)*e:Math.round(s.minValue/e)*e,s.maxValue="last"===l?Math.ceil(s.maxValue/e)*e:Math.round(s.maxValue/e)*e,s.label=`${a>0?"> ":""}${s.minValue.toLocaleString()} - ${s.maxValue.toLocaleString()}`;return s}(s,e,l,0===l?"first":l===n.length-1?"last":void 0),a.addClassBreakInfo({minValue:s.minValue,maxValue:s.maxValue,symbol:s.symbol,label:s.label})})}function o(s,e){const a=(0,t.g)(s).classBreakInfos;let l=e,r=Number.POSITIVE_INFINITY;a.forEach(s=>{l||(l=Math.max(u(s.minValue),u(s.maxValue))),r=Math.min(r,s.maxValue-s.minValue)});const i=[];return r>1e7?(i.push(1e7),i.push(1e6),i.push(1e5),i.push(1e4),i.push(1e3),i.push(100),i.push(10),l>0&&i.push(1),l>1&&i.push(.1),l>2&&i.push(.01)):r>1e6?(i.push(1e6),i.push(1e5),i.push(1e4),i.push(1e3),i.push(100),i.push(10),l>0&&i.push(1),l>1&&i.push(.1),l>2&&i.push(.01)):r>1e5?(i.push(1e5),i.push(1e4),i.push(1e3),i.push(100),i.push(10),l>0&&i.push(1),l>1&&i.push(.1),l>2&&i.push(.01)):r>1e4?(i.push(1e4),i.push(1e3),i.push(100),i.push(10),l>0&&i.push(1),l>1&&i.push(.1),l>2&&i.push(.01)):r>1e3?(i.push(1e3),i.push(100),i.push(10),l>0&&i.push(1),l>1&&i.push(.1),l>2&&i.push(.01),l>3&&i.push(.001)):r>100?(i.push(100),i.push(10),l>0&&i.push(1),l>1&&i.push(.1),l>2&&i.push(.01),l>3&&i.push(.001),l>4&&i.push(1e-4),l>5&&i.push(1e-5)):r>10?(i.push(10),l>0&&i.push(1),l>1&&i.push(.1),l>2&&i.push(.01),l>3&&i.push(.001),l>4&&i.push(1e-4),l>5&&i.push(1e-5),l>6&&i.push(1e-6)):r>1?(l>0&&i.push(1),l>1&&i.push(.1),l>2&&i.push(.01),l>3&&i.push(.001),l>4&&i.push(1e-4),l>5&&i.push(1e-5),l>6&&i.push(1e-6)):r>.1?(l>1&&i.push(.1),l>2&&i.push(.01),l>3&&i.push(.001),l>4&&i.push(1e-4),l>5&&i.push(1e-5),l>6&&i.push(1e-6)):r>.01?(l>2&&i.push(.01),l>3&&i.push(.001),l>4&&i.push(1e-4),l>5&&i.push(1e-5),l>6&&i.push(1e-6)):r>.001?(l>3&&i.push(.001),l>4&&i.push(1e-4),l>5&&i.push(1e-5),l>6&&i.push(1e-6),l>7&&i.push(1e-7)):r>1e-4?(l>4&&i.push(1e-4),l>5&&i.push(1e-5),l>6&&i.push(1e-6),l>7&&i.push(1e-7),l>8&&i.push(1e-8)):r>1e-5&&(l>5&&i.push(1e-5),l>6&&i.push(1e-6),l>7&&i.push(1e-7),l>8&&i.push(1e-8),l>9&&i.push(1e-9)),i}function h(s){const e=(0,t.g)(s);let a=1e10;return e.classBreakInfos.forEach(s=>{a=Math.min(a,c(s.minValue)),a=Math.min(a,c(s.maxValue))}),a}function u(s){let e=1;for(;Math.round(s*e)/e!==s;)e*=10;return Math.log(e)/Math.LN10}function c(s){let e=1e-8;for(;d(Math.round(s/e)*e)===s;)e*=10;return e/10}function d(s){return Number.parseFloat(s.toPrecision(12))}function p(s){let e=0;s.forEach(s=>{(0,i.i)(s.value)?e=Math.max(u(d(s.value)),e):((0,i.i)(s.minValue)&&(e=Math.max(u(d(s.minValue)),e)),(0,i.i)(s.maxValue)&&(e=Math.max(u(d(s.maxValue)),e)),(0,i.i)(s.min)&&(e=Math.max(u(d(s.min)),e)),(0,i.i)(s.max)&&(e=Math.max(u(d(s.max)),e)))}),e=Math.min(e,3);const a=s[0],l=s[s.length-1],r=Math.min(a.minValue??a.min??a.value,l.minValue??l.min??l.value),t=Math.max(a.maxValue??a.max??a.value,l.maxValue??l.max??l.value)-r;return t/s.length<2e-7?e=8:t/s.length<2e-6?e=7:t/s.length<2e-5?e=6:t/s.length<2e-4?e=5:t/s.length<.002?e=4:t/s.length<.02?e=3:t/s.length<.2?e=Math.max(e,2):t/s.length<2&&(e=Math.max(e,1)),Math.round(e)}}}]);