/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_com-9eab33.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_com-9eab33"],{46317:(e,t,a)=>{a.d(t,{D:()=>r});var i=a(85282),s=a(34670),o=a(42466);const r=(0,s.u$)(class extends s.WL{constructor(){super(...arguments),this.key=i.s6}render(e,t){return this.key=e,t}update(e,[t,a]){return t!==this.key&&((0,o.mY)(e),this.key=t),a}})},65595:(e,t,a)=>{a.d(t,{c:()=>r,u:()=>n});var i=a(20936),s=a(1225),o=(a(54312),a(44345),a(55448),a(52797),a(34031),a(63438),a(5933),a(28927),a(83368),a(89704),a(5294),a(18423),a(96086),a(91813),a(21255),a(13078),a(21303),a(12627),a(56451),a(31521),a(23054),a(5077),a(23795),a(17902),a(87420),a(30161),a(81734),a(75698),a(10628),a(59640),a(64451),a(6176),a(83552));a(77462),a(49403),a(10281),a(83930),a(66617),a(10454),a(29614),a(94916),a(52554),a(2156),a(4038),a(49851),a(75054),a(15223),a(70169),a(47207),a(70852),a(48103),a(39423),a(85681),a(18444),a(42411),a(9767),a(38218),a(91914),a(86605),a(68196),a(440),a(46547),a(6238),a(7299);function r(e){e.selectedFields=[],e.layerFields=void 0,e.fields=void 0,e.hideLayerTitle=!1,e.supportsArcade=!1,e.stringFieldsCount=-1,e.dateFieldsCount=-1,e.numberFieldsCount=-1,e.containsFlow=!0,e.oneFeatureResponseStatus=s.s.MISSING,e.selectedAttribute=void 0,e.selectedAttributeText=void 0,e.selectedTypeValue=void 0,e.selectedValue=void 0,e.lastDefault=void 0,e.lastDefaults=void 0,e.dotColorSelected=void 0,e.backgroundStyleSelected=void 0,e.lastSettings=void 0,e.classedSymbolSelectedIdx=void 0,e.allUniqueValues=void 0,e.useFeatureReduction=void 0,e.symbolStylerConfig={},e.allowTimeSeriesConfiguration=!1,e.rasterInfo=void 0}function n(){const e=(0,o.Gk)(),t=e;e.manager.onLoad(()=>{t.smartMappingState=function(e,t){const a=l.get(e);if(a)return a;const s=(0,i.el)(e,t);return s&&"store"in s?(l.set(e,s.store),s.store):null}(e.el,"arcgis-map-config-smart-mapping")})}const l=new WeakMap},70110:(e,t,a)=>{a.r(t),a.d(t,{ArcgisMapConfigSmartMappingPanelsColorSize:()=>m});var i=a(73679),s=a(4395),o=a(46317),r=a(5294),n=a(1225),l=a(89989),c=(a(44345),a(55448),a(52797),a(34031),a(63438),a(5933),a(28927),a(83368),a(89704),a(18423),a(96086),a(91813),a(21255),a(13078),a(21303),a(12627),a(56451),a(31521),a(23054),a(5077),a(23795),a(17902),a(87420),a(30161),a(81734),a(65595)),p=(a(77462),a(49403),a(10281),a(83930),a(54312),a(66617),a(10628),a(59640),a(64451),a(6176),a(10454),a(29614),a(94916),a(52554),a(2156),a(4038),a(49851),a(75054),a(15223),a(70169),a(47207),a(70852),a(48103),a(39423),a(85681),a(18444),a(42411),a(9767),a(38218),a(91914),a(86605),a(68196),a(440),a(46547),a(6238),a(7299),a(85643)),d=a(73801);const g=s.AH`:host{width:100%;display:none}:host([selected]){display:flex}.flow-item{height:100%}`;class m extends d.WF{constructor(){super(...arguments),this.flowItemNode=(0,p._)(),this.tileNodes={},this.smartMappingState=(0,c.u)(),this.menuOpen=!1,this.showBackButton=!1,this.selected=!1,this.arcgisSmartMappingPanelsColorSizeBackClick=(0,d.lh)(),this.arcgisSmartMappingPanelsColorSizeClose=(0,d.lh)(),this.arcgisSmartMappingPanelsColorSizeError=(0,d.lh)(),this.smartMappingCompleteClose=(0,d.lh)()}static{this.properties={lastClick:16,menuOpen:5,showBackButton:5,selected:7,beforeBack:0}}static{this.styles=g}async setFocus(){await(this.flowItemNode.value?.setFocus())}load(){const{layer:e}=this.smartMappingState,t=(0,n.g)(this.smartMappingState);this.originalRendererJSON=t.toJSON(),this.originalFeatureReduction="featureReduction"in e&&e.featureReduction?r.clone(e.featureReduction):void 0;const a=(0,n.a9)(this.smartMappingState,this.el);"ARCGIS-MAP-CONFIG-SMART-MAPPING"===a.tagName?this.panelsParentNode=a.shadowRoot:this.panelsParentNode=a}async loaded(){requestAnimationFrame(async()=>await(this.flowItemNode.value?.setFocus())),this.scaleHandle=(0,l.w)(this.smartMappingState,this.flowItemNode.value,()=>this.smartMappingCompleteClose.emit("cancel"))}disconnectedCallback(){super.disconnectedCallback(),this.scaleHandle?.remove()}colorTileRefHandler(e){const{smartMappingState:t}=this;if(e){const a="color-age-size"===(0,n.d)(t)?"color-age":"color";this.tileNodes[a]=e}}sizeTileRefHandler(e){const{smartMappingState:t}=this;if(e){const a="color-size-age"===(0,n.d)(t)?"size-age":"size";this.tileNodes[a]=e}}handleOptionsClick(e){const{panelsParentNode:t}=this;switch(e){case"size":{const e=(0,d.dN)(s.qy`<arcgis-map-config-smart-mapping-panels-size hide-transparency hide-rotation .showBackButton=${!0} selected @arcgisSmartMappingPanelsSizeClose=${()=>this.cleanUpFlowItem(e)} @arcgisSmartMappingPanelsSizeBackClick=${()=>this.cleanUpFlowItem(e)} @arcgisSmartMappingPanelsSizeError=${({detail:e})=>this.arcgisSmartMappingPanelsColorSizeError.emit(e)}></arcgis-map-config-smart-mapping-panels-size>`);t.appendChild(e),this.selected=!1;break}case"color":{const e=(0,d.dN)(s.qy`<arcgis-map-config-smart-mapping-panels-color hide-transparency hide-rotation .showBackButton=${!0} selected @arcgisSmartMappingPanelsColorClose=${()=>this.cleanUpFlowItem(e)} @arcgisSmartMappingPanelsColorBackClick=${()=>this.cleanUpFlowItem(e)} @arcgisSmartMappingPanelsColorError=${({detail:e})=>this.arcgisSmartMappingPanelsColorSizeError.emit(e)}></arcgis-map-config-smart-mapping-panels-color>`);t.appendChild(e),this.selected=!1;break}}}handleDone(){this.arcgisSmartMappingPanelsColorSizeClose.emit("save")}handleCancel(){const{originalRendererJSON:e,originalFeatureReduction:t,smartMappingState:a}=this;(0,n.a8)(a,e,t),this.arcgisSmartMappingPanelsColorSizeClose.emit("cancel")}cleanUpFlowItem(e){e.remove(),this.focusSelectedTile(),this.selected=!0}focusSelectedTile(){setTimeout(()=>requestAnimationFrame(()=>this.tileNodes[this.lastClick]?.setFocus()),300)}render(){const{layer:e,hideLayerTitle:t,_messages:a}=this.smartMappingState;return this.el.classList.add("calcite-match-height"),s.qy`<calcite-flow-item .heading=${a.panels.styleOptions} .description=${t?void 0:e.title} class="flow-item" .closable=${(0,n.aa)(this.el)} .showBackButton=${this.showBackButton} .selected=${this.selected} @calciteFlowItemClose=${this.handleDone} @calciteFlowItemBack=${e=>{e.stopPropagation(),this.arcgisSmartMappingPanelsColorSizeBackClick.emit()}} ${(0,p.K)(this.flowItemNode)}>${this.renderDoneButton()}${this.renderCancelButton()}${this.renderColorTile()}${this.renderSizeTile()}${this.renderTransparency()}${this.renderRotation()}</calcite-flow-item>`}renderDoneButton(){const{_messages:e}=this.smartMappingState;return s.qy`<calcite-button slot=footer .label=${e.done} @click=${this.handleDone} appearance=solid width=half>${e.done}</calcite-button>`}renderCancelButton(){const{_messages:e}=this.smartMappingState;return s.qy`<calcite-button slot=footer .label=${e.cancel} @click=${this.handleCancel} appearance=outline-fill width=half>${e.cancel}</calcite-button>`}renderColorTile(){const{lastClick:e,smartMappingState:t}=this,a="color-age-size"===(0,n.d)(t)?"color-age":"color",i=(0,n.ab)(t,"color");return(0,o.D)(`tile-${a}-${i}`,s.qy`<arcgis-map-config-smart-mapping-tile .type=${a} .selected=${"color"===e} @arcgisSmartMappingTileSelect=${()=>{this.lastClick=a,this.handleOptionsClick("color")}} @arcgisSmartMappingTileOptions=${()=>this.handleOptionsClick("color")} @arcgisSmartMappingTileError=${e=>this.arcgisSmartMappingPanelsColorSizeError.emit(e.detail)} @arcgisSmartMappingTileThemeChange=${()=>{queueMicrotask(()=>{this.el.shadowRoot.querySelector("arcgis-map-config-smart-mapping-tile").setThemeFocus()})}} ${(0,p.K)(this.colorTileRefHandler)}></arcgis-map-config-smart-mapping-tile>`)}renderSizeTile(){const{lastClick:e,smartMappingState:t}=this,a="color-size-age"===(0,n.d)(t)?"size-age":"size",i=(0,n.ab)(t,"size");return(0,o.D)(`tile-${a}-${i}`,s.qy`<arcgis-map-config-smart-mapping-tile .type=${a} .selected=${"size"===e} @arcgisSmartMappingTileSelect=${()=>{this.lastClick=a,this.handleOptionsClick("size")}} @arcgisSmartMappingTileOptions=${()=>this.handleOptionsClick("size")} @arcgisSmartMappingTileError=${e=>this.arcgisSmartMappingPanelsColorSizeError.emit(e.detail)} @arcgisSmartMappingTileThemeChange=${()=>{queueMicrotask(()=>{this.el.shadowRoot.querySelectorAll("arcgis-map-config-smart-mapping-tile")[1].setThemeFocus()})}} ${(0,p.K)(this.sizeTileRefHandler)}></arcgis-map-config-smart-mapping-tile>`)}renderTransparency(){const{smartMappingState:e}=this,t=(0,n.g)(e),a=(0,n.c)(t,"opacity");return s.qy`<arcgis-map-config-smart-mapping-transparency .open=${!!a} @arcgisSmartMappingSymbolTransparencyError=${({detail:e})=>this.arcgisSmartMappingPanelsColorSizeError.emit(e)}></arcgis-map-config-smart-mapping-transparency>`}renderRotation(){const{smartMappingState:e}=this,t=(0,n.g)(e),a=(0,n.c)(t,"opacity"),i=(0,n.c)(t,"rotation");return(0,n.p)(t,"spike")?"":s.qy`<arcgis-map-config-smart-mapping-rotation .open=${!a&&!!i} @arcgisSmartMappingRotationError=${({detail:e})=>this.arcgisSmartMappingPanelsColorSizeError.emit(e)}></arcgis-map-config-smart-mapping-rotation>`}}(0,i.c)("arcgis-map-config-smart-mapping-panels-color-size",m)},89989:(e,t,a)=>{a.d(t,{w:()=>o});var i=a(54312),s=a(1225);a(44345),a(55448),a(52797),a(34031),a(63438),a(5933),a(28927),a(83368),a(89704),a(5294),a(18423),a(96086),a(91813),a(21255),a(13078),a(21303),a(12627),a(56451),a(31521),a(23054),a(5077),a(23795),a(17902),a(87420),a(30161),a(81734),a(75698),a(10628),a(59640),a(64451),a(6176),a(83552),a(77462),a(49403),a(10281),a(83930),a(66617),a(10454),a(29614),a(94916),a(52554),a(2156),a(4038),a(49851),a(75054),a(15223),a(70169),a(47207),a(70852),a(48103),a(39423),a(85681),a(18444),a(42411),a(9767),a(38218),a(91914),a(86605),a(68196),a(440),a(46547),a(6238),a(7299);function o(e,t,a){const{layer:o,mapView:n,useFeatureReduction:l}=e;return l&&"featureReduction"in o&&"binning"===o.featureReduction.type?i.watch(()=>n.scale,()=>{const i=o.featureReduction;n.scale<=i.maxScale&&!t.disabled?((0,s.f)(),function(e,t,a){const i=document.createElement("arcgis-map-config-smart-mapping-scale-alert-popover");i.smartMappingState=e,i.refElement=t,i.addEventListener("arcgisSmartMappingScaleAlertPopoverBack",()=>{r(),a()}),document.body.append(i)}(e,t,a),(0,s.h)(t,!0)):n.scale>i.maxScale&&t.disabled&&(r(),(0,s.h)(t,!1),t.setFocus())}):void 0}function r(){document.querySelectorAll("arcgis-map-config-smart-mapping-scale-alert-popover").forEach(e=>e.remove())}}}]);