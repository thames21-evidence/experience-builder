/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-08e915.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-08e915"],{931:(t,e,n)=>{n.d(e,{l:()=>o});var i=n(93814);const o=async(t,e)=>(await i.e.exports.loadModules(t,e)).map(t=>t.__esModule&&t.default?t.default:t)},4429:(t,e,n)=>{n.d(e,{a:()=>a,b:()=>d,c:()=>r,d:()=>u,e:()=>o,f:()=>i,g:()=>p,i:()=>v,m:()=>s,t:()=>l,u:()=>c});const i=(t,e)=>{let n,i="idle";const o=(...o)=>new Promise(r=>{switch(i){case"flushed":i="idle",n?(clearTimeout(n),r(t(...o))):r(null);break;case"invoked":clearTimeout(n),i="idle",r(t(...o));break;case"cancelled":clearTimeout(n),i="idle",r(null);break;default:n&&clearTimeout(n),i="pending",n=setTimeout(()=>(i="idle",r(t(...o))),e)}});return o.flush=function(...t){return i="flushed",o(...t)},o.invoke=function(...t){return i="invoked",o(...t)},o.cancel=function(...t){return i="cancelled",o(...t)},o.getStatus=function(){return i},o};function o(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function r(t){return null!=t}async function s(t,e){return await Promise.all([t,l(e)]),t}function l(t){return new Promise(e=>setTimeout(e,t))}const a=(t,e)=>Object.fromEntries((t||[]).map(t=>{const{key:n,data:i}=e(t);return[n,i]})),u=(t,e)=>t.length===e.length&&t.reduce((t,n)=>t&&e.indexOf(n)>-1,!0);function c(t,e){const n=[],i={};return t.forEach(t=>{const o=e(t);null==i[o]&&(i[o]=t,n.push(t))}),n}function d(t){const e={boolean:{},number:{},string:{}},n=[];return t.filter(t=>{let i=typeof t;return i in e?!e[i].hasOwnProperty(t)&&(e[i][t]=!0):!(n.indexOf(t)>=0)&&n.push(t)})}const p=(t,e)=>[...Array(Math.ceil(t.length/e))].map((n,i)=>t.slice(e*i,e+e*i)),v=(t,e)=>t.includes(e)},12192:(t,e,n)=>{n.d(e,{a:()=>s,g:()=>u});var i=n(15332),o=n(94984),r=n(87849);function s(t){var e,n,r;const s=null!==(e=(0,i.c)(t,"[lang]"))&&void 0!==e?e:null===(r=null===(n=t.shadowRoot)||void 0===n?void 0:n.ownerDocument)||void 0===r?void 0:r.documentElement,l=((null==s?void 0:s.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return o.l.has(l)?o.l.get(l):o.l.has(l.slice(0,2))?o.l.get(l.slice(0,2)):"en"}const l={};function a(t,e){const n=`${t}${e}`;return l[n]||(l[n]=function(t,e){return new Promise((n,i)=>{fetch((0,r.d)(`../arcgis-app-assets/i18n/${t}.i18n.${e}.json`)).then(t=>{t.ok?n(t.json()):i()},()=>i())})}(t,e)),l[n]}async function u(t,e){const n=e||t.tagName.toLowerCase(),r=s(t),l=function(t){var e,n,r;const s=null!==(e=(0,i.c)(t,"[lang]"))&&void 0!==e?e:null===(r=null===(n=t.shadowRoot)||void 0===n?void 0:n.ownerDocument)||void 0===r?void 0:r.documentElement,l=((null==s?void 0:s.lang)||(null===navigator||void 0===navigator?void 0:navigator.language)||"en").toLowerCase();return o.l.has(l)?o.l.get(l):o.l.has(l.slice(0,2))?l:"en"}(t);let u;try{u=await a(n,r)}catch(t){console.warn(`no locale for ${n} (${r}) loading default locale en.`),u=await a(n,"en")}return[u,r,l]}},27137:(t,e,n)=>{n.d(e,{w:()=>i});const i=(0,n(37762).c)({portal:null,user:null,i18n:null,scale:"m",nextText:null,uploadProgress:0}).state},38511:(t,e,n)=>{n.d(e,{p:()=>i});const i=(0,n(37762).c)({sourceItem:null,i18n:null}).state},54251:(t,e,n)=>{n.d(e,{g:()=>o});var i=n(59317);function o(t){var e,n,o,r;return null!=t||(t=null===i.c||void 0===i.c?void 0:i.c.portal),(null===(e=null==t?void 0:t.credential)||void 0===e?void 0:e.token)||(null==t?void 0:t.token)||(null===(o=null===(n=null==t?void 0:t.user)||void 0===n?void 0:n.credential)||void 0===o?void 0:o.token)||(null===(r=null==t?void 0:t.portalUser)||void 0===r?void 0:r.token)||""}},69193:(t,e,n)=>{n.r(e),n.d(e,{arcgis_publish_item:()=>u});var i=n(87849),o=n(59317),r=n(12192),s=n(1536),l=n(27137),a=n(38511);n(37762),n(15332),n(94984),n(931),n(93814),n(88878),n(83692),n(41473),n(54251),n(46904),n(72257),n(86562),n(3826),n(95878),n(15912);const u=class{constructor(t){(0,i.r)(this,t),this.portal=void 0,this.user=void 0,this.api=void 0,this.scale="m",this.itemId=void 0,this.telemetry=void 0,this.primaryButtonText=void 0,this.firstPage={element:"arcgis-publish-item-pages-item-properties"}}handlePageUpdate(t){this.primaryButtonText=a.p.i18n.next,"arcgis-publish-item-pages-item-properties"===t.detail.element&&(this.primaryButtonText=a.p.i18n.publish)}async componentWillLoad(){const{portal:t,user:e,itemId:n,scale:i}=this,u=await(0,r.g)(this.el);a.p.i18n=Object.assign(Object.assign({},l.w.i18n),u[0]),o.c.portal=t,o.c.user=e,o.c.scale=i;const{result:c,error:d}=await(0,s.b)(n,t);d?console.warn("No item found, workflow unavailable"):a.p.sourceItem=c}componentDidLoad(){a.p.sourceItem&&this.routeFirstPage(a.p.sourceItem.type)}routeFirstPage(t){const{i18n:e}=a.p;["CSV","Microsoft Excel","GeoJson"].includes(t)?(this.firstPage={element:"arcgis-publish-item-pages-item-properties"},this.primaryButtonText=e.next):(this.firstPage={element:"arcgis-publish-item-pages-item-properties",props:{item:a.p.sourceItem}},this.primaryButtonText=e.publish)}render(){const{i18n:t}=a.p;return(0,i.h)(i.H,{key:"d1dc2f8b5662e3327b971c3a851246495ab41c88"},(0,i.h)("arcgis-workflow",{key:"42afdeb707a840854c7e0a555046ec3533552aea",headerText:t.publishItem,primaryButtonText:this.primaryButtonText,firstPage:this.firstPage,onArcgisWorkflowUpdatePage:this.handlePageUpdate}))}get el(){return(0,i.a)(this)}}},83692:(t,e,n)=>{n.d(e,{a:()=>g,b:()=>h,c:()=>v,f:()=>d,g:()=>w,i:()=>p,p:()=>b,r:()=>m});var i=n(59317),o=n(4429),r=n(931),s=n(41473),l=n(54251);const a={},u={},c={};async function d(t,e,n,i){var o,r,s,l;const d=null===(r=null===(o=c[e])||void 0===o?void 0:o[n])||void 0===r?void 0:r.expireAt,p=!!d&&(new Date).getTime()>d;if((null===(s=a[e])||void 0===s?void 0:s[n])&&!p)return a[e][n];u[e]||(u[e]={}),u[e][n]&&!p||(u[e][n]=t());const v=await u[e][n];if(a[e]||(a[e]={}),c[e]||(c[e]={}),a[e][n]=v,i){const{expireAfter:t,getExpireAfterFromResult:o}=i,r=o||t?(new Date).getTime()+(null!==(l=null==o?void 0:o(v))&&void 0!==l?l:t):null;c[e][n]=Object.assign(Object.assign({},c[e][n]),{expireAt:r})}return v}function p(t,e){var n;return null===(n=null==a?void 0:a[t])||void 0===n?void 0:n[e]}const v=(t,e)=>{var n,i;e?(null===(n=a[t])||void 0===n||delete n[e],null===(i=u[t])||void 0===i||delete i[e]):(delete a[t],delete u[t])};function h(t){var e,n;return null!==(e=null==t?void 0:t.id)&&void 0!==e?e:null===(n=null==t?void 0:t.sourceJSON)||void 0===n?void 0:n.id}async function g(t,e,n={},i){const[o]=await(0,r.l)(["esri/request"]);t.includes("f=")||e.append("f","json");const s=(0,l.g)();return s&&!e.has("token")&&e.append("token",s),new Promise((r,s)=>{o(t,Object.assign(Object.assign({body:e},n),{timeout:n.timeout||0,method:i||"auto"})).then(t=>{r(t.data)}).catch(t=>s(t))})}async function m(t,e={},n={},o,s){const[l]=await(0,r.l)(["esri/request"]),{api:a,portal:u}=i.c,{customToken:c,addTokenManually:d,addSSL:p,useProxy:v}=n,h=Object.assign({},e);if(t.includes("f=")||!0===(null==s?void 0:s.excludeJson)||(h.f="json"),c)h.token=c;else if(!1!==d){const t=await w(u);t&&(h.token=t)}const g=!1===p?t:function(t){var e;const{config:n}=i.c;return"https:"===window.location.protocol||!0===(null===(e=null==n?void 0:n.self)||void 0===e?void 0:e.allSSL)?t.replace("http:","https:"):t}(t);if(3===a){const t=Object.assign({url:g,content:h,timeout:n.timeout||0},null==s?void 0:s.v3Request);n.withCredentials&&(t.withCredentials=n.withCredentials);return l(t,"post"===o?Object.assign({usePost:!0},n):n)}{const t=Object.assign(Object.assign(Object.assign({query:h,method:o||"auto"},n),{timeout:n.timeout||0,useProxy:v}),(null==n?void 0:n.disableIdentityLookup)?{authMode:"anonymous"}:{});return(await l(g,t)).data}}const f=[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,15,15,30,30,30,30,30,30,30,30,30,30,120];const b=async(t,e,n)=>{var i,r;const s=null!==(i=null==e?void 0:e.pendingStatuses)&&void 0!==i?i:["processing","partial","Pending","InProgress","EXECUTING"],l=null!==(r=null==e?void 0:e.successStatuses)&&void 0!==r?r:["completed","Completed","COMPLETED"];let a=0;const u=async()=>{const i=await m(t,null==e?void 0:e.requestParams,{},n),r=i.status||i.jobStatus;if(s.includes(r))return await(0,o.t)((c=a++,1e3*f[c>-1&&c<f.length-1?c:f.length-1])),u();if(l.includes(r)||"failed"===r||"esriJobFailed"===r)return i;throw i;var c};try{return u()}catch(t){throw console.error(t),t}},w=async t=>{var e;if(!(null==t?void 0:t.isPortal)||!(0,s.i)(t))return(0,l.g)(t);if(!(null==t?void 0:t.user)&&!(null==t?void 0:t.portalUser)&&(0,s.i)(t))return;const{token:n}=await d(()=>y(t),"platformSelf",null!==(e=h(t.user))&&void 0!==e?e:t.id,{getExpireAfterFromResult:t=>t.expires_in});return n},y=async t=>{const e=await(async t=>{var e,n;const[i]=await(0,r.l)(["esri/identity/IdentityManager"]);return null!==(n=null===(e=(await d(()=>i.getCredential((0,s.g)(t),{oAuthPopupConfirmation:!1}),"credential",h(t.user))).oAuthState)||void 0===e?void 0:e.appId)&&void 0!==n?n:"arcgisonline"})(t),n={"X-Esri-Auth-Client-Id":e,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")};return m(`${(0,s.g)(t)}/oauth2/platformSelf`,{},{disableIdentityLookup:!0,headers:n,addTokenManually:!1,withCredentials:!0},"post",{v3Request:{headers:n}})}},94984:(t,e,n)=>{n.d(e,{C:()=>l,a:()=>d,b:()=>c,f:()=>a,g:()=>s,l:()=>r,s:()=>v});var i=n(15332),o=n(931);const r=new Map([["ar","ar"],["bg","bg"],["bs","bs"],["ca","ca"],["cs","cs"],["da","da"],["de","de"],["el","el"],["en","en"],["es","es"],["et","et"],["fi","fi"],["fr","fr"],["he","he"],["hr","hr"],["hu","hu"],["id","id"],["it","it"],["ja","ja"],["ko","ko"],["lt","lt"],["lv","lv"],["nb","no"],["no","no"],["nl","nl"],["pl","pl"],["pt-br","pt-BR"],["pt-pt","pt-PT"],["ro","ro"],["ru","ru"],["sk","sk"],["sl","sl"],["sr","sr"],["sv","sv"],["th","th"],["tr","tr"],["uk","uk"],["vi","vi"],["zh-cn","zh-CN"],["zh-hk","zh-HK"],["zh-tw","zh-TW"]]);function s(t){return function(t,e,n){const o=(0,i.c)(t,`[${e}]`);return o?o.getAttribute(e):n}(t,"dir","ltr")}const l={rtl:"arcgis--rtl"};async function a(t,e){const{api:n,type:i,places:r}=e||{};if(3===n){const[n]=await(0,o.l)(["dojo/number"]);return n.format(t,{type:i,places:r,pattern:null==e?void 0:e.pattern})}const[s]=await(0,o.l)(["esri/intl"]),l=s.convertNumberFormatToIntlOptions({places:r,style:i,digitSeparator:!0});return s.formatNumber(t,Object.assign(Object.assign({},l),{style:i}))}const u={};function c(t,e){let n=document.documentElement.lang;const i="bs"===n;if(i&&(n="hr"),e){const e=`${n}-full`,i={dateStyle:"full",timeStyle:"long"};return u[e]||(u[e]=new Intl.DateTimeFormat(n,i)),u[e].format(t)}const o={year:"numeric",month:i?"numeric":"short",day:"numeric"};return u[n]||(u[n]=new Intl.DateTimeFormat(n,o)),u[n].format(t)}function d(t,e,n,i){const o=null!=t?t:"en";let r=e.unknown;return(1===n||["id","ja","ko","th","vi","zh-cn","zh-hk","zh-tw"].includes(o))&&(r=e.single),1!==n&&["en","ca","da","de","el","es","et","fi","hi","hu","it","nb","nl","pt-pt","sv","tr"].includes(o)&&(r=e.multiple),v(r,Object.assign(Object.assign({},i),{number:n}))}const p=/\$\{([^}]+)\}/g;function v(t,e,n=p){let i=t;try{i=t.replace(n,(t,n)=>function(t,e){const n=t.split(".").reduce((t,e)=>t[e],e);return"string"==typeof n||"number"==typeof n?n:t}(n,e).toString())}catch(t){console.error(t)}return i}}}]);