/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-3c354e.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-3c354e"],{2080:(e,t,r)=>{r.r(t),r.d(t,{arcgis_dependency_check:()=>I,arcgis_group_badges:()=>D,arcgis_group_card:()=>G,arcgis_group_thumbnail_stack:()=>L,arcgis_item_card:()=>P,arcgis_item_share:()=>K,arcgis_item_share_group:()=>V,arcgis_item_share_group_card:()=>Z,arcgis_item_share_summary_editable:()=>Y});var i=r(87849),a=r(52995),s=r(83692),o=r(4429),n=r(46904),l=r(12192),c=r(80619),d=r(37566),p=r(26262),h=r(37762),u=r(59317),m=r(94984),g=r(5157),b=r(33317),v=r(37378),f=r(36443),w=r(1654),_=r(68616),y=r(63263),x=r(60958),k=r(88878),S=r(41473),C=r(90075);r(931),r(93814),r(29599),r(54251),r(15332),r(1536),r(72257),r(86562),r(3826),r(95878),r(15912),r(74174),r(94737),r(14270),r(44388),r(18944),r(10578);const I=class{constructor(e){(0,i.r)(this,e),this.workflowCancel=(0,i.c)(this,"workflowCancel",7),this.workflowComplete=(0,i.c)(this,"workflowComplete",7),this.analyzeSharingDetail=async()=>{let e,{preProcessedSharingDetail:t,items:r,portal:i,i18n:a}=this;if(this.loadingText="loadingInfo",!this.preProcessedSharingDetail){const a=await Promise.all(r.map(({item:e,overrideLayers:t})=>(0,d.a)(e,i,t,{clearDataCacheOnDone:!1})));d.d.forEach(e=>(0,s.c)(e)),t=a.reduce((t,{error:r,result:i})=>(e=null==r?void 0:r.code,i&&Object.keys(i).forEach(e=>{t[e]=[...t[e],...i[e]]}),t),{needEditableLayers:[],needPubliclyEditableLayers:[],needDataCollectionLayers:[],needsShareLevelUpdateLayers:[],premiumLayers:[],notEditableLayers:[],needAuthentication:[]})}return Object.keys(t).forEach(e=>{t[e]=(0,o.u)(t[e],({sourceItem:e})=>e.id)}),this.sharingDetail=t,this.sharingDetail&&"dataNotAvailable"!==e?this.filterAndGetSharingDetails():(this.errorMessage=a.unableToGetItem,[])},this.filterAndGetSharingDetails=()=>{const{sharingDetail:e}=this;if(Object.keys(e).every(t=>{var r;return!(null===(r=e[t])||void 0===r?void 0:r.length)}))return;const{needEditableLayers:t,needsShareLevelUpdateLayers:r}=e;this.needsShareLevelUpdateLayers=r,this.needEditableLayers=t;this.updatableItems=["needEditableLayers","needsShareLevelUpdateLayers"].flatMap(t=>e[t].map(e=>({item:e.sourceItem,state:t})));return this.nonUpdatableItems=["needPubliclyEditableLayers","needDataCollectionLayers","premiumLayers","notEditableLayers","needAuthentication"].flatMap(t=>e[t].map(e=>({item:e.sourceItem,state:t}))),[...this.updatableItems,...this.nonUpdatableItems]},this.closeDialog=()=>{this.workflowCancel.emit()},this.updateSharing=async()=>{const{needsShareLevelUpdateLayers:e,needEditableLayers:t,portal:r,items:i}=this;this.isLoading=!0,this.loadingText="updatingSharing";const a=[...e,...t],s=a.map(({sourceItem:e})=>e),o=a.some(({detail:e})=>e.needsShareLevelUpdate),n=o?i[0].item.access:null,l=a.some(({detail:e})=>e.needsGroupUpdate);o||l?await(0,d.s)(s,i.map(({item:e})=>e),n,r,l):console.warn("Unexpected state: no need to update share level or group"),this.isLoading=!1,this.workflowComplete.emit({updatedSourceItems:s,oldSharingDetail:this.sharingDetail})},this.getStatusInfoForLayerState=e=>{const{helpBase:t,helpMap:r}=this.config;switch(e){case"needEditableLayers":return{i18nKey:"sharingPDCEnabled",kind:"info"};case"needPubliclyEditableLayers":case"needDataCollectionLayers":return{i18nKey:"pdc",kind:"danger",link:`${t}${null==r?void 0:r[120004130]}`};case"premiumLayers":return{i18nKey:"premium",kind:"info",link:`${t}${null==r?void 0:r[120001307]}`};case"notEditableLayers":return{i18nKey:"noPermission",kind:"danger"};case"needAuthentication":return{i18nKey:"needsAuthentication",kind:"danger"};default:return null}},this.renderPreviewItemNotice=()=>{const{previewItemState:e,getStatusInfoForLayerState:t,i18n:r}=this,a=e?t(e):null;if(!a)return null;const{i18nKey:s,kind:o,link:n}=a,l=r.needShare;return(0,i.h)("calcite-notice",{open:!0,closable:!1,scale:"m",kind:o,slot:"preview-summary-top",class:"preview-notice"},(0,i.h)("div",{slot:"message"},l[s].panel),n&&"noPermission"!==s&&"sharingPDCEnabled"!==s&&"needsAuthentication"!==s&&(0,i.h)("calcite-link",{slot:"link",href:n,target:"_blank",rel:"noopener"},l[s].learnMore))},this.renderPostShareDialog=()=>{const{showPostShare:e,i18n:t,updatableItems:r}=this;return(0,i.h)("calcite-dialog",{kind:"brand",scale:"m",open:e&&r.length>0,onCalciteDialogClose:e=>e.stopPropagation(),width:"s",modal:!0,heading:t.postShareDialog.title},(0,i.h)("div",null,t.postShareDialog.description),(0,i.h)("calcite-button",{slot:"footer-end",onClick:()=>this.showPostShare=!1},t.postShareDialog.confirm))},this.renderItemCard=({item:e,state:t})=>{const{getStatusInfoForLayerState:r,i18n:a,user:s,portal:o,config:l}=this,c=a.needShare,d=r(t),p="info"===(null==d?void 0:d.kind);return(0,i.h)("arcgis-item-card",{key:e.id,item:e,portal:o,user:s,baseUrl:l.baseUrl,preview:"top",showOwner:!0,showDateUpdated:!0,showItemType:!0,showSummary:!0,showBadges:!0},d&&(0,i.h)("div",{slot:"content-top",class:{"status-banner":!0,"status-banner--info":p}},(0,i.h)("calcite-icon",{icon:p?"information":"exclamationMarkTriangle",scale:"s"}),(0,i.h)("span",null,c[d.i18nKey].notice)),(0,i.h)("div",{slot:"actions-end",class:"open-item"},(0,i.h)("calcite-button",{scale:"s",appearance:"transparent",kind:"neutral",onClick:t=>{t.stopPropagation(),window.open((0,n.d)(e.id,l.baseUrl),"_blank","noopener")}},a.goToItem)))},this.user=void 0,this.portal=void 0,this.config=void 0,this.api=void 0,this.isActive=!0,this.autoOpen=!1,this.items=void 0,this.preProcessedSharingDetail=void 0,this.showPostShare=!1,this.isLoading=void 0,this.sharingDetail=void 0,this.sections=[],this.needsShareLevelUpdateLayers=[],this.needEditableLayers=[],this.updatableItems=[],this.nonUpdatableItems=[],this.previewItemState=null,this.loadingText="loadingInfo",this.errorMessage=null}async componentWillLoad(){const e=this.items.map(({item:e})=>e.id),{result:t,error:r}=await(0,a.d)(e,this.portal);this.items=t&&!r?t.map((e,t)=>({item:e,overrideLayers:this.items[t].overrideLayers})):this.items.map(e=>{var t;return Object.assign(Object.assign({},e),{item:null!==(t=e.item.sourceJSON)&&void 0!==t?t:e.item})});const{el:i}=this,s=await(0,l.g)(i);if(this.i18n=s[0],this.autoOpen){this.isActive=!1;const e=await this.analyzeSharingDetail();this.isActive=!!(null==e?void 0:e.length),this.isActive||this.workflowCancel.emit()}}handleNewPreProcessedSharingDetail(){var e;null===(e=this.itemBrowserRef)||void 0===e||e.refresh()}componentDidLoad(){}render(){const{updateSharing:e,isActive:t,closeDialog:r,i18n:a,isLoading:s,loadingText:o,errorMessage:n,portal:l,user:d,config:p,analyzeSharingDetail:h,renderPreviewItemNotice:u,updatableItems:m,nonUpdatableItems:g,renderItemCard:b,renderPostShareDialog:v}=this,f=m.length,w=g.length,_=f>0,y=!!n;return(0,i.h)(i.F,{key:"a757c5ad568d872fdd316fa96ee06df400806071"},(0,i.h)("calcite-dialog",{key:"1021dcdcf3a8dabaeffd471b979f6af5d1f97e8b",class:"rls-dialog",onCalciteDialogClose:r,open:t,modal:!0,outsideCloseDisabled:!0,escapeDisabled:!0,heading:a.updateSharing,width:"l"},(0,i.h)("div",{key:"406ca435d8d235f1a8b0282733c95873aa9eac58",class:"stage"},(0,i.h)("calcite-alert",{key:"4006ccaed228fc41183f83bbb69ea3296de319fb",icon:!0,open:y,label:n,kind:"danger",onCalciteAlertClose:()=>this.errorMessage=null},(0,i.h)("div",{key:"3fe67c65f5bd62d30fb69d1d3f0fec00963b2eea",slot:"message"},n)),(0,i.h)("arcgis-new-item-loader",{key:"7378c75035df27007c9c155d22728254ce409447",active:s,text:a[o]}),(0,i.h)("arcgis-item-browser",{key:"0de192d9f398dd1df757fa8530e9d79f9f683d37",fetch:async()=>{var e;const t=null!==(e=await h())&&void 0!==e?e:[];return{total:t.length,nextStart:0,num:t.length,start:0,results:t.map(({item:e})=>e)}},onArcgisItemBrowserPreview:({detail:e})=>{var t,r;e||(this.previewItemState=null),this.previewItemState=null!==(r=null===(t=[...m,...g].find(({item:t})=>t.id===e.id))||void 0===t?void 0:t.state)&&void 0!==r?r:null},hideContentTop:!0,contentPaddedBottom:!0,hidePreviewFooters:!0,portal:l,user:d,config:p,selection:"none",num:c.a,ref:e=>this.itemBrowserRef=e},(0,i.h)("arcgis-item-browser-content",{key:"a7366491983fb98869fe2d77fa5414b59771b709",class:"compact-grid-content",slot:"content"},(0,i.h)("div",{key:"1a7bc4cfca40d2d05be18ee304f5f47834217cbe",class:"top-bar",innerHTML:a[l.isPortal?"noticeEnterprise":"notice"]}),f>0&&(0,i.h)("div",{key:"9b964fa342685c77dda5af894d098c03fb76caae",class:"section"},(0,i.h)("p",{key:"a589425b520c3eda5670d145446782b2d24a1cbc",class:"item-count"},a.canBeUpdated.replace("${count}",f.toString())),(0,i.h)("div",{key:"71911a1712629f2ff67c6bc82c0a17f8714bb1e9",class:"item-container"},m.map(b))),w>0&&(0,i.h)("div",{key:"5bd2192963c242c1a3df0cbde315b5f336ed7b30",class:"section"},(0,i.h)("p",{key:"05f012d40b74ce24ec6624176ebafbeab1aa9831",class:"item-count"},a.cantBeUpdated.replace("${count}",g.length.toString())),(0,i.h)("div",{key:"702a1ed6c45c603e56b8a8951f17454a4e2d7b90",class:"item-container"},g.map(b)))),u())),(0,i.h)("calcite-button",{key:"2131c8e75ecc62356a4552d37ec83a9c00822e0b",slot:"footer-end",appearance:_?"outline":"solid",kind:_?"danger":"brand","data-id":"cancelButton",onClick:()=>this.isActive=!1},a[_?"cancel":"ok"]),_&&(0,i.h)("calcite-button",{key:"2a1f99704e971f8eb01210168774dcb05df7f2eb",slot:"footer-end",appearance:"solid",kind:"brand","data-id":"nextButton",onClick:e,disabled:s},a.update)),v())}get el(){return(0,i.a)(this)}static get watchers(){return{preProcessedSharingDetail:["handleNewPreProcessedSharingDetail"]}}};I.style=".stage{height:100%;overflow:hidden;transform:translate(0, 0)}.rls-dialog{--calcite-dialog-content-space:0;--calcite-dialog-size-x:1080px;--calcite-dialog-size-y:min(922px, 75vh)}.top-bar{padding-left:1rem;padding-right:1rem;padding-bottom:1rem;font-size:0.875rem;border-bottom:1px solid var(--calcite-color-border-1)}@media screen and (min-width: 1080px){.top-bar{padding-left:0px;padding-right:0px}}.section{margin-top:1rem}.item-count{font-size:1rem;font-weight:500;margin-bottom:1rem;margin-top:0.75rem}.item-container>*:not(:last-child){margin-bottom:1rem}.open-item{margin-inline-start:0.25rem;padding-inline-start:0.25rem;border-inline-start:1px solid var(--calcite-color-border-1)}.status-banner{display:flex;align-items:center;padding-left:1rem;padding-right:1rem;padding-top:0.25rem;padding-bottom:0.25rem;font-size:0.75rem;border-bottom:1px solid var(--calcite-color-border-2)}.status-banner>calcite-icon{margin-inline-end:0.5rem;color:var(--calcite-color-status-danger)}.status-banner>span{margin-top:0.125rem}.status-banner--info>calcite-icon{color:var(--calcite-color-status-info)}.compact-grid-content{--arcgis-item-browser-content-spacing:0.5rem}.preview-notice{margin-bottom:1rem}";const D=class{constructor(e){(0,i.r)(this,e),this.group=void 0,this.portal=void 0,this.width="full",this.appearance=void 0,this.empty=!1,this.showTooltips=!1,this.scale="m",this.badges=[]}componentWillLoad(){this.group&&this.updateBadges(this.group)}updateBadges(e){var t;this.badges=function(e,t){const r=[];return t.id&&(e.capabilities&&e.capabilities.includes("updateitemcontrol")&&r.push("SharedUpdate"),e.isOpenData&&e.orgId===t.id&&r.push("OpenData"),t.featuredItemsGroupQuery&&t.featuredItemsGroupQuery===`id:${e.id}`&&r.push("Gallery")),(e.collaborationInfo&&e.collaborationInfo.collaborationId||e.capabilities&&(0,p.i)(e))&&r.push("Collaboration"),e.membershipAccess||t.isPortal||"none"===e.orgId||r.push("AnyOrg"),"collaboration"===e.membershipAccess&&r.push("Partnered"),r.includes("SharedUpdate")&&!r.includes("Partnered")&&e.orgId!==t.id&&r.splice(r.indexOf("SharedUpdate"),1),r}(e,this.portal),(null===(t=this.badges)||void 0===t?void 0:t.length)||(this.empty=!0)}render(){const{width:e,scale:t,badges:r,showTooltips:a,appearance:s}=this;return(0,i.h)(i.H,{key:"feb785e7213a501ffe1033108fb0b779cab030ae"},r.map(r=>(0,i.h)("arcgis-group-badge",{appearance:s,key:r,class:"badge",badgeType:r,width:e,scale:t,showTooltip:a})))}get el(){return(0,i.a)(this)}static get watchers(){return{group:["updateBadges"]}}};D.style=":host{display:flex;flex-wrap:wrap}.badge{display:inline-block;margin-inline-end:0.25rem}";const G=class{constructor(e){var t;(0,i.r)(this,e),this.arcgisGroupCardSelect=(0,i.c)(this,"arcgisGroupCardSelect",7),this.arcgisGroupBrowserCardPreview=(0,i.c)(this,"arcgisGroupBrowserCardPreview",7),this.arcgisGroupBrowserInternalUIAction=(0,i.c)(this,"arcgisGroupBrowserInternalUIAction",7),this.handleResizeEvent=({detail:e})=>{this.resize(e.width)},this.handleCardClick=()=>{const{group:e,preview:t}=this;this.link||this.disabled||("top"!==t?this.radioButton?(this.radioButton.checked=!0,this.arcgisGroupCardSelect.emit({group:e,selected:!0})):this.checkbox&&(this.selected=!this.selected,this.arcgisGroupCardSelect.emit({group:e,selected:this.selected})):this.arcgisGroupBrowserCardPreview.emit(e))},this.group=void 0,this.user=void 0,this.portal=void 0,this.api=void 0,this.baseUrl=null===(t=null===u.c||void 0===u.c?void 0:u.c.config)||void 0===t?void 0:t.baseUrl,this.selected=void 0,this.indeterminate=void 0,this.view="list",this.selection="none",this.preview=void 0,this.name=void 0,this.showOwner=!0,this.showDateUpdated=!0,this.showDateCreated=!1,this.showViewableBy=!0,this.showSummary=!1,this.showBadges=!0,this.link=void 0,this.newTab=void 0,this.disabled=void 0,this.hover=void 0,this.formFactor=void 0,this.updatedText="",this.createdText="",this.loaded=void 0,this.width=void 0}async restoreFocus(){this.link&&this.linkEl?this.linkEl.focus():"top"===this.preview&&this.sectionEl&&this.sectionEl.focus()}async componentWillLoad(){var e,t;const{el:r}=this,i=await(0,l.g)(r);this.i18n=i[0],this.store=(0,b.g)(this.el)||(0,h.c)({filters:{},type:"group-browser"}),null!==(e=this.formFactor)&&void 0!==e||(this.formFactor=(null===(t=this.store)||void 0===t?void 0:t.state.panel)?"xs":"lg"),(0,g.s)(this.store).observe(this.el),this.el.addEventListener("arcgisBrowserResize",this.handleResizeEvent),this.updatedText=this.i18n.lastUpdated.replace("${date}",(0,m.b)(this.group.modified)),this.createdText=this.i18n.created.replace("${date}",(0,m.b)(this.group.created))}async componentDidLoad(){await(0,o.t)(100),this.loaded=!0}disconnectedCallback(){var e,t,r,i;null===(r=null===(t=null===(e=this.store)||void 0===e?void 0:e.state)||void 0===t?void 0:t.resizeObserver)||void 0===r||r.unobserve(this.el),null===(i=this.el)||void 0===i||i.removeEventListener("arcgisBrowserResize",this.handleResizeEvent)}resize(e){switch(!0){case e>g.b.md:this.formFactor="lg";break;case e>g.b.sm:this.formFactor="md";break;case e>g.b.xs:this.formFactor="sm";break;case e>g.b.xxs:this.formFactor="xs";break;default:this.formFactor="xxs"}this.width=e}getAccessInfo(e){const t={public:{text:this.i18n.everyone,icon:"globe"},private:{text:this.i18n.groupMembers,icon:"lock"},org:{text:this.i18n.organization,icon:"organization"}};return t[e]||t.private}renderCompactView(){const{group:e,portal:t,selection:r,selected:a,formFactor:s,i18n:o,link:n,loaded:l,newTab:c,showBadges:d,disabled:p}=this,h=this.link?"a":"div",u=Object.assign({href:n},c?{target:"_blank",rel:"noopener noreferrer"}:{});return(0,i.h)("section",Object.assign({class:{"group-card":!0,"group-card--hoverable":"none"!==r,[`group-card--${s}`]:!0,"group-card--loaded":l,"group-card--disabled":p},onMouseOver:()=>this.hover=!0,onMouseOut:()=>this.hover=!1},n?{}:{onClick:this.handleCardClick},{ref:e=>this.sectionEl=e}),(0,i.h)(h,Object.assign({class:{"group-card__upper":!0,"group-card__upper--link":!!n,"group-card__upper--compact":!0}},n?u:{},{ref:e=>this.linkEl=e}),"single"===r&&(0,i.h)("calcite-radio-button",{class:"group-card__input",checked:a,disabled:p,value:e.title,name:this.name,ref:e=>this.radioButton=e,onClick:e=>{e.stopPropagation()},onCalciteRadioButtonChange:()=>{this.arcgisGroupCardSelect.emit({group:e,selected:!a})}},(0,i.h)("span",{class:"screen-readers-only"},o.select.replace("${title}",e.title))),"multiple"===r&&(0,i.h)("calcite-checkbox",{class:"group-card__input",checked:a,disabled:p,indeterminate:this.indeterminate,onClick:e=>{e.stopPropagation()},onCalciteCheckboxChange:()=>{this.arcgisGroupCardSelect.emit({group:e,selected:!this.selected})},value:e.id,ref:e=>this.checkbox=e},(0,i.h)("span",{class:"screen-readers-only"},e.title)),(0,i.h)("div",{class:"flex-0 group-card__thumbnail group-card__thumbnail--compact"},(0,i.h)("arcgis-group-thumbnail",{group:e,portal:t,scale:"l"})),(0,i.h)("div",{class:"group-card-flex-1"},(0,i.h)("h3",{class:"group-card__title group-card__title--compact"},(0,i.h)("span",{class:"group-card__title__span"},e.title))),d&&(0,i.h)("arcgis-group-badges",{group:e,portal:t,class:"group-card__badges--compact",scale:"s",showTooltips:!0,width:"narrow"}),(0,i.h)("slot",{name:"content-end"})))}render(){var e,t;const{group:r,portal:a,selection:s,selected:o,formFactor:n,api:l,i18n:c,link:d,loaded:p,newTab:h,showDateCreated:m,showDateUpdated:v,showOwner:f,showBadges:w,showSummary:_}=this,y=null!==(e=this.baseUrl)&&void 0!==e?e:null===(t=u.c.config)||void 0===t?void 0:t.baseUrl,x=b.a.preview===this.group.id,k="top"===this.preview,S=this.link?"a":"div",C=Object.assign({href:d},h?{target:"_blank",rel:"noopener noreferrer"}:{}),I={tabIndex:0,role:"button","aria-haspopup":"dialog","aria-labelledby":"open-details",onKeyPress:e=>{"Enter"!==e.key&&" "!=e.key||(e.preventDefault(),this.handleCardClick())}},D=this.getAccessInfo(r.access);return(0,i.h)(i.H,{key:"971d5424c4a0bfa44b2e7b5fb45e84807ad05c0c"},"compact"===this.view?this.renderCompactView():(0,i.h)("section",Object.assign({class:{"group-card":!0,"group-card--hoverable":"none"!==s,[`group-card--${n}`]:!0,"group-card--loaded":p}},d?{}:{onClick:this.handleCardClick},k&&!d?I:{},{ref:e=>this.sectionEl=e}),(0,i.h)("slot",{name:"content-top"}),(0,i.h)(S,Object.assign({class:{"group-card__upper":!0,"group-card__upper--link":!!d}},d?C:{},{onMouseOver:()=>this.hover=!0,onMouseOut:()=>this.hover=!1}),(0,i.h)("div",{class:"group-card-flex group-card__top"},"single"===s&&(0,i.h)("calcite-radio-button",{class:"group-card__input",checked:o,value:r.title,name:this.name,ref:e=>this.radioButton=e,onClick:e=>{e.stopPropagation()},onCalciteRadioButtonChange:()=>{this.arcgisGroupCardSelect.emit({group:r,selected:!o})}},(0,i.h)("span",{class:"screen-readers-only"},c.select.replace("${title}",r.title))),"multiple"===s&&(0,i.h)("calcite-checkbox",{class:"group-card__input",checked:o,indeterminate:this.indeterminate,onClick:e=>{e.stopPropagation()},onCalciteCheckboxChange:()=>{this.arcgisGroupCardSelect.emit({group:r,selected:!this.selected})},value:r.id,ref:e=>this.checkbox=e},(0,i.h)("span",{class:"screen-readers-only"},r.title)),(0,i.h)("div",{class:"flex-0 group-card__thumbnail"},(0,i.h)("arcgis-group-thumbnail",{group:r,portal:a,scale:"xl"})),(0,i.h)("div",{class:"group-card-flex-1"},(0,i.h)("div",{class:"group-card-flex"},(0,i.h)("div",{class:"group-card__content"},(0,i.h)("h3",{class:{"group-card__title":!0,"group-card__title--padded":_&&!!r.snippet}},(0,i.h)("span",{class:"group-card__title__span"},r.title)),_&&r.snippet&&(0,i.h)("p",{class:"group-card__summary"},r.snippet.length>250?`${r.snippet.substring(0,250)}\u2026`:r.snippet),(0,i.h)("div",{class:{"group-card__details":!0,"group-card__details--stacked":this.width<580}},m&&(0,i.h)("span",{class:"group-card__detail group-card__divider"},this.createdText),v&&(0,i.h)("span",{class:"group-card__detail group-card__divider"},this.updatedText),this.showViewableBy&&(0,i.h)("span",{class:"group-card__detail group-card__divider"},(0,i.h)("calcite-icon",{icon:D.icon,scale:"s",class:"group-card__detail__icon"})," ",c.viewableBy.replace("${level}",D.text)),w&&this.width>=g.b.sm&&(0,i.h)("arcgis-group-badges",{appearance:this.hover?"outline-fill":"solid",group:r,portal:a,width:this.width<840?"narrow":"full",class:"group-card__badges group-card__detail group-card__divider",scale:"s",showTooltips:!0})),w&&this.width<g.b.sm&&(0,i.h)("arcgis-group-badges",{appearance:this.hover?"outline-fill":"solid",group:r,portal:a,width:this.width<g.b.xxs?"narrow":"full",class:"group-card__badges",scale:"s",showTooltips:!0}))),(0,i.h)("slot",{name:"content-end"})))),(0,i.h)("div",{class:"group-card__footer",onClick:e=>{e.stopPropagation()}},(0,i.h)("div",{class:"group-card__footer__start"},(0,i.h)("slot",{name:"actions-start"}),f&&(0,i.h)("div",{class:"group-card__profile-wrap",onClick:e=>{e.preventDefault(),e.stopPropagation()}},(0,i.h)("arcgis-user-popup",{underline:!0,username:r.owner,api:l,portal:a,baseUrl:y,class:"group-card__owner",onArcgisUserPopupInternalUIAction:e=>{e.stopPropagation(),this.arcgisGroupBrowserInternalUIAction.emit(e.detail)}}))),"action"===this.preview&&(0,i.h)("calcite-button",{scale:"s",appearance:x?"solid":"outline-fill",kind:"neutral",onClick:e=>{e.preventDefault(),e.stopPropagation(),this.arcgisGroupBrowserCardPreview.emit(this.group)}},x?c.hidePreview:c.preview),(0,i.h)("slot",{name:"actions-end"}))))}get el(){return(0,i.a)(this)}};G.style=':host{display:block;min-width:0px}.group-card{position:relative;display:flex;height:100%;flex-direction:column;color:var(--calcite-color-text-1);opacity:0;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);transition-duration:150ms;outline-color:transparent;background-color:var(--calcite-color-foreground-1);transition-property:background-color, outline, outline-offset, opacity;border:1px solid var(--calcite-color-border-3)}.group-card:focus{z-index:10;outline:2px solid var(--calcite-color-brand);outline-offset:-2px}.group-card--loaded{opacity:1}.group-card--selected{border-color:var(--calcite-color-brand)}.group-card--hoverable{cursor:pointer}.group-card--disabled{opacity:0.5}.group-card__top{padding:1rem}.group-card__hover-text{position:absolute;inset:0px;display:flex;align-items:center;justify-content:center;text-align:center;font-size:1rem;font-weight:500;opacity:0;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;background-color:rgba(21, 21, 21, 0.7);color:white}.group-card__upper{flex:1 1 0%;background-color:var(--calcite-color-foreground-1);transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.group-card__upper:hover{background-color:var(--calcite-color-background)}.group-card__upper:hover .group-card__hover-text,.group-card:focus .group-card__hover-text{opacity:1}.group-card__upper--compact{display:flex;align-items:center;padding-top:0.5rem;padding-bottom:0.5rem;padding-left:0.75rem;padding-right:0.75rem}.group-card__upper--link{color:var(--calcite-color-text-1);text-decoration-line:none;outline-color:transparent}.group-card__upper--link:focus{z-index:10;outline:2px solid var(--calcite-color-brand);outline-offset:2px}.group-card__title__span{position:relative;display:inline;border-style:none;background-color:transparent;padding:0px;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;background-image:linear-gradient(transparent, transparent);background-position-x:0%, 100%;background-position-y:min(1.25em, 100%);background-repeat:no-repeat, no-repeat;background-size:100% 1px, 100% 1px}.group-card--previewed .group-card__title__span{background-image:linear-gradient(var(--calcite-color-text-3), var(--calcite-color-text-3))}.group-card__content{display:flex;min-width:0px;flex:1 1 0%;flex-direction:column}.group-card__details{display:flex;flex-direction:row;flex-wrap:wrap}.group-card__details--stacked{flex-direction:column}.group-card__detail{font-size:0.875rem;color:var(--calcite-color-text-2)}.group-card__detail__icon{margin-inline-end:0.5rem}.group-card__calendar-icon{color:var(--calcite-color-text-3);margin-inline-end:0.5rem}.group-card__footer{margin-top:auto;display:flex;align-items:center;background-color:var(--calcite-color-foreground-1);padding-left:1rem;padding-right:1rem;padding-top:0.5rem;padding-bottom:0.5rem;border-top:1px solid var(--calcite-color-border-3)}.group-card__footer__start{display:flex;min-width:0px;flex:1 1 0%;flex-direction:row;align-items:center;overflow:hidden;margin-inline-end:0.75rem}.group-card__footer__start--selectable{margin-inline-start:1.5rem}.group-card__profile-wrap{max-width:100%;padding:0.25rem}.group-card__updated{font-size:0.875rem;color:var(--calcite-color-text-2)}.group-card__updated--xs{margin-top:0.5rem}.group-card__divider{display:flex;align-items:center;flex:0 0 auto}.group-card__divider:not([empty]):before{content:"";height:1.25rem;width:1px;background-color:var(--calcite-color-border-1);margin-inline:0.75rem}.group-card__details--stacked .group-card__divider:before{display:none}.group-card__divider:first-child:before{display:none}.group-card-flex{display:flex}.group-card-flex-1{min-width:0px;flex:1 1 0%}.screen-readers-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.group-card__input{margin-inline-end:1rem;margin-top:0.125rem}.group-card__title{margin-top:0px;margin-bottom:0px;overflow-wrap:break-word;padding-top:0px;padding-bottom:0px;font-size:1rem;font-weight:500;line-height:1.375}.group-card__title--compact{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;margin-inline-end:1rem}.group-card__summary{margin:0px;margin-top:0.25rem;margin-bottom:0.25rem;flex:1 1 0%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:0px;font-size:0.875rem;line-height:1.25}.group-card__thumbnail{margin-inline-end:1rem}.group-card__thumbnail--compact{width:2.75rem;height:2.75rem}.group-card__badges{margin-top:0.25rem}.group-card__owner{min-width:0px}.group-card--panel{margin-bottom:0px;cursor:pointer;border-bottom:1px solid var(--calcite-color-border-1);outline:1px solid rgba(0, 0, 0, 0)}.group-card--panel:hover{background-color:var(--calcite-color-foreground-2)}.group-card--border-top{border-top:1px solid var(--calcite-color-border-1)}.group-card--border-top:hover{--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.group-card--xs .group-card__top,.group-card--xxs .group-card__top{padding:0.75rem}.group-card--xs .group-card__title--padded,.group-card--xxs .group-card__title--padded{margin-bottom:0.25rem}.group-card--xs .group-card__footer,.group-card--xxs .group-card__footer{padding-top:0.25rem;padding-bottom:0.25rem;padding-left:0.75rem;padding-right:0.75rem}.group-card--xs .group-card__detail,.group-card--xxs .group-card__detail{margin-top:0.25rem;margin-bottom:0.25rem;font-size:0.75rem;line-height:1.35}.group-card--xs .group-card__title,.group-card--xxs .group-card__title{font-size:0.875rem}.group-card--xxs .group-card__thumbnail{padding-inline-start:0.75rem;width:4.25rem}.group-card--xs .group-card__thumbnail{padding-inline-start:0.5rem;width:5rem}';const L=class{constructor(e){(0,i.r)(this,e),this.groups=void 0,this.portal=void 0,this.scale="m",this.tooltip=!1,this.maxGroups=3,this.total=void 0}render(){const{groups:e,portal:t,maxGroups:r,scale:a,total:s,tooltip:o}=this,n=(null!=s?s:e.length)-r;return(0,i.h)(i.H,{key:"b7ad80896e399a5108c61649115d3cc0e8d84171"},e.slice(0,r).map(e=>(0,i.h)("arcgis-group-thumbnail",{scale:a,group:e,portal:t,tooltip:o,class:"thumbnail"})),n>0&&(0,i.h)("calcite-chip",{key:"0ff3708ce8106da5793eb3ca49a7bec744322c71",value:n,scale:a,label:`+${n}`},"+",n))}get el(){return(0,i.a)(this)}};L.style=":host{display:flex}.thumbnail{margin-inline-end:0.25rem}";const P=class{constructor(e){var t;(0,i.r)(this,e),this.arcgisItemCardInternalUIAction=(0,i.c)(this,"arcgisItemCardInternalUIAction",7),this.arcgisItemCardActionsOpen=(0,i.c)(this,"arcgisItemCardActionsOpen",7),this.arcgisItemCardSelect=(0,i.c)(this,"arcgisItemCardSelect",7),this.arcgisItemBrowserCardPreview=(0,i.c)(this,"arcgisItemBrowserCardPreview",7),this.handleResizeEvent=e=>{e.forEach(e=>{e.contentRect.width>0&&this.resize(e.contentRect.width)})},this.handleCardClick=e=>{if(this.link)return;const t="top"===this.preview,{item:r,selection:i}=this,a=null==e?void 0:e.target;(null==a?void 0:a.closest(".item-browser-card__footer__start"))||(null==a?void 0:a.closest(".item-browser-card__footer"))||"actions-end"===(null==a?void 0:a.getAttribute("slot"))||(!t||this.recycleBin?"single"===i?this.arcgisItemCardSelect.emit({item:r,selected:!0}):"multiple"===i&&this.arcgisItemCardSelect.emit({item:r,selected:!(0,v.i)({item:r,selectedItems:this.selectedItems})}):this.arcgisItemBrowserCardPreview.emit(r))},this.item=void 0,this.portal=void 0,this.user=void 0,this.api=void 0,this.baseUrl=null===(t=null===u.c||void 0===u.c?void 0:u.c.config)||void 0===t?void 0:t.baseUrl,this.link=void 0,this.linkHandler=void 0,this.newTab=void 0,this.selected=void 0,this.selection=void 0,this.name=void 0,this.preview=void 0,this.previewActive=void 0,this.showOwner=!0,this.showDateUpdated=!0,this.showItemType=!0,this.showItemTypeHosted=!1,this.showSummary=!1,this.showBadges=!0,this.showAccess=void 0,this.showFavorite=void 0,this.showThumbnail=!0,this.disableSelection=void 0,this.useProduction=void 0,this.actions=[],this.recycleBin=void 0,this.selectedItems=void 0,this.panel=void 0,this.view=void 0,this.width=void 0,this.watchResize=!0,this.groups=void 0,this.userGroups=void 0,this.allowSharingEdit=void 0,this.messageOverrides={},this.showFavoriteInActionsMenu=void 0,this.userPopupZIndex=void 0,this.hideActionsStart=void 0,this.hover=void 0,this.formFactor=void 0,this.loaded=void 0,this.noSpaceForDate=!0}get updatedText(){const e=(0,m.b)(this.item.modified);return this.i18n.lastUpdated.replace("${date}",e)}get shortUpdatedText(){return(0,m.b)(this.item.modified)}async restoreFocus(){this.link&&this.linkEl?this.linkEl.focus():"top"===this.preview&&this.sectionEl&&this.sectionEl.focus()}resize(e){switch(!0){case e>g.b.md:this.formFactor="lg";break;case e>g.b.sm:this.formFactor="md";break;case e>g.b.xs:this.formFactor="sm";break;case e>g.b.xxs:this.formFactor="xs";break;default:this.formFactor="xxs"}}async updateI18n(e){const t=await(0,l.g)(this.el);this.i18n=Object.assign(Object.assign({},t[0]),e)}async componentWillLoad(){var e,t,r,i;const a=await(0,l.g)(this.el);this.i18n=Object.assign(Object.assign({},a[0]),this.messageOverrides),null!==(e=this.formFactor)&&void 0!==e||(this.formFactor="lg"),this.watchResize&&(null!==(t=this.resizeObserver)&&void 0!==t||(this.resizeObserver=new ResizeObserver(this.handleResizeEvent)),this.resizeObserver.observe(this.el)),this.portal=null!==(r=this.portal)&&void 0!==r?r:u.c.portal,this.user=null!==(i=this.user)&&void 0!==i?i:u.c.user}async componentDidLoad(){await(0,o.t)(100),this.loaded=!0}disconnectedCallback(){var e;null===(e=this.resizeObserver)||void 0===e||e.unobserve(this.el)}renderSelection(e){const{i18n:t,item:r}=this,a=this.selection,s={"item-browser-card__input":!0,"item-browser-card__input--end":"grid"===this.view};return"single"===a?(0,i.h)("calcite-radio-button",{class:s,checked:e,value:r.title,name:this.name,disabled:this.disableSelection,onClick:e=>{e.stopPropagation()},onCalciteRadioButtonChange:()=>{this.arcgisItemCardSelect.emit({item:r,selected:!0})}},(0,i.h)("span",{class:"screen-readers-only"},t.select.replace("${title}",r.title))):"multiple"===a?(0,i.h)("calcite-checkbox",{class:s,checked:e,disabled:this.disableSelection,onClick:e=>{e.stopPropagation(),e.preventDefault()},onCalciteCheckboxChange:()=>{this.arcgisItemCardSelect.emit({item:r,selected:!e})},value:r.id},(0,i.h)("span",{class:"screen-readers-only"},r.title)):null}renderOwner(){var e,t;const{item:r,api:a,portal:s,formFactor:o,useProduction:n,userPopupZIndex:l}=this,c=n?"https://www.arcgis.com/home/":null!==(e=this.baseUrl)&&void 0!==e?e:null===(t=u.c.config)||void 0===t?void 0:t.baseUrl;return this.showOwner?(0,i.h)("div",{class:"item-browser-card__profile-wrap"},(0,i.h)("arcgis-user-popup",{underline:!0,item:r,api:a,portal:s,baseUrl:c,showName:"grid"!==this.view,checkOnline:n,class:"item-browser-card__owner",scale:"xxs"===o?"s":"m",zIndex:l,onArcgisUserPopupInternalUIAction:e=>{e.stopPropagation(),this.arcgisItemCardInternalUIAction.emit(e.detail)}})):null}renderItemType(){const{item:e,portal:t,showItemType:r,formFactor:a}=this;return r?(0,i.h)("arcgis-item-type",{class:{"item-browser-card__divider item-browser-card__divider--unset item-browser-card-item-type":!this.panel},ellipsis:!0,user:this.user,showHosted:this.showItemTypeHosted,scale:["xxs","xs"].includes(a)?"s":"m",item:e,portal:t}):null}render(){var e;const{item:t,user:r,portal:a,formFactor:s,i18n:o,loaded:n,showDateUpdated:l,showItemType:c,showOwner:d,showBadges:p,showSummary:h,showThumbnail:m,link:g,newTab:b,showAccess:f,actions:w,previewActive:_,useProduction:y}=this,x="grid"===this.view,k="top"===this.preview,S="action"===this.preview||(null===(e=this.actions)||void 0===e?void 0:e.length)>0,C={tabIndex:0,role:"button","aria-haspopup":"dialog","aria-labelledby":"open-details",onKeyPress:e=>{"Enter"!==e.key&&" "!=e.key||(e.preventDefault(),this.handleCardClick())}},I=this.selection,D=["single","multiple"].includes(I)&&(0,v.i)({item:this.item,selectedItems:this.selectedItems}),G=this.link?"a":"div",L=Object.assign(Object.assign({href:g},b?{target:"_blank",rel:"noopener noreferrer"}:{}),this.linkHandler?{onClick:e=>{e.ctrlKey||e.metaKey||(e.preventDefault(),this.linkHandler(this.item))}}:{}),P=["xxs","xs"].includes(s);return(0,i.h)(i.H,{key:"0ad2c805c3e23275ed10e687cc8a4db08a8e43ad"},(0,i.h)("section",Object.assign({key:"f7eb2d36adf48de231f79c6ab97513d4f7f79fe9",class:{"item-browser-card":!0,"item-browser-card--hoverable":!0,[`item-browser-card--${s}`]:!0,"item-browser-card--panel":this.panel,"item-browser-card--loaded":n,"item-browser-card--previewed":this.previewActive&&"top"===this.preview,"item-browser-card--selected":D},onMouseOver:()=>this.hover=!0,onMouseOut:()=>this.hover=!1},g?{}:{onClick:this.handleCardClick},k&&!g?C:{},{ref:e=>this.sectionEl=e}),(0,i.h)("slot",{key:"ace7a23346e16479ddb0d28abc4932baaae916c3",name:"content-top"}),(0,i.h)(G,Object.assign({key:"2f7785456273aad94e96f0691f67e5b4cd061881",class:{"item-browser-card__upper":!0,"item-browser-card__upper--link":!!g}},g?L:{},{ref:e=>this.linkEl=e}),x&&m&&(0,i.h)("figure",{key:"b8fcb65c8707ad0febf39d35736ecd5583e94630",class:"item-browser-card__thumbnail--grid"},(0,i.h)("arcgis-item-thumbnail",{key:"0c25f675027badbafcf186d4e825aea5e3250f50",item:t,user:r,portal:a,useProduction:this.useProduction}),k&&!g&&(0,i.h)("div",{key:"26809481768082e8e47a4157889e7f1ac7f09b6e",class:"item-browser-card__hover-text",id:"open-details"},this.previewActive?o.closePreview:o.preview),(null==g?void 0:g.includes(`item.html?id=${null==t?void 0:t.id}`))&&(0,i.h)("div",{key:"7415a9afcd5b15c5ed3c2cebaa8db1f3814140c1",class:"item-browser-card__hover-text",id:"open-details"},o.viewItemDetails)),(0,i.h)("div",{key:"ad4398955f3cf9149aa6ca78c9e3340255aaa8f5",class:"item-browser-card-flex item-browser-card__top"},!x&&this.renderSelection(D),(0,i.h)("div",{key:"c236c1a201653bff2cd7594d15e912cb021415cd",class:"item-browser-card-flex-1"},(0,i.h)("div",{key:"a7deb283c108648ee338d80fba313ca3d1608b46",class:"item-browser-card-flex"},(0,i.h)("div",{key:"fce91323aa41b2efba4a3acea96bc2ce8dccdcb1",class:"item-browser-card__content"},(0,i.h)("div",{key:"7eda93b9cb1c35c78163ba740b5ebb70851df6d8",class:"item-browser-card-flex"},(0,i.h)("h3",{key:"822b5567b412bf9793879ae24a24fe1bd80cf5b0",class:{"item-browser-card__title":!0,"item-browser-card__title--padded":c||h&&!!t.snippet,"item-browser-card__title--grid":x,"item-browser-card-flex-1":!0}},(0,i.h)("span",{key:"d6a5d7b43749c0efae27ae928a4e10d8f5420613",class:"item-browser-card__title__span"},t.title)),x&&this.renderSelection(D)),h&&t.snippet&&!P&&(0,i.h)("p",{key:"2f604c599bc73d559b63a976a8661faa46a3392f",class:"item-browser-card__summary"},t.snippet.length>250?`${t.snippet.substring(0,250)}\u2026`:t.snippet),this.panel&&this.renderItemType(),(0,i.h)("div",{key:"f9543062e0cf7f57932e8a584044ac9393da23d5",class:"item-browser-card__details"},!this.panel&&this.renderItemType(),l&&"xxs"!==s&&(0,i.h)("span",{key:"40f3d4eb033794a69679b8d1c5c909ba664a7dff",class:{"item-browser-card__detail":!0,"item-browser-card__divider":!0}},["xxs","xs","sm"].includes(s)||x?this.shortUpdatedText:this.updatedText),p&&(0,i.h)("arcgis-item-badges",{key:"fffb34089c0771025e44a32d80a91559438a16a4",item:t,user:r,portal:a,width:"lg"!==s||x?"narrow":"full",showTooltips:!0,useProduction:y,class:{"item-browser-card__badges":!0,"item-browser-card__divider":!0},scale:"s"}))),!x&&m&&(0,i.h)("figure",{key:"262b89845d70acd3036bbb219e378e7d696dd413",class:"item-browser-card__thumbnail"},(0,i.h)("arcgis-item-thumbnail",{key:"18c84d22f837423d707e130e47ddc367db5d8ddd",item:t,user:r,portal:a,useProduction:this.useProduction}))),(0,i.h)("slot",{key:"df31fde3ea6472bcc1b25874017ff3417dee267b",name:"content-end"})))),(0,i.h)("div",{key:"50cb64c40f7c114560db5a52f231ea82b2ba35a7",class:"item-browser-card__footer",onKeyPress:e=>{"Enter"!==e.key&&" "!=e.key||e.stopPropagation()}},(0,i.h)("div",{key:"377c61cab0e11574804a67c650caf68ed8fb5c67",class:{"item-browser-card__footer__start":!0,"item-browser-card__footer__start--owner":d}},!this.hideActionsStart&&(0,i.h)("slot",{key:"8bb7407f3598bcf542d1a9c6f15814aaebab232c",name:"actions-start"}),this.renderOwner()),f&&(0,i.h)("div",{key:"ffe35951eb6ad9322dcc460b1c8bfe65e9347506",class:"item-browser-card__access-wrap",onClick:e=>{e.preventDefault(),e.stopPropagation()}},(0,i.h)("slot",{key:"51aaff3259ec92202278f4bb331611ecb217e228",name:"share-summary"},(0,i.h)("arcgis-item-share-summary",{key:"41c822e5d8c2ac8b65c91d7e2d5fb5ba9fc57a49",item:t,class:"item-browser-card__access",scale:"xxs"===s?"s":"m",showText:!x&&"lg"===s,user:r,groups:this.groups}))),(f||x&&d)&&S&&(0,i.h)("span",{key:"c3efb1255e9da3829f30288821940073ef24f066",class:{"item-browser-card__footer-divider":!0,"item-browser-card__footer-divider--list":!x}}),this.showFavorite&&!this.useProduction&&(0,i.h)("arcgis-item-favorite",{key:"4a3688705f5adaf1145303af41728e4cd98cc0f3",item:t,portal:a,user:r||(null===u.c||void 0===u.c?void 0:u.c.user),iconOnly:!0,showTooltip:!0}),"action"===this.preview&&!this.recycleBin&&(0,i.h)("calcite-button",{key:"ca0610bf38e4c28e0faa931d2cae90297663e8a7",scale:"s",class:"item-card__preview-button",appearance:_?"solid":"outline",kind:"neutral",onClick:e=>{e.preventDefault(),e.stopPropagation(),this.arcgisItemBrowserCardPreview.emit(this.item)}},o.preview),(null==I?void 0:I.includes("sublayer"))&&(0,i.h)("arcgis-item-browser-card-sublayer-select",{key:"b22638bbe89367410e9de03363ff6bf2408a9fc0",item:t,user:r,portal:a,selection:"multiple-sublayer"===I?"multiple":"single"}),(0,i.h)("slot",{key:"b2be752ef2543f6e855ef8e4d0c474de10a76f21",name:"actions-end"}),(w.length>0||this.showFavoriteInActionsMenu)&&(0,i.h)("arcgis-item-actions",{key:"5c497dd5b3b18272d2ccd2478c5427f8e2f3c6b9",item:t,portal:a,user:r,actions:w,showFavorite:this.showFavoriteInActionsMenu,onArcgisItemActionsOpen:e=>{this.arcgisItemCardActionsOpen.emit({el:e.detail.el,actions:w})},onArcgisItemActionClick:e=>{this.arcgisItemCardInternalUIAction.emit({category:"card action",action:"more options",attribute:e.detail})}}))))}get el(){return(0,i.a)(this)}static get watchers(){return{width:["resize"],messageOverrides:["updateI18n"]}}};P.style=':host{display:block;min-width:0px}.item-browser-card{position:relative;box-sizing:border-box;display:flex;height:100%;flex-direction:column;color:var(--calcite-color-text-1);opacity:0;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);transition-duration:150ms;outline-color:transparent;background-color:var(--calcite-color-foreground-1);transition-property:background-color, outline, outline-offset, opacity;border:1px solid var(--calcite-color-border-3)}.item-browser-card:focus{z-index:10;outline:2px solid var(--calcite-color-brand);outline-offset:-2px}.item-browser-card--loaded{opacity:1}.item-browser-card--selected{border-color:var(--calcite-color-brand)}.item-browser-card--hoverable{cursor:pointer}.item-browser-card__top{padding:1rem}.item-browser-card__hover-text{position:absolute;inset:0px;display:flex;align-items:center;justify-content:center;text-align:center;font-size:1rem;font-weight:500;opacity:0;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;background-color:rgba(21, 21, 21, 0.7);color:white}.item-browser-card__upper{flex:1 1 0%;background-color:var(--calcite-color-foreground-1);transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.item-browser-card__upper:hover{background-color:var(--calcite-color-background)}.item-browser-card__upper:hover .item-browser-card__hover-text,.item-browser-card:focus .item-browser-card__hover-text{opacity:1}.item-browser-card__upper--link{color:var(--calcite-color-text-1);text-decoration-line:none;outline-color:transparent}.item-browser-card__upper--link:focus{z-index:10;outline:2px solid var(--calcite-color-brand);outline-offset:2px}.item-browser-card__title__span{position:relative;display:inline;border-style:none;background-color:transparent;padding:0px;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;background-image:linear-gradient(transparent, transparent);background-position-x:0%, 100%;background-position-y:min(1.25em, 100%);background-repeat:no-repeat, no-repeat;background-size:100% 1px, 100% 1px}.item-browser-card--previewed .item-browser-card__title__span,.item-browser-card__upper--link:hover .item-browser-card__title__span{background-image:linear-gradient(var(--calcite-color-text-3), var(--calcite-color-text-3))}.item-browser-card--previewed{outline:1px solid var(--calcite-color-brand);outline-offset:-2px}.item-card__preview-button{margin-inline-end:0.5rem}.item-browser-card--previewed .item-browser-card__top{background-color:var(--calcite-color-background)}.item-browser-card__content{display:flex;min-width:0px;flex:1 1 0%;flex-direction:column}.item-browser-card__details{margin-top:0.25rem;display:flex;flex-direction:row}.item-browser-card__detail{font-size:0.875rem;color:var(--calcite-color-text-2)}.item-browser-card__calendar-icon{color:var(--calcite-color-text-3);margin-inline-end:0.5rem}.item-browser-card__footer{margin-top:auto;display:flex;align-items:center;background-color:var(--calcite-color-foreground-1);padding-left:1rem;padding-right:1rem;padding-top:0.5rem;padding-bottom:0.5rem;border-top:1px solid var(--calcite-color-border-3)}.item-browser-card__footer__start{display:flex;min-width:0px;flex:1 1 0%;flex-direction:row;align-items:center;justify-content:space-between;overflow:hidden;margin-inline-end:0.75rem}.item-browser-card__footer__start--owner{margin-inline-start:-0.25rem}.item-browser-card__footer-divider{border-right:1px solid var(--calcite-color-border-input);margin-inline-start:0.75rem;margin-inline-end:0.5rem;display:inline-block;height:1.5rem;width:0px}.item-browser-card__footer-divider--list{margin-left:1rem;margin-right:1rem}.item-browser-card__profile-wrap{box-sizing:border-box;max-width:100%;padding:0.25rem}.item-browser-card__summary{margin:0px;padding:0px;font-size:0.875rem;color:var(--calcite-color-text-2);word-wrap:break-word;word-break:break-word}.item-browser-card__divider{display:flex;align-items:center;flex:0 0 auto}.item-browser-card__divider:not([empty]):before{content:"";height:1.25rem;width:1px;background-color:var(--calcite-color-border-1);margin-inline:0.75rem}.item-browser-card-item-type{min-width:0px;flex:unset}.item-browser-card__divider:first-child:before{display:none}.item-browser-card-flex{display:flex}.item-browser-card-flex-1{min-width:0px;flex:1 1 0%}.screen-readers-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.item-browser-card__input{margin-inline-end:1rem;margin-top:0.125rem}.item-browser-card__input--end{margin-inline-end:0px;margin-inline-start:1rem}.item-browser-card__title{margin-top:0px;margin-bottom:0px;overflow-wrap:break-word;padding-top:0px;padding-bottom:0px;font-size:1.125rem;font-weight:500;line-height:1.375}.item-browser-card__title--grid{font-size:1rem}.item-browser-card__title--padded{margin-bottom:0.5rem}.item-browser-card__snippet{margin:0px;margin-bottom:0.75rem;flex:1 1 0%;padding:0px;font-size:0.875rem}.item-browser-card__badges--stacked{margin-top:0.5rem}.item-browser-card__thumbnail{margin:0px;box-sizing:content-box;width:8rem;padding:0px;padding-inline-start:2rem;flex:0 0 auto}.item-browser-card__thumbnail--grid{position:relative;margin:0px;width:100%;padding:0px;border-bottom:1px solid var(--calcite-color-foreground-2)}.item-browser-card__owner{min-width:0px}.item-browser-card__access-wrap{display:flex;align-items:center}.item-browser-card--panel{margin-bottom:0px;cursor:pointer;display:block;width:100%}.item-browser-card--xs .item-browser-card__top,.item-browser-card--xxs .item-browser-card__top{padding:0.75rem}.item-browser-card--xs .item-browser-card__title--padded,.item-browser-card--xxs .item-browser-card__title--padded{margin-bottom:0.25rem}.item-browser-card--xs .item-browser-card__footer,.item-browser-card--xxs .item-browser-card__footer{padding-top:0.25rem;padding-bottom:0.25rem;padding-left:0.75rem;padding-right:0.75rem}.item-browser-card--xs .item-browser-card__detail,.item-browser-card--xxs .item-browser-card__detail{font-size:0.75rem}.item-browser-card--xs .item-browser-card__title,.item-browser-card--xxs .item-browser-card__title{font-size:0.875rem}.item-browser-card--xxs .item-browser-card__title{font-size:0.75rem}.item-browser-card--xxs .item-browser-card__thumbnail{padding-inline-start:0.75rem;width:55px}.item-browser-card--xxs .item-browser-card__footer__start{margin-inline-end:0.5rem}.item-browser-card--xs .item-browser-card__thumbnail{width:5rem;padding-inline-start:0.5rem}';const B=e=>"Web Mapping Application"===e.type&&e.url.includes("dataexplorer"),O=({portal:e,selectedGroupData:t,user:r})=>!U(e)||function(e){return(e.privileges||[]).includes("portal:user:shareToGroup")}(r)||(0,w.x)(r)&&((e,t)=>{const{username:r,orgId:i}=e;return t.every(({group:e})=>{const t=r===(null==e?void 0:e.owner),a=i===e.orgId;return t||a})})(r,t),U=e=>!(!e.urlKey||!e.customBaseUrl)||e.isPortal;const T=({item:e,groupData:t})=>t.reduce((t,r)=>t||!!r.selectedByItemIds&&r.selectedByItemIds.includes(e.id),!1),z=(e,t,r,i)=>!U(i)&&!(0,w.w)(e)&&(({items:e,groupData:t})=>e.filter(e=>{const t=e.access;return"private"===t||"shared"===t}).reduce((e,r)=>e||T({item:r,groupData:t}),!1))({items:t,groupData:r}),A=({shareMode:e,currentUsername:t,user:r,userGroupLookup:i,isPrivate:a})=>{var s;let o,n=[];if(i){let o=[];"admin"===e&&(null===(s=i[t])||void 0===s?void 0:s.length)&&t!==r.username&&(o=[...i[t]]),"admin"===e&&a||i[r.username].forEach(e=>{o.some(t=>t.id===e.id)||o.push(e)}),null==o||o.forEach(e=>{var t;const r=null===(t=e.userMembership)||void 0===t?void 0:t.memberType;!e.isViewOnly||"owner"!==r&&"admin"!==r||n.push(e.id)})}n.length&&(o=`(isviewonly:false OR id:(${n.join(" OR ")}))`);const l=n.length?` OR id:(${n.join(" OR ")})`:"";switch(e){case"default":return o||`(owner:${t} OR isviewonly:false)`;case"group":return`owner:${t} -capabilities:updateitemcontrol`;case"admin":return r.username===t?`(isviewonly:false${l} OR owner:${r.username}) -capabilities:updateitemcontrol`:`(owner:${t} OR isviewonly:false${l})`;default:return""}},E={needEditableLayers:[],needPubliclyEditableLayers:[],needDataCollectionLayers:[],needsShareLevelUpdateLayers:[],premiumLayers:[],notEditableLayers:[],needAuthentication:[]},$=["private","org","public"],F="share-confirmation-header",M=({items:e,portal:t,shareLevel:r,user:i,subscriptionInfo:a})=>{var s;if("private"===r)return!0;const o=j(i,e),n=N(i,e),l=(0,w.f)(i)&&!(0,w.g)(i)&&n,c=(0,w.f)(i)&&(0,w.g)(i)&&n,p=(0,w.b)(i);if("org"===r)return!p&&((0,w.w)(i)&&(o||l)||(0,w.y)(i)&&(l||c));if("public"===r){if(e.some(e=>R(e)||B(e)))return!1;if((0,w.z)(a)||(0,w.A)(a)&&e.some(e=>(0,_.i)(e.typeKeywords,e.type)))return!1;const r=(0,w.E)((null==t?void 0:t.subscriptionInfo)||(null===(s=null==t?void 0:t.sourceJSON)||void 0===s?void 0:s.subscriptionInfo));if(1===e.length&&((0,d.b)(e[0],t.isPortal)||r&&(0,d.c)(e[0])))return!1;const n=t.canSharePublic;return p||(0,w.B)(i)&&(o&&n||l)||(0,w.C)(i)&&(l||c)}},R=e=>{var t,r;return(null===(t=null==e?void 0:e.typeKeywords)||void 0===t?void 0:t.includes("ArcgisWorkflowManager"))||(null===(r=null==e?void 0:e.typeKeywords)||void 0===r?void 0:r.includes("ArcgisWorkflowJobLocation"))},j=(e,t)=>t.every(t=>(0,n.i)(t,e)),N=(e,t)=>{const r=null==e?void 0:e.orgId;return t.every(t=>{var i,a;return(0,n.i)(t,e)||t.orgId===r||(null===(i=t.sourceJSON)||void 0===i?void 0:i.orgId)===r||(null===(a=t.portal)||void 0===a?void 0:a.id)===r||t.isOrgItem})},H=(e,t)=>e.length!==t.length||t.some(t=>{const r=e.find(e=>e.group.id===t.group.id);return!r||!(0,o.d)(r.selectedByItemIds,t.selectedByItemIds)}),K=class{constructor(e){(0,i.r)(this,e),this.workflowCancel=(0,i.c)(this,"workflowCancel",7),this.workflowComplete=(0,i.c)(this,"workflowComplete",7),this.initialShareLevels=[],this.initialSelectedGroupData=[],this.initialSelectedGroupDataLookup={},this.showOptions=!1,this.shareLevelOptions=["private","org","public"],this.possibleShareLevelOptions=["private","org","public"],this.shareLevelIcon={private:"user",org:"organization",public:"globe"},this.isPublicUser=!1,this.baseDisabledText="",this.hasItemBlockedFromPublic=!1,this.hasPrivateItem=!1,this.shareMode="default",this.hasIndoorsSpaces=!1,this.sharingDetailToEmit=null,this.didUpdateSharingDetail=!1,this.shareItemResult=null,this.handleNewShareResult=async()=>{const{portal:e,shareItemResult:{newItems:t}}=this,r=(await Promise.all(t.map(t=>(0,d.a)(t,e)))).reduce((e,{result:t})=>(t&&Object.keys(t).forEach(r=>{e[r]=[...e[r],...t[r]]}),e),Object.assign({},E));this.sharingDetail=r},this.updateSharing=async()=>{var e,t,r;this.loadingText=this.i18n.updatingInfo,this.isLoading=!0;const{items:i,selectedShareLevels:s,initialSelectedGroupData:n,selectedGroupData:l,portal:c,user:p,isShareLevelDirty:h,checkItemPDCIssue:u,confirmedPDC:m}=this,{shareGroupIds:g,unshareGroupIds:b}=((e,t)=>{const r=e.filter(e=>!t.some(t=>t.group.id===e.group.id)),i=t.filter(t=>{const r=e.find(e=>e.group.id===t.group.id);return!r||r.selectedByItemIds.length<t.selectedByItemIds.length});return{unshareGroupIds:r.map(e=>e.group.id),shareGroupIds:i.map(e=>e.group.id)}})(n,l);if(!m&&!await u())return;let v=h||1===i.length?s[0]:null;const f=b.length?(0,d.u)(i.map(e=>e.id),b,{portal:c,user:p}):void 0,w=g.length||h?(0,d.e)(i,v,g,{portal:c,user:p}):void 0,[_]=await Promise.all([w,f]),y=g.filter(e=>!(null==_?void 0:_.result.some(({notSharedWith:t})=>t.includes(e))));let x=null!==(e=(await(0,a.e)(i.map(e=>e.id),c)).result)&&void 0!==e?e:[...i];null!=v&&(x=x.map(e=>{if("private"!==v)return e.access=v,e;const t=null==l?void 0:l.some(({selectedByItemIds:t})=>t.includes(e.id));return e.access=t?"shared":"private",e})),(null==l?void 0:l.length)||(x=x.map(e=>(e.access="shared"===e.access?"private":e.access,e)),"shared"===v&&(v="private")),y.length&&(x=x.map(e=>(e.access="private"===e.access?"shared":e.access,e)),"private"===v&&(v="shared"));const k={newGroupShared:y,newGroupUnshared:b,newShareLevel:v,newItems:x,shareErrors:(null==_?void 0:_.error)?[{item:i[0],code:"unhandledError"}]:null!==(r=null===(t=null==_?void 0:_.result)||void 0===t?void 0:t.filter(({error:e})=>e).map(({itemId:e})=>({item:i.find(t=>t.id===e),code:"notSharedWith"})))&&void 0!==r?r:[]};this.shareItemResult=k,this.items=x,await(0,o.t)(500),this.handleNewShareResult()},this.checkItemPDCIssue=async()=>{const{items:e,portal:t,isShareLevelDirty:r,selectedShareLevels:i}=this,a=e.filter(e=>(0,_.i)(e.typeKeywords,e.type)),s=r&&"public"===i[0];if(a.length>0&&s){this.isLoading=!0;const e=await Promise.all(a.map(e=>(0,y.i)(e,t)));this.isLoading=!1;const r=a.filter((t,r)=>e[r]);if(r.length){const e=!r.every(e=>e.typeKeywords.includes("Public Data Collection"));return this.confirmationDialogType=e?"publicDataCollectionDisabled":"publicDataCollectionEnabled",!1}}return!0},this.handleNewPendingSelectedGroups=(e,t=!1)=>{const{items:r,pendingGroupBrowserData:i,selectedGroupData:a}=this,s=(0,o.a)(t?a:i.groupData,e=>({key:e.group.id,data:e})),n=r.map(e=>e.id),l=e.map(e=>{const t=s[e.id];return t||{group:e,selectedByItemIds:n}});this.pendingGroupBrowserData={groupData:l,groupDataLookup:(0,o.a)(l,e=>({key:e.group.id,data:!0})),groupCount:l.reduce((e,t)=>(e[t.group.id]=t.selectedByItemIds.length,e),{}),isDirty:H(l,a)}},this.revertShareLevel=()=>{this.selectedShareLevels=[...this.initialShareLevels]},this.setShareLevel=e=>{this.selectedShareLevels=this.selectedShareLevels.map(()=>e)},this.revertGroupData=()=>{this.selectedGroupData=[...this.initialSelectedGroupData]},this.revertPendingGroupData=e=>{const{initialSelectedGroupData:t,pendingGroupBrowserData:r,handleNewPendingSelectedGroups:i}=this,a=t.find(({group:t})=>t.id===e),s=r.groupData,o=s.find(({group:t})=>t.id===e);let n=[];n=a?o?s.map(t=>t.group.id!==e?t:a):[...s,a]:s.filter(({group:t})=>t.id!==e),i(n.map(({group:e})=>e),!0)},this.applyPendingGroupData=()=>{this.selectedGroupData=[...this.pendingGroupBrowserData.groupData],this.unBrowseGroups()},this.closeDialog=e=>{var t,r;null==e||e.stopPropagation();const{workflowCancel:i,currentStep:a}=this;"finish"!==a&&i.emit({newShareLevel:null!==(r=null===(t=this.shareItemResult)||void 0===t?void 0:t.newShareLevel)&&void 0!==r?r:null,cancelAtStep:a})},this.unBrowseGroups=()=>{this.isBrowsingGroups=!1},this.setGroupBrowserSearchUsername=e=>{this.groupBrowserSearchUsername=e},this.renderGroupBrowser=()=>{const{i18n:e,user:t,portal:r,config:a,pendingGroupBrowserData:s,browserPagination:o,browserGroups:n,handleNewPendingSelectedGroups:l,isBrowsingGroups:c,isPublicUser:d,items:p,shareMode:h,groupBrowserQ:u,initialSelectedGroupDataLookup:m,revertPendingGroupData:g,hasIndoorsSpaces:b,groupBrowserAllUsers:v,groupBrowserSearchUsername:f,hasPrivateItem:w}=this,_=p.length,y="admin"===h&&!w&&v.length>1;return(0,i.h)("arcgis-group-browser",{view:"compact",class:{hidden:!c},config:a,user:t,portal:r,selection:"multiple",usePanelLayout:!1,searchUser:f,selectedGroups:s.groupData.map(e=>e.group),hasIndoorsSpaces:b,q:u,onArcgisGroupBrowserUpdate:e=>{const{results:t,num:r,start:i,total:a}=e.detail;this.browserGroups=t,this.browserPagination={start:i,num:r,total:a}},onArcgisGroupBrowserLoading:()=>{this.browserGroups=[]},onArcgisGroupBrowserSelect:e=>l(e.detail)},(0,i.h)("arcgis-group-browser-top-bar",{slot:"top-bar","filter-toggle":!0},(0,i.h)("arcgis-group-browser-search",{slot:"search",term:""})),(0,i.h)("arcgis-group-browser-sort",{slot:"sort"}),(0,i.h)("arcgis-group-browser-filters",{slot:"filters"},y&&(0,i.h)("arcgis-group-browser-filter-groups-by-user",{searchUsernames:v.map(e=>e.username),searchUsername:f,onArcgisGroupBrowserUsernamesFilter:e=>{this.setGroupBrowserSearchUsername(e.detail)}}),(0,i.h)("arcgis-group-browser-filter-owner",{searchUsername:f}),!d&&(0,i.h)(i.F,null,(0,i.h)("arcgis-group-browser-filter-membership",null),(0,i.h)("arcgis-group-browser-filter-member-org",null),(0,i.h)("arcgis-group-browser-filter-special-groups",null)),(0,i.h)("arcgis-group-browser-filter-date",{property:"modified"}),(0,i.h)("arcgis-group-browser-filter-date",{property:"created"})),(0,i.h)("arcgis-group-browser-content",{slot:"content",class:"js-content"},(n||[]).map(a=>{const o=a.id;return(0,i.h)("arcgis-item-share-group-card",{key:o,user:t,portal:r,i18n:e,group:a,groupCount:s.groupCount,initialSelectedGroupDataLookup:m,selectedGroupDataLookup:s.groupDataLookup,totalItemCount:_,onRevertClick:()=>{g(o)}})})),(0,i.h)("arcgis-group-browser-pagination",{slot:"pagination",class:"js-pagination",total:null==o?void 0:o.total,start:null==o?void 0:o.start,num:null==o?void 0:o.num}))},this.renderShareSelectGroup=()=>{const{config:e,baseDisabledText:t,hasSingleShareLevel:r,i18n:a,initialSelectedGroupData:s,isBrowsingGroups:n,isLoading:l,isPublicUser:c,isShareLevelDirty:d,items:p,loadingText:h,portal:u,possibleShareLevelOptions:m,revertGroupData:g,revertShareLevel:b,selectedGroupData:v,selectedShareLevels:f,setShareLevel:_,shareLevelCount:y,shareLevelIcon:x,shareLevelOptions:k,shareMode:S,showOptions:C,user:I,hasPrivateItem:D,hasIndoorsSpaces:G,disabledShareLevelMessageOverride:L}=this,P=p.length,B=P.toString();return(0,i.h)("div",{class:{hidden:n}},l&&(0,i.h)("arcgis-new-item-loader",{active:l,text:h}),(0,i.h)("div",{class:"section"},(0,i.h)("arcgis-new-item-description",{header:a.shareLevel.title,headerSideContent:d&&(0,i.h)("calcite-button",{appearance:"transparent",iconStart:"reset",disabled:l,onClick:()=>{z(I,p,v,u)?this.confirmationDialogType="publicAccountRevertShareLevel":b()}},a.revert)}),(0,i.h)("div",{class:"content-container"},(0,i.h)("calcite-tile-select-group",{layout:"vertical",class:"tile-select"},C&&$.map(e=>{const s=!m.includes(e);if(s&&c)return null;const o=y[e]+("private"===e?y.shared:0),n=o>0,d=o.toString(),p=a.shareLevel.level[e].title,h=`share-level-${e}`;const g=L[e]||t;return(0,i.h)("div",{class:"tile-select-wrapper",key:e},s&&(0,i.h)("calcite-tooltip",{referenceElement:h},(0,i.h)("span",{class:"tooltip-container"},g)),(0,i.h)("calcite-tile-select",{id:h,checked:r&&n,heading:p,"aria-label":s?t:void 0,description:a.shareLevel.level[e][c&&"public"===e?"descriptionPublicUser":"description"],name:"dev-cred-create-mode",inputEnabled:!0,width:"full",type:"radio",value:e,icon:x[e],disabled:l||s,class:{"active-but-not-selected":n&&!r},onCalciteTileSelectChange:e=>{const t=e.currentTarget.value;u.isPortal||!((e,t,r,i)=>!U(i)&&!(0,w.w)(e)&&"private"===t&&Object.keys(r).length>0)(I,t,v,u)?_(t):this.confirmationDialogType="publicAccountSetShareToPrivate"}}),!r&&n&&(0,i.h)("div",{class:"share-hint"},(0,i.h)("arcgis-information",{label:a.shareCountLabel,paddedContent:!0,placement:"bottom-end",overlayPositioning:"fixed"},a.shareCountTooltip.replace("${shareLevel}",p).replace("${numItem}",d).replace("${totalItem}",B)),(0,i.h)("p",null,a.shareCountHint.replace("${numItem}",d).replace("${totalItem}",B))))})),C&&m.length<k.length&&!this.hasItemBlockedFromPublic&&!c&&(0,i.h)("p",{class:"information-text"},a.sharingLimitedDisclaimer),(!C||!m.length)&&(0,i.h)("p",{class:"information-text"},a.noShareDisclaimer))),(0,i.h)("div",{class:"section"},(0,i.h)("arcgis-item-share-group",{items:p,user:I,portal:u,config:e,shareMode:S,i18n:a.shareGroup,isLoading:l,onEditGroupClick:()=>{((e,t,r)=>!U(r)&&!(0,w.v)(e)&&t.some(e=>"private"===e))(I,f,u)?this.confirmationDialogType="publicAccountOpenGroupBrowser":this.isBrowsingGroups=!0},onAnalyzeUserGroupComplete:e=>{const{initialSelectedGroups:t,userGroupLookup:r,allUsers:i,searchUsername:a}=e.detail;this.initialSelectedGroupData=t,this.selectedGroupData=t,this.initialSelectedGroupDataLookup=(0,o.a)(t,({group:e,selectedByItemIds:t})=>({key:e.id,data:0===t.length?"none":t.length===P?"all":"indeterminate"})),this.setGroupBrowserSearchUsername(a),this.groupBrowserAllUsers=i,this.groupBrowserQ=[A({shareMode:S,currentUsername:a,user:I,userGroupLookup:r,isPrivate:D}),G?"-capabilities:distributed":void 0,G?"membershipaccess:org":void 0].filter(e=>e).join(" ").trim()},onDirtyChange:e=>this.isSelectedGroupsDirty=e.detail,onRemoveClick:()=>this.selectedGroupData=[],onRevertClick:()=>{((e,t,r)=>(0,w.b)(e)&&t.some(e=>"private"===e)&&r.length>0)(I,f,s)?this.confirmationDialogType="publicAccountRevertGroup":g()},selectedGroupData:v})))},this.renderShareModal=()=>{const{closeDialog:e,i18n:t,isLoading:r,updateSharing:a,isShareLevelDirty:s,isSelectedGroupsDirty:o,isBrowsingGroups:n,applyPendingGroupData:l,unBrowseGroups:c,renderShareSelectGroup:d,renderGroupBrowser:p,currentStep:h,hasSharingIssue:u,pendingGroupBrowserData:m}=this,g=s||o;return("share"===h||null===u)&&(0,i.h)("calcite-dialog",{onCalciteDialogClose:e,modal:!0,open:!0,width:n?"m":"s",class:{"group-browser-dialog":n},outsideCloseDisabled:!0,heading:t[n?"titleGroup":"title"]},(0,i.h)("div",{class:"stage"},p(),d()),n?(0,i.h)(i.F,null,(0,i.h)("calcite-button",{slot:"footer-end",appearance:"outline",kind:"brand","data-id":"cancelButton",onClick:c},t.cancel),(0,i.h)("calcite-button",{slot:"footer-end",appearance:"solid",kind:"brand",onClick:l,disabled:r||!m.isDirty},t.apply)):(0,i.h)(i.F,null,(0,i.h)("calcite-button",{slot:"footer-end",appearance:"outline",kind:"brand","data-id":"cancelButton",onClick:()=>e()},t.cancel),(0,i.h)("calcite-button",{slot:"footer-end",appearance:"solid",kind:"brand","data-id":"nextButton",onClick:a,disabled:r||!g},t.save)))},this.renderDepCheckModal=()=>{const{config:e,portal:t,user:r,items:a,closeDialog:s,hasSharingIssue:o,sharingDetail:n}=this;return o&&(0,i.h)("arcgis-dependency-check",{items:a.map(e=>({item:e})),portal:t,user:r,config:e,isActive:!0,preProcessedSharingDetail:n,showPostShare:!0,onWorkflowCancel:s,onWorkflowComplete:e=>{e.stopPropagation(),this.didUpdateSharingDetail=!0,this.sharingDetailToEmit=Object.assign({},n),this.sharingDetail=Object.assign({},E)}})},this.renderConfirmationDialog=()=>{const{confirmationDialogType:e}=this;if(!e)return null;const{i18n:t,isLoading:r,revertShareLevel:a,setShareLevel:s,revertGroupData:o}=this,{title:n,description:l}=t.shareWarning[e],c="publicDataCollectionDisabled"===e;return(0,i.h)("calcite-dialog",{onCalciteDialogClose:e=>{e.stopPropagation(),this.confirmationDialogType=null},open:!!this.confirmationDialogType,width:"s",outsideCloseDisabled:!0,escapeDisabled:!0,modal:!0,heading:n,"data-testid":F},(0,i.h)("div",null,l),(0,i.h)("calcite-button",{slot:"footer-end",appearance:c?"solid":"outline",kind:"brand","data-id":"cancelButton",onClick:()=>this.confirmationDialogType=null},t[c?"ok":"cancel"]),!c&&(0,i.h)("calcite-button",{slot:"footer-end",appearance:"solid",kind:"brand","data-id":"nextButton",onClick:()=>{switch(e){case"publicAccountOpenGroupBrowser":s("public"),this.isBrowsingGroups=!0;break;case"publicAccountSetShareToPrivate":s("private"),this.selectedGroupData=[];break;case"publicAccountRevertShareLevel":a(),this.selectedGroupData=[];break;case"publicAccountRevertGroup":s("public"),o();break;case"publicDataCollectionEnabled":this.confirmedPDC=!0,this.updateSharing()}this.confirmationDialogType=null},disabled:r},t.update))},this.api=void 0,this.user=void 0,this.portal=void 0,this.config=void 0,this.items=void 0,this.hasTrustedOrgs=!1,this.disabledShareLevel={private:!1,org:!1,public:!1},this.disabledShareLevelMessageOverride={},this.isLoading=void 0,this.selectedShareLevels=[],this.isShareLevelDirty=!1,this.shareLevelCount={private:0,shared:0,org:0,public:0},this.hasSingleShareLevel=!1,this.selectedGroupData=[],this.isSelectedGroupsDirty=!1,this.loadingText=null,this.isBrowsingGroups=!1,this.confirmationDialogType=null,this.confirmedPDC=!1,this.browserPagination=void 0,this.browserGroups=[],this.pendingGroupBrowserData={groupData:[],groupDataLookup:{},groupCount:{},isDirty:!1},this.groupBrowserQ="",this.groupBrowserSearchUsername="",this.groupBrowserAllUsers=[],this.currentStep="share",this.sharingDetail=null,this.hasSharingIssue=null}handleIsBrowsingGroupsChange(){this.isBrowsingGroups&&this.handleNewPendingSelectedGroups(this.selectedGroupData.map(({group:e})=>e),!0)}handleShareLevelChange(){const{selectedShareLevels:e,initialShareLevels:t,selectedGroupData:r,items:i}=this;this.isShareLevelDirty=((e,t,r,i)=>e.some((e,a)=>{const s=t[a];if("shared"===s&&"private"===e){const e=r[a];return!i.some(t=>t.selectedByItemIds.includes(e.id))}return s!==e}))(e,t,i,r),this.shareLevelCount=e.reduce((e,t)=>(e[t]++,e),{private:0,shared:0,org:0,public:0}),this.hasSingleShareLevel=e.every(t=>t===e[0])}async componentWillLoad(){const{portal:e,user:t,el:r}=this,i=await(0,l.g)(r);this.i18n=i[0],this.loadingText=this.i18n.retrievingInfo;const s=this.items.map(e=>e.id),{result:o,error:c}=await(0,a.e)(s,this.portal);o&&!c&&(this.items=o),this.isPublicUser=(0,w.b)(t);const{items:p}=this;this.initialShareLevels=this.items.map(e=>e.access),this.selectedShareLevels=[...this.initialShareLevels];const{result:h}=await(0,f.g)(e,t);this.possibleShareLevelOptions=(({items:e,portal:t,subscriptionInfo:r,user:i})=>{const a=(0,w.b)(i);let s=$;return a?s=["private","public"]:t.canSharePublic||(0,w.f)(i)||(s=["private","org"]),s=s.filter(a=>M({shareLevel:a,items:e,user:i,portal:t,subscriptionInfo:r})),s})({user:t,items:p,portal:e,subscriptionInfo:h}).filter(e=>!this.disabledShareLevel[e]);const u=((e,t,r)=>{var i;const a=e[0];if((0,n.i)(a,t))return"default";const s=!a.orgId&&!(null===(i=a.sourceJSON)||void 0===i?void 0:i.orgId)||N(t,[a]);return(0,w.D)({items:e,user:t,portal:r})&&s?"admin":"group"})(p,t,e);this.showOptions="group"!==u,this.shareMode=u,this.hasPrivateItem=p.some(e=>"private"===e.access),this.hasItemBlockedFromPublic=p.some(t=>(0,d.b)(t,e.isPortal));const m=(0,w.d)(h)||this.hasItemBlockedFromPublic||(0,w.i)(h)&&p.some(d.c);this.baseDisabledText=p.some(B)?this.i18n.shareLevelNotAvailableDisclaimer:m?this.i18n.sharingLimitedItemDisclaimer:this.i18n.cannotShareToLevelDisclaimer,this.hasIndoorsSpaces=p.some(e=>{var t;return null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("EditExtensionIndoorsSpaces")})}handleSharingDetailChange(){const{sharingDetail:e}=this;this.hasSharingIssue=null!==e?Object.keys(e).some(t=>e[t].length>0):null}handleHasSharingIssueChange(){const{hasSharingIssue:e}=this;e?this.currentStep="review-sharing":!1===e&&(this.currentStep="finish")}handleCurrentStepChange(){var e,t,r,i,a;const{currentStep:s,didUpdateSharingDetail:o,workflowComplete:n,sharingDetailToEmit:l,shareItemResult:c}=this;if("finish"!==s)return;const d=o;n.emit({dependentLayersWithSourceItems:d&&l?Object.values(l).reduce((e,t)=>(e.push(...t.map(({layer:e,sourceItem:t})=>({layer:e,sourceItem:t}))),e),[]):[],newShareLevel:null!==(e=null==c?void 0:c.newShareLevel)&&void 0!==e?e:null,newGroupShared:null!==(t=null==c?void 0:c.newGroupShared)&&void 0!==t?t:[],newGroupUnshared:null!==(r=null==c?void 0:c.newGroupUnshared)&&void 0!==r?r:[],newItems:null!==(i=null==c?void 0:c.newItems)&&void 0!==i?i:[],didUpdateDependentLayersSharing:d,shareErrors:null!==(a=null==c?void 0:c.shareErrors)&&void 0!==a?a:[]})}render(){const{renderShareModal:e,renderDepCheckModal:t,renderConfirmationDialog:r}=this;return(0,i.h)(i.F,{key:"ae64ccbca0585f76faf968ea707aa878248d6af2"},e(),t(),r())}get el(){return(0,i.a)(this)}static get watchers(){return{isBrowsingGroups:["handleIsBrowsingGroupsChange"],selectedShareLevels:["handleShareLevelChange"],sharingDetail:["handleSharingDetailChange"],hasSharingIssue:["handleHasSharingIssueChange"],currentStep:["handleCurrentStepChange"]}}};K.style=".stage{height:100%}.group-browser-dialog{--calcite-dialog-size-y:min(800px, 80vh);--calcite-dialog-size-x:1080px;--calcite-dialog-content-space:0}.hidden{display:none}.section:not(:last-child){margin-bottom:2rem}calcite-flow{height:100%}.content-container{margin-top:0.5rem}.active-but-not-selected{position:relative;z-index:2}.tile-select-wrapper{position:relative}.share-hint{display:flex;align-items:center;position:absolute;font-size:0.875rem;inset-inline-end:0.5rem;top:0.5rem;z-index:3}.share-hint>p{margin-bottom:0px;margin-inline-start:0.5rem;margin-top:2px}.information-text{margin-top:0px;margin-bottom:0px;margin-top:0.5rem;font-size:0.875rem}.group-item-counter{font-size:0.875rem;margin-top:0px;margin-bottom:0px}.revert-single-group-cta:first-child,.group-item-counter:first-child{margin-inline-start:0.5rem}";const W=async({user:e,portalUser:t,portal:r,shareMode:i,userGroupLookup:a,items:s})=>{var o;const n={q:A({shareMode:i,currentUsername:t.username,user:e,userGroupLookup:a,isPrivate:"private"===(null===(o=s[0])||void 0===o?void 0:o.access)}),num:100,searchUserAccess:"groupMember",searchUserName:e.username};try{const e=await q(r,n);if(-1===e.nextStart)return{result:e.results};const t=Math.ceil(e.total/100)-1,i=[];for(let e=0;e<t;e++)i.push(new Promise(async t=>{const i=100*(e+1)+1;t((await q(r,Object.assign(Object.assign({},n),{start:i}))).results)}));const a=(await Promise.all(i)).flat();return{result:[...e.results,...a]}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}},q=(e,t)=>(0,x.r)(`${(0,S.e)(e)}community/groups`,e,{body:t,usePost:!0}),J=async({user:e,items:t,portal:r})=>{var i;if((0,n.c)(t,e)&&(0,w.D)({items:t,user:e,portal:r})&&(0,w.F)(e)){const e=t[0];return null!==(i=e.itemOwner)&&void 0!==i?i:await(0,k.f)(e.owner,r)}return e},Q=async({user:e,portal:t,shareMode:r,itemOwner:i})=>{const a=await Promise.all([(0,k.f)(e.username,t),"admin"===r&&i.username!==e.username?(0,k.f)(i.username,t):null]);return Object.assign({[e.username]:a[0].groups},!!a[1]&&{[i.username]:a[1].groups})},V=class{constructor(e){(0,i.r)(this,e),this.editGroupClick=(0,i.c)(this,"editGroupClick",7),this.dirtyChange=(0,i.c)(this,"dirtyChange",7),this.analyzeUserGroupComplete=(0,i.c)(this,"analyzeUserGroupComplete",7),this.removeClick=(0,i.c)(this,"removeClick",7),this.revertClick=(0,i.c)(this,"revertClick",7),this.hasGroups=!1,this.user=void 0,this.portal=void 0,this.config=void 0,this.items=void 0,this.shareMode=void 0,this.isLoading=void 0,this.i18n=void 0,this.selectedGroupData=[],this.initialSelectedGroups=[],this.canShareItemToGroup=!1,this.isDirty=!1,this.isSharingMixed=!1}handleSelectedGroupsChange(e){const{user:t,initialSelectedGroups:r,items:i,portal:a}=this;this.canShareItemToGroup=O({selectedGroupData:e,user:t,portal:a})&&!0,this.isDirty=H(e,r),this.isSharingMixed=((e,t)=>t.some(({selectedByItemIds:t})=>t.length!==e.length))(i,e),this.dirtyChange.emit(this.isDirty)}async componentDidLoad(){const{user:e,portal:t,items:r,shareMode:i}=this;this.isLoading=!0;const{result:a}=await(async({items:e,portal:t,shareMode:r,user:i})=>{try{const a=await J({user:i,items:e,portal:t}),s=i.username===a.username?[i]:[i,a],o=await Q({portal:t,user:i,shareMode:r,itemOwner:a}),n=(await Promise.all(s.map(a=>W({user:a,portalUser:i,portal:t,shareMode:r,userGroupLookup:o,items:e})))).flatMap(e=>e.result),l=n.map(({id:e})=>e);return{result:{uniqueGroups:n.filter((e,t)=>l.indexOf(e.id)===t),userGroupLookup:o,allUsers:s,searchUsername:i.username===a.username?i.username:a.username}}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}})({user:e,portal:t,items:r,shareMode:i}),{uniqueGroups:n,userGroupLookup:l,searchUsername:c,allUsers:d}=a,{result:p}=await(async(e,t,r)=>{try{const i=await Promise.all((0,o.g)(t,100).map(async t=>(0,s.r)(`${(0,S.g)(r)}/content/itemsgroups`,{items:e.join(","),groups:t.join(",")}))),a={};return i.forEach(e=>{Object.keys(e).forEach(t=>{const r=e[t];a[t]?a[t].items=[...a[t].items,...r.items]:a[t]=r})}),{result:a}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}})(r.map(e=>e.id),n.map(e=>e.id),t),h=n.filter(({id:e})=>!!p[e]).map(e=>({group:e,selectedByItemIds:r.filter(({id:t})=>!!p[e.id].items.find(e=>e.itemId===t)).map(e=>e.id)}));this.hasGroups=n.length>0,this.canShareItemToGroup=O({selectedGroupData:h,user:e,portal:t}),this.initialSelectedGroups=h,this.isLoading=!1,this.analyzeUserGroupComplete.emit({allUsers:d,initialSelectedGroups:h,userGroupLookup:l,searchUsername:c})}render(){const{i18n:e,isLoading:t,canShareItemToGroup:r,removeClick:a,revertClick:s,selectedGroupData:o,hasGroups:n,isDirty:l,isSharingMixed:c}=this;return(0,i.h)(i.H,{key:"5597ea9da897bcba536e493fef915b85cbb78d03"},(0,i.h)("arcgis-new-item-description",{key:"ed6a8e680647d2e414c2ea2835a34d4844cdf01c",header:e.title,headerSideContent:l?(0,i.h)("calcite-button",{appearance:"transparent",iconStart:"reset",disabled:t,onClick:()=>s.emit()},e.revert):o.length>0&&(0,i.h)("calcite-button",{appearance:"transparent",iconStart:"x",disabled:t,onClick:()=>a.emit()},e.remove)}),(0,i.h)("div",{key:"b936d474e8bbc829b0c0efda077c4c3f5cdba80c",class:"content"},(0,i.h)("div",{key:"13a3c875acdd5f2305a5ac0781c7cf744f563a04",class:"group-container"},o.length>0?(0,i.h)("arcgis-group-thumbnail-stack",{groups:o.map(({group:e})=>e)}):(0,i.h)("p",{class:"information-text"},e[n?"noneYet":"noGroup"])),n&&r&&(0,i.h)("calcite-button",{key:"bab593ba2a8ffca7fc1def182393c15222eba12d",iconStart:"group",appearance:"outline-fill",disabled:t,onClick:()=>this.editGroupClick.emit()},e.edit)),!t&&c&&(0,i.h)("p",{key:"ff0eabd7941e9ea773604924482e9f651ba49cd0",class:"information-text text-padding"},e.mixedGroupSharing))}get el(){return(0,i.a)(this)}static get watchers(){return{selectedGroupData:["handleSelectedGroupsChange"]}}};V.style=".content{display:flex;align-items:center;justify-content:space-between;margin-top:1rem}.information-text{font-size:0.875rem;margin-top:0px;margin-bottom:0px}.text-padding{margin-top:0.5rem}";const Z=class{constructor(e){(0,i.r)(this,e),this.revertClick=(0,i.c)(this,"revertClick",7),this.user=void 0,this.portal=void 0,this.group=void 0,this.groupCount=void 0,this.initialSelectedGroupDataLookup=void 0,this.selectedGroupDataLookup=void 0,this.totalItemCount=void 0,this.i18n=void 0}render(){const{group:e,groupCount:t,totalItemCount:r,initialSelectedGroupDataLookup:a,selectedGroupDataLookup:s,revertClick:o,portal:n,user:l,i18n:c}=this,d=r.toString(),p=e.id,h=t[e.id];let u="none";switch(!0){case h<r:u="indeterminate";break;case h===r:u="all"}const m=a[p],g=(!!m||"none"!==u)&&m!==u;return(0,i.h)("arcgis-group-card",{group:e,portal:n,user:l,name:e.title,selected:!!s[p],indeterminate:"indeterminate"===u,selection:"multiple",preview:"action",view:"compact",showOwner:!0,showDateUpdated:!0,showSummary:!0,key:p},(0,i.h)("span",{key:"4120550c407732e68f118a67b2472a6608c39081",slot:"content-end"},h&&h>0&&(0,i.h)("span",{key:"d492b634ed7e7c667950798461f218e2b76393e9",class:"group-item-counter"},c[g?"willShareCountHint":"sharedCountHint"].replace("${numItem}",h.toLocaleString()).replace("${totalItem}",d)),g&&(0,i.h)("calcite-button",{key:"f29b068ea0dd2efc95a1a482541a3aad353427e3",class:"revert-single-group-cta",appearance:"transparent",onClick:e=>{e.stopPropagation(),o.emit()}},c.revert)))}get el(){return(0,i.a)(this)}};Z.style=":host{display:contents}";const Y=class{constructor(e){(0,i.r)(this,e),this.arcgisItemShareSummaryUpdate=(0,i.c)(this,"arcgisItemShareSummaryUpdate",7),this.loadGroupData=async()=>{var e;const t=await(0,C.g)(this.item,this.portal,this.userGroups),r=await(0,C.a)((null===(e=null==t?void 0:t.result)||void 0===e?void 0:e.length)?t.result:this.groups,this.portal);this.groupData=r.result},this.handleShareComplete=async e=>{await(0,o.t)(300);const t=e.detail.newGroupUnshared,r=e.detail.newGroupShared,i=(this.groups||[]).concat((null==r?void 0:r.length)?r:[]).filter(e=>!(null==t?void 0:t.includes(e)));this.isSharing=!1;const{result:s}=await(0,a.l)(this.item.id,this.portal);s&&(i.length||"shared"!==s.access?i.length&&"private"===s.access&&(s.access="shared"):s.access="private",this.item=s),this.groups=i,this.arcgisItemShareSummaryUpdate.emit({itemId:this.item.id,itemTitle:this.item.title,access:e.detail.newShareLevel,groups:i})},this.updateTooltipRef=()=>{this.tooltip&&(this.tooltip.referenceElement=this.wrapper)},this.item=void 0,this.portal=void 0,this.config=void 0,this.groups=void 0,this.userGroups=void 0,this.showText=!0,this.showHoverText=void 0,this.user=void 0,this.allowEdit=void 0,this.scale="m",this.overlayPositioning="absolute",this.isSharing=!1,this.sharingActive=!1,this.groupData=void 0}async setFocus(){var e;null===(e=this.wrapper)||void 0===e||e.focus()}async componentWillLoad(){const{el:e}=this,t=await(0,l.g)(e,"arcgis-item-share-summary");this.i18n=t[0]}getIcon(e){return{private:"user",shared:"user",org:"organization",public:"globe"}[e]||"globe"}getFormattedStrings(){const{item:e,i18n:t,groups:r}=this;if(!(null==r?void 0:r.length))return{tooltip:t[e.access],tooltipNoCount:t[e.access],access:t[e.access],groups:"shared"===e.access?t.shared:""};const i=`${(null==r?void 0:r.length)||0}`;return{access:"shared"===e.access?t.private:t[e.access],tooltipNoCount:t[`${e.access}Groups`].replace("(${num})",""),tooltip:t[`${e.access}Groups`].replace("${num}",i),groups:t.groups.replace("${num}",i)}}renderIcons(e,t){const{item:r,showText:a}=this;return(0,i.h)(i.F,null,(0,i.h)("calcite-icon",{class:"icon",icon:this.getIcon(r.access),scale:"s",key:"access"}),a&&(0,i.h)("span",{class:"text"},e),t&&(0,i.h)(i.F,null,(0,i.h)("calcite-icon",{class:"icon",icon:"plus",scale:"s"}),(0,i.h)("calcite-icon",{class:"icon",icon:"group",scale:"s"}),a&&(0,i.h)("span",{class:"text"},t)))}getAccessInfo(e){const t={public:this.i18n.everyone,private:this.i18n.groupMembers,org:this.i18n.organization};return t[e]||t.private}renderGroupData(){var e,t;const r=(null===(e=this.groupData)||void 0===e?void 0:e.length)||(null===(t=this.groups)||void 0===t?void 0:t.length)||0;return(0,i.h)(i.F,null,(0,i.h)("h4",{class:"tooltip__section-header"},this.i18n.groups.replace("${num}",`${r}`)),(0,i.h)("div",{class:"tooltip__section"},(0,i.h)("ul",{class:"tooltip__groups "},this.groupData.map(e=>(0,i.h)("li",{class:"tooltip__group"},(0,i.h)("arcgis-group-thumbnail",{group:e,key:e.id,class:"tooltip__group__avatar"}),(0,i.h)("div",{class:"tooltip__group__text"},(0,i.h)("h5",{class:"tooltip__group__title"},e.title),(0,i.h)("p",{class:"tooltip__group__description"},this.i18n.viewableBy.replace("${level}",this.getAccessInfo(e.access)))))))))}renderTooltip(){var e,t;const r=this.getFormattedStrings(),a=(null===(e=this.groupData)||void 0===e?void 0:e.length)?r.tooltipNoCount:r.tooltip;return(0,i.h)(i.F,null,(0,i.h)("h4",{class:"tooltip__section-header"},this.i18n.sharing),(0,i.h)("div",{class:"tooltip__section"},(0,i.h)("p",{class:"tooltip_status"},a)),(null===(t=this.groupData)||void 0===t?void 0:t.length)?this.renderGroupData():null)}render(){const{showText:e,showHoverText:t,allowEdit:r,isSharing:a,item:s,user:n,portal:l,config:c}=this,{access:d,groups:p}=this.getFormattedStrings();return(0,i.h)(i.H,{key:"51b53da7c46b41fc672cf6b718c622a215ad7ba8"},r?(0,i.h)("button",{class:"wrapper wrapper--button",ref:e=>{this.wrapper=e,this.updateTooltipRef()},onClick:()=>{this.isSharing=!0}},this.renderIcons(d,p)):(0,i.h)("div",{class:"wrapper",ref:e=>{this.wrapper=e,this.updateTooltipRef()}},this.renderIcons(d,p)),(null!=t?t:!e)&&(0,i.h)("calcite-tooltip",{key:"6381c172a14820ba44949172f5eb4dfa0a13fe40",ref:e=>{this.tooltip=e,this.wrapper&&(e.referenceElement=this.wrapper)},closeOnClick:!0,placement:"bottom-start",offsetDistance:6,offsetSkidding:0,onCalciteTooltipBeforeOpen:()=>{var e,t;const r=null===(t=null===(e=this.tooltip)||void 0===e?void 0:e.shadowRoot)||void 0===t?void 0:t.querySelector("div");r&&r.style.setProperty("--calcite-color-foreground-1","var(--calcite-color-background)"),this.loadGroupData()},overlayPositioning:this.overlayPositioning,style:{"--calcite-tooltip-z-index":"calc(var(--calcite-z-index-overlay) + 1)"}},(0,i.h)("div",{key:"fdd1adeec5d93f63d2aa9b4bcd2c1bcd3a46e474",class:"tooltip"},this.groupData?this.renderTooltip():(0,i.h)("calcite-loader",{label:"",scale:"s",style:{"--calcite-loader-padding":"2rem"}}))),a&&(0,i.h)("arcgis-tunnel",{key:"df6ee57652ec4c16db58561c79e9d19097e1108f",reference:this.el},(0,i.h)("arcgis-item-share",{key:"ed7e5bcd2f697b0a46e063f5ea94085751f167a5",items:[s],portal:l||u.c.portal,user:n,config:c||u.c.config,onWorkflowCancel:async e=>{var t;"share"!==(null===(t=e.detail)||void 0===t?void 0:t.cancelAtStep)&&this.handleShareComplete(e),await(0,o.t)(300),this.isSharing=!1},onWorkflowComplete:this.handleShareComplete})))}get el(){return(0,i.a)(this)}};Y.style=":host{display:inline-flex;align-items:center;justify-content:center;min-width:var(--arcgis-item-share-summary-spacing)}:host([scale=s]){--arcgis-item-share-summary-text-size:0.75rem;--arcgis-item-share-summary-spacing:1rem;--arcgis-item-share-summary-padding:3px}:host([scale=s][show-text]){--arcgis-item-share-summary-padding:3px 8px}:host([scale=m]){--arcgis-item-share-summary-text-size:0.875rem;--arcgis-item-share-summary-spacing:1rem;--arcgis-item-share-summary-padding:7px}:host([scale=m][show-text]){--arcgis-item-share-summary-padding:7px 12px}:host([scale=l]){--arcgis-item-share-summary-text-size:1rem;--arcgis-item-share-summary-spacing:1rem;--arcgis-item-share-summary-padding:9px}:host([scale=l][show-text]){--arcgis-item-share-summary-padding:9px 16px}.wrapper{display:flex;align-items:center;background-color:var(--calcite-color-foreground-1);padding:var(--arcgis-item-share-summary-padding);border:1px solid var(--calcite-color-border-1);border-radius:calc(var(--arcgis-item-share-summary-spacing) + 0.5rem);font-size:var(--arcgis-item-share-summary-text-size)}.wrapper--button{cursor:pointer;outline-color:transparent;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;font-family:inherit;line-height:1}.wrapper--button:hover{background-color:var(--calcite-color-foreground-2)}.wrapper--button:focus{outline:2px solid var(--calcite-color-brand);outline-offset:2px}.icon{display:block;flex-shrink:0;flex-grow:0;width:var(--arcgis-item-share-summary-spacing);height:var(--arcgis-item-share-summary-spacing)}.text{font-weight:400;color:var(--calcite-color-text-1);font-size:var(--arcgis-item-share-summary-text-size);line-height:1;margin-inline-start:calc(var(--arcgis-item-share-summary-spacing) / 4)}.tooltip{margin:-1rem;width:18rem;padding-top:0.25rem;--calcite-color-foreground-1:var(--calcite-color-border-white)}.tooltip__section-header{margin:0px;background-color:var(--calcite-color-background);padding:0.75rem;font-size:0.875rem;font-weight:700;color:var(--calcite-color-text-2)}.tooltip__section{box-sizing:border-box;max-height:10rem;overflow:auto;background-color:var(--calcite-color-foreground-1);padding:0.75rem}.tooltip_status{margin:0px;padding:0px;font-size:0.875rem;color:var(--calcite-color-text-1)}.tooltip__groups{margin:0px;padding:0px}.tooltip__group{margin:0px;display:flex;align-items:center;padding-top:0.25rem;padding-bottom:0.25rem;padding-left:0px;padding-right:0px}.tooltip__group__avatar{flex-shrink:0}.tooltip__group__text{margin-inline-start:0.75rem;min-width:0px;flex:1 1 auto}.tooltip__group__title{margin:0px;display:block;overflow-wrap:break-word;padding:0px;font-size:0.875rem;font-weight:500;color:var(--calcite-color-text-1);line-height:1.35}.tooltip__group__description{margin:0px;display:block;padding:0px;font-size:0.75rem;font-weight:400;color:var(--calcite-color-text-3);line-height:1.35}"},5157:(e,t,r)=>{r.d(t,{D:()=>a,b:()=>i,s:()=>s});const i={xxs:320,xs:480,sm:640,md:768,lg:1024,xl:1280},a=960;function s(e){var t,r;return null!==(t=(r=e.state).resizeObserver)&&void 0!==t||(r.resizeObserver=new ResizeObserver(o)),e.state.resizeObserver}function o(e){e.forEach(e=>{if(e.contentRect.width>0){const t=new CustomEvent("arcgisBrowserResize",{detail:{width:e.contentRect.width,height:e.contentRect.height}});e.target.dispatchEvent(t)}})}},33317:(e,t,r)=>{r.d(t,{a:()=>o,g:()=>s});var i=r(37762),a=r(74174);function s(e){return(0,a.g)(e,"arcgis-group-browser")}const o=(0,i.c)({filters:{},type:"group-browser"}).state},36443:(e,t,r)=>{r.d(t,{a:()=>s,g:()=>o});var i=r(83692),a=r(41473);const s=async e=>{try{return{result:await(0,i.r)(`${(0,a.g)(e)}portals/self/subscriptionInfo`)}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}},o=async(e,t)=>await(0,i.f)(()=>s(e),"subscriptionType",(0,i.b)(t))},37378:(e,t,r)=>{function i(e){const t=e;return!(!(null==t?void 0:t.item)||!t.sublayer)}function a(e){const t=e;return!(!(null==t?void 0:t.item)||!t.task)}function s({item:e,sublayer:t,task:r,selectedItem:s}){var o,n,l;return a(s)&&r?(null==e?void 0:e.id)===(null===(o=s.item)||void 0===o?void 0:o.id)&&r===s.task:i(s)&&t?(null==e?void 0:e.id)===(null===(n=s.item)||void 0===n?void 0:n.id)&&t.id===(null===(l=s.sublayer)||void 0===l?void 0:l.id):(null==e?void 0:e.id)===s.id}function o({item:e,sublayer:t,task:r,selectedItems:i}){return(i||[]).some(i=>s({item:e,sublayer:t,task:r,selectedItem:i}))}function n({item:e,sublayer:t,task:r,selectedItems:i}){return(i||[]).filter(i=>!s({item:e,sublayer:t,task:r,selectedItem:i}))}function l({item:e,sublayer:t,task:r,selectedItems:i}){const a=r?{item:e,task:r}:t?{item:e,sublayer:t}:e;return o({item:e,sublayer:t,task:r,selectedItems:i})?[...i]:[...i,a]}function c({item:e,selectedItems:t}){return t.filter(t=>{var r;return(null===(r=t.item)||void 0===r?void 0:r.id)===(null==e?void 0:e.id)})}function d(e){return a(e)||i(e)?e.item:e}function p({selectedItems:e,items:t}){let r=!1;const s=e.map(e=>{const s=d(e),o=t.find(e=>e.id===s.id);return o&&(r=!0),function(e,t){return a(t)||i(t)?Object.assign(Object.assign({},t),{item:e}):e}(o,e)});return r?s:e}r.d(t,{a:()=>a,b:()=>i,d:()=>n,f:()=>c,g:()=>d,i:()=>o,s:()=>l,u:()=>p})},74174:(e,t,r)=>{r.d(t,{a:()=>s,b:()=>n,g:()=>c,i:()=>a,o:()=>o});var i=r(15332);const a=e=>"item-browser"===e.state.type,s=(e,t,r)=>{t.onChange("filters",t=>{t[e]&&t[e].value||r()})},o=(e,t)=>{e.onChange("preview",e=>{t()})},n=(e,t)=>{e.onChange("groupId",e=>{t()})},l=new Map;function c(e,t){const r=l.get(e);if(r)return r;const a=(0,i.c)(e,t);return a?(l.set(e,a.store),a.store):null}},80619:(e,t,r)=>{r.d(t,{I:()=>i,a:()=>a});const i=["folder","group","contentType"],a=99999},90075:(e,t,r)=>{r.d(t,{a:()=>c,g:()=>l});var i=r(4429),a=r(41473),s=r(94737),o=r(14270),n=r(83692);async function l(e,t,r){var i,s,l;const c=`${(0,a.g)(t)}content/items/${e.id}`,d=`${(0,a.g)(t)}content/users/${e.owner}/${e.ownerFolder?`${e.ownerFolder}/`:""}items/${e.id}`;try{const a=await(0,n.r)(c);if("admin"!==a.itemControl&&"update"!==a.itemControl){const a=await(0,o.a)(t,r,[e]);return a.error?{result:[]}:{result:null!==(s=null===(i=null==a?void 0:a.result)||void 0===i?void 0:i[e.id])&&void 0!==s?s:[]}}const p=await(0,n.r)(d);return{result:((null===(l=null==p?void 0:p.sharing)||void 0===l?void 0:l.groups)||[]).filter(e=>r.some(t=>t.id===e))}}catch(e){return{result:[]}}}async function c(e,t){if(!(null==e?void 0:e.length))return{result:[]};try{const r=[],n=100,l=`${(0,a.g)(t)}community/groups`;(0,i.g)(e,o.M).forEach(e=>{r.push((0,s.f)(l,{q:`id:(${e.join(" OR ")})`,num:n}))});return{result:(await Promise.all(r)).reduce((e,t)=>[...e,...t],[]).sort((e,t)=>{var r;return null===(r=e.title)||void 0===r?void 0:r.localeCompare(t.title)})}}catch(e){return{result:[]}}}}}]);