/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-138447.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_components_-138447"],{7179:(e,t,l)=>{l.r(t),l.d(t,{ArcgisMapConfigSmartMappingDefaultSymbol:()=>b});var a=l(73679),s=l(4395),o=(l(52797),l(20936)),i=(l(54312),l(44345),l(55448),l(34031),l(63438),l(5933),l(28927),l(83368),l(89704),l(5294),l(18423),l(96086),l(91813),l(21255),l(13078),l(21303),l(12627),l(56451),l(31521),l(23054),l(5077),l(23795),l(17902),l(87420),l(30161),l(81734),l(1225)),n=l(65595),d=(l(77462),l(49403),l(66617),l(10628),l(59640),l(64451),l(6176),l(10454),l(29614),l(94916),l(52554),l(2156),l(4038),l(49851),l(75054),l(15223),l(70169),l(47207),l(70852),l(48103),l(39423),l(85681),l(18444),l(42411),l(9767),l(38218),l(91914),l(86605),l(68196),l(440),l(46547),l(6238),l(7299),l(85643)),u=l(73801);const c=s.AH`.open{border-bottom:1px solid #e0e0e0}.block-section-padding{padding-top:6px}`;class b extends u.WF{constructor(){super(...arguments),this.blockSectionNode=(0,d._)(),this.defaultLabelNode=(0,d._)(),this.lastSettings={},this.smartMappingState=(0,n.u)(),this.arcgisSmartMappingDefaultSymbolBeforeToggle=(0,u.lh)(),this.arcgisSmartMappingDefaultSymbolChange=(0,u.lh)()}static{this.styles=c}async done(){this.lastSettings={},this.blockSectionNode.value&&(this.blockSectionNode.value.open=!1,this.blockSectionNode.value.classList.remove("open"))}load(){this.flowItemNode=(0,o.el)(this.el,"calcite-flow-item")}disconnectedCallback(){super.disconnectedCallback(),clearTimeout(this.labelChangeHandle)}handleDefaultSymbolToggle(e){const{smartMappingState:t}=this,{_messages:l}=t,a=(0,i.g)(t);if(e.currentTarget.open)if(this.blockSectionNode.value.classList.add("open"),this.lastSettings.defaultSymbol)a.defaultSymbol=this.lastSettings.defaultSymbol,a.defaultLabel=this.lastSettings.defaultLabel||l.defaultSymbol.other;else{const e=(0,i.e)(t);a.defaultSymbol=e,a.defaultLabel=a.defaultLabel||l.defaultSymbol.other,this.lastSettings.defaultSymbol=a.defaultSymbol,this.lastSettings.defaultLabel=a.defaultLabel}else this.blockSectionNode.value.classList.remove("open"),this.lastSettings.defaultSymbol=a.defaultSymbol,this.lastSettings.defaultLabel=a.defaultLabel,a.defaultSymbol=void 0,a.defaultLabel=void 0;(0,i.a4)(t),this.arcgisSmartMappingDefaultSymbolChange.emit(),this.requestUpdate()}handleLabelChange(){const{smartMappingState:e}=this,{_messages:t}=e,l=(0,i.g)(e);this.defaultLabelNode.value.value?l.defaultLabel=this.defaultLabelNode.value.value:(l.defaultLabel=t.defaultSymbol.other,this.defaultLabelNode.value.value=t.defaultSymbol.other),(0,i.a4)(e)}render(){const{smartMappingState:e}=this,{_messages:t}=e,l=(0,i.g)(e),a=(0,i.d)(e);let o=t.defaultSymbol.showDefaultSymbol;"color"===a?(0,i.c)(l,"color")||(o=t.defaultSymbol.showDefaultSymbolClassed):"size"===a&&((0,i.c)(l,"size")||(o=t.defaultSymbol.showDefaultSymbolClassed));const n=l.defaultSymbol;return s.qy`<calcite-block-section .text=${o} .expanded=${!!n} toggle-display=switch @calciteBlockSectionToggle=${e=>{this.arcgisSmartMappingDefaultSymbolBeforeToggle.emit(),this.handleDefaultSymbolToggle(e)}} ${(0,d.K)(this.blockSectionNode)}>${this.renderDefaultSymbolContent()}</calcite-block-section>`}renderDefaultSymbolContent(){const{smartMappingState:e}=this,t=(0,i.g)(e),l=t.defaultSymbol??this.lastSettings.defaultSymbol;return l?s.qy`<div class="symbol-button-content block-section-padding"><arcgis-map-config-smart-mapping-symbol-button .symbol=${l} type=default .popoverReferenceElement=${this.flowItemNode} @arcgisSmartMappingSymbolButtonSymbolChange=${()=>{this.lastSettings.defaultSymbol=t.defaultSymbol,this.requestUpdate()}}></arcgis-map-config-smart-mapping-symbol-button>${this.renderLabel()}</div>`:""}renderLabel(){const{smartMappingState:e}=this,{_messages:t}=e,l=(0,i.g)(e).defaultLabel||t.defaultSymbol.other;return s.qy`<calcite-label>${t.defaultSymbol.label}<calcite-input type=text .value=${l} @calciteInputChange=${()=>{clearTimeout(this.labelChangeHandle),this.defaultLabelNode.value.value?this.handleLabelChange():this.labelChangeHandle=setTimeout(()=>this.handleLabelChange(),3e3)}} @focusout=${e=>{e.preventDefault(),e.stopPropagation(),this.handleLabelChange()}} @keyup=${()=>{clearTimeout(this.labelChangeHandle),this.defaultLabelNode.value.value?this.handleLabelChange():this.labelChangeHandle=setTimeout(()=>this.handleLabelChange(),3e3)}} ${(0,d.K)(this.defaultLabelNode)}></calcite-input></calcite-label>`}}(0,a.c)("arcgis-map-config-smart-mapping-default-symbol",b)},65595:(e,t,l)=>{l.d(t,{c:()=>i,u:()=>n});var a=l(20936),s=l(1225),o=(l(54312),l(44345),l(55448),l(52797),l(34031),l(63438),l(5933),l(28927),l(83368),l(89704),l(5294),l(18423),l(96086),l(91813),l(21255),l(13078),l(21303),l(12627),l(56451),l(31521),l(23054),l(5077),l(23795),l(17902),l(87420),l(30161),l(81734),l(75698),l(10628),l(59640),l(64451),l(6176),l(83552));l(77462),l(49403),l(10281),l(83930),l(66617),l(10454),l(29614),l(94916),l(52554),l(2156),l(4038),l(49851),l(75054),l(15223),l(70169),l(47207),l(70852),l(48103),l(39423),l(85681),l(18444),l(42411),l(9767),l(38218),l(91914),l(86605),l(68196),l(440),l(46547),l(6238),l(7299);function i(e){e.selectedFields=[],e.layerFields=void 0,e.fields=void 0,e.hideLayerTitle=!1,e.supportsArcade=!1,e.stringFieldsCount=-1,e.dateFieldsCount=-1,e.numberFieldsCount=-1,e.containsFlow=!0,e.oneFeatureResponseStatus=s.s.MISSING,e.selectedAttribute=void 0,e.selectedAttributeText=void 0,e.selectedTypeValue=void 0,e.selectedValue=void 0,e.lastDefault=void 0,e.lastDefaults=void 0,e.dotColorSelected=void 0,e.backgroundStyleSelected=void 0,e.lastSettings=void 0,e.classedSymbolSelectedIdx=void 0,e.allUniqueValues=void 0,e.useFeatureReduction=void 0,e.symbolStylerConfig={},e.allowTimeSeriesConfiguration=!1,e.rasterInfo=void 0}function n(){const e=(0,o.Gk)(),t=e;e.manager.onLoad(()=>{t.smartMappingState=function(e,t){const l=d.get(e);if(l)return l;const s=(0,a.el)(e,t);return s&&"store"in s?(d.set(e,s.store),s.store):null}(e.el,"arcgis-map-config-smart-mapping")})}const d=new WeakMap}}]);