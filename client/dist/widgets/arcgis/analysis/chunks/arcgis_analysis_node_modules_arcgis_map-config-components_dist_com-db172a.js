/*! For license information please see arcgis_analysis_node_modules_arcgis_map-config-components_dist_com-db172a.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_map-config-components_dist_com-db172a"],{43214:(e,a,t)=>{t.r(a),t.d(a,{ArcgisMapConfigSmartMappingPanelsPredominanceSize:()=>m});var i=t(73679),n=t(4395),s=t(5294),r=t(1225),o=t(89989),c=(t(44345),t(55448),t(52797),t(34031),t(63438),t(5933),t(28927),t(83368),t(89704),t(18423),t(96086),t(91813),t(21255),t(13078),t(21303),t(12627),t(56451),t(31521),t(23054),t(5077),t(23795),t(17902),t(87420),t(30161),t(81734),t(65595)),l=(t(77462),t(49403),t(10281),t(83930),t(54312),t(66617),t(10628),t(59640),t(64451),t(6176),t(10454),t(29614),t(94916),t(52554),t(2156),t(4038),t(49851),t(75054),t(15223),t(70169),t(47207),t(70852),t(48103),t(39423),t(85681),t(18444),t(42411),t(9767),t(38218),t(91914),t(86605),t(68196),t(440),t(46547),t(6238),t(7299),t(85643)),p=t(73801);const d=n.AH`:host{width:100%;display:none}:host([selected]){display:flex}.flow-item{height:100%}`;class m extends p.WF{constructor(){super(...arguments),this.flowItemNode=(0,l._)(),this.tileNodes={},this.transparencyNode=(0,l._)(),this.smartMappingState=(0,c.u)(),this.menuOpen=!1,this.showBackButton=!1,this.selected=!1,this.arcgisSmartMappingPanelsPredominanceSizeBackClick=(0,p.lh)(),this.arcgisSmartMappingPanelsPredominanceSizeClose=(0,p.lh)(),this.arcgisSmartMappingPanelsPredominanceSizeError=(0,p.lh)(),this.smartMappingCompleteClose=(0,p.lh)()}static{this.properties={lastClick:16,menuOpen:5,showBackButton:5,selected:7,beforeBack:0}}static{this.styles=d}async setFocus(){await(this.flowItemNode.value?.setFocus())}load(){const{layer:e}=this.smartMappingState,a=(0,r.g)(this.smartMappingState);this.originalRendererJSON=a.toJSON(),this.originalFeatureReduction="featureReduction"in e&&e.featureReduction?s.clone(e.featureReduction):void 0;const t=(0,r.a9)(this.smartMappingState,this.el);"ARCGIS-MAP-CONFIG-SMART-MAPPING"===t.tagName?this.panelsParentNode=t.shadowRoot:this.panelsParentNode=t}async loaded(){requestAnimationFrame(async()=>await(this.flowItemNode.value?.setFocus())),this.scaleHandle=(0,o.w)(this.smartMappingState,this.flowItemNode.value,()=>this.smartMappingCompleteClose.emit("cancel"))}disconnectedCallback(){super.disconnectedCallback(),this.scaleHandle?.remove()}predominanceTileRefHandler(e){e&&(this.tileNodes.predominance=e)}sizeTileRefHandler(e){e&&(this.tileNodes.size=e)}handleDone(){this.arcgisSmartMappingPanelsPredominanceSizeClose.emit("save")}handleOptionsClick(e){const{panelsParentNode:a}=this;switch(e){case"size":{const e=(0,p.dN)(n.qy`<arcgis-map-config-smart-mapping-panels-size hide-transparency hide-rotation .showBackButton=${!0} selected @arcgisSmartMappingPanelsSizeClose=${()=>this.cleanUpFlowItem(e)} @arcgisSmartMappingPanelsSizeBackClick=${()=>this.cleanUpFlowItem(e)} @arcgisSmartMappingPanelsSizeError=${({detail:e})=>this.arcgisSmartMappingPanelsPredominanceSizeError.emit(e)} @arcgisSmartMappingPanelsSizeRegenerateRenderer=${()=>{this.requestUpdate(),this.transparencyNode.value&&(this.transparencyNode.value.manager.component.requestUpdate(),this.transparencyNode.value.updateStatistics())}}></arcgis-map-config-smart-mapping-panels-size>`);a.appendChild(e),this.selected=!1;break}case"predominance":{const e=(0,p.dN)(n.qy`<arcgis-map-config-smart-mapping-panels-predominance hide-transparency hide-rotation .showBackButton=${!0} selected @arcgisSmartMappingPanelsPredominanceClose=${()=>this.cleanUpFlowItem(e)} @arcgisSmartMappingPanelsPredominanceBackClick=${()=>this.cleanUpFlowItem(e)} @arcgisSmartMappingPanelsPredominanceError=${({detail:e})=>this.arcgisSmartMappingPanelsPredominanceSizeError.emit(e)} @arcgisSmartMappingPanelsPredominanceRegenerateRenderer=${()=>{this.requestUpdate(),this.transparencyNode.value&&(this.transparencyNode.value.manager.component.requestUpdate(),this.transparencyNode.value.updateStatistics())}}></arcgis-map-config-smart-mapping-panels-predominance>`);a.appendChild(e),this.selected=!1;break}}}cleanUpFlowItem(e){e.remove(),this.focusSelectedTile(),this.selected=!0}focusSelectedTile(){setTimeout(()=>requestAnimationFrame(async()=>await(this.tileNodes[this.lastClick]?.setFocus())),300)}render(){const{layer:e,hideLayerTitle:a,mapImageSublayer:t,_messages:i}=this.smartMappingState,s=a?void 0:t?.title??e.title;return this.el.classList.add("calcite-match-height"),n.qy`<calcite-flow-item class="flow-item" .heading=${i.panels.styleOptions} .description=${s} .closable=${(0,r.aa)(this.el)} .showBackButton=${this.showBackButton} .selected=${this.selected} @calciteFlowItemClose=${this.handleDone} @calciteFlowItemBack=${e=>{e.stopPropagation(),this.arcgisSmartMappingPanelsPredominanceSizeBackClick.emit()}} ${(0,l.K)(this.flowItemNode)}>${this.renderPredominanceTile()}${this.renderSizeTile()}${this.renderTransparency()}${this.renderRotation()}${this.renderDoneButton()}${this.renderCancelButton()}</calcite-flow-item>`}renderPredominanceTile(){return n.qy`<arcgis-map-config-smart-mapping-tile type=predominance @arcgisSmartMappingTileSelect=${()=>{this.lastClick="predominance",this.handleOptionsClick("predominance")}} @arcgisSmartMappingTileOptions=${()=>this.handleOptionsClick("predominance")} ${(0,l.K)(this.predominanceTileRefHandler)}></arcgis-map-config-smart-mapping-tile>`}renderSizeTile(){return n.qy`<arcgis-map-config-smart-mapping-tile type=size .selected=${"size"===this.lastClick} @arcgisSmartMappingTileSelect=${()=>{this.lastClick="size",this.handleOptionsClick("size")}} @arcgisSmartMappingTileOptions=${()=>this.handleOptionsClick("size")} ${(0,l.K)(this.sizeTileRefHandler)}></arcgis-map-config-smart-mapping-tile>`}renderTransparency(){const{smartMappingState:e}=this,a=(0,r.c)((0,r.g)(e),"opacity");return n.qy`<arcgis-map-config-smart-mapping-transparency .open=${!!a} @arcgisSmartMappingSymbolTransparencyError=${({detail:e})=>this.arcgisSmartMappingPanelsPredominanceSizeError.emit(e)} ${(0,l.K)(this.transparencyNode)}></arcgis-map-config-smart-mapping-transparency>`}renderRotation(){const{smartMappingState:e}=this,a=(0,r.c)((0,r.g)(e),"opacity"),t=(0,r.c)((0,r.g)(e),"rotation");return n.qy`<arcgis-map-config-smart-mapping-rotation .open=${!a&&!!t} @arcgisSmartMappingRotationError=${({detail:e})=>this.arcgisSmartMappingPanelsPredominanceSizeError.emit(e)}></arcgis-map-config-smart-mapping-rotation>`}renderDoneButton(){const{_messages:e}=this.smartMappingState;return n.qy`<calcite-button slot=footer .label=${e.done} @click=${this.handleDone} appearance=solid width=half>${e.done}</calcite-button>`}renderCancelButton(){const{smartMappingState:e}=this,{_messages:a}=e;return n.qy`<calcite-button slot=footer .label=${a.cancel} @click=${()=>{(0,r.a8)(e,this.originalRendererJSON,this.originalFeatureReduction),this.arcgisSmartMappingPanelsPredominanceSizeClose.emit("cancel")}} appearance=outline-fill width=half>${a.cancel}</calcite-button>`}}(0,i.c)("arcgis-map-config-smart-mapping-panels-predominance-size",m)},65595:(e,a,t)=>{t.d(a,{c:()=>r,u:()=>o});var i=t(20936),n=t(1225),s=(t(54312),t(44345),t(55448),t(52797),t(34031),t(63438),t(5933),t(28927),t(83368),t(89704),t(5294),t(18423),t(96086),t(91813),t(21255),t(13078),t(21303),t(12627),t(56451),t(31521),t(23054),t(5077),t(23795),t(17902),t(87420),t(30161),t(81734),t(75698),t(10628),t(59640),t(64451),t(6176),t(83552));t(77462),t(49403),t(10281),t(83930),t(66617),t(10454),t(29614),t(94916),t(52554),t(2156),t(4038),t(49851),t(75054),t(15223),t(70169),t(47207),t(70852),t(48103),t(39423),t(85681),t(18444),t(42411),t(9767),t(38218),t(91914),t(86605),t(68196),t(440),t(46547),t(6238),t(7299);function r(e){e.selectedFields=[],e.layerFields=void 0,e.fields=void 0,e.hideLayerTitle=!1,e.supportsArcade=!1,e.stringFieldsCount=-1,e.dateFieldsCount=-1,e.numberFieldsCount=-1,e.containsFlow=!0,e.oneFeatureResponseStatus=n.s.MISSING,e.selectedAttribute=void 0,e.selectedAttributeText=void 0,e.selectedTypeValue=void 0,e.selectedValue=void 0,e.lastDefault=void 0,e.lastDefaults=void 0,e.dotColorSelected=void 0,e.backgroundStyleSelected=void 0,e.lastSettings=void 0,e.classedSymbolSelectedIdx=void 0,e.allUniqueValues=void 0,e.useFeatureReduction=void 0,e.symbolStylerConfig={},e.allowTimeSeriesConfiguration=!1,e.rasterInfo=void 0}function o(){const e=(0,s.Gk)(),a=e;e.manager.onLoad(()=>{a.smartMappingState=function(e,a){const t=c.get(e);if(t)return t;const n=(0,i.el)(e,a);return n&&"store"in n?(c.set(e,n.store),n.store):null}(e.el,"arcgis-map-config-smart-mapping")})}const c=new WeakMap},89989:(e,a,t)=>{t.d(a,{w:()=>s});var i=t(54312),n=t(1225);t(44345),t(55448),t(52797),t(34031),t(63438),t(5933),t(28927),t(83368),t(89704),t(5294),t(18423),t(96086),t(91813),t(21255),t(13078),t(21303),t(12627),t(56451),t(31521),t(23054),t(5077),t(23795),t(17902),t(87420),t(30161),t(81734),t(75698),t(10628),t(59640),t(64451),t(6176),t(83552),t(77462),t(49403),t(10281),t(83930),t(66617),t(10454),t(29614),t(94916),t(52554),t(2156),t(4038),t(49851),t(75054),t(15223),t(70169),t(47207),t(70852),t(48103),t(39423),t(85681),t(18444),t(42411),t(9767),t(38218),t(91914),t(86605),t(68196),t(440),t(46547),t(6238),t(7299);function s(e,a,t){const{layer:s,mapView:o,useFeatureReduction:c}=e;return c&&"featureReduction"in s&&"binning"===s.featureReduction.type?i.watch(()=>o.scale,()=>{const i=s.featureReduction;o.scale<=i.maxScale&&!a.disabled?((0,n.f)(),function(e,a,t){const i=document.createElement("arcgis-map-config-smart-mapping-scale-alert-popover");i.smartMappingState=e,i.refElement=a,i.addEventListener("arcgisSmartMappingScaleAlertPopoverBack",()=>{r(),t()}),document.body.append(i)}(e,a,t),(0,n.h)(a,!0)):o.scale>i.maxScale&&a.disabled&&(r(),(0,n.h)(a,!1),a.setFocus())}):void 0}function r(){document.querySelectorAll("arcgis-map-config-smart-mapping-scale-alert-popover").forEach(e=>e.remove())}}}]);