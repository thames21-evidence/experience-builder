System.register(["jimu-core"],function(e,t){var r={};return{setters:[function(e){r.AbstractMessageAction=e.AbstractMessageAction,r.AllDataSourceTypes=e.AllDataSourceTypes,r.DataSourceManager=e.DataSourceManager,r.Immutable=e.Immutable,r.MessageType=e.MessageType,r.MutableStoreManager=e.MutableStoreManager,r.getAppStore=e.getAppStore}],execute:function(){e((()=>{var e={79244:e=>{"use strict";e.exports=r}},t={};function o(r){var a=t[r];if(void 0!==a)return a.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,o),n.exports}o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.p="";var a={};return o.p=window.jimuConfig.baseUrl,(()=>{"use strict";o.r(a),o.d(a,{default:()=>t,getDsByWidgetId:()=>r});var e=o(79244);class t extends e.AbstractMessageAction{filterMessageDescription(t){if(t.messageType===e.MessageType.DataRecordsSelectionChange){const o=e.DataSourceManager.getInstance(),a=r(t.widgetId,t.messageType);return null==a?void 0:a.some(t=>{const r=o.getDataSource(t.dataSourceId);return!(!r||"WEB_MAP"!==r.type&&"WEB_SCENE"!==r.type&&(r.type!==e.AllDataSourceTypes.FeatureLayer&&r.type!==e.AllDataSourceTypes.SubtypeSublayer||"esriGeometryPolyline"!==r.getGeometryType()))})}}filterMessageType(t){return t===e.MessageType.DataRecordsSelectionChange}filterMessage(e){var t;if((null===(t=null==e?void 0:e.records)||void 0===t?void 0:t.length)>0){const t=null==e?void 0:e.records.filter(e=>{var t,r;return"polyline"===(null===(r=null===(t=null==e?void 0:e.feature)||void 0===t?void 0:t.geometry)||void 0===r?void 0:r.type)});return t.length>0}return!1}onExecute(t){const r=t;return e.MutableStoreManager.getInstance().updateStateValue(this.widgetId,"selectedFeatureRecords",r.records),!0}getSettingComponentUri(e,t){return null}}function r(t,r){var o;const a=n(),l=null===(o=null==a?void 0:a.widgets)||void 0===o?void 0:o[t],u=(null==l?void 0:l.useDataSources)||(0,e.Immutable)([]),i=function(t){var r;const o=[],a=n(),l=null===(r=null==a?void 0:a.widgets)||void 0===r?void 0:r[t],u=null==l?void 0:l.useMapWidgetIds,i={};(null==u?void 0:u.length)>0&&u.forEach(e=>{var t;if(e){const r=n(),a=null===(t=null==r?void 0:r.widgets)||void 0===t?void 0:t[e],l=null==a?void 0:a.useDataSources;l&&l.forEach(e=>{var t;const r=null===(t=null==e?void 0:e.asMutable)||void 0===t?void 0:t.call(e,{deep:!0});r&&r.dataSourceId&&!i[r.dataSourceId]&&(i[r.dataSourceId]=!0,o.push(r))})}});return(0,e.Immutable)(o)}(t);return u.length>0?u:i}function n(){var t,r,o;return window.jimuConfig.isBuilder?null===(r=null===(t=(0,e.getAppStore)().getState())||void 0===t?void 0:t.appStateInBuilder)||void 0===r?void 0:r.appConfig:null===(o=(0,e.getAppStore)().getState())||void 0===o?void 0:o.appConfig}})(),a})())}}});