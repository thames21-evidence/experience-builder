define(["esri/geometry/SpatialReference","esri/geometry/support/geodesicUtils","esri/geometry/support/webMercatorUtils","esri/geometry/geometryEngine","esri/geometry/operators/intersectsOperator","esri/geometry/operators/distanceOperator","esri/geometry/operators/geodesicProximityOperator","esri/geometry/support/jsonUtils","esri/geometry/Geometry","esri/geometry/Polygon","esri/geometry/Polyline","esri/geometry/Point"],(e,t,o,r,n,i,s,p,l,a,c,g)=>({getDistance:async({selectedGeometryJson:r,intersectedGeometryJsonArray:l,distanceUnit:y})=>{s.isLoaded()||await s.load();const f=(e,t)=>{const o=s.getNearestCoordinate(e,t).coordinate;return x(t,o)},u=(e,t)=>{let o,r;const i=e.points;if(n.execute(e,t))return 0;for(let n=0;n<i.length;n++){const s=new g({x:i[n][0],y:i[n][1],spatialReference:e.spatialReference.toJSON()});o=f(t,s),(void 0===r||o<r)&&(r=o)}return r},d=(e,t)=>{let o,r;const n=e,i=n.points;for(let s=0;s<n.points.length;s++){const n=new g({x:i[s][0],y:i[s][1],spatialReference:e.spatialReference.toJSON()});o=R(n,t),(void 0===r||o<r)&&(r=o)}return r},h=(e,t)=>{let o,r;const n=e,i=n.points;for(let s=0;s<n.points.length;s++){const n=new g({x:i[s][0],y:i[s][1],spatialReference:e.spatialReference.toJSON()});o=w(n,t),(void 0===r||o<r)&&(r=o)}return r},m=(e,t)=>{let o,r;const i=e,s=t;if(n.execute(i,s))return 0;let p,l;for(p=0;p<i.rings.length;p++)for(l=0;l<i.rings[p].length;l++){const e=i.getPoint(p,l);o=R(e,s),(void 0===r||o<r)&&(r=o)}for(p=0;p<s.rings.length;p++)for(l=0;l<s.rings[p].length;l++){const e=s.getPoint(p,l);o=R(e,i),(void 0===r||o<r)&&(r=o)}return r},P=(e,t)=>{let o,r;const i=e,s=t;let p,l;if(n.execute(i,s))return 0;for(p=0;p<i.paths.length;p++)for(l=0;l<i.paths[p].length;l++){const e=i.getPoint(p,l);o=R(e,s),(void 0===r||o<r)&&(r=o)}for(p=0;p<s.rings.length;p++)for(l=0;l<s.rings[p].length;l++){const e=s.getPoint(p,l);o=w(e,i),(void 0===r||o<r)&&(r=o)}return r},v=(e,t)=>{let o,r,i,s;const p=e,l=t;if(n.execute(p,l))return 0;for(o=0;o<p.paths.length;o++)for(r=0;r<p.paths[o].length;r++){const e=p.getPoint(o,r);i=w(e,l),(void 0===s||i<s)&&(s=i)}for(o=0;o<l.paths.length;o++)for(r=0;r<l.paths[o].length;r++){const e=l.getPoint(o,r);i=w(e,p),(void 0===s||i<s)&&(s=i)}return s},R=(e,t)=>{let o,r;const n=e,i=t;return i?.rings?.length>0&&i.rings.forEach(e=>{const t={rings:[e],spatialReference:i.spatialReference},p=new a(t),l=s.getNearestCoordinate(p,n).coordinate;o=x(n,l),(void 0===r||o<r)&&(r=o)}),r},w=(e,t)=>{let o,r;const n=e,i=t;return i.paths?.length>0&&i.paths.forEach(e=>{const t={paths:[e],spatialReference:i.spatialReference},p=new c(t),l=s.getNearestCoordinate(p,n).coordinate;o=x(n,l),(void 0===r||o<r)&&(r=o)}),r},x=(e,o)=>{const r=t.geodesicDistance(e,o,"meters");return isNaN(r.distance)?-1:r.distance},N=(e,t)=>{const o="meters";return o===t?+e:+e/O(o)*O(t)},O=e=>{let t=1;switch(e){case"meters":t=1;break;case"kilometers":t=.001;break;case"feet":t=1/.3048;break;case"yards":t=1/.9144;break;case"miles":t=1/1609.344}return t},J=new e({wkid:4326}),k=[];for(let e=0;e<l.length;e++){let t=p.fromJSON(r),s=p.fromJSON(l[e]),a=-1;t&&s&&!n.execute(t,s)?o.canProject(t,J)&&o.canProject(s,J)?(t=o.project(t,J),s=o.project(s,J),"multipoint"===t.type?"point"===s.type?a=f(t,s):"polyline"===s.type?a=h(t,s):"polygon"===s.type?a=d(t,s):"multipoint"===s.type&&(a=u(t,s)):"point"===t.type?"point"===s.type?a=x(t,s):"polyline"===s.type?a=w(t,s):"polygon"===s.type?a=R(t,s):"multipoint"===s.type&&(a=f(s,t)):"polyline"===t.type?"point"===s.type?a=w(s,t):"polyline"===s.type?a=v(t,s):"polygon"===s.type?a=P(t,s):"multipoint"===s.type&&(a=h(s,t)):"polygon"===t.type&&("point"===s.type?a=R(s,t):"polyline"===s.type?a=P(s,t):"polygon"===s.type?a=m(t,s):"multipoint"===s.type&&(a=d(s,t))),y&&(a=N(a,y))):a=i.execute(t,s,{unit:y}):a=0,k.push(a)}return k}}));