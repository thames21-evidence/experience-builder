System.register(["jimu-core","jimu-arcgis","esri/geometry/Point"],function(e,t){var r={},n={},o={};return{setters:[function(e){r.AbstractMessageAction=e.AbstractMessageAction,r.DataSourceManager=e.DataSourceManager,r.MessageType=e.MessageType,r.MutableStoreManager=e.MutableStoreManager},function(){},function(e){o.default=e.default}],execute:function(){e((()=>{var e={62686:e=>{"use strict";e.exports=n},79244:e=>{"use strict";e.exports=r},90422:e=>{"use strict";e.exports=o}},t={};function a(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,a),o.exports}a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="";var s={};return a.p=window.jimuConfig.baseUrl,(()=>{"use strict";a.r(s),a.d(s,{default:()=>i});var e,t=a(79244);a(62686);!function(e){e.Closest="closest",e.Proximity="proximity",e.Summary="summary"}(e||(e={}));var r;!function(e){e[e.Feet=528e4]="Feet",e[e.Miles=1e3]="Miles",e[e.Kilometers=1609.344]="Kilometers",e[e.Meters=1609344]="Meters",e[e.Yards=176e4]="Yards"}(r||(r={}));var n=a(90422),o=function(e,t,r,n){return new(r||(r=Promise))(function(o,a){function s(e){try{u(n.next(e))}catch(e){a(e)}}function i(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(s,i)}u((n=n.apply(e,t||[])).next())})};class i extends t.AbstractMessageAction{filterMessageDescription(e){return e.messageType===t.MessageType.DataRecordsSelectionChange||e.messageType===t.MessageType.LocationChange}filterMessage(e){return!0}onExecute(e,r){return o(this,void 0,void 0,function*(){var r;if(e.type===t.MessageType.DataRecordsSelectionChange&&e.records.length>0){const n={},o={};let a;if(null===(r=e.records)||void 0===r||r.forEach(e=>{var t;a||(a=e.feature.geometry.spatialReference.toJSON());const r=null===(t=null==e?void 0:e.dataSource)||void 0===t?void 0:t.id;n[r]||(n[r]=[]),e.hasFullGeometry?n[r].push(e.feature.geometry):(o[r]||(o[r]=[]),o[r].push(e.getId()))}),Object.keys(o).length){const e=yield((e,r)=>{const n=[],o={},a=Object.keys(e);return new Promise(s=>{a.forEach(o=>{const a=t.DataSourceManager.getInstance().getDataSource(o),s={};s.objectIds=e[o],s.returnGeometry=!0,s.returnFullGeometry=!0,s.returnZ=!0,s.outSR=r,n.push(a.query(s))}),Promise.all(n).then(e=>{e.forEach((e,t)=>{if((null==e?void 0:e.records.length)>0){const r=[];e.records.forEach(e=>{r.push(e.feature.geometry)}),o[a[t]]=r}}),s(o)})})})(o,a);Object.keys(e).forEach(t=>{n[t]?n[t]=[...n[t],...e[t]]:n[t]=e[t]})}return t.MutableStoreManager.getInstance().updateStateValue(this.widgetId,"selectedIncidentLocation",n),!0}return!(e.type!==t.MessageType.LocationChange||!(null==e?void 0:e.point))&&(t.MutableStoreManager.getInstance().updateStateValue(this.widgetId,"currentLocation",new n.default(e.point)),!0)})}getSettingComponentUri(e,t){return null}}})(),s})())}}});