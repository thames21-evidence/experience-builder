System.register(["jimu-core/emotion","jimu-core","jimu-for-builder","jimu-ui","jimu-ui/advanced/setting-components","jimu-ui/basic/list-tree","jimu-arcgis","jimu-core/react"],function(e,i){var t={},a={},n={},s={},l={},o={},r={},d={};return{setters:[function(e){t.jsx=e.jsx,t.jsxs=e.jsxs},function(e){a.Immutable=e.Immutable,a.React=e.React,a.classNames=e.classNames,a.css=e.css,a.defaultMessages=e.defaultMessages,a.hooks=e.hooks,a.moduleLoader=e.moduleLoader,a.polished=e.polished,a.urlUtils=e.urlUtils},function(e){n.builderAppSync=e.builderAppSync,n.getAppConfigAction=e.getAppConfigAction},function(e){s.Button=e.Button,s.Checkbox=e.Checkbox,s.Icon=e.Icon,s.Label=e.Label,s.Link=e.Link,s.Loading=e.Loading,s.LoadingType=e.LoadingType,s.NumericInput=e.NumericInput,s.Radio=e.Radio,s.Select=e.Select,s.Switch=e.Switch,s.TextInput=e.TextInput,s.Tooltip=e.Tooltip,s.defaultMessages=e.defaultMessages},function(e){l.MapWidgetSelector=e.MapWidgetSelector,l.SettingRow=e.SettingRow,l.SettingSection=e.SettingSection,l.SidePopper=e.SidePopper},function(e){o.List=e.List,o.TreeItemActionType=e.TreeItemActionType},function(e){r.JimuMapViewComponent=e.JimuMapViewComponent,r.loadArcGISJSAPIModules=e.loadArcGISJSAPIModules},function(e){d.Fragment=e.Fragment}],execute:function(){e((()=>{var e={4108:e=>{"use strict";e.exports=n},14321:e=>{"use strict";e.exports=s},28996:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 2.125 14.334 14H1.667zm-.882-.47a1 1 0 0 1 1.765 0l6.333 11.874A1 1 0 0 1 14.334 15H1.667a1 1 0 0 1-.882-1.47zM8 4.874a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0L8.9 5.87a.905.905 0 0 0-.9-.995m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0" clip-rule="evenodd"></path></svg>'},31027:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M12 6.5c0 .527-.074 1.036-.212 1.518l.912.438a6.5 6.5 0 1 0-6.586 4.533l-.077-1.008A5.5 5.5 0 1 1 12 6.5m-9 0a3.5 3.5 0 0 0 2.88 3.445L5.8 8.901a2.501 2.501 0 1 1 3.194-2.224l.949.456A3.5 3.5 0 1 0 3 6.5M15.5 11l-5 1-3 4-1-9.5zm-5.57.094-1.702 2.269-.542-5.152 4.76 2.38z" clip-rule="evenodd"></path></svg>'},45508:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2M6.5 7.5A.5.5 0 0 1 7 7h1.5v4.5h1a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1h1V8H7a.5.5 0 0 1-.5-.5"></path><path fill="#000" fill-rule="evenodd" d="M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14" clip-rule="evenodd"></path></svg>'},51987:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTA4IiBoZWlnaHQ9IjcyIiB2aWV3Qm94PSIwIDAgMTA4IDcyIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KPHJlY3QgeD0iOCIgeT0iMjYiIHdpZHRoPSI5MiIgaGVpZ2h0PSIyMCIgZmlsbD0iIzI4MjgyOCIvPg0KPHJlY3QgeD0iMTIiIHk9IjMwIiB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIHJ4PSI2IiBmaWxsPSIjNkE2QTZBIi8+DQo8cmVjdCB4PSIzMyIgeT0iMzMiIHdpZHRoPSI0MiIgaGVpZ2h0PSI2IiBmaWxsPSIjNkE2QTZBIi8+DQo8cmVjdCB4PSI3OSIgeT0iMzAiIHdpZHRoPSIxIiBoZWlnaHQ9IjEyIiBmaWxsPSIjNDQ0NDQ0Ii8+DQo8cmVjdCB4PSIyOCIgeT0iMzAiIHdpZHRoPSIxIiBoZWlnaHQ9IjEyIiBmaWxsPSIjNDQ0NDQ0Ii8+DQo8cmVjdCB4PSI4NCIgeT0iMzAiIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgcng9IjYiIGZpbGw9IiM2QTZBNkEiLz4NCjwvc3ZnPg0K"},62686:e=>{"use strict";e.exports=r},62838:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m8.745 8 6.1 6.1a.527.527 0 1 1-.745.746L8 8.746l-6.1 6.1a.527.527 0 1 1-.746-.746l6.1-6.1-6.1-6.1a.527.527 0 0 1 .746-.746l6.1 6.1 6.1-6.1a.527.527 0 0 1 .746.746z"></path></svg>'},67386:e=>{"use strict";e.exports=t},68972:e=>{"use strict";e.exports=d},72872:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTA4IiBoZWlnaHQ9IjcyIiB2aWV3Qm94PSIwIDAgMTA4IDcyIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KPHJlY3QgeD0iOCIgeT0iOCIgd2lkdGg9IjkyIiBoZWlnaHQ9IjU2IiBmaWxsPSIjMjgyODI4Ii8+DQo8cmVjdCB4PSIxMyIgeT0iNDIiIHdpZHRoPSI4MSIgaGVpZ2h0PSIxIiBmaWxsPSIjNDQ0NDQ0Ii8+DQo8cmVjdCB4PSIyOSIgeT0iNTIiIHdpZHRoPSIxOCIgaGVpZ2h0PSIzIiBmaWxsPSIjNkE2QTZBIi8+DQo8cmVjdCB4PSIxMyIgeT0iNDgiIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgcng9IjYiIGZpbGw9IiM2QTZBNkEiLz4NCjxyZWN0IHg9IjEzIiB5PSIxNiIgd2lkdGg9IjYxIiBoZWlnaHQ9IjQiIGZpbGw9IiM2QTZBNkEiLz4NCjxyZWN0IHg9IjEzIiB5PSIyOCIgd2lkdGg9IjQ1IiBoZWlnaHQ9IjQiIGZpbGw9IiM2QTZBNkEiLz4NCjxyZWN0IHg9IjgyIiB5PSI0OCIgd2lkdGg9IjEyIiBoZWlnaHQ9IjEyIiByeD0iNiIgZmlsbD0iIzZBNkE2QSIvPg0KPC9zdmc+DQo="},79244:e=>{"use strict";e.exports=a},79298:e=>{"use strict";e.exports=l},98640:e=>{"use strict";e.exports=o}},i={};function c(t){var a=i[t];if(void 0!==a)return a.exports;var n=i[t]={exports:{}};return e[t](n,n.exports,c),n.exports}c.n=e=>{var i=e&&e.__esModule?()=>e.default:()=>e;return c.d(i,{a:i}),i},c.d=(e,i)=>{for(var t in i)c.o(i,t)&&!c.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:i[t]})},c.o=(e,i)=>Object.prototype.hasOwnProperty.call(e,i),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.p="";var m={};return c.p=window.jimuConfig.baseUrl,(()=>{"use strict";c.r(m),c.d(m,{__set_webpack_public_path__:()=>H,default:()=>B});var e,i,t,a=c(67386),n=c(79244),s=c(4108),l=c(14321),o=c(79298);!function(e){e.xy="XY",e.yx="YX"}(e||(e={})),function(e){e.classic="CLASSIC",e.modern="MODERN"}(i||(i={})),function(e){e.metric="METRIC",e.imperial="IMPERIAL"}(t||(t={}));const r={modern:"Modern",outputCoordinateSystem:"Output coordinate system",outputCoordinate:"Output coordinate system well-known ID ({wkid})",outputCoordinateHint:"Geographic coordinate systems and Projected coordinate systems are supported.",newCoordinate:"New coordinate system",configureCoordinate:"Configure coordinate system",displayOptions:"Display options",coordinateDecimal:"Number of decimal places for coordinates",altitudeDecimal:"Number of decimal places for altitude (3D)",showSeparators:"Show thousand separators",displayOrder:"Display order",loLaMode:"Longitude/Latitude (X, Y)",laLoMode:"Latitude/Longitude (Y, X)",datumTransformation:"Datum transformation ID ({wkid})",datumTransformationHint:"Geographic datum transformations are supported.",displayUnits:"Display units",elevationUnit:"Elevation unit (3D)",elevationHint:"Specify the unit for elevations for 3D scenes if available.",elevMeter:"Metric",elevMile:"Imperial",invalidWkidTips:"Please enter a valid coordinate system WKID.",invalidDatumWkidTips:"Please enter a valid datum transformation ID.",useTransformationForward:"Use transform forward",systemLabel:"System label"};var d=c(98640),u=c(62838),p=c.n(u),g=c(45508),x=c.n(g),I=function(e,i){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&i.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)i.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(t[a[n]]=e[a[n]])}return t};const h=e=>{const i=window.SVG,{className:t}=e,s=I(e,["className"]),l=(0,n.classNames)("jimu-icon jimu-icon-component",t);return i?(0,a.jsx)(i,Object.assign({className:l,src:x()},s)):(0,a.jsx)("svg",Object.assign({className:l},s))};var v=c(62686),j=c(28996),f=c.n(j),y=function(e,i){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&i.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)i.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(t[a[n]]=e[a[n]])}return t};const w=e=>{const i=window.SVG,{className:t}=e,s=y(e,["className"]),l=(0,n.classNames)("jimu-icon jimu-icon-component",t);return i?(0,a.jsx)(i,Object.assign({className:l,src:f()},s)):(0,a.jsx)("svg",Object.assign({className:l},s))};var S=c(68972);function b(e){return n.css`
    .system-config-panel {
      .wkid-link {
        cursor: pointer;
        color: ${n.polished.rgba(e.sys.color.primary.light,.8)};
        padding: 3px 2px;
        font-size: ${n.polished.rem(12)};
        text-decoration: none;
        &:hover {
          color: ${e.sys.color.primary.light};
        }
      }
      .system-name {
        font-style: italic;
        font-size: 12px;
        color: ${e.ref.palette.neutral[1e3]};
        margin-top: 5px;
        .invalid-tips {
          width: calc(100% - 20px);
          margin: 0 4px;
          color: ${e.sys.color.error.main}
        }
      }
    }
  `}function N(e){return n.css`
    .empty-placeholder {
      display: flex;
      flex-flow: column;
      justify-content: center;
      height: calc(100% - 255px);
      overflow: hidden;
      .empty-placeholder-inner {
        padding: 0px 20px;
        flex-direction: column;
        align-items: center;
        display: flex;
        .empty-placeholder-text {
          color: ${e.ref.palette.neutral[1e3]};
          font-size: ${n.polished.rem(14)};
          margin-top: 16px;
          text-align: center;
        }
        .empty-placeholder-icon {
          color: ${e.ref.palette.neutral[800]};
        }
      }
    }
    .arrange-style-container {
      .arrange_container {
        margin-top: 10px;
        display: flex;
        .jimu-btn {
          padding: 0;
          background: ${e.ref.palette.neutral[300]};
          &.active {
            border: 2px solid ${e.sys.color.primary.light};
          }
        }
      }
    }
    .setting-ui-unit-list-new {
      padding-top: ${n.polished.rem(8)};
    }
  `}const{useState:M,useEffect:T,useRef:k}=n.React,C=e=>{const{id:i,name:s,wkid:d,crs:c,displayUnit:m,elevationUnit:u,datumWkid:p,datumName:g,transformForward:x,datumWkid2:I,datumName2:j,transformForward2:f,mapInfo:y,mapInfo2:N,mapView:C,theme:D,wkidUtils:O,allDataLoaded:E,multiOptionsChange:R,onWkidChangeSave:L}=e,[P,A]=M(!1),[W,B]=M(!1),[H,Z]=M(!1),[U,G]=M(d),[z,Q]=M(p),[V,_]=M(I),[F,K]=M(!1),[J,Y]=M(!1),[$,X]=M(!1),[q,ee]=M(s),[ie,te]=M(null==c?void 0:c.name),ae=n.hooks.useTranslation(r,l.defaultMessages),ne=ae("outputCoordinateHint"),se=ae("datumTransformationHint"),le=ae("displayUnits"),oe=ae("elevationUnit"),re=ae("elevationHint"),de=ae("invalidWkidTips"),ce=ae("invalidDatumWkidTips"),me=ae("elevMeter"),ue=ae("elevMile"),pe=ae("default"),ge=ae("unitsInches"),xe=ae("unitsLabelFeet"),Ie=ae("unitsFoot_US"),he=ae("unitsLabelYards"),ve=ae("unitsLabelMiles"),je=ae("unitsLabelNauticalMiles"),fe=ae("unitsMillimeters"),ye=ae("unitsCentimeters"),we=ae("unitsLabelMeters"),Se=ae("unitsLabelKilometers"),be=ae("unitsDecimeters"),Ne=ae("unitsDecimalDegrees"),Me=ae("unitsDegreesDecimalMinutes"),Te=ae("unitsDegreeMinutesSeconds"),ke=ae("unitsMgrs"),Ce=ae("unitsUsng"),De=k(null);T(()=>{P||(0,v.loadArcGISJSAPIModules)(["esri/geometry/SpatialReference"]).then(e=>{[De.current]=e,A(!0)})},[]),T(()=>{G(d),ee(s),te(null==c?void 0:c.name),Q(p),_(I),P&&Oe(d)},[P,d,s,c,p,y,N,O]),T(()=>{K(!1)},[i]);const Oe=e=>{const i=null==y?void 0:y.wkid,t=null==N?void 0:N.wkid,a=De.current;if(!O)return;const{isSameSpheroid:n}=O;if(e){const s=new a({wkid:e});if(i&&!t){n(s,new a({wkid:i}))?B(!1):B(!0)}else if(i&&t){const e=new a({wkid:i}),l=new a({wkid:t}),o=n(e,l),r=n(e,s),d=n(l,s);o?r?(B(!1),Z(!1)):(B(!0),Z(!1)):!r&&d?(B(!0),Z(!1)):!d&&r?(B(!1),Z(!0)):(B(!0),Z(!0))}}},Ee=(0,a.jsx)(l.Link,{className:"wkid-link jimu-outline-inside",icon:!0,to:"https://developers.arcgis.com/rest/services-reference/enterprise/using-spatial-references.htm",target:"_blank",title:"WKID","aria-label":"WKID",children:"WKID"}),Re=(0,a.jsx)("div",{className:"w-100",children:(0,a.jsxs)("div",{className:"p-1 d-flex justify-content-between",children:[(0,a.jsx)("div",{className:"tip-text",children:ae("outputCoordinate",{wkid:Ee})}),(0,a.jsx)(l.Tooltip,{title:ne,showArrow:!0,placement:"left",children:(0,a.jsx)(l.Button,{icon:!0,type:"tertiary",className:"d-inline jimu-outline-inside",disableHoverEffect:!0,disableRipple:!0,children:(0,a.jsx)(h,{})})})]})}),Le=(0,a.jsx)("div",{className:"w-100",children:(0,a.jsxs)("div",{className:"p-1 d-flex justify-content-between",children:[(0,a.jsx)("div",{className:"tip-text",children:oe}),(0,a.jsx)(l.Tooltip,{title:re,showArrow:!0,placement:"left",children:(0,a.jsx)(l.Button,{icon:!0,type:"tertiary",className:"d-inline jimu-outline-inside",disableHoverEffect:!0,disableRipple:!0,children:(0,a.jsx)(h,{})})})]})}),Pe=(0,a.jsx)("div",{className:"w-100",children:(0,a.jsxs)("div",{className:"p-1 d-flex justify-content-between",children:[(0,a.jsx)("div",{className:"tip-text",children:ae("datumTransformation",{wkid:Ee})}),(0,a.jsx)(l.Tooltip,{title:se,showArrow:!0,placement:"left",children:(0,a.jsx)(l.Button,{icon:!0,type:"tertiary",className:"d-inline jimu-outline-inside",disableHoverEffect:!0,disableRipple:!0,children:(0,a.jsx)(h,{})})})]})});return(0,a.jsx)("div",{className:"w-100 h-100",css:b(D),children:(0,a.jsx)("div",{className:"w-100 h-100 system-config-panel",children:E?(0,a.jsxs)(S.Fragment,{children:[(0,a.jsxs)(o.SettingSection,{className:"pt-0",children:[(0,a.jsx)(o.SettingRow,{flow:"wrap",label:Re,truncateLabel:!1,className:"mt-0",children:(0,a.jsx)(l.NumericInput,{size:"sm",className:"w-100",value:U,precision:0,min:0,onChange:e=>{G(e)},onAcceptValue:e=>{if(!F&&d===e)return;if(!O)return;const{wkidLookup:t,isValidWkid:a}=O,n=""===e?d:e,s=a(n),l=t(n),o=null==l?void 0:l.name;i?s?(K(!1),Oe(n),G(n),ee(o),te(o),R({wkid:n,name:o,crs:l,displayUnit:"",datumWkid:"",datumName:"",datumWkid2:"",datumName2:""})):K(!0):s?(K(!1),ee(o),te(o),L(n,l)):K(!0)},showHandlers:!1,"aria-describedby":"output-system-name","aria-label":ae("outputCoordinate",{wkid:"WKID"})})}),(0,a.jsx)("div",{id:"output-system-name",className:"text-break system-name d-flex align-items-center",children:F?(0,a.jsxs)(S.Fragment,{children:[(0,a.jsx)(w,{color:D.sys.color.error.main}),(0,a.jsx)("div",{className:"invalid-tips",children:de})]}):ie})]}),(0,a.jsx)(o.SettingSection,{title:ae("label"),children:(0,a.jsx)(o.SettingRow,{children:(0,a.jsx)(l.TextInput,{size:"sm",type:"text",className:"w-100",value:q,onChange:e=>{const i=e.target.value;ee(i)},onAcceptValue:e=>{(e=""===(e=null==e?void 0:e.trim())?s:e)!==q&&ee(e),R({name:e})},"aria-label":ae("label")})})}),(0,a.jsxs)(o.SettingSection,{children:[(0,a.jsx)(o.SettingRow,{flow:"wrap",label:le,children:(0,a.jsx)(l.Select,{size:"sm",value:m,onChange:e=>{const i=e.target.value;m!==i&&R({displayUnit:i})},"aria-label":le,disabled:!U||F,children:(()=>{var e,i;const t=[(0,a.jsx)("option",{value:"",children:pe},"Default"),(0,a.jsx)("option",{value:"INCHES",children:ge},"INCHES"),(0,a.jsx)("option",{value:"FOOT",children:xe},"FOOT"),(0,a.jsx)("option",{value:"FOOT_US",children:Ie},"FOOT_US"),(0,a.jsx)("option",{value:"YARDS",children:he},"YARDS"),(0,a.jsx)("option",{value:"MILES",children:ve},"MILES"),(0,a.jsx)("option",{value:"NAUTICAL_MILES",children:je},"NAUTICAL_MILES"),(0,a.jsx)("option",{value:"MILLIMETERS",children:fe},"MILLIMETERS"),(0,a.jsx)("option",{value:"CENTIMETERS",children:ye},"CENTIMETERS"),(0,a.jsx)("option",{value:"METER",children:we},"METER"),(0,a.jsx)("option",{value:"KILOMETERS",children:Se},"KILOMETERS"),(0,a.jsx)("option",{value:"DECIMETERS",children:be},"DECIMETERS"),(0,a.jsx)("option",{value:"DECIMAL_DEGREES",children:Ne},"DECIMAL_DEGREES"),(0,a.jsx)("option",{value:"DEGREES_DECIMAL_MINUTES",children:Me},"DEGREES_DECIMAL_MINUTES"),(0,a.jsx)("option",{value:"DEGREE_MINUTE_SECONDS",children:Te},"DEGREE_MINUTE_SECONDS"),(0,a.jsx)("option",{value:"MGRS",children:ke},"MGRS"),(0,a.jsx)("option",{value:"USNG",children:Ce},"USNG")],n=[(0,a.jsx)("option",{value:"",children:pe},"Default")].concat(t.slice(12)),s=t.slice(0,12),l=parseInt(U),o=De.current;if(!o)return t;const r=new o({wkid:l});if(l===(null===(i=null===(e=null==C?void 0:C.view)||void 0===e?void 0:e.spatialReference)||void 0===i?void 0:i.wkid)){return r.isWebMercator?t:4326===l||r.isGeographic?n:s}return r.isGeographic?n:t})()})}),(0,a.jsx)(o.SettingRow,{flow:"wrap",label:Le,truncateLabel:!1,children:(0,a.jsxs)("div",{role:"radiogroup",className:"mb-4","aria-label":oe,children:[(0,a.jsxs)(l.Label,{className:"d-flex align-items-center",children:[(0,a.jsx)(l.Radio,{style:{cursor:"pointer"},name:"elevationUnitType",className:"mr-2",checked:u===t.metric,onChange:()=>{R({elevationUnit:t.metric})},disabled:!U||F}),me]}),(0,a.jsxs)(l.Label,{className:"d-flex align-items-center",children:[(0,a.jsx)(l.Radio,{style:{cursor:"pointer"},name:"elevationUnitType",className:"mr-2",checked:u===t.imperial,onChange:()=>{R({elevationUnit:t.imperial})},disabled:!U||F}),ue]})]})})]}),(W||H)&&(0,a.jsxs)(o.SettingSection,{children:[(0,a.jsx)(o.SettingRow,{flow:"wrap",label:Pe,truncateLabel:!1}),W&&(0,a.jsxs)(S.Fragment,{children:[(0,a.jsxs)(o.SettingRow,{flow:"wrap",className:"mt-0",children:[W&&H&&(0,a.jsx)("div",{children:null==y?void 0:y.title}),(0,a.jsx)(l.NumericInput,{size:"sm",className:"w-100",value:z,precision:0,min:0,onChange:e=>{Q(e)},onAcceptValue:e=>{if(p===e)return;const i=e,{isValidDatumWkid:t,getDatumSRLabel:a}=O;if(t(i)){Y(!1);const e=a(i);R({datumWkid:i,datumName:e})}else Y(!0),R({datumWkid:"",datumName:""})},showHandlers:!1,"aria-describedby":"datum-transformation-1","aria-label":ae("datumTransformation",{wkid:"WKID"}),disabled:!U||F})]}),J?(0,a.jsxs)("div",{id:"datum-transformation-1",className:"text-break system-name d-flex align-items-center",children:[(0,a.jsx)(w,{color:D.sys.color.error.main}),(0,a.jsx)("div",{className:"invalid-tips",children:ce})]}):(0,a.jsxs)(S.Fragment,{children:[(0,a.jsx)("div",{id:"datum-transformation-1",className:"text-break system-name d-flex align-items-center",children:(0,a.jsx)("div",{className:"w-100",children:g})}),g&&(0,a.jsxs)(l.Label,{className:"d-flex align-items-center mt-2",children:[(0,a.jsx)(l.Checkbox,{checked:x,className:"mr-1",onChange:e=>{R({transformForward:e.target.checked})}}),ae("useTransformationForward")]})]})]}),H&&(0,a.jsxs)(S.Fragment,{children:[(0,a.jsxs)(o.SettingRow,{flow:"wrap",className:"mt-0",children:[W&&H&&(0,a.jsx)("div",{children:null==N?void 0:N.title}),(0,a.jsx)(l.NumericInput,{size:"sm",className:"w-100",value:V,precision:0,min:0,onChange:e=>{_(e)},onAcceptValue:e=>{if(p===e)return;const i=e,{isValidDatumWkid:t,getDatumSRLabel:a}=O;if(t(i)){X(!1);const e=a(i);R({datumWkid2:i,datumName2:e})}else X(!0),R({datumWkid2:"",datumName2:""})},showHandlers:!1,"aria-describedby":"datum-transformation-2","aria-label":ae("datumTransformation",{wkid:"WKID"}),disabled:!U||F})]}),$?(0,a.jsxs)("div",{id:"datum-transformation-2",className:"text-break system-name d-flex align-items-center",children:[(0,a.jsx)(w,{color:D.sys.color.error.main}),(0,a.jsx)("div",{className:"invalid-tips",children:ce})]}):(0,a.jsxs)(S.Fragment,{children:[(0,a.jsx)("div",{id:"datum-transformation-2",className:"text-break system-name d-flex align-items-center",children:(0,a.jsx)("div",{className:"w-100",children:j})}),j&&(0,a.jsxs)(l.Label,{className:"d-flex align-items-center mt-2",children:[(0,a.jsx)(l.Checkbox,{checked:f,className:"mr-1",onChange:e=>{R({transformForward2:e.target.checked})}}),ae("useTransformationForward")]})]})]})]})]}):(0,a.jsx)(l.Loading,{type:l.LoadingType.Secondary})})})};var D=c(31027),O=c.n(D),E=function(e,i){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&i.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)i.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(t[a[n]]=e[a[n]])}return t};const R=e=>{const i=window.SVG,{className:t}=e,s=E(e,["className"]),l=(0,n.classNames)("jimu-icon jimu-icon-component",t);return i?(0,a.jsx)(i,Object.assign({className:l,src:O()},s)):(0,a.jsx)("svg",Object.assign({className:l},s))},{useState:L,useEffect:P,useRef:A}=n.React,W={id:"",name:"",wkid:"",displayUnit:"",elevationUnit:t.metric,datumWkid:"",datumName:""},B=m=>{var u;const{id:g,theme:x,onSettingChange:I,config:h,useMapWidgetIds:j}=m,{coordinateSystem:f,showSeparators:y,coordinateDecimal:w,altitudeDecimal:b,displayOrder:M,widgetStyle:T,mapInfo:k,mapInfo2:D}=h,O=A(null),[E,B]=L(!1),[H,Z]=L(null),[U,G]=L(void 0),[z,Q]=L(void 0),[V,_]=L(!1),[F,K]=L(!1),J=n.hooks.useTranslation(r,l.defaultMessages,n.defaultMessages),Y=J("selectMapWidget"),$=J("classic"),X=J("modern"),q=J("outputCoordinateSystem"),ee=J("newCoordinate"),ie=J("remove"),te=J("configureCoordinate"),ae=J("displayOptions"),ne=J("coordinateDecimal"),se=J("altitudeDecimal"),le=J("showSeparators"),oe=J("displayOrder"),re=J("loLaMode"),de=J("laLoMode"),ce=J("selectMapHint"),me=J("style"),ue=A(void 0),pe=A(null),ge=window.isExpressBuilder;P(()=>{(null==j?void 0:j.length)>0&&!V&&n.moduleLoader.loadModule("jimu-core/wkid").then(e=>{pe.current=e,_(!0)})},[j]),P(()=>{j&&V&&xe(z)},[V,z,j]);const xe=e=>{var i,t,a,n,s,l,o,r,d,c,m,u;if(!e)return;const p=Object.keys(e);if(p.length>0){K(!0);const{getSRLabel:g,getCSUnit:x}=pe.current,I=null===(i=null==e?void 0:e[p[0]])||void 0===i?void 0:i.view,h=null===(t=null==e?void 0:e[p[1]])||void 0===t?void 0:t.view,v=null===(a=null==I?void 0:I.spatialReference)||void 0===a?void 0:a.wkid,j=null===(n=null==h?void 0:h.spatialReference)||void 0===n?void 0:n.wkid,f=null===(l=null===(s=null==I?void 0:I.map)||void 0===s?void 0:s.portalItem)||void 0===l?void 0:l.id,y=null===(r=null===(o=null==h?void 0:h.map)||void 0===o?void 0:o.portalItem)||void 0===r?void 0:r.id;if(f===(null==k?void 0:k.id)&&y===(null==D?void 0:D.id))return;const w=null===(c=null===(d=null==I?void 0:I.map)||void 0===d?void 0:d.portalItem)||void 0===c?void 0:c.title,S=null===(u=null===(m=null==h?void 0:h.map)||void 0===m?void 0:m.portalItem)||void 0===u?void 0:u.title;Ie({mapInfo:{id:f,title:w,wkid:v,label:g(v),csUnit:x(v)},mapInfo2:{id:y,title:S,wkid:j,label:g(j),csUnit:x(j)}})}},Ie=e=>{const i=h.set("mapInfo",e.mapInfo).set("mapInfo2",e.mapInfo2);I({id:g,config:i})},he=()=>{B(!1),ue.current=void 0},ve=(e,i=!1)=>{((e,i=!1)=>{let t;t=i?O.current.getElementsByClassName("add-table-btn")[0]:O.current.getElementsByClassName("jimu-tree-item__body")[e],Z(t)})(e,i),e===ue.current?(B(!E),ue.current=void 0):(B(!0),ue.current=e)},je=()=>{const e=f.length>0?(()=>{const e=f.map(e=>{var i;return null===(i=e.id)||void 0===i?void 0:i.split("-").reverse()[0]});return e.length>0?Math.max.apply(null,e):0})():0;return`system-${e+1}`},fe=(e,i,a)=>{var s;const l=je(),o={id:l,name:null!==(s=null==i?void 0:i.name)&&void 0!==s?s:l,wkid:e,crs:i,displayUnit:"",elevationUnit:t.metric,datumWkid:"",datumName:""};let r;if(f[ue.current]){const e=f.asMutable({deep:!0});e.splice(ue.current,1,o),r=(0,n.Immutable)(e)}else r=f.concat([(0,n.Immutable)(o)]);ye("coordinateSystem",r)},ye=(e,i)=>{if(i===h[e])return;const t=h.set(e,i);I({id:g,config:t})},we=e=>{e!==T&&ye("widgetStyle",e),e===i.classic?(0,s.getAppConfigAction)().editWidgetProperty(m.id,"offPanel",!0).exec():(0,s.getAppConfigAction)().editWidgetProperty(m.id,"offPanel",!1).exec()},Se=f.length,be=(null==j?void 0:j.length)>0,Ne={overrideItemBlockInfo:({itemBlockInfo:e},i)=>({name:d.TreeItemActionType.RenderOverrideItem,children:[{name:d.TreeItemActionType.RenderOverrideItemDroppableContainer,children:[{name:d.TreeItemActionType.RenderOverrideItemDraggableContainer,children:[{name:d.TreeItemActionType.RenderOverrideItemBody,children:[{name:d.TreeItemActionType.RenderOverrideItemMainLine,children:[{name:d.TreeItemActionType.RenderOverrideItemDragHandle},{name:d.TreeItemActionType.RenderOverrideItemIcon,autoCollapsed:!0},{name:d.TreeItemActionType.RenderOverrideItemTitle},{name:d.TreeItemActionType.RenderOverrideItemCommands}]}]}]}]}]})};return(0,a.jsxs)("div",{className:"widget-setting-coordinates jimu-widget-setting",css:N(x),children:[(0,a.jsx)(o.SettingSection,{title:Y,children:(0,a.jsx)(o.SettingRow,{children:(0,a.jsx)(o.MapWidgetSelector,{onSelect:e=>{I({id:g,useMapWidgetIds:e})},useMapWidgetIds:j,"aria-describedby":"coordinates-blank-msg"})})}),!be&&!ge&&(0,a.jsx)("div",{className:"empty-placeholder w-100",children:(0,a.jsxs)("div",{className:"empty-placeholder-inner",children:[(0,a.jsx)("div",{className:"empty-placeholder-icon",children:(0,a.jsx)(R,{size:48})}),(0,a.jsx)("div",{className:"empty-placeholder-text",id:"coordinates-blank-msg",children:ce})]})}),be&&(0,a.jsxs)(S.Fragment,{children:[(0,a.jsx)(o.SettingSection,{className:"arrange-style-container",title:me,role:"group","aria-label":me,children:(0,a.jsxs)(o.SettingRow,{className:"arrange_container",children:[(0,a.jsx)(l.Tooltip,{title:$,placement:"bottom",children:(0,a.jsx)(l.Button,{onClick:()=>{we(i.classic)},icon:!0,size:"sm",type:"tertiary",active:T===i.classic,"aria-pressed":T===i.classic,children:(0,a.jsx)(l.Icon,{autoFlip:!0,width:109,height:70,icon:c(51987)})})}),(0,a.jsx)(l.Tooltip,{title:X,placement:"bottom",children:(0,a.jsx)(l.Button,{onClick:()=>{we(i.modern)},className:"ml-2",icon:!0,size:"sm",type:"tertiary",active:T===i.modern,"aria-pressed":T===i.modern,children:(0,a.jsx)(l.Icon,{autoFlip:!0,width:109,height:70,icon:c(72872)})})})]})}),(0,a.jsx)(o.SettingSection,{title:q,role:"group","aria-label":q,children:(0,a.jsxs)("div",{ref:O,children:[(0,a.jsx)(o.SettingRow,{children:(0,a.jsx)(l.Button,{className:"w-100 text-default add-table-btn",type:"primary",onClick:()=>{ve(Se,!0)},title:ee,children:(0,a.jsx)("div",{className:"w-100 px-2 text-truncate",children:ee})})}),(0,a.jsx)(o.SettingRow,{children:(0,a.jsxs)("div",{className:"setting-ui-unit-list w-100",children:[!!Se&&(0,a.jsx)(d.List,Object.assign({className:"setting-ui-unit-list-existing",itemsJson:Array.from(f).map((e,i)=>({itemStateDetailContent:e,itemKey:`${i}`,itemStateTitle:e.name,itemStateChecked:i===ue.current,itemStateCommands:[{label:ie,iconProps:()=>({icon:p(),size:12}),action:()=>{(e=>{ue.current===e&&he();const i=h.coordinateSystem.asMutable({deep:!0});i.splice(e,1),ye("coordinateSystem",i),ue.current>e&&ue.current--,s.builderAppSync.publishChangeWidgetStatePropToApp({widgetId:g,propKey:"removeLayerFlag",value:!0})})(i)}}]})),dndEnabled:!0,onUpdateItem:(e,i)=>{const{itemJsons:t}=i.props,[a,n]=t;(e=>{const i=e.map(e=>e.itemStateDetailContent);ye("coordinateSystem",i)})(n,a.itemKey)},onClickItemBody:(e,i)=>{const{itemJsons:[t]}=i.props;ve(+t.itemKey)}},Ne)),Se===ue.current&&E&&(0,a.jsx)(d.List,Object.assign({className:"setting-ui-unit-list-new",itemsJson:[{name:"......"}].map((e,i)=>({itemStateDetailContent:e,itemKey:`${ue.current}`,itemStateChecked:!0,itemStateTitle:e.name,itemStateCommands:[]})),dndEnabled:!1,renderOverrideItemDetailToggle:()=>""},Ne))]})})]})}),(0,a.jsxs)(o.SettingSection,{title:ae,role:"group","aria-label":ae,children:[(0,a.jsx)(o.SettingRow,{flow:"wrap",label:ne,children:(0,a.jsx)(l.NumericInput,{size:"sm",value:w,precision:0,min:0,max:10,onChange:e=>{ye("coordinateDecimal",e)},"aria-label":ne,className:"w-100"})}),(0,a.jsx)(o.SettingRow,{flow:"wrap",label:se,children:(0,a.jsx)(l.NumericInput,{size:"sm",value:b,precision:0,min:0,max:10,onChange:e=>{ye("altitudeDecimal",e)},"aria-label":se,className:"w-100"})}),(0,a.jsx)(o.SettingRow,{tag:"label",label:le,children:(0,a.jsx)(l.Switch,{className:"can-x-switch",checked:y,"data-key":"showSeparators",onChange:e=>{ye("showSeparators",e.target.checked)}})}),(0,a.jsx)(o.SettingRow,{flow:"wrap",label:oe,children:(0,a.jsxs)("div",{role:"radiogroup",className:"mb-4","aria-label":oe,children:[(0,a.jsxs)(l.Label,{className:"d-flex align-items-center",children:[(0,a.jsx)(l.Radio,{style:{cursor:"pointer"},name:"displayOrderType",className:"mr-2",checked:M===e.xy,onChange:()=>{ye("displayOrder",e.xy)}}),re]}),(0,a.jsxs)(l.Label,{className:"d-flex align-items-center",children:[(0,a.jsx)(l.Radio,{style:{cursor:"pointer"},name:"displayOrderType",className:"mr-2",checked:M===e.yx,onChange:()=>{ye("displayOrder",e.yx)}}),de]})]})})]})]}),(0,a.jsx)(v.JimuMapViewComponent,{useMapWidgetId:null==j?void 0:j[0],onActiveViewChange:e=>{G(e)},onViewsCreate:e=>{Q(e)}}),(0,a.jsx)(o.SidePopper,{position:"right",title:te,isOpen:E&&!n.urlUtils.getAppIdPageIdFromUrl().pageId,toggle:he,trigger:null==O?void 0:O.current,backToFocusNode:H,children:(0,a.jsx)(C,Object.assign({},null!==(u=f.asMutable({deep:!0})[ue.current])&&void 0!==u?u:W,{allDataLoaded:F,useMapWidgetIds:j,theme:x,multiOptionsChange:e=>{const i=f[ue.current];if(i){const t=h.setIn(["coordinateSystem",ue.current.toString()],Object.assign(Object.assign({},i),e));I({id:g,config:t})}},onWkidChangeSave:(e,i)=>{f.length===ue.current&&fe(e,i)},onClose:he,mapView:U,wkidUtils:pe.current,mapInfo:k,mapInfo2:D}))})]})};function H(e){c.p=e}})(),m})())}}});