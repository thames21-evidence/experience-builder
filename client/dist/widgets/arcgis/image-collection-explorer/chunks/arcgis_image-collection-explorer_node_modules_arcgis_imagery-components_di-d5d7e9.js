/*! For license information please see arcgis_image-collection-explorer_node_modules_arcgis_imagery-components_di-d5d7e9.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_image-collection-explorer_node_modules_arcgis_imagery-components_di-d5d7e9"],{4415:(t,e,s)=>{s.d(e,{t:()=>r});var i=s(4345);const r=new class{constructor(){this.cache=new Map,this.inflightJobs=new Map,this.queue=[],this.processing=!1}add(t,e){const s=this.cache.get(t);s&&s!==e&&URL.revokeObjectURL(s),this.cache.set(t,e)}clear(){for(const t of this.cache.values())URL.revokeObjectURL(t);this.cache.clear()}fetchOrGet(t){const e=this.cache.get(t);if(e)return Promise.resolve(e);const s=this.inflightJobs.get(t);if(s)return s;const r=new Promise(e=>{this.queue.push(async()=>{try{const s=await(0,i.default)(t,{responseType:"blob"});if(s?.data){const i=URL.createObjectURL(s.data);this.add(t,i),e(i)}else e("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8Xw8AAoMBgF6k6XkAAAAASUVORK5CYII=")}catch{e("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8Xw8AAoMBgF6k6XkAAAAASUVORK5CYII=")}finally{this.inflightJobs.delete(t)}}),this.processQueue()});return this.inflightJobs.set(t,r),r}async processQueue(){if(!this.processing){for(this.processing=!0;this.queue.length>0;)await this.queue.shift()();this.processing=!1}}}},7889:(t,e,s)=>{s.r(e),s.d(e,{ArcgisImageryItemThumbnail:()=>A});var i=s(3074),r=s(1925),h=s(2288),a=s(4742);const n=Symbol();class o{get taskComplete(){return this.t||(1===this.i?this.t=new Promise((t,e)=>{this.o=t,this.h=e}):3===this.i?this.t=Promise.reject(this.l):this.t=Promise.resolve(this.u)),this.t}constructor(t,e,s){this.p=0,this.i=0,(this._=t).addController(this);const i="object"==typeof e?e:{task:e,args:s};this.v=i.task,this.j=i.args,this.m=i.argsEqual??c,this.k=i.onComplete,this.A=i.onError,this.autoRun=i.autoRun??!0,"initialValue"in i&&(this.u=i.initialValue,this.i=2,this.O=this.T?.())}hostUpdate(){!0===this.autoRun&&this.S()}hostUpdated(){"afterUpdate"===this.autoRun&&this.S()}T(){if(void 0===this.j)return;const t=this.j();if(!Array.isArray(t))throw Error("The args function must return an array");return t}async S(){const t=this.T(),e=this.O;this.O=t,t===e||void 0===t||void 0!==e&&this.m(e,t)||await this.run(t)}async run(t){let e,s;t??=this.T(),this.O=t,1===this.i?this.q?.abort():(this.t=void 0,this.o=void 0,this.h=void 0),this.i=1,"afterUpdate"===this.autoRun?queueMicrotask(()=>this._.requestUpdate()):this._.requestUpdate();const i=++this.p;this.q=new AbortController;let r=!1;try{e=await this.v(t,{signal:this.q.signal})}catch(t){r=!0,s=t}if(this.p===i){if(e===n)this.i=0;else{if(!1===r){try{this.k?.(e)}catch{}this.i=2,this.o?.(e)}else{try{this.A?.(s)}catch{}this.i=3,this.h?.(s)}this.u=e,this.l=s}this._.requestUpdate()}}abort(t){1===this.i&&this.q?.abort(t)}get value(){return this.u}get error(){return this.l}get status(){return this.i}render(t){switch(this.i){case 0:return t.initial?.();case 1:return t.pending?.();case 2:return t.complete?.(this.value);case 3:return t.error?.(this.error);default:throw Error("Unexpected status: "+this.i)}}}const c=(t,e)=>t===e||t.length===e.length&&t.every((t,s)=>!(0,a.Ec)(t,e[s]));var l=s(4415);const u=r.AH`.image-item-thumbnail-wrapper{display:flex;width:200px;height:200px;align-items:center;justify-content:center}.image-item-thumbnail-wrapper img{display:flex;width:100%;height:100%;border:solid 1px var(--calcite-color-border-3)}`;class A extends h.WF{constructor(){super(...arguments),this.fetchImageItemThumbnailTask=new o(this,async([t])=>t?await l.t.fetchOrGet(t):"",()=>[this.thumbnailUrlToFetch])}static{this.properties={thumbnailUrlToFetch:1,messages:0}}static{this.styles=u}render(){return this.fetchImageItemThumbnailTask.render({pending:()=>r.qy`<div class="image-item-thumbnail-wrapper"><calcite-loader .label=${this.messages.loading} scale=s></calcite-loader></div>`,complete:t=>r.qy`<div class="image-item-thumbnail-wrapper"><img src=${t??h.s6}></div>`})}}(0,i.c)("arcgis-imagery-item-thumbnail",A)}}]);