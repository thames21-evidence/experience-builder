System.register(["jimu-core/emotion","jimu-arcgis","jimu-core","jimu-ui","jimu-ui/advanced/setting-components","jimu-core/react"],function(e,t){var o={},n={},a={},l={},i={},r={};return{setters:[function(e){o.Fragment=e.Fragment,o.jsx=e.jsx,o.jsxs=e.jsxs},function(e){n.JimuMapViewComponent=e.JimuMapViewComponent},function(){},function(e){l.Switch=e.Switch},function(e){i.MapWidgetSelector=e.MapWidgetSelector,i.SettingRow=e.SettingRow,i.SettingSection=e.SettingSection},function(e){r.memo=e.memo,r.useRef=e.useRef,r.useState=e.useState}],execute:function(){e((()=>{var e={14321:e=>{"use strict";e.exports=l},62686:e=>{"use strict";e.exports=n},67386:e=>{"use strict";e.exports=o},68972:e=>{"use strict";e.exports=r},79244:e=>{"use strict";e.exports=a},79298:e=>{"use strict";e.exports=i}},t={};function s(o){var n=t[o];if(void 0!==n)return n.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,s),a.exports}s.d=(e,t)=>{for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.p="";var g={};return s.p=window.jimuConfig.baseUrl,(()=>{"use strict";s.r(g),s.d(g,{__set_webpack_public_path__:()=>d,default:()=>u});var e=s(67386),t=s(62686),o=(s(79244),s(14321)),n=s(79298),a=s(68972);const l=[{name:"viewerToolsEnabled",labelKey:"viewerToolsToggleLabel",subTools:[{name:"imageGalleryEnabled",labelKey:"imageGalleryToolToggleLabel"},{name:"imageEnahncementEnabled",labelKey:"imageEnhancementToolToggleLabel"},{name:"mapImageConversionToolEnabled",labelKey:"mapImageConversionToolToggleLabel"},{name:"showPopupsActionEnabled",labelKey:"showPopupsActionToggleLabel"},{name:"navigationToolEnabled",labelKey:"navigationToolToggleLabel"},{name:"directionalNavigationEnabled",labelKey:"directionalNavigationToggleLabel"},{name:"sequentialNavigationEnabled",labelKey:"sequentialNavigationToggleLabel"},{name:"measurementToolsEnabled",labelKey:"measurementToolsToggleLabel"},{name:"imageOverlaysEnabled",labelKey:"imageOverlaysToggleLabel",subTools:[{name:"dataCaptureEnabled",labelKey:"digitizationToggleLabel"}]}]}],i=[{name:"navigateToExtentEnabled",labelKey:"navigateToExtentLabel"}],r={mapWidgetSelectionSectionTitle:"Choose Map Widget",imageGalleryToolToggleLabel:"Image gallery tool",viewerToolsToggleLabel:"Viewer tools",imageEnhancementToolToggleLabel:"Image enhancement tool",mapImageConversionToolToggleLabel:"Map-image location tool",showPopupsActionToggleLabel:"Show pop-ups",navigationToolToggleLabel:"Navigation tool",noOiLayersError:"No Oriented Imagery Layer in the selected map.",noMapSelectedError:"No Map selected.",defaultError:"Failed to load settings.",configureToolsSectionTitle:"Configure Tools",measurementToolsToggleLabel:"Measurement tools",imageOverlaysToggleLabel:"Image overlays",digitizationToggleLabel:"Data capture",directionalNavigationToggleLabel:"Directional navigation",sequentialNavigationToggleLabel:"Sequential navigation",navigateToExtentLabel:"Navigate to layer extent",configureExtentsLabel:"Configure Extent"};var c=function(e,t,o,n){return new(o||(o=Promise))(function(a,l){function i(e){try{s(n.next(e))}catch(e){l(e)}}function r(e){try{s(n.throw(e))}catch(e){l(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(i,r)}s((n=n.apply(e,t||[])).next())})};const u=(0,a.memo)(function(s){var g;const{config:u,id:d,intl:m}=s,[p,b]=(0,a.useState)(null),[v,T]=(0,a.useState)([]),y=(0,a.useRef)(null),f=e=>m?m.formatMessage({id:e,defaultMessage:r[e]}):e,h=e=>{var t,o;t=e.currentTarget.name,o=e.currentTarget.checked,s.onSettingChange({id:d,config:u.set(t,o)})},S=e=>e.watch(()=>{var t,o;return null===(o=null===(t=e.view.map)||void 0===t?void 0:t.allLayers)||void 0===o?void 0:o.filter(e=>"oriented-imagery"===e.type&&e.loaded).length},()=>{T(x(e.view.map.allLayers))}),x=e=>e.reduce((e,t)=>("oriented-imagery"===t.type?e.push(t):"group"===t.type&&e.push(...x(t.layers)),e),[]),w=t=>(0,e.jsx)(e.Fragment,{children:t.map(t=>{var a;const l=f(t.labelKey),i=(null===(a=t.subTools)||void 0===a?void 0:a.length)&&u[t.name];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.SettingRow,{role:"group","aria-label":l,tag:"label",label:l,children:(0,e.jsx)(o.Switch,{name:t.name,checked:u[t.name],onChange:h})},t.name),i?w(t.subTools):null]})})}),L=()=>(0,e.jsx)(n.SettingSection,{title:f("configureToolsSectionTitle"),children:w(l)}),j=()=>(0,e.jsx)(n.SettingSection,{title:f("configureExtentsLabel"),children:w(i)});return(0,e.jsxs)("div",{className:"widget-setting-demo",children:[(0,e.jsx)(t.JimuMapViewComponent,{useMapWidgetId:null===(g=s.useMapWidgetIds)||void 0===g?void 0:g[0],onActiveViewChange:e=>c(this,void 0,void 0,function*(){var t;y.current&&(y.current.remove(),y.current=null),e?(b(e.view),T(x(null===(t=e.view.map)||void 0===t?void 0:t.allLayers)),y.current=yield S(e)):(b(null),T([]))})}),(0,e.jsx)(n.SettingSection,{className:"map-selector-section",title:f("mapWidgetSelectionSectionTitle"),children:(0,e.jsx)(n.SettingRow,{children:(0,e.jsx)(n.MapWidgetSelector,{onSelect:e=>{s.onSettingChange({id:d,useMapWidgetIds:e})},useMapWidgetIds:s.useMapWidgetIds})})}),p&&(null==v?void 0:v.length)?(0,e.jsxs)(e.Fragment,{children:[L(),j()]}):(()=>{let t=f("defaultError");return p?(null==v?void 0:v.length)||(t=f("noOiLayersError")):t=f("noMapSelectedError"),(0,e.jsx)(n.SettingSection,{className:"d-flex justify-content-center",style:{color:s.theme.ref.palette.neutral[900]},children:(0,e.jsx)("div",{className:"text-center",children:t})})})()]})});function d(e){s.p=e}})(),g})())}}});