System.register(["jimu-core/emotion","jimu-core","jimu-for-builder","jimu-ui/advanced/data-source-selector","jimu-ui","jimu-ui/advanced/setting-components","jimu-ui/basic/list-tree","jimu-theme","jimu-ui/advanced/resource-selector","jimu-ui/advanced/sql-expression-builder","jimu-ui/basic/sql-expression-runtime","jimu-ui/advanced/expression-builder"],function(e,t){var a={},i={},l={},n={},s={},o={},r={},c={},u={},d={},p={},g={};return{setters:[function(e){a.jsx=e.jsx,a.jsxs=e.jsxs},function(e){i.AllDataSourceTypes=e.AllDataSourceTypes,i.CONSTANTS=e.CONSTANTS,i.DataSourceComponent=e.DataSourceComponent,i.DataSourceManager=e.DataSourceManager,i.DataSourceStatus=e.DataSourceStatus,i.DataSourceTypes=e.DataSourceTypes,i.Immutable=e.Immutable,i.React=e.React,i.ReactRedux=e.ReactRedux,i.appConfigUtils=e.appConfigUtils,i.classNames=e.classNames,i.css=e.css,i.dataSourceUtils=e.dataSourceUtils,i.focusElementInKeyboardMode=e.focusElementInKeyboardMode,i.getAppStore=e.getAppStore,i.hooks=e.hooks,i.polished=e.polished,i.urlUtils=e.urlUtils},function(e){l.getAppConfigAction=e.getAppConfigAction},function(e){n.DataSourceRemoveWaringReason=e.DataSourceRemoveWaringReason,n.DataSourceRemoveWarningPopup=e.DataSourceRemoveWarningPopup,n.DataSourceSelector=e.DataSourceSelector,n.FieldSelector=e.FieldSelector,n.dataComponentsUtils=e.dataComponentsUtils},function(e){s.Button=e.Button,s.ButtonGroup=e.ButtonGroup,s.Checkbox=e.Checkbox,s.Collapse=e.Collapse,s.Icon=e.Icon,s.Label=e.Label,s.Modal=e.Modal,s.ModalBody=e.ModalBody,s.ModalFooter=e.ModalFooter,s.MultiSelect=e.MultiSelect,s.MultiSelectItem=e.MultiSelectItem,s.NumericInput=e.NumericInput,s.PanelHeader=e.PanelHeader,s.Popper=e.Popper,s.Select=e.Select,s.Switch=e.Switch,s.TextArea=e.TextArea,s.TextInput=e.TextInput,s.Tooltip=e.Tooltip,s.defaultMessages=e.defaultMessages},function(e){o.DirectionSelector=e.DirectionSelector,o.MapWidgetSelector=e.MapWidgetSelector,o.SettingCollapse=e.SettingCollapse,o.SettingRow=e.SettingRow,o.SettingSection=e.SettingSection,o.SidePopper=e.SidePopper},function(e){r.List=e.List,r.TreeItemActionType=e.TreeItemActionType},function(e){c.withTheme=e.withTheme},function(e){u.IconPicker=e.IconPicker},function(e){d.Sort=e.Sort,d.SqlExpressionBuilderPopup=e.SqlExpressionBuilderPopup},function(e){p.getJimuFieldNamesBySqlExpression=e.getJimuFieldNamesBySqlExpression},function(e){g.ExpressionBuilder=e.ExpressionBuilder,g.ExpressionBuilderType=e.ExpressionBuilderType}],execute:function(){e((()=>{var e={1888:e=>{"use strict";e.exports=c},2985:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M2.002 1H14A1 1 0 0 1 15 2.002v11.997A1 1 0 0 1 14 15H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1.002-1M2 14h12V2H2z" clip-rule="evenodd"></path></svg>'},4108:e=>{"use strict";e.exports=l},5618:e=>{e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjY4IiBoZWlnaHQ9IjY4IiB2aWV3Qm94PSIwIDAgNjggNjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cmVjdCB4PSI0IiB5PSI0IiB3aWR0aD0iNjAiIGhlaWdodD0iMTUiIHJ4PSIxIiBmaWxsPSIjMjgyODI4Ii8+DQo8cmVjdCB4PSI4IiB5PSI4IiB3aWR0aD0iMTUiIGhlaWdodD0iOCIgcng9IjIiIGZpbGw9IiM2QTZBNkEiLz4NCjxyZWN0IHg9IjI1IiB5PSI4IiB3aWR0aD0iMTkiIGhlaWdodD0iOCIgcng9IjIiIGZpbGw9IiM1MjUyNTIiLz4NCjxwYXRoIGQ9Ik00IDI0LjEyNzRDNCAyMy41NzUyIDQuNDQ3NzIgMjMuMTI3NCA1IDIzLjEyNzRINDdDNDcuNTUyMyAyMy4xMjc0IDQ4IDIzLjU3NTIgNDggMjQuMTI3NFY2M0M0OCA2My41NTIzIDQ3LjU1MjMgNjQgNDcgNjRINUM0LjQ0NzcxIDY0IDQgNjMuNTUyMyA0IDYzVjI0LjEyNzRaIiBmaWxsPSIjMzYzNjM2Ii8+DQo8cmVjdCB4PSI4IiB5PSIyNiIgd2lkdGg9IjIxIiBoZWlnaHQ9IjQiIHJ4PSIxIiBmaWxsPSIjNkE2QTZBIi8+DQo8cGF0aCBkPSJNNDEuNzA3MSAyNkw0MSAyNi43MDcxTDQyLjQxNDIgMjguMTIxM0w0MSAyOS41MzU1TDQxLjcwNzEgMzAuMjQyNkw0My4xMjEzIDI4LjgyODRMNDQuNTM1NSAzMC4yNDI2TDQ1LjI0MjYgMjkuNTM1NUw0My44Mjg0IDI4LjEyMTNMNDUuMjQyNiAyNi43MDcxTDQ0LjUzNTUgMjZMNDMuMTIxMyAyNy40MTQyTDQxLjcwNzEgMjZaIiBmaWxsPSIjNTI1MjUyIi8+DQo8cmVjdCB4PSI4IiB5PSIzNSIgd2lkdGg9IjM2IiBoZWlnaHQ9IjMiIGZpbGw9IiM1MjUyNTIiLz4NCjxyZWN0IHg9IjgiIHk9IjQyIiB3aWR0aD0iMzYiIGhlaWdodD0iMyIgZmlsbD0iIzUyNTI1MiIvPg0KPHJlY3QgeD0iOCIgeT0iNDkiIHdpZHRoPSIzNiIgaGVpZ2h0PSIzIiBmaWxsPSIjNTI1MjUyIi8+DQo8cmVjdCB4PSI4IiB5PSI1NiIgd2lkdGg9IjI5IiBoZWlnaHQ9IjMiIGZpbGw9IiM1MjUyNTIiLz4NCjxyZWN0IHg9IjQ2IiB5PSI4IiB3aWR0aD0iMTQiIGhlaWdodD0iOCIgcng9IjIiIGZpbGw9IiM1MjUyNTIiLz4NCjwvc3ZnPg0K"},7680:e=>{e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjY4IiBoZWlnaHQ9IjY4IiB2aWV3Qm94PSIwIDAgNjggNjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cmVjdCB4PSI0IiB5PSI0IiB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHJ4PSIxIiBmaWxsPSIjMjgyODI4Ii8+DQo8cmVjdCB4PSI4IiB5PSI4IiB3aWR0aD0iNTIiIGhlaWdodD0iOCIgcng9IjEiIGZpbGw9IiMzNjM2MzYiLz4NCjxyZWN0IHg9IjEwIiB5PSIxMCIgd2lkdGg9IjI2IiBoZWlnaHQ9IjQiIHJ4PSIxIiBmaWxsPSIjNkE2QTZBIi8+DQo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTU2LjY0NjQgMTJMNTUgMTAuMzUzNkw1NS43MDcxIDkuNjQ2NDhMNTguMDYwNyAxMkw1NS43MDcxIDE0LjM1MzZMNTUgMTMuNjQ2NUw1Ni42NDY0IDEyWiIgZmlsbD0iIzUyNTI1MiIvPg0KPHJlY3QgeD0iOCIgeT0iMTkiIHdpZHRoPSI1MiIgaGVpZ2h0PSI4IiByeD0iMSIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iMTAiIHk9IjIxIiB3aWR0aD0iMjYiIGhlaWdodD0iNCIgcng9IjEiIGZpbGw9IiM2QTZBNkEiLz4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNTYuNjQ2NCAyM0w1NSAyMS4zNTM2TDU1LjcwNzEgMjAuNjQ2NUw1OC4wNjA3IDIzTDU1LjcwNzEgMjUuMzUzNkw1NSAyNC42NDY1TDU2LjY0NjQgMjNaIiBmaWxsPSIjNTI1MjUyIi8+DQo8cmVjdCB4PSI4IiB5PSIzMCIgd2lkdGg9IjUyIiBoZWlnaHQ9IjgiIHJ4PSIxIiBmaWxsPSIjMzYzNjM2Ii8+DQo8cmVjdCB4PSIxMCIgeT0iMzIiIHdpZHRoPSIyNiIgaGVpZ2h0PSI0IiByeD0iMSIgZmlsbD0iIzZBNkE2QSIvPg0KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik01Ni42NDY0IDM0TDU1IDMyLjM1MzZMNTUuNzA3MSAzMS42NDY1TDU4LjA2MDcgMzRMNTUuNzA3MSAzNi4zNTM2TDU1IDM1LjY0NjVMNTYuNjQ2NCAzNFoiIGZpbGw9IiM1MjUyNTIiLz4NCjxyZWN0IHg9IjgiIHk9IjQxIiB3aWR0aD0iNTIiIGhlaWdodD0iOCIgcng9IjEiIGZpbGw9IiMzNjM2MzYiLz4NCjxyZWN0IHg9IjEwIiB5PSI0MyIgd2lkdGg9IjI2IiBoZWlnaHQ9IjQiIHJ4PSIxIiBmaWxsPSIjNkE2QTZBIi8+DQo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTU2LjY0NjQgNDVMNTUgNDMuMzUzNkw1NS43MDcxIDQyLjY0NjVMNTguMDYwNyA0NUw1NS43MDcxIDQ3LjM1MzZMNTUgNDYuNjQ2NUw1Ni42NDY0IDQ1WiIgZmlsbD0iIzUyNTI1MiIvPg0KPHJlY3QgeD0iOCIgeT0iNTIiIHdpZHRoPSI1MiIgaGVpZ2h0PSI4IiByeD0iMSIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iMTAiIHk9IjU0IiB3aWR0aD0iMjYiIGhlaWdodD0iNCIgcng9IjEiIGZpbGw9IiM2QTZBNkEiLz4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNTYuNjQ2NCA1Nkw1NSA1NC4zNTM2TDU1LjcwNzEgNTMuNjQ2NUw1OC4wNjA3IDU2TDU1LjcwNzEgNTguMzUzNkw1NSA1Ny42NDY1TDU2LjY0NjQgNTZaIiBmaWxsPSIjNTI1MjUyIi8+DQo8L3N2Zz4NCg=="},13089:e=>{"use strict";e.exports=n},14321:e=>{"use strict";e.exports=s},23662:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M7.5 0a.5.5 0 0 0-.5.5V7H.5a.5.5 0 0 0 0 1H7v6.5a.5.5 0 0 0 1 0V8h6.5a.5.5 0 0 0 0-1H8V.5a.5.5 0 0 0-.5-.5"></path></svg>'},28996:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 2.125 14.334 14H1.667zm-.882-.47a1 1 0 0 1 1.765 0l6.333 11.874A1 1 0 0 1 14.334 15H1.667a1 1 0 0 1-.882-1.47zM8 4.874a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0L8.9 5.87a.905.905 0 0 0-.9-.995m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0" clip-rule="evenodd"></path></svg>'},30655:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M2.146 4.653a.485.485 0 0 1 .708 0L8 10.24l5.146-5.587a.485.485 0 0 1 .708 0 .54.54 0 0 1 0 .738l-5.5 5.956a.485.485 0 0 1-.708 0l-5.5-5.956a.54.54 0 0 1 0-.738" clip-rule="evenodd"></path></svg>'},31027:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M12 6.5c0 .527-.074 1.036-.212 1.518l.912.438a6.5 6.5 0 1 0-6.586 4.533l-.077-1.008A5.5 5.5 0 1 1 12 6.5m-9 0a3.5 3.5 0 0 0 2.88 3.445L5.8 8.901a2.501 2.501 0 1 1 3.194-2.224l.949.456A3.5 3.5 0 1 0 3 6.5M15.5 11l-5 1-3 4-1-9.5zm-5.57.094-1.702 2.269-.542-5.152 4.76 2.38z" clip-rule="evenodd"></path></svg>'},33345:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 14"><path fill="#000" d="M7.467 0h1.066v2H7.467zM14.308 2l.755.707-1.509 1.414-.754-.707zM13.867 7H16v1h-2.133zM1.82 2l-.753.707 1.508 1.414.754-.707zM0 7v1h2.133V7z"></path><path fill="#000" fill-rule="evenodd" d="M12.8 7.5c0 1.56-.847 2.935-2.133 3.742V14H5.333v-2.758C4.047 10.435 3.2 9.06 3.2 7.5 3.2 5.015 5.349 3 8 3s4.8 2.015 4.8 4.5m-2.727 2.911-.473.297V13H6.4v-2.292l-.473-.297c-1.004-.63-1.66-1.698-1.66-2.911C4.267 5.567 5.938 4 8 4s3.733 1.567 3.733 3.5c0 1.213-.657 2.282-1.66 2.911" clip-rule="evenodd"></path></svg>'},34682:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14M8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0" clip-rule="evenodd"></path></svg>'},34700:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#fff" d="M14.417 0H0v12.888h5.607v-.805H.8V.806h12.815V6.04h.801z"></path><path fill="#fff" fill-rule="evenodd" d="M10.413 14.902a4.37 4.37 0 0 0 2.867-1.067L15.434 16l.566-.57-2.161-2.173c.612-.761.979-1.73.979-2.785 0-2.447-1.973-4.43-4.405-4.43s-4.406 1.983-4.406 4.43 1.973 4.43 4.406 4.43m0-.805c1.99 0 3.604-1.623 3.604-3.625s-1.614-3.625-3.604-3.625c-1.991 0-3.605 1.623-3.605 3.625s1.614 3.625 3.605 3.625" clip-rule="evenodd"></path><path fill="#fff" d="M2.403 2.417h9.611v.805H2.403zM7.209 4.833H2.403v.806h4.806zM2.403 7.25h2.403v.805H2.403zM4.806 9.666H2.403v.806h2.403z"></path></svg>'},35809:e=>{"use strict";e.exports=u},37957:e=>{e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjY4IiBoZWlnaHQ9IjY4IiB2aWV3Qm94PSIwIDAgNjggNjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQo8cmVjdCB4PSI0IiB5PSI0IiB3aWR0aD0iOCIgaGVpZ2h0PSI4IiByeD0iMiIgZmlsbD0iIzZBNkE2QSIvPg0KPHBhdGggZD0iTTQgMTZDNCAxNS40NDc3IDQuNDQ3NzIgMTUgNSAxNUg2M0M2My41NTIzIDE1IDY0IDE1LjQ0NzcgNjQgMTZWNjNDNjQgNjMuNTUyMyA2My41NTIzIDY0IDYzIDY0SDVDNC40NDc3MSA2NCA0IDYzLjU1MjMgNCA2M1YxNloiIGZpbGw9IiMyODI4MjgiLz4NCjxyZWN0IHg9IjgiIHk9IjE5IiB3aWR0aD0iMjEiIGhlaWdodD0iNCIgcng9IjEiIGZpbGw9IiM2QTZBNkEiLz4NCjxwYXRoIGQ9Ik01NS43MDcxIDE5TDU1IDE5LjcwNzFMNTYuNDE0MiAyMS4xMjEzTDU1IDIyLjUzNTVMNTUuNzA3MSAyMy4yNDI2TDU3LjEyMTMgMjEuODI4NEw1OC41MzU1IDIzLjI0MjZMNTkuMjQyNiAyMi41MzU1TDU3LjgyODQgMjEuMTIxM0w1OS4yNDI2IDE5LjcwNzFMNTguNTM1NSAxOUw1Ny4xMjEzIDIwLjQxNDJMNTUuNzA3MSAxOVoiIGZpbGw9IiM1MjUyNTIiLz4NCjxyZWN0IHg9IjgiIHk9IjI5IiB3aWR0aD0iNTIiIGhlaWdodD0iOCIgcng9IjEiIGZpbGw9IiMzNjM2MzYiLz4NCjxyZWN0IHg9IjEwIiB5PSIzMSIgd2lkdGg9IjI2IiBoZWlnaHQ9IjQiIHJ4PSIxIiBmaWxsPSIjNkE2QTZBIi8+DQo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTU2LjY0NjQgMzNMNTUgMzEuMzUzNkw1NS43MDcxIDMwLjY0NjVMNTguMDYwNyAzM0w1NS43MDcxIDM1LjM1MzZMNTUgMzQuNjQ2NUw1Ni42NDY0IDMzWiIgZmlsbD0iIzUyNTI1MiIvPg0KPHJlY3QgeD0iOCIgeT0iNDAiIHdpZHRoPSI1MiIgaGVpZ2h0PSI4IiByeD0iMSIgZmlsbD0iIzM2MzYzNiIvPg0KPHJlY3QgeD0iMTAiIHk9IjQyIiB3aWR0aD0iMjYiIGhlaWdodD0iNCIgcng9IjEiIGZpbGw9IiM2QTZBNkEiLz4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNTYuNjQ2NCA0NEw1NSA0Mi4zNTM2TDU1LjcwNzEgNDEuNjQ2NUw1OC4wNjA3IDQ0TDU1LjcwNzEgNDYuMzUzNkw1NSA0NS42NDY1TDU2LjY0NjQgNDRaIiBmaWxsPSIjNTI1MjUyIi8+DQo8cmVjdCB4PSI4IiB5PSI1MSIgd2lkdGg9IjUyIiBoZWlnaHQ9IjgiIHJ4PSIxIiBmaWxsPSIjMzYzNjM2Ii8+DQo8cmVjdCB4PSIxMCIgeT0iNTMiIHdpZHRoPSIyNiIgaGVpZ2h0PSI0IiByeD0iMSIgZmlsbD0iIzZBNkE2QSIvPg0KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik01Ni42NDY0IDU1TDU1IDUzLjM1MzZMNTUuNzA3MSA1Mi42NDY1TDU4LjA2MDcgNTVMNTUuNzA3MSA1Ny4zNTM2TDU1IDU2LjY0NjVMNTYuNjQ2NCA1NVoiIGZpbGw9IiM1MjUyNTIiLz4NCjwvc3ZnPg0K"},42588:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M1 4.429V15h14V1L6.833 7.857zM14 3v11H2V6.114l4.182 2.51a1.2 1.2 0 0 0 1.398-.118z" clip-rule="evenodd"></path></svg>'},52943:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M4.653 13.854a.485.485 0 0 1 0-.708L10.24 8 4.653 2.854a.485.485 0 0 1 0-.708.54.54 0 0 1 .738 0l5.956 5.5a.485.485 0 0 1 0 .708l-5.956 5.5a.54.54 0 0 1-.738 0" clip-rule="evenodd"></path></svg>'},60846:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m1 0a7 7 0 0 0 7 7 7.01 7.01 0 0 0 7-7A7 7 0 1 0 1 8" clip-rule="evenodd"></path></svg>'},62838:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m8.745 8 6.1 6.1a.527.527 0 1 1-.745.746L8 8.746l-6.1 6.1a.527.527 0 1 1-.746-.746l6.1-6.1-6.1-6.1a.527.527 0 0 1 .746-.746l6.1 6.1 6.1-6.1a.527.527 0 0 1 .746.746z"></path></svg>'},67386:e=>{"use strict";e.exports=a},71442:e=>{"use strict";e.exports=d},74919:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M7 2h2a2 2 0 0 1 2 2v7.817l-3 2.812-3-2.812V4a2 2 0 0 1 2-2m5 2v8.25L8 16l-4-3.75V4a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3M9 6a1 1 0 1 1-2 0 1 1 0 0 1 2 0m1 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0" clip-rule="evenodd"></path></svg>'},76117:e=>{"use strict";e.exports=p},79244:e=>{"use strict";e.exports=i},79298:e=>{"use strict";e.exports=o},84845:e=>{"use strict";e.exports=g},86058:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M14.582 5 11 10.949V12H9v-1.274L5.316 7h-.515L2 12.383V14H0v-2h1.073L4 6.374V5h2v1.27L9.688 10h.716L14 4.029V3h2v2z"></path></svg>'},93303:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M9.438.994c.213 0 .397.146.44.35q.227 1.084.316 1.852.562.242 1.048.599l1.728-.676a.455.455 0 0 1 .556.188l1.42 2.394a.43.43 0 0 1-.091.547 22 22 0 0 1-1.49 1.194q.03.27.03.552 0 .32-.038.63l1.465 1.12a.43.43 0 0 1 .111.563l-1.42 2.394a.454.454 0 0 1-.53.197 23 23 0 0 1-1.807-.66q-.49.35-1.055.586l-.263 1.794a.446.446 0 0 1-.445.376H6.574a.446.446 0 0 1-.44-.35 21 21 0 0 1-.317-1.853 5.3 5.3 0 0 1-1.047-.598l-1.728.675a.455.455 0 0 1-.556-.187l-1.42-2.395a.43.43 0 0 1 .091-.546q.85-.735 1.49-1.194a5.167 5.167 0 0 1 .008-1.183L1.19 6.243a.43.43 0 0 1-.112-.562l1.42-2.395a.455.455 0 0 1 .531-.196q1.078.35 1.807.66c.324-.233.679-.43 1.056-.587l.262-1.794A.446.446 0 0 1 6.6.994zm-.365 1H6.985l-.28 1.866-.467.19q-.353.144-.672.34l-.207.136-.42.293-.476-.197q-.492-.205-1.169-.433l-.221-.074-1.045 1.719L3.59 6.999l-.06.479a4 4 0 0 0-.021.816l.014.144.058.492-.419.294q-.433.304-.979.746l-.177.145 1.043 1.72 1.845-.703.406.29q.307.219.645.384l.228.103.474.199.059.49q.06.507.19 1.177l.043.219h2.088l.282-1.867.466-.19q.354-.144.672-.34l.207-.136.419-.293.476.198q.495.204 1.17.433l.22.072 1.044-1.718-1.56-1.165.06-.479a4 4 0 0 0 .02-.815l-.013-.144-.06-.492.42-.295a18 18 0 0 0 .98-.746l.176-.146-1.043-1.72-1.844.705-.406-.29a4.5 4.5 0 0 0-.646-.385l-.228-.103-.474-.199-.058-.49q-.049-.405-.14-.916zm-1.067 3a3 3 0 1 1 0 6 3 3 0 0 1 0-6m0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4" clip-rule="evenodd"></path></svg>'},94064:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M13.854 11.347a.486.486 0 0 1-.708 0L8 5.76l-5.146 5.587a.485.485 0 0 1-.708 0 .54.54 0 0 1 0-.738l5.5-5.956a.485.485 0 0 1 .708 0l5.5 5.956a.54.54 0 0 1 0 .738" clip-rule="evenodd"></path></svg>'},96300:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M15 7.5a.52.52 0 0 1-.516.527H2.976L6.473 11.6a.535.535 0 0 1 0 .746.51.51 0 0 1-.73 0L1 7.5l4.743-4.846a.51.51 0 0 1 .73 0 .535.535 0 0 1 0 .746L2.976 6.973h11.508c.285 0 .516.236.516.527"></path></svg>'},98427:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M15 3.5v9c0 1.933-3.134 3.5-7 3.5s-7-1.567-7-3.5v-9C1 1.567 4.134 0 8 0s7 1.567 7 3.5M2 5.304V6.5C2 7.692 4.615 9 8 9s6-1.308 6-2.5V5.304C12.775 6.32 10.546 7 8 7s-4.775-.68-6-1.696M8 10c2.546 0 4.775-.68 6-1.696V9.5c0 1.192-2.615 2.5-6 2.5s-6-1.308-6-2.5V8.304C3.225 9.32 5.454 10 8 10m6 1.304C12.775 12.32 10.546 13 8 13s-4.775-.68-6-1.696V12.5C2 13.692 4.615 15 8 15s6-1.308 6-2.5zM14 3.5C14 4.692 11.385 6 8 6S2 4.692 2 3.5 4.615 1 8 1s6 1.308 6 2.5" clip-rule="evenodd"></path></svg>'},98640:e=>{"use strict";e.exports=r}},t={};function m(a){var i=t[a];if(void 0!==i)return i.exports;var l=t[a]={exports:{}};return e[a](l,l.exports,m),l.exports}m.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return m.d(t,{a:t}),t},m.d=(e,t)=>{for(var a in t)m.o(t,a)&&!m.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},m.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),m.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},m.p="";var I={};return m.p=window.jimuConfig.baseUrl,(()=>{"use strict";m.r(I),m.d(I,{__set_webpack_public_path__:()=>et,default:()=>Xe});var e,t,a,i,l,n=m(67386),s=m(79244),o=m(4108),r=m(13089),c=m(14321),u=m(79298);!function(e){e.Point="Point",e.Polyline="Polyline",e.Polygon="Polygon",e.Rectangle="Rectangle",e.Circle="Circle"}(e||(e={})),function(e){e.NewSelection="NEW_SELECTION",e.AddToSelection="ADD_TO_CURRENT_SELECTION",e.RemoveFromSelection="REMOVE_FROM_CURRENT_SELECTION",e.SubsetSelection="SUBSET_FROM_CURRENT_SELECTION",e.SwitchSelection="SWITCH_CURRENT_SELECTION"}(t||(t={})),function(e){e.Block="BLOCK",e.Inline="INLINE",e.Popper="POPPER"}(a||(a={})),function(e){e.CurrentMapExtent="CurrentMapExtent",e.InteractiveDrawMode="InteractiveDrawMode",e.None=""}(i||(i={})),function(e){e.Intersect="intersects",e.Contain="contains",e.Cross="crosses",e.EnvelopeIntersect="envelope-intersects",e.IndexIntersect="index-intersects",e.Overlap="overlaps",e.Touch="touches",e.Within="within"}(l||(l={}));l.Intersect,l.Contain,l.Cross,l.EnvelopeIntersect,l.IndexIntersect,l.Overlap,l.Touch,l.Within;var d;!function(e){e.Miles="Miles",e.Kilometers="Kilometers",e.Feet="Feet",e.Meters="Meters",e.NauticalMiles="NauticalMiles"}(d||(d={}));d.Miles,d.Kilometers,d.Feet,d.Meters,d.NauticalMiles;var p,g,h,S,y,v;!function(e){e.Horizontal="Horizontal",e.Vertical="Vertical"}(p||(p={})),function(e){e.MultiPage="MultiPage",e.LazyLoad="LazyLoad"}(g||(g={})),function(e){e.PopupSetting="PopupSetting",e.SelectAttributes="SelectAttributes"}(h||(h={})),function(e){e.Asc="Asc",e.Desc="Desc"}(S||(S={})),function(e){e.Single="Single",e.Multiple="Multiple"}(y||(y={})),function(e){e.DefaultSymbol="DefaultSymbol",e.CustomSymbol="CustomSymbol"}(v||(v={}));const j={queryItem:"Query item",outputDsLabel:"{label} result",addNewQueryAndCustomOptions:"Add new query and custom options.",newQuery:"New query",newFilterLayer:"Add filter layer",arrangementStyle:"Arrangement style",wrapItems:"Wrap items",setQuery:"Set query",attributeFilter:"Attribute filter",addSQLExpressionsToYourQuery:"Add SQL expressions to your query",pleaseAddYourSQLExpressionsFirst:"Please add your SQL expressions first.",spatialFilter:"Spatial filter",mapRequirement_MapNotRequired:"Map widget not required ",mapRequirement_MapIsRequired:"Requires a Map widget",typesOfFilter:"Filter by",featureFromDs:"Selected features from data source",featureFromMap:"Geometries from a map",selectionViewOnly:"Support selected features view only",geometryTypes:"Geometry types",spatialFilterType_CurrentMapExtent:"Current map extent",spatialFilterType_InteractiveDrawMode:"Drawn graphic",spatialFilterType_SpatialRelationship:"Use other layers",results:"Results",listDirection:"List direction",pagingStyle_MultiPage:"Multipage",pagingStyle_LazyLoad:"Single-page",field_PopupSetting:"Use webmap settings",field_SelectAttributes:"Customize",selectDisplayFields:"Select fields to display ",symbolType_DefaultSymbol:"Default",symbolType_CustomSymbol:"Custom",allowToChangeSymbolAtRuntime:"Allow to change symbol at runtime",allowToExport:"Allow to export",interactiveDrawMode:"Interactive draw mode",chooseSelectionTools:"Tools",sketchTool_point:"Point",sketchTool_polyline:"Line",sketchTool_polygon:"Polygon",sketchTool_rectangle:"Rectangle",sketchTool_circle:"Circle",spatialRelationship:"Spatial relationship",chooseSpatialRelationshipRules:"Spatial relationship rules",enableSelectTool:"Enable select tool",queryMessage:"Message",atLeastOneItemIsRequired:"At least one item is required.",configureQuery:"Configure query",hintQueryArgumentsSetting:"A query can have an attribute filter, spatial filter, or both.",noQueryTip:'Click the "{newQuery}" button to add and configure queries.',openTip:"Open tip",expressionBuilder:"Expression Builder",chooseMode:"Configure each record",configTitle:"Heading",configFields:"Display fields",resultStyle:"Result style",sortRecords:"Sort records",describeTheFilter:"Please describe the filter.",expandByDefault:"Expand by default",defaultPageSize:"Number of records per page",includeRuntimeData:"Include runtime data"},x=(e,t=[])=>t.includes(e)?t.filter(t=>t!==e):[...t,e];const b=e=>e?e.type===s.DataSourceTypes.SceneLayer||e.type===s.DataSourceTypes.BuildingComponentSubLayer?e.getAssociatedDataSource():e:null;var f=m(98640),N=m(1888);const{useState:D}=s.React;(0,N.withTheme)(e=>{const{theme:t,panelVisible:a,setPanelVisible:i,getI18nMessage:l,isModal:o=!0,title:r=l("queryMessage"),bodyContent:u="",hasHeader:d=!0,hasFooter:p=!0}=e,g=()=>{i(!1)},m=()=>(0,n.jsxs)(s.React.Fragment,{children:[d&&(0,n.jsx)(c.PanelHeader,{className:"py-2",title:r,onClose:g}),(0,n.jsx)(c.ModalBody,{children:u}),p&&(0,n.jsx)(c.ModalFooter,{children:(0,n.jsx)(c.Button,{onClick:g,children:l("ok")})})]}),I="ui-unit-dialog-panel";return o?(0,n.jsx)(c.Modal,{className:I,isOpen:a,toggle:g,backdrop:"static",children:m()}):(0,n.jsx)("div",{className:`${I} modal-dialog ${a?"":"collapse"}`,css:s.css`
      &.ui-unit-dialog-panel.modal-dialog {
        margin: 0;
        width: 100%;
        .modal-content {
          background-color: ${t.ref.palette.neutral[600]};
          color: ${t.ref.palette.black};
          font-size: .75rem;
          font-weight: 400;
          border: none;
          .panel-header {
            font-size: .8125rem;
            padding: .625rem;
          }
          .modal-body {
            padding: 0 .625rem .75rem;
            white-space: normal;
          }
        }
      }
    `,children:(0,n.jsx)("div",{className:"modal-content",children:m()})})});var w;!function(e){e.None="",e.Init="init",e.Loading="loading",e.Loaded="loaded",e.Warning="warning",e.Error="error"}(w||(w={}));const M=(0,N.withTheme)(e=>{const{theme:t,className:a,title:i,statusType:l}=e;return l&&(0,n.jsx)("div",{className:`${null!=a?a:""} ui-unit-status-indicator ui-unit-status-indicator_status-type-${l}`,title:i,css:s.css`
    &.ui-unit-status-indicator {
      display: flex;
      &.ui-unit-status-indicator_status-type-loading {
        &:before {
          @keyframes loading {
            0% {transform: rotate(0deg); };
            100% {transform: rotate(360deg)};
          }
          content: '';
          width: 1rem;
          height: 1rem;
          display: block;
          border: 1px solid ${null===(r=null===(o=null==t?void 0:t.ref.palette)||void 0===o?void 0:o.neutral)||void 0===r?void 0:r[500]};
          border-radius: 50%;
          border-top: 1px solid ${null===(u=null===(c=null==t?void 0:t.sys.color)||void 0===c?void 0:c.primary)||void 0===u?void 0:u.main};
          box-sizing: border-box;
          animation: loading 2s infinite linear;
          margin-right: .25rem;
        }
      }
    }
  `});var o,r,c,u});var T=m(28996),C=m.n(T),R=m(34682),O=m.n(R);function z(e){const{widgetId:t,useDataSourceId:a}=e;return s.ReactRedux.useSelector(e=>{var i;let l;l=window.jimuConfig.isBuilder?e.appStateInBuilder.appConfig:e.appConfig;return(null!==(i=l.widgets[t].useDataSources)&&void 0!==i?i:[]).some(e=>e.dataSourceId===a)})}function P(e){var t,a,i;const{widgetId:l,useDataSource:o,onStatusChange:r,onDataSourceCreated:u,showMessage:d=!1}=e,p=s.hooks.useTranslation(c.defaultMessages),g=z({widgetId:l,useDataSourceId:o.dataSourceId}),[m,I]=s.React.useState(null),[h,S]=s.React.useState(null),y=s.React.useCallback(e=>{if(e){const{status:t,instanceStatus:a}=e;a===s.DataSourceStatus.NotCreated?(I("creating"),null==r||r(!1)):a===s.DataSourceStatus.CreateError||t===s.DataSourceStatus.LoadError?(I("error"),null==r||r(!1)):t===s.DataSourceStatus.NotReady?(I("warning"),null==r||r(!1)):(I(null),null==r||r(!0))}},[r]),v=s.React.useCallback(e=>{S(e),null==u||u(e)},[u]),j=s.React.useCallback(()=>{S(null),I("error"),null==r||r(!1)},[r]);let x,b,f;if("creating"===m)x=O(),b=p("loading");else if(g&&"error"!==m){if("warning"===m){let e="";const l=null===(t=null==h?void 0:h.getOriginDataSources())||void 0===t?void 0:t[0];l?e=l.getLabel()||l.getDataSourceJson().sourceLabel:h&&(e=h.getLabel()||h.getDataSourceJson().label);const n=s.appConfigUtils.getWidgetIdByOutputDataSource(o),r=null===(i=((null===(a=null===window||void 0===window?void 0:window.jimuConfig)||void 0===a?void 0:a.isBuilder)?(0,s.getAppStore)().getState().appStateInBuilder:(0,s.getAppStore)().getState()).appConfig.widgets[n])||void 0===i?void 0:i.label;f="var(--sys-color-warning-dark)",x=C(),b=p("outputDataIsNotGenerated",{outputDsLabel:null!=e?e:"",sourceWidgetName:null!=r?r:""})}}else x=O(),b=p("dataSourceCreateError"),f="var(--sys-color-error-main)";return(0,n.jsxs)(s.React.Fragment,{children:[g&&(0,n.jsx)(s.DataSourceComponent,{useDataSource:o,onDataSourceInfoChange:y,onDataSourceCreated:v,onCreateDataSourceFailed:j}),"creating"===m&&(0,n.jsx)(M,{statusType:w.Loading,title:b}),(!g||"error"===m||"warning"===m)&&(0,n.jsxs)("div",{className:"d-flex align-items-center",children:[(0,n.jsx)(c.Tooltip,{title:b,children:(0,n.jsx)(c.Button,{size:"sm",type:"tertiary",icon:!0,children:(0,n.jsx)(c.Icon,{icon:x,color:f})})}),d&&(0,n.jsx)("div",{className:"status-message",children:b})]})]})}var A=m(62838),B=m.n(A),L=m(23662),Q=m.n(L),E=m(93303),k=m.n(E),U=m(30655),Z=m.n(U),F=m(94064),W=m.n(F),G=m(96300),V=m.n(G),H=m(52943),q=m.n(H),Y=m(31027),_=m.n(Y);const J={iconQuery:m(34700),iconTipBulb:m(33345),iconClose:B(),iconAdd:Q(),iconSetting:k(),arrowDown:Z(),arrowUp:W(),arrowLeft:V(),arrowRight:q(),iconEmpty:_()},K={iconMap:J,iconPropMap:{defaultIconResult:{svg:J.iconQuery,properties:{color:"",filename:"filter-16.svg",originalName:"filter-16.svg",inlineSvg:!0,path:["general","filter"],size:14}}},arrangementStyleMap:{[a.Block]:{getTitle:e=>e("vertical"),icon:m(7680)},[a.Inline]:{getTitle:e=>e("horizontal"),icon:m(5618)},[a.Popper]:{getTitle:e=>e("icon"),icon:m(37957)}}};var $=m(35809),X=m(71442),ee=m(76117);const te={icon:null,displayLabel:!0,sqlExprObj:null,useAttributeFilter:!0,useSpatialFilter:!0,spatialMapWidgetIds:[],spatialFilterTypes:[],spatialInteractiveCreateToolTypes:[e.Point,e.Polyline,e.Polygon,e.Rectangle,e.Circle],spatialInteractiveEnableBuffer:!1,spatialInteractiveBufferDistance:0,spatialInteractiveBufferUnit:d.Meters,spatialRelations:[l.Intersect],spatialRelationUseDataSources:[],spatialRelationEnableSelectTool:!1,spatialRelationEnableBuffer:!1,spatialRelationBufferDistance:0,spatialRelationBufferUnit:d.Meters,resultListDirection:p.Vertical,resultPagingStyle:g.MultiPage,resultFieldsType:h.PopupSetting,resultSymbolType:v.DefaultSymbol,resultCustomSymbol:{angle:0,color:[255,255,255,255],outline:{color:[255,255,255,255],style:"esriSLSSolid",type:"esriSLS",width:1},size:6,style:"esriSMSCircle",type:"esriSMS",xoffset:0,yoffset:0},resultAllowChangeSymbol:!1,allowExport:!1,sortOptions:[],itemSizeMap:{arrangementHorizontalPopper:{minSize:{width:300,height:300},defaultSize:{width:360,height:480}}}};function ae(e){const{enabled:t,label:a,onChange:i}=e,l=s.hooks.useTranslation(j);return(0,n.jsxs)(c.Label,{className:"d-flex align-items-center",children:[(0,n.jsx)("div",{className:"text-break text-wrap d-inline",css:s.css`width: 184px; padding-right: 16px`,children:l(a)}),(0,n.jsx)("div",{className:"ml-auto",children:(0,n.jsx)(c.Switch,{checked:t,onChange:i})})]})}function ie(e){var t,a,i,l;const{queryItem:o,onQueryItemChanged:r,onPropertyChanged:d}=e,[p,g]=s.React.useState(!1),m=s.hooks.useTranslation(j),I=Object.assign({},te,o),h=I.useAttributeFilter,S=null!=(null===(t=I.useDataSource)||void 0===t?void 0:t.dataSourceId),y=s.DataSourceManager.getInstance().getDataSource(null===(a=I.useDataSource)||void 0===a?void 0:a.dataSourceId),[v,x]=s.React.useState(null!==(i=I.attributeFilterLabel)&&void 0!==i?i:m("attributeFilter")),[b,f]=s.React.useState(I.attributeFilterDesc);s.React.useEffect(()=>{var e,t;x(null!==(e=null==o?void 0:o.attributeFilterLabel)&&void 0!==e?e:m("attributeFilter")),f(null!==(t=null==o?void 0:o.attributeFilterDesc)&&void 0!==t?t:"")},[o,m]);const N=s.React.useCallback(()=>{g(!0)},[g]),D=s.React.useCallback(()=>{g(!1)},[g]),w=e=>{var t;const{dataSourceId:a,mainDataSourceId:i,dataViewId:l,rootDataSourceId:n}=o.useDataSource,c=(null===(t=null==e?void 0:e.parts)||void 0===t?void 0:t.length)>0?e:null;let u=o.set("sqlExprObj",c);const d={dataSourceId:a,mainDataSourceId:i,dataViewId:l,rootDataSourceId:n,fields:(0,ee.getJimuFieldNamesBySqlExpression)((0,s.Immutable)(c))};u=u.set("useDataSource",d),r(u,!0)},M=(0,n.jsx)(ae,{label:"attributeFilter",enabled:h,onChange:e=>{d("useAttributeFilter",e.target.checked)}});return(0,n.jsxs)(u.SettingSection,{role:"group","aria-label":m("attributeFilter"),title:M,children:[(0,n.jsxs)(c.Collapse,{isOpen:h,children:[(0,n.jsx)(u.SettingRow,{flow:"wrap",label:m("label"),children:(0,n.jsx)(c.TextInput,{"aria-label":m("label"),className:"w-100",size:"sm",value:v,onChange:e=>{x(e.target.value)},onAcceptValue:e=>{((e,t,a)=>{d(e,t===a?null:t)})("attributeFilterLabel",e,m("attributeFilter"))}})}),(0,n.jsx)(u.SettingRow,{flow:"wrap",truncateLabel:!0,label:m("addSQLExpressionsToYourQuery"),children:(0,n.jsx)(c.Button,{className:"w-100 text-default set-link-btn",type:S?"primary":"secondary",disabled:!S,onClick:N,children:m("sqlExpressionBuilder")})}),(0,n.jsx)(u.SettingRow,{children:(0,n.jsx)(c.TextArea,{css:s.css`
              flex: 1;
            `,height:80,value:null!==(l=s.dataSourceUtils.getArcGISSQL(I.sqlExprObj,y).displaySQL)&&void 0!==l?l:"",spellCheck:!1,readOnly:!0,onClick:e=>{e.currentTarget.select()},placeholder:m("pleaseAddYourSQLExpressionsFirst")})}),(0,n.jsx)(u.SettingRow,{label:m("description"),flow:"wrap",children:(0,n.jsx)(c.TextArea,{"aria-label":m("description"),height:80,value:b,placeholder:m("describeTheFilter"),onChange:e=>{f(e.target.value)},onAcceptValue:e=>{d("attributeFilterDesc",e)}})})]}),(0,n.jsx)(s.DataSourceComponent,{useDataSource:I.useDataSource,children:e=>{if(I.sqlExprObj){const t=s.dataSourceUtils.getArcGISSQL(I.sqlExprObj,e);t.displaySQL!==I.sqlExprObj.displaySQL&&w(Object.assign({},I.sqlExprObj,t))}return(0,n.jsx)(X.SqlExpressionBuilderPopup,{dataSource:e,isOpen:p,toggle:D,expression:I.sqlExprObj,onChange:e=>{w(e)}})}})]})}const{iconMap:le}=K;function ne(e){var t;const{queryItem:a,handleStageChange:i,onPropertyChanged:l}=e,o=Object.assign({},te,a),r=s.hooks.useTranslation(j),d=o.useSpatialFilter,[p,g]=s.React.useState(null!==(t=o.spatialFilterLabel)&&void 0!==t?t:r("spatialFilter")),[m,I]=s.React.useState(o.spatialFilterDesc);s.React.useEffect(()=>{var e,t;g(null!==(e=null==a?void 0:a.spatialFilterLabel)&&void 0!==e?e:r("spatialFilter")),I(null!==(t=null==a?void 0:a.spatialFilterDesc)&&void 0!==t?t:"")},[a,r]);const h=(0,n.jsx)(ae,{label:"spatialFilter",enabled:d,onChange:e=>{l("useSpatialFilter",e.target.checked)}});return(0,n.jsx)(s.DataSourceComponent,{useDataSource:o.useDataSource,children:e=>null==e.getGeometryType()?null:(0,n.jsx)(u.SettingSection,{role:"group","aria-label":r("spatialFilter"),title:h,children:(0,n.jsxs)(c.Collapse,{isOpen:d,children:[(0,n.jsx)(u.SettingRow,{flow:"wrap",label:r("label"),children:(0,n.jsx)(c.TextInput,{"aria-label":r("label"),className:"w-100",size:"sm",value:p,onChange:e=>{g(e.target.value)},onAcceptValue:e=>{((e,t,a)=>{l(e,t===a?null:t)})("spatialFilterLabel",e,r("spatialFilter"))}})}),(0,n.jsxs)(u.SettingRow,{role:"group","aria-label":r("typesOfFilter"),flow:"wrap",label:r("typesOfFilter"),children:[(0,n.jsxs)("div",{className:"setting-ui-unit-check-input-item w-100 d-flex align-items-center",children:[(0,n.jsx)("label",{className:"setting-ui-unit-check-input-label my-1",children:(0,n.jsx)("span",{id:"queryItemDataMode",children:r("featureFromDs")})}),(0,n.jsx)(c.Button,{"aria-describedby":"queryItemDataMode",className:"ml-auto",size:"sm",type:"tertiary",icon:!0,onClick:e=>{i(2,e)},children:(0,n.jsx)(c.Icon,{size:16,icon:le.arrowRight,autoFlip:!0})})]}),(0,n.jsxs)("div",{className:"setting-ui-unit-check-input-item w-100 d-flex align-items-center",children:[(0,n.jsx)("label",{className:"setting-ui-unit-check-input-label my-1",children:(0,n.jsx)("span",{id:"queryItemMapMode",children:r("featureFromMap")})}),(0,n.jsx)(c.Button,{"aria-describedby":"queryItemMapMode",className:"ml-auto",size:"sm",type:"tertiary",icon:!0,onClick:e=>{i(1,e)},children:(0,n.jsx)(c.Icon,{size:16,icon:le.arrowRight,autoFlip:!0})})]})]}),(0,n.jsx)(u.SettingRow,{label:r("description"),flow:"wrap",children:(0,n.jsx)(c.TextArea,{"aria-label":r("description"),height:80,value:m,placeholder:r("describeTheFilter"),onChange:e=>{I(e.target.value)},onAcceptValue:e=>{l("spatialFilterDesc",e)}})})]})})})}var se=m(84845);const oe={overrideItemBlockInfo:()=>({name:f.TreeItemActionType.RenderOverrideItem,children:[{name:f.TreeItemActionType.RenderOverrideItemDroppableContainer,children:[{name:f.TreeItemActionType.RenderOverrideItemDraggableContainer,children:[{name:f.TreeItemActionType.RenderOverrideItemBody,children:[{name:f.TreeItemActionType.RenderOverrideItemMainLine,children:[{name:f.TreeItemActionType.RenderOverrideItemDragHandle},{name:f.TreeItemActionType.RenderOverrideItemIcon,autoCollapsed:!0},{name:f.TreeItemActionType.RenderOverrideItemTitle},{name:f.TreeItemActionType.RenderOverrideItemCommands}]}]}]}]}]})};const re=(0,N.withTheme)(function(e){const{useDataSource:t,selectedFields:a,label:i,theme:l,onFieldsChanged:o}=e,c=s.React.useMemo(()=>(0,s.Immutable)([t]),[t]),d=s.React.useMemo(()=>{const e=s.DataSourceManager.getInstance().getDataSource(null==t?void 0:t.dataSourceId);if(!e)return[];const a=null==e?void 0:e.getSchema();return(null==a?void 0:a.fields)?Object.values(a.fields):[]},[t]),p=s.React.useMemo(()=>{var e,a,i;const l=s.DataSourceManager.getInstance().getDataSource(null==t?void 0:t.dataSourceId);if(l){const t=l;let n=null!==(i=null===(a=null===(e=t.layer)||void 0===e?void 0:e.popupTemplate)||void 0===a?void 0:a.fieldInfos)&&void 0!==i?i:[];const s=function(e){var t;const a=[];return(null===(t=null==e?void 0:e.popupElements)||void 0===t?void 0:t.length)>0&&e.popupElements.forEach(e=>{var t;"fields"===e.type&&(null===(t=e.fieldInfos)||void 0===t?void 0:t.length)>0&&a.push(...e.fieldInfos)}),a}(t.getPopupInfo());s.length>0&&(n=s);const o=new Set(n.map(e=>e.fieldName));return d.filter(e=>o.has(e.name))}return[]},[t,d]),g=s.React.useMemo(()=>null!=a?a.map(e=>d.find(t=>t.jimuName===e)):p,[p,d,a]),m=null!=a?a:p.map(e=>e.jimuName);return(0,n.jsxs)(s.React.Fragment,{children:[(0,n.jsx)(u.SettingRow,{flow:"wrap",label:i,children:(0,n.jsx)(r.FieldSelector,{useDataSources:c,onChange:e=>{if(e){const t=e.filter(e=>e).map(e=>e.jimuName),i=null!=a?a.filter(e=>t.includes(e)):t,l=null!=a?t.filter(e=>!a.includes(e)):[];o(i.concat(l))}},selectedFields:(0,s.Immutable)(m),isMultiple:!0,isDataSourceDropDownHidden:!0,useDropdown:!0,useMultiDropdownBottomTools:!0})}),m.length>1&&(0,n.jsx)(u.SettingRow,{children:(0,n.jsx)(f.List,Object.assign({className:"selected-fields-list w-100",css:s.css`max-height: 300px;`,itemsJson:Array.from(g).map((e,t)=>({itemStateDetailContent:e,itemKey:`${t}`,itemStateIcon:r.dataComponentsUtils.getIconFromFieldType(e.type,l),itemStateTitle:e.alias||e.jimuName||e.name,itemStateCommands:[]})),dndEnabled:!0,onUpdateItem:(e,t)=>{const{itemJsons:a}=t.props,[,i]=a,l=i.map(e=>e.itemStateDetailContent);o(l.map(e=>e.jimuName))}},oe))})]})});var ce=m(98427),ue=m.n(ce),de=function(e,t){var a={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(a[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(i=Object.getOwnPropertySymbols(e);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(e,i[l])&&(a[i[l]]=e[i[l]])}return a};const pe=e=>{const t=window.SVG,{className:a}=e,i=de(e,["className"]),l=(0,s.classNames)("jimu-icon jimu-icon-component",a);return t?(0,n.jsx)(t,Object.assign({className:l,src:ue()},i)):(0,n.jsx)("svg",Object.assign({className:l},i))},ge={crossAxis:!0},me={boundary:document.body,fallbackPlacements:["left-start","left-end"]};function Ie(e){var t,a,i;const{widgetId:l,queryItem:o,onQueryItemChanged:r,onPropertyChanged:d}=e,[p,g]=s.React.useState(!1),[m,I]=s.React.useState(!1),S=s.React.useRef(void 0),v=s.React.useRef(void 0),x=s.hooks.useTranslation(j),[b,f]=s.React.useState(o.resultTitleExpression),N=Object.assign({},te,o),D=s.React.useCallback(()=>{g(!0)},[g]),w=s.React.useCallback(()=>{g(!1)},[g]),M=s.React.useCallback(()=>{!m&&v.current&&(0,s.focusElementInKeyboardMode)(v.current,!0),I(!m)},[m]),T=s.hooks.useEventCallback(e=>{f(e.target.value)}),C=s.hooks.useEventCallback(e=>{d("resultTitleExpression",e,!0)}),R=s.hooks.useEventCallback(e=>{e.parts.length>0&&(f(null!=b?`${b} {${e.parts[0].jimuFieldName}}`:`{${e.parts[0].jimuFieldName}}`),(0,s.focusElementInKeyboardMode)(v.current,!0))});return(0,n.jsxs)(u.SettingCollapse,{role:"group","aria-label":x("results"),label:x("results"),className:"p-4",isOpen:p,onRequestOpen:D,onRequestClose:w,children:[(0,n.jsx)(u.SettingRow,{flow:"wrap",label:x("label"),children:(0,n.jsx)(c.TextInput,{"aria-label":x("label"),className:"w-100",size:"sm",value:null!==(t=N.resultsLabel)&&void 0!==t?t:x("results"),onChange:e=>{var t,a,i;t="resultsLabel",a=e.target.value,i=x("results"),d(t,a===i?null:a)}})}),(0,n.jsx)(u.SettingRow,{flow:"wrap",label:x("selectMode"),children:(0,n.jsxs)(c.Select,{"aria-label":x("selectMode"),className:"w-100",size:"sm",value:null!==(a=N.resultSelectMode)&&void 0!==a?a:y.Single,onChange:e=>{d("resultSelectMode",e.target.value,!1)},children:[(0,n.jsx)("option",{value:y.Single,children:x("single")}),(0,n.jsx)("option",{value:y.Multiple,children:x("multiple")})]})}),(0,n.jsx)(u.SettingRow,{flow:"wrap",label:x("chooseMode"),children:(0,n.jsxs)(c.Select,{"aria-label":x("chooseMode"),className:"w-100",size:"sm",value:N.resultFieldsType,onChange:e=>{d("resultFieldsType",e.target.value,!0)},children:[(0,n.jsx)("option",{value:h.PopupSetting,children:x("field_PopupSetting")}),(0,n.jsx)("option",{value:h.SelectAttributes,children:x("field_SelectAttributes")})]})}),(0,n.jsx)(u.SettingRow,{children:(0,n.jsxs)("label",{children:[(0,n.jsx)(c.Checkbox,{className:"mr-2",checked:null!==(i=N.resultExpandByDefault)&&void 0!==i&&i,onChange:(e,t)=>{d("resultExpandByDefault",t)}}),(0,n.jsx)("span",{children:x("expandByDefault")})]})}),N.resultFieldsType===h.SelectAttributes&&(0,n.jsxs)(u.SettingRow,{flow:"wrap",label:x("configTitle"),children:[(0,n.jsx)(c.TextArea,{"aria-label":x("configTitle"),className:"mt-2 w-100",css:s.css`
              background-color: var(--ref-palette-neutral-300);
              z-index: 1;
            `,height:80,onChange:T,onAcceptValue:C,spellCheck:!1,value:b,ref:v}),(0,n.jsx)("div",{className:"w-100",css:s.css`height: 32px; background-color: var(--ref-palette-neutral-300);`,children:(0,n.jsx)(c.Button,{"aria-label":x("configTitle"),ref:S,onClick:M,type:"tertiary",icon:!0,children:(0,n.jsx)(pe,{size:"s"})})}),(0,n.jsx)(c.Popper,{open:m,placement:"left-start",reference:S.current,shiftOptions:ge,flipOptions:me,arrowOptions:!0,toggle:()=>{I(!1)},trapFocus:!1,autoFocus:!1,children:(0,n.jsx)("div",{css:s.css`
              width: 240px;
              height: 360px;
              .component-main-data-and-view {
                display: none;
              }
              .field-list {
                height: calc(100% - 60px) !important;
              }
            `,children:(0,n.jsx)(se.ExpressionBuilder,{widgetId:l,types:(0,s.Immutable)([se.ExpressionBuilderType.Attribute]),useDataSources:(0,s.Immutable)([o.useDataSource]),expression:null,onChange:R})})})]}),N.resultFieldsType===h.SelectAttributes&&(0,n.jsx)(re,{useDataSource:o.useDataSource,label:x("configFields"),selectedFields:o.resultDisplayFields,onFieldsChanged:e=>{d("resultDisplayFields",e,!0)}}),(0,n.jsx)(u.SettingRow,{role:"group","aria-label":x("sortRecords"),flow:"wrap",label:x("sortRecords"),css:s.css`.no-sort-remind {margin-top: 0 !important;}`,children:(0,n.jsx)(X.Sort,{onChange:e=>{(e=>{const{dataSourceId:t,mainDataSourceId:a,dataViewId:i,rootDataSourceId:l}=o.useDataSource,n={dataSourceId:t,mainDataSourceId:a,dataViewId:i,rootDataSourceId:l,fields:o.useDataSource.fields};let s=o.set("sortOptions",e);s=s.set("useDataSource",n),r(s,!0)})(e)},value:(0,s.Immutable)(N.sortOptions),useDataSource:N.useDataSource})})]})}const he=(0,s.Immutable)([s.AllDataSourceTypes.FeatureLayer,s.AllDataSourceTypes.SceneLayer,s.AllDataSourceTypes.BuildingComponentSubLayer,s.AllDataSourceTypes.OrientedImageryLayer,s.AllDataSourceTypes.ImageryLayer,s.AllDataSourceTypes.SubtypeSublayer]);function Se(e){var t;const{index:i,total:l,arrangeType:o,widgetId:d,queryItem:p,onQueryItemAdded:g,onQueryItemChanged:m,handleStageChange:I,visible:h}=e,S=s.hooks.useTranslation(j),[y,v]=s.React.useState(""),x=Object.assign({},te,p),f=s.React.useRef(void 0),N=null!=x.useDataSource?(0,s.Immutable)([x.useDataSource]):void 0,D=z({widgetId:d,useDataSourceId:null===(t=x.useDataSource)||void 0===t?void 0:t.dataSourceId});s.React.useEffect(()=>{(null==p?void 0:p.name)&&y!==p.name&&v(p.name)},[null==p?void 0:p.name]),s.React.useEffect(()=>{h&&f.current&&(0,s.focusElementInKeyboardMode)(f.current)},[h]);const w=s.React.useCallback((e,t)=>{f.current=t.target,I(e)},[I]),M=e=>{var t;if(e){if((null===(t=null==p?void 0:p.useDataSource)||void 0===t?void 0:t.dataSourceId)&&s.dataSourceUtils.areDerivedFromSameMain(p.useDataSource.dataSourceId,e.dataSourceId)){let t=p.setIn(["useDataSource","dataSourceId"],e.dataSourceId);const a=s.DataSourceManager.getInstance().getDataSource(e.dataSourceId).getLabel();return e.dataViewId?t=t.setIn(["useDataSource","dataViewId"],e.dataViewId).set("name",a):p.useDataSource.dataViewId&&(t=t.set("useDataSource",t.useDataSource.without("dataViewId")).set("name",a)),void m(i,t,!0)}s.DataSourceManager.getInstance().createDataSourceByUseDataSource((0,s.Immutable)(e)).then(e=>{const t=b(e);return t||Promise.reject(Error("")),t}).then(t=>{if(null==p){const a=function(e,t,a){const i=`${Math.random()}`.slice(2),l=null==a?void 0:a.getLabel();return(0,s.Immutable)({configId:i,name:l,useDataSource:t,outputDataSourceId:`${e}_output_${i}`,spatialRelationUseDataSources:[]})}(d,e,t);g(a)}else{const a=(0,s.Immutable)({configId:p.configId,name:null==t?void 0:t.getLabel(),useDataSource:e,outputDataSourceId:p.outputDataSourceId,spatialRelationUseDataSources:[]});m(i,a,!0)}})}},T=s.React.useCallback((e,t,a=!1)=>{let l;l=null==t?p.without(e):p.set(e,t),m(i,l,a)},[m,i,p]),C=(e,t=!1)=>{m(i,e,t)},R=s.React.useCallback(e=>{v(e.target.value)},[]),O=s.React.useCallback(e=>{e.trim().length>0?T("name",e,!0):v(p.name)},[null==p?void 0:p.name,T]);return(0,n.jsx)("div",{className:(0,s.classNames)("h-100",{"d-none":!h}),children:(0,n.jsxs)("div",{css:s.css`height: 100%;overflow: auto;`,children:[(0,n.jsx)(u.SettingSection,{role:"group","aria-label":S("data"),title:S("data"),className:"pt-0",children:(0,n.jsx)(u.SettingRow,{children:(0,n.jsx)(r.DataSourceSelector,{widgetId:d,disableRemove:()=>!0,mustUseDataSource:!0,closeDataSourceListOnChange:!0,types:he,isMultiple:!1,useDataSources:D?N:void 0,onChange:e=>{M(null==e?void 0:e[0])}})})}),p&&D&&(0,n.jsxs)(s.React.Fragment,{children:[(0,n.jsxs)(u.SettingSection,{role:"group","aria-label":S("label"),title:S("label"),children:[(0,n.jsx)(u.SettingRow,{children:(0,n.jsx)(c.TextInput,{"aria-label":S("label"),className:"w-100",size:"sm",value:y,onChange:R,onAcceptValue:O})}),l<2&&o!==a.Inline&&(0,n.jsx)(u.SettingRow,{tag:"label",label:S("displayLabel"),children:(0,n.jsx)(c.Switch,{checked:x.displayLabel,onChange:e=>{T("displayLabel",e.target.checked)}})})]}),(0,n.jsx)(u.SettingSection,{role:"group","aria-label":S("icon"),children:(0,n.jsx)(u.SettingRow,{label:S("icon"),truncateLabel:!0,children:(0,n.jsx)($.IconPicker,{icon:x.icon,onChange:e=>{T("icon",e)},configurableOption:"none",setButtonUseColor:!1})})}),(0,n.jsx)(ie,{queryItem:p,onPropertyChanged:T,onQueryItemChanged:C},`${p.configId}_attr`),(0,n.jsx)(ne,{queryItem:p,onPropertyChanged:T,handleStageChange:w},`${p.configId}_spatial`),(0,n.jsx)(Ie,{widgetId:d,queryItem:p,onPropertyChanged:T,onQueryItemChanged:C},`${p.configId}_result`)]})]})})}var ye=m(86058),ve=m.n(ye),je=function(e,t){var a={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(a[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(i=Object.getOwnPropertySymbols(e);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(e,i[l])&&(a[i[l]]=e[i[l]])}return a};var xe=m(42588),be=m.n(xe),fe=function(e,t){var a={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(a[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(i=Object.getOwnPropertySymbols(e);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(e,i[l])&&(a[i[l]]=e[i[l]])}return a};var Ne=m(2985),De=m.n(Ne),we=function(e,t){var a={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(a[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(i=Object.getOwnPropertySymbols(e);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(e,i[l])&&(a[i[l]]=e[i[l]])}return a};var Me=m(60846),Te=m.n(Me),Ce=function(e,t){var a={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(a[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(i=Object.getOwnPropertySymbols(e);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(e,i[l])&&(a[i[l]]=e[i[l]])}return a};function Re(e){const{enabled:t,distance:a,unit:i,onEnableChanged:l,onDistanceChanged:o,onUnitChanged:r}=e,p=s.hooks.useTranslation(c.defaultMessages,j);return(0,n.jsxs)(s.React.Fragment,{children:[(0,n.jsx)(u.SettingRow,{tag:"label",label:p("enableBuffer"),children:(0,n.jsx)(c.Switch,{checked:t,onChange:e=>{l(e.target.checked)}})}),t&&(0,n.jsxs)(s.React.Fragment,{children:[(0,n.jsx)(u.SettingRow,{label:p("defaultDistance"),children:(0,n.jsx)(c.NumericInput,{css:s.css`
                flex: 0 0 40%;
              `,"aria-label":p("defaultDistance"),className:"w-100",size:"sm",value:a,onChange:e=>{o(e)}})}),(0,n.jsx)(u.SettingRow,{label:p("defaultUnit"),children:(0,n.jsx)(c.Select,{css:s.css`
                flex: 0 0 40%;
              `,size:"sm",value:i,"aria-label":p("defaultUnit"),onChange:e=>{r(e.target.value)},children:Object.values(d).map(e=>(0,n.jsx)("option",{value:e,children:p(`unit_${e}`)},e))})})]})]})}var Oe=m(74919),ze=m.n(Oe),Pe=function(e,t){var a={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(a[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(i=Object.getOwnPropertySymbols(e);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(e,i[l])&&(a[i[l]]=e[i[l]])}return a};var Ae=function(e,t){var a={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(a[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(i=Object.getOwnPropertySymbols(e);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(e,i[l])&&(a[i[l]]=e[i[l]])}return a};const Be=e=>{const t=window.SVG,{className:a}=e,i=Ae(e,["className"]),l=(0,s.classNames)("jimu-icon jimu-icon-component",a);return t?(0,n.jsx)(t,Object.assign({className:l,src:V()},i)):(0,n.jsx)("svg",Object.assign({className:l},i))},Le=[{type:e.Point,drawToolName:"point",icon:(0,n.jsx)(e=>{const t=window.SVG,{className:a}=e,i=Pe(e,["className"]),l=(0,s.classNames)("jimu-icon jimu-icon-component",a);return t?(0,n.jsx)(t,Object.assign({className:l,src:ze()},i)):(0,n.jsx)("svg",Object.assign({className:l},i))},{})},{type:e.Polyline,drawToolName:"polyline",icon:(0,n.jsx)(e=>{const t=window.SVG,{className:a}=e,i=je(e,["className"]),l=(0,s.classNames)("jimu-icon jimu-icon-component",a);return t?(0,n.jsx)(t,Object.assign({className:l,src:ve()},i)):(0,n.jsx)("svg",Object.assign({className:l},i))},{})},{type:e.Polygon,drawToolName:"polygon",icon:(0,n.jsx)(e=>{const t=window.SVG,{className:a}=e,i=fe(e,["className"]),l=(0,s.classNames)("jimu-icon jimu-icon-component",a);return t?(0,n.jsx)(t,Object.assign({className:l,src:be()},i)):(0,n.jsx)("svg",Object.assign({className:l},i))},{})},{type:e.Rectangle,drawToolName:"rectangle",icon:(0,n.jsx)(e=>{const t=window.SVG,{className:a}=e,i=we(e,["className"]),l=(0,s.classNames)("jimu-icon jimu-icon-component",a);return t?(0,n.jsx)(t,Object.assign({className:l,src:De()},i)):(0,n.jsx)("svg",Object.assign({className:l},i))},{})},{type:e.Circle,drawToolName:"circle",icon:(0,n.jsx)(e=>{const t=window.SVG,{className:a}=e,i=Ce(e,["className"]),l=(0,s.classNames)("jimu-icon jimu-icon-component",a);return t?(0,n.jsx)(t,Object.assign({className:l,src:Te()},i)):(0,n.jsx)("svg",Object.assign({className:l},i))},{})}],Qe=s.css`
  border-top: 1px solid var(--ref-palette-neutral-700);
  .title {
    font-weight: 500;
    font-size: 0.875rem;
    color: var(--ref-palette-neutral-1000);
  }
`;function Ee(e){const{index:t,handleStageChange:a,queryItem:l,onQueryItemChanged:o,visible:r}=e,d=Object.assign({},j,c.defaultMessages),p=s.hooks.useTranslation(d),g=s.React.useRef(void 0),m=Object.assign({},te,l),I=s.ReactRedux.useSelector(e=>{var t;if((null===(t=l.spatialMapWidgetIds)||void 0===t?void 0:t.length)>0){const t=l.spatialMapWidgetIds[0];return null!=e.appStateInBuilder.appConfig.widgets[t]}return!1}),h=s.React.useCallback((e,a,i=!1)=>{const n=l.set(e,a);o(t,n,i)},[o,l,t]);s.React.useEffect(()=>{r&&(0,s.focusElementInKeyboardMode)(g.current)},[r]);const S=s.React.useCallback(e=>{const t=x(e,l.spatialFilterTypes?[...l.spatialFilterTypes]:[]);h("spatialFilterTypes",t)},[h,l]),y=s.React.useCallback(e=>{let a=l.set("spatialMapWidgetIds",e);e&&0!==e.length||(a=a.set("spatialFilterTypes",[])),o(t,a,!1)},[o,t,l]);return l?(0,n.jsxs)("div",{className:(0,s.classNames)({"d-none":!r}),children:[(0,n.jsxs)("div",{className:"d-flex align-items-center px-4 pt-4",css:Qe,children:[(0,n.jsx)(c.Button,{ref:g,"aria-label":p("back"),type:"tertiary",size:"sm",icon:!0,className:"p-0 action-btn",onClick:()=>{a(0)},children:(0,n.jsx)(Be,{autoFlip:!0})}),(0,n.jsx)("div",{className:"title flex-grow-1 text-truncate ml-2",title:p("featureFromMap"),children:p("featureFromMap")})]}),(0,n.jsx)(u.SettingSection,{role:"group",title:p("selectMapWidget"),className:"text-truncate",children:(0,n.jsx)(u.SettingRow,{children:(0,n.jsx)(u.MapWidgetSelector,{onSelect:y,useMapWidgetIds:m.spatialMapWidgetIds})})}),I&&(0,n.jsxs)(u.SettingSection,{role:"group","aria-label":p("geometryTypes"),title:p("geometryTypes"),children:[(0,n.jsx)(u.SettingRow,{children:(0,n.jsxs)("label",{children:[(0,n.jsx)(c.Checkbox,{className:"mr-2",checked:m.spatialFilterTypes.includes(i.CurrentMapExtent),onChange:()=>{S(i.CurrentMapExtent)}}),(0,n.jsx)("span",{children:p("spatialFilterType_CurrentMapExtent")})]})}),(0,n.jsx)(u.SettingRow,{children:(0,n.jsxs)("label",{children:[(0,n.jsx)(c.Checkbox,{className:"mr-2",checked:m.spatialFilterTypes.includes(i.InteractiveDrawMode),onChange:()=>{S(i.InteractiveDrawMode)}}),(0,n.jsx)("span",{children:p("spatialFilterType_InteractiveDrawMode")})]})}),m.spatialFilterTypes.includes(i.InteractiveDrawMode)&&(0,n.jsxs)(s.React.Fragment,{children:[(0,n.jsx)(u.SettingRow,{role:"group","aria-label":p("chooseSelectionTools"),flow:"wrap",className:"d-block",label:p("chooseSelectionTools"),children:Le.map(e=>{const{type:t,icon:a,drawToolName:i}=e,l=m.spatialInteractiveCreateToolTypes,s=l.includes(t);return(0,n.jsxs)("div",{className:"d-flex mt-2",children:[a,(0,n.jsx)("label",{className:"ml-2",children:p(`sketchTool_${i}`)}),(0,n.jsx)(c.Switch,{"aria-label":p(`sketchTool_${i}`),className:"ml-auto",checked:s,onChange:()=>{const e=x(t,[...l]);h("spatialInteractiveCreateToolTypes",e)}})]},t)})}),(0,n.jsx)(Re,{enabled:m.spatialInteractiveEnableBuffer,distance:m.spatialInteractiveBufferDistance,unit:m.spatialInteractiveBufferUnit,onEnableChanged:e=>{h("spatialInteractiveEnableBuffer",e)},onDistanceChanged:e=>{h("spatialInteractiveBufferDistance",e)},onUnitChanged:e=>{h("spatialInteractiveBufferUnit",e)}})]})]})]}):null}const ke=s.css`
  border-top: 1px solid var(--ref-palette-neutral-700);
  .title {
    font-weight: 500;
    font-size: 0.875rem;
    color: var(--ref-palette-neutral-1000);
  }
`,Ue=(0,s.Immutable)([s.AllDataSourceTypes.FeatureLayer]),Ze={overrideItemBlockInfo:()=>({name:f.TreeItemActionType.RenderOverrideItem,children:[{name:f.TreeItemActionType.RenderOverrideItemDroppableContainer,children:[{name:f.TreeItemActionType.RenderOverrideItemDraggableContainer,children:[{name:f.TreeItemActionType.RenderOverrideItemBody,children:[{name:f.TreeItemActionType.RenderOverrideItemMainLine,children:[{name:f.TreeItemActionType.RenderOverrideItemDragHandle},{name:f.TreeItemActionType.RenderOverrideItemTitle}]}]}]}]}]})};function Fe(e){var t;return!(null===(t=s.DataSourceManager.getInstance().getDataSource(e.id))||void 0===t?void 0:t.getGeometryType())}function We(e){var t,a;const{index:i,widgetId:o,handleStageChange:d,queryItem:p,onQueryItemChanged:g,visible:m}=e,I=s.hooks.useTranslation(j),h=s.React.useRef(void 0),S=s.React.useMemo(()=>(0,s.Immutable)(Object.entries(l).map(([e,t])=>({value:t,label:I(`spatialRelation_${e}`)}))),[I]);s.React.useEffect(()=>{m&&(0,s.focusElementInKeyboardMode)(h.current)},[m]);const y=(e,t,a=!1)=>{const l=p.set(e,t);g(i,l,a)},v=s.React.useCallback(e=>I("numSelected",{number:e.length}),[I]),x=s.hooks.useEventCallback((e,t)=>{y("spatialRelations",t)}),b=s.hooks.useEventCallback(e=>{const t=e.map(e=>e.dataViewId!==s.CONSTANTS.SELECTION_DATA_VIEW_ID?Object.assign(Object.assign({},e),{dataSourceId:s.DataSourceManager.getInstance().getDataSource(e.mainDataSourceId).getDataView(s.CONSTANTS.SELECTION_DATA_VIEW_ID).id,dataViewId:s.CONSTANTS.SELECTION_DATA_VIEW_ID}):e);y("spatialRelationUseDataSources",t,!0)}),N=Object.assign({},te,p),D=(0,s.Immutable)(null!==(t=N.spatialRelationUseDataSources)&&void 0!==t?t:[]),w=(0,s.Immutable)(null===(a=N.spatialRelations)||void 0===a?void 0:a.filter(e=>Object.values(l).includes(e)));return p?(0,n.jsxs)("div",{className:(0,s.classNames)({"d-none":!m}),children:[(0,n.jsxs)("div",{className:"d-flex align-items-center px-4 pt-4",css:ke,children:[(0,n.jsx)(c.Button,{ref:h,"aria-label":I("back"),type:"tertiary",size:"sm",icon:!0,className:"p-0 action-btn",onClick:()=>{d(0)},children:(0,n.jsx)(Be,{autoFlip:!0})}),(0,n.jsx)("div",{className:"title flex-grow-1 text-truncate ml-2",title:I("featureFromDs"),children:I("featureFromDs")})]}),(0,n.jsxs)("div",{css:s.css`height: calc(100% - 30px); overflow: auto;`,children:[(0,n.jsxs)(u.SettingSection,{role:"group","aria-label":I("selectionViewOnly"),children:[(0,n.jsx)(u.SettingRow,{flow:"wrap",truncateLabel:!0,label:I("selectionViewOnly"),children:(0,n.jsx)(r.DataSourceSelector,{widgetId:o,buttonLabel:I("newFilterLayer"),disableRemove:()=>!1,disableDataView:!0,mustUseDataSource:!0,types:Ue,isMultiple:!0,hideDs:Fe,isMultipleDataView:!1,useDataSources:D,onChange:b})}),(0,n.jsx)(u.SettingRow,{children:(0,n.jsxs)(c.Label,{children:[(0,n.jsx)(c.Checkbox,{className:"mr-2",checked:p.spatialIncludeRuntimeData,onChange:(e,t)=>{y("spatialIncludeRuntimeData",t)}}),I("includeRuntimeData")]})})]}),(0,n.jsxs)(u.SettingSection,{children:[(0,n.jsx)(u.SettingRow,{flow:"wrap",label:I("chooseSpatialRelationshipRules"),children:(0,n.jsx)(c.MultiSelect,{"aria-label":I("chooseSpatialRelationshipRules"),values:w,onChange:x,displayByValues:v,size:"sm",children:Object.entries(l).map(([e,t])=>(0,n.jsx)(c.MultiSelectItem,{value:t,label:I(`spatialRelation_${e}`)},t))})}),(null==w?void 0:w.length)>0&&(0,n.jsx)(u.SettingRow,{children:(0,n.jsx)(f.List,Object.assign({className:"selected-fields-list w-100",itemsJson:Array.from(w).map((e,t)=>{const a=S.find(t=>t.value===e).label;return{itemStateDetailContent:e,itemKey:`${t}`,itemStateTitle:a,itemStateCommands:[]}}),dndEnabled:!0,onUpdateItem:(e,t)=>{const{itemJsons:a}=t.props,[,i]=a,l=i.map(e=>e.itemStateDetailContent);y("spatialRelations",l)}},Ze))})]}),(0,n.jsx)(u.SettingSection,{children:(0,n.jsx)(Re,{enabled:N.spatialRelationEnableBuffer,distance:N.spatialRelationBufferDistance,unit:N.spatialRelationBufferUnit,onEnableChanged:e=>{y("spatialRelationEnableBuffer",e)},onDistanceChanged:e=>{y("spatialRelationBufferDistance",e)},onUnitChanged:e=>{y("spatialRelationBufferUnit",e)}})})]})]}):null}function Ge(e){const{widgetId:t,index:a,queryItem:i,onQueryItemChanged:l}=e,[o,r]=s.React.useState(0);s.React.useEffect(()=>{(null==i?void 0:i.useDataSource)||r(0)},[null==i?void 0:i.useDataSource]);const c=e=>{e>=0&&r(e)};return(0,n.jsxs)("div",{className:"h-100",children:[(0,n.jsx)(Se,Object.assign({},e,{visible:0===o,handleStageChange:c})),i&&(0,n.jsx)(Ee,{index:a,queryItem:i,visible:1===o,onQueryItemChanged:l,handleStageChange:c}),i&&(0,n.jsx)(We,{index:a,widgetId:t,queryItem:i,visible:2===o,onQueryItemChanged:l,handleStageChange:c})]})}const{iconMap:Ve,iconPropMap:He}=K,qe=s.css`
  height: calc(100vh - 485px);
  & > div {
    top: 50%;
    width: 100%;
    transform: translateY(-50%);
    color: var(--ref-palette-neutral-800);
  }
  p {
    color: var(--ref-palette-neutral-1000);
    font-size: 0.875rem;
    margin: ${s.polished.rem(16)} auto 0;
    line-height: 1.5;
    width: ${s.polished.rem(228)};
  }
`;function Ye(e){const{queryItems:t=[],onNewQueryItemAdded:a,onQueryItemChanged:i,onQueryItemRemoved:l,onOrderChanged:o}=e,r=s.React.useRef(null),d=s.React.useRef(null),[p,g]=s.React.useState(-1),m=s.hooks.useTranslation(j),I=s.hooks.useLatest(p),h=s.React.useCallback(()=>{g(t.length)},[t.length]),S=s.React.useCallback(()=>{g(-1)},[]),y={overrideItemBlockInfo:({itemBlockInfo:e},t)=>({name:f.TreeItemActionType.RenderOverrideItem,children:[{name:f.TreeItemActionType.RenderOverrideItemDroppableContainer,withListGroupItemWrapper:!1,children:[{name:f.TreeItemActionType.RenderOverrideItemDraggableContainer,children:[{name:f.TreeItemActionType.RenderOverrideItemBody,children:[{name:f.TreeItemActionType.RenderOverrideItemMainLine,children:[{name:f.TreeItemActionType.RenderOverrideItemDragHandle},{name:f.TreeItemActionType.RenderOverrideItemIcon,autoCollapsed:!0},{name:f.TreeItemActionType.RenderOverrideItemTitle},{name:f.TreeItemActionType.RenderOverrideItemDetailToggle},{name:f.TreeItemActionType.RenderOverrideItemCommands}]}]}]}]}]})};return(0,n.jsxs)("div",{ref:r,css:s.css`
        border-bottom: 1px solid var(--ref-palette-neutral-700);
        &.h-100 > .jimu-widget-setting--section {
          border-bottom: none;
        }
      `,className:(0,s.classNames)("d-flex flex-column",{"h-100":0===t.length}),children:[(0,n.jsxs)(u.SettingSection,{role:"group","aria-label":m("queryItem"),title:m("queryItem"),children:[(0,n.jsx)(u.SettingRow,{flow:"wrap",children:(0,n.jsx)(c.Button,{"aria-describedby":0===t.length?"noQueryItemDesc":void 0,className:"w-100 text-default set-link-btn",onClick:h,type:"primary",ref:d,children:(0,n.jsxs)("div",{className:"w-100 px-2 text-truncate",children:[(0,n.jsx)(c.Icon,{icon:Ve.iconAdd,className:"mr-1",size:14}),m("newQuery")]})})}),(0,n.jsxs)("div",{className:"setting-ui-unit-list mt-4",children:[(0,n.jsx)(f.List,Object.assign({className:"setting-ui-unit-list-existing",itemsJson:t.map((e,t)=>{var a;return{itemStateDetailContent:e,itemKey:`${t}`,itemStateChecked:p===t,itemStateIcon:{icon:null===(a=e.icon)||void 0===a?void 0:a.svg},itemStateTitle:e.name,itemStateCommands:[{label:m("remove"),iconProps:()=>({icon:Ve.iconClose,size:12}),action:({data:e})=>{const{itemJsons:[t]}=e;l(+t.itemKey)}}]}}),dndEnabled:!0,renderOverrideItemDetailToggle:(t,a)=>{var i;const{itemJsons:l}=a.props,[s]=l,o=null===(i=null==s?void 0:s.itemStateDetailContent)||void 0===i?void 0:i.useDataSource;return(0,n.jsx)(P,{widgetId:e.widgetId,useDataSource:o})},onUpdateItem:(e,t)=>{const{itemJsons:a}=t.props,[,i]=a;o(i.map(e=>e.itemStateDetailContent))},onClickItemBody:(e,t)=>{const{itemJsons:[a]}=t.props;var i;i=+a.itemKey,I.current===i?g(-1):g(i)}},y)),t.length===p&&(0,n.jsx)(f.List,Object.assign({className:"setting-ui-unit-list-new pt-1",css:s.css`.jimu-tree-item__detail-toggle { display: none !important; }`,itemsJson:[{icon:He.defaultIconResult,name:"......"}].map(e=>{var t;return{itemStateDetailContent:e,itemKey:`${p}`,itemStateChecked:!0,itemStateIcon:{icon:null===(t=e.icon)||void 0===t?void 0:t.svg},itemStateTitle:e.name,itemStateCommands:[]}}),dndEnabled:!1},y))]})]}),0===t.length&&t.length!==p&&(0,n.jsx)("div",{className:"text-center flex-grow-1",css:qe,children:(0,n.jsxs)("div",{className:"position-absolute",children:[(0,n.jsx)(c.Icon,{size:48,icon:Ve.iconEmpty}),(0,n.jsx)("p",{id:"noQueryItemDesc",className:"trigger-tip",children:m("noQueryTip",{newQuery:m("newQuery")})})]})}),(0,n.jsx)(u.SidePopper,{isOpen:p>=0&&!s.urlUtils.getAppIdPageIdFromUrl().pageId,toggle:S,position:"right",trigger:r.current,title:m("setQuery"),backToFocusNode:d.current,children:(0,n.jsx)("div",{className:"setting-query__query-item-panel w-100 h-100",children:(0,n.jsx)(Ge,{widgetId:e.widgetId,index:p,total:t.length,arrangeType:e.arrangeType,queryItem:t[p],onQueryItemAdded:a,onQueryItemChanged:i})})})]})}const{arrangementStyleMap:_e}=K,Je=s.css`
  .icon-btn {
    padding: 0;
    &.active {
      outline: 2px solid var(--sys-color-primary-light) !important;
    }
    img {
      background-color: var(--ref-palette-neutral-300);
    }
  }
`;function Ke(e){const{arrangeType:t,arrangeWrap:i=!1,onArrangeTypeChanged:l,onArrangeWrapChanged:o}=e,r=s.hooks.useTranslation(j);return(0,n.jsxs)(u.SettingSection,{role:"group","aria-label":r("arrangementStyle"),title:r("arrangementStyle"),css:Je,children:[(0,n.jsx)(u.SettingRow,{flow:"wrap",children:(0,n.jsx)(c.ButtonGroup,{className:"w-100 d-flex justify-content-between",children:Object.entries(_e).map(([e,a])=>(0,n.jsx)(c.Tooltip,{title:a.getTitle(r),placement:"bottom",children:(0,n.jsx)(c.Button,{onClick:()=>{l(e)},icon:!0,size:"sm",variant:"text",disableRipple:!0,active:t===e,"aria-pressed":t===e,children:(0,n.jsx)(c.Icon,{width:68,height:68,icon:a.icon,autoFlip:!0})})},e))})}),t===a.Inline&&(0,n.jsx)(u.SettingRow,{tag:"label",label:r("wrapItems"),children:(0,n.jsx)(c.Switch,{checked:i,onChange:e=>{o(e.target.checked)}})})]})}const $e=Object.assign({},j,c.defaultMessages);class Xe extends s.React.PureComponent{constructor(e){super(e),this.getI18nMessage=function(e){const{intl:t,defaultMessages:a={}}=e||{};return(e,i)=>{const{messages:l,values:n}=i||{};return t.formatMessage({id:e,defaultMessage:(l||a)[e]},n)}}({intl:this.props.intl,defaultMessages:$e}),this.updateWidgetJson=(...e)=>{const[t,...a]=e,i=Object.assign(Object.assign({id:this.props.id},t));this.props.onSettingChange(i,...a)},this.updateConfigForOptions=(...e)=>{let t=null;const a=e.reduce((e,[a,i,l])=>("queryItems"===a&&(null==l?void 0:l.dsUpdateRequired)&&(t=this.getAllDataSources(i)),e.set(a,i)),this.props.config);t?this.updateWidgetJson({config:a,useDataSources:Object.values(t.useDataSourceMap)},t.outputDataSources):this.updateWidgetJson({config:a})},this.handleArrangeTypeChange=e=>{this.props.onSettingChange({id:this.props.id,config:this.props.config.set("arrangeType",e)})},this.handleArrangeWrapChange=e=>{this.props.onSettingChange({id:this.props.id,config:this.props.config.set("arrangeWrap",e)})},this.handleResultDirectionChange=e=>{this.props.onSettingChange({id:this.props.id,config:this.props.config.set("resultListDirection",e?p.Vertical:p.Horizontal)})},this.handleResultPageStyleChange=e=>{this.props.onSettingChange({id:this.props.id,config:this.props.config.set("resultPagingStyle",e.target.value)})},this.handleDefaultPageSizeChange=e=>{null!=e&&this.props.onSettingChange({id:this.props.id,config:this.props.config.set("defaultPageSize",e)})},this.tryRemoveQueryItem=e=>{const t=this.props.config.queryItems[e],a=(0,o.getAppConfigAction)().appConfig;0===r.dataComponentsUtils.getWidgetsUsingDsOrItsDescendantDss(t.outputDataSourceId,a.widgets).length?this.doRemoveQueryItem(e,!0):this.setState({showRemoveQueryItemWarning:!0,indexOfQueryItemToRemove:e,dsToRemove:t.outputDataSourceId})},this.beforeRemovingDataSource=()=>{this.doRemoveQueryItem(this.state.indexOfQueryItemToRemove)},this.doRemoveQueryItem=(e,t=!1)=>{const a={dsUpdateRequired:t},i=this.props.config.queryItems.asMutable({deep:!0});i.splice(e,1),this.updateConfigForOptions(["queryItems",i,a])},this.afterRemovingDataSource=()=>{this.setState({showRemoveQueryItemWarning:!1,indexOfQueryItemToRemove:-1,dsToRemove:null})},this.addQueryItem=e=>{var t,a;this.updateQueryItem(null!==(a=null===(t=this.props.config.queryItems)||void 0===t?void 0:t.length)&&void 0!==a?a:0,e,!0)},this.updateQueryItem=(e,t,a=!1)=>{var i;let l=null!==(i=this.props.config.queryItems)&&void 0!==i?i:(0,s.Immutable)([]);l=s.Immutable.set(l,e,t),this.updateConfigForOptions(["queryItems",l,{dsUpdateRequired:a}])},this.reOrderQueryItems=e=>{this.updateConfigForOptions(["queryItems",e])},this.getAllDataSources=e=>{const t={};return(0,s.Immutable)(e).asMutable({deep:!0}).reduce((e,a)=>{var i,l;[a.useDataSource,...a.spatialRelationUseDataSources].forEach(i=>{var l,n,o,r;const c=i.dataSourceId;e.useDataSourceMap[c]=e.useDataSourceMap[c]||i;const u=(a.sortOptions||[]).filter(e=>e.jimuFieldName).map(e=>e.jimuFieldName),d=null===(l=a.resultTitleExpression)||void 0===l?void 0:l.match(/\{(\w*)\}/g),p=[];if((null==d?void 0:d.length)>0){const e=s.DataSourceManager.getInstance().getDataSource(c),t=null!==(o=null===(n=null==e?void 0:e.getSchema())||void 0===n?void 0:n.fields)&&void 0!==o?o:{};d.forEach(e=>{const a=e.substring(1,e.length-1);t[a]&&p.push(a)})}const g=null!==(r=t[c])&&void 0!==r?r:new Set;e.useDataSourceMap[c].fields=Array.from(new Set([...Array.from(g),...i.fields||[],...p,...a.resultFieldsType===h.SelectAttributes&&a.resultDisplayFields?a.resultDisplayFields:[],...u])),t[c]=e.useDataSourceMap[c].fields,a.resultFieldsType!==h.SelectAttributes&&(e.useDataSourceMap[c].useFieldsInPopupInfo=!0)});const n=s.DataSourceManager.getInstance().getDataSource(null===(i=a.useDataSource)||void 0===i?void 0:i.dataSourceId);if(n){const t=null===(l=b(n))||void 0===l?void 0:l.getDataSourceJson(),i={id:a.outputDataSourceId,label:this.getI18nMessage("outputDsLabel",{values:{label:a.name}}),type:(null==t?void 0:t.type)===s.AllDataSourceTypes.SubtypeSublayer?s.AllDataSourceTypes.FeatureLayer:null==t?void 0:t.type,geometryType:null==t?void 0:t.geometryType,url:null==t?void 0:t.url,itemId:null==t?void 0:t.itemId,portalUrl:null==t?void 0:t.portalUrl,originDataSources:[a.useDataSource],layerId:null==t?void 0:t.layerId,isDataInDataSourceInstance:null==t?void 0:t.isDataInDataSourceInstance,query:(null==t?void 0:t.type)===s.AllDataSourceTypes.SubtypeSublayer?(o=n,{where:{logicalOperator:"AND",parts:[{jimuFieldName:o.getMainDataSource().parentDataSource.getSubtypeField(),operator:"NUMBER_OPERATOR_IS",type:"SINGLE",valueOptions:{inputEditor:"SIMPLE_SELECT",isValid:!0,value:[{value:o.getSubtypeCode(),label:o.getLabel()}]}}]}}):null};e.outputDataSources.push(i)}var o;return e},{useDataSourceMap:{},outputDataSources:[]})},this.hideRemovePopup=()=>{this.setState({showRemoveQueryItemWarning:!1})},this.state={showRemoveQueryItemWarning:!1,indexOfQueryItemToRemove:-1,dsToRemove:null}}render(){var e,t,a,i,l,s;const{config:o}=this.props;let{resultListDirection:d,resultPagingStyle:m,defaultPageSize:I}=o;return d||(d=null!==(a=null===(t=null===(e=o.queryItems)||void 0===e?void 0:e[0])||void 0===t?void 0:t.resultListDirection)&&void 0!==a?a:p.Vertical),m||(m=null!==(s=null===(l=null===(i=o.queryItems)||void 0===i?void 0:i[0])||void 0===l?void 0:l.resultPagingStyle)&&void 0!==s?s:g.MultiPage),(0,n.jsxs)("div",{className:"jimu-widget-setting setting-query__setting-content h-100",children:[(0,n.jsx)(Ye,{widgetId:this.props.id,arrangeType:this.props.config.arrangeType,queryItems:this.props.config.queryItems,onNewQueryItemAdded:this.addQueryItem,onQueryItemRemoved:this.tryRemoveQueryItem,onQueryItemChanged:this.updateQueryItem,onOrderChanged:this.reOrderQueryItems}),this.props.config.queryItems.length>0&&!this.props.controllerWidgetId&&(0,n.jsx)(Ke,{arrangeType:o.arrangeType,arrangeWrap:o.arrangeWrap,onArrangeTypeChanged:this.handleArrangeTypeChange,onArrangeWrapChanged:this.handleArrangeWrapChange}),this.props.config.queryItems.length>0&&(0,n.jsxs)(u.SettingSection,{role:"group","aria-label":this.getI18nMessage("resultStyle"),title:this.getI18nMessage("resultStyle"),children:[(0,n.jsx)(u.SettingRow,{label:this.getI18nMessage("listDirection"),children:(0,n.jsx)(u.DirectionSelector,{"aria-label":this.getI18nMessage("listDirection"),vertical:d===p.Vertical,onChange:this.handleResultDirectionChange})}),(0,n.jsx)(u.SettingRow,{flow:"wrap",label:this.getI18nMessage("pagingStyle"),children:(0,n.jsxs)(c.Select,{"aria-label":this.getI18nMessage("pagingStyle"),className:"w-100",size:"sm",value:m,onChange:this.handleResultPageStyleChange,children:[(0,n.jsx)("option",{value:g.MultiPage,children:this.getI18nMessage("pagingStyle_MultiPage")}),(0,n.jsx)("option",{value:g.LazyLoad,children:this.getI18nMessage("pagingStyle_LazyLoad")})]})}),m===g.MultiPage&&(0,n.jsx)(u.SettingRow,{flow:"wrap",label:this.getI18nMessage("defaultPageSize"),children:(0,n.jsx)(c.NumericInput,{className:"w-100",value:null!=I?I:100,precision:0,min:10,max:1e3,onAcceptValue:this.handleDefaultPageSizeChange})})]}),(0,n.jsx)(r.DataSourceRemoveWarningPopup,{dataSourceId:this.state.dsToRemove,isOpen:this.state.showRemoveQueryItemWarning,toggle:this.hideRemovePopup,reason:r.DataSourceRemoveWaringReason.DataSourceRemoved,afterRemove:this.afterRemovingDataSource,beforeRemove:this.beforeRemovingDataSource})]})}}function et(e){m.p=e}})(),I})())}}});