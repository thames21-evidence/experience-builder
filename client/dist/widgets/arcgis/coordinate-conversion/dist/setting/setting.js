System.register(["jimu-core/emotion","jimu-core","jimu-ui","jimu-ui/advanced/setting-components","jimu-for-builder","jimu-ui/basic/list-tree","jimu-ui/advanced/utility-selector","jimu-arcgis","jimu-ui/advanced/map"],function(t,e){var s={},i={},o={},n={},a={},r={},l={},d={},p={};return{setters:[function(t){s.jsx=t.jsx,s.jsxs=t.jsxs},function(t){i.Immutable=t.Immutable,i.React=t.React,i.SupportedUtilityType=t.SupportedUtilityType,i.css=t.css,i.defaultMessages=t.defaultMessages,i.getAppStore=t.getAppStore,i.lodash=t.lodash,i.polished=t.polished,i.urlUtils=t.urlUtils},function(t){o.AlertPopup=t.AlertPopup,o.Button=t.Button,o.Checkbox=t.Checkbox,o.CollapsablePanel=t.CollapsablePanel,o.Icon=t.Icon,o.Label=t.Label,o.NumericInput=t.NumericInput,o.Option=t.Option,o.Select=t.Select,o.TextInput=t.TextInput,o.Tooltip=t.Tooltip,o.defaultMessages=t.defaultMessages},function(t){n.MapWidgetSelector=t.MapWidgetSelector,n.SettingRow=t.SettingRow,n.SettingSection=t.SettingSection,n.SidePopper=t.SidePopper},function(t){a.BaseWidgetSetting=t.BaseWidgetSetting},function(t){r.List=t.List,r.TreeItemActionType=t.TreeItemActionType},function(t){l.UtilitySelector=t.UtilitySelector},function(t){d.loadArcGISJSAPIModules=t.loadArcGISJSAPIModules},function(t){p.JimuSymbolType=t.JimuSymbolType,p.SymbolSelector=t.SymbolSelector}],execute:function(){t((()=>{var t={4108:t=>{"use strict";t.exports=a},14321:t=>{"use strict";t.exports=o},21149:t=>{t.exports="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgOCA4IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0nIzI4MjgyOCc+DQogICAgPHBhdGggZD0iTTMuNSAzLjV2LTNhLjUuNSAwIDAxMSAwdjNoM2EuNS41IDAgMDEwIDFoLTN2M2EuNS41IDAgMDEtMSAwdi0zaC0zYS41LjUgMCAwMTAtMWgzeiIgZmlsbC1ydWxlPSJldmVub2RkIj48L3BhdGg+DQo8L3N2Zz4="},23499:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M14.938 8A7 7 0 0 1 1.01 9H0a8.001 8.001 0 0 0 15.938-1A8 8 0 0 0 1.02 3.98L1 .702a.5.5 0 1 0-1 .006L.031 5.9l5.128-.826a.5.5 0 0 0-.16-.987L1.819 4.6A7 7 0 0 1 14.938 8"></path></svg>'},42449:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M2 28h28a2 2 0 1 1 0 4H2a2 2 0 1 1 0-4m8.025-3.239-2.278.253a3.2 3.2 0 0 1-3.534-3.534l.253-2.278a6.4 6.4 0 0 1 1.835-3.819L17.913 3.771a5.332 5.332 0 1 1 7.542 7.542L13.843 22.925a6.4 6.4 0 0 1-3.819 1.835z"></path></svg>'},45508:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2M6.5 7.5A.5.5 0 0 1 7 7h1.5v4.5h1a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1h1V8H7a.5.5 0 0 1-.5-.5"></path><path fill="#000" fill-rule="evenodd" d="M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14" clip-rule="evenodd"></path></svg>'},48993:t=>{"use strict";t.exports=p},62686:t=>{"use strict";t.exports=d},67386:t=>{"use strict";t.exports=s},71371:t=>{"use strict";t.exports=l},79244:t=>{"use strict";t.exports=i},79298:t=>{"use strict";t.exports=n},85241:t=>{t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14"><g fill="none" fill-rule="nonzero"><path fill="#000" d="m7.745 7 4.1 4.1a.527.527 0 0 1-.745.746L7 7.746l-4.1 4.1a.527.527 0 0 1-.746-.746l4.1-4.1-4.1-4.1a.527.527 0 0 1 .746-.746l4.1 4.1 4.1-4.1a.527.527 0 0 1 .746.746z"></path><path d="M1 1h12v12H1z"></path></g></svg>'},98640:t=>{"use strict";t.exports=r}},e={};function h(s){var i=e[s];if(void 0!==i)return i.exports;var o=e[s]={exports:{}};return t[s](o,o.exports,h),o.exports}h.d=(t,e)=>{for(var s in e)h.o(e,s)&&!h.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},h.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),h.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},h.p="";var c={};return h.p=window.jimuConfig.baseUrl,(()=>{"use strict";h.r(c),h.d(c,{__set_webpack_public_path__:()=>L,default:()=>U});var t=h(67386),e=h(79244),s=h(14321),i=h(79298),o=h(4108);const n={inputSettingsLabel:"Input settings",outputSettingsLabel:"Output settings",addressSettingsLabel:"Address settings",generalSettingsLabel:"General settings",coordinateLabel:"Label",basemap:"Basemap",addNewLabels:"Add new labels",addConversion:"Add Conversion",deleteLabel:"delete",addConversionCheckboxLabel:"Add new conversion at the top of the list",editOutputFormats:"Edit output formats",defaultGeocodeUrlTooltip:"By default, ArcGIS world geocoding service will be used as locator source. Click on Select Utility button to select your own geocode service.",minCandidateScore:"Minimum candidate score",maxSuggestions:"Maximum suggestions",showFullAddress:"Display the full address along with the place name.",showFullAddressHint:"Hint: Some POIs return only the placename, and users can enable this option to get the full address.",locationSymbol:"Location symbol",symbolLocationHint:"Hint: Symbol for current coordinate location"};function a(t){return e.css`
  .formatLabel {
    width: 194px;
  }

  .hidden {
    display: none;
  }
  `}const r=h(23499);class l extends e.React.PureComponent{constructor(t){super(t),this.nls=t=>{const s=Object.assign({},n,e.defaultMessages);return this.props.intl&&this.props.intl.formatMessage?this.props.intl.formatMessage({id:t,defaultMessage:s[t]}):s[t]},this.onDefaultCoordsChange=t=>{this.setState({defaultCoords:t.target.value},()=>{this.resetToDefaultPattern(this.state.defaultCoords)})},this.onFormatChange=t=>{if(t&&t.target){const e=t.target.value;this.setState({defFormat:e},()=>{this.updateInputSettingsInConfig()})}},this.onResetButtonClick=()=>{const t=this.state.defaultCoords;this.resetToDefaultPattern(t)},this.resetToDefaultPattern=t=>{const e=this.props.allSupportedFormats.find(e=>e.name===t);e&&this.setState({defFormat:e.defaultPattern},()=>{this.updateInputSettingsInConfig()})},this.updateInputSettingsInConfig=()=>{this.props.onInputSettingsUpdated("inputSettings",{defaultCoordinate:this.state.defaultCoords,format:this.state.defFormat})},this.props.config&&(this.state={defaultCoords:this.props.config.defaultCoordinate,defFormat:this.props.config.format})}render(){return(0,t.jsx)("div",{style:{height:"100%",width:"100%",marginTop:"5px"},children:(0,t.jsxs)("div",{css:a(this.props.theme),children:[(0,t.jsx)(i.SettingRow,{label:this.nls("defaultCoordinate"),flow:"wrap",children:(0,t.jsx)(s.Select,{"aria-label":this.nls("defaultCoordinate"),name:"defaultCoords",size:"sm",value:this.props.config.defaultCoordinate,onChange:this.onDefaultCoordsChange,children:this.props.allSupportedFormats.map((e,i)=>(0,t.jsx)(s.Option,{role:"option",tabIndex:0,"aria-label":e.label,value:e.name,children:e.label},i))})}),(0,t.jsx)(i.SettingRow,{label:this.nls("coordinateFormat"),flow:"wrap",className:"address"===this.props.config.defaultCoordinate?"hidden":"",children:(0,t.jsxs)("div",{className:"d-flex justify-content-between w-100 align-items-center",children:[(0,t.jsx)(s.TextInput,{role:"textbox","aria-label":this.nls("coordinateFormat"),className:"formatLabel",size:"sm",value:this.props.config.format,onChange:this.onFormatChange}),(0,t.jsx)(s.Button,{title:this.nls("resetFormat"),className:"ml-2",icon:!0,type:"tertiary",size:"sm",onClick:this.onResetButtonClick.bind(this),children:(0,t.jsx)(s.Icon,{icon:r,size:14})})]})})]})})}}var d=h(98640);const p=h(42449);class u extends e.React.PureComponent{constructor(o){super(o),this.nls=t=>{const e=Object.assign({},n,s.defaultMessages);return this.props.intl&&this.props.intl.formatMessage?this.props.intl.formatMessage({id:t,defaultMessage:e[t]}):e[t]},this.componentDidMount=()=>{let t=!0;const e=[];this.props.allSupportedFormats.forEach(s=>{const i={name:s.name,label:s.label,defaultPattern:s.defaultPattern,currentPattern:s.currentPattern,enabled:s.enabled,isCustom:s.isCustom};e.push(i),s.enabled||(t=!1)}),e.length>0&&this._outputSettings.length!==e.length&&(this._outputSettings=e),this.props.onSettingsUpdate(this._outputSettings),this.setState({isAllChecked:t})},this.componentDidUpdate=t=>{if(!e.lodash.isDeepEqual(t.allSupportedFormats,this.props.allSupportedFormats)){this._outputSettings=this.props.allSupportedFormats;let t=!0;this.props.allSupportedFormats.forEach(e=>{e.enabled||(t=!1)}),this.setState({isAllChecked:t})}},this.updateHeaderCheckBoxState=t=>{let e=!0;t.some(t=>!t.enabled&&(e=!1,!0)),this.setState({isAllChecked:e})},this.onHeaderCheckBoxChange=t=>{const e=this._outputSettings.map(e=>{const s=Object.assign({},e);return s.enabled=t,s});this.props.onSettingsUpdate(e),this._outputSettings=e,this.updateHeaderCheckBoxState(this._outputSettings)},this.onCheckBoxChange=(t,e)=>{let s;this._outputSettings.some((i,o)=>e===o&&(s={name:i.name,label:i.label,defaultPattern:i.defaultPattern,currentPattern:i.currentPattern,enabled:t.target.checked,isCustom:i.isCustom},!0)),t.stopPropagation(),this.updateItem(e,s)},this.onEditButtonClick=()=>{this.props.onEditClick()},this.createOptionElement=(e,o)=>{const n={name:e.name,label:e.label,defaultPattern:e.defaultPattern,currentPattern:e.currentPattern,enabled:e.enabled,isCustom:e.isCustom};[].push(n);return(0,t.jsx)("div",{className:"rowDimensions",children:(0,t.jsxs)(i.SettingRow,{children:[(0,t.jsx)(s.Checkbox,{className:"cursor-pointer mr-2 font-13",checked:e.enabled,onChange:t=>{this.onCheckBoxChange(t,o)}}),(0,t.jsx)("div",{className:"coordinatesNotation text-truncate",title:e.label,children:e.label}),(0,t.jsx)("div",{className:"coordinateFormat pl-1 text-truncate",title:e.currentPattern,children:e.currentPattern})]})})},this.createHeaderElement=()=>(0,t.jsx)("div",{className:"tableHeading",children:(0,t.jsxs)(i.SettingRow,{children:[(0,t.jsx)(s.Checkbox,{className:"cursor-pointer alignBox mr-2 font-13",checked:this.state.isAllChecked,onChange:t=>{this.onHeaderCheckBoxChange(t.target.checked)}}),(0,t.jsx)("div",{className:"coordinateHeaderLabel text-truncate",title:this.nls("coordinateLabel"),children:this.nls("coordinateLabel")}),(0,t.jsx)("div",{className:"coordinateHeaderFormat pl-1 text-truncate",title:this.nls("coordinateFormat"),children:this.nls("coordinateFormat")}),(0,t.jsx)("span",{children:(0,t.jsx)(s.Button,{"aria-label":this.nls("edit"),className:"ml-2",title:this.nls("edit"),size:"sm",icon:!0,type:"tertiary",onClick:this.onEditButtonClick.bind(this),children:(0,t.jsx)(s.Icon,{icon:p,size:12})})})]})}),this._outputSettings=[],this.state={isAllChecked:!1}}updateItem(t,e){t>-1&&(this._outputSettings=[...this._outputSettings.slice(0,t),Object.assign({},this._outputSettings[t],e),...this._outputSettings.slice(t+1)],this.props.onSettingsUpdate(this._outputSettings),this.updateHeaderCheckBoxState(this._outputSettings))}render(){const s=this.createHeaderElement();return(0,t.jsx)("div",{css:(i=this.props.theme,e.css`

    .tableHeading {
      width: 100%;
      padding: 5px 0px 5px 0px;
      background-color: ${i.ref.palette.neutral[500]};
    }

    .coordinateHeaderLabel {
      font-size: 14px;
      padding-left: 10px;
      font-weight: bold;
      flex: 0 0 35%;
    }

    .coordinateHeaderFormat {
      font-size: 14px;
      font-weight: bold;
      flex: 0 0 35%;
    }

    .coordinatesNotation {
      flex: 0 0 33%;
      max-width: 66px;
    }

    .coordinateFormat {
      flex: 0 0 55%;
      max-width: 110px;
    }

    .hidden {
      display: none;
    }

    .rowDimensions {
      width: calc(100% - 17px);
    }

    .alignBox {
      left: 10px;
    }

    .coordinate-converion-list-items {

      .jimu-tree-item [data-dndzone-droppable=true] {
        border: 1px solid transparent;
      }

      .jimu-tree-item.jimu-tree-item_dnd-true {
        height: auto;
        padding-top: 0rem;

        .jimu-tree-item__body {
          background-color: ${i.ref.palette.neutral[300]};
          padding: 8px 0px 8px 0px;
        }

        .jimu-tree-item__body: hover {
          background-color: ${i.ref.palette.neutral[200]};
        }
      }
    }
  `),style:{height:"100%",width:"100%"},children:(0,t.jsxs)("div",{className:this.props.allSupportedFormats&&0===this.props.allSupportedFormats.length?"hidden":"",children:[s,(0,t.jsx)(d.List,{className:"coordinate-converion-list-items",itemsJson:Array.from(this.props.allSupportedFormats).map((t,e)=>({itemStateDetailContent:t,itemKey:`${e}`})),dndEnabled:!0,onUpdateItem:(t,e)=>{const{itemJsons:s}=e.props,[,i]=s,o=i.map(t=>t.itemStateDetailContent);this._outputSettings=o,this.props.onSettingsUpdate(o)},overrideItemBlockInfo:({itemBlockInfo:t})=>({name:d.TreeItemActionType.RenderOverrideItem,children:[{name:d.TreeItemActionType.RenderOverrideItemDroppableContainer,withListGroupItemWrapper:!1,children:[{name:d.TreeItemActionType.RenderOverrideItemDraggableContainer,children:[{name:d.TreeItemActionType.RenderOverrideItemBody,children:[{name:d.TreeItemActionType.RenderOverrideItemDragHandle},{name:d.TreeItemActionType.RenderOverrideItemMainLine}]}]}]}]}),renderOverrideItemMainLine:(t,e)=>{const{itemJsons:s}=e.props,i=s[0],o=s[1];return this.createOptionElement(i.itemStateDetailContent,o.indexOf(i))}})]})});var i}}const g=h(23499),m=h(85241);class S extends e.React.PureComponent{constructor(t){super(t),this.items=[],this.nls=t=>{const e=Object.assign({},n,s.defaultMessages);return this.props.intl&&this.props.intl.formatMessage?this.props.intl.formatMessage({id:t,defaultMessage:e[t]}):e[t]},this.componentDidUpdate=t=>{t.config.currentPattern!==this.props.config.currentPattern&&this.setState({currentPattern:this.props.config.currentPattern})},this.onCurrentPatternChange=t=>{const e=t.target.value;this.state.currentPattern!==e&&(this.setState({currentPattern:e}),this.props.onPatternUpdate(this.props.index,this.props.config.name,t.target.value))},this.onResetButtonClick=t=>{this.setState({currentPattern:this.props.config.defaultPattern},()=>{this.props.onPatternUpdate(this.props.index,this.props.config.name,this.state.currentPattern)})},this.onDeleteButtonClick=t=>{this.props.onDelete(this.props.index)},this.state={currentPattern:this.props.config.currentPattern}}render(){var e,o,n;return"address"===(null===(o=null===(e=this.props)||void 0===e?void 0:e.config)||void 0===o?void 0:o.name)?null:(0,t.jsx)(i.SettingRow,{flow:"wrap",label:this.props.config.label,children:(0,t.jsxs)("div",{className:"d-flex justify-content-between w-100 align-items-center",children:[(0,t.jsx)(s.TextInput,{role:"textbox","aria-label":this.props.config.label,size:"sm",value:this.state.currentPattern,onChange:this.onCurrentPatternChange}),!(null===(n=this.props.config)||void 0===n?void 0:n.isCustom)&&(0,t.jsx)(s.Button,{"aria-label":this.nls("resetFormat"),title:this.nls("resetFormat"),className:"ml-2",icon:!0,type:"tertiary",size:"sm",onClick:this.onResetButtonClick.bind(this),children:(0,t.jsx)(s.Icon,{icon:g,size:14})}),this.props.config.isCustom&&(0,t.jsx)(s.Button,{"aria-label":this.nls("deleteLabel"),title:this.nls("deleteLabel"),className:"ml-2",icon:!0,type:"tertiary",size:"sm",onClick:this.onDeleteButtonClick.bind(this),children:(0,t.jsx)(s.Icon,{icon:m,size:14})})]})})}}class f extends e.React.PureComponent{constructor(s){super(s),this.items=[],this.componentDidUpdate=t=>{this.isChange(t)&&this.setState({outputSettings:this.props.config})},this.isChange=t=>{let s=!1;return this.props.config.length!==t.config.length||(t.config.length>0?!e.lodash.isDeepEqual(t.config,this.props.config)&&(s=!0,!0):s)},this.updateItem=(t,e)=>{const s=t;s>-1&&this.setState({outputSettings:[...this.state.outputSettings.slice(0,s),Object.assign({},this.state.outputSettings[s],e),...this.state.outputSettings.slice(s+1)]},()=>{this.props.onSettingsUpdate(this.state.outputSettings)})},this.updateCurrentPattern=(t,e,s)=>{let i;this.props.config.some((o,n)=>{if(o.name===e&&n===t)return i={name:o.name,label:o.label,defaultPattern:o.defaultPattern,currentPattern:s,enabled:o.enabled,isCustom:o.isCustom},!0}),this.setState({outputSettings:this.props.config},()=>{this.updateItem(t,i)})},this.onDeleteClick=t=>{this.state.outputSettings.splice(t,1),this.props.onSettingsUpdate(this.state.outputSettings)},this.renderFormatList=()=>{this.items=[],this.props.config&&this.props.config.length>0&&this.props.config.forEach((e,s)=>{"address"!==e.name&&e.enabled&&this.items.push((0,t.jsx)(S,{intl:this.props.intl,index:s,config:e,onDelete:this.onDeleteClick.bind(this),onPatternUpdate:this.updateCurrentPattern},s))})},this.state={outputSettings:this.props.config||[]}}render(){return this.renderFormatList(),(0,t.jsx)("div",{css:a(this.props.theme),style:{height:"100%"},children:(0,t.jsx)(i.SettingSection,{className:"cursor-pointer",children:this.items})})}}const b=h(23499);class x extends e.React.PureComponent{constructor(t){super(t),this.onCoordinateChange=t=>{this.setState({addDefaultCoordinate:t.target.value},()=>{const t=this.props.supportedFormats.find(t=>t.name===this.state.addDefaultCoordinate);this.setState({coordinateLabel:t.label}),this.resetToDefaultPattern(this.state.addDefaultCoordinate)})},this.onFormatLabelChange=t=>{const e=t.target.value;this.setState({coordinateLabel:e})},this.onFormatLabelAcceptValue=t=>{this.setState({coordinateLabel:t.trim()})},this.onFormatChange=t=>{const e=t.target.value;this.setState({currentPattern:e})},this.onFormatAcceptValue=t=>{this.setState({currentPattern:t.trim()})},this.onResetButtonClick=()=>{const t=this.state.addDefaultCoordinate;this.resetToDefaultPattern(t)},this.resetToDefaultPattern=t=>{const e=this.props.supportedFormats.find(e=>e.name===t);e&&this.setState({currentPattern:e.defaultPattern})},this.onOkButtonClicked=()=>{if("address"===this.state.addDefaultCoordinate){if(""===this.state.coordinateLabel)return}else if("address"!==this.state.addDefaultCoordinate&&(""===this.state.coordinateLabel||""===this.state.currentPattern))return;this.setState({isAddNewFormatPopperActive:!1}),this.props.onOkClick(this.state.addDefaultCoordinate,this.state.coordinateLabel,this.state.currentPattern,this.state.canAddAtTop),this.props.onClose()},this.onCancelButtonClicked=()=>{this.setState({isAddNewFormatPopperActive:!1}),this.props.onClose()},this.onCheckBoxChange=t=>{this.setState({canAddAtTop:t.target.checked})},this.nls=t=>{const e=Object.assign({},n,s.defaultMessages);return this.props.intl&&this.props.intl.formatMessage?this.props.intl.formatMessage({id:t,defaultMessage:e[t]}):e[t]},this.state={addDefaultCoordinate:this.props.supportedFormats[0].name,isAddNewFormatPopperActive:this.props.isOpen,coordinateLabel:this.props.supportedFormats[0].label,currentPattern:this.props.supportedFormats[0].currentPattern,canAddAtTop:!1}}render(){const i=e.css`
      .hidden{
        display: none;
      }

      .cursor-pointer {
        cursor: pointer;
      }

      .invalid-value {
        border: 1px solid red;
        box-shadow: 0 0 5px red;
      }
    `;return(0,t.jsx)("div",{children:(0,t.jsx)(s.AlertPopup,{css:i,"aria-expanded":this.state.isAddNewFormatPopperActive,isOpen:this.state.isAddNewFormatPopperActive&&!e.urlUtils.getAppIdPageIdFromUrl().pageId,onClickOk:this.onOkButtonClicked.bind(this),onClickClose:this.onCancelButtonClicked.bind(this),title:this.nls("addConversion"),children:(0,t.jsx)("table",{cellPadding:10,children:(0,t.jsxs)("tbody",{children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)(s.Label,{children:this.nls("defaultCoordinate")})}),(0,t.jsx)("td",{children:(0,t.jsx)(s.Select,{"aria-label":this.nls("defaultCoordinate"),name:"defaultCoords",size:"sm",value:this.state.addDefaultCoordinate,onChange:this.onCoordinateChange,children:this.props.supportedFormats&&this.props.supportedFormats.map((e,i)=>(0,t.jsx)(s.Option,{tabIndex:0,role:"option","aria-label":e.label,value:e.name,children:e.label},i))})})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:(0,t.jsx)(s.Label,{className:"mt-2",children:this.nls("coordinateLabel")})}),(0,t.jsx)("td",{children:(0,t.jsx)(s.TextInput,{role:"textbox","aria-label":this.nls("coordinateLabel"),size:"sm",className:""===this.state.coordinateLabel?"invalid-value":"",value:this.state.coordinateLabel,onAcceptValue:this.onFormatLabelAcceptValue,onChange:this.onFormatLabelChange})})]}),(0,t.jsxs)("tr",{className:"address"===this.state.addDefaultCoordinate?"hidden":"",children:[(0,t.jsx)("td",{children:(0,t.jsx)(s.Label,{children:this.nls("coordinateFormat")})}),(0,t.jsx)("td",{children:(0,t.jsx)(s.TextInput,{role:"textbox","aria-label":this.nls("coordinateFormat"),size:"sm",className:""===this.state.currentPattern?"invalid-value":"",value:this.state.currentPattern,onAcceptValue:this.onFormatAcceptValue,onChange:this.onFormatChange})}),(0,t.jsx)("td",{children:(0,t.jsx)(s.Button,{role:"button","aria-label":this.nls("resetFormat"),title:this.nls("resetFormat"),size:"sm",icon:!0,type:"tertiary",className:"reset-button ml-2",onClick:this.onResetButtonClick.bind(this),children:(0,t.jsx)(s.Icon,{icon:b,size:"16"})})})]}),(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:3,children:(0,t.jsxs)(s.Label,{className:"cursor-pointer",children:[(0,t.jsx)(s.Checkbox,{className:"mr-2 font-13",checked:this.state.canAddAtTop,onChange:this.onCheckBoxChange.bind(this),role:"checkbox","aria-label":this.nls("addConversionCheckboxLabel")}),this.nls("addConversionCheckboxLabel")]})})})]})})})})}}const C=h(21149);class v extends e.React.PureComponent{constructor(t){super(t),this.sidePopperTrigger=e.React.createRef(),this.nls=t=>{const s=Object.assign({},n,e.defaultMessages);return this.props.intl&&this.props.intl.formatMessage?this.props.intl.formatMessage({id:t,defaultMessage:s[t]}):s[t]},this.onEditButtonClicked=()=>{this.setState({showOutputSettingsPopper:!this.state.showOutputSettingsPopper})},this.closeOutputSettingPopper=()=>{this.setSidePopperAnchor(),this.setState({showOutputSettingsPopper:!1})},this.onSettingsUpdate=t=>{this.setState({newAddedConversions:t}),this.props.onOutputSettingsUpdated("outputSettings",t)},this.onAddClick=()=>{this.setState({isAddConversionPopupOpen:!0})},this.addNewConversion=(t,e,s,i)=>{const o={name:t,label:e,defaultPattern:s,currentPattern:s,enabled:!0,isCustom:!0};i?this.setState({newAddedConversions:[o,...this.state.newAddedConversions]},()=>{this.props.onOutputSettingsUpdated("outputSettings",this.state.newAddedConversions)}):this.setState({newAddedConversions:[...this.state.newAddedConversions,o]},()=>{this.props.onOutputSettingsUpdated("outputSettings",this.state.newAddedConversions)})},this.onAddPopperClose=()=>{this.setState({isAddConversionPopupOpen:!1})},this.setSidePopperAnchor=()=>{var t;const e=null===(t=this.sidePopperTrigger.current)||void 0===t?void 0:t.getElementsByClassName("jimu-btn")[0];this.setState({popperFocusNode:e})},this.state={newAddedConversions:this.props.config.length>0?this.props.config:this.props.allSupportedFormats,isAddConversionPopupOpen:!1,showOutputSettingsPopper:!1,popperFocusNode:null}}render(){var o;const n=this.props.config.length>0?this.props.config:this.props.allSupportedFormats;return(0,t.jsxs)("div",{css:(a=this.props.theme,e.css`
  .add-conversion {
    height: ${e.polished.rem(40)};
    width: 100%;
    color: ${a.sys.color.primary.light};
    font-size: ${e.polished.rem(14)};
    cursor: pointer;
    &:hover {
      .add-conversion-icon-container {
        background-color: ${e.polished.rgba(a.sys.color.primary.light,.8)};
      }
      color: ${e.polished.rgba(a.sys.color.primary.light,.8)};
    }
    .add-conversion-icon-container {
      width: 20px;
      height: 20px;
      background-color: ${a.sys.color.primary.light};
      border-radius: 10px;
    }
    .add-conversion-icon {
      color: ${a.ref.palette.neutral[400]};
    }
  }
  `),style:{height:"100%",width:"100%",marginTop:"5px"},children:[(0,t.jsx)(i.SettingRow,{children:(0,t.jsxs)("div",{title:this.nls("addNewLabels"),className:" d-flex align-items-center add-conversion",onClick:this.onAddClick.bind(this),children:[(0,t.jsx)("div",{className:"add-conversion-icon-container d-flex align-items-center justify-content-center mr-2",children:(0,t.jsx)(s.Icon,{icon:C,size:12})}),(0,t.jsx)("div",{className:"text-truncate flex-grow-1",children:this.nls("addNewLabels")})]})}),n&&(0,t.jsx)("div",{ref:this.sidePopperTrigger,children:(0,t.jsx)(u,{allSupportedFormats:n,intl:this.props.intl,theme:this.props.theme,onEditClick:this.onEditButtonClicked.bind(this),onSettingsUpdate:this.onSettingsUpdate.bind(this)})}),(0,t.jsx)(i.SidePopper,{backToFocusNode:this.state.popperFocusNode,title:this.nls("editOutputFormats"),isOpen:this.state.showOutputSettingsPopper&&!e.urlUtils.getAppIdPageIdFromUrl().pageId,position:"right",toggle:this.closeOutputSettingPopper.bind(this),trigger:null===(o=this.sidePopperTrigger)||void 0===o?void 0:o.current,children:(0,t.jsx)(f,{intl:this.props.intl,theme:this.props.theme,config:n,onSettingsUpdate:this.onSettingsUpdate.bind(this)})}),this.state.isAddConversionPopupOpen&&this.props.allSupportedFormats&&this.props.allSupportedFormats.length>0&&(0,t.jsx)(x,{supportedFormats:this.props.allSupportedFormats.filter(t=>"address"!==t.name),theme:this.props.theme,intl:this.props.intl,isOpen:this.state.isAddConversionPopupOpen,onOkClick:this.addNewConversion.bind(this),onClose:this.onAddPopperClose.bind(this)})]});var a}}var j=h(71371);const w=h(45508),P=[e.SupportedUtilityType.GeoCoding];class A extends e.React.PureComponent{constructor(t){super(t),this.nls=t=>{const e=Object.assign({},n,s.defaultMessages);return this.props.intl&&this.props.intl.formatMessage?this.props.intl.formatMessage({id:t,defaultMessage:e[t]}):e[t]},this.componentDidMount=()=>{this.props.onAddressSettingsUpdated("geocodeServiceUrl",this.state.geocodeLocatorUrl)},this.onCandidateScoreChange=t=>{this.props.onAddressSettingsUpdated("minCandidateScore",t)},this.onMaxSuggestionsChange=t=>{this.props.onAddressSettingsUpdated("maxSuggestions",t)},this.onUtilityChange=t=>{this.props.onAddressSettingsUpdated("useUtilitiesGeocodeService",t)},this.onDisplayFullAddressOptionChanged=t=>{this.props.onAddressSettingsUpdated("displayFullAddress",t.target.checked)};let e="https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer";this.props.config&&this.props.config.geocodeServiceUrl?e=this.props.config.geocodeServiceUrl:this.props.portalSelf&&this.props.portalSelf.helperServices&&this.props.portalSelf.helperServices.geocode&&this.props.portalSelf.helperServices.geocode.length>0&&this.props.portalSelf.helperServices.geocode[0].url&&(e=this.props.portalSelf.helperServices.geocode[0].url),this.state={geocodeLocatorUrl:e,updateGeocodeLocatorUrl:e,isAlertPopupOpen:!1,isInvalidValue:!1}}render(){var o,n,a,r,l,d,p,h;return(0,t.jsx)("div",{style:{height:"100%",width:"100%",marginTop:"5px"},children:(0,t.jsxs)("div",{css:(h=this.props.theme,e.css`

  .locator-url {
    background-color: ${h.ref.palette.neutral[800]};
    padding: 2px;
    margin-top: 0px !important;
  }

  .locator-url label {
    word-break: break-all;
  }

  .addrSettingNumericInput {
    width: 105px;
  }

  .defGeocode-tooltip {
    margin-right: 0.30rem!important;
  }

  .jimu-tree {
    margin-bottom: 0px !important
  }
  `),children:[(0,t.jsx)(i.SettingRow,{flow:"wrap",children:(0,t.jsx)(j.UtilitySelector,{useUtilities:(0,e.Immutable)((null===(o=this.props.config)||void 0===o?void 0:o.useUtilitiesGeocodeService)?this.props.config.useUtilitiesGeocodeService:[]),onChange:this.onUtilityChange,showRemove:!0,closePopupOnSelect:!0,types:P})}),(null===(a=null===(n=this.props.config)||void 0===n?void 0:n.useUtilitiesGeocodeService)||void 0===a?void 0:a.length)<1&&(0,t.jsxs)(i.SettingRow,{className:"locator-url",children:[(0,t.jsx)(s.Label,{tabIndex:0,"aria-label":this.state.geocodeLocatorUrl,children:this.state.geocodeLocatorUrl}),(0,t.jsx)(s.Tooltip,{role:"tooltip",tabIndex:0,"aria-label":this.nls("defaultGeocodeUrlTooltip"),title:this.nls("defaultGeocodeUrlTooltip"),showArrow:!0,placement:"top",children:(0,t.jsx)("div",{className:"ml-2 d-inline defGeocode-tooltip",children:(0,t.jsx)(s.Icon,{size:14,icon:w})})})]}),(0,t.jsx)(i.SettingRow,{label:this.nls("minCandidateScore"),children:(0,t.jsx)(s.NumericInput,{"aria-label":this.nls("minCandidateScore"),className:"addrSettingNumericInput",size:"sm",min:0,max:100,value:(null===(r=this.props.config)||void 0===r?void 0:r.minCandidateScore)||100,onChange:this.onCandidateScoreChange})}),(0,t.jsx)(i.SettingRow,{label:this.nls("maxSuggestions"),children:(0,t.jsx)(s.NumericInput,{"aria-label":this.nls("maxSuggestions"),className:"addrSettingNumericInput",size:"sm",min:0,max:100,value:(null===(l=this.props.config)||void 0===l?void 0:l.maxSuggestions)||0===(null===(d=this.props.config)||void 0===d?void 0:d.maxSuggestions)?this.props.config.maxSuggestions:6,onChange:this.onMaxSuggestionsChange})}),(0,t.jsx)(i.SettingRow,{children:(0,t.jsxs)(s.Label,{check:!0,centric:!0,style:{cursor:"pointer"},className:"title3 hint-default",children:[(0,t.jsx)(s.Checkbox,{role:"checkbox","aria-label":this.nls("showFullAddress"),style:{cursor:"pointer"},className:"mr-2",checked:(null===(p=this.props.config)||void 0===p?void 0:p.displayFullAddress)||!1,onChange:this.onDisplayFullAddressOptionChanged.bind(this)}),this.nls("showFullAddress")]})}),(0,t.jsx)(i.SettingRow,{className:"ml-2 title3 hint-default",children:(0,t.jsx)(s.Label,{style:{fontStyle:"italic"},children:this.nls("showFullAddressHint")})})]})})}}var y=h(62686),I=h(48993);const O={type:"esriPMS",angle:0,xoffset:2,yoffset:8,contentType:"image/png",imageData:"iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwQAADsEBuJFr7QAAABl0RVh0U29mdHdhcmUAUGFpbnQuT\t\t\t kVUIHYzLjUuMU7nOPkAAA01SURBVGhD7Vn5c1X1HRVbRRMSo8QEAgmBSEIWkpCQkJCE7CRk3wMvhJAAMRuEJC/7BoEoQRbLowpURBChoYKgKGhV2mlrK3UXrWLFpT8\t\t\t 4/QPq2HHs6Tk373ZSp+1ojS90ppk5c+97ue/dz/me8znf7/e+G274/99/PwJ5rTtvK+1/2Hf18MnIsv4DYeWDh3yGXvhsyn//jZP0yYIW25Kirgf7V209eq68//Arl\t\t\t qGjVyxDx98o6T34fEH7Pltx9wOZk1Tat7ttYcveiJyWvefX7bmANTtPoWbPWVTfd844rtt7HuWDx1Hc8xMU9RxAftueyzmbRvK/3R0ceHVxz8GynJbdn6+//1k0PfR\t\t\t r1B+8hI0P/wrNR36H5kd+h5ZHX+b5K6g/8Dwqd4yicvgMyvuPIrtpx4gDy/xmtyrrPxyRVNXxl/qDv8TGI79B64lX0f3E++h8/B10/OwttPF128nX0PrY77H52Eto1\t\t\t vH4qyR4GRXbRqnYQds3u5ODrkqrGXiqYvgkOk+/x4J/i77zH6Dn3FV0kFD32ffQcfoKus68i45TV9B89CW0jb4O6+hbVO0VtB5/BeUDh2nHw+sdVO5/vk1+24+C48v\t\t\t bv9x05GUMXPgY/ec/xODFT8YIkUT7qbfQRUJSrO3EG8RrJEeSP7tinDcffRl3//g55G3eebVh5HnnSSeVu2mkYnH2emxirww++6lByjz2nL2K3qc+MNDNcynWTmWso\t\t\t 29TzXcN0p2n36EV30D2xhGU9R7ImnRCWY3b+wPjc1Fre84g0v/0NQMi1n3uffSyaBUu6/U+yaNxfhUDT39kXNd3/hqv+Yipt5+kdrRNOqF8696dswJjUNJ72CDU++Q\t\t\t HVOIKSbw/VuxTHxoE+njsk1pPfkgyH/N4DT1PXKU9P6Ud30NKdT/Sarr7J51Qad+BDu/gaATGl7AwjvyFT9kfY9bqOvMHdLKPVLChEl+rd3SuPuonSQ3Cxod+gfiVz\t\t\t Uit6W6ddEIVw8cSIrPXwHm6D5at7sIgrTZw4RPDakZcP0aceIsE3zDivPnoZaNnOknO6LVnriG50orF2WuRvXlHzqQTUgEZtYOX/KPScaurO+Ism9FLq40Vy/hWGJx\t\t\t 61yBl/SmJKfWojmHPc9eQ17IP3sGxstufspq2uV4XhCxDjy5JtLR+HppahmnuPghKLMKae08Z844KN8Be+cc5X6/f9wzCllfBfU4EYosbwHBpui7ImEWUdO9fl7jai\t\t\t oiMSszwC4WLxxzMW5iI2KI65LXthWXoBEp7DyGzbjvC0yxw9pgHT14XW1LHQGh/5Lohs2bkpHPF9uPFlfecOJPXshMJqzYiOq8aIUn5CIrNwPzIRPgwNHyDE+A5bxH\t\t\t cfYMxZ2EsonPXYpmlmdhsS66y3nhdELIMHVnDUX+7YugxWLYdZz/spAKDYE8hcXUbkle3In/z2HvLVjUhhQqm1vQh4+5B5Lfc90W+dVf6dUGEG7WbS3oeOFLSewAbb\t\t\t NoqnAX3OJwYh43iU6o6kLK2k8T6kdO0zSCV3TjMPhkGtwzEDhR27PvSsu3Y5PdN/YPP3lRgtV3MatrJPc7TqOU6rHzwYapznxrbIJRW3Yn09d3I2NBHJXaS1Hb+b5v\t\t\t Wa8hpHkFmwxCKuvYj32oDV+qPVe85fcukKVXa8+BPkqt62OQnudx5gUuWfSiw3m8QMQjRTuk13Xw9gBX1gyhoGUFe8w5k1m/Rps4gnt10L893Y/XwKAra94vUiUkhZ\t\t\t NlyrGJ57Rak1Azg7gdeRAl3nypwBUc/taYLuZtHkNWwFWlVVpLqos22oti6B4WEyMpuuVRpRf0Qz3fBsvVRVN7zOMnZsGZktN2hpPRwI69l12/jSjchv+MAmo9d5mT\t\t\t YPxYE9VvZ9M2GSlIio3ZgrH9IlHH+j94yFCTh5DVWDsIwd6yHUb3nKZT2H5H9vmh66JK3w0gx0QIy67Z8sShrHdbuetrYVi/KrMByFq++iGIMx6/caCRcNolkNQyyd\t\t\t 6hQ1z5abCwscqggIxpRjPXldVv4fOGQYbs1O04jo24bKrY/OuAwQsWdtpLU6i7O7tV8LnCJO83L8ItMQkRmpaFQeMYqhKaXGXGdxabPbhqi1XahtOcBRTTyW3cbpML\t\t\t Tyw1CHBzk8v3Ke05xg/cC0tZvYT/ZLjmMUGG7rTGBtgpJLkPt/gvGQ4+54YmYGbCYk2iREQSxxbVUbZVhKRVf2mPDqsFDyGZMpzD5wjNWclWeY/SbMTdx3VfB+at61\t\t\t 1kkWNqQvmHwzw4lFFfWSEIl9PxhhsJzCE0tgcsdXnCfvQD+0ekGkcSKVsSVNyKutB6JLJiLThKtQ2haOd8z1mx8hnCI17VRrZVYOzKKmr0XEFPciOS1HY4jlNe6uzQ\t\t\t 6vwb+MZmcNLtQvfsMG3vIWI+5unvDmcSmz74LvouWUYkylLbfi+rth4yekbLc6/BzHQbpJYUbcFdUGpdIa6n2RRR2HURMEQlVWa85TKHidlsYCf3Na0GkYZtsBkHlv\t\t\t SeNAt19/OHs5gnn22fCZbqIBSKhcBXyG3sQXVSPoKSVmBe5Aj4hyzBrwWLMnB9JLOJc9ggaDv0CS4qbsTinBssqrO86jJBuxBF+3SckBp7zIxDMLQK33/T/40yoQRY\t\t\t bQzKz4eI+G26ecwk/eMwJhW9YMrwCYzHdJ5BE/Ul+AWbcFWr02vq9F/nZEQTEF2BJQS3iy5vedCghjmitAsBjbjDu8ApgKCRhGXebBe33I4lK+UUmY7q3Pwv3Y18F4\t\t\t PaZOl+A22lFQYQ854ciIDaTfcZ5q37ECJmghFyjv1Y0bh91KCFOrjdm1A1cmMstgazl5ObBozeVCIbf4hQWlsdwyIBPaKxhLe+gGCoXz+1DrIF57C+/RUnwi0hDSMo\t\t\t qhKVbaN88Y7uhXtt45CWHrb7Nn0Cm6CeR9PV9H3kHx+BW9s2trh6Y6jQdU53d4XqnD9ULMfY9Xv6RJMR9UGgCZvPo5R9lYAYV8vQLw5xFKfCNSEEg1YnKrtLT06OOU\t\t\t kdkBG3CfkD8sLDz/gVpNT1v+tM6rtxy61mC020ecHIdCwYnN4bDHbMZFF5GrEtNl+lz4HLnXFoyGB6+YQyFKCZdOh+OVKGow/bipiO/cnEEoX8iwhveTGip7xScWDa\t\t\t Ls/1DMYxg37ClcPX0gdsMXz79mYmp0zxwi9sMuHsHURElWgR3qiHso0A+Q1iIGf4RCFiahbiSBu6jbKcaDv7c7fskYyqio6EIMZW4lZhG6MnM7YQ74bG0pH4lZ/6Lc\t\t\t cX1CONEG5acjejMAoQnZmF+dCrmRaTCK4h9tDAZflGpCGE6xpUpAIb+yC1EnV15857fC6/xqtxkV0REbiOmE56EF+FDzCPuIub7hkSv4ERpy7y7//PKocOw9Nm+ym7\t\t\t Y8nlKpfWruLImJFVa/5rTdM+nXPI8SWVrA+OzPOyKa8A0cN/LT5VfJyNV5O077ERm8zhXBIggYiERTkQQkUSGv3/wB4kpaddKSy1PBAUE5cXExFjWWiotZUVluT4+P\t\t\t vrMTPvASGknQupr4L4XUmbjm8qIjFRREb6EPxFCLCKiiVginlhGJHI0tscsiUHc0jgE+QcN2v+v60RY5BcQUnUWcSfhRugnFJGSUrr/hCllqjPeZlLGJKNiwu1ERCK\t\t\t ZSCMyCP0IvOLGKTeen+bsgtmz5vzNaarTBr6Xar9O1y+xD4RU8iOktkiZSilwpNKEkBpvNX2xrKDRU7+oV6RMmL0oqSEiIqFn0XmEfvxdOeWGKR+5THNBWFjYZ/b39\t\t\t f8VhCbMJGIpIbVESkqpFzVo6lHTehNKyEw03UA30g01msHEYiLBTkZF5hIFRBFRQlQSn7i6uCIkZOFrPC8mCu3EsnlcbicVw2M4oUHSYCkcvq7Sd7adGdHje0exLFs\t\t\t oAEIJ9YLUUWEqUKqYZEp5Xkb0EvuIDkLvjSelQZAF            ZT8FSCDhS8wgNA2ol0zbfacYNz8s/4qQkk0jJn//O0L66VBWkwIqWsULVjuZ8m9ASLZTYqpHT\t\t\t UITFg6mQhohk5AUUhrJcko2WS6OSCEUBFJJpArsxKRWI7HOTlKv9T9do2v1GQWJklEp+a8UmnBC4y2nHpIdfAklnEIhijATTo2uYJBaan71lJSRYiKh1yIiq8mmIqM\t\t\t B0XcowmVlPbZSD2nSVhBNqOWULmYoyM9uhGwnlZRIGlGTlNJKAZFEqC+UeipakBKCzvW+iKj39BmprH7UAPkSspsGTvOdnDEhE6zZQyYh03a6ibytETRXCAE8NydWF\t\t\t ae5RYVKNREUVLygcymiVJMqspk+q3RT7yhBZWtTnQm12/hgMFWSBcaTUgFzCPWUiJlLH6mmYs3lj4gqxfRa70sRxb4+o88qqk0ybjzXFKEV/Hh1JiS2v76O04iZpHR\t\t\t jjaYmWllQRWmUVaB6QcXKRrKlCb2WGlq86lqTiL5DyykpY5KRK8Yvfb4zIX6fsYYySenLNWLjtw0qQH43icn/Iic7qrlVsBQUdC7ofamhcJF1RcSNkPIaLFOZCScjQ\t\t\t v+Tf38HMj5k7OWK5X8AAAAASUVORK5CYII=",url:"https://static.arcgis.com/images/Symbols/Basic/BlueShinyPin.png",height:24,width:24};class k extends e.React.PureComponent{constructor(t){super(t),this.jsonUtils=null,this.nls=t=>{const s=Object.assign({},n,e.defaultMessages);return this.props.intl&&this.props.intl.formatMessage?this.props.intl.formatMessage({id:t,defaultMessage:s[t]}):s[t]},this.componentDidMount=()=>{this.state.apiLoaded||(0,y.loadArcGISJSAPIModules)(["esri/symbols/support/jsonUtils"]).then(t=>{[this.jsonUtils]=t,this.setState({apiLoaded:!0})})},this.onZoomScaleInputChange=t=>{this.props.onGeneralSettingsUpdated("zoomScale",t)},this.showSymbolChooser=()=>{this.setState({isPanelOpened:!0})},this.onPointSymbolChanged=t=>{let e=t;null===t&&(e=this.jsonUtils.fromJSON(O)),this.onSymbolChange(e),this.onSymbolClick()},this.onSymbolChange=t=>{this.updatedSymbol=t},this.onSymbolClick=()=>{var t;this.props.onGeneralSettingsUpdated("defaultPointSymbol",null===(t=this.updatedSymbol)||void 0===t?void 0:t.toJSON()),this.closeSymbolChooser()},this.closeSymbolChooser=()=>{this.setState({isPanelOpened:!1})},this.state={apiLoaded:!1,isPanelOpened:!1},this.updatedSymbol=null}render(){var o,n,a;const r=this.props.config&&this.props.config.defaultPointSymbol?null===(o=this.jsonUtils)||void 0===o?void 0:o.fromJSON(this.props.config.defaultPointSymbol):null===(n=this.jsonUtils)||void 0===n?void 0:n.fromJSON(O);return(0,t.jsx)("div",{style:{height:"100%",marginTop:"5px"},children:(0,t.jsxs)("div",{css:(this.props.theme,e.css`

  .hint label {
    font-style: italic;
  }

  .zoomScaleInput {
    width: 105px;
  }

  .symbolItem {
    cursor: pointer;
  }
  `),children:[this.state.apiLoaded&&(0,t.jsx)(i.SettingRow,{label:this.nls("locationSymbol"),flow:"wrap",children:r&&(0,t.jsx)(I.SymbolSelector,{jimuSymbolType:I.JimuSymbolType.Point,symbol:r,onPointSymbolChanged:this.onPointSymbolChanged.bind(this)})}),(0,t.jsx)(i.SettingRow,{className:"hint",label:this.nls("symbolLocationHint")}),(0,t.jsxs)(i.SettingRow,{label:this.nls("zoomScale"),children:[(0,t.jsx)(s.Label,{children:"1 :"}),(0,t.jsx)(s.NumericInput,{"aria-label":this.nls("zoomScale"),size:"sm",className:"mx-1 zoomScaleInput",value:(null===(a=this.props.config)||void 0===a?void 0:a.zoomScale)?this.props.config.zoomScale:5e4,showHandlers:!1,onChange:this.onZoomScaleInputChange})]})]})})}}class U extends o.BaseWidgetSetting{constructor(t){var i;super(t),this.CoordinateConversionViewModel=null,this.Format=null,this.reactiveUtils=null,this.outputSettingsObj=e.React.createRef(),this.nls=t=>{const e=Object.assign({},n,s.defaultMessages);return this.props.intl&&this.props.intl.formatMessage?this.props.intl.formatMessage({id:t,defaultMessage:e[t]}):e[t]},this.componentDidMount=()=>{this.state.apiLoaded||(0,y.loadArcGISJSAPIModules)(["esri/widgets/CoordinateConversion/CoordinateConversionViewModel","esri/widgets/CoordinateConversion/support/Format","esri/core/reactiveUtils"]).then(t=>{[this.CoordinateConversionViewModel,this.Format,this.reactiveUtils]=t,this.setState({apiLoaded:!0}),this.createCoordinateConversionViewModel()})},this.onMapWidgetSelected=t=>{this.props.onSettingChange({id:this.props.id,useMapWidgetIds:t})},this.onToggleInputSettings=()=>{this.setState({isInputSettingsOpen:!this.state.isInputSettingsOpen})},this.onToggleOutputSettings=()=>{this.setState({isOutputSettingsOpen:!this.state.isOutputSettingsOpen},()=>{this.outputSettingsObj&&this.outputSettingsObj.current&&!this.state.isOutputSettingsOpen&&this.outputSettingsObj.current.closeOutputSettingPopper()})},this.onToggleAddressSettings=()=>{this.setState({isAddressSettingsOpen:!this.state.isAddressSettingsOpen})},this.onToggleGeneralSettings=()=>{this.setState({isGeneralSettingsOpen:!this.state.isGeneralSettingsOpen})},this.updateInputSettings=(t,e)=>{this.props.onSettingChange({id:this.props.id,config:this.props.config.setIn([t],e)})},this.updateOutputSettings=(t,e)=>{this.props.onSettingChange({id:this.props.id,config:this.props.config.setIn([t],e)})},this.updateAddressSettings=(t,e)=>{this.props.onSettingChange({id:this.props.id,config:this.props.config.setIn(["addressSettings",t],e)})},this.updateGeneralSettings=(t,e)=>{this.props.onSettingChange({id:this.props.id,config:this.props.config.setIn(["generalSettings",t],e)})},this.state={supportedFormats:[],apiLoaded:!1,isInputSettingsOpen:!1,isOutputSettingsOpen:!1,isAddressSettingsOpen:!0,isGeneralSettingsOpen:!1,coordinateVM:null},this.isRTL=!1;const o=(0,e.getAppStore)().getState();this.isRTL=null===(i=null==o?void 0:o.appContext)||void 0===i?void 0:i.isRTL}createCoordinateConversionViewModel(){if(!this.state.coordinateVM){const t=new this.CoordinateConversionViewModel;this.reactiveUtils.watch(()=>t.messages,()=>{setTimeout(()=>{const e=[],s={name:"address",label:this.nls("address"),defaultPattern:"",currentPattern:"",enabled:!0,isCustom:!1};e.push(s),t.formats.forEach(t=>{if("basemap"!==t.name){const s={name:t.name,label:this.nls(t.name),defaultPattern:t.defaultPattern,currentPattern:t.defaultPattern,enabled:!0,isCustom:!1};e.push(s)}}),e.sort((t,e)=>t.label.localeCompare(e.label)),this.setState({supportedFormats:e})},100)})}}render(){return(0,t.jsx)("div",{css:(this.props.theme,e.css`

    .widget-setting-coordinate-conversion {

      .cursor-pointer {
        cursor: pointer;
      }

      .map-selector-section .component-map-selector .form-control {
        width: 100%;
      }

      .selectOption {
        width: 227px;
      }
    }
  `),children:(0,t.jsxs)("div",{className:"widget-setting-coordinate-conversion",children:[(0,t.jsxs)(i.SettingSection,{className:"map-selector-section",children:[(0,t.jsx)(i.SettingRow,{children:(0,t.jsx)("div",{className:"text-truncate flex-grow-1 title3 hint-default",title:this.nls("selectMapWidget"),children:this.nls("selectMapWidget")})}),(0,t.jsx)(i.SettingRow,{children:(0,t.jsx)(i.MapWidgetSelector,{onSelect:this.onMapWidgetSelected.bind(this),useMapWidgetIds:this.props.useMapWidgetIds})})]}),(0,t.jsx)(i.SettingSection,{children:(0,t.jsx)(s.CollapsablePanel,{label:this.nls("addressSettingsLabel"),isOpen:this.state.isAddressSettingsOpen,onRequestOpen:()=>{this.onToggleAddressSettings()},onRequestClose:()=>{this.onToggleAddressSettings()},children:(0,t.jsx)(i.SettingRow,{flow:"wrap",children:(0,t.jsx)(A,{intl:this.props.intl,theme:this.props.theme,portalSelf:this.props.portalSelf,config:this.props.config.addressSettings,isRTL:this.isRTL,onAddressSettingsUpdated:this.updateAddressSettings})})})}),(0,t.jsx)(i.SettingSection,{children:(0,t.jsx)(s.CollapsablePanel,{label:this.nls("inputSettingsLabel"),isOpen:this.state.isInputSettingsOpen,onRequestOpen:()=>{this.onToggleInputSettings()},onRequestClose:()=>{this.onToggleInputSettings()},children:(0,t.jsx)(i.SettingRow,{flow:"wrap",children:(0,t.jsx)(l,{allSupportedFormats:this.state.supportedFormats,intl:this.props.intl,theme:this.props.theme,config:this.props.config.inputSettings,onInputSettingsUpdated:this.updateInputSettings})})})}),(0,t.jsx)(i.SettingSection,{children:(0,t.jsx)(s.CollapsablePanel,{label:this.nls("outputSettingsLabel"),isOpen:this.state.isOutputSettingsOpen,onRequestOpen:()=>{this.onToggleOutputSettings()},onRequestClose:()=>{this.onToggleOutputSettings()},children:(0,t.jsx)(i.SettingRow,{flow:"wrap",children:this.state.supportedFormats&&this.state.supportedFormats.length>0&&(0,t.jsx)(v,{allSupportedFormats:this.state.supportedFormats,intl:this.props.intl,theme:this.props.theme,config:this.props.config.outputSettings.asMutable(),onOutputSettingsUpdated:this.updateOutputSettings,ref:this.outputSettingsObj})})})}),this.props.useMapWidgetIds&&this.props.useMapWidgetIds.length>0&&(0,t.jsx)(i.SettingSection,{children:(0,t.jsx)(s.CollapsablePanel,{label:this.nls("generalSettingsLabel"),isOpen:this.state.isGeneralSettingsOpen,onRequestOpen:()=>{this.onToggleGeneralSettings()},onRequestClose:()=>{this.onToggleGeneralSettings()},children:(0,t.jsx)(i.SettingRow,{flow:"wrap",children:(0,t.jsx)(k,{intl:this.props.intl,theme:this.props.theme,config:this.props.config.generalSettings,onGeneralSettingsUpdated:this.updateGeneralSettings})})})})]})})}}function L(t){h.p=t}})(),c})())}}});