System.register(["jimu-core/emotion","jimu-core","jimu-arcgis","jimu-ui","arcgis-map-components","jimu-ui/basic/list-tree","esri/core/reactiveUtils","jimu-theme","jimu-core/dnd","esri/widgets/Legend"],function(e,t){var n={},l={},r={},i={},a={},o={},s={},c={},u={},d={};return{setters:[function(e){n.jsx=e.jsx,n.jsxs=e.jsxs},function(e){l.AppMode=e.AppMode,l.DataSourceManager=e.DataSourceManager,l.DataSourceTypes=e.DataSourceTypes,l.Immutable=e.Immutable,l.React=e.React,l.ReactRedux=e.ReactRedux,l.classNames=e.classNames,l.css=e.css,l.getAppStore=e.getAppStore,l.hooks=e.hooks,l.lodash=e.lodash,l.polished=e.polished},function(e){r.JimuMapViewComponent=e.JimuMapViewComponent,r.MapViewManager=e.MapViewManager},function(e){i.Alert=e.Alert,i.CollapsablePanel=e.CollapsablePanel,i.DistanceUnits=e.DistanceUnits,i.Icon=e.Icon,i.Label=e.Label,i.Paper=e.Paper,i.Switch=e.Switch,i.WidgetPlaceholder=e.WidgetPlaceholder,i.defaultMessages=e.defaultMessages},function(){},function(e){o.List=e.List},function(e){s.watch=e.watch},function(e){c.Global=e.Global,c.useTheme=e.useTheme},function(e){u.interact=e.interact},function(e){d.default=e.default}],execute:function(){e((()=>{var e={1888:e=>{"use strict";e.exports=c},3485:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m10.646 10.06.707-.707L8 6 4.646 9.353l.708.707L8 7.414z"></path><path fill="#000" fill-rule="evenodd" d="M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0m-1 0A6 6 0 1 1 2 8a6 6 0 0 1 12 0" clip-rule="evenodd"></path></svg>'},11466:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"><path fill="#000" d="M9 0v20h1V0zM0 3.5A1.5 1.5 0 0 1 1.5 2h5v1h-5a.5.5 0 0 0-.5.5v13a.5.5 0 0 0 .5.5h5v1h-5A1.5 1.5 0 0 1 0 16.5zM20 16.5a1.5 1.5 0 0 1-1.5 1.5h-6v-1h6a.5.5 0 0 0 .5-.5v-13a.5.5 0 0 0-.5-.5h-6V2h6A1.5 1.5 0 0 1 20 3.5z"></path><path fill="#000" d="m6.354 6.646.707.708L4.414 10l2.647 2.646-.707.708L3 10zM12 12.646l.707.707L16.061 10l-3.354-3.354-.707.708L14.646 10z"></path></svg>'},14321:e=>{"use strict";e.exports=i},26245:e=>{"use strict";e.exports=u},26490:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M3.154 3.154a.527.527 0 0 1 .746 0l1.317 1.317A8.6 8.6 0 0 1 8 4c2.667 0 5.667 1.333 7 4-.696 1.393-1.847 2.422-3.168 3.087l1.014 1.013a.527.527 0 1 1-.746.746l-1.317-1.317A8.6 8.6 0 0 1 8 12c-2.667 0-5.667-1.333-7-4 .696-1.393 1.847-2.422 3.168-3.087L3.154 3.9a.527.527 0 0 1 0-.746m1.698 2.443C3.726 6.087 2.782 6.882 2 8c1.422 2.033 3.382 3 6 3a8.7 8.7 0 0 0 2.03-.225l-.675-.674A2.5 2.5 0 0 1 5.9 6.644zm6.296 4.805C12.275 9.913 13.218 9.119 14 8c-1.422-2.033-3.382-3-6-3q-1.088 0-2.03.225l.675.674a2.5 2.5 0 0 1 3.457 3.456zM6.5 8c0-.221.048-.431.134-.62l1.987 1.986A1.5 1.5 0 0 1 6.5 8m.88-1.366 1.986 1.987a1.5 1.5 0 0 0-1.987-1.987" clip-rule="evenodd"></path></svg>'},27416:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#000" fill-rule="nonzero" d="m6 11.943 4 1.711V4.057L6 2.346zm-1 .17V2.494l-4 1.48v9.619zm6 1.393 4-1.48V2.407l-4 1.48zM0 15V3.307L5.75 1.18l4.528 1.937L16 1v11.693l-5.75 2.127-4.528-1.937z"></path></svg>'},28996:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 2.125 14.334 14H1.667zm-.882-.47a1 1 0 0 1 1.765 0l6.333 11.874A1 1 0 0 1 14.334 15H1.667a1 1 0 0 1-.882-1.47zM8 4.874a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0L8.9 5.87a.905.905 0 0 0-.9-.995m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0" clip-rule="evenodd"></path></svg>'},39420:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M14 8A6 6 0 1 1 2 8a6 6 0 0 1 12 0m1 0A7 7 0 1 1 1 8a7 7 0 0 1 14 0M5.354 6.646l-.708.708L8 10.707l3.354-3.353-.707-.708L8 9.293z" clip-rule="evenodd"></path></svg>'},39524:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M7.5 1.5a.5.5 0 0 1 1 0v2.8a.5.5 0 0 1-1 0zm6.028.874a.5.5 0 0 1 .062.705l-1.414 1.685a.5.5 0 1 1-.766-.643l1.414-1.685a.5.5 0 0 1 .704-.062m-10.352.062a.5.5 0 1 0-.766.643l1.414 1.685a.5.5 0 0 0 .766-.643zM6.244 10.6H5.43zM.961 9.8h4.88c.211 0 .359.19.359.4q0 .207.045.4a1.8 1.8 0 0 0 3.51 0h.814a2.6 2.6 0 0 1-5.139 0H.8v3.6h14.4v-3.6H9.755q.045-.194.045-.4c0-.21.148-.4.358-.4h4.881l-2.267-3.4H3.228zm11.81-4.2a.8.8 0 0 1 .666.356l2.429 3.642a.8.8 0 0 1 .134.444V14.2a.8.8 0 0 1-.8.8H.8a.8.8 0 0 1-.8-.8v-4.158a.8.8 0 0 1 .134-.444l2.429-3.642a.8.8 0 0 1 .665-.356z" clip-rule="evenodd"></path></svg>'},40292:e=>{"use strict";e.exports=a},44828:e=>{"use strict";e.exports=d},62243:e=>{"use strict";e.exports=s},62686:e=>{"use strict";e.exports=r},67386:e=>{"use strict";e.exports=n},73529:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 12c-2.667 0-5.667-1.333-7-4 1.333-2.667 4.333-4 7-4s5.667 1.333 7 4c-1.333 2.667-4.333 4-7 4m0-7c-2.618 0-4.578.967-6 3 1.422 2.033 3.382 3 6 3s4.578-.967 6-3c-1.422-2.033-3.382-3-6-3m0 5.5a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5m0-1a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3" clip-rule="evenodd"></path></svg>'},79244:e=>{"use strict";e.exports=l},95930:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#000" fill-rule="nonzero" d="M7.5 4V1.39Q5.854 2.484 4.985 4zm0 3.5V5H4.512a8.1 8.1 0 0 0-.5 2.5zm0 3.5V8.5H4.012a8.1 8.1 0 0 0 .5 2.5zm0 3.61V12H4.985q.869 1.515 2.515 2.61m2.543.087A7 7 0 0 0 13.745 12h-1.6a8.3 8.3 0 0 1-2.102 2.697M11.015 12H8.5v2.61q1.646-1.095 2.515-2.61m1.974-3.5a9.3 9.3 0 0 1-.441 2.5h1.778c.365-.767.594-1.61.656-2.5zm-1.001 0H8.5V11h2.988a8.1 8.1 0 0 0 .5-2.5m.56-3.5q.381 1.163.441 2.5h1.993a7 7 0 0 0-.656-2.5zm-1.06 0H8.5v2.5h3.488a8.1 8.1 0 0 0-.5-2.5m-1.445-3.697Q11.408 2.473 12.145 4h1.6a7 7 0 0 0-3.702-2.697M8.5 4h2.515Q10.146 2.485 8.5 1.39zm-.527 12a8 8 0 1 1 .055-16 8 8 0 0 1-.055 16M5.957 1.302A7 7 0 0 0 2.255 4h1.6a8.3 8.3 0 0 1 2.102-2.697M3.011 7.5q.06-1.337.441-2.5H1.674a7 7 0 0 0-.656 2.5zm.441 3.5a9.3 9.3 0 0 1-.441-2.5H1.018c.062.89.291 1.733.656 2.5zm2.505 3.697A8.3 8.3 0 0 1 3.855 12h-1.6a7 7 0 0 0 3.702 2.697"></path></svg>'},98640:e=>{"use strict";e.exports=o}},t={};function p(n){var l=t[n];if(void 0!==l)return l.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,p),r.exports}p.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return p.d(t,{a:t}),t},p.d=(e,t)=>{for(var n in t)p.o(t,n)&&!p.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},p.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),p.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},p.p="";var v={};return p.p=window.jimuConfig.baseUrl,(()=>{"use strict";p.r(v),p.d(v,{__set_webpack_public_path__:()=>Ce,default:()=>je});var e=p(67386),t=p(79244),n=p(62686),l=p(14321);const r={_widgetLabel:"Swipe",leadingLayers:"Leading layers",trailingLayers:"Trailing layers",webSceneNotSupported:"Web scenes are not supported.",noConfiguredLayerText:"There is currently no configured layer.",noValidLayerText:"There is no valid layer.",mapOccupiedMsg:"Another active Swipe that connects to the targeted Map has been toggled off.",runtimeLayers:"Runtime layers",dragToCompare:"Drag to compare",currentDisplay:"is currently being displayed"};var i,a,o=p(11466),s=p.n(o);!function(e){e.SimpleHorizontal="SIMPLE_HORIZONTAL",e.SimpleVertical="SIMPLE_VERTICAL",e.AdvancedHorizontal="ADVANCED_HORIZONTAL",e.AdvancedVertical="ADVANCED_VERTICAL"}(i||(i={})),function(e){e.SwipeBetweenLayers="SWIPE_BETWEEN_LAYERS_OF_ONE_MAP",e.SwipeBetweenMaps="SWIPE_BETWEEN_WEBMAPS_OR_WEBSCENES"}(a||(a={}));p(40292);var c=function(e,t,n,l){return new(n||(n=Promise))(function(r,i){function a(e){try{s(l.next(e))}catch(e){i(e)}}function o(e){try{s(l.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}s((l=l.apply(e,t||[])).next())})};const{useEffect:u,useRef:d}=t.React;function m(e){var n,l;const{widgetId:r,activeMapView:a,leadingLayersId:o,trailingLayersId:s,swipeStyle:p,sliderPosition:v,isDesignMode:m}=e,y=null===(l=null===(n=(0,t.getAppStore)().getState())||void 0===n?void 0:n.appContext)||void 0===l?void 0:l.isRTL,h=null==a?void 0:a.mapWidgetId,g=d(null),w=p===i.SimpleHorizontal&&y,f=d(w?100-v.distance:v.distance),x=d(document.querySelector(`div[data-widgetid=${h}]`)),b=d(!1),L=d(v);u(()=>{var e;const t=null===(e=x.current)||void 0===e?void 0:e.querySelector(".arcgis-swipe");t&&(t.style.pointerEvents=m?null:"none")},[m,x]);const S=(e,t)=>c(this,void 0,void 0,function*(){return yield e.whenJimuLayerViewLoaded(t)});return u(()=>()=>{b.current=!0},[]),u(()=>{function e(){return c(this,void 0,void 0,function*(){var e;g.current&&(f.current=g.current.swipePosition,null===(e=null==a?void 0:a.view)||void 0===e||e.ui.remove(g.current),yield g.current.destroy(),g.current=null)})}return(null==a?void 0:a.view)&&function(){var t,n;const l=null===(t=null==o?void 0:o.asMutable())||void 0===t?void 0:t.map(e=>S(a,e)),u=null===(n=null==s?void 0:s.asMutable())||void 0===n?void 0:n.map(e=>S(a,e)),d=p===i.SimpleVertical?"vertical":"horizontal";l&&u&&Promise.all(l.concat(u)).then(t=>c(this,void 0,void 0,function*(){if(b.current)return;const n=null==o?void 0:o.asMutable().map(e=>t.filter(t=>t.id===e)[0].layer),l=null==s?void 0:s.asMutable().map(e=>t.filter(t=>t.id===e)[0].layer);yield e(),v===L.current&&f.current||(L.current=v,f.current=w?100-v.distance:v.distance),(null==a?void 0:a.view)&&(g.current=document.createElement("arcgis-swipe"),g.current.classList.add(`exb-swipe-${r}`),g.current.leadingLayers=n,g.current.trailingLayers=l,g.current.direction=d,g.current.swipePosition=f.current,g.current.autoDestroyDisabled=!0,g.current.view=null==a?void 0:a.view,null==a||a.view.ui.add(g.current))}))}(),()=>{e()}},[r,a,v,o,s,p,w]),null}var y=p(98640),h=p(73529),g=p.n(h),w=p(26490),f=p.n(w);const x=n=>{const{layerList:r,onChange:i,isAllowDeactivateLayers:a,toggleLayerVisibility:o,highlightIndex:s}=n,c=t.hooks.useTranslation(l.defaultMessages),u=t.ReactRedux.useSelector(e=>e.appRuntimeInfo.appMode===t.AppMode.Express),d=t.React.useCallback(e=>[{label:c("visibility"),buttonAriaPressed:null==e?void 0:e.visible,iconProps:{icon:(null==e?void 0:e.visible)?g():f(),size:16},action:()=>{var t;null===(t=null==n?void 0:n.onToggleLayerVisibility)||void 0===t||t.call(n,e.layerId)}}],[n,c]),[p,v]=t.React.useState(()=>{const e=u?null==r?void 0:r.filter(e=>e.visible):r;return null==e?void 0:e.map(e=>({itemKey:e.layerId,itemStateTitle:e.title,itemStateChecked:!!a&&e.selected,isCheckboxDisabled:!e.visible,itemStateCommands:o?d(e):[]}))});t.React.useEffect(()=>{const e=u?null==r?void 0:r.filter(e=>e.visible):r,t=null==e?void 0:e.map(e=>({itemKey:e.layerId,itemStateTitle:e.title,itemStateChecked:!!a&&e.selected,isCheckboxDisabled:!e.visible,itemStateCommands:o?d(e):[]}));v(t)},[d,a,u,r,o]);return(0,e.jsx)("div",{className:"layer-list",css:b(s),children:(0,e.jsx)(y.List,{size:"default",className:"w-100",itemsJson:p,isMultiSelection:a,dndEnabled:!1,disableDoubleClickTitle:!0,onUpdateItem:(e,t)=>{if(!a)return;const[n,l]=e.itemJsons;v([...l]),i(n.itemKey)}})})};function b(e){return t.css`
    .jimu-tree-item_template-card .jimu-tree-item__body:hover {
      background-color: transparent !important;
    }
    .jimu-tree-main {
      .jimu-tree-item:nth-of-type(${e}) {
        .jimu-tree-item__body {
          border-left: .125rem solid var(--sys-color-primary-main) !important;
        }
      }
    }
  `}var L=p(39524),S=p.n(L),M=function(e,t){var n={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(n[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(l=Object.getOwnPropertySymbols(e);r<l.length;r++)t.indexOf(l[r])<0&&Object.prototype.propertyIsEnumerable.call(e,l[r])&&(n[l[r]]=e[l[r]])}return n};const I=n=>{const l=window.SVG,{className:r}=n,i=M(n,["className"]),a=(0,t.classNames)("jimu-icon jimu-icon-component",r);return l?(0,e.jsx)(l,Object.assign({className:a,src:S()},i)):(0,e.jsx)("svg",Object.assign({className:a},i))},V=t.css`
  .no-layer-placeholder-text, .no-layer-placeholder-icon{
    display: table;
    margin: 0 auto;
  }
  .no-layer-placeholder-text {
    color: var(--sys-color-surface-paper-hint);
    font-size: 13px;
    margin-top: 16px;
    text-align: center;
  }
  .no-layer-placeholder-icon {
    color: var(--sys-color-surface-overlay-hint);
  }
`,j=n=>{const{swipeLayerMode:l}=n,i=t.hooks.useTranslation(r);return(0,e.jsxs)("div",{css:V,className:"no-layer-placeholder w-100",children:[(0,e.jsx)("div",{className:"no-layer-placeholder-icon",children:(0,e.jsx)(I,{size:32,color:"var(--sys-color-surface-paper-hint)"})}),(0,e.jsx)("div",{className:"no-layer-placeholder-text",children:(0,e.jsx)("span",{children:i(l?"noConfiguredLayerText":"noValidLayerText")})})]})};var C=p(3485),A=p.n(C),E=p(39420),O=p.n(E),P=p(62243),R=function(e,t,n,l){return new(n||(n=Promise))(function(r,i){function a(e){try{s(l.next(e))}catch(e){i(e)}}function o(e){try{s(l.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}s((l=l.apply(e,t||[])).next())})};const{useState:N,useEffect:k,useRef:D}=t.React;function T(n){var i,a,o,s;const{swipeMapViewList:c,activeMapView:u,isAllowDeactivateLayers:d,toggleLayerVisibility:p,handlePanelSelectedLeadingLayers:v,handlePanelSelectedTrailingLayers:m,runtimeAddedLayers:y,handleRuntimePanelSelectedLeadingLayers:h,handleRuntimePanelSelectedTrailingLayers:g}=n,[w,f]=N(!1),[b,L]=N(!1),[S,M]=N(!1),[I,V]=N(!1),C=t.React.useRef([]),E=t.React.useRef([]),T=t.React.useRef([]),$=t.React.useRef([]),q=t.hooks.useTranslation(r),[_,F]=N(null),[H,J]=N(null),[B,U]=N([]),[W,G]=N([]),Y=D(_),X=D(H),K=D(B),Q=D(W),[Z,ee]=N((null===(i=null==c?void 0:c[null==u?void 0:u.id])||void 0===i?void 0:i.leadingLayersId)||(0,t.Immutable)([])),[te,ne]=N((null===(a=null==c?void 0:c[null==u?void 0:u.id])||void 0===a?void 0:a.trailingLayersId)||(0,t.Immutable)([])),[le,re]=N((0,t.Immutable)([])),[ie,ae]=N((0,t.Immutable)([])),oe=(e,t)=>R(this,void 0,void 0,function*(){return yield e.whenJimuLayerViewLoaded(t)}),se=t.hooks.useEventCallback((e,n,l,r)=>{var i,a,o;const s=e?"leadingLayersId":"trailingLayersId",p=null===(o=null===(a=null===(i=null==c?void 0:c[null==u?void 0:u.id])||void 0===i?void 0:i[s])||void 0===a?void 0:a.asMutable())||void 0===o?void 0:o.map(e=>oe(u,e));p&&Promise.all(p).then(e=>{const i=e.map(e=>({layerId:e.id,title:e.layer.title,selected:!0,visible:e.layer.visible,allowOperation:d}));n(i),l.current=i;const a=[];null==i||i.forEach(e=>{e.selected&&a.push(e.layerId)}),r((0,t.Immutable)(a))})});k(()=>{se(!0,F,Y,v),se(!1,J,X,m)},[c,u,d,v,m,se]),k(()=>{const e=null==y?void 0:y.asMutable({deep:!0}).map(e=>{const t=u.jimuLayerViews[e];return{layerId:e,title:t.layer.title,selected:!1,visible:t.layer.visible,allowOperation:!0}});U(e),K.current=e,G(e),Q.current=e;const n=[];null==e||e.forEach(e=>{e.selected&&n.push(e.layerId)}),h((0,t.Immutable)(n)),g((0,t.Immutable)(n))},[u,h,g,y]);const ce=t.hooks.useEventCallback((e,n,l,r)=>{var i,a,o;const s=e?"leadingLayersId":"trailingLayersId",d=null===(o=null===(a=null===(i=null==c?void 0:c[null==u?void 0:u.id])||void 0===i?void 0:i[s])||void 0===a?void 0:a.asMutable())||void 0===o?void 0:o.map(e=>oe(u,e));d&&Promise.all(d).then(e=>{e.forEach(e=>{const i=[];i.push(P.watch(()=>e.layer.visible,r=>{const i=JSON.parse(JSON.stringify(n.current));i.forEach(t=>{t.layerId===e.id&&(t.visible=r)}),l((0,t.Immutable)(i)),n.current=(0,t.Immutable)(i)})),r.current=i})})});k(()=>{const e=C.current,t=E.current;return ce(!0,Y,F,C),ce(!1,X,J,E),()=>{e.forEach(e=>{e.remove(),e=null}),t.forEach(e=>{e.remove(),e=null})}},[c,u,ce]);const ue=t.hooks.useEventCallback((e,n,l,r)=>{(e?B:W).forEach(e=>{const i=u.jimuLayerViews[e.layerId],a=[];a.push(P.watch(()=>i.layer.visible,e=>{const r=JSON.parse(JSON.stringify(n.current));r.forEach(t=>{t.layerId===i.id&&(t.visible=e)}),l((0,t.Immutable)(r)),n.current=(0,t.Immutable)(r)})),r.current=a})});k(()=>{const e=T.current,t=$.current;return ue(!0,K,U,T),ue(!1,Q,G,$),()=>{e.forEach(e=>{e.remove(),e=null}),t.forEach(e=>{e.remove(),e=null})}},[u,B,W,ue]),k(()=>{v(Z)},[v,Z]),k(()=>{m(te)},[m,te]),k(()=>{h(le)},[h,le]),k(()=>{g(ie)},[g,ie]);const de=()=>{f(!w)},pe=()=>{L(!b)},ve=()=>{M(!S)},me=()=>{V(!I)},ye=(e,n,l,r,i)=>{const a=JSON.parse(JSON.stringify(e));a.forEach(e=>{e.layerId===i&&(e.selected=!e.selected)}),n((0,t.Immutable)(a)),r.current=a;const o=[];a.forEach(e=>{e.selected&&o.push(e.layerId)}),l((0,t.Immutable)(o))},he=t.React.useCallback(e=>R(this,void 0,void 0,function*(){const t=yield oe(u,e);t.layer.visible=!t.layer.visible}),[u]),ge=(null===(o=null==c?void 0:c[null==u?void 0:u.id])||void 0===o?void 0:o.leadingLayersId.length)>0,we=(null===(s=null==c?void 0:c[null==u?void 0:u.id])||void 0===s?void 0:s.trailingLayersId.length)>0;return(0,e.jsxs)("div",{css:z,children:[(0,e.jsxs)(l.CollapsablePanel,{className:"swipe-collapse",label:q("leadingLayers"),isOpen:w,"aria-label":ge?q("leadingLayers"):q("leadingLayers")+":"+q("noConfiguredLayerText"),onRequestOpen:de,onRequestClose:de,children:[ge?(0,e.jsx)(x,{layerList:_,onChange:e=>{ye(_,F,ee,Y,e)},isAllowDeactivateLayers:d,toggleLayerVisibility:p,onToggleLayerVisibility:he}):(0,e.jsx)(j,{swipeLayerMode:!0}),(null==B?void 0:B.length)>0&&(0,e.jsx)(l.CollapsablePanel,{className:"swipe-collapse runtime-layer-collapse",label:q("runtimeLayers"),isOpen:b,"aria-label":q("runtimeLayers"),onRequestOpen:pe,onRequestClose:pe,rightIcon:O(),rightActiveIcon:A(),children:(0,e.jsx)(x,{layerList:B,isAllowDeactivateLayers:!0,onChange:e=>{ye(B,U,re,K,e)},toggleLayerVisibility:!0,onToggleLayerVisibility:he})})]}),(0,e.jsxs)(l.CollapsablePanel,{className:"swipe-collapse",label:q("trailingLayers"),isOpen:I,"aria-label":we?q("trailingLayers"):q("trailingLayers")+":"+q("noConfiguredLayerText"),onRequestOpen:me,onRequestClose:me,children:[we?(0,e.jsx)(x,{layerList:H,onChange:e=>{ye(H,J,ne,X,e)},isAllowDeactivateLayers:d,toggleLayerVisibility:p,onToggleLayerVisibility:he}):(0,e.jsx)(j,{swipeLayerMode:!0}),(null==W?void 0:W.length)>0&&(0,e.jsx)(l.CollapsablePanel,{className:"swipe-collapse runtime-layer-collapse",label:q("runtimeLayers"),isOpen:S,"aria-label":q("runtimeLayers"),onRequestOpen:ve,onRequestClose:ve,rightIcon:O(),rightActiveIcon:A(),children:(0,e.jsx)(x,{layerList:W,isAllowDeactivateLayers:!0,onChange:e=>{ye(W,G,ae,Q,e)},toggleLayerVisibility:!0,onToggleLayerVisibility:he})})]})]})}const z=t.css`
.swipe-collapse {
  margin-top: 16px;
  .title {
    font-weight: 600;
  }
}
.runtime-layer-collapse {
  .title {
    font-size: 13px;
    font-weight: 500;
  }
}
.layer-list {
  margin-top: 12px;
  margin-bottom: 16px;
}
.no-layer-placeholder {
  margin-top: 16px;
  margin-bottom: 16px;
}
`;var $=p(1888),q=p(26245);const _=(e,t)=>{if((null==e?void 0:e.length)!==(null==t?void 0:t.length))return!1;const n=[...e].sort(),l=[...t].sort();for(let e=0;e<n.length;e++)if(n[e]!==l[e])return!1;return!0},F=e=>{var n;return(null===(n=t.DataSourceManager.getInstance().getDataSource(e))||void 0===n?void 0:n.type)===t.DataSourceTypes.WebMap},H=e=>{if(!e)return"";const n=t.DataSourceManager.getInstance().getDataSource(e);return(null==n?void 0:n.getLabel())||(null==n?void 0:n.getDataSourceJson().sourceLabel)||e};var J=function(e,t,n,l){return new(n||(n=Promise))(function(r,i){function a(e){try{s(l.next(e))}catch(e){i(e)}}function o(e){try{s(l.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}s((l=l.apply(e,t||[])).next())})};const{useRef:B,useEffect:U,useState:W}=t.React;function G(e){var n,a,o,s,c,u;const{activeMapView:d,inactiveMapView:p,jimuMapViewGroup:v,widgetId:m,swipeMode:y,swipeStyle:h,sliderPosition:g,mapUseDataSourcesOrderList:w,mapUseDataSources:f,dividerColor:x,handlerColor:b,isDesignMode:L}=e,S=null===(a=null===(n=(0,t.getAppStore)().getState())||void 0===n?void 0:n.appContext)||void 0===a?void 0:a.isRTL,M=d.mapWidgetId,I=B(null===(o=d.view)||void 0===o?void 0:o.width),V=B(null===(s=d.view)||void 0===s?void 0:s.height),j=`jimu-widget-swipe-${m}-handle-container`,C=_(f,w)?w:f,A=B((null==C?void 0:C[0])===(null==d?void 0:d.dataSourceId)),E=B(!1),O=B(!1),P=B(!1),R=B(!1),N={x:0,y:0},k=B(document.querySelector(`div[data-widgetid=${M}] .multi-map-container`)),D=B(null===(c=k.current)||void 0===c?void 0:c.querySelector(".multisourcemap-item-appear-noanimate")),T=B(null===(u=k.current)||void 0===u?void 0:u.querySelector(".multisourcemap-item-disappear-noanimate"));if(h===i.SimpleVertical)N.y=V.current*g.distance*.01;else{const e=S?100-g.distance:g.distance;N.x=I.current*e*.01}const[z,F]=W(N),H=B(null),G=B(null),Y=B(d.isClickOpenPopupEnabled()),X=B(d.isClickHighlightEnabled()),K=B(p.isClickOpenPopupEnabled()),Q=B(p.isClickHighlightEnabled()),Z=t.hooks.useTranslation(r,l.defaultMessages),ee=(0,$.useTheme)();U(()=>{d.isCached()||(k.current.style.pointerEvents=L?"none":null)},[L]),U(()=>()=>{k.current&&(k.current.style.pointerEvents=null)},[]),t.hooks.useUpdateEffect(()=>{A.current=!A.current},[d]),U(()=>{if(!d.isCached())return D.current=k.current.querySelector(".multisourcemap-item-appear-noanimate"),T.current=k.current.querySelector(".multisourcemap-item-disappear-noanimate"),O.current=!1,E.current=!1,te(),ne(),le(),re(),ae(),ce(),v.hideMapTools(),()=>{oe()}},[d]),U(()=>{const e=d.view.on("resize",e=>{I.current=e.width,V.current=e.height,oe(),le(),re(),ae(),ce(),v.hideMapTools()});return()=>{e.remove()}},[d]),U(()=>{const e=()=>{E.current=!1},t=()=>{k.current=document.querySelector(`div[data-widgetid=${M}] .multi-map-container`),D.current=k.current.querySelector(".multisourcemap-item-appear-noanimate"),T.current=k.current.querySelector(".multisourcemap-item-disappear-noanimate"),le(),re(),ae(),ce(),v.hideMapTools(),ne()};return d.addCacheListener(e),d.addRestoreListener(t),()=>{d.removeCacheListener(e),d.removeRestoreListener(t),oe()}},[d]),U(()=>{if(d.isCached())return;G.current.style.backgroundColor=x;G.current.querySelector(".handler").style.backgroundColor=b},[d,x,b]),U(()=>{F(N)},[y]),t.hooks.useUpdateEffect(()=>{d.isCached()||(A.current=!A.current,re(z))},[C]),U(()=>{if(d.isCached())return;const e={x:0,y:0},t=document.querySelector(`.jimu-widget-swipe-${m}-handle-container`);if(h===i.SimpleVertical)e.y=V.current*g.distance*.01,t.style.transform=`translateY(${e.y}px)`;else{const n=S?100-g.distance:g.distance;e.x=I.current*n*.01;const l=S?-(I.current-e.x):e.x;t.style.transform=`translateX(${l}px)`}re(e),F(e),v.hideMapTools()},[g,m,h,S]);const te=()=>{d.view.popupEnabled&&d.view.closePopup(),p.view.popupEnabled&&p.view.closePopup()},ne=()=>{d.disableClickOpenPopup(),d.disableClickHighlight(),p.disableClickOpenPopup(),p.disableClickHighlight()},le=()=>{(T.current||D.current)&&T.current&&(T.current.style.opacity="1")},re=e=>{const t=e||z;let n=null,l=null;if(h===i.SimpleVertical){n=`inset(0px 0px ${V.current-t.y}px 0px)`,l=`inset(${t.y}px 0px 0px 0px)`}else if(h===i.SimpleHorizontal){n=`inset(0px ${I.current-t.x}px 0px 0px)`,l=`inset(0px 0px 0px ${t.x}px)`}const r=A.current?D.current:T.current,a=A.current?T.current:D.current;r&&(r.style.clipPath=n),a&&(a.style.clipPath=l)},ie=e=>{const t=e.key,n=e.shiftKey?5:.5,l=h===i.SimpleVertical,r=l?"ArrowDown"===t||"ArrowRight"===t:"ArrowUp"===t||"ArrowRight"===t,a=l?"ArrowUp"===t||"ArrowLeft"===t:"ArrowDown"===t||"ArrowLeft"===t;if((r||a)&&(r?(z.x=z.x+n*I.current*.01,z.y=z.y+n*V.current*.01):a&&(z.x=z.x-n*I.current*.01,z.y=z.y-n*V.current*.01),z.x||z.y)){z.x=z.x>I.current?I.current:z.x>0?z.x:0,z.y=z.y>V.current?V.current:z.y>0?z.y:0,F(z),re(z),e.target.style.transform=l?`translateY(${z.y}px)`:`translateX(${z.x}px)`;const t=l?z.y/V.current*100:z.x/I.current*100;e.target.attributes["aria-valuenow"].value=t.toFixed(4).toString(),e.target.attributes["aria-valuetext"].value=t.toFixed(4)+"%"}},ae=()=>{var e;if(document.getElementsByClassName(j)[0])return!1;(()=>{G.current=document.createElement("div"),G.current.className=`${j} jimu-widget-swipe-handle-container`,G.current.setAttribute("style","\n  position: absolute;\n  border: 1px solid rgba(110,110,110,.5);\n"),G.current.style.backgroundColor=x,G.current.style.zIndex="1";const e={ariaLabel:Z("dragToCompare"),title:Z("dragToCompare"),role:"slider",tabIndex:0,onkeydown:ie,ariaValueMax:"100",ariaValueMin:"0"};for(const t in e)G.current[t]=e[t];const t=document.createElement("div");if(t.setAttribute("style","\n  width: 32px;\n  height: 32px;\n  border: 1px solid rgba(110,110,110,.5);\n  borderRadius: 2px;\n  position: absolute;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"),t.style.backgroundColor=b,h===i.SimpleVertical){G.current.style.top="-2px",G.current.style.transform=`translateY(${z.y}px)`,G.current.style.width=`${I.current}px`,G.current.style.height="4px",G.current.ariaOrientation=Z("vertical");const e=z.y/V.current*100;G.current.ariaValueNow=e.toFixed(4).toString(),G.current.ariaValueText=e.toFixed(4)+"%",t.className="handler arcgis-swipe__handle-icon esri-icon-drag-horizontal",t.style.top="-15px",t.style.left="50%",t.style.marginLeft="-16px",t.style.cursor="row-resize"}else{G.current.style.left="-2px";const e=S?-(I.current-z.x):z.x;G.current.style.transform=`translateX(${e}px)`,G.current.style.height=`${V.current}px`,G.current.style.width="4px",G.current.ariaOrientation=Z("horizontal");const n=z.x/I.current*100;G.current.ariaValueNow=n.toFixed(4).toString(),G.current.ariaValueText=n.toFixed(4)+"%",t.className="handler arcgis-swipe__handle-icon esri-icon-drag-vertical",t.style.left="-15px",t.style.top="50%",t.style.marginTop="-16px",t.style.cursor="col-resize"}G.current.appendChild(t),G.current.onfocus=function(){G.current.style.outline=`2px solid ${ee.sys.color.primary.dark}`,t.style.outline=`2px solid ${ee.sys.color.primary.dark}`},G.current.onblur=function(){G.current.style.outline="unset",t.style.outline="unset"}})(),null===(e=k.current)||void 0===e||e.appendChild(G.current),H.current=(e=>{var t,n;return e&&h===i.SimpleVertical?null===(t=(0,q.interact)(e))||void 0===t?void 0:t.draggable({startAxis:"y",lockAxis:"y",listeners:{move(e){z.y+=e.dy,z.y=z.y>V.current?V.current:z.y>0?z.y:0,F(z),re(z),e.target.style.transform=`translateY(${z.y}px)`;const t=z.y/V.current*100;G.current.ariaValueNow=t.toFixed(4).toString(),G.current.ariaValueText=t.toFixed(4)+"%"}}}):e&&h===i.SimpleHorizontal?null===(n=(0,q.interact)(e))||void 0===n?void 0:n.draggable({startAxis:"x",lockAxis:"x",listeners:{move(e){z.x+=e.dx,z.x=z.x>I.current?I.current:z.x>0?z.x:0,F(z),re(z);const t=S?-(I.current-z.x):z.x;e.target.style.transform=`translateX(${t}px)`;const n=z.x/I.current*100;G.current.ariaValueNow=n.toFixed(4).toString(),G.current.ariaValueText=n.toFixed(4)+"%"}}}):void 0})(G.current)},oe=()=>{E.current=!1;document.getElementsByClassName(j)[0]&&k.current&&G.current&&k.current.removeChild(G.current),H.current&&H.current.unset(),v.showMapTools(),(T.current||D.current)&&(T.current&&(T.current.style.opacity=null),D.current&&(D.current.style.clipPath=null),T.current&&(T.current.style.clipPath=null),D.current&&(D.current.style.opacity=null)),k.current.removeEventListener("mousedown",ue),k.current.removeEventListener("click",de),k.current.removeEventListener("wheel",de),d.isDestroyed()||(Y.current?d.enableClickOpenPopup():d.disableClickOpenPopup(),X.current?d.enableClickHighlight():d.disableClickHighlight()),p.isDestroyed()||(K.current?p.enableClickOpenPopup():p.disableClickOpenPopup(),Q.current?p.enableClickHighlight():p.disableClickHighlight())},se=()=>J(this,void 0,void 0,function*(){yield v.switchMap(!0),R.current=!1}),ce=()=>{T.current&&!E.current&&(k.current.addEventListener("mousedown",ue),k.current.addEventListener("click",de),k.current.addEventListener("wheel",de),E.current=!0)},ue=e=>{e.target.classList.contains("multi-map-container")?P.current=!0:P.current=!1},de=e=>{if(e.target.classList.contains("multi-map-container")&&P.current){if(O.current||R.current)return;O.current=!0,R.current=!0,se()}};return null}function Y(n){const{mapUseDataSourcesOrderList:r,mapUseDataSources:i}=n,a=_(i,r)?r:i,o=e=>{var n;return p((null===(n=t.DataSourceManager.getInstance().getDataSource(e))||void 0===n?void 0:n.type)===t.DataSourceTypes.WebMap?27416:95930)},s=H(a[0]),c=H(a[1]);return(0,e.jsx)("div",{css:X,children:(0,e.jsxs)("div",{className:"swipe-maps-panel",children:[(0,e.jsxs)("div",{className:"swipe-maps-list d-flex justify-content-start",children:[(0,e.jsx)("div",{className:"d-flex flex-shrink-0 justify-content-center align-items-center swipe-maps-thumbnail",children:(0,e.jsx)(l.Icon,{size:"12",color:"#FFFFFF",icon:o(a[0])})}),(0,e.jsx)("div",{title:s,className:"swipe-maps-label text-truncate",children:s})]}),(0,e.jsxs)("div",{className:"swipe-maps-list d-flex justify-content-start",children:[(0,e.jsx)("div",{className:"d-flex flex-shrink-0 justify-content-center align-items-center swipe-maps-thumbnail",children:(0,e.jsx)(l.Icon,{size:"12",color:"#FFFFFF",icon:o(a[1])})}),(0,e.jsx)("div",{title:c,className:"swipe-maps-label text-truncate",children:c})]})]})})}const X=t.css`
.swipe-maps-panel {
  margin-top: 16px;
  .swipe-maps-list{
    width: 100%;
    margin-bottom: 14px;
    .swipe-maps-thumbnail {
      width:  20px;
      height:  20px;
      background-color: #089BDC;
      margin-right: 8px;
    }
    .swipe-maps-label {
      font-size: 13px;
      font-weight: 500;
      color: var(--sys-color-surface-paper-text);
    }
  }
}
`;var K=function(e,t,n,l){return new(n||(n=Promise))(function(r,i){function a(e){try{s(l.next(e))}catch(e){i(e)}}function o(e){try{s(l.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}s((l=l.apply(e,t||[])).next())})};const{useState:Q,useEffect:Z,useRef:ee}=t.React,te="\n  position: absolute;\n  overflow-y: scroll;\n  z-index: 7;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  padding: 0;\n  margin: 0;\n",ne="\n  position: absolute;\n  overflow-x: scroll;\n  z-index: 7;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  padding: 0;\n  margin: 0;\n",le="\n  padding: 0;\n  margin: 0;\n  display: flex;\n  flexDirection: column;\n  alignItems: stretch;\n  alignContent: stretch;\n  justifyContent: space-evenly;\n",re="\n  padding: 0;\n  margin: 0;\n  height: 100%;\n  display: flex;\n  flexDirection: row;\n  alignItems: stretch;\n  alignContent: stretch;\n  justifyContent: space-evenly;\n",ie="\n  position: absolute;\n  border: 1px solid rgba(110,110,110,.5);\n";function ae(e){const{jimuMapViewGroup:n,widgetId:l,activeMapView:r,inactiveMapView:a,firstTrailingLayersId:o,secondTrailingLayersId:s,swipeStyle:c,handleScrollingLayerOfFirstMapView:u,handleScrollingLayerOfSecondMapView:d,handleScrollFirstMapView:p,dividerColor:v,isDesignMode:m}=e,y=r.mapWidgetId,h=ee(null),g=ee(null),[w,f]=Q(0),[x,b]=Q((null==o?void 0:o.length)>0),L=ee(x),[S,M]=Q(null==r?void 0:r.view.height),[I,V]=Q(null==r?void 0:r.view.width),j=ee(document.querySelector(`div[data-widgetid=${y}] .multi-map-container`)),C=e=>{var t;return null===(t=e.current)||void 0===t?void 0:t.querySelector(".multisourcemap-item-appear-noanimate")},A=ee(C(j)),E=e=>{var t;return null===(t=e.current)||void 0===t?void 0:t.querySelector(".multisourcemap-item-disappear-noanimate")},O=ee(E(j)),R=ee([]),N=null==r?void 0:r.view,k=ee(0),D=ee(!1),T=ee(!1),z=ee(0),$=ee(0),q=ee(null),_=ee(null),H=ee(null),[J,B]=Q(0),U=ee([]),W=ee(0),G=`jimu-widget-swipe-${l}-handle-container`,Y=`jimu-widget-swipe-${l}-scroller`,X=`jimu-widget-swipe-${l}-content`,ae=ee(null),oe=t.React.useRef(null),se=t.React.useRef(null),ce=ee(!0),ue=ee(!0),de=(e,t)=>K(this,void 0,void 0,function*(){return yield e.whenJimuLayerViewLoaded(t)});Z(()=>{j.current.style.pointerEvents=m?"none":null},[m]),Z(()=>()=>{j.current.style.pointerEvents=null},[]),Z(()=>{M(null==r?void 0:r.view.height),V(null==r?void 0:r.view.width)},[r]),Z(()=>{const e=()=>{A.current=C(j),O.current=E(j),L.current||void 0===s||0===s.length||(c===i.AdvancedVertical?A.current.style.clipPath=`inset(0px 0px ${r.view.width}px 0px)`:A.current.style.clipPath=`inset(0px ${r.view.height}px 0px 0px)`),(null==s?void 0:s.length)>0&&(O.current.style.opacity="1")};return r.addRestoreListener(e),()=>{r.removeRestoreListener(e)}},[r,y,s,c]),Z(()=>{const e=()=>{n.hideMapTools()};function t(){var e;const t=c===i.AdvancedVertical?"vertical":"horizontal",n=null===(e=null==s?void 0:s.asMutable())||void 0===e?void 0:e.map(e=>de(a,e));n&&Promise.all(n).then(e=>{var n,r;const i=e.map(e=>e.layer);U.current=null==i?void 0:i.map(e=>{const n=document.createElement("arcgis-swipe");return n.classList.add(`exb-swipe-scroll-${l}`),n.leadingLayers=[],n.trailingLayers=[e],n.disabled=!0,n.direction=t,n.swipePosition=100,n.hideHandle=!0,n.autoDestroyDisabled=!0,n});const o=null===(n=null==U?void 0:U.current)||void 0===n?void 0:n[0];o.view=null==a?void 0:a.view,null===(r=null==a?void 0:a.view)||void 0===r||r.ui.add(o),null==o||o.leadingLayers.addMany(o.trailingLayers),null==o||o.trailingLayers.removeAll(),ce.current=!0})}function u(){function e(){c===i.AdvancedVertical?t(_.current.scrollTop-S*((null==o?void 0:o.length)||0)):t(_.current.scrollLeft-I*((null==o?void 0:o.length)||0))}function t(e){W.current=e,T.current||(requestAnimationFrame(()=>{var e,t;T.current=!1;const n=c===i.AdvancedVertical?W.current/N.height:W.current/N.width,l=(null===(e=null==U?void 0:U.current)||void 0===e?void 0:e.length)-1;null===(t=null==U?void 0:U.current)||void 0===t||t.forEach((e,t,r)=>{var i;e.view=null==a?void 0:a.view,null===(i=null==a?void 0:a.view)||void 0===i||i.ui.add(e);let o=100*(t-n);0===t&&e.leadingLayers.length&&ce.current&&(e.trailingLayers.addMany(e.leadingLayers),e.leadingLayers.removeAll(),ce.current=!1),o<0&&e.trailingLayers.length?(e.leadingLayers.addMany(e.trailingLayers),e.trailingLayers.removeAll(),B(t)):o>=0&&e.leadingLayers.length&&(e.trailingLayers.addMany(e.leadingLayers),e.leadingLayers.removeAll(),B(t)),o>=0&&o<.1&&t===l&&B(t),o<0&&(o+=100),e.swipePosition=pe(o,0,100)})}),T.current=!0)}function n(){c===i.AdvancedVertical?t(_.current.scrollTop-S*((null==o?void 0:o.length)||0)):t(_.current.scrollLeft-I*((null==o?void 0:o.length)||0))}(()=>{const e=j.current.querySelector(`#${Y}`),t=j.current.querySelector(`#${X}`);_.current=e,H.current=t})(),(()=>{var t;const l=c===i.AdvancedVertical?"vertical":"horizontal",r=null===(t=null==s?void 0:s.asMutable())||void 0===t?void 0:t.map(e=>de(a,e));r&&Promise.all(r).then(t=>{se.current="vertical"===l?P.watch(()=>{var e;return null===(e=null==a?void 0:a.view)||void 0===e?void 0:e.height},()=>{n()}):P.watch(()=>{var e;return null===(e=null==a?void 0:a.view)||void 0===e?void 0:e.width},()=>{n()}),n(),_.current.addEventListener("scroll",e),"horizontal"===l&&_.current.addEventListener("wheel",me)})})()}function d(){c===i.AdvancedVertical?p(h.current.scrollTop):p(h.current.scrollLeft)}function p(e){k.current=e,D.current||(requestAnimationFrame(()=>{var e;D.current=!1;const t=c===i.AdvancedVertical?k.current/N.height:k.current/N.width,n=(null===(e=R.current)||void 0===e?void 0:e.length)-1;R.current.forEach((e,l,r)=>{e.view=N,N.ui.add(e);let d=100*(l-t);d<0&&e.trailingLayers.length?(e.leadingLayers.addMany(e.trailingLayers),e.trailingLayers.removeAll(),f(l)):d>=0&&e.leadingLayers.length&&(e.trailingLayers.addMany(e.leadingLayers),e.leadingLayers.removeAll(),f(l)),(0===d||d<-100)&&(a&&F(a.dataSourceId)&&(null==s?void 0:s.length)>0&&ue.current&&(!function(){const e=()=>{const e=j.current.querySelector(`#${Y}`),t=(null==o?void 0:o.length)>0?S*((null==o?void 0:o.length)-1):0;z.current=e.scrollTop-t,A.current.style.clipPath=`inset(0px 0px ${z.current}px 0px)`,z.current<S&&(b(!0),L.current=!0),z.current>=S&&(u(),b(!1),L.current=!1)},t=e=>{e.preventDefault();const t=j.current.querySelector(`#${Y}`),n=(null==o?void 0:o.length)>0?I*((null==o?void 0:o.length)-1):0;$.current=t.scrollLeft-n,A.current.style.clipPath=`inset(0px ${$.current}px 0px 0px)`,$.current<I&&b(!0),$.current>=I&&(u(),b(!1))};var n,l,r,a;(()=>{const n=j.current.querySelector(`#${Y}`);q.current=n,c===i.AdvancedVertical?n.addEventListener("scroll",e):n.addEventListener("scroll",t)})(),O.current.style.opacity="1",c===i.AdvancedVertical?(ae.current=document.createElement("div"),ae.current.id=G,ae.current.className="jimu-widget-swipe-handle-container",ae.current.setAttribute("style",ie),ae.current.style.transform=`translateY(${S}px`,ae.current.style.width=`${I}px`,ae.current.style.height="4px",ae.current.style.backgroundColor=v,ae.current.style.zIndex=null===(l=null===(n=A.current)||void 0===n?void 0:n.style)||void 0===l?void 0:l.zIndex):(ae.current=document.createElement("div"),ae.current.id=G,ae.current.className="jimu-widget-swipe-handle-container",ae.current.setAttribute("style",ie),ae.current.style.transform=`translateX(${I})px`,ae.current.style.height=`${S}px`,ae.current.style.width="4px",ae.current.style.backgroundColor=v,ae.current.style.zIndex=null===(a=null===(r=A.current)||void 0===r?void 0:r.style)||void 0===a?void 0:a.zIndex),j.current.appendChild(ae.current)}(),ue.current=!1),l===n&&f(l)),d<0&&(d+=100),e.swipePosition=pe(d,0,100)})}),D.current=!0)}function m(){c===i.AdvancedVertical?p(h.current.scrollTop):p(h.current.scrollLeft)}function y(){var e;const t=j.current.querySelector(`#${Y}`);t&&j.current.removeChild(t),null===(e=null==R?void 0:R.current)||void 0===e||e.forEach((e,t,n)=>{var l;e.destroy(),null===(l=N.ui)||void 0===l||l.remove(e)}),n.showMapTools()}return(null==r?void 0:r.view)&&j.current&&(!function(){const e=document.createElement("div");e.id=Y;const t=document.createElement("div");t.className="content",c===i.AdvancedVertical?(e.setAttribute("style",te),t.setAttribute("style",le),t.style.height=S*(((null==o?void 0:o.length)||0)+((null==s?void 0:s.length)||0))+"px"):(e.setAttribute("style",ne),t.setAttribute("style",re),t.style.width=I*(((null==o?void 0:o.length)||0)+((null==s?void 0:s.length)||0))+"px");j.current.appendChild(e),e.appendChild(t),h.current=e,g.current=t}(),(null==o?void 0:o.length)>0?(!function(){var e;const t=c===i.AdvancedVertical?"vertical":"horizontal",n=null===(e=null==o?void 0:o.asMutable())||void 0===e?void 0:e.map(e=>de(r,e));n&&Promise.all(n).then(e=>{const n=e.map(e=>e.layer);R.current=null==n?void 0:n.map(e=>{const n=document.createElement("arcgis-swipe");return n.classList.add(`exb-swipe-scroll-${l}`),n.leadingLayers=[],n.trailingLayers=[e],n.disabled=!0,n.direction=t,n.swipePosition=100,n.hideHandle=!0,n.autoDestroyDisabled=!0,n}),oe.current="vertical"===t?P.watch(()=>{var e;return null===(e=null==r?void 0:r.view)||void 0===e?void 0:e.height},()=>{m()}):P.watch(()=>{var e;return null===(e=null==r?void 0:r.view)||void 0===e?void 0:e.width},()=>{m()}),m(),h.current.addEventListener("scroll",d),"horizontal"===t&&h.current.addEventListener("wheel",ve)})}(),a&&t(),e(),ue.current=!0):(null==s?void 0:s.length)>0&&(O.current.style.opacity="1",c===i.AdvancedVertical?A.current.style.clipPath=`inset(0px 0px ${r.view.width}px 0px)`:A.current.style.clipPath=`inset(0px ${r.view.height}px 0px 0px)`,b(!1),L.current=!1,a&&t(),u(),e())),()=>{var e;y(),null===(e=null==U?void 0:U.current)||void 0===e||e.forEach((e,t,n)=>{var l,r;e.destroy(),null===(r=null===(l=null==a?void 0:a.view)||void 0===l?void 0:l.ui)||void 0===r||r.remove(e)}),b(!0),function(){var e,t;const n=j.current.querySelector(".scrollerMap");n&&j.current.removeChild(n),O.current&&(O.current.style.opacity=null),A.current&&(A.current.style.clipPath=null),ae.current&&j.current.querySelector(`#${G}`)&&j.current.contains(ae.current)&&j.current.removeChild(ae.current),null===(e=oe.current)||void 0===e||e.remove(),oe.current=null,null===(t=se.current)||void 0===t||t.remove(),se.current=null}()}},[l,N,r,o,s,c,v,G,S,I,Y,X,a,n]),Z(()=>{var e;const t=null===(e=null==o?void 0:o.asMutable())||void 0===e?void 0:e.map(e=>de(r,e));t&&Promise.all(t).then(e=>{u(e[w])})},[r,o,w,u]),Z(()=>{var e;const t=null===(e=null==s?void 0:s.asMutable())||void 0===e?void 0:e.map(e=>de(a,e));t&&Promise.all(t).then(e=>{d(e[J])})},[s,J,a,d]),Z(()=>{p(x)},[p,x]);const pe=(e,t,n)=>Math.min(n,Math.max(t,e)),ve=e=>{e.preventDefault();const t=-e.wheelDelta||30*-e.deltaY;h.current.scrollLeft=h.current.scrollLeft+t/2},me=e=>{e.preventDefault();const t=-e.wheelDelta||30*-e.deltaY;_.current.scrollLeft=_.current.scrollLeft+t/2};return null}var oe=p(44828),se=function(e,t,n,l){return new(n||(n=Promise))(function(r,i){function a(e){try{s(l.next(e))}catch(e){i(e)}}function o(e){try{s(l.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}s((l=l.apply(e,t||[])).next())})};const{useState:ce,useEffect:ue,useRef:de}=t.React;function pe(n){var i,a;const{scrollMapViewList:o,activeMapView:s,inactiveMapView:c,handlePanelSelectedFirstScrollLayer:u,handlePanelSelectedSecondScrollLayer:d,isAllowDeactivateLayers:p,toggleLayerVisibility:v,scrollingLayerOfFirstMapView:m,scrollingLayerOfSecondMapView:y,scrollFirstMapView:h,showSwipeOnMap:g,runtimeActiveMapViewAddedLayers:w,runtimeInactiveMapViewAddedLayers:f,handleRuntimePanelSelectedFirstScrollLayer:b,handleRuntimePanelSelectedSecondScrollLayer:L}=n,[S,M]=ce(!1),[I,V]=ce(!1),[C,E]=ce(!1),[R,N]=ce(!1),k=de(null),D=t.React.useRef([]),T=t.React.useRef([]),z=t.hooks.useTranslation(r);ue(()=>{c||d((0,t.Immutable)([]))},[d,c]);const[$,q]=ce(null),_=de($),[J,B]=ce((0,t.Immutable)([])),[U,W]=ce([]),G=de(U),[Y,X]=ce((0,t.Immutable)([])),[K,Q]=ce([]),Z=de(K),[ee,te]=ce((0,t.Immutable)([])),[ne,le]=ce(null),re=de(ne),[ie,ae]=ce((0,t.Immutable)([]));ue(()=>{const e=null==o?void 0:o[null==s?void 0:s.id];B(e)},[o,s]),ue(()=>{const e=null==o?void 0:o[null==c?void 0:c.id];ae(e)},[o,c]);const pe=(e,t)=>se(this,void 0,void 0,function*(){return yield e.whenJimuLayerViewLoaded(t)}),me=t.hooks.useEventCallback(()=>{const e=k.current,t=document.querySelector(".currentLegend");if(t&&t.remove(),g&&((null==J?void 0:J.length)>0||(null==ie?void 0:ie.length)>0)){const t=document.createElement("div");t.className="currentLegend";new oe.default({view:h?null==s?void 0:s.view:null==c?void 0:c.view,style:"classic",layerInfos:[{layer:h?null==m?void 0:m.layer:null==y?void 0:y.layer}]}).container=t,e.appendChild(t)}}),ye=t.hooks.useEventCallback((e,n,l,r,i)=>{var a,s;const c=null===(s=null===(a=null==o?void 0:o[null==e?void 0:e.id])||void 0===a?void 0:a.asMutable())||void 0===s?void 0:s.map(t=>pe(e,t));c&&Promise.all(c).then(e=>{const a=e.map(e=>({layerId:e.id,title:null==e?void 0:e.layer.title,selected:!0,visible:null==e?void 0:e.layer.visible,allowOperation:p}));n(a),r.current=a;const o=[];a.forEach(e=>{e.selected&&e.visible&&o.push(e.layerId)}),l((0,t.Immutable)(o)),i((0,t.Immutable)(o))}).catch(e=>{console.error(e)})});ue(()=>{ye(s,q,B,_,u),ye(c,le,ae,re,d)},[o,s,c,p,u,d,ye]),ue(()=>{if((null==s?void 0:s.id)===(null==c?void 0:c.id))return;const e=null==w?void 0:w.asMutable({deep:!0}).map(e=>{const t=s.jimuLayerViews[e];return{layerId:e,title:t.layer.title,selected:!1,visible:t.layer.visible,allowOperation:!0}});W(e),G.current=e;const n=[];if(e.forEach(e=>{e.selected&&e.visible&&n.push(e.layerId)}),X((0,t.Immutable)(n)),b((0,t.Immutable)(n)),c){const e=null==f?void 0:f.asMutable({deep:!0}).map(e=>{const t=c.jimuLayerViews[e];return{layerId:e,title:t.layer.title,selected:!1,visible:t.layer.visible,allowOperation:!0}});Q(e),Z.current=e;const n=[];e.forEach(e=>{e.selected&&e.visible&&n.push(e.layerId)}),te((0,t.Immutable)(n)),L((0,t.Immutable)(n))}},[s,b,L,c,w,f]);const he=t.hooks.useEventCallback((e,n,l,r,i)=>{var a,s;const c=null===(s=null===(a=null==o?void 0:o[null==e?void 0:e.id])||void 0===a?void 0:a.asMutable())||void 0===s?void 0:s.map(t=>pe(e,t));c&&Promise.all(c).then(e=>{e.forEach(e=>{const a=[];a.push(P.watch(()=>null==e?void 0:e.layer.visible,n=>{const a=JSON.parse(JSON.stringify(l.current));a.forEach(t=>{t.layerId===e.id&&(t.visible=n)}),r(a),l.current=a;const o=[];null==a||a.forEach(e=>{e.selected&&e.visible&&o.push(e.layerId)}),i((0,t.Immutable)(o))})),n.current=a})})});ue(()=>{const e=D.current;return he(s,D,_,q,u),()=>{e.forEach(e=>{null==e||e.remove(),e=null})}},[o,s,he,u]);const ge=t.hooks.useEventCallback((e,n,l,r,i,a)=>{n.forEach(n=>{const o=e.jimuLayerViews[n.layerId],s=[];s.push(P.watch(()=>o.layer.visible,e=>{const n=JSON.parse(JSON.stringify(l.current));n.forEach(t=>{t.layerId===o.id&&(t.visible=e)}),r(n),l.current=n;const a=[];null==n||n.forEach(e=>{e.selected&&e.visible&&a.push(e.layerId)}),i((0,t.Immutable)(a))})),a.current=s})});ue(()=>{const e=T.current;return ge(s,U,G,W,b,T),()=>{e.forEach(e=>{null==e||e.remove(),e=null})}},[s,b,U,ge]),ue(()=>{u(J)},[u,J]),ue(()=>{b(Y)},[b,Y]),ue(()=>{L(ee)},[L,ee]),ue(()=>{d(ie)},[d,ie]),ue(()=>{(m||y)&&me()},[me,m,y,s,c,g,h,o,J,ie]);const we=()=>{M(!S)},fe=()=>{V(!I)},xe=()=>{E(!C)},be=()=>{N(!R)},Le=(e,n,l,r,i)=>{const a=JSON.parse(JSON.stringify(e));a.forEach(e=>{e.layerId===i&&(e.selected=!e.selected)}),n(a),r.current=a;const o=[];a.forEach(e=>{e.selected&&e.visible&&o.push(e.layerId)}),l((0,t.Immutable)(o))},Se=(e,t,n,l)=>{var r;if(t){return(null===(r=null==e?void 0:e[null==n?void 0:n.id])||void 0===r?void 0:r.indexOf(null==l?void 0:l.id))+1}return-1},Me=(e,t)=>{if(g){return(null==e?void 0:e.indexOf(null==t?void 0:t.id))+1}return-1},Ie=t.React.useCallback(e=>se(this,void 0,void 0,function*(){const t=(yield pe(s,e))||(yield pe(c,e));t.layer.visible=!t.layer.visible}),[s,c]),Ve=(null===(i=null==o?void 0:o[null==s?void 0:s.id])||void 0===i?void 0:i.length)>0,je=(null===(a=null==o?void 0:o[null==c?void 0:c.id])||void 0===a?void 0:a.length)>0,Ce=g&&h,Ae=g&&!h&&y,Ee=H(s.dataSourceId),Oe=H(null==c?void 0:c.dataSourceId),Pe=Ce?Ee+" "+z("currentDisplay"):Ee,Re=Ae?Oe+" "+z("currentDisplay"):Oe;return(0,e.jsxs)("div",{ref:k,css:ve,children:[(0,e.jsxs)(l.CollapsablePanel,{className:(0,t.classNames)("swipe-collapse "+(Ce?"scroll-now":"")),label:Ee,isOpen:S,"aria-label":Ve?Pe:Ee+":"+z("noConfiguredLayerText"),onRequestOpen:we,onRequestClose:we,children:[Ve?(0,e.jsx)(x,{layerList:$,onChange:e=>{Le($,q,B,_,e)},isAllowDeactivateLayers:p,toggleLayerVisibility:v,onToggleLayerVisibility:Ie,highlightIndex:h?Se(o,g,s,m):-1}):(0,e.jsx)(j,{swipeLayerMode:!0}),(null==U?void 0:U.length)>0&&(0,e.jsx)(l.CollapsablePanel,{className:"swipe-collapse runtime-layer-collapse",label:z("runtimeLayers"),isOpen:C,"aria-label":z("runtimeLayers"),onRequestOpen:xe,onRequestClose:xe,rightIcon:O(),rightActiveIcon:A(),children:(0,e.jsx)(x,{layerList:U,isAllowDeactivateLayers:!0,toggleLayerVisibility:!0,onToggleLayerVisibility:Ie,onChange:e=>{Le(U,W,X,G,e)},highlightIndex:h?Me(w,m):-1})})]}),c&&F(c.dataSourceId)&&(0,e.jsxs)(l.CollapsablePanel,{className:(0,t.classNames)("swipe-collapse "+(Ae?"scroll-now":"")),label:Oe,isOpen:I,"aria-label":je?Re:Oe+":"+z("noConfiguredLayerText"),onRequestOpen:fe,onRequestClose:fe,children:[je?(0,e.jsx)(x,{layerList:ne,onChange:e=>{Le(ne,le,ae,re,e)},isAllowDeactivateLayers:p,toggleLayerVisibility:v,onToggleLayerVisibility:Ie,highlightIndex:h?-1:Se(o,g,c,y)}):(0,e.jsx)(j,{swipeLayerMode:!0}),(null==K?void 0:K.length)>0&&(0,e.jsx)(l.CollapsablePanel,{className:"swipe-collapse runtime-layer-collapse",label:z("runtimeLayers"),isOpen:R,"aria-label":z("runtimeLayers"),onRequestOpen:be,onRequestClose:be,rightIcon:O(),rightActiveIcon:A(),children:(0,e.jsx)(x,{layerList:K,isAllowDeactivateLayers:!0,toggleLayerVisibility:!0,onToggleLayerVisibility:Ie,onChange:e=>{Le(K,Q,te,Z,e)},highlightIndex:h?-1:Me(f,y)})})]})]})}const ve=t.css`
  .swipe-collapse {
    margin-top: 16px;
    .title {
      font-weight: 600;
    }
    .layer-list {
      margin-top: 12px;
      margin-bottom: 16px;
    }
    .no-layer-placeholder {
      margin-top: 16px;
      margin-bottom: 16px;
    }
    .jimu-collapsable-action {
      button {
        color: inherit;
      }
    }
  }
  .runtime-layer-collapse {
    .title {
      font-size: 13px;
      font-weight: 500;
    }
  }
  .currentLegend {
    margin-top: 8px;
    .esri-legend__message, .esri-legend__service{
      padding-left: 0px;
    }
  }
  .scroll-now {
    .collapse-label {
      position: relative;
      &:after {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        content: "";
        display: block;
        position: absolute;
        right: -10px;
        background-color: var(--sys-color-primary-main);
      }
    }
  }
  .runtime-layer-collapse {
    .collapse-label {
      &:after {
        content: none
      }
    }
  }
`;var me=p(28996),ye=p.n(me),he=function(e,t){var n={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(n[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(l=Object.getOwnPropertySymbols(e);r<l.length;r++)t.indexOf(l[r])<0&&Object.prototype.propertyIsEnumerable.call(e,l[r])&&(n[l[r]]=e[l[r]])}return n};const ge=n=>{const l=window.SVG,{className:r}=n,i=he(n,["className"]),a=(0,t.classNames)("jimu-icon jimu-icon-component",r);return l?(0,e.jsx)(l,Object.assign({className:a,src:ye()},i)):(0,e.jsx)("svg",Object.assign({className:a},i))},we=t.css`
  &.warning-info {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    .warning-icon {
      color: var(--sys-color-warning-dark);
      width: ${t.polished.rem(22)};
      height: ${t.polished.rem(22)};
      margin-bottom: ${t.polished.rem(10)};
    }
    .warning-text {
      font-size: ${t.polished.rem(13)};
      line-height: ${t.polished.rem(18)};
    }
  }
`;function fe(){const n=t.hooks.useTranslation(r);return(0,e.jsxs)("div",{className:"w-100 d-flex flex-column align-items-center warning-info",css:we,children:[(0,e.jsx)(ge,{className:"warning-icon"}),(0,e.jsx)("div",{className:"warning-text",children:n("webSceneNotSupported")})]})}i.SimpleHorizontal;const xe={distance:35,unit:l.DistanceUnits.PERCENTAGE},be=e=>t.css`
  &{
    .widget-container {
      overflow: auto;
    }
    .swipe-panel {
      padding: ${t.polished.rem(16)};
    }
    .swipe-title {
      .swipe-label {
        font-size: ${t.polished.rem(14)};
        color: ${e.sys.color.surface.paperText};
        svg {
          min-width: 16px;
        }
        .swipe-text {
          margin-left: 0.5rem;
          margin-right: ${e.sys.spacing(6)};
        }
      }
    }
    .error-alert {
      position: absolute;
      bottom: 4px;
      left: 4px;
      z-index: 1;
    }
  }
`,Le=(e,n,l)=>t.css`
  .exb-swipe-${l} {
    pointer-events: none !important;
  }
  .exb-swipe-${l} {
    --arcgis-internal-swipe-handle-color-background: ${n};
    --arcgis-internal-swipe-divider-color-background: ${e};
  }
  .exb-swipe-scroll-${l} {
    --arcgis-internal-swipe-divider-color-background: ${e};
  }
`,{useState:Se,useEffect:Me,useCallback:Ie,useRef:Ve}=t.React,je=o=>{var c,u,d,p,v;const{id:y,label:h,config:g,theme:w}=o,{styleConfig:f,scrollMapViewList:x,swipeMapViewList:b,mapUseDataSourcesOrderList:L,swipeStyle:S,swipeMode:M}=g,{defaultActivation:I=!1,detailsVisibility:V=!0,isAllowDeactivateLayers:j=!0,toggleLayerVisibility:C=!1,sliderPosition:A=xe,dividerColor:E="var(--sys-color-surface-footer)",handleColor:O="var(--sys-color-surface-footer)"}=f||{},P=null===(c=o.useMapWidgetIds)||void 0===c?void 0:c[0],[R,N]=Se(null),[k,D]=Se(null),[z,q]=Se(null),[F,J]=Se(I),[B,U]=Se(null),[W,X]=Se(null),[K,Q]=Se(!0),[Z,ee]=Se((0,t.Immutable)([])),[te,ne]=Se((0,t.Immutable)([])),[le,re]=Se((0,t.Immutable)([])),[ie,oe]=Se((0,t.Immutable)([])),[se,ce]=Se((0,t.Immutable)([])),[ue,de]=Se((0,t.Immutable)([])),[ve,me]=Se((0,t.Immutable)([])),[ye,he]=Se((0,t.Immutable)([])),[ge,we]=Se((0,t.Immutable)([])),[je,Ce]=Se((0,t.Immutable)([])),[Ae,Ee]=Se((0,t.Immutable)([])),[Oe,Pe]=Se(!1),[Re,Ne]=Se(!0),[ke,De]=Se(!0),[Te,ze]=Se(!0),[$e,qe]=Se(!0),[_e,Fe]=Se((0,t.Immutable)([])),[He,Je]=Se((0,t.Immutable)([])),[Be,Ue]=Se((0,t.Immutable)([])),[We,Ge]=Se((0,t.Immutable)([])),Ye=Ve(null),Xe=t.hooks.useTranslation(r,l.defaultMessages),Ke=S===i.SimpleHorizontal||S===i.SimpleVertical,Qe=t.ReactRedux.useSelector(e=>{var t,n;return null===(n=(null!==(t=e.appStateInBuilder)&&void 0!==t?t:e).appConfig.widgets[P])||void 0===n?void 0:n.useDataSources}),Ze=t.ReactRedux.useSelector(e=>e.appRuntimeInfo.appMode===t.AppMode.Design);Me(()=>{const e=ve.concat(ge);t.lodash.isDeepEqual(Be,e)||Ue(e)},[ge,ve,Be]),Me(()=>{const e=ye.concat(je);t.lodash.isDeepEqual(We,e)||Ge(e)},[je,ye,We]),Me(()=>{Oe&&!Ye.current&&(Ye.current=setTimeout(()=>{Pe(!1),Ye.current=null},3e3))},[Oe]),Me(()=>{const e=null==Qe?void 0:Qe.map(e=>e.dataSourceId);Ee(e)},[Qe]),Me(()=>{J(!1)},[S,P]),Me(()=>{J(I)},[I]);const et=e=>{var t,n,l;const r=[],i=null===(l=null===(n=null===(t=null==e?void 0:e.view)||void 0===t?void 0:t.map)||void 0===n?void 0:n.layers)||void 0===l?void 0:l.toArray();return null==i||i.forEach(t=>{const n=e.getJimuLayerViewByAPILayer(t);(null==n?void 0:n.fromRuntime)&&r.push(n.id)}),r};Me(()=>{oe(Z?Z.concat(le):le)},[Z,le]),Me(()=>{de(te?null==te?void 0:te.concat(se):se)},[te,se]),Me(()=>{var e;const l=null==Qe?void 0:Qe.filter(e=>e.dataSourceId!==(null==R?void 0:R.dataSourceId)),r=(i=P,a=null===(e=null==l?void 0:l[0])||void 0===e?void 0:e.dataSourceId,i+"-"+a);var i,a;const o=n.MapViewManager.getInstance().getJimuMapViewById(r);D(o);const s=et(R);Fe((0,t.Immutable)(s)),ze(!0),qe(!0);const c=et(o);Je((0,t.Immutable)(c));const u=()=>{const e=et(R);Fe((0,t.Immutable)(e))},d=()=>{const e=et(R);Fe((0,t.Immutable)(e)),ze(!0),qe(!0)};return R&&(null==R||R.addJimuLayerViewCreatedListener(u),null==R||R.addJimuLayerViewRemovedListener(d)),()=>{null==R||R.removeJimuLayerViewCreatedListener(u),null==R||R.removeJimuLayerViewRemovedListener(d)}},[R,Qe,P]);const tt=()=>{if(!F){const e=document.querySelector(`.jimu-widget-swipe .useMapWidgetId-${P} .swipe-title .checked:not(.${y})`);e&&(Pe(!0),e.getElementsByTagName("input")[0].click())}J(!F)},nt=Ie(e=>{U(e)},[]),lt=Ie(e=>{X(e)},[]),rt=Ie(e=>{Q(e)},[]),it=Ie(e=>{ee(e),De(!0)},[]),at=Ie(e=>{ne(e),De(!0)},[]),ot=Ie(e=>{re(e),qe(!0)},[]),st=Ie(e=>{ce(e),qe(!0)},[]),ct=Ie(e=>{me(e),Ne(!0)},[]),ut=Ie(e=>{he(e),Ne(!0)},[]),dt=Ie(e=>{we(e),ze(!0)},[]),pt=Ie(e=>{Ce(e),ze(!0)},[]),vt=!Ke&&!!R&&(null==Ae?void 0:Ae.length)>0&&"2d"===(null===(u=null==R?void 0:R.view)||void 0===u?void 0:u.type)&&(null==z?void 0:z.jimuMapViews)&&Object.keys(null==z?void 0:z.jimuMapViews).length>0,mt=Ke&&!!R&&"LOADED"===R.status&&"2d"===(null===(d=null==R?void 0:R.view)||void 0===d?void 0:d.type)&&M===a.SwipeBetweenLayers,yt=Ke&&M===a.SwipeBetweenMaps&&(null==z?void 0:z.jimuMapViews)&&2===Object.keys(null==z?void 0:z.jimuMapViews).length&&2===Ae.length,ht=F&&S&&!Ke&&"2d"===(null===(p=null==R?void 0:R.view)||void 0===p?void 0:p.type)&&(null==Ae?void 0:Ae.length)>0&&(null==z?void 0:z.jimuMapViews)&&Object.keys(null==z?void 0:z.jimuMapViews).length>0,gt=(null==z?void 0:z.jimuMapViews)&&2===Object.keys(null==z?void 0:z.jimuMapViews).length&&(null==R?void 0:R.view)&&(null==k?void 0:k.view),wt="2d"===(null===(v=null==R?void 0:R.view)||void 0===v?void 0:v.type)&&((null==Be?void 0:Be.length)>0||(null==We?void 0:We.length)>0),ft=()=>{if(yt){const e=_(Ae,L)?L:Ae;return h+":"+H(e[0])+","+H(e[1])}return h};return(0,e.jsxs)(l.Paper,{shape:"none",className:"jimu-widget jimu-widget-swipe",css:be(w),children:[(0,e.jsx)($.Global,{styles:Le(E,O,y)}),P&&(0,e.jsx)(n.JimuMapViewComponent,{useMapWidgetId:P,onActiveViewChange:e=>{(null==e?void 0:e.view)?(N(e),Ne(!1),De(!1),ze(!1),qe(!1)):N(null)},onViewsCreate:e=>{const t=n.MapViewManager.getInstance().getJimuMapViewGroup(P);q(t),Object.keys(e).forEach(t=>{const n=e[t];n.isActive||D(n)})}}),P&&S?(0,e.jsx)("div",{className:"widget-container surface-1 border-0 w-100 h-100",children:(()=>{var n,r;return(0,e.jsxs)("div",{className:(0,t.classNames)(`swipe-panel useMapWidgetId-${P}`),children:[(0,e.jsx)("div",{className:"swipe-title",children:(0,e.jsxs)(l.Label,{check:!0,className:"swipe-label d-flex justify-content-between align-items-center",children:[(0,e.jsxs)("span",{className:"d-flex align-items-center",children:[(0,e.jsx)(l.Icon,{icon:s()}),(0,e.jsx)("div",{className:"swipe-text",children:h})]}),(0,e.jsx)(l.Switch,{"aria-label":ft(),title:h,className:y,checked:F,onChange:tt})]})}),(0,e.jsxs)("div",{className:(0,t.classNames)({"d-none":!V}),children:[vt&&$e&&(0,e.jsx)(pe,{scrollMapViewList:x,activeMapView:R,inactiveMapView:k,handlePanelSelectedFirstScrollLayer:it,handlePanelSelectedSecondScrollLayer:at,isAllowDeactivateLayers:j,toggleLayerVisibility:C,scrollingLayerOfFirstMapView:B,scrollingLayerOfSecondMapView:W,scrollFirstMapView:K,showSwipeOnMap:F,runtimeActiveMapViewAddedLayers:_e,runtimeInactiveMapViewAddedLayers:He,handleRuntimePanelSelectedFirstScrollLayer:ot,handleRuntimePanelSelectedSecondScrollLayer:st}),!Ke&&"3d"===(null===(n=null==R?void 0:R.view)||void 0===n?void 0:n.type)&&(0,e.jsx)(fe,{}),Ke&&"3d"===(null===(r=null==R?void 0:R.view)||void 0===r?void 0:r.type)&&M===a.SwipeBetweenLayers&&(0,e.jsx)(fe,{}),mt&&Te&&(0,e.jsx)(T,{swipeMapViewList:b,activeMapView:R,isAllowDeactivateLayers:j,toggleLayerVisibility:C,handlePanelSelectedLeadingLayers:ct,handlePanelSelectedTrailingLayers:ut,runtimeAddedLayers:_e,handleRuntimePanelSelectedLeadingLayers:dt,handleRuntimePanelSelectedTrailingLayers:pt}),yt&&(0,e.jsx)(Y,{mapUseDataSourcesOrderList:L,mapUseDataSources:Ae}),Oe&&(0,e.jsx)(l.Alert,{className:"w-100 error-alert",form:"basic",open:!0,withIcon:!0,type:"warning",text:Xe("mapOccupiedMsg")})]})]})})()}):(0,e.jsx)(l.WidgetPlaceholder,{icon:s(),name:Xe("_widgetLabel")}),F&&S&&Ke&&(null==R?void 0:R.view)&&(M===a.SwipeBetweenLayers?wt&&Re&&(0,e.jsx)(m,{widgetId:y,activeMapView:R,leadingLayersId:Be,trailingLayersId:We,swipeStyle:S,sliderPosition:A,isDesignMode:Ze}):gt&&(0,e.jsx)(G,{swipeMode:M,widgetId:y,activeMapView:R,inactiveMapView:k,jimuMapViewGroup:z,sliderPosition:A,swipeStyle:S,mapUseDataSourcesOrderList:L,mapUseDataSources:Ae,dividerColor:E,handlerColor:O,isDesignMode:Ze})),ht&&ke&&(null==R?void 0:R.view)&&(0,e.jsx)(ae,{widgetId:y,activeMapView:R,inactiveMapView:k,jimuMapViewGroup:z,firstTrailingLayersId:ie,secondTrailingLayersId:ue,swipeStyle:S,handleScrollingLayerOfFirstMapView:nt,handleScrollingLayerOfSecondMapView:lt,handleScrollFirstMapView:rt,dividerColor:E,isDesignMode:Ze})]})};function Ce(e){p.p=e}})(),v})())}}});