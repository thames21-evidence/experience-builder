System.register(["jimu-core","jimu-ui","jimu-core/emotion","jimu-ui/advanced/setting-components","jimu-layouts/layout-builder","jimu-for-builder","jimu-layouts/layout-runtime"],function(e,t){var i={},o={},n={},r={},a={},d={},p={};return{setters:[function(e){i.AppMode=e.AppMode,i.BrowserSizeMode=e.BrowserSizeMode,i.LayoutItemType=e.LayoutItemType,i.LayoutParentType=e.LayoutParentType,i.React=e.React,i.WidgetType=e.WidgetType,i.appActions=e.appActions,i.css=e.css,i.getAppStore=e.getAppStore,i.i18n=e.i18n},function(e){o.defaultMessages=e.defaultMessages},function(e){n.jsx=e.jsx},function(e){r.WidgetList=e.WidgetList},function(e){a.addItemToLayout=e.addItemToLayout},function(e){d.appBuilderSync=e.appBuilderSync,d.builderAppSync=e.builderAppSync,d.getAppConfigAction=e.getAppConfigAction},function(e){p.LayoutItemSizeModes=e.LayoutItemSizeModes}],execute:function(){e((()=>{var e={4108:e=>{"use strict";e.exports=d},6055:e=>{"use strict";e.exports=a},14321:e=>{"use strict";e.exports=o},23662:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M7.5 0a.5.5 0 0 0-.5.5V7H.5a.5.5 0 0 0 0 1H7v6.5a.5.5 0 0 0 1 0V8h6.5a.5.5 0 0 0 0-1H8V.5a.5.5 0 0 0-.5-.5"></path></svg>'},39492:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 0a1.6 1.6 0 0 0-1.6 1.6v4.8H1.6a1.6 1.6 0 1 0 0 3.2h4.8v4.8a1.6 1.6 0 1 0 3.2 0V9.6h4.8a1.6 1.6 0 1 0 0-3.2H9.6V1.6A1.6 1.6 0 0 0 8 0" clip-rule="evenodd"></path></svg>'},41496:e=>{"use strict";e.exports=p},67386:e=>{"use strict";e.exports=n},79244:e=>{"use strict";e.exports=i},79298:e=>{"use strict";e.exports=r}},t={};function s(i){var o=t[i];if(void 0!==o)return o.exports;var n=t[i]={exports:{}};return e[i](n,n.exports,s),n.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.p="";var u={};return s.p=window.jimuConfig.baseUrl,(()=>{"use strict";s.r(u),s.d(u,{default:()=>w});var e=s(79244),t=s(14321),i=s(23662),o=s.n(i),n=s(39492),r=s.n(n),a=s(67386),d=s(79298),p=s(6055),l=s(4108),c=s(41496),g=function(e,t,i,o){return new(i||(i=Promise))(function(n,r){function a(e){try{p(o.next(e))}catch(e){r(e)}}function d(e){try{p(o.throw(e))}catch(e){r(e)}}function p(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,d)}p((o=o.apply(e,t||[])).next())})};const S=t=>{var i;const o=(0,e.getAppStore)().getState(),n=o.appStateInBuilder?o.appStateInBuilder:o,r=null==t?void 0:t.itemType,a=null===(i=null==t?void 0:t.manifest)||void 0===i?void 0:i.widgetType;return!(n.appRuntimeInfo.appMode===e.AppMode.Express)||r!==e.LayoutItemType.Section&&a!==e.WidgetType.Layout},y=(t,i)=>g(void 0,void 0,void 0,function*(){var o;let n;n=window.jimuConfig.isBuilder?(0,e.getAppStore)().getState().appStateInBuilder:(0,e.getAppStore)().getState();const r=n.appConfig,a=r.widgets[t].layouts.DEFAULT[n.browserSizeMode],{layoutInfo:d,updatedAppConfig:s}=yield(0,p.addItemToLayout)(r,i,a),u=(0,l.getAppConfigAction)(s);if(null===(o=i.manifest)||void 0===o?void 0:o.defaultSize){const{width:e,height:t,autoHeight:o}=i.manifest.defaultSize;o&&u.editLayoutItemProperty(d,"setting.autoProps.height",c.LayoutItemSizeModes.Auto),t&&u.editLayoutItemProperty(d,"bbox.height",`${t}px`,!0),e&&u.editLayoutItemProperty(d,"bbox.width",`${e}px`,!0),e||t||u.editLayoutItemProperty(d,"bbox",{},!0)}u.adjustOrderOfItem(d,null,!0).exec()}),f=e.css`
  height: 600px;
  width: 405px;
  >.content {
    height: 100%;
    margin-top: 0 !important;
    padding-top: var(--sys-spacing-4);
    .list-container {
      height: calc(100% - 100px);
    }
  }
`,m=t=>{const{widgetId:i}=t,o=e.React.useCallback(e=>{y(i,e)},[i]);return(0,a.jsx)("div",{css:f,children:(0,a.jsx)(d.WidgetList,{isAccepted:S,onSelect:o})})};class w{constructor(){this.index=4,this.id="accordion-add-widget",this.name="accordion-add-widget"}getAppState(){const t=(0,e.getAppStore)().getState();return t.appStateInBuilder?t.appStateInBuilder:t}getGroupId(){return"accordion-tools"}getTitle(){const i=e.i18n.getIntl("_jimu");return i?i.formatMessage({id:"addWidget",defaultMessage:t.defaultMessages.addWidget}):"Add widget"}getIcon(){return window.jimuConfig.isBuilder?r():o()}visible(t){const{layoutId:i}=t;let o;o=window.jimuConfig.isBuilder?(0,e.getAppStore)().getState().appStateInBuilder.appConfig:(0,e.getAppStore)().getState().appConfig;const n=function(t,i){var o;const n=i.layouts[t];if((null===(o=n.parent)||void 0===o?void 0:o.type)===e.LayoutParentType.Widget){const e=n.parent.id;return"widgets/common/controller/"===i.widgets[e].uri}return!1}(i,o);return!n}checked(){if(this.getAppState().browserSizeMode===e.BrowserSizeMode.Small)return this.isOpenInSidePanel}onClick(t){const{widgetId:i}=t.layoutItem;if(this.getAppState().browserSizeMode===e.BrowserSizeMode.Small){this.isOpenInSidePanel=!this.isOpenInSidePanel;const t=()=>{var t,o;this.isOpenInSidePanel=!1,t=i,o=["accordion-add-widget"],window.jimuConfig.isBuilder?l.builderAppSync.publishWidgetToolbarStateChangeToApp(t,o):(0,e.getAppStore)().dispatch(e.appActions.widgetToolbarStateChange(t,o))};l.appBuilderSync.publishSidePanelToApp({type:"widget",uri:"widgets/layout/accordion/",widgetId:i,keepPanel:!0,active:this.isOpenInSidePanel,isItemAccepted:S,onSelect:e=>{y(i,e)},onClose:t})}}getSettingPanel(t){return this.getAppState().browserSizeMode===e.BrowserSizeMode.Small?null:m}}})(),u})())}}});