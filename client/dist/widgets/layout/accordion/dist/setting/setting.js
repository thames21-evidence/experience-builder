System.register(["jimu-core/emotion","jimu-core","jimu-for-builder","jimu-ui","jimu-ui/advanced/style-setting-components","jimu-ui/advanced/setting-components","jimu-ui/basic/color-picker","jimu-theme","jimu-ui/advanced/resource-selector"],function(e,t){var o={},i={},n={},a={},s={},l={},r={},d={},c={};return{setters:[function(e){o.jsx=e.jsx,o.jsxs=e.jsxs},function(e){i.Immutable=e.Immutable,i.LayoutItemType=e.LayoutItemType,i.React=e.React,i.ReactRedux=e.ReactRedux,i.classNames=e.classNames,i.css=e.css,i.getAppStore=e.getAppStore,i.hooks=e.hooks,i.lodash=e.lodash},function(e){n.getAppConfigAction=e.getAppConfigAction},function(e){a.Checkbox=e.Checkbox,a.CollapsablePanel=e.CollapsablePanel,a.Collapse=e.Collapse,a.DistanceUnits=e.DistanceUnits,a.Icon=e.Icon,a.Label=e.Label,a.MultiSelect=e.MultiSelect,a.MultiSelectItem=e.MultiSelectItem,a.Radio=e.Radio,a.Select=e.Select,a.Switch=e.Switch,a.Tooltip=e.Tooltip,a.styleUtils=e.styleUtils},function(e){s.BorderRadiusSetting=e.BorderRadiusSetting,s.BorderSetting=e.BorderSetting,s.InputUnit=e.InputUnit,s.Padding=e.Padding,s.TextStyle=e.TextStyle},function(e){l.SettingRow=e.SettingRow,l.SettingSection=e.SettingSection},function(e){r.ThemeColorPicker=e.ThemeColorPicker},function(e){d.colorUtils=e.colorUtils,d.getTheme2=e.getTheme2,d.useTheme2=e.useTheme2,d.withTheme=e.withTheme},function(e){c.IconPicker=e.IconPicker}],execute:function(){e((()=>{var e={778:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8.829 2.535a.909.909 0 0 0-1.657 0L2.291 13.356a.456.456 0 0 0 .831.377L4.818 10h6.365l1.696 3.733a.456.456 0 0 0 .831-.377zM5.272 9 8 3l2.729 6z" clip-rule="evenodd"></path></svg>'},1888:e=>{"use strict";e.exports=d},4108:e=>{"use strict";e.exports=n},14321:e=>{"use strict";e.exports=a},15562:e=>{"use strict";e.exports=s},30655:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M2.146 4.653a.485.485 0 0 1 .708 0L8 10.24l5.146-5.587a.485.485 0 0 1 .708 0 .54.54 0 0 1 0 .738l-5.5 5.956a.485.485 0 0 1-.708 0l-5.5-5.956a.54.54 0 0 1 0-.738" clip-rule="evenodd"></path></svg>'},35809:e=>{"use strict";e.exports=c},54337:e=>{"use strict";e.exports=r},67386:e=>{"use strict";e.exports=o},79244:e=>{"use strict";e.exports=i},79298:e=>{"use strict";e.exports=l}},t={};function g(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,g),n.exports}g.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return g.d(t,{a:t}),t},g.d=(e,t)=>{for(var o in t)g.o(t,o)&&!g.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},g.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),g.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},g.p="";var p={};return g.p=window.jimuConfig.baseUrl,(()=>{"use strict";g.r(p),g.d(p,{__set_webpack_public_path__:()=>C,default:()=>j});var e=g(67386),t=g(79244),o=g(4108),i=g(14321),n=g(15562),a=g(79298),s=g(778),l=g.n(s),r=function(e,t){var o={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(o[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(o[i[n]]=e[i[n]])}return o};const d=o=>{const i=window.SVG,{className:n}=o,a=r(o,["className"]),s=(0,t.classNames)("jimu-icon jimu-icon-component",n);return i?(0,e.jsx)(i,Object.assign({className:s,src:l()},a)):(0,e.jsx)("svg",Object.assign({className:s},a))},c={generalSettigns:"General settings",numOfExpandedItems:"How many items can be expanded",expandOnLoading:"Expand items on loading",expandButton:"Expand button",collapseButton:"Collapse button",togglePosition:"Toggle position",showToggleAllButton:"Expand / Collapse all buttons",content:"Content",bgAndBorder:"Background and border",panel:"Panel",toggleButton:"Toggle button"};var u=g(54337),h=g(1888),m=g(35809),b=g(30655),x=g.n(b);const f=t.css`
  height: 80px;
  color: var(--ref-palette-white);
  text-align: center;
  position: relative;
  cursor: pointer;

  .with-bg {
    background: var(--ref-palette-neutral-300);
    border-radius: 4px;
    &:hover {
      background: var(--sys-color-action-selected-hover);
    }
    &.active {
      background: var(--sys-color-action-selected);
    }
    border: 1px solid var(--sys-color-divider-primary);
  }
  .border-setting {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
  }
  .padding-setting {
    border-style: dashed;
    position: absolute;
    top: 13px;
    left: 13px;
    right: 13px;
    bottom: 13px;
  }
  .content-setting {
    position: absolute;
    top: 24px;
    left: 24px;
    right: 24px;
    bottom: 24px;
    .icon {
      width: 16px;
      height: 16px;
      border-radius: 50%;
    }
    .label {
      width: 64px;
      height: 10px;
    }
    & > div {
      background: var(--sys-color-action-disabled-text);
    }
    &.active {
      border: none;
    }
    &.active  > div {
      background: var(--sys-color-surface-background);
    }
  }
`;const w=(0,h.withTheme)(function(s){var l,r;const d=t.hooks.useTranslation(c),[g,p]=t.React.useState("content"),b=t.React.useRef(void 0),w=(0,h.useTheme2)(),v=(e,t)=>{(0,o.getAppConfigAction)().editWidgetProperty(s.widgetId,e,t).exec()},j=(e,t)=>{e.stopPropagation(),e.target!==e.currentTarget||"Enter"!==e.key&&" "!==e.key||p(t)};return(0,e.jsxs)("div",{className:"w-100",children:[(0,e.jsxs)("div",{className:"header-setting w-100 mt-2",css:f,ref:b,children:[(0,e.jsx)(i.Tooltip,{title:d("bgAndBorder"),children:(0,e.jsx)("div",{role:"button","aria-pressed":"border"===g,tabIndex:0,onKeyDown:e=>{j(e,"border")},className:(0,t.classNames)("border-setting with-bg",{active:"border"===g}),onClick:()=>{p("border")}})}),(0,e.jsx)(i.Tooltip,{title:d("padding"),children:(0,e.jsx)("div",{role:"button","aria-pressed":"padding"===g,tabIndex:0,onKeyDown:e=>{j(e,"padding")},className:(0,t.classNames)("padding-setting with-bg",{active:"padding"===g}),onClick:()=>{p("padding")}})}),(0,e.jsx)(i.Tooltip,{title:d("content"),children:(0,e.jsxs)("div",{role:"button","aria-pressed":"content"===g,tabIndex:0,onKeyDown:e=>{j(e,"content")},className:(0,t.classNames)("content-setting with-bg d-flex justify-content-center align-items-center",{active:"content"===g}),onClick:()=>{p("content")},children:[(0,e.jsx)("div",{className:"ml-2 icon"}),(0,e.jsx)("div",{className:"ml-2 label"}),(0,e.jsx)(i.Icon,{className:"ml-auto mr-2",color:"content"!==g?"var(--sys-color-action-disabled-text)":"var(--sys-color-surface-background)",icon:x(),size:16})]})})]}),"border"===g&&(0,e.jsxs)(t.React.Fragment,{children:[(0,e.jsxs)(a.SettingSection,{title:d("background"),className:"p-0 mt-4 border-bottom-0",children:[(0,e.jsx)(a.SettingRow,{label:d("collapse"),children:(0,e.jsx)(u.ThemeColorPicker,{value:s.collapsedColor,specificTheme:w,onChange:e=>{v("config.header.collapsedColor",e)}})}),(0,e.jsx)(a.SettingRow,{label:d("expand"),children:(0,e.jsx)(u.ThemeColorPicker,{value:s.expandedColor,specificTheme:w,onChange:e=>{v("config.header.expandedColor",e)}})})]}),(0,e.jsxs)(a.SettingSection,{title:d("border"),className:"px-0 pt-3 pb-0 border-bottom-0",children:[(0,e.jsx)(a.SettingRow,{flow:"wrap",children:(0,e.jsx)(n.BorderSetting,{value:s.border,top:s.borderTop,left:s.borderLeft,right:s.borderRight,bottom:s.borderBottom,onChange:e=>{var i,n;const a=(0,o.getAppConfigAction)(),l=a.appConfig.widgets[s.widgetId],r=null!==(n=null===(i=null==l?void 0:l.config)||void 0===i?void 0:i.header)&&void 0!==n?n:(0,t.Immutable)({});a.editWidgetProperty(s.widgetId,"config.header",r.set("border",e).without("borderLeft").without("borderRight").without("borderTop").without("borderBottom")).exec()},onSideChange:(e,i)=>{var n,a;const l=(0,o.getAppConfigAction)(),r=l.appConfig.widgets[s.widgetId],d=null!==(a=null===(n=null==r?void 0:r.config)||void 0===n?void 0:n.header)&&void 0!==a?a:(0,t.Immutable)({});l.editWidgetProperty(s.widgetId,"config.header",d.set(t.lodash.camelCase(`border-${e}`),i).without("border")).exec()}})}),(0,e.jsx)(a.SettingRow,{flow:"wrap",label:d("borderRadius"),children:(0,e.jsx)(n.BorderRadiusSetting,{value:s.borderRadius,onChange:e=>{v("config.header.borderRadius",e)}})})]})]}),"padding"===g&&(0,e.jsx)(a.SettingRow,{className:"mt-4",role:"group","aria-label":d("padding"),label:d("padding"),flow:"wrap",children:(0,e.jsx)(n.Padding,{value:s.padding,units:[i.DistanceUnits.PIXEL],min:0,onChange:e=>{v("config.header.padding",{number:i.styleUtils.expandStyleArray(e.number),unit:e.unit})}})}),"content"===g&&(0,e.jsxs)(t.React.Fragment,{children:[(0,e.jsx)(a.SettingRow,{tag:"label",label:d("icon"),className:"mt-4",children:(0,e.jsx)(i.Switch,{checked:s.showWidgetIcon,onChange:(e,t)=>{v("config.header.showWidgetIcon",t)}})}),(0,e.jsx)(i.Collapse,{isOpen:s.showWidgetIcon,children:(0,e.jsxs)(a.SettingRow,{className:"mt-2",children:[(0,e.jsx)(n.InputUnit,{precision:0,value:`${null!==(l=s.widgetIconSize)&&void 0!==l?l:16}px`,min:8,max:64,required:!0,onChange:e=>{v("config.header.widgetIconSize",e.distance)}}),(0,e.jsx)(u.ThemeColorPicker,{className:"ml-1",value:s.widgetIconColor,specificTheme:w,onChange:e=>{v("config.header.widgetIconColor",e)}})]})}),(0,e.jsx)(a.SettingRow,{label:d("text"),flow:"wrap",className:"pt-3",children:(0,e.jsx)(n.TextStyle,Object.assign({},s.textStyle,{onChange:(e,t)=>{v(`config.header.textStyle.${e}`,t)}}))}),(0,e.jsx)(a.SettingRow,{label:d("expandButton"),children:(0,e.jsx)(m.IconPicker,{icon:s.expandIcon,configurableOption:"all",setButtonUseColor:!1,previewOptions:{size:!1,color:!0},customLabel:d("expandButton"),onChange:e=>{v("config.header.expandIcon",e)}})}),(0,e.jsx)(a.SettingRow,{label:d("collapseButton"),children:(0,e.jsx)(m.IconPicker,{icon:s.collapseIcon,configurableOption:"all",setButtonUseColor:!1,previewOptions:{size:!1,color:!0},customLabel:d("collapseButton"),onChange:e=>{v("config.header.collapseIcon",e)}})}),(0,e.jsx)(a.SettingRow,{flow:"wrap",label:d("togglePosition"),children:(0,e.jsxs)(i.Select,{size:"sm",className:"w-100","aria-label":d("togglePosition"),value:null!==(r=s.togglePosition)&&void 0!==r?r:"right",onChange:e=>{v("config.header.togglePosition",e.target.value)},children:[(0,e.jsx)("option",{value:"left",children:d("start")}),(0,e.jsx)("option",{value:"right",children:d("end")})]})})]})]})});function v(n){const{widgetId:a,tooltip:s}=n,l=t.hooks.useTranslation(),r=t.ReactRedux.useSelector(e=>{const o=e.appStateInBuilder.appConfig.widgets[a],i=e.appStateInBuilder.browserSizeMode,n=Object.keys(o.layouts)[0],s=o.layouts[n][i],l=e.appStateInBuilder.appConfig.layouts[s],r=Object.keys((null==l?void 0:l.content)||{}).map(e=>{const o=l.content[e];return o.isPending?"":o.type===t.LayoutItemType.Widget&&o.widgetId?`widget:${o.widgetId}`:o.type===t.LayoutItemType.Section?`section:${o.sectionId}`:""}).filter(e=>""!==e);return r.sort(),r.join(",")}),d=t.ReactRedux.useSelector(e=>{var t;return null===(t=e.appStateInBuilder.appConfig.widgets[a].config)||void 0===t?void 0:t.expandedItems}),c=t.ReactRedux.useSelector(e=>{var t,o;return null!==(o=null===(t=e.appStateInBuilder.appConfig.widgets[a].config)||void 0===t?void 0:t.singleMode)&&void 0!==o&&o}),g=t.React.useMemo(()=>{if(r.length>0){const e=(0,t.getAppStore)().getState().appStateInBuilder;return r.split(",").map(t=>{const[o,i]=t.split(":");return"widget"===o?{value:i,label:e.appConfig.widgets[i].label}:{value:i,label:e.appConfig.sections[i].label}})}return[]},[r]),p=t.React.useMemo(()=>r.split(",").map(e=>e.split(":")[1]).filter(e=>(null==d?void 0:d.length)>0&&d.includes(e)),[r,d]),u=t.React.useCallback((e,t)=>{(0,o.getAppConfigAction)().editWidgetProperty(a,"config.expandedItems",t).exec()},[a]),h=t.React.useCallback(e=>{(0,o.getAppConfigAction)().editWidgetProperty(a,"config.expandedItems",[e.target.value]).exec()},[a]);return c?(0,e.jsx)(i.Select,{"aria-label":s,size:"sm",css:t.css`.jimu-dropdown { width: 100%; }`,placeholder:l("none"),value:p[0],onChange:h,children:g.map(t=>(0,e.jsx)("option",{value:t.value,children:t.label},t.value))}):(0,e.jsx)(i.MultiSelect,{"aria-label":s,size:"sm",css:t.css`.jimu-dropdown { width: 100%; }`,placeholder:l("none"),values:p,onChange:u,children:g.map(t=>(0,e.jsx)(i.MultiSelectItem,{value:t.value,label:t.label},t.value))})}class j extends t.React.PureComponent{constructor(){super(...arguments),this.formatMessage=e=>this.props.intl.formatMessage({id:e,defaultMessage:c[e]}),this.handlePaddingChange=e=>{const t=i.styleUtils.expandStyleArray(e.number);(0,o.getAppConfigAction)().editWidgetProperty(this.props.id,"config.padding",{number:t,unit:e.unit}).exec()},this.useSingleMode=()=>{(0,o.getAppConfigAction)().editWidgetProperty(this.props.id,"config.singleMode",!0).editWidgetProperty(this.props.id,"config.expandedItems",[]).exec()},this.useMultipleMode=()=>{(0,o.getAppConfigAction)().editWidgetProperty(this.props.id,"config.singleMode",!1).editWidgetProperty(this.props.id,"config.expandedItems",[]).exec()},this.handleConfigChange=(e,t)=>{const i=(0,o.getAppConfigAction)();if("config.panel.backgroundColor"===e){const e=h.colorUtils.getReadableThemeColor(t,(0,h.getTheme2)());i.editWidgetProperty(this.props.id,"config.panel.textColor",e)}i.editWidgetProperty(this.props.id,e,t).exec()},this.handlePanelPaddingChange=e=>{const t=i.styleUtils.expandStyleArray(e.number);(0,o.getAppConfigAction)().editWidgetProperty(this.props.id,"config.panel.padding",{number:t,unit:e.unit}).exec()},this.handlePanelBorderChange=e=>{var i,n;const a=(0,o.getAppConfigAction)(),s=a.appConfig.widgets[this.props.id],l=null!==(n=null===(i=null==s?void 0:s.config)||void 0===i?void 0:i.panel)&&void 0!==n?n:(0,t.Immutable)({});a.editWidgetProperty(this.props.id,"config.panel",l.set("border",e).without("borderLeft").without("borderRight").without("borderTop").without("borderBottom")).exec()},this.handlePanelBorderSideChange=(e,i)=>{var n,a;const s=(0,o.getAppConfigAction)(),l=s.appConfig.widgets[this.props.id],r=null!==(a=null===(n=null==l?void 0:l.config)||void 0===n?void 0:n.panel)&&void 0!==a?a:(0,t.Immutable)({});s.editWidgetProperty(this.props.id,"config.panel",r.set(t.lodash.camelCase(`border-${e}`),i).without("border")).exec()}}render(){const{config:o}=this.props,{gap:s=4,padding:l,singleMode:r=!1,showToggleAll:c=!1,header:g={},panel:p={}}=o,m=(0,h.getTheme2)(),b=window.isExpressBuilder,x=this.formatMessage("backgroundColor"),f=this.formatMessage("foregroundColor");return(0,e.jsxs)("div",{children:[!b&&(0,e.jsxs)(a.SettingSection,{title:this.formatMessage("layout"),role:"group","aria-label":this.formatMessage("layout"),children:[(0,e.jsx)(a.SettingRow,{role:"group",label:this.formatMessage("gap"),children:(0,e.jsx)(n.InputUnit,{"aria-label":this.formatMessage("gap"),precision:0,value:{distance:s,unit:void 0},min:0,css:t.css`width: 120px;`,onChange:e=>{this.handleConfigChange("config.gap",e.distance)}})}),(0,e.jsx)(a.SettingRow,{role:"group","aria-label":this.formatMessage("padding"),label:this.formatMessage("padding"),flow:"wrap",children:(0,e.jsx)(n.Padding,{value:l,units:[i.DistanceUnits.PIXEL],min:0,onChange:this.handlePaddingChange})})]}),(0,e.jsxs)(a.SettingSection,{role:"group","aria-label":this.formatMessage("generalSettigns"),title:this.formatMessage("generalSettigns"),children:[(0,e.jsx)(a.SettingRow,{flow:"wrap",label:this.formatMessage("numOfExpandedItems"),children:(0,e.jsxs)("div",{className:"d-block",role:"radiogroup","aria-label":this.formatMessage("numOfExpandedItems"),children:[(0,e.jsx)("div",{className:"d-flex align-items-center mb-2",children:(0,e.jsxs)(i.Label,{className:"d-flex align-items-center",children:[(0,e.jsx)(i.Radio,{name:"openAtStartMode","aria-label":this.formatMessage("single"),className:"mr-2",checked:r,onClick:this.useSingleMode}),(0,e.jsx)("span",{className:"ml-2",children:this.formatMessage("single")})]})}),(0,e.jsx)("div",{className:"d-flex align-items-center",children:(0,e.jsxs)(i.Label,{className:"d-flex align-items-center",children:[(0,e.jsx)(i.Radio,{name:"openAtStartMode","aria-label":this.formatMessage("multiple"),className:"mr-2",checked:!r,onClick:this.useMultipleMode}),(0,e.jsx)("span",{className:"ml-2",children:this.formatMessage("multiple")})]})})]})}),(0,e.jsx)(a.SettingRow,{label:this.formatMessage("expandOnLoading"),flow:"wrap",children:(0,e.jsx)(v,{widgetId:this.props.id,tooltip:this.formatMessage("expandOnLoading")})}),!r&&(0,e.jsx)(a.SettingRow,{children:(0,e.jsxs)(i.Label,{className:"d-flex align-items-center",children:[(0,e.jsx)(i.Checkbox,{checked:c,onChange:(e,t)=>{this.handleConfigChange("config.showToggleAll",t)}}),(0,e.jsx)("span",{className:"ml-2",children:this.formatMessage("showToggleAllButton")})]})})]}),!b&&(0,e.jsx)(a.SettingSection,{children:(0,e.jsx)(i.CollapsablePanel,{role:"group","aria-label":this.formatMessage("variableHeader"),label:this.formatMessage("variableHeader"),type:"default",defaultIsOpen:!0,children:(0,e.jsx)(w,Object.assign({widgetId:this.props.id},g))})}),!b&&(0,e.jsx)(a.SettingSection,{children:(0,e.jsxs)(i.CollapsablePanel,{role:"group","aria-label":this.formatMessage("panel"),label:this.formatMessage("panel"),type:"default",className:"pb-2",defaultIsOpen:!1,children:[(0,e.jsx)(a.SettingRow,{className:"mt-2",role:"group","aria-label":this.formatMessage("padding"),label:this.formatMessage("padding"),flow:"wrap",children:(0,e.jsx)(n.Padding,{value:p.padding,units:[i.DistanceUnits.PIXEL],min:0,onChange:this.handlePanelPaddingChange})}),(0,e.jsxs)(a.SettingRow,{role:"group",label:this.formatMessage("fill"),"aria-label":this.formatMessage("fill"),children:[(0,e.jsx)(u.ThemeColorPicker,{title:x,"aria-label":x,value:p.backgroundColor,specificTheme:m,onChange:e=>{this.handleConfigChange("config.panel.backgroundColor",e)}}),(0,e.jsx)(u.ThemeColorPicker,{title:f,"aria-label":f,className:"ml-1",type:"with-icon",icon:(0,e.jsx)(d,{size:"s"}),specificTheme:m,value:p.textColor,onChange:e=>{this.handleConfigChange("config.panel.textColor",e)}})]}),(0,e.jsxs)(a.SettingSection,{title:this.formatMessage("border"),className:"px-0 py-3 border-bottom-0",children:[(0,e.jsx)(a.SettingRow,{flow:"wrap",role:"group",label:this.formatMessage("border"),"aria-label":this.formatMessage("border"),children:(0,e.jsx)(n.BorderSetting,{value:p.border,top:p.borderTop,left:p.borderLeft,right:p.borderRight,bottom:p.borderBottom,onChange:this.handlePanelBorderChange,onSideChange:this.handlePanelBorderSideChange})}),(0,e.jsx)(a.SettingRow,{role:"group",flow:"wrap","aria-label":this.formatMessage("borderRadius"),label:this.formatMessage("borderRadius"),children:(0,e.jsx)(n.BorderRadiusSetting,{value:p.borderRadius,onChange:e=>{this.handleConfigChange("config.panel.borderRadius",e)}})})]})]})})]})}}function C(e){g.p=e}})(),p})())}}});