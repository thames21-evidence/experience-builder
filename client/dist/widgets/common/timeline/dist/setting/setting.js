System.register(["jimu-core/emotion","jimu-core","jimu-for-builder","jimu-ui/advanced/setting-components","jimu-ui/advanced/data-source-selector","jimu-arcgis","jimu-ui","jimu-ui/advanced/style-setting-components","jimu-ui/basic/date-picker","jimu-core/react","jimu-core/dnd","jimu-ui/basic/color-picker"],function(e,t){var i={},a={},s={},n={},o={},r={},l={},c={},u={},d={},p={},g={};return{setters:[function(e){i.jsx=e.jsx,i.jsxs=e.jsxs},function(e){a.DataSourceComponent=e.DataSourceComponent,a.DataSourceManager=e.DataSourceManager,a.DataSourceTypes=e.DataSourceTypes,a.Immutable=e.Immutable,a.React=e.React,a.ReactRedux=e.ReactRedux,a.TimezoneConfig=e.TimezoneConfig,a.classNames=e.classNames,a.css=e.css,a.dataSourceUtils=e.dataSourceUtils,a.dateUtils=e.dateUtils,a.getAppStore=e.getAppStore,a.hooks=e.hooks,a.lodash=e.lodash,a.polished=e.polished},function(e){s.getAppConfigAction=e.getAppConfigAction},function(e){n.MapWidgetSelector=e.MapWidgetSelector,n.SettingRow=e.SettingRow,n.SettingSection=e.SettingSection,n.SidePopper=e.SidePopper},function(e){o.DataSourceSelector=e.DataSourceSelector},function(e){r.JimuMapViewComponent=e.JimuMapViewComponent},function(e){l.Alert=e.Alert,l.Button=e.Button,l.Checkbox=e.Checkbox,l.Icon=e.Icon,l.Label=e.Label,l.NumericInput=e.NumericInput,l.Option=e.Option,l.Radio=e.Radio,l.Select=e.Select,l.Switch=e.Switch,l.Tooltip=e.Tooltip,l.defaultMessages=e.defaultMessages},function(e){c.DateUnitInput=e.DateUnitInput},function(e){u.DatePicker=e.DatePicker},function(e){d.default=e.default},function(e){p.interact=e.interact},function(e){g.ThemeColorPicker=e.ThemeColorPicker}],execute:function(){e((()=>{var e={4108:e=>{"use strict";e.exports=s},13089:e=>{"use strict";e.exports=o},14321:e=>{"use strict";e.exports=l},15562:e=>{"use strict";e.exports=c},15656:(e,t,i)=>{var a={"./style_classic.svg":50816,"./style_modern.svg":26805};function s(e){var t=n(e);return i(t)}function n(e){if(!i.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}s.keys=function(){return Object.keys(a)},s.resolve=n,e.exports=s,s.id=15656},25938:e=>{"use strict";e.exports=u},26245:e=>{"use strict";e.exports=p},26805:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTA0IiBoZWlnaHQ9IjcwIiB2aWV3Qm94PSIwIDAgMTA0IDcwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik04MiAyMEM4MC44OTU0IDIwIDgwIDIwLjg5NTQgODAgMjJDODAgMjMuMTA0NiA4MC44OTU0IDI0IDgyIDI0SDg3Qzg4LjEwNDYgMjQgODkgMjMuMTA0NiA4OSAyMkM4OSAyMC44OTU0IDg4LjEwNDYgMjAgODcgMjBIODJaTTE4IDI3SDg2Qzg3LjY1NjkgMjcgODkgMjguMzQzMSA4OSAzMFY0NkM4OSA0Ny42NTY5IDg3LjY1NjkgNDkgODYgNDlIODNWNDZIODJWNDlINzNWNDFINzJWNDlINjNWNDZINjJWNDlINTNWNDFINTJWNDlINDNWNDhINDJWNDlIMzNWNDFIMzJWNDlIMjNWNDZIMjJWNDlIMThDMTYuMzQzMSA0OSAxNSA0Ny42NTY5IDE1IDQ2VjMwQzE1IDI4LjM0MzEgMTYuMzQzMSAyNyAxOCAyN1pNMTQgMzBDMTQgMjcuNzkwOSAxNS43OTA5IDI2IDE4IDI2SDg2Qzg4LjIwOTEgMjYgOTAgMjcuNzkwOSA5MCAzMFY0NkM5MCA0OC4yMDkxIDg4LjIwOTEgNTAgODYgNTBIMThDMTUuNzkwOSA1MCAxNCA0OC4yMDkxIDE0IDQ2VjMwWk0zNCAzMkMzNCAzMC4zNDMxIDM1LjM0MzEgMjkgMzcgMjlINDJDNDMuNjU2OSAyOSA0NSAzMC4zNDMxIDQ1IDMyVjQ0QzQ1IDQ1LjY1NjkgNDMuNjU2OSA0NyA0MiA0N0gzN0MzNS4zNDMxIDQ3IDM0IDQ1LjY1NjkgMzQgNDRWMzJaTTggMzRDOCAzMi44OTU0IDguODk1NDMgMzIgMTAgMzJDMTEuMTA0NiAzMiAxMiAzMi44OTU0IDEyIDM0QzEyIDM1LjEwNDYgMTEuMTA0NiAzNiAxMCAzNkM4Ljg5NTQzIDM2IDggMzUuMTA0NiA4IDM0Wk04IDQyQzggNDAuODk1NCA4Ljg5NTQzIDQwIDEwIDQwQzExLjEwNDYgNDAgMTIgNDAuODk1NCAxMiA0MkMxMiA0My4xMDQ2IDExLjEwNDYgNDQgMTAgNDRDOC44OTU0MyA0NCA4IDQzLjEwNDYgOCA0MlpNOTQgMzJDOTIuODk1NCAzMiA5MiAzMi44OTU0IDkyIDM0QzkyIDM1LjEwNDYgOTIuODk1NCAzNiA5NCAzNkM5NS4xMDQ2IDM2IDk2IDM1LjEwNDYgOTYgMzRDOTYgMzIuODk1NCA5NS4xMDQ2IDMyIDk0IDMyWk05NCA0MEM5Mi44OTU0IDQwIDkyIDQwLjg5NTQgOTIgNDJDOTIgNDMuMTA0NiA5Mi44OTU0IDQ0IDk0IDQ0Qzk1LjEwNDYgNDQgOTYgNDMuMTA0NiA5NiA0MkM5NiA0MC44OTU0IDk1LjEwNDYgNDAgOTQgNDBaTTE0IDIyQzE0IDIwLjg5NTQgMTQuODk1NCAyMCAxNiAyMEMxNy4xMDQ2IDIwIDE4IDIwLjg5NTQgMTggMjJDMTggMjMuMTA0NiAxNy4xMDQ2IDI0IDE2IDI0QzE0Ljg5NTQgMjQgMTQgMjMuMTA0NiAxNCAyMlpNNjAgMjFINDZWMjNINjBWMjFaIiBmaWxsPSIjNkE2QTZBIi8+DQo8L3N2Zz4NCg=="},31027:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M12 6.5c0 .527-.074 1.036-.212 1.518l.912.438a6.5 6.5 0 1 0-6.586 4.533l-.077-1.008A5.5 5.5 0 1 1 12 6.5m-9 0a3.5 3.5 0 0 0 2.88 3.445L5.8 8.901a2.501 2.501 0 1 1 3.194-2.224l.949.456A3.5 3.5 0 1 0 3 6.5M15.5 11l-5 1-3 4-1-9.5zm-5.57.094-1.702 2.269-.542-5.152 4.76 2.38z" clip-rule="evenodd"></path></svg>'},43673:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M4.182 9.727a1.91 1.91 0 1 0 0-3.818 1.91 1.91 0 0 0 0 3.818M7.3 7.182a3.183 3.183 0 1 0 0 1.273h1.4a3.183 3.183 0 1 0 0-1.273z" clip-rule="evenodd"></path></svg>'},45508:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2M6.5 7.5A.5.5 0 0 1 7 7h1.5v4.5h1a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1h1V8H7a.5.5 0 0 1-.5-.5"></path><path fill="#000" fill-rule="evenodd" d="M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14" clip-rule="evenodd"></path></svg>'},50816:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTA0IiBoZWlnaHQ9IjcwIiB2aWV3Qm94PSIwIDAgMTA0IDcwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik04OCAyMkM4OCAyMC44OTU0IDg4Ljg5NTQgMjAgOTAgMjBIOTRDOTUuMTA0NiAyMCA5NiAyMC44OTU0IDk2IDIyQzk2IDIzLjEwNDYgOTUuMTA0NiAyNCA5NCAyNEg5MEM4OC44OTU0IDI0IDg4IDIzLjEwNDYgODggMjJaTTggMjFIMjJWMjNIOFYyMVpNOTQgNDZDOTIuODk1NCA0NiA5MiA0Ni44OTU0IDkyIDQ4QzkyIDQ5LjEwNDYgOTIuODk1NCA1MCA5NCA1MEM5NS4xMDQ2IDUwIDk2IDQ5LjEwNDYgOTYgNDhDOTYgNDYuODk1NCA5NS4xMDQ2IDQ2IDk0IDQ2Wk00NSA0NkM0My44OTU0IDQ2IDQzIDQ2Ljg5NTQgNDMgNDhDNDMgNDkuMTA0NiA0My44OTU0IDUwIDQ1IDUwQzQ2LjEwNDYgNTAgNDcgNDkuMTA0NiA0NyA0OEM0NyA0Ni44OTU0IDQ2LjEwNDYgNDYgNDUgNDZaTTQ5IDQ4QzQ5IDQ2Ljg5NTQgNDkuODk1NCA0NiA1MSA0NkM1Mi4xMDQ2IDQ2IDUzIDQ2Ljg5NTQgNTMgNDhDNTMgNDkuMTA0NiA1Mi4xMDQ2IDUwIDUxIDUwQzQ5Ljg5NTQgNTAgNDkgNDkuMTA0NiA0OSA0OFpNNTUgNDhDNTUgNDYuODk1NCA1NS44OTU0IDQ2IDU3IDQ2QzU4LjEwNDYgNDYgNTkgNDYuODk1NCA1OSA0OEM1OSA0OS4xMDQ2IDU4LjEwNDYgNTAgNTcgNTBDNTUuODk1NCA1MCA1NSA0OS4xMDQ2IDU1IDQ4Wk0xMCA0NkM4Ljg5NTQzIDQ2IDggNDYuODk1NCA4IDQ4QzggNDkuMTA0NiA4Ljg5NTQzIDUwIDEwIDUwQzExLjEwNDYgNTAgMTIgNDkuMTA0NiAxMiA0OEMxMiA0Ni44OTU0IDExLjEwNDYgNDYgMTAgNDZaTTkgMzBIMTBWMzRIOVYzMFpNMjMgMzJIMjRWMzRIMjNWMzJaTTM4IDMwSDM3VjM0SDM4VjMwWk01MSAzMkg1MlYzNEg1MVYzMlpNNjYgMzBINjVWMzRINjZWMzBaTTc5IDMySDgwVjM0SDc5VjMyWk05NCAzMEg5M1YzNEg5NFYzMFpNMTAuNSAzNkg5My41Qzk0Ljg4MDcgMzYgOTYgMzcuMTE5MyA5NiAzOC41Qzk2IDM5Ljg4MDcgOTQuODgwNyA0MSA5My41IDQxSDEwLjVDOS4xMTkyOSA0MSA4IDM5Ljg4MDcgOCAzOC41QzggMzcuMTE5MyA5LjExOTI5IDM2IDEwLjUgMzZaTTEwLjUgMzdDOS42NzE1NyAzNyA5IDM3LjY3MTYgOSAzOC41QzkgMzkuMzI4NCA5LjY3MTU3IDQwIDEwLjUgNDBIMjIuNDk4M0MyMS42Njk5IDQwIDIwLjk5ODMgMzkuMzI4NCAyMC45OTgzIDM4LjVDMjAuOTk4MyAzNy42NzE2IDIxLjY2OTkgMzcgMjIuNDk4MyAzN0gxMC41Wk05My41IDQwSDMxLjQ5NjlDMzIuMzI1MyA0MCAzMi45OTY5IDM5LjMyODQgMzIuOTk2OSAzOC41QzMyLjk5NjkgMzcuNjcxNiAzMi4zMjUzIDM3IDMxLjQ5NjkgMzdIOTMuNUM5NC4zMjg0IDM3IDk1IDM3LjY3MTYgOTUgMzguNUM5NSAzOS4zMjg0IDk0LjMyODQgNDAgOTMuNSA0MFoiIGZpbGw9IiM2QTZBNkEiLz4NCjwvc3ZnPg0K"},54337:e=>{"use strict";e.exports=g},62686:e=>{"use strict";e.exports=r},67386:e=>{"use strict";e.exports=i},68972:e=>{"use strict";e.exports=d},72823:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 1C4.15 1 1 4.15 1 8s3.15 7 7 7 7-3.15 7-7-3.15-7-7-7m1.167 11.667H6.834v-2.334h2.333zm-2.333-4.5V3.333h2.333v4.834z" clip-rule="evenodd"></path></svg>'},79244:e=>{"use strict";e.exports=a},79298:e=>{"use strict";e.exports=n},80914:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="m8 0 8 6-8 6-8-6zM1.887 6 8 10.82 14.113 6 8 1.18zM0 9.81.563 9 8 14.775 15.437 9l.563.81L8 16z" clip-rule="evenodd"></path></svg>'}},t={};function h(i){var a=t[i];if(void 0!==a)return a.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,h),s.exports}h.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return h.d(t,{a:t}),t},h.d=(e,t)=>{for(var i in t)h.o(t,i)&&!h.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},h.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),h.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},h.p="";var m={};return h.p=window.jimuConfig.baseUrl,(()=>{"use strict";h.r(m),h.d(m,{__set_webpack_public_path__:()=>Te,default:()=>fe});var e,t,i,a=h(67386),s=h(79244),n=h(4108),o=h(79298),r=h(13089),l=h(62686),c=h(14321);!function(e){e.Classic="CLASSIC",e.Modern="MODERN"}(e||(e={})),function(e){e.Slowest="SLOWEST",e.Slow="SLOW",e.Medium="MEDIUM",e.Fast="FAST",e.Fastest="FASTEST"}(t||(t={})),function(e){e.instant="INSTANT",e.current="CURRENT",e.cumulatively="CUMULATIVE"}(i||(i={}));function u(e){return s.css`
    height: calc(100% - ${s.polished.rem(50)});
    overflow: auto;

    .date-label {
      color: ${e.ref.palette.neutral[1e3]};
    }
    .time-step-details {
      margin-top: 0.75rem !important;
    }
  `}function d(e){return s.css`
    &.show-disabled-mask {
      position: relative;
      overflow-y: hidden;
      .disabled-mask {
        position: absolute;
        top: 0;
        background-color: transparent;
        .mask-bg {
          width: 100%;
          height: 100%;
          background-color: #000;
          opacity: 0.5;
        }
        .alert-container {
          position: absolute;
          left: 10px;
          top: 16px;
        }
      }
    }

    .style-container{
      display: flex;
      justify-content: space-between;
      .jimu-btn {
        padding: 0;
        background: ${e.ref.palette.neutral[300]};
        &.active{
          background: ${e.ref.palette.neutral[300]};
          outline: 2px solid ${e.sys.color.primary.main};
        }
      }
    }
    .autoplay-label{
      color: ${e.ref.palette.neutral[900]};
    }

    .empty-placeholder {
      position: relative;
      overflow: hidden;
      .empty-placeholder-inner {
        position: absolute;
        top: 50%;
        width: 100%;
        transform: translateY(-50%);
        .empty-placeholder-text {
          color: ${e.ref.palette.neutral[1e3]};
          font-size: ${s.polished.rem(14)};
          margin: 1rem 1rem 0 1rem;
        }
        .empty-placeholder-icon {
          color: ${e.ref.palette.neutral[800]};
        }
      }
    }

    .honor-label {
      color: ${e.ref.palette.neutral[1100]};
    }
  `}function p(e){return s.css`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: ${e}px;
  `}var g=h(15562),y=h(25938),S=h(68972),D=h(26245);const M=["year","month","day"],f=["hour","minute","second"],T=-59011488343e3,x=325036512e5,j="d/M/y",N="h:mm:ss a",v=[...M,...f];var w;!function(e){e[e.year=31536e3]="year",e[e.month=2592e3]="month",e[e.day=86400]="day",e[e.hour=3600]="hour",e[e.minute=60]="minute",e[e.second=1]="second"}(w||(w={}));const I={slowest:5e3,slow:4e3,medium:3e3,fast:2e3,fastest:1e3};function b(e){let i;const a=1e3*Math.ceil(e/1e3);return Object.keys(I).some(e=>I[e]===a&&(i=e.toUpperCase(),!0)),i||(a>I.slowest?i=t.Slowest:a<I.fastest&&(i=t.Fastest)),i}function C(e,i,a=!1){const{startTime:n={value:s.dateUtils.VirtualDateType.Min},endTime:o={value:s.dateUtils.VirtualDateType.Max},layerList:r,accuracy:l,stepLength:c}=e||{};let u;const{startTime:d,endTime:p}=function(e,t,i,a){const s=A(i,!0,e,t),n=A(a,!1,e,t);return E(s,n,!0)}(i,r,n,o);if(!d||!p)return null;const g=Q(d,p),h=g[0],m=O(d,p,h);if(e){u=(0,s.Immutable)(e);const t=!g.includes(l);t&&(u=u.set("accuracy",h)),c&&(t||w[c.unit]>w[h]||1e3*w[c.unit]*c.val>p-d)&&(u=u.set("stepLength",m))}else u=(0,s.Immutable)(function(e,i){return{layerList:null,startTime:{value:s.dateUtils.VirtualDateType.Min},endTime:{value:s.dateUtils.VirtualDateType.Max},timeDisplayStrategy:"CURRENT",dividedCount:null,accuracy:e,stepLength:i,speed:t.Medium}}(h,m));return a?(u=u.set("startTime",{value:d}).set("endTime",{value:p}),u):(0,s.Immutable)({config:u,exactStartTime:d,exactEndTime:p,minAccuracy:h,accuracyList:g})}function O(e,t,i){const a=(t-e)/1e3/w[i];return{val:a>15?10:a>10?5:1,unit:i}}function A(e,t=!0,i,a){let n=null;if(e)if("number"==typeof e.value)n=e.value;else{const o=new Date;if(o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0),e.value===s.dateUtils.VirtualDateType.Today)o.setHours(0),n=o.getTime()+L(e),n=t?n:n+1e3*w.day;else if(e.value===s.dateUtils.VirtualDateType.Now)n=o.getTime()+L(e),n=t?n:n+1e3*w.hour;else if(e.value===s.dateUtils.VirtualDateType.Max||e.value===s.dateUtils.VirtualDateType.Min){const t=z(i,a);t&&(i=t);if(Object.keys(i).filter(e=>null===i[e]).length===Object.keys(i).length)return null;Object.keys(i).forEach(t=>{var a,o;const r=i[t];if(!r)return;const l=r.getTimeInfo();if(e.value===s.dateUtils.VirtualDateType.Max){const e=null===(a=null==l?void 0:l.timeExtent)||void 0===a?void 0:a[1];n=n?Math.max(n,e):e}else{const e=null===(o=null==l?void 0:l.timeExtent)||void 0===o?void 0:o[0];n=n?Math.min(n,e):e}})}}return n}function L(e){return e.offset?e.offset.val*w[e.offset.unit]*1e3:0}function k(e){return e===s.DataSourceTypes.WebMap||e===s.DataSourceTypes.WebScene}function z(e,t){let i=null;const a=Object.keys(e).map(t=>e[t])[0];if(k(null==a?void 0:a.type)){const e=[];a.getAllChildDataSources().forEach(t=>{(t.type===s.DataSourceTypes.MapService||t.type===s.DataSourceTypes.SubtypeGroupLayer||t.type===s.DataSourceTypes.ImageryLayer||t.type===s.DataSourceTypes.ImageryTileLayer||t.type===s.DataSourceTypes.FeatureLayer&&null===s.dataSourceUtils.findMapServiceDataSource(t)||t.type===s.DataSourceTypes.SceneLayer)&&t.supportTime()&&e.push(t)});const n=(null==t?void 0:t.map(e=>e.dataSourceId))||[];i={},e.forEach(e=>{(0===n.length||n.includes(e.id))&&(i[e.id]=e)})}return i}function E(e,t,i=!1){let a;if(a=window.jimuConfig.isBuilder?(0,s.getAppStore)().getState().appStateInBuilder.appConfig.attributes.timezone:(0,s.getAppStore)().getState().appConfig.attributes.timezone,(null==a?void 0:a.type)===s.TimezoneConfig.Specific){const n=s.dataSourceUtils.getTimeZoneOffsetByName(a.value),o=s.dataSourceUtils.getLocalTimeOffset();i?(e=e-o+n,t=t-o+n):(e=e+o-n,t=t+o-n)}return{startTime:e,endTime:t}}function Q(e,t){const i=[...M,...f],a=[],s=t-e;return i.forEach(e=>{s>=1e3*w[e]&&a.push(e)}),a}function U(e){return e===s.DataSourceTypes.FeatureLayer||e===s.DataSourceTypes.ImageryLayer||e===s.DataSourceTypes.ImageryTileLayer||e===s.DataSourceTypes.SubtypeGroupLayer||e===s.DataSourceTypes.SceneLayer}function R(e,t,i,a){let s=0;t[0]!==i&&(s=e/((t[1]-t[0])/(i-t[0])),s<0&&(s=0));let n=e/((t[1]-t[0])/(a-i));return n<=2&&(n=2),{marginLeft:s+"px",width:n+"px"}}function V(e,t,i,a,s,n){let o=e,r=t;const l=(i[1]-i[0])/a*s;return n.edges.left?(o=e-l,o=Math.max(T,o)):(r=t+l,r=Math.min(x,r)),{newStart:o,newEnd:r}}var P=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(i[a[s]]=e[a[s]])}return i};const W=function(e){const{width:t,isRTL:i,shadowHeight:n,extent:o,intl:r,onChange:l}=e,u=P(e,["width","isRTL","shadowHeight","extent","intl","onChange"]),{startValue:d,endValue:p}=u,[g,h]=s.React.useState([d,p]),[m,y]=s.React.useState(null),S=s.React.useRef(null),M=s.React.useRef(null),f=s.React.useRef(null);s.React.useEffect(()=>{const e=s.lodash.debounce(()=>{if(m&&m.unset(),S.current){const e={interact:D.interact,resizeRef:S.current,startValue:g[0],endValue:g[1],extent:o,width:t,setRange:h,onChange:l};y(function(e){const{interact:t,resizeRef:i,startValue:a,endValue:s,extent:n,width:o,setRange:r,onChange:l}=e;let c,u,d;const p=s-a;return t(i).resizable({edges:{left:".resize-left",right:".resize-right"}}).on("resizestart",e=>{e.stopPropagation(),c=0;const t=i.getBoundingClientRect();u=t.width,d=parseFloat(i.style.marginLeft.split("px")[0]),i.style.minWidth="0px"}).on("resizemove",e=>{e.stopPropagation();const t=e.deltaRect;c+=t.width,e.edges.left?c>0?(a<=T&&(c=d),c=Math.min(d+20,c)):c=Math.max(20-u,c):e.edges.right&&(c>0?(s>=x&&(c=o-d-u),c=Math.min(o-d-u+20,c)):c=Math.max(20-u,c));const l=p&&u+c;e.edges.left&&(i.style.marginLeft=d-c+"px"),i.style.width=l+"px";const g=V(a,s,n,o,c,e);r([g.newStart,g.newEnd])}).on("resizeend",e=>{e.stopPropagation();const t=V(a,s,n,o,c,e);l(t.newStart,t.newEnd)})}(e))}},50);e()},[o]),s.React.useEffect(()=>{function e(e){e.edges={left:!0},v(e)}function t(e){e.edges={right:!0},v(e)}return M.current.addEventListener("keyup",e,!0),f.current.addEventListener("keyup",t,!0),()=>{M.current&&f.current&&(M.current.removeEventListener("keyup",e,!0),f.current.removeEventListener("keyup",t,!0))}},[]);const v=s.hooks.useEventCallback(e=>{if(e.key.includes("Arrow")){let i="ArrowLeft"===e.key||"ArrowTop"===e.key?5:-5;e.edges.right&&(i=-i);const a=V(d,p,o,t,i,e);l(a.newStart,a.newEnd)}});s.React.useEffect(()=>{h([d,p])},[d,p]);const w=s.React.useMemo(()=>R(t,o,g[0],g[1]),[t,o,g]),I=s.React.useMemo(()=>s.dateUtils.formatDateValue(g[0],r,j,N),[r,g]),b=s.React.useMemo(()=>s.dateUtils.formatDateValue(g[1],r,j,N),[r,g]);return(0,a.jsxs)(s.React.Fragment,{children:[(0,a.jsx)("span",{className:"range-shadow",css:s.css`
          left: ${i?"unset":w.marginLeft};
          right: ${i?w.marginLeft:"unset"};
          width: ${w.width};
          height: ${n+"px"};
        `}),(0,a.jsx)("div",{className:"layer-line extent-line",style:{width:t},children:(0,a.jsxs)("div",{className:"resize-handlers",ref:e=>{S.current=e},style:w,children:[(0,a.jsx)(c.Tooltip,{placement:"bottom",offsetOptions:10,title:I,children:(0,a.jsx)("button",{className:"resize-handler resize-left",ref:e=>{M.current=e}})}),(0,a.jsx)(c.Tooltip,{placement:"bottom",offsetOptions:10,title:b,children:(0,a.jsx)("button",{className:"resize-handler resize-right",ref:e=>{f.current=e}})})]})})]})};var B=h(80914),F=h.n(B),Y=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(i[a[s]]=e[a[s]])}return i};const J=e=>{const t=window.SVG,{className:i}=e,n=Y(e,["className"]),o=(0,s.classNames)("jimu-icon jimu-icon-component",i);return t?(0,a.jsx)(t,Object.assign({className:o,src:F()},n)):(0,a.jsx)("svg",Object.assign({className:o},n))};var $=h(43673),Z=h.n($),H=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(i[a[s]]=e[a[s]])}return i};const G=e=>{const t=window.SVG,{className:i}=e,n=H(e,["className"]),o=(0,s.classNames)("jimu-icon jimu-icon-component",i);return t?(0,a.jsx)(t,Object.assign({className:o,src:Z()},n)):(0,a.jsx)("svg",Object.assign({className:o},n))};function _(e){const t=(0,s.getAppStore)().getState().appContext.isRTL;return s.css`
    .layer-lines{
      position: relative;

      .range-shadow {
        margin-left: ${t?"unset":"30px"};
        margin-right: ${t?"30px":"unset"};
        position: absolute;
        top: 0;
        z-index: -1;
        background: linear-gradient(0deg, #010101 0%, rgba(1, 1, 1, 0) 100%);
      }
      .layer-line-container {
        margin-bottom: 0.25rem;
        .layer-icon {
          margin-right: ${s.polished.rem(14)};
        }
        .layer-line, .extent-line {
          height: 2px;
        }
        .layer-line {
          background: ${e.ref.palette.neutral[900]};
          .jimu-btn {
            margin-left: 1rem;
          }
        }
      }
      .extent-line {
        background: ${e.ref.palette.neutral[700]};
        .resize-handlers {
          background: ${e.sys.color.primary.light};
          height: 2px;
          display: flex;
          justify-content: space-between;
          .resize-handler {
            min-width: 10px;
            width: 10px;
            height: 10px;
            border-radius: 10px;
            overflow: visible;
            margin-top: -5px;
            padding: 0;
            border: none;
            background: ${e.ref.palette.neutral[500]};
            border: 2px solid ${e.sys.color.primary.light};
          }
        }
      }
    }
  `}const q=function(e){const{startTime:t,endTime:i,theme:n,intl:o,overallExtentLabel:r,width:l=188,dataSources:u,onChange:d}=e,[p,g]=S.default.useState(null),[h,m]=S.default.useState(null),[y,D]=S.default.useState(null),M=(0,s.getAppStore)().getState().appContext.isRTL;S.default.useEffect(()=>{h&&T()},[t,i]),S.default.useEffect(()=>{f()},[u]);const f=()=>{let e=null,t=null;const i=[];Object.keys(u).forEach(a=>{var n,r;const l=u[a],c=l.getTimeInfo(),d=null===(n=null==c?void 0:c.timeExtent)||void 0===n?void 0:n[0],p=null===(r=null==c?void 0:c.timeExtent)||void 0===r?void 0:r[1];i.push({label:l.getLabel(),extent:[d,p],extentLabels:[s.dateUtils.formatDateValue(d,o,j,N),s.dateUtils.formatDateValue(p,o,j,N)]}),e=e?Math.min(e,d):d,t=t?Math.max(t,p):p}),g(i),m([e,t]),T(e,t)},T=(e=h[0],a=h[1])=>{const s=t?Math.min(t,e):e,n=i?Math.max(i,a):a;D([s,n])};return(0,a.jsx)("div",{className:"time-span w-100",dir:"ltr",css:_(n),children:(0,a.jsxs)("div",{className:"layer-lines",css:s.css`
          height: ${20*(Object.keys(u).length+1)};
        `,children:[null==p?void 0:p.map((e,t)=>{const i=R(l,y,e.extent[0],e.extent[1]);return(0,a.jsxs)("div",{className:"d-flex align-items-center layer-line-container",children:[(0,a.jsx)(c.Tooltip,{placement:"bottom",title:(0,a.jsxs)("div",{className:"p-2",children:[(0,a.jsx)("div",{children:e.label}),(0,a.jsx)("div",{children:`${e.extentLabels[0]} - ${e.extentLabels[1]}`})]}),children:(0,a.jsx)(c.Button,{icon:!0,size:"sm",type:"tertiary",className:"layer-icon p-0 border-0",children:(0,a.jsx)(J,{size:12})})}),(0,a.jsx)("div",{className:"layer-line",css:s.css`
                  margin-left: ${M?"unset":i.marginLeft};
                  margin-right: ${M?i.marginLeft:"unset"};
                  width: ${i.width};
                `})]},"layer-line-"+t)}),(0,a.jsxs)("div",{className:"d-flex align-items-center layer-line-container",children:[(0,a.jsx)(c.Tooltip,{placement:"bottom",title:r,children:(0,a.jsx)(c.Button,{icon:!0,size:"sm",type:"tertiary",className:"layer-icon p-0",children:(0,a.jsx)(G,{size:12})})}),y&&(0,a.jsx)(W,{theme:n,width:l,isRTL:M,intl:o,shadowHeight:20*p.length+10,startValue:null!=t?t:y[0],endValue:null!=i?i:y[1],extent:y,onChange:(e,t)=>{d(e,t)}})]})]})})};var K=h(45508),X=h.n(K),ee=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(i[a[s]]=e[a[s]])}return i};const te=e=>{const t=window.SVG,{className:i}=e,n=ee(e,["className"]),o=(0,s.classNames)("jimu-icon jimu-icon-component",i);return t?(0,a.jsx)(t,Object.assign({className:o,src:X()},n)):(0,a.jsx)("svg",Object.assign({className:o},n))};var ie=h(72823),ae=h.n(ie),se=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(i[a[s]]=e[a[s]])}return i};const ne=e=>{const t=window.SVG,{className:i}=e,n=se(e,["className"]),o=(0,s.classNames)("jimu-icon jimu-icon-component",i);return t?(0,a.jsx)(t,Object.assign({className:o,src:ae()},n)):(0,a.jsx)("svg",Object.assign({className:o},n))},oe=(0,s.Immutable)([s.DataSourceTypes.FeatureLayer,s.DataSourceTypes.SceneLayer,s.DataSourceTypes.ImageryLayer,s.DataSourceTypes.ImageryTileLayer,s.DataSourceTypes.SubtypeGroupLayer,s.DataSourceTypes.MapService]),re=[s.dateUtils.VirtualDateType.Min,s.dateUtils.VirtualDateType.Today,s.dateUtils.VirtualDateType.Now],le=[s.dateUtils.VirtualDateType.Max,s.dateUtils.VirtualDateType.Today,s.dateUtils.VirtualDateType.Now];class ce extends s.React.PureComponent{constructor(e){super(e),this.timeSpanChanged=(e,t)=>{const{config:i,dataSources:a,exactStartTime:s,exactEndTime:n}=this.props;let o;if(s!==e)o=i.set("startTime",{value:e}),this.checkIfDatesInvalid({value:e},!0);else{if(n===t)return;o=i.set("endTime",{value:t}),this.checkIfDatesInvalid({value:t},!1)}if(i.stepLength){const e=C(o,a).config;o=o.set("accuracy",e.accuracy).set("stepLength",e.stepLength)}this.props.onChange(o)},this.onTimeChanged=(e,t)=>{const{config:i,dataSources:a}=this.props,n={value:e};e===s.dateUtils.VirtualDateType.Today?n.offset={val:0,unit:"day"}:e===s.dateUtils.VirtualDateType.Now?n.offset={val:0,unit:"minute"}:"number"==typeof e&&(n.value=t?Math.max(T,e):Math.min(x,e));let o=i.set((t?"start":"end")+"Time",n);if(this.checkIfDatesInvalid(n,t),i.stepLength){const e=C(o,a).config;o=o.set("accuracy",e.accuracy).set("stepLength",e.stepLength)}this.props.onChange(o)},this.checkIfDatesInvalid=(e,t)=>{const{exactStartTime:i,exactEndTime:a,dataSources:s,config:n}=this.props;let o=!0;const r=A(e,t,s,n.layerList);(t&&r>a||!t&&r<i)&&(o=!1),this.setState({isDateValid:o})},this.getOffsetUnits=e=>{let t;return t=e===s.dateUtils.VirtualDateType.Today?M:[...M,...f.filter(e=>"second"!==e)],t},this.onDateOffsetChanged=(e,t=!1)=>{const i=t?"startTime":"endTime",a=this.props.config.setIn([i,"offset"],e);this.checkIfDatesInvalid(a[i],t),this.props.onChange(a)},this.onAccuracyChanged=e=>{const{config:t,exactStartTime:i,exactEndTime:a,accuracyList:s}=this.props,n=e.target.value;let o=t.set("accuracy",n);if(t.stepLength&&s.indexOf(n)<s.indexOf(t.stepLength.unit)){const e=O(i,a,n);o=o.set("stepLength",e)}this.props.onChange(o)},this.onStepChecked=()=>{const{config:e,exactStartTime:t,exactEndTime:i}=this.props,a=O(t,i,e.accuracy);this.props.onChange(this.props.config.set("stepLength",a).set("dividedCount",null))},this.onDividedChecked=()=>{this.props.onChange(this.props.config.set("stepLength",null).set("dividedCount",5))},this.onStepLengthChanged=e=>{e.val=Math.round(e.val||1),this.props.onChange(this.props.config.set("stepLength",e).set("dividedCount",null))},this.onDividedCountChanged=e=>{e=e?Math.round(e):2,this.props.onChange(this.props.config.set("dividedCount",e).set("stepLength",null))},this.onSpeedChanged=e=>{const t=this.props.config.set("speed",e.target.value);this.props.onChange(t)},this.onChange=(e,t)=>{this.props.onChange(this.props.config.set(e,t))},this.getAllSupportedLayersFromMap=()=>{const{dataSources:e,dataSourceType:t,config:i}=this.props;return k(t)?z(e,null==i?void 0:i.layerList):null},this.getSupportedLayerIdsFromMap=()=>{if(k(this.props.dataSourceType)){const e=Object.keys(this.allSupportedLayers).map(e=>e);return(0,s.Immutable)(e)}return null},this.getSelectedDataSources=()=>{const{dataSources:e,dataSourceType:t,config:i}=this.props;let a={};return k(t)?Object.keys(this.allSupportedLayers).forEach(e=>{(null===i.layerList||i.layerList.filter(t=>t.dataSourceId===e).length>0)&&(a[e]=this.allSupportedLayers[e])}):a=e,a},this.getSelectedUseDataSources=()=>{var e;const{config:t,dataSourceType:i}=this.props;if(k(i)){if(null!==t.layerList)return t.layerList;const i=[];return null===(e=Object.keys(this.allSupportedLayers))||void 0===e||e.forEach(e=>{var t,a;const s=this.allSupportedLayers[e];i.push({rootDataSourceId:null===(t=s.getRootDataSource())||void 0===t?void 0:t.id,dataSourceId:e,mainDataSourceId:null===(a=s.getMainDataSource())||void 0===a?void 0:a.id})}),(0,s.Immutable)(i)}return null},this.dataSourceChange=e=>{const t=C(null,z(this.props.dataSources,e)).config;this.props.onChange(t.set("layerList",e))},this.getDateValue=e=>e?("number"==typeof e&&(e=new Date(e)),e):null,this.isSelectionDisabled=()=>{const{layerList:e}=this.props.config;return null===e||e.length===this.state.supportedLayerIdsFromMap.length},this.getDsTimezone=()=>{const e=(0,s.getAppStore)().getState().appStateInBuilder.appConfig.attributes.timezone;return(null==e?void 0:e.type)===s.TimezoneConfig.Specific?e.value:null},this.allSupportedLayers=this.getAllSupportedLayersFromMap(),this.state={supportedLayerIdsFromMap:this.getSupportedLayerIdsFromMap(),selectedUseDataSources:this.getSelectedUseDataSources(),selectedDataSources:this.getSelectedDataSources(),isDateValid:e.exactStartTime<=e.exactEndTime}}componentDidUpdate(e,t){this.props.config.layerList!==e.config.layerList&&this.setState({selectedUseDataSources:this.getSelectedUseDataSources(),selectedDataSources:this.getSelectedDataSources()})}render(){const{i18nMessage:e,config:n,dataSourceType:l,intl:d,theme:h,exactStartTime:m,exactEndTime:S,accuracyList:D}=this.props,{supportedLayerIdsFromMap:M,selectedUseDataSources:f,selectedDataSources:T}=this.state,{startTime:x,endTime:v,accuracy:I,timeDisplayStrategy:b,stepLength:C,dividedCount:O,speed:A}=n,L="number"==typeof(null==x?void 0:x.value)?E(x.value,0,!0).startTime:null==x?void 0:x.value,z="number"==typeof(null==v?void 0:v.value)?E(0,v.value,!0).endTime:null==v?void 0:v.value,Q=this.getDateValue(L),U=this.getDateValue(z),R="string"==typeof(null==x?void 0:x.value)&&[s.dateUtils.VirtualDateType.Today,s.dateUtils.VirtualDateType.Now].includes(null==x?void 0:x.value),V="string"==typeof(null==v?void 0:v.value)&&[s.dateUtils.VirtualDateType.Today,s.dateUtils.VirtualDateType.Now].includes(null==v?void 0:v.value);return(0,a.jsxs)("div",{className:"time-panel w-100 h-100",css:u(h),children:[k(l)&&(0,a.jsx)(o.SettingSection,{className:"pt-0",title:(0,a.jsx)("span",{title:e("enableTimeAnimation"),children:e("enableTimeAnimation")}),children:(0,a.jsx)(s.React.Fragment,{children:(0,a.jsx)(o.SettingRow,{children:(0,a.jsx)(r.DataSourceSelector,{isMultiple:!0,"aria-label":e("enableTimeAnimation"),types:oe,useDataSources:f,mustUseDataSource:!0,disableDataView:!0,hideDataView:!0,closeDataSourceListOnChange:!0,disableRemove:()=>1===f.length,onChange:this.dataSourceChange,hideDs:e=>!M.includes(e.id),disableSelection:this.isSelectionDisabled})})})}),(0,a.jsx)(o.SettingSection,{role:"group",title:e("timeSpan"),"aria-label":e("timeSpan"),className:"border-0 "+(k(l)?"":"pt-0"),children:(0,a.jsx)(o.SettingRow,{children:(0,a.jsx)(q,{intl:d,theme:h,overallExtentLabel:e("overallTimeExtent"),dataSources:T,startTime:m,endTime:S,onChange:this.timeSpanChanged})})}),(0,a.jsxs)(o.SettingSection,{role:"group",title:e("startTime"),"aria-label":e("startTime"),className:"border-0 pt-0",children:[(0,a.jsx)(o.SettingRow,{className:"mt-2",children:(0,a.jsx)(y.DatePicker,{style:{width:"226px"},"aria-label":e("startTime"),disablePortal:!1,selectedDate:Q,format:"shortDateLongTime",runtime:!1,showDoneButton:!0,hideEmpty:!0,showTimeInput:!0,isLongTime:!0,supportVirtualDateList:!0,virtualDateList:re,dataSourceTimezone:this.getDsTimezone(),onChange:e=>{this.onTimeChanged(e,!0)}})}),"string"==typeof(null==x?void 0:x.value)&&x.value===s.dateUtils.VirtualDateType.Min&&(0,a.jsx)(o.SettingRow,{className:"mt-1 date-label",children:s.dateUtils.formatDateValue(m,d,j,N)}),R&&(0,a.jsx)(o.SettingRow,{"aria-label":e("offset"),label:(0,a.jsx)("div",{title:e("offset"),css:p(73),children:e("offset")}),children:(0,a.jsx)(g.DateUnitInput,{style:{width:"125px"},step:1,value:x.offset,units:this.getOffsetUnits(x.value),onChange:e=>{this.onDateOffsetChanged(e,!0)}})})]}),(0,a.jsxs)(o.SettingSection,{role:"group",title:e("endTime"),"aria-label":e("endTime"),className:"border-0 pt-0",children:[(0,a.jsx)(o.SettingRow,{className:"mt-2",children:(0,a.jsx)(y.DatePicker,{style:{width:"226px"},"aria-label":e("endTime"),disablePortal:!1,selectedDate:U,format:"shortDateLongTime",runtime:!1,showDoneButton:!0,hideEmpty:!0,showTimeInput:!0,isLongTime:!0,supportVirtualDateList:!0,virtualDateList:le,dataSourceTimezone:this.getDsTimezone(),onChange:e=>{this.onTimeChanged(e,!1)}})}),"string"==typeof(null==v?void 0:v.value)&&v.value===s.dateUtils.VirtualDateType.Max&&(0,a.jsx)(o.SettingRow,{className:"mt-1 date-label",children:s.dateUtils.formatDateValue(S,d,j,N)}),V&&(0,a.jsx)(o.SettingRow,{"aria-label":e("offset"),label:(0,a.jsx)("div",{title:e("offset"),css:p(73),children:e("offset")}),children:(0,a.jsx)(g.DateUnitInput,{style:{width:"125px"},step:1,value:v.offset,units:this.getOffsetUnits(v.value),onChange:e=>{this.onDateOffsetChanged(e,!1)}})}),!this.state.isDateValid&&(0,a.jsxs)("div",{className:"d-flex mt-2 ml-1 mr-1",role:"alert","aria-live":"polite",children:[(0,a.jsx)(ne,{color:this.props.theme.sys.color.error.dark,className:"mr-2"}),(0,a.jsx)("div",{className:"flex-grow-1",style:{color:h.sys.color.error.dark},children:e("timeWarning")})]})]}),(0,a.jsxs)(o.SettingSection,{className:"pt-0",role:"group","aria-label":e("setMinTimeAccuracy"),children:[(0,a.jsx)(o.SettingRow,{flow:"wrap",label:(0,a.jsxs)("div",{className:"m-0 d-flex justify-content-between",children:[(0,a.jsx)("span",{children:e("setMinTimeAccuracy")}),(0,a.jsx)(c.Tooltip,{title:e("setMinTimeAccuracyTip"),showArrow:!0,placement:"left",children:(0,a.jsx)(c.Button,{icon:!0,type:"tertiary",size:"sm",className:"ml-2 p-0",disableHoverEffect:!0,disableRipple:!0,children:(0,a.jsx)(te,{})})})]})}),(0,a.jsx)(o.SettingRow,{className:"mt-1",children:(0,a.jsx)(c.Select,{size:"sm","aria-label":e("setMinTimeAccuracy"),onChange:this.onAccuracyChanged,value:I,children:D.map(t=>(0,a.jsx)(c.Option,{value:t,active:t===I,children:e(t)},t))})})]}),(0,a.jsxs)(o.SettingSection,{role:"group",title:e("timeStep"),"aria-label":e("timeStep"),children:[(0,a.jsx)(o.SettingRow,{children:(0,a.jsxs)(c.Label,{check:!0,children:[(0,a.jsx)(c.Radio,{name:"time-step-radio",style:{cursor:"pointer"},className:"mr-2 align-text-bottom",checked:!!C,onChange:this.onStepChecked}),e("lengthOfOneStep")]})}),C&&(0,a.jsx)(o.SettingRow,{className:"time-step-details",children:(0,a.jsx)(g.DateUnitInput,{className:"w-100",min:1,step:1,value:C,units:D.filter(e=>w[e]>=w[I]),onChange:this.onStepLengthChanged})}),(0,a.jsx)(o.SettingRow,{children:(0,a.jsxs)(c.Label,{check:!0,children:[(0,a.jsx)(c.Radio,{name:"time-step-radio",style:{cursor:"pointer"},className:"mr-2 align-text-bottom",checked:O>0,onChange:this.onDividedChecked}),e("totalTimeDividedIntoEqualSteps")]})}),O&&(0,a.jsx)(o.SettingRow,{className:"time-step-details",label:(0,a.jsx)("div",{title:e("count"),css:p(118),children:e("count")}),children:(0,a.jsx)(c.NumericInput,{style:{width:"80px"},"aria-label":e("count"),size:"sm",min:2,showHandlers:!1,value:O,onAcceptValue:this.onDividedCountChanged})})]}),(0,a.jsxs)(o.SettingSection,{role:"group",title:e("timeDisplay"),"aria-label":e("timeDisplay"),children:[(0,a.jsx)(o.SettingRow,{children:(0,a.jsx)(c.Tooltip,{placement:"bottom",title:e("showCurrentFeaturesTip"),describeChild:!0,children:(0,a.jsxs)("label",{children:[(0,a.jsx)(c.Radio,{name:"time-display-radio",style:{cursor:"pointer"},className:"mr-2 align-text-bottom",checked:b===i.instant,onChange:()=>{this.onChange("timeDisplayStrategy",i.instant)}}),e("showCurrentFeatures")]})})}),(0,a.jsx)(o.SettingRow,{children:(0,a.jsx)(c.Tooltip,{placement:"bottom",title:e("showCurrentWindowTip"),describeChild:!0,children:(0,a.jsxs)("label",{children:[(0,a.jsx)(c.Radio,{name:"time-display-radio",style:{cursor:"pointer"},className:"mr-2 align-text-bottom",checked:b===i.current,onChange:()=>{this.onChange("timeDisplayStrategy",i.current)}}),e("showCurrentWindow")]})})}),(0,a.jsx)(o.SettingRow,{children:(0,a.jsx)(c.Tooltip,{placement:"bottom",title:e("showDataCumulativelyTip"),describeChild:!0,children:(0,a.jsxs)("label",{children:[(0,a.jsx)(c.Radio,{name:"time-display-radio",style:{cursor:"pointer"},className:"mr-2 align-text-bottom",checked:b===i.cumulatively,onChange:()=>{this.onChange("timeDisplayStrategy",i.cumulatively)}}),e("showDataCumulatively")]})})})]}),(0,a.jsx)(o.SettingSection,{title:e("defaultPlaySpeed"),children:(0,a.jsx)(o.SettingRow,{children:(0,a.jsx)(c.Select,{size:"sm",onChange:this.onSpeedChanged,value:A,"aria-label":e("defaultPlaySpeed"),children:[t.Slowest,t.Slow,t.Medium,t.Fast,t.Fastest].map(t=>(0,a.jsx)(c.Option,{value:t,active:t===A,children:e(t.toLowerCase())},t))})})})]})}}var ue=h(31027),de=h.n(ue),pe=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(i[a[s]]=e[a[s]])}return i};const ge=e=>{const t=window.SVG,{className:i}=e,n=pe(e,["className"]),o=(0,s.classNames)("jimu-icon jimu-icon-component",i);return t?(0,a.jsx)(t,Object.assign({className:o,src:de()},n)):(0,a.jsx)("svg",Object.assign({className:o},n))};var he=h(54337);class me extends s.React.PureComponent{constructor(){super(...arguments),this.onDataSourceCreated=e=>{this.props.onCreateDataSourceCreatedOrFailed(this.props.useDataSource.dataSourceId,e)},this.onCreateDataSourceFailed=()=>{this.props.onCreateDataSourceCreatedOrFailed(this.props.useDataSource.dataSourceId,null)}}render(){return(0,a.jsx)(s.DataSourceComponent,{useDataSource:this.props.useDataSource,onDataSourceCreated:this.onDataSourceCreated,onCreateDataSourceFailed:this.onCreateDataSourceFailed})}}var ye=function(e,t,i,a){return new(i||(i=Promise))(function(s,n){function o(e){try{l(a.next(e))}catch(e){n(e)}}function r(e){try{l(a.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(o,r)}l((a=a.apply(e,t||[])).next())})};const Se=Object.assign({},{selectDataSourceLabel1:"You can directly choose one web map, web scene, or multiple layers - including feature layers, map services, dynamic or tiled imagery layers, scene layers, and subtype group layers. However, the data must be temporal to work. If the layers are not time-aware, they will not appear in the select data panel.",selectDataSourceLabel2:"Alternatively, you can connect it directly with a map widget. The widget utilizes the data in this map widget. If there is no temporal data, the widget is unavailable to work.",addSourceByData:"Add a map, scene, or individual layers",addSourceByMapWidget:"Interact with a Map widget",noSupportedLayersInMapWidgetTip:"The selected Map widget does not contain any time-aware web map or web scene.",timeSetting:"Time settings",honorTimeSettings:"Synchronize with the time settings in the web map or scene",customTimeSettings:"Customize time settings",configureTime:"Configure time",classicStyle:"Classic",modernStyle:"Modern",applyFilteringByDefault:"Apply timeline filtering by default",enableTimeAnimation:"Enable time animation for",timeSpan:"Time span",overallTimeExtent:"Overall time extent",startTime:"Start time",endTime:"End time",timeWarning:"The start time should be no later than the end time.",setMinTimeAccuracy:"Set the minimum time accuracy",setMinTimeAccuracyTip:"The minimum time accuracy represents the minimum time interval that users are allowed to see at runtime. If you set the time step based on defined length, you can move the slider by each minimum time accuracy.",timeDisplay:"Time display",showCurrentFeatures:"Show current features",showCurrentFeaturesTip:"Only display data at the current time instance.",showCurrentWindow:"Show current window",showCurrentWindowTip:"Only display data in the current time window.",showDataCumulatively:"Show data cumulatively",showDataCumulativelyTip:"Progressively display all data as time passes.",timeStep:"Time step",lengthOfOneStep:"Length of one step",totalTimeDividedIntoEqualSteps:"Total time divided into equal steps",defaultPlaySpeed:"Default play speed",displayAccuracy:"Display accuracy",timezoneWarning:"The Timeline widget is not available to use under the data time zone. Please change to the device or a specific time zone first."},c.defaultMessages),De=(0,s.Immutable)([s.DataSourceTypes.WebMap,s.DataSourceTypes.MapService,s.DataSourceTypes.FeatureLayer,s.DataSourceTypes.ImageryLayer,s.DataSourceTypes.ImageryTileLayer,s.DataSourceTypes.SubtypeGroupLayer,s.DataSourceTypes.WebScene,s.DataSourceTypes.SceneLayer]);class Me extends s.React.PureComponent{constructor(t){super(t),this.i18nMessage=(e,t)=>this.props.intl.formatMessage({id:e,defaultMessage:Se[e]},t),this.updateConfigForOptions=(e,t)=>{const i={id:this.props.id,config:this.props.config.set(e,t)};this.props.onSettingChange(i)},this.dataSourceChange=e=>ye(this,void 0,void 0,function*(){var t;let i=e,a=this.state.dataSources,n=this.props.config.set("timeSettings",null),o=n.dataSourceType;if(e.length<(null===(t=this.props.useDataSources)||void 0===t?void 0:t.length))delete a[this.props.useDataSources[this.props.useDataSources.length-1].dataSourceId],this.setState({dataSources:a}),0===i.length&&(n=n.set("honorTimeSettings",!0));else{const t=e[e.length-1],r=yield this.dsManager.createDataSourceByUseDataSource((0,s.Immutable)(t));let l=!!k(r.type)&&n.honorTimeSettings;(r.type!==n.dataSourceType||k(r.type))&&(i=[t],o=r.type,a={},r.type!==n.dataSourceType&&k(r.type)&&(l=!0)),a[t.dataSourceId]=r,this.setState({dataSources:a}),n=n.set("honorTimeSettings",l).set("dataSourceType",o)}this.props.onSettingChange({id:this.props.id,config:n,useDataSources:i})}),this.getTimeSettings=()=>C(this.props.config.timeSettings,this.state.dataSources),this.setHonorTimeSettings=()=>{const{id:e,config:t,onSettingChange:a}=this.props;if(t.honorTimeSettings){const s=function(e,t=!1){var a,s,n;let o=null;const r=e[Object.keys(e).filter(t=>k(e[t].type))[0]],l=null===(n=null===(s=null===(a=null==r?void 0:r.getItemData())||void 0===a?void 0:a.widgets)||void 0===s?void 0:s.timeSlider)||void 0===n?void 0:n.properties;if(l){const{startTime:e,endTime:a,timeStopInterval:s,numberOfStops:n,thumbMovingRate:r,thumbCount:c}=l;let u=e,d=a;if(t){const t=E(e,a,!0);u=t.startTime,d=t.endTime}if(o={speed:b(r),layerList:null,startTime:{value:u},endTime:{value:d},timeDisplayStrategy:2===c?i.current:i.cumulatively},s){const e=function(e){switch(e){case"esriTimeUnitsMonths":return"month";case"esriTimeUnitsDays":return"day";case"esriTimeUnitsHours":return"hour";case"esriTimeUnitsMinutes":return"minute";default:return"year"}}(s.units);o.accuracy=e,o.stepLength={val:s.interval,unit:e}}else if(n){o.dividedCount=n;const e=Q(u,d);o.accuracy=e[0];const t=(d-u)/n;e.some(e=>t>=1e3*w[e]&&(o.accuracy=e,!0))}}return o}(this.state.dataSources);a({id:e,config:t.set("honorTimeSettings",!1).set("timeSettings",s)})}else a({id:e,config:t.set("honorTimeSettings",!0).set("timeSettings",null)})},this.enablePlayControl=(e,t)=>{this.props.onSettingChange({id:this.props.id,config:this.props.config.set("enablePlayControl",t).set("autoPlay",!1)})},this.enableApplyFilteringByDefault=(e,t)=>{this.props.onSettingChange({id:this.props.id,config:this.props.config.set("applyFilteringByDefault",t)})},this.enableDisplayAccuracy=(e,t)=>{this.props.onSettingChange({id:this.props.id,config:this.props.config.set("enableDisplayAccuracy",t).set("displayAccuracy","second")})},this.onTimeSettingPanel=()=>{this.setState({isTimePanelOpen:!this.state.isTimePanelOpen})},this.onCreateDataSourceCreatedOrFailed=(e,t)=>{this.setState(i=>{const a=Object.assign({},i.dataSources);if(a[e]=t,t&&t.getDataSourceJson().arcadeScript&&!t.supportTime()){delete a[e];const t=this.props.useDataSources.asMutable({deep:!0}).filter(t=>t.dataSourceId!==e);let i=this.props.config;0===t.length&&(i=i.set("timeSettings",null)),this.props.onSettingChange({id:this.props.id,config:i,useDataSources:t})}return{dataSources:a}})},this.isTimeExtentValid=()=>{let e=!1;return Object.keys(this.state.dataSources).some(t=>{var i;const a=this.state.dataSources[t];if((null==a?void 0:a.type)===s.DataSourceTypes.FeatureLayer){const t=null===(i=a.getTimeInfo())||void 0===i?void 0:i.timeExtent;if((null==t?void 0:t[0])&&(null==t?void 0:t[1])&&t[0]===t[1])return e=!0,!0}return!1}),e},this.hideDs=e=>{var t;let i=!1;const a=null===(t=this.dsManager)||void 0===t?void 0:t.getDataSource(e.id);if(U(a.type))i=!a.supportTime()||null!==s.dataSourceUtils.findMapServiceDataSource(a);else if(k(a.type)){i=0===(a.isDataSourceSet()&&a.getAllChildDataSources().filter(e=>(U(e.type)||e.type===s.DataSourceTypes.MapService)&&e.supportTime())).length}else i=!a.supportTime();return i},this.setSourceMode=e=>{const{id:t,config:i,onSettingChange:a}=this.props;a({id:t,useDataSources:[],config:i.set("addSourceByData",e).set("honorTimeSettings",!0).set("dataSourceType",s.DataSourceTypes.WebMap).set("timeSettings",null)})},this.onMapWidgetSelected=e=>{this.props.onSettingChange({id:this.props.id,config:this.props.config.set("addSourceByData",!1),useMapWidgetIds:e})},this.getSourceContent=(e,t,i)=>{var n,u;return(0,a.jsxs)(o.SettingSection,{role:"group",className:t?"border-0":"","aria-label":this.i18nMessage("source"),title:(0,a.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,a.jsx)("div",{children:this.i18nMessage("source")}),(0,a.jsx)(c.Tooltip,{showArrow:!0,placement:"right",title:(0,a.jsxs)("div",{css:s.css`
              width: 340px;
              margin: 0.75rem;
              font-size: 12px;
              line-height: 150%;
              font-style: normal;
            `,children:[this.i18nMessage("selectDataSourceLabel1"),(0,a.jsx)("div",{className:"mt-2",children:this.i18nMessage("selectDataSourceLabel2")})]}),children:(0,a.jsx)(c.Button,{icon:!0,type:"tertiary",size:"sm",className:"ml-2 p-0 jimu-outline-inside",disableHoverEffect:!0,disableRipple:!0,children:(0,a.jsx)(te,{})})})]}),children:[(0,a.jsx)(o.SettingRow,{children:(0,a.jsxs)(c.Label,{className:"source-label",check:!0,children:[(0,a.jsx)(c.Radio,{name:"time-setting-radio",style:{cursor:"pointer"},className:"mr-2 align-text-bottom",checked:e,onChange:e=>{this.setSourceMode(!0)}}),this.i18nMessage("addSourceByData")]})}),(0,a.jsx)(o.SettingRow,{className:"mt-2",children:(0,a.jsxs)(c.Label,{className:"source-label",check:!0,children:[(0,a.jsx)(c.Radio,{name:"time-setting-radio",style:{cursor:"pointer"},className:"mr-2 align-text-bottom",checked:!e,onChange:e=>{this.setSourceMode(!1)}}),this.i18nMessage("addSourceByMapWidget")]})}),(0,a.jsx)(o.SettingRow,{children:e?(0,a.jsx)(r.DataSourceSelector,{hideAllOptionOfTypeDropdown:!0,isMultiple:!0,"aria-describedby":"timeline-ds-label timeline-blank-msg",types:De,useDataSources:i||(0,s.Immutable)([]),mustUseDataSource:!0,disableDataView:!0,hideDataView:!0,hideDs:this.hideDs,closeDataSourceListOnChange:!1,onChange:this.dataSourceChange}):(0,a.jsx)(o.MapWidgetSelector,{onSelect:this.onMapWidgetSelected,useMapWidgetIds:this.props.useMapWidgetIds})}),(null===(n=this.props.useMapWidgetIds)||void 0===n?void 0:n.length)>0&&(0,a.jsxs)(o.SettingRow,{className:"mt-0",children:[(0,a.jsx)(l.JimuMapViewComponent,{useMapWidgetId:null===(u=this.props.useMapWidgetIds)||void 0===u?void 0:u[0],onViewsCreate:this.onJimuViewsCreate}),!e&&this.state.noSupportedLayersInMapWidget&&(0,a.jsx)(c.Alert,{closable:!1,className:"w-100 mt-4",form:"basic",text:this.i18nMessage("noSupportedLayersInMapWidgetTip"),type:"warning",withIcon:!1})]})]})},this.onJimuViewsCreate=e=>ye(this,void 0,void 0,function*(){const t=Object.values(e),i=[];for(let e=0;e<t.length;e++){const a=t[e];if(!a.dataSourceId||i.length)continue;const n={dataSourceId:a.dataSourceId,mainDataSourceId:a.dataSourceId},o=(yield this.dsManager.createDataSourceByUseDataSource((0,s.Immutable)(n))).getAllChildDataSources().filter(e=>(U(e.type)||e.type===s.DataSourceTypes.MapService)&&e.supportTime());i.push(...o)}this.setState({noSupportedLayersInMapWidget:0===i.length})}),this.getPlaceholderContent=e=>{const{useDataSources:t,useMapWidgetIds:i}=this.props;let s="";return s=e?(null==t?void 0:t.length)>0?"":"selectDataPlaceholder":(null==i?void 0:i.length)>0?"":"selectMapHint",s?(0,a.jsx)("div",{className:"empty-placeholder w-100 flex-grow-1 text-center",children:(0,a.jsxs)("div",{className:"empty-placeholder-inner",children:[(0,a.jsx)("div",{className:"empty-placeholder-icon",children:(0,a.jsx)(ge,{size:48})}),(0,a.jsx)("div",{className:"empty-placeholder-text",id:"timeline-blank-msg",children:this.i18nMessage(s)})]})}):null},this.getTimeSettingsContent=e=>{const{honorTimeSettings:t,dataSourceType:i}=this.props.config;return e?(0,a.jsxs)(o.SettingSection,{role:"group",title:this.i18nMessage("timeSetting"),"aria-label":this.i18nMessage("timeSetting"),children:[k(i)?(0,a.jsxs)(s.React.Fragment,{children:[(0,a.jsx)(o.SettingRow,{children:(0,a.jsxs)(c.Label,{className:"honor-label",check:!0,children:[(0,a.jsx)(c.Radio,{name:"time-setting-radio",style:{cursor:"pointer"},className:"mr-2 align-text-bottom",checked:t,onChange:this.setHonorTimeSettings}),this.i18nMessage("honorTimeSettings")]})}),(0,a.jsx)(o.SettingRow,{className:"mt-2",children:(0,a.jsxs)(c.Label,{className:"honor-label",check:!0,children:[(0,a.jsx)(c.Radio,{name:"time-setting-radio",style:{cursor:"pointer"},className:"mr-2 align-text-bottom",checked:!t,onChange:this.setHonorTimeSettings}),this.i18nMessage("customTimeSettings")]})})]}):(0,a.jsx)(o.SettingRow,{className:"mt-2",children:(0,a.jsx)(c.Label,{className:"honor-label",check:!0,children:this.i18nMessage("customTimeSettings")})}),!t&&(0,a.jsxs)(s.React.Fragment,{children:[(0,a.jsx)(o.SettingRow,{className:"mt-4",children:(0,a.jsx)(c.Button,{className:"w-100",ref:e=>{this.timeSettingsRef=e},onClick:this.onTimeSettingPanel,disabled:0===Object.keys(this.state.dataSources).length||this.isTimeExtentValid(),children:(0,a.jsx)("div",{className:"w-100 px-2 text-truncate",children:this.i18nMessage("configureTime")})})}),(0,a.jsx)(o.SettingRow,{children:this.isTimeExtentValid()&&(0,a.jsx)(c.Alert,{open:!0,type:"warning",tabIndex:0,className:"w-100",text:"The time extent is not ready. Cannot configure time settings at this time."})})]})]}):null},this.updateStyle=e=>{this.updateConfigForOptions("timeStyle",e),this.props.offPanel||(0,n.getAppConfigAction)().editWidgetProperty(this.props.id,"offPanel",!0).exec()},this.getStylesContent=()=>{const{timeStyle:t}=this.props.config;return(0,a.jsx)(o.SettingSection,{title:this.i18nMessage("style"),children:(0,a.jsx)(o.SettingRow,{className:"style-container",role:"radiogroup","aria-label":this.i18nMessage("style"),children:[e.Classic,e.Modern].map((e,i)=>{const s=e.toLowerCase();return(0,a.jsx)(c.Tooltip,{title:this.i18nMessage(`${s}Style`),placement:"bottom",children:(0,a.jsx)(c.Button,{icon:!0,size:"sm",type:"tertiary",role:"radio",active:e===t,"aria-checked":e===t,onClick:()=>{this.updateStyle(e)},children:(0,a.jsx)(c.Icon,{width:104,height:70,icon:h(15656)(`./style_${s}.svg`)})})},i)})})})},this.getAppearanceContent=()=>{const{theme2:e,config:t}=this.props,i=this.i18nMessage("appearance"),s=this.i18nMessage("foregroundColor"),n=this.i18nMessage("backgroundColor"),r=this.i18nMessage("sliderColor");return(0,a.jsxs)(o.SettingSection,{role:"group",title:i,"aria-label":i,children:[(0,a.jsx)(o.SettingRow,{label:s,children:(0,a.jsx)(he.ThemeColorPicker,{"aria-label":s,specificTheme:e,value:t.foregroundColor,onChange:e=>{this.updateConfigForOptions("foregroundColor",e)}})}),(0,a.jsx)(o.SettingRow,{label:n,children:(0,a.jsx)(he.ThemeColorPicker,{"aria-label":n,specificTheme:e,value:t.backgroundColor,onChange:e=>{this.updateConfigForOptions("backgroundColor",e)}})}),(0,a.jsx)(o.SettingRow,{label:r,children:(0,a.jsx)(he.ThemeColorPicker,{"aria-label":r,specificTheme:e,value:t.sliderColor,onChange:e=>{this.updateConfigForOptions("sliderColor",e)}})})]})},this.getOptionsContent=()=>{const{enablePlayControl:e,autoPlay:t,enableDisplayAccuracy:i=!1,displayAccuracy:s="second",applyFilteringByDefault:n=!0}=this.props.config,r=this.i18nMessage("options"),l=this.i18nMessage("enablePlayControl"),u=this.i18nMessage("applyFilteringByDefault"),d=this.i18nMessage("displayAccuracy");return(0,a.jsxs)(o.SettingSection,{role:"group",title:r,"aria-label":r,children:[(0,a.jsx)(o.SettingRow,{tag:"label",label:l,children:(0,a.jsx)(c.Switch,{checked:e,onChange:this.enablePlayControl})}),e&&(0,a.jsx)(o.SettingRow,{children:(0,a.jsxs)(c.Label,{className:"w-100 d-flex",children:[(0,a.jsx)(c.Checkbox,{style:{cursor:"pointer",marginTop:"2px"},checked:t,onChange:()=>{this.updateConfigForOptions("autoPlay",!t)}}),(0,a.jsx)("div",{className:"m-0 ml-2 flex-grow-1 autoplay-label",children:this.i18nMessage("autoPlay")})]})}),(0,a.jsx)(o.SettingRow,{tag:"label",label:u,children:(0,a.jsx)(c.Switch,{checked:n,onChange:this.enableApplyFilteringByDefault})}),(0,a.jsx)(o.SettingRow,{tag:"label",label:d,children:(0,a.jsx)(c.Switch,{checked:i,onChange:this.enableDisplayAccuracy})}),i&&(0,a.jsx)(o.SettingRow,{children:(0,a.jsx)(c.Select,{size:"sm","aria-label":d,value:s,onChange:e=>{this.updateConfigForOptions("displayAccuracy",e.target.value)},children:v.map(e=>(0,a.jsx)(c.Option,{value:e,active:e===s,children:this.i18nMessage(e)},e))})})]})},this.dsManager=s.DataSourceManager.getInstance(),this.state={isTimePanelOpen:!1,activeJimuMapViewId:"",dataSources:{},noSupportedLayersInMapWidget:!1}}componentDidUpdate(e,t){this.props.config.honorTimeSettings!==e.config.honorTimeSettings&&this.props.config.honorTimeSettings&&this.setState({isTimePanelOpen:!1})}render(){const{theme:e,config:t,useDataSources:i,intl:n,isTimeZoneData:r}=this.props,{honorTimeSettings:l,dataSourceType:u,addSourceByData:p=!window.isExpressBuilder}=t,g=this.getPlaceholderContent(p),h=null!==g;return(0,a.jsxs)("div",{className:(0,s.classNames)("jimu-widget-setting widget-setting-timeline d-flex flex-column",{"show-disabled-mask":r}),css:d(e),children:[null==i?void 0:i.map((e,t)=>(0,a.jsx)(me,{useDataSource:e,onCreateDataSourceCreatedOrFailed:this.onCreateDataSourceCreatedOrFailed},t)),this.getSourceContent(p,h,i),h?g:(0,a.jsxs)(s.React.Fragment,{children:[this.getTimeSettingsContent(p),this.getStylesContent(),this.getAppearanceContent(),this.getOptionsContent(),!l&&(0,a.jsx)(o.SidePopper,{position:"right",title:this.i18nMessage("configureTime"),isOpen:this.state.isTimePanelOpen,trigger:this.timeSettingsRef,toggle:this.onTimeSettingPanel,children:Object.keys(this.state.dataSources).length===i.length&&(0,a.jsx)(ce,Object.assign({intl:n,theme:e,i18nMessage:this.i18nMessage,dataSources:this.state.dataSources,dataSourceType:u},this.getTimeSettings(),{onChange:e=>{this.updateConfigForOptions("timeSettings",e)}}))})]}),r&&(0,a.jsxs)("div",{className:"disabled-mask w-100 h-100",children:[(0,a.jsx)("div",{className:"mask-bg"}),(0,a.jsx)(c.Alert,{form:"basic",type:"warning",className:"alert-container",children:this.i18nMessage("timezoneWarning")})]})]})}}const fe=s.ReactRedux.connect((e,t)=>{var i,a;return{isTimeZoneData:(null===(a=null===(i=e.appStateInBuilder.appConfig.attributes)||void 0===i?void 0:i.timezone)||void 0===a?void 0:a.type)===s.TimezoneConfig.Data}})(Me);function Te(e){h.p=e}})(),m})())}}});