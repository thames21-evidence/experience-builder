System.register(["jimu-core/emotion","jimu-core","jimu-for-builder","jimu-ui/advanced/setting-components","jimu-ui/advanced/resource-selector","jimu-ui","jimu-ui/advanced/style-setting-components","jimu-ui/basic/color-picker"],function(e,t){var s={},i={},n={},o={},r={},a={},l={},p={};return{setters:[function(e){s.jsx=e.jsx,s.jsxs=e.jsxs},function(e){i.Immutable=e.Immutable,i.OpenTypes=e.OpenTypes,i.React=e.React,i.classNames=e.classNames,i.css=e.css,i.defaultMessages=e.defaultMessages,i.expressionUtils=e.expressionUtils,i.getAppStore=e.getAppStore,i.lodash=e.lodash,i.polished=e.polished,i.urlUtils=e.urlUtils,i.uuidv1=e.uuidv1},function(e){n.builderAppSync=e.builderAppSync},function(e){o.CollapsableResetPanel=e.CollapsableResetPanel,o.LinkSelector=e.LinkSelector,o.SettingRow=e.SettingRow,o.SettingSection=e.SettingSection,o.SidePopper=e.SidePopper},function(e){r.IconPicker=e.IconPicker},function(e){a.Button=e.Button,a.CollapsablePanel=e.CollapsablePanel,a.DistanceUnits=e.DistanceUnits,a.Label=e.Label,a.Radio=e.Radio,a.Select=e.Select,a.Switch=e.Switch,a.Tab=e.Tab,a.Tabs=e.Tabs,a.TextInput=e.TextInput,a.UrlInput=e.UrlInput,a.defaultMessages=e.defaultMessages},function(e){l.BackgroundSetting=e.BackgroundSetting,l.BorderRadiusSetting=e.BorderRadiusSetting,l.BorderSetting=e.BorderSetting,l.BoxShadowSetting=e.BoxShadowSetting,l.InputUnit=e.InputUnit,l.TextStyle=e.TextStyle},function(e){p.ThemeColorPicker=e.ThemeColorPicker}],execute:function(){e((()=>{var e={4108:e=>{"use strict";e.exports=n},14321:e=>{"use strict";e.exports=a},15562:e=>{"use strict";e.exports=l},31795:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M14 8A6 6 0 1 1 2 8a6 6 0 0 1 12 0m1 0A7 7 0 1 1 1 8a7 7 0 0 1 14 0M5.172 5.879a.5.5 0 0 1 .707-.707L8 7.292l2.121-2.12a.5.5 0 1 1 .707.707L8.708 8l2.12 2.121a.5.5 0 1 1-.707.707L8 8.708l-2.121 2.12a.5.5 0 1 1-.707-.707L7.292 8z" clip-rule="evenodd"></path></svg>'},35809:e=>{"use strict";e.exports=r},54337:e=>{"use strict";e.exports=p},64811:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M14 8A6 6 0 1 1 2 8a6 6 0 0 1 12 0m1 0A7 7 0 1 1 1 8a7 7 0 0 1 14 0M7.5 4.5a.5.5 0 0 1 1 0v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3z" clip-rule="evenodd"></path></svg>'},67386:e=>{"use strict";e.exports=s},79244:e=>{"use strict";e.exports=i},79298:e=>{"use strict";e.exports=o}},t={};function g(s){var i=t[s];if(void 0!==i)return i.exports;var n=t[s]={exports:{}};return e[s](n,n.exports,g),n.exports}g.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return g.d(t,{a:t}),t},g.d=(e,t)=>{for(var s in t)g.o(t,s)&&!g.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},g.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),g.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},g.p="";var c={};return g.p=window.jimuConfig.baseUrl,(()=>{"use strict";g.r(c),g.d(c,{__set_webpack_public_path__:()=>R,default:()=>O});var e,t,s=g(67386),i=g(79244),n=g(4108),o=g(79298),r=g(35809),a=g(14321);!function(e){e.default="DEFAULT",e.iconOnly="ICON_ONLY",e.labelOnly="LABEL_ONLY",e.linkLabelOnly="LINK_LABEL_ONLY"}(e||(e={})),function(e){e.Left="LEFT",e.Right="RIGHT"}(t||(t={}));var l=g(15562);const p=e=>{if(!e)return!0;var t;return(null==(t=e.color)||""===t)&&m(e.image)};class d extends i.React.PureComponent{constructor(){super(...arguments),this.onBackgroundStyleChange=e=>{var t,s;let n=(0,i.Immutable)(null!==(s=null===(t=this.props.style)||void 0===t?void 0:t.background)&&void 0!==s?s:{});for(const t in e)switch(t){case"fillType":n.fillType!==e[t]&&(n=n.set("fillType",e[t]));break;case"color":n=n.set("color",e[t]);break;case"image":n=n.set("image",e[t])}this.props.onChange(this.getStyleSettings().set("background",n))},this.resetBackground=()=>{this.props.onChange(this.getStyleSettings().without("background"))},this.updateBorder=e=>{this.props.onChange(this.getStyleSettings().set("border",e).without("borderTop").without("borderLeft").without("borderRight").without("borderBottom"))},this.updateSideBorder=(e,t)=>{this.props.onChange(this.getStyleSettings().set(i.lodash.camelCase(`border-${e}`),t).without("border"))},this.resetBorder=()=>{this.props.onChange(this.getStyleSettings().without("border").without("borderTop").without("borderLeft").without("borderRight").without("borderBottom"))},this.updateRadius=e=>{e.number[0]||e.number[1]||e.number[2]||e.number[3]?this.props.onChange(this.getStyleSettings().set("borderRadius",e)):this.resetRadius()},this.resetRadius=()=>{this.props.onChange(this.getStyleSettings().without("borderRadius"))},this.updateShadow=e=>{this.props.onChange(this.getStyleSettings().set("boxShadow",e))}}getStyleSettings(){return this.props.style?this.props.style:(0,i.Immutable)({})}render(){const e=this.props.style||(0,i.Immutable)({}),{intl:t,disableBorderRadius:n}=this.props,r=t.formatMessage({id:"background",defaultMessage:a.defaultMessages.background}),g=t.formatMessage({id:"border",defaultMessage:a.defaultMessages.border}),c=t.formatMessage({id:"borderRadius",defaultMessage:a.defaultMessages.borderRadius}),d=t.formatMessage({id:"shadow",defaultMessage:a.defaultMessages.shadow}),h=m(e.border)&&m(e.borderTop)&&m(e.borderLeft)&&m(e.borderRight)&&m(e.borderBottom),u=m(e.borderRadius);return(0,s.jsxs)(i.React.Fragment,{children:[(0,s.jsx)(o.SettingRow,{children:(0,s.jsx)(o.CollapsableResetPanel,{label:r,isEmpty:p(e.background),bottomLine:!0,keepMount:!0,onReset:this.resetBackground,children:(0,s.jsx)(l.BackgroundSetting,{background:e.background,applyDefaultValue:!1,onChange:this.onBackgroundStyleChange})})}),(0,s.jsx)(o.SettingRow,{children:(0,s.jsx)(o.CollapsableResetPanel,{label:g,isEmpty:h,bottomLine:!0,keepMount:!0,onReset:this.resetBorder,children:(0,s.jsx)(l.BorderSetting,{value:e.border,top:e.borderTop,left:e.borderLeft,right:e.borderRight,bottom:e.borderBottom,applyDefaultValue:!1,onChange:this.updateBorder,onSideChange:this.updateSideBorder})})}),!n&&(0,s.jsx)(o.SettingRow,{children:(0,s.jsx)(o.CollapsableResetPanel,{label:c,isEmpty:u,bottomLine:!0,keepMount:!0,onReset:this.resetRadius,children:(0,s.jsx)(l.BorderRadiusSetting,{value:e.borderRadius,applyDefaultValue:!1,onChange:this.updateRadius})})}),(0,s.jsx)(o.SettingRow,{children:(0,s.jsx)(o.CollapsableResetPanel,{label:d,isEmpty:m(e.boxShadow),keepMount:!0,onReset:()=>{this.updateShadow(null)},children:(0,s.jsx)(l.BoxShadowSetting,{value:e.boxShadow,applyDefaultValue:!1,onChange:this.updateShadow})})})]})}}var h=g(54337);class u extends i.React.PureComponent{constructor(){super(...arguments),this.units=[a.DistanceUnits.PIXEL],this.onSizeChange=e=>{this.changeIcon("size",e.distance)},this.onColorChange=e=>{this.changeIcon("color",e)},this.changeIcon=(e,t)=>{const s=this.props.iconProps?this.props.iconProps.set(e,t):(0,i.Immutable)({[e]:t});this.props.onChange(s)}}render(){const e=this.props.iconProps||{},t=isNaN(e.size)?void 0:e.size+"px";return(0,s.jsxs)("div",{className:"w-100 d-flex justify-content-between icon-size-font-style-setting",children:[(0,s.jsx)(l.InputUnit,{className:"pr-1",units:this.units,value:t,applyDefaultValue:!1,placeholder:"##",onChange:this.onSizeChange}),(0,s.jsx)(h.ThemeColorPicker,{specificTheme:this.props.appTheme,value:e.color,onChange:this.onColorChange})]})}}class f extends i.React.PureComponent{constructor(){super(...arguments),this.changeText=(e,t)=>{const s=this.props.text?this.props.text.set(e,t):(0,i.Immutable)({[e]:t});this.props.onChange(s)}}render(){return(0,s.jsx)(l.TextStyle,Object.assign({},this.props.text,{applyDefaultValue:!1,onChange:this.changeText}))}}const m=e=>{if(!e)return!0;return!Object.keys(e).some(t=>null!==e[t]&&void 0!==e[t]&&""!==e[t])};class S extends i.React.PureComponent{constructor(){super(...arguments),this.onTextChange=e=>{const t=this.getStyleFromCustom().set("text",e);this.props.onChange(t)},this.onIconChange=e=>{const t=this.getStyleFromCustom().set("iconProps",e);this.props.onChange(t)},this.onCommonChange=e=>{this.props.onChange((0,i.Immutable)(e))},this.getStyleFromCustom=()=>this.props.style||(0,i.Immutable)({})}render(){const e=this.getStyleFromCustom(),{isTextSettingOpen:t,isIconSettingOpen:n,intl:r,appTheme:l,disableBorderRadius:p}=this.props,g=r.formatMessage({id:"text",defaultMessage:a.defaultMessages.text}),c=r.formatMessage({id:"icon",defaultMessage:i.defaultMessages.icon});return(0,s.jsxs)("div",{className:"advance-style-setting mt-4",children:[t&&(0,s.jsx)(o.SettingRow,{children:(0,s.jsx)(o.CollapsableResetPanel,{label:g,isEmpty:m(e.text),bottomLine:!0,onReset:()=>{this.onTextChange(null)},children:(0,s.jsx)(f,{appTheme:l,text:e.text,onChange:this.onTextChange})})}),n&&(0,s.jsx)(o.SettingRow,{children:(0,s.jsx)(o.CollapsableResetPanel,{label:c,isEmpty:m(e.iconProps),bottomLine:!0,onReset:()=>{this.onIconChange(null)},children:(0,s.jsx)(u,{appTheme:l,intl:r,iconProps:e.iconProps,onChange:this.onIconChange})})}),(0,s.jsx)(d,{intl:r,style:e,onChange:this.onCommonChange,disableBorderRadius:p})]})}}var C=g(64811),b=g.n(C),y=function(e,t){var s={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(s[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(s[i[n]]=e[i[n]])}return s};const v=e=>{const t=window.SVG,{className:n}=e,o=y(e,["className"]),r=(0,i.classNames)("jimu-icon jimu-icon-component",n);return t?(0,s.jsx)(t,Object.assign({className:r,src:b()},o)):(0,s.jsx)("svg",Object.assign({className:r},o))};var x=g(31795),L=g.n(x),w=function(e,t){var s={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(s[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(s[i[n]]=e[i[n]])}return s};const k=e=>{const t=window.SVG,{className:n}=e,o=w(e,["className"]),r=(0,i.classNames)("jimu-icon jimu-icon-component",n);return t?(0,s.jsx)(t,Object.assign({className:r,src:L()},o)):(0,s.jsx)("svg",Object.assign({className:r},o))},j=Object.assign({},{_widgetLabel:"Login",onSignInButtonClick:"On widget click:",redirectAfterLogin:"Redirect after signing in",redirectAfterLogout:"Redirect after signing out",loginType:"Sign-in page display",loginTypePopup:"Popup window",loginTypeRedirect:"Redirect to sign-in page",loginTypeNote:"Embedded apps can only sign in via popup",loginTypeNoteMore:"Because embedded apps can only sign in via popup, embedded apps will be forced to use popup sign-in",loginTypeNoteMore2:"If this app is embedded, only popups are allowed. If redirect is selected, popups will be enforced",postSignInSetting:"Post sign-in settings",afterLoginOptions:"After login options",afterLoginSimple:"Sign out directly",afterLoginAdvanced:"Enable user menu",allowLogoutAll:"Allow one-click logout from all resources",customizeOptions:"Customize options",userNameOption:"Show user name",userAccountAvatarOption:"Show user avatar",userProfileOption:'Show "My profile"',userSettingOption:'Show "My settings"',userExperiencesOption:'Show "My experiences"',resourceCredentialManagerOption:"Show restricted resources (if any)",addLinkOption:"Add a link"},i.defaultMessages,a.defaultMessages,a.defaultMessages);var I;!function(e){e.hover="HOVER",e.regular="REGULAR"}(I||(I={}));class O extends i.React.PureComponent{constructor(e){super(e),this.linkLabelInputRef=i.React.createRef(),this.linkUrlInputRef=i.React.createRef(),this.onSettingLinkConfirmForAfterLogin=e=>{if(!e)return;const t={id:this.props.id,config:this.props.savedConfig.setIn(["functionConfig","afterLoginLinkParam"],e)};this.props.onSettingChange(t)},this.onSettingLinkConfirmForAfterLogout=e=>{if(!e)return;const t={id:this.props.id,config:this.props.savedConfig.setIn(["functionConfig","afterLogoutLinkParam"],e)};this.props.onSettingChange(t)},this.onIconResultChange=e=>{let s;if(e){const i=this.props.savedConfig.getIn(["functionConfig","icon","position"])||t.Left;s=this.props.savedConfig.setIn(["functionConfig","icon","data"],e).setIn(["functionConfig","icon","position"],i)}else s=this.props.savedConfig.set("functionConfig",this.props.savedConfig.functionConfig.without("icon")).setIn(["styleConfig","customStyle","regular"],this.props.savedConfig.getIn(["styleConfig","customStyle","regular"],(0,i.Immutable)({})).without("iconProps")).setIn(["styleConfig","customStyle","hover"],this.props.savedConfig.getIn(["styleConfig","customStyle","hover"],(0,i.Immutable)({})).without("iconProps"));this.props.onSettingChange({id:this.props.id,config:s})},this.getWhetherHaveCustomStyle=e=>{const t=e?"regular":"hover";let s=this.props.config.getIn(["styleConfig","customStyle",t]);return s&&s.iconProps&&(s=s.without("iconProps")),!!(s&&Object.keys(s).length>0)},this.onRegularStyleChange=e=>{const t=this.props.savedConfig.setIn(["styleConfig","customStyle","regular"],e);this.props.onSettingChange({id:this.props.id,config:t})},this.onHoverStyleChange=e=>{const t=this.props.savedConfig.setIn(["styleConfig","customStyle","hover"],e);this.props.onSettingChange({id:this.props.id,config:t})},this.onDropdownRegularStyleChange=e=>{const t=this.props.savedConfig.setIn(["styleConfig","customStyle","dropdownRegular"],e);this.props.onSettingChange({id:this.props.id,config:t})},this.onDropdownHoverStyleChange=e=>{const t=this.props.savedConfig.setIn(["styleConfig","customStyle","dropdownHover"],e);this.props.onSettingChange({id:this.props.id,config:t})},this.onIconPositionChange=e=>{this.props.onSettingChange({id:this.props.id,config:this.props.savedConfig.setIn(["functionConfig","icon","position"],e.target.value)})},this.onAdvanceTabSelect=e=>{const t=e===I.hover;n.builderAppSync.publishChangeWidgetStatePropToApp({widgetId:this.props.id,propKey:"isConfiguringHover",value:t})},this.mergeUseDataSources=(e,t,s,n,o=!0)=>{const r=i.expressionUtils.generateFieldsForUseDataSourcesByExpressionParts(e&&e.parts,n),a=i.expressionUtils.generateFieldsForUseDataSourcesByExpressionParts(t&&t.parts,n),l=i.expressionUtils.generateFieldsForUseDataSourcesByExpressionParts(s&&s.parts,n);return this.mergeUseDataSourcesByDss(r,a,l,n,o)},this.mergeUseDataSourcesByDss=(e,t,s,n,o=!0)=>{const r=o?i.expressionUtils.getUseDataSourcesWithoutFields(n):n;let a=i.expressionUtils.mergeUseDataSources(r,e);return a=i.expressionUtils.mergeUseDataSources(a,t),a=i.expressionUtils.mergeUseDataSources(a,s),a},this.getIsDataSourceUsed=()=>!!this.props.useDataSourcesEnabled,this.showIconSetting=()=>!!this.props.config.getIn(["functionConfig","icon"]),this.toggleUseCustom=()=>{let e=this.props.savedConfig;e=e.setIn(["styleConfig","useCustom"],!e.getIn(["styleConfig","useCustom"])),e.getIn(["styleConfig","useCustom"])?(e=e.setIn(["styleConfig","customStyle","hover"],{}),e=e.setIn(["styleConfig","customStyle","regular"],{})):e=e.set("styleConfig",e.styleConfig.without("customStyle")),this.props.onSettingChange({id:this.props.id,config:e})},this.i18nMessage=(e,t)=>{const{intl:s}=this.props;return s?s.formatMessage({id:e,defaultMessage:j[e]||e}):""},this.onUsePopupLoginChange=e=>{this.props.onSettingChange({id:this.props.id,config:this.props.savedConfig.setIn(["functionConfig","usePopupLogin"],e)})},this.onLoginModeChange=e=>{this.props.onSettingChange({id:this.props.id,config:this.props.savedConfig.setIn(["functionConfig","loginOptions","useAdvanceLogin"],e)})},this.onLoginOptionsChange=(e,t)=>{this.props.onSettingChange({id:this.props.id,config:this.props.savedConfig.setIn(["functionConfig","loginOptions",e],t)})},this.getBasicContent=()=>{const e=this.props.config.functionConfig.usePopupLogin;return(0,s.jsxs)(o.SettingSection,{title:this.i18nMessage("loginType"),children:[(0,s.jsxs)(o.SettingRow,{children:[(0,s.jsx)(a.Radio,{id:"usePopupLogin",style:{cursor:"pointer"},name:"source-option",onChange:e=>{this.onUsePopupLoginChange(!0)},checked:e}),(0,s.jsx)(a.Label,{style:{cursor:"pointer"},for:"usePopupLogin",className:"ml-2",children:this.i18nMessage("loginTypePopup")})]}),(0,s.jsxs)(o.SettingRow,{children:[(0,s.jsx)(a.Radio,{id:"redirectLogin",style:{cursor:"pointer"},name:"source-option",onChange:e=>{this.onUsePopupLoginChange(!1)},checked:!e}),(0,s.jsx)(a.Label,{style:{cursor:"pointer"},for:"redirectLogin",className:"ml-2",children:this.i18nMessage("loginTypeRedirect")})]})]})},this.getIconPickerContent=()=>{var e,t;const n=(null===(e=this.props.config.functionConfig.icon)||void 0===e?void 0:e.data)||null,a=(null===(t=this.props.config.functionConfig)||void 0===t?void 0:t.customIcons)||null;return(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)(o.SettingRow,{className:"mb-5",label:this.props.intl.formatMessage({id:"icon",defaultMessage:i.defaultMessages.icon}),children:(0,s.jsx)(r.IconPicker,{icon:n,customIcons:a,configurableOption:"none",onChange:this.onIconResultChange,"aria-label":this.props.intl.formatMessage({id:"icon",defaultMessage:i.defaultMessages.icon}),setButtonUseColor:!1})}),!1]})},this.getAppearanceContent=()=>{const e=this.props.config.styleConfig&&this.props.config.styleConfig.customStyle,t=!0,i=this.showIconSetting();return(0,s.jsx)(o.SettingSection,{className:"px-14","aria-label":this.i18nMessage("Appearance"),children:(0,s.jsx)(a.CollapsablePanel,{className:"",level:1,type:"default",label:this.i18nMessage("Appearance"),role:"group",defaultIsOpen:!1,children:(0,s.jsxs)(a.Tabs,{className:"mt-4",fill:!0,type:"pills",onChange:this.onAdvanceTabSelect,defaultValue:I.regular,children:[(0,s.jsxs)(a.Tab,{className:"tab-label",id:I.regular,title:this.props.intl.formatMessage({id:"default",defaultMessage:a.defaultMessages.default}),children:[(0,s.jsx)(S,{intl:this.props.intl,appTheme:this.props.theme2,style:e&&e.regular,onChange:this.onRegularStyleChange,isTextSettingOpen:t,isIconSettingOpen:i}),(0,s.jsx)(o.SettingRow,{className:"dropdown-menu-label",label:this.props.intl.formatMessage({id:"abc",defaultMessage:"Dropdown menu"})}),(0,s.jsx)(S,{intl:this.props.intl,appTheme:this.props.theme2,disableBorderRadius:!0,style:e&&e.dropdownRegular,onChange:this.onDropdownRegularStyleChange,isTextSettingOpen:t,isIconSettingOpen:!1})]}),(0,s.jsxs)(a.Tab,{className:"tab-label",id:I.hover,title:this.props.intl.formatMessage({id:"hover",defaultMessage:a.defaultMessages.hover}),children:[(0,s.jsx)(S,{intl:this.props.intl,appTheme:this.props.theme2,style:e&&e.hover,onChange:this.onHoverStyleChange,isTextSettingOpen:t,isIconSettingOpen:i}),(0,s.jsx)(o.SettingRow,{className:"dropdown-menu-label",label:this.props.intl.formatMessage({id:"abc",defaultMessage:"Dropdown menu"})}),(0,s.jsx)(S,{intl:this.props.intl,appTheme:this.props.theme2,disableBorderRadius:!0,style:e&&e.dropdownHover,onChange:this.onDropdownHoverStyleChange,isTextSettingOpen:t,isIconSettingOpen:!1})]})]})})})},this.getSwitchOptionItem=(e,t,i)=>(0,s.jsx)(o.SettingRow,{className:"option-item switch-item",tag:"label",label:this.i18nMessage(e),children:(0,s.jsx)(a.Switch,{className:"option-switch",checked:i,"data-key":t,onChange:e=>{this.onLoginOptionsChange(t,e.target.checked)}})},t),this.getLinkOptionItemContent=()=>{const e=this.props.config.functionConfig.loginOptions.links;return(0,s.jsx)("div",{className:"link-option-content my-4",children:e.map(e=>(0,s.jsxs)(o.SettingRow,{className:"option-item link-item",tag:"label",label:e.label,children:[(0,s.jsx)(a.Button,{className:"delete-link-button d-none",type:"tertiary",size:"sm",icon:!1,onClick:()=>{this.onShowSidePanel(e)},children:(0,s.jsx)(k,{})}),(0,s.jsx)(a.Button,{className:"delete-link-button",type:"tertiary",size:"sm",icon:!1,onClick:()=>{this.onDeleteLinkInfo(e.id)},children:(0,s.jsx)(k,{className:"mx-0"})})]},e.id))})},this.onShowSidePanel=e=>{this.setState({showSidePanel:!0,currentLinkInfo:e})},this.onCloseSidePanel=()=>{this.setState({showSidePanel:!1,validLinkLabel:!1,validLinkUrl:!1,currentLinkInfo:null})},this.checkLinkLabel=e=>{var t;return e.trim()?(this.setState({validLinkLabel:!0}),(null===(t=this.state.currentLinkInfo)||void 0===t?void 0:t.url)&&this.setState({validLinkUrl:!0}),{valid:!0}):(this.setState({validLinkLabel:!1}),{valid:!1})},this.checkLinkUrl=e=>{var t;return e?(this.setState({validLinkUrl:!0}),(null===(t=this.state.currentLinkInfo)||void 0===t?void 0:t.label)&&this.setState({validLinkLabel:!0})):this.setState({validLinkUrl:!1}),{valid:!0}},this.onAddLinkInfo=()=>{var e;const t=this.linkLabelInputRef.current.value,s=this.linkUrlInputRef.current.value,n=(null===(e=this.props.savedConfig.getIn(["functionConfig","loginOptions","links"]))||void 0===e?void 0:e.asMutable({deep:!0}))||[];let o;this.state.currentLinkInfo?o=n.map(e=>this.state.currentLinkInfo.id===e.id?{id:e.id,label:t,url:s}:e):(n.push({id:(0,i.uuidv1)(),label:t,url:s}),o=n),this.props.onSettingChange({id:this.props.id,config:this.props.savedConfig.setIn(["functionConfig","loginOptions","links"],o)}),this.onCloseSidePanel()},this.onDeleteLinkInfo=e=>{var t;const s=((null===(t=this.props.savedConfig.getIn(["functionConfig","loginOptions","links"]))||void 0===t?void 0:t.asMutable({deep:!0}))||[]).filter(t=>t.id!==e);this.props.onSettingChange({id:this.props.id,config:this.props.savedConfig.setIn(["functionConfig","loginOptions","links"],s)})},this.getLinkOptionSideContent=()=>{var e,t;return(0,s.jsx)(o.SidePopper,{position:"right",title:this.i18nMessage("setLink"),isOpen:this.state.showSidePanel,toggle:this.onCloseSidePanel,trigger:null,backToFocusNode:null,children:(0,s.jsxs)(o.SettingSection,{children:[(0,s.jsx)("label",{className:"second-header",children:this.i18nMessage("label")}),(0,s.jsx)(a.TextInput,{className:"w-100 mb-4",placeholder:this.i18nMessage("label"),size:"sm","aria-label":this.i18nMessage("label"),checkValidityOnAccept:this.checkLinkLabel,defaultValue:null===(e=this.state.currentLinkInfo)||void 0===e?void 0:e.label,ref:this.linkLabelInputRef}),(0,s.jsx)("label",{className:"second-header",children:this.i18nMessage("url")}),(0,s.jsx)(a.UrlInput,{className:"mb-4",schemes:["https"],height:80,placeholder:this.i18nMessage("url"),checkValidityOnAccept:this.checkLinkUrl,"aria-label":this.i18nMessage("url"),defaultValue:null===(t=this.state.currentLinkInfo)||void 0===t?void 0:t.url,ref:this.linkUrlInputRef}),(0,s.jsx)(a.Button,{className:"add-url-button w-100 mt-2",type:"primary",size:"sm",icon:!1,disabled:!this.state.validLinkLabel||!this.state.validLinkUrl,onClick:this.onAddLinkInfo,children:this.i18nMessage("ok")})]})})},this.getLinkOptionContent=()=>(0,s.jsxs)("div",{children:[this.getLinkOptionItemContent(),(0,s.jsx)(o.SettingRow,{tag:"div",children:(0,s.jsxs)(a.Button,{className:"add-link-button",type:"tertiary",size:"sm",icon:!1,onClick:()=>{this.onShowSidePanel()},children:[(0,s.jsx)(v,{}),this.i18nMessage("addLinkOption")]})}),this.getLinkOptionSideContent()]}),this.getOptions=()=>{var e,t,i,n,o;return(0,s.jsxs)("div",{className:"mt-4",children:[this.getSwitchOptionItem("userNameOption","username",null===(e=this.props.config)||void 0===e?void 0:e.functionConfig.loginOptions.username),this.getSwitchOptionItem("userAccountAvatarOption","userAvatar",null===(t=this.props.config)||void 0===t?void 0:t.functionConfig.loginOptions.userAvatar),this.getSwitchOptionItem("userProfileOption","userProfile",null===(i=this.props.config)||void 0===i?void 0:i.functionConfig.loginOptions.userProfile),this.getSwitchOptionItem("userSettingOption","userSetting",null===(n=this.props.config)||void 0===n?void 0:n.functionConfig.loginOptions.userSetting),this.getSwitchOptionItem("resourceCredentialManagerOption","resourceCredentialList",null===(o=this.props.config)||void 0===o?void 0:o.functionConfig.loginOptions.resourceCredentialList),this.getLinkOptionContent()]})},this.getOptionsContent=()=>{const e=this.props.config.functionConfig.loginOptions.useAdvanceLogin,t=this.props.config.functionConfig.afterLoginLinkParam,n=t&&i.urlUtils.getHrefFromLinkTo(t,(0,i.getAppStore)().getState().queryObject),r=this.props.config.functionConfig.afterLogoutLinkParam,l=r&&i.urlUtils.getHrefFromLinkTo(r,(0,i.getAppStore)().getState().queryObject);return(0,s.jsxs)(o.SettingSection,{title:this.i18nMessage("postSignInSetting"),children:[(0,s.jsx)("label",{className:"second-header mt-4",children:this.i18nMessage("redirectAfterLogin")}),(0,s.jsx)(o.SettingRow,{role:"group","aria-label":this.props.intl.formatMessage({id:"setLink",defaultMessage:a.defaultMessages.setLink}),children:(0,s.jsx)(o.LinkSelector,{onSettingConfirm:this.onSettingLinkConfirmForAfterLogin,linkParam:t,widgetId:this.props.id})}),n&&(0,s.jsx)(o.SettingRow,{className:"redirect-url mt-1",label:`${window.location.origin}${n}`,truncateLabel:!0}),(0,s.jsx)("label",{className:"second-header mt-4",children:this.i18nMessage("redirectAfterLogout")}),(0,s.jsx)(o.SettingRow,{role:"group","aria-label":this.props.intl.formatMessage({id:"setLink",defaultMessage:a.defaultMessages.setLink}),children:(0,s.jsx)(o.LinkSelector,{onSettingConfirm:this.onSettingLinkConfirmForAfterLogout,openTypes:(0,i.Immutable)([i.OpenTypes.CurrentWindow]),linkParam:r,widgetId:this.props.id})}),l&&(0,s.jsx)(o.SettingRow,{className:"redirect-url mt-1",label:`${window.location.origin}${l}`,truncateLabel:!0}),(0,s.jsx)(o.SettingRow,{className:"mt-6",label:this.i18nMessage("onSignInButtonClick"),truncateLabel:!0}),(0,s.jsxs)(o.SettingRow,{children:[(0,s.jsx)(a.Radio,{id:"simpleLogin",style:{cursor:"pointer"},name:"source-option",onChange:e=>{this.onLoginModeChange(!1)},checked:!e}),(0,s.jsx)(a.Label,{style:{cursor:"pointer"},for:"simpleLogin",className:"ml-2",children:this.i18nMessage("afterLoginSimple")})]}),(0,s.jsxs)(o.SettingRow,{children:[(0,s.jsx)(a.Radio,{id:"advanceLogin",style:{cursor:"pointer"},name:"source-option",onChange:e=>{this.onLoginModeChange(!0)},checked:e}),(0,s.jsx)(a.Label,{style:{cursor:"pointer"},for:"advanceLogin",className:"ml-2",children:this.i18nMessage("afterLoginAdvanced")})]}),e&&this.getOptions()]})},this.state={showSidePanel:!1,currentLinkInfo:null,validLinkLabel:!1,validLinkUrl:!1}}static getFullConfig(t){return(0,i.Immutable)({functionConfig:{usePopupLogin:!0,quickStyleMode:e.default,loginOptions:{useAdvanceLogin:!1,username:!0,userAvatar:!0,userProfile:!0,userSetting:!0,resourceCredentialList:!1,links:[]}},styleConfig:{themeStyle:{quickStyleType:"default"}}}).merge(t,{deep:!0})}componentWillUnmount(){n.builderAppSync.publishChangeWidgetStatePropToApp({widgetId:this.props.id,propKey:"isConfiguringHover",value:!1})}render(){return(0,s.jsx)("div",{css:(this.props.theme,i.css`
    .login-widget-setting {
      overflow-y: auto;
      font-size: 13px;
      font-weight: lighter;
      .second-header {
      }
      .collapse-label{
      }
      .option-item {
        cursor: pointer;
      }
      .font-size-container{
        width: ${i.polished.rem(82)};
      }
      .advance-style-setting{
        padding: 0 ${i.polished.rem(4)};
      }
      .px-14{
        padding-left: ${i.polished.rem(14)} !important;
        padding-right: ${i.polished.rem(14)} !important;
      }
      .advance-collapse {
        height: 25px;
      }
      .dropdown-menu-label {
        margin-top: 20px;
        label {
        }
      }
    }
    .tab-label{
      font-weight: 500 !important;
    }

  `),children:(0,s.jsx)("div",{className:"jimu-widget login-widget-setting",children:(0,s.jsxs)("div",{children:[this.getBasicContent(),this.getOptionsContent(),this.getAppearanceContent()]})})})}}function R(e){g.p=e}})(),c})())}}});