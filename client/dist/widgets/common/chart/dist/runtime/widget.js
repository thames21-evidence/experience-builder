System.register(["jimu-core/emotion","jimu-core","jimu-ui/advanced/chart","jimu-theme","jimu-ui"],function(e,t){var i={},r={},l={},o={},a={};return{setters:[function(e){i.Fragment=e.Fragment,i.jsx=e.jsx,i.jsxs=e.jsxs},function(e){r.CONSTANTS=e.CONSTANTS,r.DataRecordsSelectionChangeMessage=e.DataRecordsSelectionChangeMessage,r.DataSourceComponent=e.DataSourceComponent,r.DataSourceManager=e.DataSourceManager,r.DataSourceStatus=e.DataSourceStatus,r.DataSourceTypes=e.DataSourceTypes,r.EsriFieldType=e.EsriFieldType,r.Immutable=e.Immutable,r.JimuFieldType=e.JimuFieldType,r.MessageManager=e.MessageManager,r.React=e.React,r.ReactRedux=e.ReactRedux,r.StatisticType=e.StatisticType,r.WidgetVersionManager=e.WidgetVersionManager,r.appActions=e.appActions,r.appConfigUtils=e.appConfigUtils,r.classNames=e.classNames,r.css=e.css,r.dataSourceUtils=e.dataSourceUtils,r.defaultMessages=e.defaultMessages,r.getAppStore=e.getAppStore,r.hooks=e.hooks,r.lodash=e.lodash,r.utils=e.utils},function(e){l.Chart=e.Chart,l.getSeriesType=e.getSeriesType,l.getSplitByField=e.getSplitByField,l.getSplitByValue=e.getSplitByValue},function(e){o.styled=e.styled,o.utils=e.utils},function(e){a.Alert=e.Alert,a.Button=e.Button,a.ButtonGroup=e.ButtonGroup,a.DataActionList=e.DataActionList,a.DataActionListStyle=e.DataActionListStyle,a.Loading=e.Loading,a.LoadingType=e.LoadingType,a.Paper=e.Paper,a.Tooltip=e.Tooltip,a.WidgetPlaceholder=e.WidgetPlaceholder,a.defaultMessages=e.defaultMessages}],execute:function(){e((()=>{var e={1888:e=>{"use strict";e.exports=o},9268:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#A8A8A8" fill-rule="evenodd" d="M200 353.81c40.414 0 77.188-15.587 104.637-41.077l-45.849-45.848c-15.683 13.796-36.258 22.163-58.788 22.163-49.18 0-89.048-39.868-89.048-89.048 0-46.451 35.567-84.595 80.953-88.685V46.4C110.721 50.61 46.191 117.769 46.191 200c0 84.947 68.862 153.81 153.809 153.81m153.6-145.715c-1.842 35.533-15.744 67.876-37.69 93.014l-45.977-45.977c10.401-13.176 17.159-29.361 18.752-47.037zm.209-7.956.001-.139-.001-.139zm-.209-8.234C349.53 113.402 286.598 50.471 208.095 46.4v64.915c42.72 3.85 76.74 37.87 80.59 80.59zm-80.743 7.944c-.081-40.168-32.669-72.706-72.857-72.706-40.238 0-72.857 32.619-72.857 72.857s32.619 72.857 72.857 72.857c40.188 0 72.776-32.538 72.857-72.706zM200 370c93.888 0 170-76.112 170-170S293.888 30 200 30 30 106.112 30 200s76.112 170 170 170" clip-rule="evenodd"></path></svg>'},11022:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#A8A8A8" d="M24 83v-8h16v8zM24 144v-8h16v8zM24 204v-8h16v8zM24 266v-8h16v8zM24 327v-8h16v8zM135 376v-8h24v8zM85 376v-8h24v8zM33 376v-8h24v8zM185 376v-8h24v8zM237 376v-8h24v8zM289 376v-8h24v8zM341 376v-8h24v8z"></path><path fill="#A8A8A8" fill-rule="evenodd" d="M376 354.501v.999h-24.5v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-22h.998v327.001z" clip-rule="evenodd"></path><path fill="#A8A8A8" fill-rule="evenodd" d="m299.88 232.358 50.866 28.707-.492.87-50.134-28.293-51.107 62.129-51.938-58.93-49.898 82.331-51.046-28.526-50.736 65.161-.79-.614 51.264-65.839 50.954 28.474 50.102-82.669 52.062 59.07z" clip-rule="evenodd"></path><circle cx="96" cy="290" r="3" fill="#A8A8A8"></circle><circle cx="45" cy="355" r="3" fill="#A8A8A8"></circle><circle cx="147" cy="318" r="3" fill="#A8A8A8"></circle><circle cx="197" cy="236" r="3" fill="#A8A8A8"></circle><circle cx="249" cy="295" r="3" fill="#A8A8A8"></circle><circle cx="300" cy="234" r="3" fill="#A8A8A8"></circle><circle cx="351" cy="262" r="3" fill="#A8A8A8"></circle><path fill="#A8A8A8" fill-rule="evenodd" d="m196.827 194.391 52.206 21.083 50.998-13.5 50.653 20.061-.368.93-50.347-19.94-51.002 13.501-51.794-20.917-50.083 68.113-50.937-41.948-50.712 94.961-.882-.471 51.288-96.038 51.063 42.052z" clip-rule="evenodd"></path><circle cx="96" cy="221" r="3" fill="#A8A8A8"></circle><circle cx="45" cy="316" r="3" fill="#A8A8A8"></circle><circle cx="147" cy="262" r="3" fill="#A8A8A8"></circle><circle cx="197" cy="195" r="3" fill="#A8A8A8"></circle><circle cx="249" cy="216" r="3" fill="#A8A8A8"></circle><circle cx="300" cy="202" r="3" fill="#A8A8A8"></circle><circle cx="351" cy="223" r="3" fill="#A8A8A8"></circle><path fill="#A8A8A8" fill-rule="evenodd" d="m350.81 117.892-50.581 40.065-51.304 13.58-51.791-30.875-50.044 68.06-50.983-41.986-50.693 75.044-.828-.56 51.308-75.955 51.016 42.013 49.956-67.94 52.209 31.125 50.696-13.42 50.419-39.935z" clip-rule="evenodd"></path><circle cx="96" cy="166" r="3" fill="#A8A8A8"></circle><circle cx="45" cy="241" r="3" fill="#A8A8A8"></circle><circle cx="147" cy="207" r="3" fill="#A8A8A8"></circle><circle cx="197" cy="140" r="3" fill="#A8A8A8"></circle><circle cx="249" cy="171" r="3" fill="#A8A8A8"></circle><circle cx="300" cy="157" r="3" fill="#A8A8A8"></circle><circle cx="351" cy="118" r="3" fill="#A8A8A8"></circle></svg>'},11030:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><g fill="#000" clip-path="url(#clip0_1625_665)"><path d="M24 83v-8h16v8zM24 144v-8h16v8zM24 204v-8h16v8zM24 266v-8h16v8zM24 327v-8h16v8zM135 376v-8h24v8zM85 376v-8h24v8zM33 376v-8h24v8zM185 376v-8h24v8zM237 376v-8h24v8zM289 376v-8h24v8zM341 376v-8h24v8z"></path><path fill-rule="evenodd" d="M376 354.001V355h-24.5v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4V50h-4v-1h4V27h.998v327.001z" clip-rule="evenodd"></path><path d="M197 88h28v14.518c-1.189-1.824-2.373-3.297-3.596-4.47C217.929 94.719 214.353 94 210.5 94c-4.416 0-8.372.968-12.177 4.463q-.667.613-1.323 1.326z"></path><path d="M217.252 102.38c2.15 2.06 4.569 5.915 7.748 13.241V355h-28V110.243c1.978-3.525 3.724-5.839 5.382-7.362 2.422-2.224 4.783-2.881 8.118-2.881 2.897 0 4.758.469 6.752 2.38M139 185h23.469c-2.319 6.846-4.803 14.204-7.472 22.11l-2.339 6.93c-4.225 12.512-8.819 23.915-13.658 34.3zM158.342 215.96c-5.845 17.31-12.397 32.564-19.342 45.985V355h28V190.329a31168 31168 0 0 0-6.479 19.176l-.001.003zM254 200.519c-4.784-14.9-8.89-27.635-12.463-38.519H226v193h28zM247.852 162A4705 4705 0 0 1 254 180.929V162zM255 229h8.497c4.771 12.412 11.402 26.515 19.503 40.651V355h-28zM269.937 229c3.476 8.784 7.878 18.388 13.063 28.208V229zM284 279h4.576a285 285 0 0 0 11.937 17.746A238 238 0 0 0 312 311.29V355h-28zM305.359 293.208a242 242 0 0 0 6.641 8.683V279h-16.335a275 275 0 0 0 9.694 14.208M138 309h-28v46h28zM109 338H81v17h28zM196 214h-28v141h28zM313 343h28v12h-28z"></path><path d="m158.214 208.523.006-.018c16.331-48.374 25.668-76.032 32.719-91.675 3.685-8.177 6.718-13.003 9.752-15.79 2.998-2.753 6.024-3.54 9.809-3.54 3.295 0 5.871.573 8.482 3.076 2.655 2.544 5.374 7.109 8.809 15.211 6.821 16.084 16.359 45.825 33.898 100.515l.001.002.348 1.084c6.953 21.681 22.476 53.045 42.705 80.432 20.215 27.367 45.212 50.876 71.148 56.668l.218-.976c-25.564-5.708-50.375-28.957-70.561-56.286-20.171-27.307-35.641-58.575-42.558-80.143l-.385-1.2c-17.507-54.588-27.055-84.36-33.893-100.486-3.441-8.115-6.224-12.846-9.038-15.543-2.858-2.74-5.719-3.354-9.174-3.354-3.965 0-7.257.838-10.485 3.804-3.192 2.932-6.293 7.918-9.988 16.116-7.071 15.688-16.422 43.386-32.726 91.684l-2.275 6.736c-31.261 92.582-87.728 130.231-110.202 138.692l.352.936c22.77-8.573 79.446-46.458 110.798-139.308z"></path></g><defs><clipPath id="clip0_1625_665"><path fill="#fff" d="M24 27h352v349H24z"></path></clipPath></defs></svg>'},14321:e=>{"use strict";e.exports=a},35374:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#000" d="M24 107v-8h16v8zM24 56v-8h16v8zM24 158v-8h16v8zM24 209v-8h16v8zM24 261v-8h16v8zM24 311v-8h16v8zM24 362v-8h16v8zM128 376v-8h24v8zM72 376v-8h24v8zM189 376v-8h24v8zM250 376v-8h24v8zM311 376v-8h24v8zM58 77h12v281H58zM73 144.527h12V358H73zM88 198.984h12V358H88zM119 244h12v114h-12zM134 271.395h12V358h-12zM149 293.488h12V358h-12zM180 208h12v150h-12zM195 244.046h12v113.953h-12zM210 273.116h12V358h-12zM241 158h12v200h-12zM256 206.062h12V358h-12zM271 244.822h12V358h-12zM302 229h12v129h-12zM317 260h12v98h-12zM332 285h12v73h-12z"></path><path fill="#000" fill-rule="evenodd" d="M49 24h-1v28h-4v1h4v50h-4v1h4v50h-4v1h4v50h-4v1h4v50h-4v1h4v50h-4v1h4v50h-4v1h4v4h1v-4h60v4h1v-4h60v4h1v-4h60v4h1v-4h60v4h1v-4h60v4h1v-4h22v-.998H49z" clip-rule="evenodd"></path></svg>'},35496:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#A8A8A8" d="M24 83v-8h16v8zM24 144v-8h16v8zM24 204v-8h16v8zM24 266v-8h16v8zM24 327v-8h16v8zM135 376v-8h24v8zM85 376v-8h24v8zM33 376v-8h24v8zM185 376v-8h24v8zM237 376v-8h24v8zM289 376v-8h24v8zM341 376v-8h24v8z"></path><path fill="#A8A8A8" fill-rule="evenodd" d="M376 354.501v.999h-24.5v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-22h.998v327.001z" clip-rule="evenodd"></path><path fill="#A8A8A8" fill-rule="evenodd" d="m118.545 220.032-2.213-1.235a34 34 0 0 0-38.159 3.428L45 249.5v30.214c3.984-4.618 8.656-9.198 13.805-12.99 10.634-7.83 23.84-12.646 37.238-6.496 29.564 13.57 53.981 5.763 68.251-7.556 7.503-7.003 18.521-16.771 31.068-22.333 12.659-5.611 27.171-7.046 41.113 3.142 12.934 9.452 27.929 18.766 42.113 23.392 14.211 4.636 26.946 4.382 36.213-4.207 10.919-10.12 24.971-18.293 36.199-23.742V179l-25.766-14.517c-14.358-8.09-32.45-4.718-42.93 8.001l-9.791 11.883c-12.163 14.762-34.644 15.145-47.303.806-13.874-15.716-39.007-13.477-49.885 4.443l-11.151 18.367c-9.492 15.637-29.654 20.961-45.629 12.049M45 330.81v-43.161c4.46-5.852 10.235-12.086 16.77-16.899 9.974-7.344 21.185-11.028 32.187-5.978 31.436 14.43 58.019 6.236 73.749-8.444 7.497-6.997 17.979-16.229 29.682-21.418 11.591-5.138 24.079-6.203 36.137 2.608 13.066 9.549 28.571 19.235 43.512 24.109 14.914 4.864 29.929 5.118 41.162-5.294 9.791-9.074 22.321-16.579 32.801-21.834v58.189c-20.957 1.026-60.451 6.532-94.59 23.062-11.627 5.63-20.788 7.612-28.256 7.407-7.43-.204-13.377-2.577-18.596-5.998-5.075-3.326-9.417-7.604-13.815-11.936l-.544-.536c-4.499-4.429-9.142-8.934-14.494-11.877-2.913-1.603-5.764-2.165-8.579-1.826-2.765.333-5.3 1.511-7.66 3.058-2.354 1.542-4.663 3.539-6.965 5.644-.841.769-1.675 1.547-2.515 2.33l-.002.002c-1.514 1.412-3.05 2.845-4.697 4.292-5.061 4.447-10.666 8.565-17.579 10.7-6.854 2.116-15.212 2.347-25.886-1.371-18.507-6.446-34.021-3.557-45.85 2.755C54.5 321.849 49.149 326.317 45 330.81m0 7.804V354.5h306v-56.807c-20.516 1.032-59.158 6.456-92.41 22.557-12.123 5.87-22.087 8.138-30.573 7.905-8.522-.233-15.357-2.984-21.2-6.814-5.502-3.606-10.165-8.202-14.477-12.452l-.181-.178-.468-.461c-4.578-4.508-8.748-8.503-13.396-11.059-2.087-1.148-3.893-1.445-5.571-1.243-1.73.208-3.527.971-5.518 2.276-1.997 1.309-4.059 3.074-6.33 5.151-.768.702-1.568 1.448-2.394 2.218l-.002.002c-1.554 1.449-3.198 2.982-4.892 4.47-5.251 4.615-11.49 9.278-19.405 11.722-7.974 2.462-17.429 2.606-29.005-1.426-17.093-5.954-31.162-3.26-41.85 2.445-8.095 4.319-14.281 10.386-18.328 15.808" clip-rule="evenodd"></path></svg>'},37543:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#000" d="M326 58v12H45V58zM258.473 73v12H45V73zM204.015 88v12H45V88zM159 119v12H45v-12zM131.605 134v12H45v-12zM109.512 149v12H45v-12zM195 180v12H45v-12zM158.953 195v12H45v-12zM129.884 210v12H45v-12zM245 241v12H45v-12zM196.938 256v12H45v-12zM158.178 271v12H45v-12zM174 302v12H45v-12zM143 317v12H45v-12zM118 332v12H45v-12zM24 83v-8h16v8zM24 144v-8h16v8zM24 204v-8h16v8zM24 266v-8h16v8zM24 327v-8h16v8zM135 376v-8h24v8zM85 376v-8h24v8zM33 376v-8h24v8zM185 376v-8h24v8zM237 376v-8h24v8zM289 376v-8h24v8zM341 376v-8h24v8z"></path><path fill="#000" fill-rule="evenodd" d="M376 354.501v.999h-75.5v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-22h.998v327.001zm-24.5.999v4h-1v-4z" clip-rule="evenodd"></path></svg>'},41389:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0m-1.27 4.936a6.5 6.5 0 1 1 .707-.707l4.136 4.137a.5.5 0 1 1-.707.707zM7 6h3v1H7v3H6V7H3V6h3V3h1z" clip-rule="evenodd"></path></svg>'},42171:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#000" d="M132.5 67v20h-87V67zM195.5 67v20h-61V67zM243.5 67v20h-46V67zM188.5 130v20h-143v-20zM259.5 130v20h-69v-20zM325.5 130v20h-64v-20zM158.5 191v20h-113v-20zM234.5 191v20h-74v-20zM282.5 191v20h-46v-20zM114.5 253v20h-69v-20zM158.5 253v20h-42v-20zM197.5 253v20h-37v-20zM100.5 315v20h-55v-20zM163.5 315v20h-61v-20zM228.5 315v20h-63v-20zM24 79v-8h16v8zM24 140v-8h16v8zM24 200v-8h16v8zM24 262v-8h16v8zM24 323v-8h16v8zM135 372v-8h24v8zM85 372v-8h24v8zM33 372v-8h24v8zM185 372v-8h24v8zM237 372v-8h24v8zM289 372v-8h24v8zM341 372v-8h24v8z"></path><path fill="#000" fill-rule="evenodd" d="M376 350.501v.999h-75.5v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-22h.998v327.001zm-24.5.999v4h-1v-4z" clip-rule="evenodd"></path></svg>'},46703:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#000" d="M24 107v-8h16v8zM24 56v-8h16v8zM24 158v-8h16v8zM24 209v-8h16v8zM24 261v-8h16v8zM24 311v-8h16v8zM24 362v-8h16v8zM128 376v-8h24v8zM68 376v-8h24v8zM189 376v-8h24v8zM250 376v-8h24v8zM311 376v-8h24v8zM70 271h20v87H70zM70 208h20v61H70zM70 72h20v134H70zM130 215h20v143h-20zM130 117h20v96h-20zM130 72h20v43h-20zM190 245h20v113h-20zM190 169h20v74h-20zM190 72h20v95h-20zM252 289h20v69h-20zM252 131h20v156h-20zM252 72h20v57h-20zM313 303h20v55h-20zM313 219h20v82h-20zM313 72h20v145h-20z"></path><path fill="#000" fill-rule="evenodd" d="M49 24h-1v28h-4v1h4v50h-4v1h4v50h-4v1h4v50h-4v1h4v50h-4v1h4v50h-4v1h4v50h-4v1h4v4h1v-4h60v4h1v-4h60v4h1v-4h60v4h1v-4h60v4h1v-4h60v4h1v-4h22v-.998H49z" clip-rule="evenodd"></path></svg>'},52953:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#000" d="M197.5 75v-8h5v8h-2.499c13.367 0 26.637 1.634 39.523 4.834l2.06-7.689 4.83 1.295-2.056 7.673a164 164 0 0 1 34.592 14.141l3.885-6.729 4.33 2.5-3.87 6.703a164 164 0 0 1 29.87 22.572l5.276-5.276 3.535 3.535-5.245 5.246a164 164 0 0 1 23.134 29.557l6.11-3.527 2.5 4.33-6.064 3.501a164 164 0 0 1 14.796 34.623l6.354-1.703 1.294 4.83-6.297 1.687a164.057 164.057 0 0 1 5.38 37.397H370v5h-6.001a164 164 0 0 1-4.498 37.65l5.354 1.435-1.295 4.829-5.296-1.419q-.376 1.383-.776 2.76l-4.725-1.372a159.07 159.07 0 0 0-25.549-139.897A159.07 159.07 0 0 0 200.001 79.92a159.09 159.09 0 0 0-127.214 63.564 159.08 159.08 0 0 0-25.55 139.897l-4.725 1.373a165 165 0 0 1-.776-2.759l-5.296 1.419-1.294-4.83 5.353-1.434a164 164 0 0 1-4.498-37.65h-6v-5h6.06a164 164 0 0 1 5.381-37.397l-6.296-1.687 1.294-4.83 6.353 1.702a164 164 0 0 1 14.797-34.622l-6.064-3.501 2.5-4.33 6.11 3.527a164 164 0 0 1 23.133-29.557l-5.245-5.245 3.535-3.536 5.276 5.276a164 164 0 0 1 29.869-22.572l-3.869-6.702 4.33-2.5 3.885 6.728a164.014 164.014 0 0 1 34.592-14.141l-2.056-7.673 4.83-1.294 2.06 7.688A164 164 0 0 1 199.999 75z"></path><path fill="#000" d="M210 237c0 5.523-4.477 10-10 10s-10-4.477-10-10 4.477-10 10-10a10 10 0 0 1 3.793.744L290.5 146l-81.009 87.842c.33.993.509 2.055.509 3.158M14 274h19v9H14zM39 178H20v9h19zM90 78h19v9H90zM387 274h-19v9h19zM360 178h19v9h-19zM311 78h-19v9h19zM234 260h-67v24h67z"></path></svg>'},55099:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#A8A8A8" d="M24 83v-8h16v8zM24 144v-8h16v8zM24 204v-8h16v8zM24 266v-8h16v8zM24 327v-8h16v8zM135 376v-8h24v8zM85 376v-8h24v8zM33 376v-8h24v8zM185 376v-8h24v8zM237 376v-8h24v8zM289 376v-8h24v8zM341 376v-8h24v8z"></path><path fill="#A8A8A8" fill-rule="evenodd" d="M376 354.501v.999h-24.5v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-22h.998v327.001z" clip-rule="evenodd"></path><path fill="#A8A8A8" fill-rule="evenodd" d="m147.167 236-51.083-28.5L45 249.5v44.327l50.736-46.4 50.993 28.948 50.248-51.169 51.871 37.843 50.53-64.932L351 233.016V179l-50.583-28.5-51.083 62-52.085-59zM45 342.974v-42.366l51.43-47.035 51.175 29.052 49.915-50.83 52.3 38.156 50.635-65.068L351 239.055v42.443l-51.842-19.97-50.382 59.265-51.552-29.694-50.52 30.263-51.11-10.005zm0 5.899v5.627h306v-67.643l-50.325-19.385-50.783 59.735-52.618-30.306-49.644 29.737-51.057-9.995z" clip-rule="evenodd"></path></svg>'},60882:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M16 11V0H5v3.5h1V1h9v9H8.5v1zM.25 3l8.642 4.969-3.422.738 2.723 5.45-2.886 1.667-2.724-5.45-2.351 2.595zm.996 1.726-.01 5.644 1.527-1.684 2.91 5.771 1.154-.667-2.91-5.77 2.222-.48z" clip-rule="evenodd"></path></svg>'},64322:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#525252" fill-rule="evenodd" d="M376 354.501v.999h-24.5v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-22h.998v327.001zM24 75v8h16v-8zm0 61v8h16v-8zm0 68v-8h16v8zm0 54v8h16v-8zm0 69v-8h16v8zm9 49v-8h24v8zm52-8v8h24v-8zm50 0v8h24v-8zm50 0v8h24v-8zm52 8v-8h24v8zm52-8v8h24v-8zm52 8v-8h24v8zm6-287a8 8 0 1 0 0-16 8 8 0 0 0 0 16m-48 14a8 8 0 1 0 0-16 8 8 0 0 0 0 16m-31 38a8 8 0 1 1-16 0 8 8 0 0 1 16 0m-113 44a8 8 0 1 0 0-16 8 8 0 0 0 0 16m30 25a8 8 0 1 1-16 0 8 8 0 0 1 16 0m-58 40a8 8 0 1 0 0-16 8 8 0 0 0 0 16m-30 42a8 8 0 1 1-16 0 8 8 0 0 1 16 0m38 4a8 8 0 1 1-16 0 8 8 0 0 1 16 0m45-30a8 8 0 1 1-16 0 8 8 0 0 1 16 0m41-36a8 8 0 1 0 0-16 8 8 0 0 0 0 16m-13-58a8 8 0 1 0 0-16 8 8 0 0 0 0 16m61 1a8 8 0 1 1-16 0 8 8 0 0 1 16 0m38-30a8 8 0 1 1-16 0 8 8 0 0 1 16 0m40-16a8 8 0 1 1-16 0 8 8 0 0 1 16 0" clip-rule="evenodd"></path></svg>'},66503:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m11.366 7.841-.732-.682-3.125 3.349-1.635-1.84-.748.664 2.365 2.66z"></path><path fill="#000" fill-rule="evenodd" d="M4.5 3V1.167C4.5.469 5.204 0 6 0h4c.796 0 1.5.47 1.5 1.167V3h4a.5.5 0 0 1 0 1H14l-.929 11.077a1 1 0 0 1-.997.923H3.926a1 1 0 0 1-.997-.923L2 4H.5a.5.5 0 0 1 0-1zM3.003 4h9.994l-.923 11H3.926zM10.5 1v2h-5V1c0-.04 5-.04 5 0" clip-rule="evenodd"></path></svg>'},67386:e=>{"use strict";e.exports=i},77150:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#A8A8A8" fill-rule="evenodd" d="m191.995 203.185 120.501 124.388C282.524 353.981 243.18 370 200.095 370 106.154 370 30 293.846 30 199.905 30 108.68 101.815 34.228 191.995 30zM370 208.005c-1.961 41.827-19.029 79.703-45.87 108.295L219.219 208.005zM208.194 30C295.69 34.102 365.898 104.31 370 191.806H208.194z" clip-rule="evenodd"></path></svg>'},78418:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#000" d="M24 107v-8h16v8zM24 56v-8h16v8zM24 158v-8h16v8zM24 209v-8h16v8zM24 261v-8h16v8zM24 311v-8h16v8zM24 362v-8h16v8zM128 376v-8h24v8zM68 376v-8h24v8zM189 376v-8h24v8zM250 376v-8h24v8zM311 376v-8h24v8zM70 271h20v87H70zM70 208h20v61H70zM70 160h20v46H70zM130 215h20v143h-20zM130 144h20v69h-20zM130 78h20v64h-20zM190 245h20v113h-20zM190 169h20v74h-20zM190 121h20v46h-20zM252 289h20v69h-20zM252 245h20v42h-20zM252 206h20v37h-20zM313 303h20v55h-20zM313 240h20v61h-20zM313 175h20v63h-20z"></path><path fill="#000" fill-rule="evenodd" d="M49 24h-1v28h-4v1h4v50h-4v1h4v50h-4v1h4v50h-4v1h4v50h-4v1h4v50h-4v1h4v50h-4v1h4v4h1v-4h60v4h1v-4h60v4h1v-4h60v4h1v-4h60v4h1v-4h60v4h1v-4h22v-.998H49z" clip-rule="evenodd"></path></svg>'},79244:e=>{"use strict";e.exports=r},82972:e=>{"use strict";e.exports=l},95177:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#A8A8A8" d="M24 83v-8h16v8zM24 144v-8h16v8zM24 204v-8h16v8zM24 266v-8h16v8zM24 327v-8h16v8zM135 376v-8h24v8zM85 376v-8h24v8zM33 376v-8h24v8zM185 376v-8h24v8zM237 376v-8h24v8zM289 376v-8h24v8zM341 376v-8h24v8z"></path><path fill="#A8A8A8" fill-rule="evenodd" d="M376 354.501v.999h-24.5v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-22h.998v327.001z" clip-rule="evenodd"></path><path fill="#A8A8A8" fill-rule="evenodd" d="M326.792 248.694c-15.426-8.706-34.876-5.079-46.128 8.6l-8.137 9.892c-12.332 14.991-35.153 15.38-47.987.817-13.619-15.452-38.319-13.253-48.994 4.361l-12.091 19.95c-9.081 14.984-28.398 20.085-43.693 11.538-13.593-7.597-30.696-4.133-40.262 8.154l-34.105 43.801-.79-.614 34.105-43.802c9.87-12.676 27.516-16.249 41.54-8.412 14.825 8.284 33.548 3.34 42.35-11.183l12.09-19.95c11.026-18.191 36.535-20.462 50.6-4.504 12.427 14.1 34.524 13.724 46.464-.791l8.137-9.892c11.561-14.055 31.544-17.78 47.392-8.836l23.463 13.242-.492.87z" clip-rule="evenodd"></path><circle cx="96" cy="300" r="3" fill="#A8A8A8"></circle><circle cx="45" cy="355" r="3" fill="#A8A8A8"></circle><circle cx="147" cy="306" r="3" fill="#A8A8A8"></circle><circle cx="197" cy="258" r="3" fill="#A8A8A8"></circle><circle cx="249" cy="278" r="3" fill="#A8A8A8"></circle><circle cx="300" cy="245" r="3" fill="#A8A8A8"></circle><circle cx="351" cy="262" r="3" fill="#A8A8A8"></circle><path fill="#A8A8A8" fill-rule="evenodd" d="M229.969 208.854c-19.296-7.793-41.421-1.516-53.749 15.251l-10.663 14.501c-10.031 13.642-29.46 16.062-42.532 5.298-13.896-11.444-34.79-7.303-43.27 8.577l-34.314 64.254-.882-.471 34.314-64.254c8.778-16.437 30.404-20.724 44.788-8.878 12.628 10.4 31.4 8.061 41.091-5.119l10.662-14.501c12.599-17.134 35.209-23.55 54.93-15.586l3.243 1.31a50.05 50.05 0 0 0 31.549 1.975l12.467-3.3a70.5 70.5 0 0 1 43.999 2.606l29.082 11.518-.368.93-29.082-11.518a69.5 69.5 0 0 0-43.376-2.569l-12.466 3.3a51.05 51.05 0 0 1-32.179-2.015z" clip-rule="evenodd"></path><circle cx="96" cy="239" r="3" fill="#A8A8A8"></circle><circle cx="45" cy="316" r="3" fill="#A8A8A8"></circle><circle cx="147" cy="250" r="3" fill="#A8A8A8"></circle><circle cx="197" cy="208" r="3" fill="#A8A8A8"></circle><circle cx="249" cy="213" r="3" fill="#A8A8A8"></circle><circle cx="300" cy="206" r="3" fill="#A8A8A8"></circle><circle cx="351" cy="223" r="3" fill="#A8A8A8"></circle><path fill="#A8A8A8" fill-rule="evenodd" d="m350.868 117.838-23.757 25.893a79.5 79.5 0 0 1-51.631 25.448l-11.951 1.048a45.5 45.5 0 0 1-27.275-6.244l-6.002-3.578c-18.785-11.198-43.003-6.299-55.959 11.32l-7.713 10.49c-10.587 14.398-31.092 16.952-44.887 5.591-13.721-11.299-34.19-8.333-44.14 6.396L45.414 241.78l-.828-.56 32.139-47.578c10.28-15.218 31.427-18.282 45.603-6.608 13.353 10.996 33.2 8.524 43.446-5.411l7.714-10.49c13.26-18.035 38.049-23.049 57.276-11.586l6.002 3.578a44.5 44.5 0 0 0 26.676 6.106l11.95-1.048a78.5 78.5 0 0 0 50.982-25.128l23.758-25.893z" clip-rule="evenodd"></path><circle cx="96" cy="181" r="3" fill="#A8A8A8"></circle><circle cx="45" cy="241" r="3" fill="#A8A8A8"></circle><circle cx="147" cy="194" r="3" fill="#A8A8A8"></circle><circle cx="197" cy="155" r="3" fill="#A8A8A8"></circle><circle cx="249" cy="167" r="3" fill="#A8A8A8"></circle><circle cx="300" cy="162" r="3" fill="#A8A8A8"></circle><circle cx="351" cy="118" r="3" fill="#A8A8A8"></circle></svg>'},96984:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 400 400"><path fill="#000" d="M132 64v20H45V64zM195 64v20h-61V64zM350 64v20H197V64zM188 124v20H45v-20zM286 124v20h-96v-20zM350 124v20h-62v-20zM158 184v20H45v-20zM234 184v20h-74v-20zM350 184v20H236v-20zM114 246v20H45v-20zM272 246v20H116v-20zM350 246v20h-76v-20zM100 307v20H45v-20zM184 307v20h-82v-20zM350 307v20H186v-20zM24 79v-8h16v8zM24 140v-8h16v8zM24 200v-8h16v8zM24 262v-8h16v8zM24 323v-8h16v8zM135 372v-8h24v8zM85 372v-8h24v8zM33 372v-8h24v8zM185 372v-8h24v8zM237 372v-8h24v8zM289 372v-8h24v8zM341 372v-8h24v8z"></path><path fill="#000" fill-rule="evenodd" d="M376 350.501v.999h-75.5v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-50v4h-1v-4h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-60h-4v-1h4v-22h.998v327.001zm-24.5.999v4h-1v-4z" clip-rule="evenodd"></path></svg>'}},t={};function s(i){var r=t[i];if(void 0!==r)return r.exports;var l=t[i]={exports:{}};return e[i](l,l.exports,s),l.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.p="";var n={};return s.p=window.jimuConfig.baseUrl,(()=>{"use strict";s.r(n),s.d(n,{__set_webpack_public_path__:()=>At,default:()=>wt});var e,t=s(67386),i=s(79244),r=s(82972);!function(e){e.ByGroup="BYGROUP",e.ByField="BYFIELD"}(e||(e={}));const l="name",o="value",a="count",c="__other-slice__",u="__other-split-value__",v="minValue",d="maxValue",h={behaviorAfterLimit:"reject",maxBarChartSeriesCount:100,maxBarUniqueSeriesCountTotal:1e4,maxBarTwoSeriesCountPerSeries:1e3,maxBarTwoSeriesCountTotal:2e3,maxBarThreePlusSeriesCountPerSeries:100,maxBarThreePlusSeriesCountTotal:2e3,maxLineChartSeriesCount:100,maxLineUniqueSeriesCountTotal:1e4,maxLineTwoSeriesCountPerSeries:1e3,maxLineTwoSeriesCountTotal:2e3,maxLineThreePlusSeriesCountPerSeries:100,maxLineThreePlusSeriesCountTotal:2e3,maxScatterPointsBeforeAggregation:1e4,maxScatterPointsAfterAggregation:1e4,maxPieChartSliceCountTotal:300},p=(0,i.Immutable)({hideEmptySeries:!1});var g=s(1888);const m="#5E8FD0",S="var(--sys-color-surface-paper-text)",y="var(--sys-color-divider-secondary)",f="var(--sys-color-primary-main)",b="var(--sys-color-surface-paper-hint)",M=["#5E8FD0","#77B484","#DF6B35","#DBCF4E","#41546D","#8257C2","#D6558B"],z="var(--sys-color-divider-secondary)",w="var(--sys-color-divider-secondary)",A=e=>"mean"===e?"#A6CEE3":"median"===e?"#33A02C":"standardDeviation"===e?"#B2DF8A":"comparisonDistribution"===e?"#E31A1C":void 0,x=(e,t=0)=>{var i;const r=null!==(i=null==e?void 0:e.length)&&void 0!==i?i:0;if(!(r<0))return(t%=r)<0&&(t=0),e[t]},T=(e,t=0,i)=>{let r=x(e,t);return r===i&&(r=x(e,t+1)),r},C=(e=0)=>x(M,e),D={family:"inherit",size:14,style:"normal",weight:"normal",decoration:"none"},I={type:"esriTS",color:S,font:D,horizontalAlignment:"center"},j={type:"esriSLS",style:"esriSLSSolid",color:y,width:1},F={type:"esriSFS",style:"esriSFSSolid",color:f,outline:j},_={type:"esriSMS",style:"esriSMSCircle",color:f,size:10,outline:j},B=(e=14)=>Object.assign(Object.assign({},D),{size:e}),O=(e="",t=14,i=S)=>Object.assign(Object.assign({},I),{text:e,color:i,font:B(t)}),R=(e=1,t=y,i="esriSLSSolid")=>Object.assign(Object.assign({},j),{width:e,color:t,style:i}),E=(e=m,t=1,i=y)=>Object.assign(Object.assign({},F),{color:e,outline:R(t,i)}),L=(e=f,t=0,i=y,r=10)=>Object.assign(Object.assign({},_),{color:e,size:r,outline:R(t,i)});function V(e){return{type:"chartOverlay",visible:!1,created:!1,symbol:R(1,e)}}function N(e=M[2],t=3){return{type:"chartOverlays",trendLine:{type:"chartOverlay",created:!0,visible:!0,symbol:{type:"esriSLS",color:e,width:t}}}}const k=(e="",t=!0,i,r=S)=>({type:"chartText",visible:t,content:O(e,i,r)});const P=e=>{if(null==e||""===e)return;const t="string"==typeof e?e:(0,r.getSeriesType)(e);return"barSeries"===t||"lineSeries"===t},H=e=>{if(null==e||""===e)return!1;const t="string"==typeof e?e:(0,r.getSeriesType)(e);return"barSeries"===t||"lineSeries"===t||"scatterSeries"===t||"histogramSeries"===t},q=e=>{const t=!(null!=(l=e)&&""!==l&&"gaugeSeries"===("string"==typeof l?l:(0,r.getSeriesType)(l)));var l;return(0,i.Immutable)({cursorEnable:t})};var U=function(e,t,i,r){return new(i||(i=Promise))(function(l,o){function a(e){try{n(r.next(e))}catch(e){o(e)}}function s(e){try{n(r.throw(e))}catch(e){o(e)}}function n(e){var t;e.done?l(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,s)}n((r=r.apply(e,t||[])).next())})};const $={},G=(e,t)=>{var r;if(!t)return;if(null!=$[e])return $[e];const l=i.DataSourceManager.getInstance().getDataSource(t),o=null==l?void 0:l.getSchema(),a=null===(r=null==o?void 0:o.fields)||void 0===r?void 0:r[e];return $[e]=a,a},J=(e,t)=>{const i=G(e,t);return null==i?void 0:i.type},W=e=>{if(!e)return!1;const t=e.getInfo();return t&&Object.keys(t).length>0},Q=e=>{if(!W(e))return!1;const t=e.getStatus();return t&&t!==i.DataSourceStatus.NotReady};const Y=t=>null!=(null==t?void 0:t.groupByFieldsForStatistics)?e.ByGroup:null!=(null==t?void 0:t.outStatistics)?e.ByField:void 0,Z=e=>{var t,i,r;return(null===(t=null==e?void 0:e.outFields)||void 0===t?void 0:t.length)?"no_aggregation":null===(r=null===(i=null==e?void 0:e.outStatistics)||void 0===i?void 0:i[0])||void 0===r?void 0:r.statisticType},K=e=>(null==e?void 0:e[0]).lineSmoothed,X=e=>(null==e?void 0:e[0]).showArea,ee=/\(|\)|\[|\]|\%/gm,te=(e,t)=>((null==e?void 0:e.match(ee))&&(e=e.replace(ee,"__")),"no_aggregation"!==t?`${"percentile-continuous"===t?"percentile_cont":t}_of_${e}`:e),ie=(e,t)=>{if("no_aggregation"!==t){const i="percentile-continuous"===t?"median":t;return`${g.utils.uppercaseFirstLetter(i)} of ${e}`}return e},re=(e,t,i)=>{let r=te(e,t);return r=`${r}_of_${i}`,r},le={size:1,unit:"months",timeAggregationType:"equalIntervalsFromStartTime",trimIncompleteTimeInterval:!1,nullPolicy:"interpolate"},oe=(e,t=0,i)=>{var r,l;if(!e)return null;const{type:o="lineSeries",dataLabels:a,dataTooltipVisible:s}=e;let n=null;if("barSeries"===o){const{fillSymbol:l,hideOversizedStackedLabels:o=!1,binTemporalData:a=!1}=e;if(n=function(e=0,t){var i;const r=(null==t?void 0:t.color)?null==t?void 0:t.color:T(null!==(i=null==t?void 0:t.colors)&&void 0!==i?i:M,e,null==t?void 0:t.preSerieColor);return{type:"barSeries",id:"",name:"",x:"",y:"",fillSymbol:E(r,0),dataLabels:k("",!1,10,b)}}(t,i),n.binTemporalData=a,n.hideOversizedStackedLabels=o,l)if(!(null==i?void 0:i.color)&&(null==i?void 0:i.preSerieColor)){const e=T(null!==(r=null==i?void 0:i.colors)&&void 0!==r?r:M,t,i.preSerieColor);n.fillSymbol=Object.assign(Object.assign({},l),{color:e})}else n.fillSymbol=l}else if("lineSeries"===o){const{lineSmoothed:r=!1,showArea:o=!1,markerVisible:a=!1,binTemporalData:s=!1,lineSymbol:c,markerSymbol:u}=e;if(n=function(e=0,t){var i;const r=(null==t?void 0:t.color)?null==t?void 0:t.color:T(null!==(i=null==t?void 0:t.colors)&&void 0!==i?i:M,e,null==t?void 0:t.preSerieColor);return{type:"lineSeries",id:"",name:"",x:"",y:"",lineSymbol:R(2,r),dataLabels:k("",!1,10,b)}}(t,i),n.binTemporalData=s,n.lineSmoothed=r,n.showArea=o,n.markerVisible=a,!(null==i?void 0:i.color)&&(null==i?void 0:i.preSerieColor)){const e=T(null!==(l=null==i?void 0:i.colors)&&void 0!==l?l:M,t,i.preSerieColor);c&&(n.lineSymbol=Object.assign(Object.assign({},c),{color:e})),u&&(n.markerSymbol=Object.assign(Object.assign({},u),{color:e}))}else c&&(n.lineSymbol=c),u&&(n.markerSymbol=u)}else if("pieSeries"===o){const{innerRadius:t=0,startAngle:i=0,endAngle:r=360}=e;n=function(e=0){const t=C(0);return{type:"pieSeries",id:"",name:"",x:"",y:"",innerRadius:e,startAngle:0,endAngle:360,displayNumericValueOnDataLabel:!0,displayPercentageOnDataLabel:!1,displayNumericValueOnTooltip:!0,displayPercentageOnTooltip:!0,dataLabelsOffset:0,sliceGrouping:{sliceId:c,percentageThreshold:0,label:"Other"},numericValueFormat:{type:"number",intlOptions:{style:"decimal",useGrouping:!0,minimumFractionDigits:0,maximumFractionDigits:3}},percentValueFormat:{type:"number",intlOptions:{style:"percent",notation:"standard",minimumFractionDigits:0,maximumFractionDigits:3}},fillSymbol:E(t,1,w),dataLabels:k("",!1,10,b)}}(),n.innerRadius=t,n.startAngle=i,n.endAngle=r}else if("scatterSeries"===o){const{markerSymbol:t,overlays:i}=e;n=function(){const e=C(0);return{type:"scatterSeries",id:"",name:"",x:"",y:"",markerSymbol:L(e,1,"rgba(255,255,255,0.5)",7),overlays:N()}}(),t&&(n.markerSymbol=t),i&&(n.overlays=i)}else if("histogramSeries"===o){const{fillSymbol:t,binCount:i,overlays:r,dataTransformationType:l}=e;n=function(e="none"){const t=C(0);return{type:"histogramSeries",id:"",name:"",x:"",binCount:15,overlays:{type:"chartOverlays",mean:V(A("mean")),median:V(A("median")),standardDeviation:V(A("standardDeviation")),comparisonDistribution:V(A("comparisonDistribution"))},dataTransformationType:e,fillSymbol:E(t,1,z),dataLabels:k("",!1,10,b)}}(),n.binCount=i,r&&(n.overlays=r),t&&(n.fillSymbol=t),l&&(n.dataTransformationType=l)}else if("gaugeSeries"===o){const{valueConversion:t,featureIndex:i=0}=e;n={type:"gaugeSeries",id:"",name:"",x:""},n.valueConversion=t,n.featureIndex=i}return a&&"gaugeSeries"!==o&&(n.dataLabels=a),null!=s&&(n.dataTooltipVisible=s),n},ae=(e,t,i=0,r)=>{var l;let o=e.find(e=>e.id===t);if(!o){const t=null!==(l=e[i])&&void 0!==l?l:e[0],{type:r,dataLabels:a,dataTooltipVisible:s}=t,{hideOversizedStackedLabels:n,binTemporalData:c}=t,{lineSmoothed:u,showArea:v,markerVisible:d,markerSymbol:h}=t,{innerRadius:p,startAngle:g,endAngle:m}=t;o={type:r,dataLabels:a,binTemporalData:c,dataTooltipVisible:s,hideOversizedStackedLabels:n,lineSmoothed:u,showArea:v,markerVisible:d,markerSymbol:h,innerRadius:p,startAngle:g,endAngle:m}}return oe(o,i,r)},se=(e,t,r)=>{const{propSeries:l,name:o,categoryField:a,numberField:s,binTemporalData:n,temporalBinning:c,splitByField:u,splitByFieldType:v,splitByValue:d}=e;let h=ae(l,d,t,r);const p=`${d}`,g=s;h.id=p,h.x=a,h.y=g,h.binTemporalData=n,h.name=o||p,n&&c&&(h=Object.assign(Object.assign({},h),{temporalBinning:Object.assign(Object.assign({},le),c)}));const m={where:`${u}=${v===i.JimuFieldType.String?`'${d}'`:d}`};return h.query=m,h},ne=(e,t,l,o,a=!1,s)=>{var n;const c=((e,t)=>{var i,l,o,a;const s=null!==(l=null===(i=null==t?void 0:t.groupByFieldsForStatistics)||void 0===i?void 0:i[0])&&void 0!==l?l:"",n=null==t?void 0:t.outStatistics,c=null==t?void 0:t.outFields,u=null==t?void 0:t.where,v=(0,r.getSplitByField)(u,!0),d=null!==(o=Z(t))&&void 0!==o?o:"count",h=null==e?void 0:e.binTemporalData,p=null==e?void 0:e.temporalBinning;return{splitByField:v,categoryField:s,numericFields:c||(null===(a=null==n?void 0:n.map(e=>e.onStatisticField))||void 0===a?void 0:a.filter(e=>!!e)),statisticType:d,binTemporalData:h,temporalBinning:p}})(e[0],t),{splitByField:u,categoryField:v,numericFields:d,binTemporalData:h,temporalBinning:p}=c,g=d[0];let m=null!==(n=null==s?void 0:s.preSerieColor)&&void 0!==n?n:"";const S=o.map((t,o)=>{var n,c,d;let S=e.find(e=>(0,r.getSplitByValue)({where:e.query.where,normalize:!1})===(l===i.JimuFieldType.String?`'${t}'`:t));if(!S){let i={propSeries:e,categoryField:v,numberField:g,splitByField:u,splitByFieldType:l,splitByValue:t,binTemporalData:h,temporalBinning:null};h&&p&&(i=Object.assign(Object.assign({},i),{temporalBinning:Object.assign(Object.assign({},le),p)})),S=se(i,o,Object.assign(Object.assign({},s),{preSerieColor:m})),S.deletable=a,m=null!==(c=null===(n=S.fillSymbol)||void 0===n?void 0:n.color)&&void 0!==c?c:null===(d=S.lineSymbol)||void 0===d?void 0:d.color,s.symbol&&("barSeries"===S.type?S.fillSymbol=s.symbol:"lineSeries"===S.type&&(S.lineSymbol=s.symbol))}return S});return(0,i.Immutable)(S)},ce=(e,t)=>{var i,r,l,o,a,s,n,c,u,v;return P(e)||"pieSeries"===e?t.outFields?!(!(null===(i=null==t?void 0:t.outFields)||void 0===i?void 0:i[0])||!(null===(r=null==t?void 0:t.groupByFieldsForStatistics)||void 0===r?void 0:r[0])):(null==t?void 0:t.groupByFieldsForStatistics)?!!(null===(l=null==t?void 0:t.groupByFieldsForStatistics)||void 0===l?void 0:l[0])&&!!(null===(a=null===(o=null==t?void 0:t.outStatistics)||void 0===o?void 0:o[0])||void 0===a?void 0:a.onStatisticField):!!(null===(n=null===(s=null==t?void 0:t.outStatistics)||void 0===s?void 0:s[0])||void 0===n?void 0:n.onStatisticField):"scatterSeries"===e?!!(null===(c=null==t?void 0:t.outFields)||void 0===c?void 0:c[1]):"histogramSeries"===e?!!(null===(u=null==t?void 0:t.outFields)||void 0===u?void 0:u[0]):"gaugeSeries"===e?!!(null===(v=null==t?void 0:t.outStatistics)||void 0===v?void 0:v[0])&&t.outStatistics.every((e,t)=>0!==t&&!e||!!(null==e?void 0:e.onStatisticField)):void 0},ue=e=>i.ReactRedux.useSelector(t=>(t=window.jimuConfig.isBuilder?t.appStateInBuilder:t,e(t)));const ve=(e,t,r,l)=>{const o=e,a=e;r=null!=r?r:e;let s=i.EsriFieldType.String,n=null;t===i.JimuFieldType.Number&&(n={digitSeparator:!0,places:3},s=i.EsriFieldType.Double);const c={jimuName:o,type:t,esriType:s,name:a,alias:r,format:n};return l&&(c.originFields=l),c},de=(e,t)=>{let r=e;return t===i.StatisticType.Count?(r=r||(0,i.Immutable)({}),r=r.set("places",0)):t===i.StatisticType.Avg&&((null==r?void 0:r.places)||(r=r||(0,i.Immutable)({}),r=r.set("places",3))),r},he=(e,t,i)=>{let r=G(e,t);if(r)return i=i||e,r=r.set("jimuName",i).set("name",i),r=r.set("originFields",[e]),r},pe=(e,t)=>{const r=((e,t)=>{var r;let l=(0,i.Immutable)({});const o=null===(r=null==e?void 0:e.outFields)||void 0===r?void 0:r[0];o&&[{name:"minValue",alias:"Min value"},{name:"maxValue",alias:"Max value"},{name:a,alias:"Count"}].forEach(({name:e,alias:r})=>{var s,n;const c=e,u=[o],v=i.JimuFieldType.Number,d=e===a?i.EsriFieldType.Integer:i.EsriFieldType.Double,h=G(o,t),p=null===(n=null===(s=null==h?void 0:h.format)||void 0===s?void 0:s.digitSeparator)||void 0===n||n,g=e===a?0:3,m={jimuName:c,type:v,esriType:d,name:e,alias:r,originFields:u,format:Object.assign(Object.assign({},null==h?void 0:h.format),{digitSeparator:p,places:g})};l=l.set(e,m)});return l})(e,t);return{fields:r.asMutable({deep:!0})}},ge=(e,t)=>{const r=((e,t)=>{let r=(0,i.Immutable)({});const l=null==e?void 0:e.outFields;return l&&l.forEach(e=>{const i=he(e,t);i&&(r=r.set(e,i))}),r})(e,t);return{fields:r.asMutable({deep:!0})}},me=(e,t)=>{const r=((e,t)=>{let r=(0,i.Immutable)({});if(ce("gaugeSeries",e)){const l=[{name:"displayValue",alias:"Display value"},{name:v,alias:"Min value"},{name:d,alias:"Max value"}],o=e.outStatistics,a=o[0].onStatisticField;l.forEach(({name:e,alias:l},s)=>{var n;const c=o[s],u=(null==c?void 0:c.onStatisticField)||a,v=null!==(n=null==c?void 0:c.statisticType)&&void 0!==n?n:"count";let d=he(u,t,e);if(d){d=d.set("alias",l),v===i.StatisticType.Count&&(d=d.set("esriType",i.EsriFieldType.Integer));const e=de(d.format,v);e&&(d=d.set("format",e))}r=r.set(e,d)})}return r})(e,t);return{fields:r.asMutable({deep:!0})}},Se=(e,t,l,o)=>{var a,s,n,c;let u=(0,i.Immutable)({});const v=null==e?void 0:e.groupByFieldsForStatistics;v.forEach(e=>{if(e){const i=he(e,t);i&&(u=u.set(e,i))}});const d=null==e?void 0:e.outFields,h=null==e?void 0:e.outStatistics,p=(0,r.getSplitByField)(null==e?void 0:e.where,!0),g=(null==(m=l)?void 0:m.length)?(m.asMutable?m.asMutable({deep:!0}):m).map(e=>{const t=e.query.where;return(0,r.getSplitByValue)({where:t,normalize:!0})}):[];var m;const S=Array.from(new Set(g.concat(null!=o?o:[])));let y="",f="no_aggregation";v&&d?y=d[0]:v&&h&&(y=null===(a=h[0])||void 0===a?void 0:a.onStatisticField,f=null===(s=h[0])||void 0===s?void 0:s.statisticType);const b=null!==(c=null===(n=G(y,t))||void 0===n?void 0:n.alias)&&void 0!==c?c:y;return S.forEach(e=>{const r=re(y,f,e),l=((e,t,i)=>{let r=ie(e,t);return r=`${r} of ${i}`,r})(b,f,e);if(y){let e=he(y,t,r);if(e){e=e.set("alias",l),e=e.set("originFields",e.originFields.concat(p)),f===i.StatisticType.Count&&(e=e.set("esriType",i.EsriFieldType.Integer));const t=de(e.format,f);t&&(e=e.set("format",t))}u=u.set(r,e)}}),u},ye=(e,t)=>{const r=((e,t)=>{const r=null==e?void 0:e.groupByFieldsForStatistics,a=null==e?void 0:e.outFields,s=null==e?void 0:e.outStatistics;let n=(0,i.Immutable)({});if(r&&a)r.concat(a).forEach(e=>{if(e){const i=he(e,t);i&&(n=n.set(e,i))}});else if(r&&s){const e=r[0];if(e){const i=he(e,t);i&&(n=n.set(e,i))}s.forEach(e=>{var r,l;const o=e.onStatisticField;if(o){const a=e.statisticType,s=e.outStatisticFieldName,c=null!==(l=null===(r=G(o,t))||void 0===r?void 0:r.alias)&&void 0!==l?l:o,u=ie(c,a);let v=he(o,t,s);if(v){v=v.set("alias",u),a===i.StatisticType.Count?v=v.set("esriType",i.EsriFieldType.Integer):a===i.StatisticType.Avg&&(v=v.set("esriType",i.EsriFieldType.Double));const e=de(v.format,a);e&&(v=v.set("format",e))}n=n.set(s,v)}})}else if(!r&&s){const e=s.map(e=>e.onStatisticField).asMutable({deep:!0}),t=l,r=o,a=ve(t,i.JimuFieldType.String,"Name",e),c=ve(r,i.JimuFieldType.Number,"Value",e);n=n.set(t,a),n=n.set(r,c)}return n})(e,t);return{fields:r.asMutable({deep:!0})}},fe=e=>{const t=e.getIdField();let r=e.getDataSourceJson().schema.fields[t];return r.esriType||(r=r.set("esriType",i.EsriFieldType.OID)),null==r?void 0:r.asMutable({deep:!0})},be={esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years"};class Me extends i.WidgetVersionManager{constructor(){super(...arguments),this.versions=[{version:"1.6.0",description:"Rename `multipleBarType` to `stackedType`",upgrader:e=>{var t;if(!e)return e;let i=null===(t=e.webChart)||void 0===t?void 0:t.series;if(!(null==i?void 0:i.length))return e;i=i.map(e=>e=(e=e.set("stackedType",e.multipleBarType)).without("multipleBarType"));return e.setIn(["webChart","series"],i)}},{version:"1.7.0",description:"Use the `numericField` as the `id` of serie, build the `query` in the `series` as a data source",upgrader:e=>{var t;if(!e)return e;let r=null===(t=e.webChart)||void 0===t?void 0:t.series;if(!(null==r?void 0:r.length))return e;r=(e=>null==e?void 0:e.map(e=>{var t,r,l,o,a;if(null===(r=null===(t=e.query)||void 0===t?void 0:t.groupByFieldsForStatistics)||void 0===r?void 0:r.length){const t=null===(a=null===(o=null===(l=e.query)||void 0===l?void 0:l.outStatistics)||void 0===o?void 0:o[0])||void 0===a?void 0:a.onStatisticField,r=e.id;return t&&t!==r&&(e=i.Immutable.set(e,"id",t)),e}return e}))(r);const l=(e=>{var t,i;if(!(null==e?void 0:e.length))return null;let r=e[0].query;return(null===(t=r.outStatistics)||void 0===t?void 0:t.length)?((null===(i=null==r?void 0:r.groupByFieldsForStatistics)||void 0===i?void 0:i.length)&&(r=((e,t)=>(t.slice(1).forEach(t=>{var i,r,l;const o=(null!==(i=e.outStatistics)&&void 0!==i?i:[]).concat(null!==(l=null===(r=t.query)||void 0===r?void 0:r.outStatistics)&&void 0!==l?l:[]);e=e.set("outStatistics",o)}),e))(r,e)),r):null})(r);r=r.map(e=>i.Immutable.without(e,"query"));const o={query:l};return e.setIn(["webChart","series"],r).setIn(["webChart","dataSource"],o)}},{version:"1.8.0",description:"",upgrader:e=>e},{version:"1.9.0",description:"",upgrader:e=>e},{version:"1.10.0",description:"Upgrade `config.colorMatch` to `series[0].slices` for pie chart.",upgrader:t=>{let a=(e=>{var t;if(!e)return e;let l=null===(t=e.webChart)||void 0===t?void 0:t.series;if(!(null==l?void 0:l.length))return e;if("pieSeries"!==(0,r.getSeriesType)(l))return e;if("colorMatch"!==l[0].colorType)return e;let o=e.webChart.dataSource;const a=null==o?void 0:o.colorMatch;if(!a)return e;const s=a.colorMatches,n=l[0].fillSymbol,c=Object.entries(s).map(([e,t])=>{var i,r,l;const o=e,a=t._fillColor;return{sliceId:o,fillSymbol:E(a,null!==(r=null===(i=n.outline)||void 0===i?void 0:i.width)&&void 0!==r?r:0,null===(l=n.outline)||void 0===l?void 0:l.color)}});return l=i.Immutable.setIn(l,["0","slices"],c),o=o.without("colorMatch"),e.setIn(["webChart","series"],l).setIn(["webChart","dataSource"],o)})(t);return a=(t=>{var i,a,s,n,c,u,v;if(!t)return t;let d=null===(a=null===(i=t.webChart)||void 0===i?void 0:i.dataSource)||void 0===a?void 0:a.query,h=null===(s=t.webChart)||void 0===s?void 0:s.series;const p=(0,r.getSeriesType)(h);if("pieSeries"!==p&&!P(p))return t;if(Y(d)!==e.ByField)return t;const g=null!==(u=null===(c=null===(n=null==d?void 0:d.outStatistics)||void 0===n?void 0:n[0])||void 0===c?void 0:c.statisticType)&&void 0!==u?u:"sum";h=h.map(e=>{let t=e.x,i=e.y,r=e.y;if("FieldName"===t&&(t=l,e=e.set("x",t)),"FieldValue"===i&&(i=o,e=e.set("y",i)),"FieldValue"===r&&(r=o,e=e.set("id",r)),"Sum of value"===e.name){const t=`${a=g,"string"==typeof a?a.charAt(0).toUpperCase()+a.slice(1):null} of value`;e=e.set("name",t)}var a;return e});const m=null===(v=d.orderByFields)||void 0===v?void 0:v[0];return(null==m?void 0:m.includes("FieldName"))?d=d.set("orderByFields",[m.replace("FieldName",l)]):(null==m?void 0:m.includes("FieldValue"))&&(d=d.set("orderByFields",[m.replace("FieldValue",o)])),t.setIn(["webChart","series"],h).setIn(["webChart","dataSource","query"],d)})(a),a}},{version:"1.11.0",description:"",upgrader:e=>e},{version:"1.12.0",description:"Upgrade web-chart version and upgrade the numeric type in the slice id of the pie chart to a string type, feature layer data source only supports the latter.",upgrader:e=>{var t;if(!e||!e.webChart)return e;let i=e.setIn(["webChart","version"],"6.2.1");const l=(e=>{var t,i;let l=e;if(null===(t=null==e?void 0:e.series)||void 0===t?void 0:t.length){const t=(0,r.getSeriesType)(e.series);if(("barSeries"===t||"lineSeries"===t)&&void 0===e.rotated){const t=null!==(i=e.series[0].rotated)&&void 0!==i&&i;l=l.set("rotated",t);const r=l.series.map(e=>(void 0!==e.rotated&&(e=e.without("rotated")),e));l=l.set("series",r)}}return l})(i.webChart);i=i.set("webChart",l);const o=null===(t=i.webChart)||void 0===t?void 0:t.series;if(!(null==o?void 0:o.length))return i;if("pieSeries"!==(0,r.getSeriesType)(o))return i;let a=o[0],s=a.sliceGrouping;s=s.set("sliceId",c).set("label",s.groupName),s=s.without("groupName"),a=a.set("sliceGrouping",s);const n=a.slices;if(null==n?void 0:n.length){const e=n.map(e=>("number"==typeof e.sliceId&&(e=e.set("sliceId",e.sliceId+"")),e));a=a.set("slices",e)}return"colorMatch"===a.colorType&&(a=a.set("colorType","singleColor")),i=i.setIn(["webChart","series","0"],a),i}},{version:"1.13.0",description:"Upgrade series dataTooltipVisible to true, sortLabelsBy to originalValue, support max-length for the label of pie legend",upgrader:e=>{var t;if(!e)return e;let i=null===(t=e.webChart)||void 0===t?void 0:t.series;if(!(null==i?void 0:i.length))return e;i=i.map(e=>e=e.set("dataTooltipVisible",!0));let l=e.setIn(["webChart","series"],i).setIn(["webChart","sortLabelsBy"],"originalValue");if("pieSeries"===(0,r.getSeriesType)(i)&&l.webChart.legend){let e=l.webChart.legend;e=e.set("labelMaxWidth",200),l=l.setIn(["webChart","legend"],e)}return l}},{version:"1.14.0",description:"Upgrade the use-fields of the use data source for by-field mode",upgradeFullInfo:!0,upgrader:t=>{var l,o,a,s;const n=t.widgetJson,c=n.config;if(!c)return t;const u=null===(o=null===(l=c.webChart)||void 0===l?void 0:l.dataSource)||void 0===o?void 0:o.query;let v=null===(a=c.webChart)||void 0===a?void 0:a.series;const d=(0,r.getSeriesType)(v);if("pieSeries"!==d&&!P(d))return t;const h=Y(u);if(h===e.ByField){const e=u.outStatistics.map(e=>e.onStatisticField).asMutable({deep:!0});let i=n.useDataSources[0];if(!i)return t;if(!(null===(s=i.fields)||void 0===s?void 0:s.length)){i=i.set("fields",e);const r=n.set("useDataSources",[i]);return Object.assign(Object.assign({},t),{widgetJson:r})}}if("lineSeries"===d&&h===e.ByGroup){if("no_aggregation"===Z(u)){v=v.map(e=>e=i.Immutable.without(e,["timeIntervalSize","timeIntervalUnits","timeAggregationType","trimIncompleteTimeInterval","nullPolicy"]));const e=c.setIn(["webChart","series"],v),r=n.set("config",e);return Object.assign(Object.assign({},t),{widgetJson:r})}}return Promise.resolve(t)}},{version:"1.15.0",description:"Upgrade the version of webChart to 9.4.0, remove time-binning options for no aggregation, set `hideOversizedStackedLabels` for bar series",upgrader:t=>{var l,o,a;if(!(null===(l=null==t?void 0:t.webChart)||void 0===l?void 0:l.series))return t;const s=t.setIn(["webChart","version"],"9.4.0"),n=null===(o=s.webChart.dataSource)||void 0===o?void 0:o.query;let c=null===(a=s.webChart)||void 0===a?void 0:a.series;const u=(0,r.getSeriesType)(c),v=Y(n),d=Z(n),h=void 0!==c[0].timeIntervalSize;return"lineSeries"===u&&v===e.ByGroup&&"no_aggregation"===d&&h?(c=c.map(e=>e=i.Immutable.without(e,["timeIntervalSize","timeIntervalUnits","timeAggregationType","trimIncompleteTimeInterval","nullPolicy"])),s.setIn(["webChart","series"],c)):"barSeries"===u?(c=c.map(e=>e=e.set("hideOversizedStackedLabels",!1)),s.setIn(["webChart","series"],c)):s}},{version:"1.16.0",description:"Upgrade the version of webChart to 17.0.0, remove `series.colorType` and move `series.stackedType` to `config.stackedType` and replace `config.sortLabelsBy` with to `config.orderOptions`",upgrader:t=>{var i,l,o,a,s;if(!(null==t?void 0:t.webChart))return t;const n=t.options;n&&(t=t.set("options",n.without("hideEmptySeriesInLegend").set("hideEmptySeries",n.hideEmptySeriesInLegend)));let c=t.webChart.set("version","17.0.0").set("colorMatch",!1).without("sortLabelsBy");if(!(null===(i=c.series)||void 0===i?void 0:i.length)||!(null===(l=c.dataSource)||void 0===l?void 0:l.query))return t.set("webChart",c);void 0===c.stackedType&&void 0!==(null===(o=c.series[0])||void 0===o?void 0:o.stackedType)&&(c=c.set("stackedType",c.series[0].stackedType));const u=c.series.map(e=>e=(e=(e=e.without("colorType")).without("stackedType")).without("rotated"));c=c.set("series",u);const v=null===(a=c.dataSource.query.orderByFields)||void 0===a?void 0:a[0];if(c=c.setIn(["dataSource","query"],c.dataSource.query.without("orderByFields")),v){const t=(0,r.getSeriesType)(c.series);if("histogramSeries"===t||"scatterSeries"===t)c=c.set("orderOptions",{orderByFields:[v]});else if("barSeries"===t||"lineSeries"===t||"pieSeries"===t){const[t,i]=v.split(" ");if(Y(null===(s=c.dataSource)||void 0===s?void 0:s.query)===e.ByField){const e="value"===t?"arcgis-charts-y-value":"arcgis-charts-category";c=c.set("orderOptions",{data:{orderType:e,orderBy:null!=i?i:"ASC",preferLabel:!1}})}else{const e=!!c.dataSource.query.where;let r={data:{orderType:t===c.dataSource.query.groupByFieldsForStatistics[0]?"arcgis-charts-category":"arcgis-charts-y-value",orderBy:null!=i?i:"ASC",preferLabel:!1}};e||(r=Object.assign({orderByFields:[v]},r)),c=c.set("orderOptions",r)}}}return t.set("webChart",c)}},{version:"1.18.0",description:"Upgrade the version of webChart to 23.2.0",upgrader:t=>{var i,l,o,a;if(!(null==t?void 0:t.webChart))return t;let s=t.webChart.set("version","23.2.0");if(!(null===(i=s.series)||void 0===i?void 0:i.length)||!(null===(l=s.dataSource)||void 0===l?void 0:l.query))return t.set("webChart",s);let n=s.series,c=null===(o=s.dataSource)||void 0===o?void 0:o.query;const u=(0,r.getSeriesType)(n),v=Y(c),d=Z(c),h=null!==(a=n[0].binTemporalData)&&void 0!==a?a:!!n[0].timeIntervalSize;return"lineSeries"!==u&&"barSeries"!==u||v!==e.ByGroup||!h||(n=n.map(e=>{const t=e.timeIntervalSize,i=e.timeIntervalUnits,r=e.timeAggregationType,l=e.trimIncompleteTimeInterval,o=e.nullPolicy,a={type:"fixedDateBased"};return void 0!==t&&(a.size=t),void 0!==i&&(a.unit=be[i]),void 0!==r&&(a.timeAggregationType=r),void 0!==l&&(a.trimIncompleteTimeInterval=l),void 0!==o&&(a.nullPolicy=o),e=(e=(e=e.without("timeIntervalSize","timeIntervalUnits","timeAggregationType","trimIncompleteTimeInterval","nullPolicy")).set("binTemporalData",!0)).set("temporalBinning",a)}),s=s.set("series",n)),"percentile_cont"===d&&(c=c.set("outStatistics",c.outStatistics.map(e=>("percentile_cont"===e.statisticType&&(e=e.set("statisticType","percentile-continuous")),e))),s=s.setIn(["dataSource","query"],c)),t.set("webChart",s)}},{version:"1.19.0",description:"Upgrade the version of webChart to 24.0.0",upgrader:t=>{var i,l,o;if(!(null==t?void 0:t.webChart))return t;let a=t.webChart.set("version","24.0.0");if(!(null===(i=a.series)||void 0===i?void 0:i.length)||!(null===(l=a.dataSource)||void 0===l?void 0:l.query))return t.set("webChart",a);let s=a.series;const n=null===(o=a.dataSource)||void 0===o?void 0:o.query,c=(0,r.getSeriesType)(s),u=Y(n),v=s[0].binTemporalData&&s[0].temporalBinning;return"lineSeries"!==c&&"barSeries"!==c||u!==e.ByGroup||!v||(s=s.map(e=>{const t=e.temporalBinning.without("type");return e.set("temporalBinning",t)}),a=a.set("series",s)),t.set("webChart",a)}}]}}const ze=new Me,we={chart:null,dataSource:null,outputDataSource:null,queryVersion:0,renderStatus:"none"},Ae=(e,t)=>{switch(t.type){case"SET_CHART":return Object.assign(Object.assign({},e),{chart:t.value});case"SET_DATA_SOURCE":return Object.assign(Object.assign({},e),{dataSource:t.value});case"SET_OUTPUT_DATA_SOURCE":return Object.assign(Object.assign({},e),{outputDataSource:t.value});case"SET_RECORDS":return Object.assign(Object.assign({},e),{records:t.value});case"SET_QUERY_VERSION":return Object.assign(Object.assign({},e),{queryVersion:t.value});case"SET_RENDER_STATE":return Object.assign(Object.assign({},e),{renderStatus:t.value});default:return e}},xe=i.React.createContext(void 0),Te=i.React.createContext(void 0),Ce=e=>{const{defaultState:r,children:l}=e,[o,a]=i.React.useReducer(Ae,r||we);return(0,t.jsx)(xe.Provider,{value:o,children:(0,t.jsx)(Te.Provider,{value:a,children:l})})},De=()=>i.React.useContext(xe),Ie=()=>i.React.useContext(Te);var je=s(14321);const Fe={_widgetLabel:"Chart",dataEmptyTip:"No data found."},_e=(e,t)=>{var r,l,o;const a=null==t?void 0:t.getLabel(),s=i.appConfigUtils.getWidgetIdByOutputDataSource(e);return{dataSourceLabel:a,widgetLabel:null===(o=null===(l=null===(r=(0,i.getAppStore)().getState())||void 0===r?void 0:r.appConfig.widgets)||void 0===l?void 0:l[s])||void 0===o?void 0:o.label}},Be=e=>{const t=((e,t)=>ce(e,null==t?void 0:t.query))((0,r.getSeriesType)(null==e?void 0:e.series),null==e?void 0:e.dataSource);return t},Oe=(e,t,r,l,o)=>{let a="";const s=i.ReactRedux.useSelector(e=>{var i,r;return null===(r=null===(i=e.dataSourcesInfo)||void 0===i?void 0:i[null==t?void 0:t.dataSourceId])||void 0===r?void 0:r.status}),n=i.ReactRedux.useSelector(e=>{var i,r;return null===(r=null===(i=e.dataSourcesInfo)||void 0===i?void 0:i[null==t?void 0:t.dataSourceId])||void 0===r?void 0:r.instanceStatus}),c=i.hooks.useTranslation(i.defaultMessages,je.defaultMessages,Fe);if(n===i.DataSourceStatus.CreateError)a=c("dataSourceCreateError");else if(s===i.DataSourceStatus.NotReady&&n===i.DataSourceStatus.Created){const e=i.DataSourceManager.getInstance().getDataSource(t.dataSourceId),r=((e,t)=>{if(!e||!t)return null;const i=_e(e,t);return["outputDataIsNotGenerated",{outputDsLabel:i.dataSourceLabel,sourceWidgetName:i.widgetLabel}]})(t,e);r&&(a=o.noDataMessage||c(...r))}else e&&(r||"warning"===l?a=o.noDataMessage||c("dataEmptyTip"):"error"===l&&(a=c("widgetLoadError")));return a},Re=(e,t,r,l,o,a,s={})=>{const n=null==e?void 0:e.dataSourceId,c=i.ReactRedux.useSelector(e=>{var t,i;return null===(i=null===(t=e.dataSourcesInfo)||void 0===t?void 0:t[n])||void 0===i?void 0:i.status}),u=null==e?void 0:e.rootDataSourceId,v=i.ReactRedux.useSelector(e=>{var t,i,r,l,o;return null!==(r=null===(i=null===(t=e.dataSourcesInfo)||void 0===t?void 0:t[n])||void 0===i?void 0:i.instanceStatus)&&void 0!==r?r:null===(o=null===(l=e.dataSourcesInfo)||void 0===l?void 0:l[u])||void 0===o?void 0:o.instanceStatus}),d=c&&c!==i.DataSourceStatus.NotReady&&v&&v!==i.DataSourceStatus.CreateError,h=(e=>(null==e?void 0:e.isDataView)&&(null==e?void 0:e.dataViewId)===i.CONSTANTS.SELECTION_DATA_VIEW_ID&&!e.getSourceRecords().length)(t),p=i.React.useMemo(()=>n&&Be(o),[o,n]);return[!!n&&!!r&&l&&d&&p&&!h,!p||h||c===i.DataSourceStatus.NotReady||v===i.DataSourceStatus.CreateError||"error"===a||"warning"===a,p&&!h&&c!==i.DataSourceStatus.NotReady&&!l&&v!==i.DataSourceStatus.CreateError,Oe(p,e,h,a,s)]},Ee=e=>{let t=e;return t=Object.assign({},e),void 0!==t.__outputid__&&delete t.__outputid__,void 0!==t.arcgis_charts_slice_id&&delete t.arcgis_charts_slice_id,t},Le=(e,t)=>e.filter(e=>{const i=Ee(e.getData());return t.some(e=>{return t=i,r=e,Object.keys(r).every(e=>t[e]===r[e]);var t,r})}),Ve=(e,t,l)=>{const o=i.React.useRef(null),a=i.hooks.useEventCallback(a=>{var s,n,c,u;const v=null==t?void 0:t.id,d=null==t?void 0:t.getSourceRecords();if(!v||!(null==d?void 0:d.length))return;const h=null===(s=a.detail.selectionData)||void 0===s?void 0:s.selectionSource;if(!("SelectionByClick"===h||"SelectionByRange"===h||"ClearSelection"===h))return;const p=null===(n=l[0].query)||void 0===n?void 0:n.where,g=(0,r.getSplitByField)(p),m=((e,t)=>e.map(e=>{const i=Object.assign({},e);if(void 0!==i.arcgis_charts_slice_id&&delete i.arcgis_charts_slice_id,void 0!==i.__outputid__&&delete i.__outputid__,t&&delete i[t],void 0!==i.arcgis_charts_type_domain_field_name){const e=i.arcgis_charts_type_domain_field_name,t=i.arcgis_charts_type_domain_id_value;i[e]=t}return i}))(null!==(u=null===(c=a.detail.selectionData)||void 0===c?void 0:c.selectionItems)&&void 0!==u?u:[],g),S=Le(d,m),y=S.map(e=>e.getId());o.current=y,i.MessageManager.getInstance().publishMessage(new i.DataRecordsSelectionChangeMessage(e,S,[v])),t.selectRecordsByIds(y)}),s=i.ReactRedux.useSelector(e=>{var i,r;return null===(r=null===(i=e.dataSourcesInfo)||void 0===i?void 0:i[null==t?void 0:t.id])||void 0===r?void 0:r.selectedIds}),[n,c]=i.React.useState(),u=i.hooks.useEventCallback(e=>{const i=null==t?void 0:t.getSourceRecords();if(!(null==i?void 0:i.length))return;const r=((e,t)=>e.map(e=>{const i=t.find(t=>t.getId()===e);let r=null;if(i&&(r=Ee(i.getData()),void 0!==r.arcgis_charts_type_domain_field_name)){const e=r.arcgis_charts_type_domain_field_name,t=r.arcgis_charts_type_domain_id_label;r[e]=t}return r}).filter(e=>!!e))(null!=e?e:[],i);return r});i.React.useEffect(()=>{if(!s)return;const e=s.asMutable();if(i.lodash.isDeepEqual(e,o.current))return;o.current=e;const t=u(e);c(t)},[s]);return[i.React.useMemo(()=>({selectionItems:n}),[n]),a]},Ne=(e,t)=>{const i=e.y,r=t.outStatistics.filter(e=>e.outStatisticFieldName===i),{groupByFieldsForStatistics:l,pageSize:o}=t,a={groupByFieldsForStatistics:l,outStatistics:r,num:o};return e.set("query",a)},ke=(e,t)=>{const{outStatistics:i}=t,r={outStatistics:i};return e.set("query",r)},Pe=(e,t)=>{const{outStatistics:i,pageSize:r}=t,l={outStatistics:[i[0]],num:r};return e.set("query",l)},He=(e,t)=>{const{pageSize:i,groupByFieldsForStatistics:r=[],outFields:l=[]}=t,o={outFields:r.concat(l),num:i};return e.set("query",o)},qe=(e,t)=>{var i;const l=e.query.where,o=(0,r.getSplitByValue)({where:l,normalize:!0});if(null===(i=t.outFields)||void 0===i?void 0:i.length){const{pageSize:i}=t,r={where:l,num:i};return e.set("query",r)}{const i=t.outStatistics[0].onStatisticField,r=t.outStatistics[0].statisticType,a=re(i,r,o),s=[Object.assign(Object.assign({},t.outStatistics[0]),{outStatisticFieldName:a})],{groupByFieldsForStatistics:n,pageSize:c}=t,u={where:l,groupByFieldsForStatistics:n,outStatistics:s,num:c};return e.set("query",u).set("y",a)}},Ue=/(?<!^)_(of)_(?!$)/,$e=e=>Ue.test(e),Ge=(e=[],t,i)=>{var r;const l=t.getIdField();i&&(e=((e,t)=>{var i;if(!t)return e;const r={};for(const[e,l]of Object.entries(t))if(2===(null===(i=l.originFields)||void 0===i?void 0:i.length)&&$e(e)){const t=e.replace("_of_","_");r[t]=e}return e.map(e=>{const t={};for(const[i,l]of Object.entries(e))r[i]?t[r[i]]=l:t[i]=l;return t})})(e,null===(r=t.getSchema())||void 0===r?void 0:r.fields));const o=null==e?void 0:e.map((e,i)=>{const r={attributes:null};let o=Object.assign({},e);return o[l]=i,o=(e=>{const t=e.arcgis_charts_type_domain_field_name;if("string"!=typeof t)return e;const i=e.arcgis_charts_type_domain_id_value;return e[t]&&i&&(e.arcgis_charts_type_domain_id_label=e[t],e[t]=i),e})(o),r.attributes=o,t.buildRecord(r)});return o},Je=[0,0,0,0];const We=function(l){var o,a,s,n,c,u,p,g;const{className:m,widgetId:S,webChart:y,layer:f,options:b,onInitDragHandler:M}=l,z=i.React.useRef(null),w=(0,r.getSeriesType)(null==y?void 0:y.series),A=(e=>{var t,i;const l=(0,r.getSplitByField)(null==e?void 0:e.where,!0),o=(null===(t=null==e?void 0:e.outFields)||void 0===t?void 0:t.length)>0&&!(null===(i=null==e?void 0:e.outStatistics)||void 0===i?void 0:i.length);return l&&o})(null===(o=null==y?void 0:y.dataSource)||void 0===o?void 0:o.query),x=y.colorMatch&&(1===(null===(a=null==y?void 0:y.series)||void 0===a?void 0:a.length)||!!(null===(c=null===(n=null===(s=null==y?void 0:y.series)||void 0===s?void 0:s[0])||void 0===n?void 0:n.query)||void 0===c?void 0:c.where)),T=S+"-"+(null!==(u=null==y?void 0:y.id)&&void 0!==u?u:"chart"),C=Ie(),{outputDataSource:D,dataSource:I,queryVersion:j,records:F}=De(),_=i.hooks.useLatest(F),B=i.React.useRef(null),O=i.React.useRef(null),R=i.React.useMemo(()=>{var e;const t=null!==(e=null==I?void 0:I.getCurrentQueryParams())&&void 0!==e?e:{},i=null==I?void 0:I.getMaxRecordCount();return t.pageSize=i,t},[I,j]),E=i.React.useMemo(()=>{let e=null==I?void 0:I.getTimezone();return e&&(e=i.dataSourceUtils.getTimezoneAPIFromRuntime(e)),e},[I]),{where:L,geometry:V,gdbVersion:N,time:k,distance:H,units:q,pageSize:U}=R,$=((e,t)=>{if(null!=e||null!=t)return null==e&&null!=t?t:null!=e&&null==t?e:Math.min(e,t)})(U,null===(g=null===(p=y.dataSource)||void 0===p?void 0:p.query)||void 0===g?void 0:g.pageSize),G=i.React.useMemo(()=>((e,t,i)=>{const l={};if(!(null==e?void 0:e.length))return t;const o=(0,r.getSeriesType)(e);let a="reject";"scatterSeries"===o&&(l.maxScatterPointsBeforeAggregation=t.maxScatterPointsBeforeAggregation,l.maxScatterPointsAfterAggregation=t.maxScatterPointsAfterAggregation);let s="",n=-1;"barSeries"===o?(l.maxBarChartSeriesCount=t.maxBarChartSeriesCount,1===e.length?s="maxBarUniqueSeriesCountTotal":2===e.length?(l.maxBarTwoSeriesCountTotal=t.maxBarTwoSeriesCountTotal,s="maxBarTwoSeriesCountPerSeries"):e.length>2&&(l.maxBarThreePlusSeriesCountTotal=t.maxBarThreePlusSeriesCountTotal,s="maxBarThreePlusSeriesCountPerSeries")):"lineSeries"===o?(l.maxLineChartSeriesCount=t.maxLineChartSeriesCount,1===e.length?s="maxLineUniqueSeriesCountTotal":2===e.length?(l.maxLineTwoSeriesCountTotal=t.maxLineTwoSeriesCountTotal,s="maxLineTwoSeriesCountPerSeries"):e.length>2&&(l.maxLineThreePlusSeriesCountTotal=t.maxLineThreePlusSeriesCountTotal,s="maxLineThreePlusSeriesCountPerSeries")):"pieSeries"===o&&(s="maxPieChartSliceCountTotal");const c=t[s];return i&&i<=c?(n=i,a="renderUpToTheLimit"):n=c,s&&(l[s]=n),l.behaviorAfterLimit=a,l})(null==y?void 0:y.series,h,$),[$,null==y?void 0:y.series]),J=i.React.useMemo(()=>{var t;let i=null===(t=y.dataSource)||void 0===t?void 0:t.query;i&&(i=i.set("pageSize",$));const l=((t,i)=>{let l=null;const o=(0,r.getSeriesType)(t);if(i.where)l=qe;else if(P(o)||"pieSeries"===o){const t=null==i?void 0:i.outFields;if(null==t?void 0:t.length)l=He;else{const t=Y(i);t===e.ByGroup?l=Ne:t===e.ByField&&(l=ke)}}else"gaugeSeries"===o&&(l=Pe);return l?null==t?void 0:t.map(e=>l(e,i)):t})(y.series,i),o=((e,t,i)=>{var l,o;if("gaugeSeries"===(0,r.getSeriesType)(e)){const e=null===(l=null==i?void 0:i.outStatistics)||void 0===l?void 0:l[1],r=null===(o=null==i?void 0:i.outStatistics)||void 0===o?void 0:o[2];if(e||r)return null==t?void 0:t.map(t=>{let i=t;return e&&(i=i.set("minimumFromField",e)),r&&(i=i.set("maximumFromField",r)),i})}return t})(y.series,y.axes,i);return y.set("version","24.0.0").without("dataSource").set("series",l).set("axes",o).set("id",T).set("background",Je)},[T,y,$]),W=i.React.useMemo(()=>{const e={};return L&&(e.where=L),V&&(e.geometry=V,H&&q&&(e.distance=H,e.units=q)),k&&(e.timeExtent=k),N&&(e.gdbVersion=N),Object.keys(e).length?e:void 0},[L,V,H,q,k,N]);i.hooks.useEffectOnce(()=>{null==M||M(null,null,()=>{z.current&&z.current.refresh({updateData:!1,resetAxesBounds:!1})})});const Q=i.React.useCallback(e=>{z.current=e,C({type:"SET_CHART",value:e})},[C]),Z=i.hooks.useEventCallback(e=>{const t=((e,t)=>{let i=[];return P(e)||"pieSeries"===e||"scatterSeries"===e||"gaugeSeries"===e?i=null==t?void 0:t.dataItems:"histogramSeries"===e&&(i=null==t?void 0:t.bins),i})(w,e.detail.chartData),i=Ge(t,D,A);B.current=void 0,O.current=void 0,C({type:"SET_RECORDS",value:i}),C({type:"SET_RENDER_STATE",value:"success"})}),K=i.hooks.useEventCallback(e=>{if("gaugeSeries"!==w||!_.current||!e.detail.bounds[0])return;const{minimum:t,maximum:i}=e.detail.bounds[0];if(t===B.current&&i===O.current)return;B.current=t,O.current=i;const r={[v]:t,[d]:i};let l=_.current.map(e=>e.getData());l=((e,t)=>t&&e?e.map(e=>Object.assign(Object.assign({},e),t)):e)(l,r);const o=Ge(l,D,!1);C({type:"SET_RECORDS",value:o})}),X=i.hooks.useEventCallback(e=>{C({type:"SET_RECORDS",value:void 0}),C({type:"SET_RENDER_STATE",value:"error"})});i.hooks.useUpdateEffect(()=>{z.current&&f&&z.current.refresh({updateData:!0,resetAxesBounds:!1})},[f,N]);const[ee,te]=Ve(S,D,y.series),ie=i.React.useCallback(e=>{if(window.jimuConfig.isInBuilder)if(x){const t=e.detail.colorMatchApplied;(0,i.getAppStore)().dispatch(i.appActions.widgetStatePropChange(S,"colorMatchingApplied",t))}else(0,i.getAppStore)().dispatch(i.appActions.widgetStatePropChange(S,"colorMatchingApplied",void 0))},[S,x]),re=i.React.useCallback(e=>{var t;"emptyDataSet"===(null===(t=e.detail)||void 0===t?void 0:t.keyword)&&(C({type:"SET_RECORDS",value:void 0}),C({type:"SET_RENDER_STATE",value:"warning"}))},[C]);return(0,t.jsx)(r.Chart,Object.assign({},b,{ref:Q,timeZone:E,allowUsingObjectIdStat:!0,className:m,config:J,runtimeDataFilters:W,layer:f,chartLimits:G,selectionData:ee,onarcgisSelectionComplete:te,onarcgisDataProcessComplete:Z,onarcgisDataProcessError:X,onarcgisAxesMinMaxChange:K,onarcgisSeriesColorChange:ie,onarcgisBadDataWarningRaise:re}))},Qe={bar:s(37543),column:s(35374),"stacked-bar":s(42171),"stacked100-bar":s(96984),"stacked-column":s(78418),"stacked100-column":s(46703),line:s(11022),"smooth-line":s(95177),area:s(55099),"smooth-area":s(35496),pie:s(77150),donut:s(9268),scatter:s(64322),histogram:s(11030),gauge:s(52953)},Ye=i.css`
  display: flex;
  justify-content: center;
  position: absolute;
  z-index: 1;
  .jimu-widget-placeholder {
    width: 100%;
    height: 100%;
  }
  .jimu-alert-panel {
    position: absolute;
    width: 100% !important;
    bottom: 0px;
  }
`,Ze=e=>{const{templateType:r,showMessage:l,message:o,messageType:a="tooltip",className:s}=e,n=i.React.useMemo(()=>Qe[r],[r]);return(0,t.jsxs)("div",{className:(0,i.classNames)("placeholder-container w-100 h-100",s),css:Ye,children:[(0,t.jsx)(je.WidgetPlaceholder,{iconSize:"large",icon:n}),l&&(0,t.jsx)(je.Alert,{form:a,banner:!0,withIcon:!0,size:"small",type:"warning",text:o})]})},Ke=(0,g.styled)("div")(e=>`\n      position: relative;\n      display: flex;\n      flex-direction: column;\n      width: 100%;\n      height: 100%;\n      background-color: ${e.background} !important;\n      .chart-toolbar {\n        width: 100%;\n        height: ${e.showTools?"38px":"0px"};\n      }\n      .chart-container {\n        z-index: 0;\n        position: relative;\n        width: 100%;\n        height: ${e.showTools?"calc(100% - 38px)":"100%"} !important;\n        > .web-chart {\n          height: 100%;\n          width: 100%;\n        }\n      }\n      .loader-container {\n        position: absolute;\n        width: 100%;\n        top: ${e.showTools?"38px":"0px"};\n        height: ${e.showTools?"calc(100% - 38px)":"100%"} !important;\n      }\n    `),Xe=e=>{const{className:r,render:l,showPlaceholder:o,showLoading:a,background:s,tools:n,templateType:c,messageType:u,message:v,children:d}=e;return(0,t.jsxs)(Ke,{showTools:!!n,background:s,className:(0,i.classNames)("chart-root",r),children:[l&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"chart-toolbar",children:n}),(0,t.jsx)("div",{className:"chart-container",children:d})]}),o&&(0,t.jsx)(Ze,{templateType:c,message:v,messageType:u,showMessage:!!v}),a&&(0,t.jsx)("div",{className:"loader-container",children:(0,t.jsx)(je.Loading,{type:je.LoadingType.Secondary})})]})};var et=s(41389),tt=s.n(et),it=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(r=Object.getOwnPropertySymbols(e);l<r.length;l++)t.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(e,r[l])&&(i[r[l]]=e[r[l]])}return i};const rt=e=>{const r=window.SVG,{className:l}=e,o=it(e,["className"]),a=(0,i.classNames)("jimu-icon jimu-icon-component",l);return r?(0,t.jsx)(r,Object.assign({className:a,src:tt()},o)):(0,t.jsx)("svg",Object.assign({className:a},o))};var lt=s(60882),ot=s.n(lt),at=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(r=Object.getOwnPropertySymbols(e);l<r.length;l++)t.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(e,r[l])&&(i[r[l]]=e[r[l]])}return i};const st=e=>{const r=window.SVG,{className:l}=e,o=at(e,["className"]),a=(0,i.classNames)("jimu-icon jimu-icon-component",l);return r?(0,t.jsx)(r,Object.assign({className:a,src:ot()},o)):(0,t.jsx)("svg",Object.assign({className:a},o))},nt=e=>{const r=i.hooks.useTranslation(je.defaultMessages),[l,o]=i.React.useState("selection"),{type:a="barSeries",className:s,onChange:n}=e;return(0,t.jsxs)(je.ButtonGroup,{variant:"text",className:(0,i.classNames)("range-cursor-mode",s),children:[(0,t.jsx)(je.Tooltip,{title:r("SelectLabel"),children:(0,t.jsx)(je.Button,{size:"sm",className:"mr-1",icon:!0,"aria-label":r("SelectLabel"),onClick:()=>{"pieSeries"!==a&&(n("selection"),o("selection"))},"aria-pressed":"selection"===l,color:"selection"===l?"primary":"inherit",variant:"selection"===l?"contained":"text",children:(0,t.jsx)(st,{})})}),H(a)&&(0,t.jsx)(je.Tooltip,{title:r("ZoomLabel"),children:(0,t.jsx)(je.Button,{size:"sm",icon:!0,"aria-label":r("ZoomLabel"),onClick:()=>{n("zoom"),o("zoom")},"aria-pressed":"zoom"===l,color:"zoom"===l?"primary":"inherit",variant:"zoom"===l?"contained":"text",children:(0,t.jsx)(rt,{})})})]})};var ct=s(66503),ut=s.n(ct),vt=function(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var l=0;for(r=Object.getOwnPropertySymbols(e);l<r.length;l++)t.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(e,r[l])&&(i[r[l]]=e[r[l]])}return i};const dt=e=>{const r=window.SVG,{className:l}=e,o=vt(e,["className"]),a=(0,i.classNames)("jimu-icon jimu-icon-component",l);return r?(0,t.jsx)(r,Object.assign({className:a,src:ut()},o)):(0,t.jsx)("svg",Object.assign({className:a},o))},ht=e=>{const r=i.hooks.useTranslation(je.defaultMessages),{type:l,className:o,onModeChange:a,onClearSelection:s}=e;return(0,t.jsxs)("div",{className:(0,i.classNames)("selection-zoom d-flex",o),children:[(0,t.jsx)(nt,{type:l,className:"mr-1",onChange:a}),(0,t.jsx)(je.Tooltip,{title:r("clearSelection"),children:(0,t.jsx)(je.Button,{size:"sm",icon:!0,"aria-label":r("clearSelection"),variant:"text",color:"inherit",onClick:s,children:(0,t.jsx)(dt,{})})})]})},pt=(0,g.styled)("div")(({theme:e})=>({width:"100%",display:"flex",alignItems:"center",justifyContent:"flex-end",color:e.sys.color.surface.paperText,".tool-dividing-line":{height:"16px",width:"1px",backgroundColor:e.sys.color.divider.primary}})),gt=e=>{var r,l,o,a;const{type:s="barSeries",className:n,widgetId:c,tools:u,enableDataAction:v}=e,d=i.hooks.useTranslation(je.defaultMessages),h=d("outputStatistics",{name:null!==(o=null===(l=null===(r=(0,i.getAppStore)().getState().appConfig.widgets)||void 0===r?void 0:r[c])||void 0===l?void 0:l.label)&&void 0!==o?o:"Chart"}),{outputDataSource:p,chart:g}=De(),m=null===(a=null==u?void 0:u.cursorEnable)||void 0===a||a,S=m&&v,y=i.ReactRedux.useSelector(e=>{var t;return null===(t=null==e?void 0:e.dataSourcesInfo[null==p?void 0:p.id])||void 0===t?void 0:t.selectedIds}),f=i.React.useMemo(()=>{const e=null==p?void 0:p.getSelectedRecords(),t=(i=p)?Object.keys(i.getSchema().fields):[];var i;return p?[{name:h,type:"selected",dataSource:p,records:e,fields:t}]:[]},[h,p,y]);return i.React.useEffect(()=>{g&&(g.actionMode=m?"multiSelectionWithCtrlKey":"none")},[m,g]),(0,t.jsxs)(pt,{className:(0,i.classNames)("chart-tool-bar px-2 pt-2",n),role:"group","aria-label":d("tools"),children:[m&&(0,t.jsx)(ht,{type:s,className:"mr-1",onModeChange:e=>{g&&("selection"===e?g.actionMode="multiSelectionWithCtrlKey":"zoom"===e&&(g.actionMode="zoom"))},onClearSelection:()=>{var e;if(!g)return;const t=null==p?void 0:p.id,r=null===(e=g.selectionData)||void 0===e?void 0:e.selectionItems;!(null==r?void 0:r.length)&&t&&i.MessageManager.getInstance().publishMessage(new i.DataRecordsSelectionChangeMessage(c,[],[t])),g.clearSelection()}}),S&&(0,t.jsx)("span",{className:"tool-dividing-line mx-1"}),v&&(0,t.jsx)(je.DataActionList,{widgetId:c,buttonType:"tertiary",listStyle:je.DataActionListStyle.Dropdown,dataSets:f})]})},mt=e=>{var l,o,a;const{options:s,widgetId:n,webChart:c,messages:u,useDataSource:v,tools:d,enableDataAction:h=!0,defaultTemplateType:p="column",onInitDragHandler:g}=e,{dataSource:m,outputDataSource:S,renderStatus:y}=De(),f=(e=>{var t,r;const l=i.hooks.useCancelablePromiseMaker(),o=i.React.useRef(null),[a,s]=i.React.useState(null),n=ue(t=>{var i,r;return null===(r=null===(i=t.dataSourcesInfo)||void 0===i?void 0:i[e])||void 0===r?void 0:r.instanceStatus}),c=null!==(r=null===(t=i.DataSourceManager.getInstance().getDataSource(e))||void 0===t?void 0:t.getMainDataSource().id)&&void 0!==r?r:e,u=ue(e=>{var t,i;return null===(i=null===(t=e.dataSourcesInfo)||void 0===t?void 0:t[c])||void 0===i?void 0:i.sourceVersion}),v=ue(t=>{var i,r;return null===(r=null===(i=t.dataSourcesInfo)||void 0===i?void 0:i[e])||void 0===r?void 0:r.sourceVersion}),d=ue(t=>{var i,r;return null===(r=null===(i=t.dataSourcesInfo)||void 0===i?void 0:i[e])||void 0===r?void 0:r.needRefresh}),h=i.React.useRef(d);return i.React.useEffect(()=>{if(n!==i.DataSourceStatus.Created)return;let t=i.DataSourceManager.getInstance().getDataSource(e);if(!t)return void console.error(`No data source founded for id: ${e}`);const r=h.current;h.current=d,!0===r&&!1===d||(t.type!==i.DataSourceTypes.SceneLayer&&t.type!==i.DataSourceTypes.BuildingComponentSubLayer||(t=t.getAssociatedDataSource()),o.current&&(o.current.cancel(),o.current=null),o.current=l(t.createJSAPILayerByDataSource()).then(e=>{"feature"===e.type&&(e.definitionExpression=""),o.current=null,s(e)}).catch(e=>{o.current=null,console.error("Error creating layer from data source",e)}))},[l,e,n,u,v,d]),a})(null==v?void 0:v.dataSourceId),b=(0,r.getSeriesType)(null==c?void 0:c.series),M=null!==(o=null===(l=(e=>{var t,i,l;const o=null==e?void 0:e.series,a=null!==(t=(0,r.getSeriesType)(o))&&void 0!==t?t:"barSeries",s=null==o?void 0:o[0];let n,c;if(!s)return[];if("barSeries"===a){const t=null!==(i=null==e?void 0:e.rotated)&&void 0!==i&&i?"bar":"column",r="sideBySide"===e.stackedType?"":e.stackedType;n=t,c=r?`${r}-${t}`:t}else if("lineSeries"===a){const e=X(o)?"area":"line";let t="";K(o)&&(t="smooth"),n=e,c=t?`${t}-${e}`:e}else"pieSeries"===a?(n="pie",c=(null!==(l=null==s?void 0:s.innerRadius)&&void 0!==l?l:0)>0?"donut":"pie"):"scatterSeries"===a?(n="scatter",c="scatter"):"histogramSeries"===a?(n="histogram",c="histogram"):"gaugeSeries"===a&&(n="gauge",c="gauge");return[n,c]})(c))||void 0===l?void 0:l[1])&&void 0!==o?o:p,z=(null==d?void 0:d.cursorEnable)||!!(null==d?void 0:d.filter)||h,w=null!==(a=null==u?void 0:u.noDataMessage)&&void 0!==a?a:"",A=i.React.useMemo(()=>({noDataMessage:w}),[w]),[x,T,C,D]=Re(v,m,S,f,c,y,A),I=z?(0,t.jsx)(gt,{type:b,tools:d,widgetId:n,enableDataAction:h}):null;return(0,t.jsx)(Xe,{tools:I,render:x,message:D,messageType:"basic",showLoading:C,templateType:M,background:null==c?void 0:c.background,showPlaceholder:T,children:(0,t.jsx)(We,{layer:f,options:s,webChart:c,widgetId:n,onInitDragHandler:g,className:"web-chart jimu-outline-inside"})})},St=e=>{const{widgetId:r,useDataSource:l,onQueryRequired:o,onDataSourceStatusChange:a}=e,{queryVersion:s}=De(),n=Ie();return(0,t.jsx)(i.DataSourceComponent,{widgetId:r,useDataSource:l,onDataSourceCreated:e=>{n({type:"SET_DATA_SOURCE",value:e})},onQueryRequired:()=>{n({type:"SET_QUERY_VERSION",value:s+1}),null==o||o()},onDataSourceStatusChange:a})},yt=e=>{const{widgetId:r,dataSourceId:l,onCreated:o,onSchemaChange:a}=e,{current:s}=i.React.useRef((0,i.getAppStore)().getState().appContext.isInBuilder),{outputDataSource:n,records:c}=De(),u=Ie();i.React.useEffect(()=>{W(n)&&c&&(n.setSourceRecords(c),n.getStatus()!==i.DataSourceStatus.Unloaded&&(n.setStatus(i.DataSourceStatus.Unloaded),n.setCountStatus(i.DataSourceStatus.Unloaded)))},[n,c]);const v=i.React.useMemo(()=>{if(l)return(0,i.Immutable)({dataSourceId:l,mainDataSourceId:l})},[l]),d=e=>{var t,r,l;const o=i.DataSourceManager.getInstance().getDataSource(null===(l=null===(r=null===(t=null==e?void 0:e.getDataSourceJson())||void 0===t?void 0:t.originDataSources)||void 0===r?void 0:r[0])||void 0===l?void 0:l.dataSourceId);e&&o?e.setLayerDefinition(Object.assign(Object.assign({},i.dataSourceUtils.getLayerDefinitionIntersection(o.getLayerDefinition(),e)),{timeInfo:null})):console.error("Failed to sync origin data source info to chart output data source.")};return(0,t.jsx)(i.DataSourceComponent,{widgetId:r,useDataSource:v,onDataSourceCreated:e=>{d(e),u({type:"SET_OUTPUT_DATA_SOURCE",value:e}),null==o||o(e)},onDataSourceSchemaChange:e=>{n&&(null==a||a(e),d(n),s&&n.getStatus()!==i.DataSourceStatus.NotReady&&(n.setStatus(i.DataSourceStatus.NotReady),n.setCountStatus(i.DataSourceStatus.NotReady)))}})},ft=(0,i.Immutable)({}),bt=e=>{var l,o,a,s;const{widgetId:n,useDataSource:c,outputDataSourceId:v,webChart:d,splitByValues:h,onSchemaChange:p}=e,g=Ie(),{dataSource:m,outputDataSource:S}=De(),y=null==c?void 0:c.dataSourceId,f=(0,r.getSplitByField)(null===(o=null===(l=null==d?void 0:d.dataSource)||void 0===l?void 0:l.query)||void 0===o?void 0:o.where,!0),b=null===(a=null==d?void 0:d.series)||void 0===a?void 0:a.length,M=i.hooks.useLatest(null==d?void 0:d.series),z=((e=ft)=>{const{groupByFieldsForStatistics:t,outFields:r,outStatistics:l,where:o}=e;return i.React.useMemo(()=>{let e=(0,i.Immutable)({});return o&&(e=e.set("where",o)),t&&(e=e.set("groupByFieldsForStatistics",t)),r&&(e=e.set("outFields",r)),l&&(e=e.set("outStatistics",l)),Object.keys(e).length>0?e:null},[t,r,l,o])})(null===(s=null==d?void 0:d.dataSource)||void 0===s?void 0:s.query);i.React.useEffect(()=>{var e,t;if(Q(m)&&S){const l=m.id,o=S.id;let a=null===(t=null===(e=(0,i.getAppStore)().getState())||void 0===e?void 0:e.appConfig.dataSources)||void 0===t?void 0:t[o];if(!a)return console.error(`The output data source of ${o} does not exist`),null;let s=null;if(f)(null==h?void 0:h[f])&&(s=((e,t,i,r,l)=>{const o=fe(e),a=r.filter(e=>e.id!==u),s=Se(i,t,a,l);return{idField:o.jimuName,label:e.getLabel(),fields:Object.assign({[o.jimuName]:o},s.asMutable({deep:!0}))}})(S,l,z,M.current,h[f]));else{const e=(0,r.getSeriesType)(M.current);s=((e,t,i,r)=>{const l=fe(e);let o=null;return"histogramSeries"===r?o=pe(i,t):"gaugeSeries"===r?o=me(i,t):P(r)||"pieSeries"===r?o=ye(i,t):"scatterSeries"===r&&(o=ge(i,t)),o={idField:l.jimuName,label:e.getLabel(),fields:Object.assign({[l.jimuName]:l},o&&o.fields)},o})(S,l,z,e)}if(!s)return;if(i.lodash.isDeepEqual(s,a.schema.asMutable({deep:!0})))return;a=a.set("schema",s),((e,t)=>{const r=(0,i.getAppStore)().getState().appConfig.setIn(["dataSources",e],t);i.utils.changeAppConfig(r)})(o,a)}},[m,S,z,b,M,f,h]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(St,{widgetId:n,useDataSource:c,onDataSourceStatusChange:(e,t)=>{W(S)&&e===i.DataSourceStatus.NotReady&&e!==t&&(S.setStatus(i.DataSourceStatus.NotReady),S.setCountStatus(i.DataSourceStatus.NotReady),g({type:"SET_RECORDS",value:void 0}))}}),(0,t.jsx)(yt,{widgetId:n,dataSourceId:v,originalDataSourceId:y,onCreated:e=>{const t=e.getSchema();null==p||p(t)},onSchemaChange:p})]})},Mt=e=>{var l,o,a;const{tools:s,options:n,widgetId:c,messages:v,useDataSource:d,outputDataSourceId:h,defaultTemplateType:p,enableDataAction:g=!0,webChart:m,onInitDragHandler:S}=e,{chart:y,dataSource:f,queryVersion:b}=De(),M=null==d?void 0:d.dataSourceId,z=(0,r.getSplitByField)(null===(o=null===(l=null==m?void 0:m.dataSource)||void 0===l?void 0:l.query)||void 0===o?void 0:o.where,!0),w=null===(a=null==m?void 0:m.dataSource)||void 0===a?void 0:a.query,[A,x]=i.React.useState(),T=i.hooks.useLatest(z);i.React.useEffect(()=>{z&&Q(f)&&((e,t,...i)=>U(void 0,[e,t,...i],void 0,function*(e,t,i=101,r){const l=((e,t)=>{const i=[e];var r;return{where:`${e} IS NOT NULL`,orderByFields:null!=(r=e)&&""!==`${r}`.trim()?[`${e} ASC`]:[],outFields:i,returnDistinctValues:!0,returnGeometry:!1,pageSize:t}})(t,i),o=r?{scope:r}:null;let a=(yield e.query(l,o)).records.map(e=>e.getFieldValue(t)).filter(e=>void 0!==e);return a=[...new Set(a)],a}))(f,z).then(e=>{x({[z]:e})})},[z,b,f]);const C=i.React.useMemo(()=>{if(T.current&&(null==A?void 0:A[T.current])){const e=J(T.current,M),t=((e,t,i,r)=>{const l=e.find(e=>e.id===u),o="barSeries"===l.type?l.fillSymbol:l.lineSymbol;let a=ne(e,t,i,r,!1,{symbol:o});return a=a.map(e=>(e.deletable&&(e=e.without("deletable")),e)),a})(m.series,w,e,A[T.current]);return(0,i.Immutable)(t)}return null==(e=null==m?void 0:m.series)?void 0:e.filter(e=>!e.deletable&&e.id!==u);var e},[M,T,A,null==m?void 0:m.series,w]),D=i.React.useMemo(()=>null==m?void 0:m.set("series",C),[m,C]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(bt,{widgetId:c,webChart:D,outputDataSourceId:h,useDataSource:d,splitByValues:A,onSchemaChange:e=>{e&&(null==y||y.refresh({updateData:!1,resetAxesBounds:!1}))}}),(0,t.jsx)(mt,{widgetId:c,tools:s,options:n,messages:v,webChart:D,useDataSource:d,enableDataAction:g,onInitDragHandler:S,defaultTemplateType:p})]})},zt=e=>{var i,r,l;const{outputDataSources:o,useDataSources:a,config:s,id:n,enableDataAction:c,onInitDragHandler:u}=e,v=null==s?void 0:s.webChart,d=function(e,t){let i;if(void 0!==e&&e.length>0)if(void 0!==t&&t>=0&&t<e.length)i=e[t].type;else{const t=new Set(e.map(e=>e.type)),r=function(e){return 2===e.size&&e.has("lineSeries")&&e.has("barSeries")}(t),l=function(e){return 2===e.size&&e.has("lineSeries")&&e.has("boxPlotSeries")||1===e.size&&e.has("boxPlotSeries")}(t);i=r?"comboLineAndBarSeries":l?"boxPlotSeries":t.size>=2?void 0:e[0].type}return i}(null===(i=null==s?void 0:s.webChart)||void 0===i?void 0:i.series),h=null!==(r=null==s?void 0:s.tools)&&void 0!==r?r:q(d),g=null!==(l=null==s?void 0:s.options)&&void 0!==l?l:p,m=null==s?void 0:s.messages,S=null==s?void 0:s._templateType;return(0,t.jsx)(je.Paper,{variant:"flat",shape:"none",transparent:!0,className:"jimu-widget widget-chart",children:(0,t.jsx)(Ce,{children:(0,t.jsx)(Mt,{widgetId:n,tools:h,messages:m,options:g,webChart:v,useDataSource:null==a?void 0:a[0],enableDataAction:c,onInitDragHandler:u,defaultTemplateType:S,outputDataSourceId:null==o?void 0:o[0]})})})};zt.versionManager=ze;const wt=zt;function At(e){s.p=e}})(),n})())}}});