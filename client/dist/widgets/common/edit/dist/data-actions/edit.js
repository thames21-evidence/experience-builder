System.register(["jimu-core","jimu-arcgis"],function(e,t){var o={},r={};return{setters:[function(e){o.AbstractDataAction=e.AbstractDataAction,o.DataLevel=e.DataLevel,o.DataSourceStatus=e.DataSourceStatus,o.Immutable=e.Immutable,o.appActions=e.appActions,o.getAppStore=e.getAppStore},function(e){r.MapViewManager=e.MapViewManager}],execute:function(){e((()=>{var e={62686:e=>{"use strict";e.exports=r},79244:e=>{"use strict";e.exports=o}},t={};function i(o){var r=t[o];if(void 0!==r)return r.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,i),a.exports}i.d=(e,t)=>{for(var o in t)i.o(t,o)&&!i.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.p="";var a={};return i.p=window.jimuConfig.baseUrl,(()=>{"use strict";i.r(a),i.d(a,{default:()=>u});var e,t,o,r,n=i(79244);!function(e){e.Attribute="ATTRIBUTE",e.Geometry="GEOMETRY"}(e||(e={})),function(e){e.Webmap="WEBMAP",e.Custom="CUSTOM"}(t||(t={})),function(e){e.NoMap="NOMAP",e.NoLayer="NOEDITABLE"}(o||(o={})),function(e){e.Prescriptive="PRESCRIPTIVE",e.Flexible="FLEXIBLE"}(r||(r={}));var s=i(62686);class u extends n.AbstractDataAction{isSupported(t,o,r){var i,a;let u=!1,d=!1;const l=t[0],{dataSource:c,records:p}=l,g=(0,n.getAppStore)().getState(),f=null==g?void 0:g.appConfig,v=null===(i=null==g?void 0:g.widgetsRuntimeInfo[this.widgetId])||void 0===i?void 0:i.controllerWidgetId,m=null==f?void 0:f.widgets[this.widgetId];if(!m)return;const S=m.useMapWidgetIds||(0,n.Immutable)([]),{layersConfig:A,mapViewsConfig:b,editMode:y}=m.config;if(y===e.Geometry){if(1===S.length){const e=(null===(a=s.MapViewManager.getInstance().getJimuMapViewGroup(S[0]))||void 0===a?void 0:a.getAllJimuMapViews())||[];for(const t of e){const e=null==b?void 0:b[t.id];if(e){e.layersConfig.find(e=>e.id===c.id)&&(d=!0)}else{t.getAllJimuLayerViews().map(e=>e.layerDataSourceId).includes(c.id)&&(d=!0)}}}}else d=!!A.find(e=>e.useDataSource.dataSourceId===c.id);return d&&o===n.DataLevel.Records&&(null==p?void 0:p.length)>0&&v&&(u=!0),Promise.resolve(u&&c.getStatus()!==n.DataSourceStatus.NotReady)}onExecute(e,t,o){return(0,n.getAppStore)().dispatch(n.appActions.openWidgets([this.widgetId])),Promise.resolve(!0)}}})(),a})())}}});