System.register(["jimu-core","jimu-arcgis"],function(e,t){var i={},o={};return{setters:[function(e){i.Immutable=e.Immutable},function(e){o.mapViewUtils=e.mapViewUtils}],execute:function(){e((()=>{var e={62686:e=>{"use strict";e.exports=o},79244:e=>{"use strict";e.exports=i}},t={};function r(i){var o=t[i];if(void 0!==o)return o.exports;var n=t[i]={exports:{}};return e[i](n,n.exports,r),n.exports}r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="";var n={};return r.p=window.jimuConfig.baseUrl,(()=>{"use strict";r.r(n),r.d(n,{default:()=>i});var e=r(79244),t=r(62686);class i{constructor(){this.id="edit-app-config-operation"}afterWidgetCopied(i,o,r,n,s){if(!s)return n;let a=n;const u=o.widgets[i],c=null==u?void 0:u.config;if(c.mapViewsConfig){let i=(0,e.Immutable)({});for(const[o,r]of Object.entries(c.mapViewsConfig)){const n=(r.customJimuLayerViewIds||(0,e.Immutable)([])).map(e=>t.mapViewUtils.getCopiedJimuLayerViewId(s,e)),a=r.set("customJimuLayerViewIds",n),u=t.mapViewUtils.getCopiedJimuMapViewId(s,o);i=i.set(u,a)}a=a.setIn(["widgets",r,"config","mapViewsConfig"],i)}return a}useDataSourceWillChange(e,t){const i=e.widgets[this.widgetId];let r=e,n=i;const s=i.config,a=s.layersConfig,u=a.filter(e=>o(e.useDataSource,t));a.length!==u.length&&(n=n.setIn(["config","layersConfig"],u));for(const[e,i]of Object.entries(s.mapViewsConfig||{})){const r=i.layersConfig,s=r.filter(e=>o(e.useDataSource,t));r.length!==s.length&&(n=n.setIn(["config","mapViewsConfig",e,"layersConfig"],s))}return n!==i&&(r=r.setIn(["widgets",this.widgetId],n)),r}}const o=(e,t)=>![null==e?void 0:e.dataSourceId,null==e?void 0:e.rootDataSourceId].includes(t)})(),n})())}}});