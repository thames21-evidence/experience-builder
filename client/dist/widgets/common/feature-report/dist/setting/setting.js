System.register(["jimu-core/emotion","jimu-core","jimu-ui","jimu-for-builder","jimu-ui/advanced/setting-components","jimu-ui/advanced/data-source-selector","jimu-ui/basic/list-tree","jimu-core/react"],function(e,t){var i={},s={},r={},n={},a={},o={},l={},c={};return{setters:[function(e){i.Fragment=e.Fragment,i.jsx=e.jsx,i.jsxs=e.jsxs},function(e){s.CONSTANTS=e.CONSTANTS,s.DataSourceComponent=e.DataSourceComponent,s.DataSourceManager=e.DataSourceManager,s.DataSourceTypes=e.DataSourceTypes,s.Immutable=e.Immutable,s.React=e.React,s.SessionManager=e.SessionManager,s.SupportedServerTypes=e.SupportedServerTypes,s.classNames=e.classNames,s.css=e.css,s.dataSourceUtils=e.dataSourceUtils,s.dateUtils=e.dateUtils,s.defaultMessages=e.defaultMessages,s.esri=e.esri,s.focusElementInKeyboardMode=e.focusElementInKeyboardMode,s.getAppStore=e.getAppStore,s.hooks=e.hooks,s.i18n=e.i18n,s.polished=e.polished,s.portalUrlUtils=e.portalUrlUtils},function(e){r.Alert=e.Alert,r.AlertPopup=e.AlertPopup,r.Button=e.Button,r.Checkbox=e.Checkbox,r.Dropdown=e.Dropdown,r.DropdownButton=e.DropdownButton,r.DropdownItem=e.DropdownItem,r.DropdownMenu=e.DropdownMenu,r.Icon=e.Icon,r.Label=e.Label,r.Loading=e.Loading,r.LoadingType=e.LoadingType,r.Modal=e.Modal,r.ModalBody=e.ModalBody,r.ModalFooter=e.ModalFooter,r.ModalHeader=e.ModalHeader,r.Radio=e.Radio,r.Select=e.Select,r.TextArea=e.TextArea,r.TextInput=e.TextInput,r.Tooltip=e.Tooltip,r.defaultMessages=e.defaultMessages},function(e){n.builderAppSync=e.builderAppSync,n.helpUtils=e.helpUtils},function(e){a.SettingRow=e.SettingRow,a.SettingSection=e.SettingSection,a.SidePopper=e.SidePopper},function(e){o.AllDataSourceTypes=e.AllDataSourceTypes,o.DataSourceSelector=e.DataSourceSelector,o.FieldSelector=e.FieldSelector},function(e){l.List=e.List,l.TreeItemActionType=e.TreeItemActionType},function(e){c.Fragment=e.Fragment}],execute:function(){e((()=>{var e={27:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M12 6.5c0 .527-.074 1.036-.212 1.518l.912.438a6.5 6.5 0 1 0-6.586 4.533l-.077-1.008A5.5 5.5 0 1 1 12 6.5m-9 0a3.5 3.5 0 0 0 2.88 3.445L5.8 8.901a2.501 2.501 0 1 1 3.194-2.224l.949.456A3.5 3.5 0 1 0 3 6.5M15.5 11l-5 1-3 4-1-9.5zm-5.57.094-1.702 2.269-.542-5.152 4.76 2.38z" clip-rule="evenodd"></path></svg>'},46:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M11.227 1.312c-.404-.404-1.045-.417-1.432-.03L2.49 8.587l-.48 2.674a.637.637 0 0 0 .73.73l2.673-.48 7.305-7.306c.387-.387.374-1.028-.03-1.431zm-8.114 9.575.32-1.781 4.991-4.992 1.462 1.462-4.992 4.991zm7.473-6.012 1.402-1.4-1.462-1.463-1.401 1.402z" clip-rule="evenodd"></path><path fill="#000" d="M1.5 14a.5.5 0 0 0 0 1h13a.5.5 0 0 0 0-1z"></path></svg>'},73:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m7 11.5 5.354-5.354-.708-.707L7 10.086 4.354 7.439l-.708.707z"></path><path fill="#000" fill-rule="evenodd" d="M0 8a8 8 0 1 0 16 0A8 8 0 0 0 0 8m15 0A7 7 0 1 1 1 8a7 7 0 0 1 14 0" clip-rule="evenodd"></path></svg>'},89:e=>{"use strict";e.exports=o},108:e=>{"use strict";e.exports=n},153:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxnIGlkPSJpY29uIj4NCjxwYXRoIGlkPSJ2ZWN0b3IiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTAuODMyNiAxMC4zODU4QzEwLjg0MDcgMTAuMDk4MSAxMC44ODMzIDkuODEyNDIgMTAuOTU5NyA5LjUzNDk0QzExLjA2NzMgOS4zMTMwNiAxMS4yMDE5IDkuMTA1MzcgMTEuMzYwNiA4LjkxNjU5QzEyLjE2NDYgNy45Njc1MiAxMi42NTEzIDYuNzkwNjIgMTIuNzUyNiA1LjU1MDk0QzEyLjgzMzggNC4yMjAxMyAxMi4yOTMyIDIuOTI2OTEgMTEuMjg5MSAyLjA0OTc2QzkuNzE0NDIgMC42NDU0NTQgNy4zNDU5NyAwLjYxNTM0NyA1LjczNjEzIDEuOTc5MThDNC42Nzg2MiAyLjg1MzMgNC4xMDMxMiA0LjE4MDYgNC4xODc5IDUuNTVDNC4yODkyNiA2Ljc5MDEyIDQuNzc2MzYgNy45NjczOCA1LjU4MDg0IDguOTE2NTlDNS43Mzk3NSA5LjEwNTUyIDUuODc0NDQgOS4zMTM1NiA1Ljk4MTc4IDkuNTM1ODhDNi4wNTc4NiA5LjgxMzA3IDYuMTAwMjEgMTAuMDk4NCA2LjEwNzkgMTAuMzg1OEM2LjExNzg2IDEwLjY0NDIgNi4xNDkzNCAxMC45MDE1IDYuMjAyMDIgMTEuMTU0N0M2LjIxNDI1IDExLjIxMDIgNi4yMzU5IDExLjI0NDEgNi4yNTAwMiAxMS4yOTRINS45NTYzN0w2LjM3OTkgMTIuNzA1OEw2LjAzNjM3IDEzLjg0OTNMNy40MzU5IDE0Ljc1OTRDOC4wNjU3NCAxNS4xNjc5IDguODc3MDEgMTUuMTY3NiA5LjUwNjQ5IDE0Ljc1ODVMMTAuOTA2IDEzLjg0OTNMMTAuNTYzNCAxMi43MDU4TDEwLjk4NiAxMS4yOTRIMTAuNjkyNEMxMC43MDY1IDExLjI0NDEgMTAuNzI4MSAxMS4yMDkzIDEwLjc0MDQgMTEuMTU0N0MxMC43OTMgMTAuOTAxNSAxMC44MjQ1IDEwLjY0NDIgMTAuODM0NSAxMC4zODU4SDEwLjgzMjZaTTguOTk0NDkgMTMuOTY4OEM4LjY3NDk2IDE0LjE3MjMgOC4yNjY0OSAxNC4xNzIzIDcuOTQ2OTYgMTMuOTY4OEw3LjE0MDM3IDEzLjQ0NDZMNy4zNjE1NSAxMi43MDU4TDcuMjIwMzcgMTIuMjM1Mkg5LjcyMDEzTDkuNTc4OTYgMTIuNzA1OEw5LjgwMDEzIDEzLjQ0NDZMOC45OTQ0OSAxMy45Njg4Wk04Ljk0MDg0IDExLjI5NFY4LjQ3MDQ3SDcuOTk5NjZWMTEuMjk0SDcuMjU2MTNDNy4xODg3OCAxMS4xODk0IDcuMTQyNDIgMTEuMDcyOCA3LjExOTY2IDEwLjk1MDVDNy4wNzc1NSAxMC43NDU5IDcuMDUyOTkgMTAuNTM4MSA3LjA0NjI1IDEwLjMyOTNDNy4wMzU0NCA5Ljk3MzM5IDYuOTgxNzIgOS42MjAwOSA2Ljg4NjI1IDkuMjc3MDZDNi43NTcyOSA4LjkzOTY2IDYuNTcwNjcgOC42MjcyNSA2LjMzNDcyIDguMzUzNzZDNS42NDI2NiA3LjU1MDY3IDUuMjIwMjggNi41NTA1MiA1LjEyNzE5IDUuNDk0NDdDNS4wNjE3NyA0LjQyMjE5IDUuNTEzMDEgMy4zODMyNyA2LjM0MTMxIDIuNjk5MThDNy41OTU2OSAxLjYzODEyIDkuNDM5NzcgMS42NjIxOSAxMC42NjYgMi43NTU2NUMxMS40NTIzIDMuNDQxNDIgMTEuODc2IDQuNDUzMDUgMTEuODEzMyA1LjQ5NDQ3QzExLjcyMDIgNi41NTA1MiAxMS4yOTc4IDcuNTUwNjcgMTAuNjA1OCA4LjM1Mzc2QzEwLjM3MDQgOC42MjcxMyAxMC4xODQxIDguOTM5MTkgMTAuMDU1MiA5LjI3NjEyQzkuOTU5NDYgOS42MTk0NCA5LjkwNTQyIDkuOTczMDUgOS44OTQyNSAxMC4zMjkzQzkuODg3NTEgMTAuNTM4MSA5Ljg2Mjk1IDEwLjc0NTkgOS44MjA4NCAxMC45NTA1QzkuNzk3MDYgMTEuMDcxNyA5Ljc1MjQ4IDExLjE4NzkgOS42ODkwOCAxMS4yOTRIOC45NDA4NFpNOS44ODIwMiA3LjUyOTI5SDcuMDU4NDlWNi41ODgxMkg5Ljg4MjAyVjcuNTI5MjlaIiBmaWxsPSJ3aGl0ZSIvPg0KPC9nPg0KPC9zdmc+DQo="},207:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M0 0h16v16H0z" opacity=".01"></path><path fill="#000" d="M2 7.527q.65 0 .984-.457t.333-1.293V3.971q0-.552.15-.93.15-.379.4-.6a1.4 1.4 0 0 1 .567-.33Q4.767 2 5.118 2h1.05v.851h-.8q-.3 0-.5.126a.76.76 0 0 0-.284.3 1.3 1.3 0 0 0-.133.426q-.034.236-.034.457v1.806q0 .569-.183.962a1.9 1.9 0 0 1-.417.615 1.7 1.7 0 0 1-.483.33q-.25.095-.4.111v.032q.15.015.4.126.25.094.483.331.25.22.417.615.183.378.183.946v1.806q0 .221.034.457.033.237.133.426a.76.76 0 0 0 .284.3q.2.126.5.126h.8V14h-1.05q-.351 0-.684-.11a1.4 1.4 0 0 1-.567-.331 1.54 1.54 0 0 1-.4-.6q-.15-.378-.15-.93v-1.806q0-.835-.333-1.293Q2.65 8.473 2 8.473zM14 8.473q-.65 0-.984.457t-.333 1.293v1.806q0 .552-.15.93-.15.379-.4.6a1.4 1.4 0 0 1-.584.33q-.316.111-.667.111h-1.05v-.851h.8q.3 0 .484-.126a.73.73 0 0 0 .3-.3q.1-.189.133-.426a3 3 0 0 0 .034-.457v-1.806q0-.568.166-.946.183-.395.417-.615.25-.237.5-.331.25-.111.4-.126v-.032q-.15-.015-.4-.11a2 2 0 0 1-.5-.331 2.3 2.3 0 0 1-.417-.615q-.166-.394-.167-.962V4.16q0-.221-.033-.457a1.3 1.3 0 0 0-.133-.426.73.73 0 0 0-.3-.3.84.84 0 0 0-.484-.126h-.8V2h1.05q.35 0 .667.11.334.095.584.331.25.221.4.6.15.378.15.93v1.806q0 .836.333 1.293.334.457.984.457z"></path></svg>'},213:function(e,t,i){var s,r,n;r=[],void 0===(n="function"==typeof(s=function(){"use strict";function t(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function s(e,t,i){var s=new XMLHttpRequest;s.open("GET",e),s.responseType="blob",s.onload=function(){l(s.response,t,i)},s.onerror=function(){console.error("could not download file")},s.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function n(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(i){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof i.g&&i.g.global===i.g?i.g:void 0,o=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(e,t,i){var o=a.URL||a.webkitURL,l=document.createElement("a");t=t||e.name||"download",l.download=t,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?n(l):r(l.href)?s(e,t,i):n(l,l.target="_blank")):(l.href=o.createObjectURL(e),setTimeout(function(){o.revokeObjectURL(l.href)},4e4),setTimeout(function(){n(l)},0))}:"msSaveOrOpenBlob"in navigator?function(e,i,a){if(i=i||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,a),i);else if(r(e))s(e,i,a);else{var o=document.createElement("a");o.href=e,o.target="_blank",setTimeout(function(){n(o)})}}:function(e,t,i,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof e)return s(e,t,i);var n="application/octet-stream"===e.type,l=/constructor/i.test(a.HTMLElement)||a.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||n&&l||o)&&"undefined"!=typeof FileReader){var p=new FileReader;p.onloadend=function(){var e=p.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=e:location=e,r=null},p.readAsDataURL(e)}else{var d=a.URL||a.webkitURL,u=d.createObjectURL(e);r?r.location=u:location.href=u,r=null,setTimeout(function(){d.revokeObjectURL(u)},4e4)}});a.saveAs=l.saveAs=l,e.exports=l})?s.apply(t,r):s)||(e.exports=n)},226:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTAuNSA1QzEwLjIyMzkgNSAxMCA1LjIyMzg2IDEwIDUuNVY3LjVDMTAgNy43NzYxNCAxMC4yMjM5IDggMTAuNSA4SDIxLjVDMjEuNzc2MSA4IDIyIDcuNzc2MTQgMjIgNy41VjUuNUMyMiA1LjIyMzg2IDIxLjc3NjEgNSAyMS41IDVIMTAuNVpNMTEgN1Y2SDIxVjdIMTFaIiBmaWxsPSJ3aGl0ZSIvPg0KPHBhdGggZD0iTTcuNSA5QzcuMjIzODYgOSA3IDkuMjIzODYgNyA5LjVDNyA5Ljc3NjE0IDcuMjIzODYgMTAgNy41IDEwSDE5LjVDMTkuNzc2MSAxMCAyMCA5Ljc3NjE0IDIwIDkuNUMyMCA5LjIyMzg2IDE5Ljc3NjEgOSAxOS41IDlINy41WiIgZmlsbD0id2hpdGUiLz4NCjxwYXRoIGQ9Ik03LjggMTVDNy45MTA0NiAxNSA4IDE1LjA4OTUgOCAxNS4yVjE1LjhDOCAxNS45MTA1IDcuOTEwNDYgMTYgNy44IDE2SDcuMkM3LjA4OTU0IDE2IDcgMTUuOTEwNSA3IDE1LjhWMTUuMkM3IDE1LjA4OTUgNy4wODk1NCAxNSA3LjIgMTVINy44WiIgZmlsbD0id2hpdGUiLz4NCjxwYXRoIGQ9Ik05LjggMTVDOS45MTA0NiAxNSAxMCAxNS4wODk1IDEwIDE1LjJWMTUuOEMxMCAxNS45MTA1IDkuOTEwNDYgMTYgOS44IDE2SDkuMkM5LjA4OTU0IDE2IDkgMTUuOTEwNSA5IDE1LjhWMTUuMkM5IDE1LjA4OTUgOS4wODk1NCAxNSA5LjIgMTVIOS44WiIgZmlsbD0id2hpdGUiLz4NCjxwYXRoIGQ9Ik0xMiAxNS4yQzEyIDE1LjA4OTUgMTEuOTEwNSAxNSAxMS44IDE1SDExLjJDMTEuMDg5NSAxNSAxMSAxNS4wODk1IDExIDE1LjJWMTUuOEMxMSAxNS45MTA1IDExLjA4OTUgMTYgMTEuMiAxNkgxMS44QzExLjkxMDUgMTYgMTIgMTUuOTEwNSAxMiAxNS44VjE1LjJaIiBmaWxsPSJ3aGl0ZSIvPg0KPHBhdGggZD0iTTcgMTEuNUM3IDExLjIyMzkgNy4yMjM4NiAxMSA3LjUgMTFIMjQuNUMyNC43NzYxIDExIDI1IDExLjIyMzkgMjUgMTEuNUMyNSAxMS43NzYxIDI0Ljc3NjEgMTIgMjQuNSAxMkg3LjVDNy4yMjM4NiAxMiA3IDExLjc3NjEgNyAxMS41WiIgZmlsbD0id2hpdGUiLz4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNyAxNy41QzcgMTcuMjIzOSA3LjIyMzg4IDE3IDcuNSAxN0gyNC41QzI0Ljc3NjEgMTcgMjUgMTcuMjIzOSAyNSAxNy41VjI2LjVDMjUgMjYuNzc2MSAyNC43NzYxIDI3IDI0LjUgMjdINy41QzcuMjIzODggMjcgNyAyNi43NzYxIDcgMjYuNVYxNy41Wk04IDIxVjIzSDEyVjIxSDhaTTEzIDIxVjIzSDE5VjIxSDEzWk0xMyAyNEgxOVYyNkgxM1YyNFpNMjQgMjRWMjZIMjBWMjRIMjRaTTIwIDIxVjIzSDI0VjIxSDIwWk0yNCAxOFYyMEgyMFYxOEgyNFpNMTMgMThIMTlWMjBIMTNWMThaTTEyIDI0SDhWMjZIMTJWMjRaTTEyIDE4VjIwSDhWMThIMTJaIiBmaWxsPSJ3aGl0ZSIvPg0KPHBhdGggZD0iTTcuNSAxM0M3LjIyMzg2IDEzIDcgMTMuMjIzOSA3IDEzLjVDNyAxMy43NzYxIDcuMjIzODYgMTQgNy41IDE0SDI0LjVDMjQuNzc2MSAxNCAyNSAxMy43NzYxIDI1IDEzLjVDMjUgMTMuMjIzOSAyNC43NzYxIDEzIDI0LjUgMTNINy41WiIgZmlsbD0id2hpdGUiLz4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjcgMkMyNy41NTIzIDIgMjggMi40NDc3MiAyOCAzVjI5QzI4IDI5LjU1MjMgMjcuNTUyMyAzMCAyNyAzMEg1QzQuNDQ3NzIgMzAgNCAyOS41NTIzIDQgMjlWM0M0IDIuNDQ3NzIgNC40NDc3MiAyIDUgMkgyN1pNMjcgM0g1VjI5SDI3VjNaIiBmaWxsPSJ3aGl0ZSIvPg0KPC9zdmc+DQo="},244:e=>{"use strict";e.exports=s},298:e=>{"use strict";e.exports=a},303:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M9.438.994c.213 0 .397.146.44.35q.227 1.084.316 1.852.562.242 1.048.599l1.728-.676a.455.455 0 0 1 .556.188l1.42 2.394a.43.43 0 0 1-.091.547 22 22 0 0 1-1.49 1.194q.03.27.03.552 0 .32-.038.63l1.465 1.12a.43.43 0 0 1 .111.563l-1.42 2.394a.454.454 0 0 1-.53.197 23 23 0 0 1-1.807-.66q-.49.35-1.055.586l-.263 1.794a.446.446 0 0 1-.445.376H6.574a.446.446 0 0 1-.44-.35 21 21 0 0 1-.317-1.853 5.3 5.3 0 0 1-1.047-.598l-1.728.675a.455.455 0 0 1-.556-.187l-1.42-2.395a.43.43 0 0 1 .091-.546q.85-.735 1.49-1.194a5.167 5.167 0 0 1 .008-1.183L1.19 6.243a.43.43 0 0 1-.112-.562l1.42-2.395a.455.455 0 0 1 .531-.196q1.078.35 1.807.66c.324-.233.679-.43 1.056-.587l.262-1.794A.446.446 0 0 1 6.6.994zm-.365 1H6.985l-.28 1.866-.467.19q-.353.144-.672.34l-.207.136-.42.293-.476-.197q-.492-.205-1.169-.433l-.221-.074-1.045 1.719L3.59 6.999l-.06.479a4 4 0 0 0-.021.816l.014.144.058.492-.419.294q-.433.304-.979.746l-.177.145 1.043 1.72 1.845-.703.406.29q.307.219.645.384l.228.103.474.199.059.49q.06.507.19 1.177l.043.219h2.088l.282-1.867.466-.19q.354-.144.672-.34l.207-.136.419-.293.476.198q.495.204 1.17.433l.22.072 1.044-1.718-1.56-1.165.06-.479a4 4 0 0 0 .02-.815l-.013-.144-.06-.492.42-.295a18 18 0 0 0 .98-.746l.176-.146-1.043-1.72-1.844.705-.406-.29a4.5 4.5 0 0 0-.646-.385l-.228-.103-.474-.199-.058-.49q-.049-.405-.14-.916zm-1.067 3a3 3 0 1 1 0 6 3 3 0 0 1 0-6m0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4" clip-rule="evenodd"></path></svg>'},321:e=>{"use strict";e.exports=r},386:e=>{"use strict";e.exports=i},443:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M6 1H1v14h14v-5h-1v4H2V2h4zm4 1h3.242L7.257 7.985l.707.707L14 2.657V6h1V1h-5z" clip-rule="evenodd"></path></svg>'},479:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGQ9Ik0xMS44IDE3QzExLjkxMDUgMTcgMTIgMTcuMDg5NSAxMiAxNy4yVjE3LjhDMTIgMTcuOTEwNSAxMS45MTA1IDE4IDExLjggMThIMTEuMkMxMS4wODk1IDE4IDExIDE3LjkxMDUgMTEgMTcuOFYxNy4yQzExIDE3LjA4OTUgMTEuMDg5NSAxNyAxMS4yIDE3SDExLjhaIiBmaWxsPSJ3aGl0ZSIvPg0KPHBhdGggZD0iTTkuOCAxN0M5LjkxMDQ2IDE3IDEwIDE3LjA4OTUgMTAgMTcuMlYxNy44QzEwIDE3LjkxMDUgOS45MTA0NiAxOCA5LjggMThIOS4yQzkuMDg5NTQgMTggOSAxNy45MTA1IDkgMTcuOFYxNy4yQzkgMTcuMDg5NSA5LjA4OTU0IDE3IDkuMiAxN0g5LjhaIiBmaWxsPSJ3aGl0ZSIvPg0KPHBhdGggZD0iTTcuOCAxN0M3LjkxMDQ2IDE3IDggMTcuMDg5NSA4IDE3LjJWMTcuOEM4IDE3LjkxMDUgNy45MTA0NiAxOCA3LjggMThINy4yQzcuMDg5NTQgMTggNyAxNy45MTA1IDcgMTcuOFYxNy4yQzcgMTcuMDg5NSA3LjA4OTU0IDE3IDcuMiAxN0g3LjhaIiBmaWxsPSJ3aGl0ZSIvPg0KPHBhdGggZD0iTTcuOCA1QzcuOTEwNDYgNSA4IDUuMDg5NTQgOCA1LjJWNS44QzggNS45MTA0NiA3LjkxMDQ2IDYgNy44IDZINy4yQzcuMDg5NTQgNiA3IDUuOTEwNDYgNyA1LjhWNS4yQzcgNS4wODk1NCA3LjA4OTU0IDUgNy4yIDVINy44WiIgZmlsbD0id2hpdGUiLz4NCjxwYXRoIGQ9Ik0xMS44IDVDMTEuOTEwNSA1IDEyIDUuMDg5NTQgMTIgNS4yVjUuOEMxMiA1LjkxMDQ2IDExLjkxMDUgNiAxMS44IDZIMTEuMkMxMS4wODk1IDYgMTEgNS45MTA0NiAxMSA1LjhWNS4yQzExIDUuMDg5NTQgMTEuMDg5NSA1IDExLjIgNUgxMS44WiIgZmlsbD0id2hpdGUiLz4NCjxwYXRoIGQ9Ik05LjggNUM5LjkxMDQ2IDUgMTAgNS4wODk1NCAxMCA1LjJWNS44QzEwIDUuOTEwNDYgOS45MTA0NiA2IDkuOCA2SDkuMkM5LjA4OTU0IDYgOSA1LjkxMDQ2IDkgNS44VjUuMkM5IDUuMDg5NTQgOS4wODk1NCA1IDkuMiA1SDkuOFoiIGZpbGw9IndoaXRlIi8+DQo8cGF0aCBkPSJNNyA3LjVDNyA3LjIyMzg2IDcuMjIzODYgNyA3LjUgN0gxOS41QzE5Ljc3NjEgNyAyMCA3LjIyMzg2IDIwIDcuNUMyMCA3Ljc3NjE0IDE5Ljc3NjEgOCAxOS41IDhINy41QzcuMjIzODYgOCA3IDcuNzc2MTQgNyA3LjVaIiBmaWxsPSJ3aGl0ZSIvPg0KPHBhdGggZD0iTTcuNSA5QzcuMjIzODYgOSA3IDkuMjIzODYgNyA5LjVDNyA5Ljc3NjE0IDcuMjIzODYgMTAgNy41IDEwSDI0LjVDMjQuNzc2MSAxMCAyNSA5Ljc3NjE0IDI1IDkuNUMyNSA5LjIyMzg2IDI0Ljc3NjEgOSAyNC41IDlINy41WiIgZmlsbD0id2hpdGUiLz4NCjxwYXRoIGQ9Ik03IDExLjVDNyAxMS4yMjM5IDcuMjIzODYgMTEgNy41IDExSDI0LjVDMjQuNzc2MSAxMSAyNSAxMS4yMjM5IDI1IDExLjVDMjUgMTEuNzc2MSAyNC43NzYxIDEyIDI0LjUgMTJINy41QzcuMjIzODYgMTIgNyAxMS43NzYxIDcgMTEuNVoiIGZpbGw9IndoaXRlIi8+DQo8cGF0aCBkPSJNNy41IDE5QzcuMjIzODYgMTkgNyAxOS4yMjM5IDcgMTkuNUM3IDE5Ljc3NjEgNy4yMjM4NiAyMCA3LjUgMjBIMTkuNUMxOS43NzYxIDIwIDIwIDE5Ljc3NjEgMjAgMTkuNUMyMCAxOS4yMjM5IDE5Ljc3NjEgMTkgMTkuNSAxOUg3LjVaIiBmaWxsPSJ3aGl0ZSIvPg0KPHBhdGggZD0iTTcgMjEuNUM3IDIxLjIyMzkgNy4yMjM4NiAyMSA3LjUgMjFIMjQuNUMyNC43NzYxIDIxIDI1IDIxLjIyMzkgMjUgMjEuNUMyNSAyMS43NzYxIDI0Ljc3NjEgMjIgMjQuNSAyMkg3LjVDNy4yMjM4NiAyMiA3IDIxLjc3NjEgNyAyMS41WiIgZmlsbD0id2hpdGUiLz4NCjxwYXRoIGQ9Ik03LjUgMjNDNy4yMjM4NiAyMyA3IDIzLjIyMzkgNyAyMy41QzcgMjMuNzc2MSA3LjIyMzg2IDI0IDcuNSAyNEgyNC41QzI0Ljc3NjEgMjQgMjUgMjMuNzc2MSAyNSAyMy41QzI1IDIzLjIyMzkgMjQuNzc2MSAyMyAyNC41IDIzSDcuNVoiIGZpbGw9IndoaXRlIi8+DQo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTI4IDNDMjggMi40NDc3MiAyNy41NTIzIDIgMjcgMkg1QzQuNDQ3NzIgMiA0IDIuNDQ3NzIgNCAzVjI5QzQgMjkuNTUyMyA0LjQ0NzcyIDMwIDUgMzBIMjdDMjcuNTUyMyAzMCAyOCAyOS41NTIzIDI4IDI5VjNaTTUgM0gyN1YyOUg1VjNaIiBmaWxsPSJ3aGl0ZSIvPg0KPHBhdGggZD0iTTcgMTMuNUM3IDEzLjIyMzkgNy4yMjM4NiAxMyA3LjUgMTNIMjQuNUMyNC43NzYxIDEzIDI1IDEzLjIyMzkgMjUgMTMuNUMyNSAxMy43NzYxIDI0Ljc3NjEgMTQgMjQuNSAxNEg3LjVDNy4yMjM4NiAxNCA3IDEzLjc3NjEgNyAxMy41WiIgZmlsbD0id2hpdGUiLz4NCjxwYXRoIGQ9Ik03LjUgMjVDNy4yMjM4NiAyNSA3IDI1LjIyMzkgNyAyNS41QzcgMjUuNzc2MSA3LjIyMzg2IDI2IDcuNSAyNkgyNC41QzI0Ljc3NjEgMjYgMjUgMjUuNzc2MSAyNSAyNS41QzI1IDI1LjIyMzkgMjQuNzc2MSAyNSAyNC41IDI1SDcuNVoiIGZpbGw9IndoaXRlIi8+DQo8L3N2Zz4NCg=="},490:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M3.154 3.154a.527.527 0 0 1 .746 0l1.317 1.317A8.6 8.6 0 0 1 8 4c2.667 0 5.667 1.333 7 4-.696 1.393-1.847 2.422-3.168 3.087l1.014 1.013a.527.527 0 1 1-.746.746l-1.317-1.317A8.6 8.6 0 0 1 8 12c-2.667 0-5.667-1.333-7-4 .696-1.393 1.847-2.422 3.168-3.087L3.154 3.9a.527.527 0 0 1 0-.746m1.698 2.443C3.726 6.087 2.782 6.882 2 8c1.422 2.033 3.382 3 6 3a8.7 8.7 0 0 0 2.03-.225l-.675-.674A2.5 2.5 0 0 1 5.9 6.644zm6.296 4.805C12.275 9.913 13.218 9.119 14 8c-1.422-2.033-3.382-3-6-3q-1.088 0-2.03.225l.675.674a2.5 2.5 0 0 1 3.457 3.456zM6.5 8c0-.221.048-.431.134-.62l1.987 1.986A1.5 1.5 0 0 1 6.5 8m.88-1.366 1.986 1.987a1.5 1.5 0 0 0-1.987-1.987" clip-rule="evenodd"></path></svg>'},499:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m6.036 12.157 8.01-8.01a.5.5 0 1 1 .707.707l-8.01 8.01a1 1 0 0 1-1.415 0L1.146 8.682a.5.5 0 1 1 .708-.707z"></path></svg>'},508:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2M6.5 7.5A.5.5 0 0 1 7 7h1.5v4.5h1a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1h1V8H7a.5.5 0 0 1-.5-.5"></path><path fill="#000" fill-rule="evenodd" d="M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14" clip-rule="evenodd"></path></svg>'},529:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 12c-2.667 0-5.667-1.333-7-4 1.333-2.667 4.333-4 7-4s5.667 1.333 7 4c-1.333 2.667-4.333 4-7 4m0-7c-2.618 0-4.578.967-6 3 1.422 2.033 3.382 3 6 3s4.578-.967 6-3c-1.422-2.033-3.382-3-6-3m0 5.5a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5m0-1a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3" clip-rule="evenodd"></path></svg>'},640:e=>{"use strict";e.exports=l},651:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M2 7a1 1 0 1 0 0 2 1 1 0 0 0 0-2m5 1a1 1 0 1 1 2 0 1 1 0 0 1-2 0m6 0a1 1 0 1 1 2 0 1 1 0 0 1-2 0" clip-rule="evenodd"></path></svg>'},662:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M7.5 0a.5.5 0 0 0-.5.5V7H.5a.5.5 0 0 0 0 1H7v6.5a.5.5 0 0 0 1 0V8h6.5a.5.5 0 0 0 0-1H8V.5a.5.5 0 0 0-.5-.5"></path></svg>'},838:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m8.745 8 6.1 6.1a.527.527 0 1 1-.745.746L8 8.746l-6.1 6.1a.527.527 0 1 1-.746-.746l6.1-6.1-6.1-6.1a.527.527 0 0 1 .746-.746l6.1 6.1 6.1-6.1a.527.527 0 0 1 .746.746z"></path></svg>'},915:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTUgNS41QzE1IDUuMjIzODYgMTUuMjIzOSA1IDE1LjUgNUgyNS41QzI1Ljc3NjEgNSAyNiA1LjIyMzg2IDI2IDUuNVY3LjVDMjYgNy43NzYxNCAyNS43NzYxIDggMjUuNSA4SDE1LjVDMTUuMjIzOSA4IDE1IDcuNzc2MTQgMTUgNy41VjUuNVpNMTYgNlY3SDI1VjZIMTZaIiBmaWxsPSJ3aGl0ZSIvPg0KPHBhdGggZD0iTTE0IDkuNUMxNCA5LjIyMzg2IDE0LjIyMzkgOSAxNC41IDlIMjEuNUMyMS43NzYxIDkgMjIgOS4yMjM4NiAyMiA5LjVDMjIgOS43NzYxNCAyMS43NzYxIDEwIDIxLjUgMTBIMTQuNUMxNC4yMjM5IDEwIDE0IDkuNzc2MTQgMTQgOS41WiIgZmlsbD0id2hpdGUiLz4NCjxwYXRoIGQ9Ik0xNC44IDEzQzE0LjkxMDUgMTMgMTUgMTMuMDg5NSAxNSAxMy4yVjEzLjhDMTUgMTMuOTEwNSAxNC45MTA1IDE0IDE0LjggMTRIMTQuMkMxNC4wODk1IDE0IDE0IDEzLjkxMDUgMTQgMTMuOFYxMy4yQzE0IDEzLjA4OTUgMTQuMDg5NSAxMyAxNC4yIDEzSDE0LjhaIiBmaWxsPSJ3aGl0ZSIvPg0KPHBhdGggZD0iTTE3IDEzLjJDMTcgMTMuMDg5NSAxNi45MTA1IDEzIDE2LjggMTNIMTYuMkMxNi4wODk1IDEzIDE2IDEzLjA4OTUgMTYgMTMuMlYxMy44QzE2IDEzLjkxMDUgMTYuMDg5NSAxNCAxNi4yIDE0SDE2LjhDMTYuOTEwNSAxNCAxNyAxMy45MTA1IDE3IDEzLjhWMTMuMloiIGZpbGw9IndoaXRlIi8+DQo8cGF0aCBkPSJNMTkgMTMuMkMxOSAxMy4wODk1IDE4LjkxMDUgMTMgMTguOCAxM0gxOC4yQzE4LjA4OTUgMTMgMTggMTMuMDg5NSAxOCAxMy4yVjEzLjhDMTggMTMuOTEwNSAxOC4wODk1IDE0IDE4LjIgMTRIMTguOEMxOC45MTA1IDE0IDE5IDEzLjkxMDUgMTkgMTMuOFYxMy4yWiIgZmlsbD0id2hpdGUiLz4NCjxwYXRoIGQ9Ik0xNC41IDExQzE0LjIyMzkgMTEgMTQgMTEuMjIzOSAxNCAxMS41QzE0IDExLjc3NjEgMTQuMjIzOSAxMiAxNC41IDEySDI2LjVDMjYuNzc2MSAxMiAyNyAxMS43NzYxIDI3IDExLjVDMjcgMTEuMjIzOSAyNi43NzYxIDExIDI2LjUgMTFIMTQuNVoiIGZpbGw9IndoaXRlIi8+DQo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE0IDE1LjVDMTQgMTUuMjIzOSAxNC4yMjM5IDE1IDE0LjUgMTVIMjYuNUMyNi43NzYxIDE1IDI3IDE1LjIyMzkgMjcgMTUuNVYyMS41QzI3IDIxLjc3NjEgMjYuNzc2MSAyMiAyNi41IDIySDE0LjVDMTQuMjIzOSAyMiAxNCAyMS43NzYxIDE0IDIxLjVWMTUuNVpNMTUgMThWMTlIMThWMThIMTVaTTE5IDE4VjE5SDIyVjE4SDE5Wk0xOSAyMEgyMlYyMUgxOVYyMFpNMjMgMjBIMjZWMjFIMjNWMjBaTTIzIDE4VjE5SDI2VjE4SDIzWk0yNiAxNlYxN0gyM1YxNkgyNlpNMTkgMTZIMjJWMTdIMTlWMTZaTTE4IDIwSDE1VjIxSDE4VjIwWk0xOCAxNlYxN0gxNVYxNkgxOFoiIGZpbGw9IndoaXRlIi8+DQo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTMwIDNDMzAgMi40NDc3MiAyOS41NTIzIDIgMjkgMkgxMkMxMS40NDc3IDIgMTEgMi40NDc3MiAxMSAzVjI1QzExIDI1LjU1MjMgMTEuNDQ3NyAyNiAxMiAyNkgyOUMyOS41NTIzIDI2IDMwIDI1LjU1MjMgMzAgMjVWM1pNMTIgM0gyOVYyNUgxMlYzWiIgZmlsbD0id2hpdGUiLz4NCjxwYXRoIGQ9Ik0zIDZIOVY3SDNWMjlIMjBWMjhIMjFWMjlDMjEgMjkuNTUyMyAyMC41NTIzIDMwIDIwIDMwSDNDMi40NDc3MiAzMCAyIDI5LjU1MjMgMiAyOVY3QzIgNi40NDc3MiAyLjQ0NzcyIDYgMyA2WiIgZmlsbD0id2hpdGUiLz4NCjxwYXRoIGQ9Ik01LjUgMTJIOVYxMUg1LjVDNS4yMjM4NiAxMSA1IDExLjIyMzkgNSAxMS41QzUgMTEuNzc2MSA1LjIyMzg2IDEyIDUuNSAxMloiIGZpbGw9IndoaXRlIi8+DQo8cGF0aCBkPSJNOSAxNFYxM0g1LjVDNS4yMjM4NiAxMyA1IDEzLjIyMzkgNSAxMy41QzUgMTMuNzc2MSA1LjIyMzg2IDE0IDUuNSAxNEg5WiIgZmlsbD0id2hpdGUiLz4NCjxwYXRoIGQ9Ik01LjUgMTVIOVYxNkg1LjVDNS4yMjM4NiAxNiA1IDE1Ljc3NjEgNSAxNS41QzUgMTUuMjIzOSA1LjIyMzg2IDE1IDUuNSAxNVoiIGZpbGw9IndoaXRlIi8+DQo8cGF0aCBkPSJNNS41IDIxSDlWMjBINS41QzUuMjIzODYgMjAgNSAyMC4yMjM5IDUgMjAuNUM1IDIwLjc3NjEgNS4yMjM4NiAyMSA1LjUgMjFaIiBmaWxsPSJ3aGl0ZSIvPg0KPHBhdGggZD0iTTUuNSAyM0g5VjIySDUuNUM1LjIyMzg2IDIyIDUgMjIuMjIzOSA1IDIyLjVDNSAyMi43NzYxIDUuMjIzODYgMjMgNS41IDIzWiIgZmlsbD0id2hpdGUiLz4NCjxwYXRoIGQ9Ik01LjUgMjRIOVYyNUg1LjVDNS4yMjM4NiAyNSA1IDI0Ljc3NjEgNSAyNC41QzUgMjQuMjIzOSA1LjIyMzg2IDI0IDUuNSAyNFoiIGZpbGw9IndoaXRlIi8+DQo8cGF0aCBkPSJNNiA5LjJDNiA5LjA4OTU0IDUuOTEwNDYgOSA1LjggOUg1LjJDNS4wODk1NCA5IDUgOS4wODk1NCA1IDkuMlY5LjhDNSA5LjkxMDQ2IDUuMDg5NTQgMTAgNS4yIDEwSDUuOEM1LjkxMDQ2IDEwIDYgOS45MTA0NiA2IDkuOFY5LjJaIiBmaWxsPSJ3aGl0ZSIvPg0KPHBhdGggZD0iTTUuOCAxOEM1LjkxMDQ2IDE4IDYgMTguMDg5NSA2IDE4LjJWMTguOEM2IDE4LjkxMDUgNS45MTA0NiAxOSA1LjggMTlINS4yQzUuMDg5NTQgMTkgNSAxOC45MTA1IDUgMTguOFYxOC4yQzUgMTguMDg5NSA1LjA4OTU0IDE4IDUuMiAxOEg1LjhaIiBmaWxsPSJ3aGl0ZSIvPg0KPHBhdGggZD0iTTggMTguMkM4IDE4LjA4OTUgNy45MTA0NiAxOCA3LjggMThINy4yQzcuMDg5NTQgMTggNyAxOC4wODk1IDcgMTguMlYxOC44QzcgMTguOTEwNSA3LjA4OTU0IDE5IDcuMiAxOUg3LjhDNy45MTA0NiAxOSA4IDE4LjkxMDUgOCAxOC44VjE4LjJaIiBmaWxsPSJ3aGl0ZSIvPg0KPHBhdGggZD0iTTggOS4yQzggOS4wODk1NCA3LjkxMDQ2IDkgNy44IDlINy4yQzcuMDg5NTQgOSA3IDkuMDg5NTQgNyA5LjJWOS44QzcgOS45MTA0NiA3LjA4OTU0IDEwIDcuMiAxMEg3LjhDNy45MTA0NiAxMCA4IDkuOTEwNDYgOCA5LjhWOS4yWiIgZmlsbD0id2hpdGUiLz4NCjwvc3ZnPg0K"},921:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8.027.516A.52.52 0 0 0 7.5 0a.52.52 0 0 0-.527.516v9.508L4.4 7.527a.535.535 0 0 0-.746 0 .51.51 0 0 0 0 .73L7.5 12l3.846-3.743a.51.51 0 0 0 0-.73.535.535 0 0 0-.746 0l-2.573 2.497zM1 8v7h13V8h1v8H0V8z" clip-rule="evenodd"></path></svg>'},972:e=>{"use strict";e.exports=c},996:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 2.125 14.334 14H1.667zm-.882-.47a1 1 0 0 1 1.765 0l6.333 11.874A1 1 0 0 1 14.334 15H1.667a1 1 0 0 1-.882-1.47zM8 4.874a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0L8.9 5.87a.905.905 0 0 0-.9-.995m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0" clip-rule="evenodd"></path></svg>'}},t={};function p(i){var s=t[i];if(void 0!==s)return s.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,p),r.exports}p.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return p.d(t,{a:t}),t},p.d=(e,t)=>{for(var i in t)p.o(t,i)&&!p.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},p.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),p.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),p.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},p.p="";var d={};return p.p=window.jimuConfig.baseUrl,(()=>{"use strict";p.r(d),p.d(d,{__set_webpack_public_path__:()=>zt,default:()=>Ct});var e=p(386),t=p(244),i=p(321),s=p(108),r=p(298),n=p(89),a=p(640);function o(e){return t.css`
    &.widget-setting-feature-report {
      .survey-selector-container {
        background:  ${e.sys.color.divider.tertiary};
        flex-direction: column;
        padding: 0.625rem;
        .radio-item {
          gap: 0.5rem;
          margin-top: 0.5rem;
          flex-wrap: nowrap;
            &:first-of-type {
              margin-top: 0;
            }
        }
      }

      .option-setting-outter{
        .jimu-widget-setting--row {
          background:  ${e.sys.color.divider.tertiary};  // #3d3d3d
          margin-top: 0.5rem;
          padding: 0.625rem;
        }

        .option-setting-item{
          height: 20px;
          display: flex;
          justify-content: space-between;
          align-items: center;
          flex-wrap: nowrap;
          // margin-bottom: 8px;
        }
      }

      .not-supported-portal-outter {
        width: 100%;
        padding: 8px;
        border: 1px solid ${e.sys.color.warning.main};
        background: ${e.ref.palette.warning[100]};
      }

      .template-setting-outter {
        .add-templat-btn {
          display: flex;
          align-items: center;
          justify-content: center;
          span {
            font-weight: 500;
            margin: 0 10px;
          }
        }
        .help-btn {
          max-width: 50%;
        }
      }

      .template-list-container {
        margin-top: 0.625rem;
      }

      .error-alert {
        position: fixed;
        right: 0;
        top: 139px;
        width: 260px;
        height: auto;
        z-index: 1;
      }

      .empty-placeholder {
        display: flex;
        flex-flow: column;
        justify-content: center;
        height: calc(100% - 200px);
        overflow: hidden;
        .empty-placeholder-inner {
          padding: 0px 20px;
          flex-direction: column;
          align-items: center;
          display: flex;

          .empty-placeholder-text {
            color: ${e.sys.color.surface.paperText}; // #bdbdbd
            font-size: ${t.polished.rem(14)};
            margin-top: 16px;
            text-align: center;
          }
          .empty-placeholder-icon {
            color: ${e.sys.color.divider.inputField};
          }
        }
      }

      input:-webkit-autofill {
        -webkit-box-shadow: 0 0 0px 1000px ${e.ref.palette.white} inset;
        -webkit-text-fill-color: ${e.ref.palette.black};
      }
      .feature-report__section {
        .choose-report-label {
          margin-bottom: 0;
        }
        input + span {
          // margin-left:5px;
        }
        .jimu-widget-setting--section-header.row >h6 {
          font-size: 0.875rem;
          color: ${e.sys.color.surface.paperText};
        }

        .report-list-msg {
          padding: 0 5px;
        }
        .report-list-loading-outter {
          position: relative;
          top: -18px;
        }
        .feature-report__section-createreport {
          >.container >.w-100.setting-header {
            padding-bottom: 1rem!important;
            >div:first-of-type {
              padding-bottom: 0.5rem;
            }
            >.jimu-input span.input-wrapper {
              height: 1.625rem;
            }
            .summary{
              height: auto;
              textarea {
                resize: none;
              }
            }
          }
        }

        .feature-report__section-createreport, .select-report-section {
          .error-message {
            color: ${e.sys.color.error.main};
            word-break: break-word;
          }
          .no-report-message {
            color: ${e.sys.color.surface.backgroundHint};
          }
          .newreport-msg {
            color: ${e.sys.color.error.main};
            marginTop: '10px';
            word-break: break-word;
          }
        }
        .select-report-section {
          hr.split-line {
            display: none;
          }
        }

        .jimu-widget-setting--row.items {
          margin-top: 1.2rem;
          display: block;
          h6 {
            color: ${e.sys.color.surface.paperText};
          }
          div.w-100 {
            font-size: 0.8125rem;
            line-height: 1.1875rem;
            margin-top: 0.3125rem;

          }
        }

        .jimu-widget-setting--row >label {
          font-size: 0.875rem;
          font-weight: 400;
          +p.w-100 {
            font-size: 0.8125rem;
            line-height: 1.1875rem;
            margin-top: 0.3125rem;
          }
        }

        .appearance, .section-title {
          display: flex;
          justify-content: space-between;
          width:100%;
          h6 {
            margin-bottom: 0;
          }
        }

        .select{
          select {
            width: 100%;
          }
        }

        .mapping-container {
          padding: 0.615em;
          background: ${e.sys.color.secondary.main};
          border-radius: 2px;
          margin: 0.6em 0;
          position: relative;
          >select {
            height: 26px;
            vertical-align: middle;
            font-size: 1em;
            line-height: 26px;
            padding: 0 22px 0 6px;
            &:first-of-type {
              margin-bottom: 8px;
            }
          }
          .btn-group {
            width: 100%;
            overflow: hidden;
            .icon-remove-mapping {
              padding: 0 0.25em;
              margin-left: 0;
              margin-right: 0;
              cursor: pointer;
              .remove-mapping {
                margin-right: 0;
                margin-left: 0;
              }
            }
            button {
              margin: 8px 0 8px 8px;
              height: 26px;
              line-height: 26px;
              padding: 0;
              padding: 0px 14px;
            }
          }
          >.link-info {
            > p {
              margin-bottom: 0;
              line-height: 2em;
            }
            > div.center-line {
              width: 96%;
              height: 1px;
              background: ${e.sys.color.secondary.dark};
              text-align: center;
              margin: 0.5em 2% 0.5em 2%;
              >.connect {
                display: inline-block;
                width: 26px;
                height: 20px;
                background: ${e.sys.color.secondary.main};
                position: relative;
                top: -10px;
              }
            }
            > div.delete-connect {
              display: none;
              position: absolute;
              right: 0;
              top: 0;
              cursor: pointer;
              background: ${e.sys.color.secondary.main};
              text-align: center;
              width: 24px;
              height: 24px;
            }
            &:hover > div.delete-connect {
              display: block;
            }
          }

        }

        .setting-row {
          margin: 0.5rem 0 0 0;
          display: flex;
          flex-flow: row wrap;
          align-items: center;
        }

        .section-title h5{
          display: inline-block;
          font-weight: 500;
        }

        .section-title h6{
          word-break: break-word;
        }

        .fea-layer-outter {
          flex-wrap:wrap;
          >div {
            width: 100%;
          }
        }

        .use-feature-layer-setting {
          width: 100%;
          margin-top: 0.92em;
        }
        .feature-layer-dropdown {
          width: 100%;
          margin: 0.5rem 0 0 0;
        }
        &-resetreport {
          position:relative;
          // top: -8px;
          height: 26px;
          float:right;
          line-height: 8px;

          svg {
            margin:0px !important;
          }
        }

        .cursor-pointer{
          &:hover{
            cursor:pointer;
          }
        }
        .select-report-label {
          padding: 0 8px;
        }

        &-reportMenu {}

        &-selectExistingreport {}

        &-createreport {
          overflow-y: hidden;

          span.isRequired{
            position:relative;
            /* left:-180px; */
            color: ${e.sys.color.error.main};
            top: 4px;
            left: 4px;
          }
        }

        &-reportSettings {

        }
      }
    }

    .download-template {
      position: relative;
      a {
        position: absolute;
        display: block;
        width: 100%;
        left: 0;
        top: 0;
        bottom: 0;
      }
    }
    .setting-ui-template-list-exsiting {
      .jimu-tree-item_template {
        padding-top: 0.25rem;
      }
    }
    .setting-ui-template-list-new {
      margin-top: 0.375rem;
    }
  `}const l={reportTemplateTitle:"Report template",workWithFeatureLayer:"Work with feature layer",workWithSurvey:"Work with survey",noSurveyTip:"There is no survey associated with this feature layer.",thisHelpTopic:"this help topic",notSupportedEnterpriseMsg:"This option is not available for your ArcGIS Enterprise. See {thisHelpTopic} for details.",newTemplate:"New template",reportTemplateHelp:"Help",reportTemplateTip:"Click the New template button to use your own template or create a sample template to get started with.",individualRecordTemplate:"Individual record",individualRecordTemplateTip:"Design a report that presents an individual record. Multiple input records will generate multiple reports.",summaryTemplate:"Summary",summaryTemplateTip:"Design a report that summarizes information across multiple records. Multiple input records will generate a single report.",combinedTemplate:"Combined",combinedTemplateTip:"Design a report that contains individual records and a summary.",createSampleTemplate:"Create sample template",removeTemplate:"Remove",printSampleReport:"Generate sample report",printSampleReportTip:"Sample reports can be used to refine your report template without consuming credits. Only the first {previewCount} records for each layer will be included. The sample report will be a watermarked PDF and you will not be able to select its contents.",noRecordsErr:"No records to generate the report.",noSelectedFeature:"Please select at least one record for the data source referenced in this widget through the related widgets.",printErrMsg:"An error occurred while generating reports.",downloadTemplate:"Download template",itemNotExistOrNoAccess:"The item is not accessible or does not exist.",manageTempate:"Manage template",selectExistTemplate:"Select existing template",uploadNewTemplate:"Upload new template",selectFile:"Select file",selectAnotherFile:"Select another file",templateName:"Name",templateNameHint:"Template name",templateEmptyNameMsg:"Template name is required",templateSummary:"Summary",templateSummaryTip:"Add a brief summary about the template",templateLastModified:"Last modified:",notOwnerMsg:"This action can only be performed by the survey owner.",checkSyntax:"Check syntax",checking:"Checking...",checkSyntaxErrMsg:"Error: {serverSideErrMsg}",saveTemplate:"Save",deleteTemplate:"Delete",deleteTemplatewarningHeader:"Delete template",deleteTemplateWarning:"Are you sure you want to delete this template?",templateAddErrMsg:"Failed to save template. ",templateDeleteErrMsg:"Failed to delete template. ",templateDlgUploadTip:"Only .docx file is supported.",templateDlgNameExistsMsg:"A template with this name already exists, please choose a different one.",templateDlgFileNameExistsErrMsg:'The filename you chose is in use by the template "{existedTemplateName}", please choose a different one.',templateDlgFileChangedErrMsg:"This file has changed. Please select this file again.",templateDlgUpdateFileNameChangedErrMsg:"The filename you chose must be the same as the original filename.",templateMaxSizeExceed:"Maximum file size cannnot exceed {maxSizeAllowed}",manageDlgNoTemplateCoOwnerMsg:"Uploading a new template is only available to the survey owner. You can edit an existing template once the survey owner created one.",reportTemplateHelpTitle:"Report Template Help",reportTemplateHelpDesc:"A report template defines the layout and content of your report. It is a Microsoft Word file (.docx) that provides placeholder text with specific syntax. When printing a report, this placeholder text is replaced with the contents of the corresponding fields from the layer. ",reportTemplateHelpLearnMore:"Learn more about report templates",quickReferencePage:"Quick reference page",sampleTemplate:"Sample template",configration:"Configuration",editLabel:"Edit component label",inputFeatures:"Input features",selectPrintTemplate:"Select a template",reportSettings:"Output settings",showCredits:"Show credits",generateReports:"Generate",recentReports:"Recent reports",reportSettingsFileOptions:"File options",reportSettingsFileOptionsTip:"Report files larger than {perFileLimit} (before merging) will be split into multiple files.",reportSettingsFileOptionsDisabledTip:"This option is only available when printing more than one record or when the selected template contains more than one section.",FileOptionsSplit:"Split",FileOptionsSplitDesc:"One report for each record or summary.",FileOptionsMergeNextPage:"Merge (next page)",FileOptionsMergeNextPageDesc:"Multiple reports in a single file. Start the next record or summary on the next page.",FileOptionsMergeContinuous:"Merge (continuous)",FileOptionsMergeContinuousDesc:"Multiple reports in a single file. Start the next record or summary on the same page.",reportSettingsFileName:"Report name",reportSettingsSaveLocation:"Save to my ArcGIS account",saveToAccountTip:"By default, the report will be saved in the user's root folder. Users can change the target folder if this option is visible.",nameConflictOptLabel:"Report name conflict options",nameConflictOptRename:"Keep both and auto rename this report",nameConflictOptReplace:"Replace original report",nameConflictOptSkip:"Skip and don't save this report",reportSettingsFormat:"Format",formatDocx:"Microsoft Word (.docx)",formatPdf:"Portable Document Format (.pdf)"},c=p(213),u={"X-Survey123-Request-Source":"ExB/FeatureReportWidget"};let m={},g=null;var h;!function(e){e.SummaryIndividual="summaryIndividual",e.Summary="summary",e.Individual="individual"}(h||(h={}));const y={typeKeyword:"Print Template",type:"Microsoft Word",typeKeywords:["Print Template","Feature Report Template","Document","Microsoft Word","Experience Builder","Feature Report Widget"],tags:["Experience Builder","Print Template","Feature Report Template"]},I={name:"form",typeKeyword:"FieldworkerView"},j={name:"results",typeKeyword:"StakeholderView"};function M(e){var i,s;const r=e.getMainDataSource();let n=e.itemId||(null==r?void 0:r.itemId);if(e.type===t.DataSourceTypes.SubtypeSublayer){const e=null==r?void 0:r.parentDataSource;n=null==e?void 0:e.itemId}!n&&(null==r?void 0:r.url)&&(n=(null===(i=null==r?void 0:r.layer)||void 0===i?void 0:i.serviceItemId)||(null===(s=null==r?void 0:r.layerDefinition)||void 0===s?void 0:s.serviceItemId));const a=e.getRootDataSource();return!n&&(null==a?void 0:a.itemId)&&(n=a.itemId),n}function x(e,i){if(m={},!(i=i||M(e)))return console.warn("itemId is not existing in the seleted data source."),Promise.resolve([]);let s=[],r=null;return T(i).then(e=>{var i;return r=e,g={itemId:e.id,url:null===(i=e.url)||void 0===i?void 0:i.replace(/^http:\/\//i,"https://"),typeKeywords:e.typeKeywords,owner:e.owner,itemControl:e.itemControl,access:e.access,title:e.title,type:e.type,ownerFolder:e.ownerFolder},function(e,i){const s=null==e?void 0:e.id;if(!s)return Promise.resolve([]);const r={relationshipType:"Survey2Service",direction:"reverse"};i=Object.assign(r,i||{});const n=I.typeKeyword,a={id:s,relationshipType:"Survey2Service",direction:"reverse",authentication:t.SessionManager.getInstance().getSessionByUrl((0,t.getAppStore)().getState().portalUrl)};return t.esri.restPortal.getRelatedItems(a).then(e=>{const t=(e.relatedItems||[]).filter(e=>{const t=e.typeKeywords||[];return t.includes("Survey123")&&t.includes("Form")}).map(e=>{var t,i;(e=v(e)).value=e.id,e.label=e.title;let s="fieldworker";return e.typeKeywords.includes(n)||e.typeKeywords.includes("View Service")||(s="source"),null!==(t=m[i=e.id])&&void 0!==t||(m[i]={}),m[e.id][s]=g,e});return t})}(r)}).then(e=>(s=e,function(e){const t=e.typeKeywords||[];if(t.includes("Hosted Service")&&t.includes("Survey123")){const e=t.filter(e=>/^[a-z0-9]{32}$/.test(e)),i=t.includes("Source")?"source":t.includes("StakeholderView")?"stakeholder":"fieldworker",s=[];return e.forEach(e=>{var t;null!==(t=m[e])&&void 0!==t||(m[e]={}),m[e][i]=g;const r=T(e);s.push(r)}),Promise.all(s).then(e=>e.filter(e=>!!e&&(e.value=e.id,e.label=e.title,e)))}return Promise.resolve([])}(r))).then(e=>(e.forEach(e=>{s.find(t=>t.id===e.id)||s.push(e)}),s)).catch(e=>(console.log("failed to get the related survey item id"),[]))}function N(e){let i="",s="",r="";if(!e)return{};i=e.url;let n=!1;if(e.isDataView){if(i=e.getMainDataSource().url,e.dataViewId===t.CONSTANTS.SELECTION_DATA_VIEW_ID){n=!0,s="";const t=e.getSelectedRecords(),a=e.getIdField()||"objectid";return r=t.map(e=>{const t=e.feature,i=a;return t.attributes[i]}).join(","),{url:i,objectIds:r}}}if(!n){const r=e.getCurrentQueryParams();if(e.type===t.DataSourceTypes.SubtypeSublayer){const t=e.layer.subtypeCode,i=`${e.layer.subtypeField} = ${t}`;s=r.where?`(${r.where}) and ${i}`:i}else s=r.where;return s=s||"1=1",{url:i,where:s,orderByFields:r.orderByFields}}}function S(e,i){if(!e)return Promise.resolve(0);if("objectIds"in e){const t=e.objectIds;return t&&t.length?Promise.resolve(t.split(",").length):Promise.resolve(0)}if("where"in e){const s=e.where||"1=1",r=Object.assign({url:i,returnCountOnly:!0},F());return r.params={where:s},t.esri.restFeatureService.queryFeatures(r).then(e=>e.count)}return Promise.resolve(0)}function f(e){return t.esri.restPortal.getItem(e,F())}function T(e){return f(e).then(e=>v(e)).catch(t=>(console.warn("Failed to get the item info for id:",e),null))}function v(e){if(!e)return e;const i=(0,t.getAppStore)().getState().user,s=i?i.username:"";return"admin"===e.itemControl&&(e.isAdmin=!0),"update"===e.itemControl&&(e.isCoowner=!0),e.owner===s&&(e.isOwner=!0),e}function D(e,i){const s=G(),r=s.token,n=s.username;return Promise.resolve(!0).then(()=>{const s=e?e.id:null==i?void 0:i.id,r=e?"Survey2Data":"Service2Report";if(e||i){const e=Object.assign({id:s,relationshipType:r},F());return t.esri.restPortal.getRelatedItems(e).then(e=>!e||e.error?(console.warn("Failed to get related templates"),[]):e.relatedItems||[]).catch(e=>(console.warn("Failed to get related templates.",null==e?void 0:e.message),[]))}}).then(e=>{const t="Print Template",i="Microsoft Word";return e.filter(e=>e.type===i&&-1!==e.typeKeywords.indexOf(t))||[]}).then(e=>(e.forEach(e=>{const i=function(e,i,s){const r=(0,t.getAppStore)().getState().portalUrl;return`${t.portalUrlUtils.getItemUrl(r,e)}/data?username=${i}&token=${s}`}(e.id,n,r);e.modified=new Date(e.modified),e.url=i}),e))}function w(e,t,i,s,r){const n=null==t?void 0:t.id;e.printing=!0;const a=i.url,o=i.where,l=i.objectIds,c=i.orderByFields?i.orderByFields.join(","):"",p={};o?p.where=o:l&&(p.objectIds=l),c&&(p.orderByFields=c);const d={queryParameters:p?JSON.stringify(p):"",templateItemId:e.id,featureLayerUrl:a,outputReportName:s.reportName||""};n&&(d.surveyItemId=n),d.outputPackageName=d.outputReportName,s.mergeFiles&&(d.mergeFiles=s.mergeFiles);const m=r||"en",g=G().portalUrl,h=G().token,y={portalUrl:g,utcOffset:"||"+Q(),locale:"||"+m,token:h,f:"json"},I=Object.assign(y,d||{}),j=new URLSearchParams;Object.keys(I).forEach(e=>{const t=I[e];j.append(e,t)});const M=k()+"/featureReport/createSampleReport/submitJob";let x=null;return new Promise((e,t)=>{fetch(M,{method:"POST",headers:u,body:j}).then(e=>e.json()).then(i=>{x=i;const s=x.jobId,r=()=>{(function(e){const t={f:"json",portalUrl:G().portalUrl,token:G().token},i=new URLSearchParams;Object.keys(t).forEach(e=>{const s=t[e];i.append(e,s)});const s=`${k()}/featureReport/jobs/${e}/status`;return fetch(s,{method:"POST",headers:u,body:i}).then(e=>e.json())})(s).then(i=>{x=i,"esriJobSucceeded"===i.jobStatus||"esriJobPartialSucceeded"===i.jobStatus?("esriJobPartialSucceeded"===i.jobStatus&&console.warn("Reports have been generated with some issues."),e(i)):"esriJobFailed"===i.jobStatus?(console.error("Failed to generate sample report",i),e(!0)):i.error?(console.error("Failed to generate sample report",i.error),t(i.error)):setTimeout(()=>{r()},1500)}).catch(e=>{console.error("Failed to generate sample report",e),t(e)})};r()})})}function b(e,t,i,s,r){if(!e||!e.length)return;let n=0;const a=e=>{const n=(e=>{let s=V(t?t.title:null==i?void 0:i.title)+"_sampleTemplate"+e.replace(/^\S/,e=>e.toUpperCase());if(s.length>250&&(s=s.substr(0,250)),r.find(e=>e.name===s+".docx")){let e=0;r.filter(t=>{if(t.name===s+".docx"||t.name.startsWith(s+"_(")){const i=new RegExp(`${s}_\\((\\d+)\\)`),r=t.name.match(i);return r&&!isNaN(r[1])&&Number(r[1])>e&&(e=Number(r[1])),!0}return!1}),e++,s+="_("+e+")"}return s})(e);return R(s,{surveyItemInfo:t,type:e}).then(t=>{const i=function(e){let t=0,i=0;if(e.templateType)switch(e.templateType){case h.Individual:t=1;break;case h.Summary:i=1;break;case h.SummaryIndividual:t=1,i=1}else t=e.individualSectionCount,i=e.summarySectionCount;return`Section Count ${t}|${i}`}({templateType:e});return{fileBlob:t,fileName:n,templateSectionSetting:[i]}}).catch(e=>new Promise(t=>{let i=P(e);if(e&&500===e.status&&e.response instanceof Blob){const s=new FileReader;s.onload=()=>{const e=s.result;let r={};try{r=JSON.parse(e||"{}"),i=P(r),t(i)}catch(e){t(i)}},s.readAsText(e.response)}else t(i)}).then(e=>{throw{message:e}}))},o=e=>{const s=e.fileBlob.slice(0,e.fileBlob.size,"");s.lastModifiedDate=new Date,s.name=e.fileName+".docx";const r={title:e.fileName,filename:e.fileName+".docx",snippet:"Sample template",file:s};return O(t,r,i,e.templateSectionSetting).then(e=>{if(e&&e.id)return e;throw new Error(e.error)}).catch(t=>{var i;if((409===t.code||(null===(i=null==t?void 0:t.message)||void 0===i?void 0:i.startsWith("ArcGISRequestError: 409:")))&&n<3)return console.log(`Item ${s.name} already exists, rename the file name and upload again.`),e.fileName+=`_${(new Date).getTime()}`,n++,o(e);throw t})},l=[];return Object.values(h).forEach(t=>{e.includes(t)&&l.push(a(t))}),Promise.all(l).then(e=>e.reduce((e,t)=>e.then(e=>o(t).then(i=>(t.id=i.id,e.push(t),e))),Promise.resolve([])))}function O(e,i,s,r){let n;const a=(null==e?void 0:e.isOwner)||(null==s?void 0:s.isOwner),o=(null==e?void 0:e.isAdmin)||(null==s?void 0:s.isAdmin),l=(0,t.getAppStore)().getState().user;return Promise.resolve(!0).then(()=>{if(!e&&!s||!i)throw Error("Failed to create custom print item.");return!0}).then(()=>{const n=(null==e?void 0:e.ownerFolder)||s.ownerFolder,c=y;let p=c.typeKeywords;const d=c.tags;e?p=p.concat([e.id]):s&&(p=p.concat([s.id])),r&&r.length&&(p=p.concat(r));const u=Object.assign({item:{title:i.title,type:c.type,tags:d,snippet:i.snippet,typeKeywords:p},filename:i.filename,file:i.file,folderId:n},F());if(a)return t.esri.restPortal.createItem(u);if(o)return u.folderId=null,t.esri.restPortal.createItem(u).then(i=>t.esri.restPortal.getUserContent(Object.assign({owner:(null==e?void 0:e.owner)||(null==s?void 0:s.owner),folderId:n},F())).then(r=>t.esri.restPortal.reassignItem(Object.assign({currentOwner:l.username,id:i.id,owner:(null==e?void 0:e.owner)||(null==s?void 0:s.owner),targetUsername:(null==e?void 0:e.owner)||(null==s?void 0:s.owner),targetFolderName:r&&r.currentFolder&&r.currentFolder.title||"/"},F())).then(e=>({success:e.success,id:e.itemId}))));throw new Error("Failed to create sample templates. You do not have the privilege to create or upload sample templates.")}).catch(e=>{throw new Error(e.error||e)}).then(i=>{if(!i||i.error)throw Error(i&&i.error);n=i.id;const r=e?{originItemId:e.id,owner:e.owner,destinationItemId:n,relationshipType:"Survey2Data"}:{originItemId:null==s?void 0:s.id,owner:null==s?void 0:s.owner,destinationItemId:n,relationshipType:"Service2Report"};return e||s?t.esri.restPortal.addItemRelationship(Object.assign(r,F())):i}).then(i=>{if(!i||i.error||!i.success)throw Error(i&&i.error);return function(e,i,s){return Promise.resolve().then(()=>e?function(e){const i=(s="stakeholder",s?m[s]:m);var s;if(i)return Promise.resolve(i);return Promise.resolve(!0).then(()=>{let i=`type:Feature Service AND typekeywords:${e} AND typekeywords:${j.typeKeyword}`;i+=" AND ((typekeywords:Hosted Service AND typekeywords:View Service) OR (NOT typekeywords:Hosted Service))";const s={q:i,portalUrl:G().portalUrl,authentication:t.SessionManager.getInstance().getSessionByUrl((0,t.getAppStore)().getState().portalUrl)};return t.esri.restPortal.searchItems(s).then(e=>{if(!e||e.error)throw new Error(JSON.stringify(e));return e.results&&0===e.results.length?null:e.results[0]})}).then(e=>{var t;return e&&function(e,t){m[e]=t}("stakeholder",{itemId:e.id,url:null===(t=e.url)||void 0===t?void 0:t.replace(/^http:\/\//i,"https://"),typeKeywords:e.typeKeywords,owner:e.owner,itemControl:e.itemControl,access:e.access,title:e.title,type:e.type}),e})}(e.id).then(e=>{let t,i,s;if(e&&(t=e.id||e.itemId,i=e.owner,s=e.ownerFolder),!t)throw new Error("NO_TARGET_ITEM_ID");return A({itemId:t,itemOwner:i,folderId:s})}):i?A({itemId:i.id,itemOwner:i.owner,folderId:i.folderId}):void 0).then(e=>{var i;e&&!e.error||console.log(e.error);const r=e.sharing,n={};"public"===r.access&&(n.everyone=!0),"org"===r.access&&(n.org=!0),n.groups=r.groups,n.items=[s],n.itemOwner=(null===(i=e.item)||void 0===i?void 0:i.owner)||G().username,n.confirmItemControl=!0;return function(e){e=Object.assign({itemId:null,itemOwner:null},e||{});const i=`${t.esri.restPortal.getPortalUrl(F())}/content/users/${e.itemOwner}/shareItems`,s=t.SessionManager.getInstance().getMainSession(),r={params:{confirmItemControl:e.confirmItemControl,groups:e.groups,items:e.items,org:e.org},httpMethod:"POST",authentication:s};return t.esri.restRequest.request(i,r)}(Object.assign({},n,{items:n.items.join(","),groups:n.groups.join(",")},F()))}).then(e=>{if(e&&!e.error&&e.results||console.log(e.error),e.results){const t=e.results.filter((e,t)=>!e.success);return t.length>0&&console.log(t.map((e,t)=>e.error.message).join("; ")),!0}}).catch(e=>{if(e&&"NO_TARGET_ITEM_ID"===e.message)return!1})}(e,s,n)}).then(e=>({success:!0,id:n}))}function A(e){e=Object.assign({itemId:null,itemOwner:null},e||{});let i=`${t.esri.restPortal.getPortalUrl(F())}/content/users/${e.itemOwner}`;e.folderId&&(i=`${i}/${e.folderId}`);const s=`${i}/items/${e.itemId}`,r={httpMethod:"GET",authentication:t.SessionManager.getInstance().getMainSession()};return t.esri.restRequest.request(s,r)}function E(){const e=(0,t.getAppStore)().getState().queryObject,i=e?e.survey123:"",s=function(e){if(!e)return null;const t=(e+="").split("");if(t.length<2&&e.split(":").length<2)return e.split(",").length>1?e.split(","):e;{const e={};return t.forEach(t=>{const i=(t+"").split(":");if(i.length>1){const t=i[0];let s=(Array.isArray(i.slice(1))?i.slice(1):[]).join(":");s.length&&"{"===s[0]&&(s=function(e){let t=e;try{t=JSON.parse(e)}catch(i){t=e}return t}(s)),"string"==typeof s&&s.split(",").length>1&&(s=s.split(",")),e[t]=s}}),e}}(i?decodeURIComponent(i+""):""),r=s;let n="https://survey123.arcgis.com",a=window.jimuConfig.hostEnv;if(r&&r.env&&(a=r.env+"",a.startsWith("http://")||a.startsWith("https://")))return a;let o=!0;if("https://survey123.arcgis.com"!==n){const e=n.match(/https:\/\/survey123(\.[^\.]*)\.arcgis\.com/);o=!(!e||!e.length)}return a&&"prd"!==a&&"prod"!==a&&o&&(n=`https://survey123${a}.arcgis.com`),n}function k(){return E()+"/api"}function L(e,i,s,r,n,a){const o=s.id,l=Object.assign({},r,{type:y.type});return new Promise((t,s)=>{if(!e&&!i||!r||!o)throw new Error("Missing parameter.");t(!0)}).then(s=>{if(a&&(l.file=a),n&&n.length){let e=l.typeKeywords||[];const t=e.findIndex(e=>e.match(/Section Count .*\|.*/g));t>-1?e[t]=n[0]:e=e.concat(n),l.typeKeywords=e.join(",")}return l.folderId=(null==e?void 0:e.ownerFolder)||(null==i?void 0:i.ownerFolder),l.itemOwner=(null==e?void 0:e.owner)||(null==i?void 0:i.owner),l.owner=(null==e?void 0:e.owner)||(null==i?void 0:i.owner),t.esri.restPortal.updateItem(Object.assign({item:Object.assign({id:o},l)},F()))}).then(e=>{if(!e||e.error||!e.success)throw new Error(e.error);return s=Object.assign(s,l)})}function C(e,t){const i=e.title,s=t.find(e=>e.title===i);return!!(i&&i.length>0&&(!s||s&&s.id===e.id))}function z(e,t,i){const s=`${E()}/featureReport/quickReference?`,r={surveyItemId:t,featureLayerUrl:e,locale:i||"en",portalUrl:G().portalUrl,token:G().token},n=[],a=["surveyItemId","featureLayerUrl","locale","portalUrl","token"];return Object.keys(r).sort((e,t)=>a.indexOf(e)-a.indexOf(t)).forEach(e=>{const t=r[e];t&&n.push(`${e}=${t}`)}),s+n.join("&")}function U(e,t){if(t=""+t,!(e=""+e)||!t)throw new Error("version is not existed");let i,s;const r=/(\.0+)+$/,n=e.replace(r,"").split("."),a=t.replace(r,"").split("."),o=Math.min(n.length,a.length);for(i=0;i<o;i++)if(s=parseInt(n[i],10)-parseInt(a[i],10),s)return s;return n.length-a.length}function P(e){let t="";return e&&("string"==typeof e?t=e:e.error&&"string"==typeof e.error?t=e.error:e.error&&e.error.message?t=e.error.message:!t&&e.status&&e.statusText?t=e.status+" "+e.statusText:t||!e.status||e.statusText||(t="Error code: "+e.status)),t}function R(e,t){const{surveyItemInfo:i,type:s}=t||{},r=G().portalUrl,n=G().token,a=k()+"/featureReport/createSampleTemplate";return new Promise((t,o)=>{const l=new XMLHttpRequest;l.open("POST",a,!0);const c=Object.assign({},u,{"Content-Type":"application/x-www-form-urlencoded"});for(const e in c)l.setRequestHeader(e,c[e]);l.responseType="blob",l.onload=()=>{if(200===l.status){const e=l.response;t(e)}else o(l)};let p=`featureLayerUrl=${e}&contentType=${s}&portalUrl=${r}&token=${n}`;i&&(p=`featureLayerUrl=${e}&surveyItemId=${i.id}&contentType=${s}&portalUrl=${r}&token=${n}`),l.send(p)})}function F(){const e=t.SessionManager.getInstance(),i=(0,t.getAppStore)().getState().portalUrl,s=t.portalUrlUtils.getPortalRestUrl(i);return{authentication:e.getSessionByUrl(i),portal:s}}function V(e){return e.replace(/[^\w\-\.]/g,"_").trim()}function Q(){const e=(new Date).getTimezoneOffset();let t=Math.abs(e/60),i=Math.abs(e%60);t<10&&(t="0"+t),i<10&&(i="0"+i);return(e<=0?"+":"-")+t+":"+i}function G(){const e=(0,t.getAppStore)().getState().portalUrl,i=t.SessionManager.getInstance().getSessionByUrl(e),s=i?i.token:"",r=(0,t.getAppStore)().getState().user;return{token:s,portalUrl:e,username:r?r.username:""}}function Y(e,t=!1){let i=null;t||(i=window.onbeforeunload,window.onbeforeunload=null);try{const i=document.createElement("a");i.style.display="block",document.body.appendChild(i),i.setAttribute("href",e),i.setAttribute("download","true"),t&&i.setAttribute("target","_blank"),i.click(),i.remove()}catch(e){}finally{t||(window.onbeforeunload=i)}}var B=p(27),Z=p.n(B),W=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(i[s[r]]=e[s[r]])}return i};const H=i=>{const s=window.SVG,{className:r}=i,n=W(i,["className"]),a=(0,t.classNames)("jimu-icon jimu-icon-component",r);return s?(0,e.jsx)(s,Object.assign({className:a,src:Z()},n)):(0,e.jsx)("svg",Object.assign({className:a},n))};var $=p(838),J=p.n($),q=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(i[s[r]]=e[s[r]])}return i};const _=i=>{const s=window.SVG,{className:r}=i,n=q(i,["className"]),a=(0,t.classNames)("jimu-icon jimu-icon-component",r);return s?(0,e.jsx)(s,Object.assign({className:a,src:J()},n)):(0,e.jsx)("svg",Object.assign({className:a},n))};var X=p(921),K=p.n(X),ee=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(i[s[r]]=e[s[r]])}return i};const te=i=>{const s=window.SVG,{className:r}=i,n=ee(i,["className"]),a=(0,t.classNames)("jimu-icon jimu-icon-component",r);return s?(0,e.jsx)(s,Object.assign({className:a,src:K()},n)):(0,e.jsx)("svg",Object.assign({className:a},n))};var ie=p(443),se=p.n(ie),re=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(i[s[r]]=e[s[r]])}return i};const ne=i=>{const s=window.SVG,{className:r}=i,n=re(i,["className"]),a=(0,t.classNames)("jimu-icon jimu-icon-component",r);return s?(0,e.jsx)(s,Object.assign({className:a,src:se()},n)):(0,e.jsx)("svg",Object.assign({className:a},n))};var ae=p(479),oe=p.n(ae),le=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(i[s[r]]=e[s[r]])}return i};const ce=i=>{const s=window.SVG,{className:r}=i,n=le(i,["className"]),a=(0,t.classNames)("jimu-icon jimu-icon-component",r);return s?(0,e.jsx)(s,Object.assign({className:a,src:oe()},n)):(0,e.jsx)("svg",Object.assign({className:a},n))};var pe=p(226),de=p.n(pe),ue=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(i[s[r]]=e[s[r]])}return i};const me=i=>{const s=window.SVG,{className:r}=i,n=ue(i,["className"]),a=(0,t.classNames)("jimu-icon jimu-icon-component",r);return s?(0,e.jsx)(s,Object.assign({className:a,src:de()},n)):(0,e.jsx)("svg",Object.assign({className:a},n))};var ge=p(915),he=p.n(ge),ye=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(i[s[r]]=e[s[r]])}return i};const Ie=i=>{const s=window.SVG,{className:r}=i,n=ye(i,["className"]),a=(0,t.classNames)("jimu-icon jimu-icon-component",r);return s?(0,e.jsx)(s,Object.assign({className:a,src:he()},n)):(0,e.jsx)("svg",Object.assign({className:a},n))};var je=p(651),Me=p.n(je),xe=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(i[s[r]]=e[s[r]])}return i};const Ne=i=>{const s=window.SVG,{className:r}=i,n=xe(i,["className"]),a=(0,t.classNames)("jimu-icon jimu-icon-component",r);return s?(0,e.jsx)(s,Object.assign({className:a,src:Me()},n)):(0,e.jsx)("svg",Object.assign({className:a},n))};var Se=p(662),fe=p.n(Se),Te=p(46),ve=p.n(Te),De=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(i[s[r]]=e[s[r]])}return i};const we=i=>{const s=window.SVG,{className:r}=i,n=De(i,["className"]),a=(0,t.classNames)("jimu-icon jimu-icon-component",r);return s?(0,e.jsx)(s,Object.assign({className:a,src:ve()},n)):(0,e.jsx)("svg",Object.assign({className:a},n))};var be=p(499),Oe=p.n(be),Ae=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(i[s[r]]=e[s[r]])}return i};const Ee=i=>{const s=window.SVG,{className:r}=i,n=Ae(i,["className"]),a=(0,t.classNames)("jimu-icon jimu-icon-component",r);return s?(0,e.jsx)(s,Object.assign({className:a,src:Oe()},n)):(0,e.jsx)("svg",Object.assign({className:a},n))};var ke=p(303),Le=p.n(ke),Ce=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(i[s[r]]=e[s[r]])}return i};const ze=i=>{const s=window.SVG,{className:r}=i,n=Ce(i,["className"]),a=(0,t.classNames)("jimu-icon jimu-icon-component",r);return s?(0,e.jsx)(s,Object.assign({className:a,src:Le()},n)):(0,e.jsx)("svg",Object.assign({className:a},n))};var Ue=p(529),Pe=p.n(Ue),Re=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(i[s[r]]=e[s[r]])}return i};const Fe=i=>{const s=window.SVG,{className:r}=i,n=Re(i,["className"]),a=(0,t.classNames)("jimu-icon jimu-icon-component",r);return s?(0,e.jsx)(s,Object.assign({className:a,src:Pe()},n)):(0,e.jsx)("svg",Object.assign({className:a},n))};var Ve=p(490),Qe=p.n(Ve),Ge=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(i[s[r]]=e[s[r]])}return i};const Ye=i=>{const s=window.SVG,{className:r}=i,n=Ge(i,["className"]),a=(0,t.classNames)("jimu-icon jimu-icon-component",r);return s?(0,e.jsx)(s,Object.assign({className:a,src:Qe()},n)):(0,e.jsx)("svg",Object.assign({className:a},n))};var Be=p(972);const{useState:Ze,useRef:We,useEffect:He}=t.React,$e=Object.assign({},l,t.defaultMessages,i.defaultMessages),Je=t.React.forwardRef((s,r)=>{const{defaultLabel:n,showSettingButton:a,onSettingBtnClick:o,label:l,checked:c,onValueChange:p,onCheckedChange:d,tooltipLabel:u,hideSwitcher:m}=s,g=t.hooks.useTranslation($e),h=We(void 0),[y,I]=Ze(!1),[j,M]=Ze(!1),x=()=>{y||(N&&(N+"").trim()||!n||S(n),I(!0),M(!0),setTimeout(()=>{M(!1)},10))};He(()=>{y&&h.current&&(0,t.focusElementInKeyboardMode)(h.current)},[y]);const[N,S]=Ze(l);He(()=>{S(l)},[]);const f=e=>{I(!1),e===n&&(e=""),p(e)};return(0,e.jsxs)(Be.Fragment,{children:[(0,e.jsxs)("div",{className:"option-setting-item",css:t.css`
      .option-setting-item {
        height: 20px;
      }
      .input-wrapper {
        height: 20px
      }`,children:[(0,e.jsx)("div",{className:"d-flex align-items-center mb-0 flex-grow-1",css:t.css`padding-left: 0.125rem`,children:(0,e.jsx)("div",{className:"flex-grow-1 text-truncate",onDoubleClick:x,css:y?m?t.css`max-width: 12.25rem;`:t.css`max-width: 11.125rem;`:a?t.css`max-width: 8.825rem;`:m?t.css`max-width: 11.25rem;`:t.css`max-width: 10.125rem;`,children:y?(0,e.jsx)(i.TextInput,{size:"sm",className:"jimu-tree-item__editing-input",value:N,onAcceptValue:f,onChange:e=>{S(e.target.value)},onBlur:e=>{(e=>{j||f(e.target.value)})(e)},ref:h,"aria-label":n,placeholder:n}):(0,e.jsx)("span",{title:N||n,children:N||n})})}),!y&&(0,e.jsx)(i.Tooltip,{title:g("editLabel"),interactive:!0,leaveDelay:100,children:(0,e.jsx)(i.Button,{tabIndex:0,role:"button",className:"p-0 mx-1",size:"sm",type:"tertiary",icon:!0,onClick:x,children:(0,e.jsx)("span",{children:(0,e.jsx)(we,{size:"m"})})})}),y&&(0,e.jsx)(i.Button,{tabIndex:0,role:"button",className:"p-0 mx-1",size:"sm",type:"tertiary",icon:!0,"aria-label":g("done"),onClick:()=>{I(!1)},children:(0,e.jsx)(Ee,{size:"m"})}),a&&!y?(0,e.jsx)("span",{children:(0,e.jsx)(i.Tooltip,{title:g("settings"),interactive:!0,leaveDelay:100,children:(0,e.jsx)(i.Button,{ref:r,className:"mr-1 p-0 border-0",type:"tertiary",icon:!0,size:"sm",onClick:o,children:(0,e.jsx)(ze,{size:16})})})}):"",m||y?"":c?(0,e.jsx)(i.Tooltip,{title:(0,e.jsx)("span",{children:u||g("invisible")}),interactive:!0,leaveDelay:100,children:(0,e.jsx)(i.Button,{className:"mr-1 p-0 border-0",type:"tertiary",icon:!0,size:"sm","aria-label":g("visible")+(u?". "+u:""),onClick:()=>{d(!1)},children:(0,e.jsx)(Fe,{size:16})})}):(0,e.jsx)(i.Tooltip,{title:(0,e.jsx)("span",{children:u||g("ininvisible")}),interactive:!0,leaveDelay:100,children:(0,e.jsx)(i.Button,{className:"mr-1 p-0 border-0",type:"tertiary",icon:!0,size:"sm","aria-label":g("invisible")+(u?". "+u:""),onClick:()=>{d(!0)},children:(0,e.jsx)(Ye,{size:16})})})]}),s.children?(0,e.jsx)("div",{className:"w-100",css:t.css`margin-top: 0.5rem;`,children:s.children}):""]})});var qe=p(207),_e=p.n(qe);const{useState:Xe,useRef:Ke,useEffect:et}=t.React,tt=Object.assign({},l,t.defaultMessages,i.defaultMessages),it=t.React.forwardRef((s,r)=>{const{theme:a,dataSources:o,value:l,prefix:c,onChange:p,onBlur:d}=s,u=t.React.createRef(),m=Ke(null),g=t.hooks.useTranslation(tt),[h,y]=Xe(l),[I,j]=Xe(null);et(()=>{y(l)},[l]);return(0,e.jsx)("div",{className:"w-100 h-100",css:(e=>t.css`
      .expression-builder-trigger {
        position: relative;
        cursor: pointer;
        height: 26px;
        padding: 0;

        .trigger-dropdown-toggle {
          background: ${e.sys.color.secondary.dark};
          border-radius: 2px 0 0 2px;
          border-color: ${e.sys.color.secondary.dark};
          width: 26px;
          height: 26px;
        }
      }

      .custom-field-selector {
        height: 26px !important;
        position: absolute;
        top: 0;
        left: 0;
        visibility: hidden;
        // button.jimu-dropdown-button {
        //   width: 1px;
        //   height 0;
        // }
      }
      .expression-input {
        position: absolute;
        top: 0;
        left: 26px;
        right: 0;
        height: 1.625rem;
        // width: calc(100% - 26px);
        span {
          height: 1.625rem;
          padding-top: 0;
          padding-bottom: 0;
        }
      }
       `)(a),children:(0,e.jsxs)("div",{className:"expression-builder-trigger",ref:u,children:[(0,e.jsx)(i.Button,{icon:!0,title:g("attribute"),"aria-label":g("attribute"),onClick:()=>{const e=u.current.querySelector("button.jimu-dropdown-button");null==e||e.click()},className:"text-truncate d-flex justify-content-center align-items-center trigger-dropdown-toggle p-0 jimu-outline-inside",children:(0,e.jsx)(i.Icon,{icon:_e(),className:"m-0 p-0"})}),(0,e.jsx)(n.FieldSelector,{className:"custom-field-selector",dataSources:[o],dropdownProps:{size:"sm",icon:!0},isDataSourceDropDownHidden:!0,onChange:e=>{const t=c||"{",i=(e||[]).length?e[0].name:"";if(i){let e="";const s=h||"";e=m.current&&null!==I?s.substring(0,I)+t+i+"}"+s.substring(I):s+"{"+i+"}",y(e),p&&p(e),d&&d(e)}},useDefault:!1,useDropdown:!0}),(0,e.jsx)("div",{className:"expression-input",children:(0,e.jsx)(i.TextInput,{ref:m,"aria-label":g("attribute"),className:"w-100 h-100 ",value:h,onChange:e=>{y(e.target.value),p&&p(e.target.value)},onBlur:e=>{m.current&&j(m.current.selectionStart),d&&d(h)}})})]})})}),{useState:st,useEffect:rt}=t.React,nt=Object.assign({},l,t.defaultMessages,i.defaultMessages),at=s=>{const{hides:n,dataSource:a,onLabelChanged:o,fileOptionsLabel:l,reportNameLabel:c,saveToAGSAccountLabel:p,outputFormatLabel:d,theme:u,onVisibilityChanged:m,onSettingValueChanged:g,mergeFiles:h,reportName:y,outputFormat:I}=s,j=t.hooks.useTranslation(nt),[M,x]=st(y||"");rt(()=>{x(y)},[y]);return(0,e.jsx)("div",{className:"option-setting-outter","aria-labelledby":"",css:(e=>t.css`
      .jimu-widget-setting--row {
        background: ${e.sys.color.divider.tertiary};
        padding: 0.625rem;
      }

      .option-setting-item{
        height: 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: nowrap;
        // margin-bottom: 8px;
      }`)(u),children:(0,e.jsxs)(r.SettingSection,{role:"group",children:[(0,e.jsx)(r.SettingRow,{role:"group","aria-label":j("reportSettingsFileOptions"),children:(0,e.jsx)("div",{className:"w-100 option-setting",children:(0,e.jsx)(Je,{defaultLabel:j("reportSettingsFileOptions"),label:l||j("reportSettingsFileOptions"),checked:!(n||[]).includes("fileOptions")||!1,onValueChange:e=>{o("fileOptions",e)},onCheckedChange:e=>{m("fileOptions",e)},children:(0,e.jsx)("div",{children:(0,e.jsxs)(i.Select,{size:"sm",className:"w-100",value:h||"",onChange:e=>{g("mergeFiles",e.target.value)},children:[(0,e.jsx)("option",{value:"",title:j("FileOptionsSplitDesc"),children:j("FileOptionsSplit")}),(0,e.jsx)("option",{value:"nextPage",title:j("FileOptionsMergeNextPageDesc"),children:j("FileOptionsMergeNextPage")}),(0,e.jsx)("option",{value:"continuous",title:j("FileOptionsMergeContinuousDesc"),children:j("FileOptionsMergeContinuous")})]})})})})}),(0,e.jsx)(r.SettingRow,{role:"group","aria-label":j("reportSettingsFileName"),children:(0,e.jsx)("div",{className:"w-100 option-setting",children:(0,e.jsx)(Je,{defaultLabel:j("reportSettingsFileName"),label:c||j("reportSettingsFileName"),checked:!(n||[]).includes("reportName")||!1,onValueChange:e=>{o("reportName",e)},onCheckedChange:e=>{m("reportName",e)},children:(0,e.jsx)("div",{children:a?(0,e.jsx)(it,{dataSources:a,theme:u,value:M,prefix:"${",onBlur:e=>{(e=>{x(e||""),g("reportName",e||"")})(e)}}):""})})})}),(0,e.jsx)(r.SettingRow,{role:"group","aria-label":j("reportSettingsSaveLocation"),children:(0,e.jsx)("div",{className:"w-100 option-setting",children:(0,e.jsx)(Je,{defaultLabel:j("reportSettingsSaveLocation"),label:p||j("reportSettingsSaveLocation"),checked:!(n||[]).includes("saveToAGSAccount")||!1,onValueChange:e=>{o("saveToAGSAccount",e)},onCheckedChange:e=>{m("saveToAGSAccount",e)},tooltipLabel:j("saveToAccountTip")})})}),(0,e.jsx)(r.SettingRow,{role:"group","aria-label":j("reportSettingsFormat"),children:(0,e.jsx)("div",{className:"w-100 option-setting",children:(0,e.jsx)(Je,{defaultLabel:j("reportSettingsFormat"),label:d||j("reportSettingsFormat"),checked:!(n||[]).includes("outputFormat")||!1,onValueChange:e=>{o("outputFormat",e)},onCheckedChange:e=>{m("outputFormat",e)},children:(0,e.jsx)("div",{children:(0,e.jsxs)(i.Select,{size:"sm",className:"w-100",value:I||"docx",onChange:e=>{g("outputFormat",e.target.value)},children:[(0,e.jsx)("option",{value:"docx",children:j("formatDocx")}),(0,e.jsx)("option",{value:"pdf",children:j("formatPdf")})]})})})})})]})})};var ot=p(508),lt=p.n(ot),ct=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(i[s[r]]=e[s[r]])}return i};const pt=i=>{const s=window.SVG,{className:r}=i,n=ct(i,["className"]),a=(0,t.classNames)("jimu-icon jimu-icon-component",r);return s?(0,e.jsx)(s,Object.assign({className:a,src:lt()},n)):(0,e.jsx)("svg",Object.assign({className:a},n))},{useState:dt,useEffect:ut}=t.React,mt=Object.assign({},l,t.defaultMessages,i.defaultMessages),gt=s=>{const{onSampleTemplatesCreated:n,onSampleTemplatesCreatedFailed:a,theme:o,surveyItemInfo:l,serviceItemInfo:c,featureLayerUrl:p,editDisabled:d,templates:u}=s,m=t.hooks.useTranslation(mt),[g,h]=t.React.useState(!1),[y,I]=dt(u||[]);ut(()=>{I(u)},[u]);const[j,M]=dt([]),x=(e,t)=>{const i=[].concat(j),s=i.indexOf(t);e?s<0&&i.push(t):s>=0&&i.splice(s,1),M(i)};return(0,e.jsx)(r.SettingRow,{css:(e=>t.css`
      .option-setting {
        // padding: 0.75rem;
        padding: 0.5rem;
        background: ${e.sys.color.action.pressed}; // #181818;
        ul {
          list-style: none;
          padding: 0;
          margin: 0.5rem 0;
          li {
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 0.5rem 0;
            >label {
              max-width: calc(100% - 24px);
              display: flex;
              gap: 0.275rem;
              align-items: center;
              span.template-label {
                margin: 0 -2px;
              }
            }
          }
        }
      }
      .jimu-widget-setting--row {
        background: ${e.sys.color.divider.tertiary}  // #3d3d3d
        padding: 0.625rem;
      }
      .add-template-btn {
        overflow: visible;
      }
      .option-setting-item{
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        flex-wrap: nowrap;
      }`)(o),children:(0,e.jsxs)("div",{className:"w-100 option-setting",role:"group","aria-labelledby":"reportTemplateTip",children:[(0,e.jsx)("p",{id:"reportTemplateTip",children:m("reportTemplateTip")}),(0,e.jsxs)("div",{css:(0,t.css)("position:relative;"),children:[(0,e.jsxs)("ul",{children:[(0,e.jsxs)("li",{children:[(0,e.jsxs)("label",{children:[(0,e.jsx)(i.Checkbox,{className:"can-x-switch",checked:j.includes("individual"),"data-key":"individual",onChange:e=>{x(e.target.checked,"individual")}}),(0,e.jsx)(ce,{size:16}),(0,e.jsx)("span",{className:"template-label",children:m("individualRecordTemplate")})]}),(0,e.jsx)(i.Tooltip,{id:"individualTooltip",title:m("individualRecordTemplateTip"),placement:"left",interactive:!0,children:(0,e.jsx)(i.Button,{className:"mr-1 p-0 border-0",type:"tertiary",icon:!0,size:"sm",children:(0,e.jsx)(pt,{size:16})})})]}),(0,e.jsxs)("li",{children:[(0,e.jsxs)("label",{children:[(0,e.jsx)(i.Checkbox,{className:"can-x-switch",checked:j.includes("summary"),"data-key":"summary",onChange:e=>{x(e.target.checked,"summary")}}),(0,e.jsx)(me,{size:16}),(0,e.jsx)("span",{className:"template-label",children:m("summaryTemplate")})]}),(0,e.jsx)(i.Tooltip,{id:"summaryTooltip",title:m("summaryTemplateTip"),placement:"left",interactive:!0,children:(0,e.jsx)(i.Button,{className:"mr-1 p-0 border-0",type:"tertiary",icon:!0,size:"sm",children:(0,e.jsx)(pt,{size:16})})})]}),(0,e.jsxs)("li",{children:[(0,e.jsxs)("label",{children:[(0,e.jsx)(i.Checkbox,{className:"can-x-switch",checked:j.includes("summaryIndividual"),"data-key":"summaryIndividual",onChange:e=>{x(e.target.checked,"summaryIndividual")}}),(0,e.jsx)(Ie,{size:16}),(0,e.jsx)("span",{className:"template-label",children:m("combinedTemplate")})]}),(0,e.jsx)(i.Tooltip,{id:"summaryIndividualTooltip",title:m("combinedTemplateTip"),placement:"left",interactive:!0,children:(0,e.jsx)(i.Button,{className:"mr-1 p-0 border-0",type:"tertiary",icon:!0,size:"sm",children:(0,e.jsx)(pt,{size:16})})})]})]}),(0,e.jsx)(i.Tooltip,{title:d?m(l?"notOwnerMsg":"noActions"):"",showArrow:!0,placement:"left",interactive:!0,leaveDelay:100,children:(0,e.jsx)("div",{children:(0,e.jsxs)(i.Button,{type:"default",disabled:!j.length||g||d,"aria-describedby":"jimu-overlays-container",className:"w-100 add-template-btn",onClick:()=>{h(!0);let e=[];b(j,l,c,p,y).then(t=>(e=(t||[]).map(e=>e.id),D(l,c))).then(t=>{h(!1);const i=(t||[]).filter(t=>e.includes(t.id));n(t,i)}).catch(e=>{console.error("Failed to create sample templates",e),a(e),h(!1)})},children:[m("createSampleTemplate"),g&&(0,e.jsx)(i.Loading,{type:i.LoadingType.Primary})]})})})]})]})})};var ht=p(73),yt=p.n(ht),It=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(i[s[r]]=e[s[r]])}return i};const jt=i=>{const s=window.SVG,{className:r}=i,n=It(i,["className"]),a=(0,t.classNames)("jimu-icon jimu-icon-component",r);return s?(0,e.jsx)(s,Object.assign({className:a,src:yt()},n)):(0,e.jsx)("svg",Object.assign({className:a},n))};var Mt=p(996),xt=p.n(Mt),Nt=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(i[s[r]]=e[s[r]])}return i};const St=i=>{const s=window.SVG,{className:r}=i,n=Nt(i,["className"]),a=(0,t.classNames)("jimu-icon jimu-icon-component",r);return s?(0,e.jsx)(s,Object.assign({className:a,src:xt()},n)):(0,e.jsx)("svg",Object.assign({className:a},n))},ft=i=>{const s=t.css`
    &.progress-type-loading {
      @keyframes loading {
        0% {transform: rotate(0deg); };
        100% {transform: rotate(360deg)};
      }
      width: ${i.size+"px"||0};
      height: ${i.size+"px"||0};
      border: 1px solid var(--ref-palette-neutral-800);
      border-radius: 50%;
      border-top: 1px solid var(--ref-palette-neutral-1100);
      box-sizing: border-box;
      animation:loading 2s infinite linear;
      margin-right: auto;
      margin-left: auto;
    }
  `;return(0,e.jsx)("div",{css:s,className:"progress-type-loading"})},{useState:Tt,useEffect:vt}=t.React,Dt=Object.assign({},l,t.defaultMessages,i.defaultMessages),wt=s=>{const{editTemplate:n,selectedTemplates:a,featureLayerUrl:o,templates:l,onSaveTemplate:c,surveyItemInfo:p,serviceItemInfo:d,onDeleteTemplate:m,theme:g,editDisabled:h}=s,I=t.i18n.getIntl(),j=t.hooks.useTranslation(Dt),[M,x]=Tt("select"),N=e=>{x(e),K(""),q(""),Q(""),"select"===e?(D(""),b(""),oe(""),se(""),ne(!1),te(!1)):(E(""),D(""),b(""),oe(""),se(""),ne(!1),te(!0))},[S,T]=Tt(l||[]),[v,D]=Tt(null==n?void 0:n.title),[w,b]=Tt(null==n?void 0:n.snippet),[A,E]=Tt(null==n?void 0:n.id),[z,U]=Tt(!1),[P,R]=Tt(),[V,Q]=Tt(),[Y,B]=Tt(!1),[Z,W]=Tt(!1),[H,$]=Tt(!1),[J,q]=Tt(),[X,K]=Tt(),[ee,te]=Tt(!1),[ie,se]=Tt(),[re,ne]=Tt(),[ae,oe]=Tt();vt(()=>{T(l)},[l]),vt(()=>{x(n?"upload":"select"),D((null==n?void 0:n.title)||""),b((null==n?void 0:n.snippet)||""),te(!1),E((null==n?void 0:n.id)||""),oe(n?{name:null==n?void 0:n.name,modified:n.modified||new Date(n.created)}:""),R(""),Q(""),se(""),ne(!1)},[n]);const le=e=>{K(""),q("");const t=e.target.files||e.dataTransfer.files,i=t&&t[0];e.target&&e.target.value&&(e.target.value="");let s="",r=null;if(i){A&&(r=S.find(e=>e.id===A),s=r.name);const e=i&&i.name&&ce(i&&i.name);i.type&&"application/vnd.openxmlformats-officedocument.wordprocessingml.document"!==i.type||!i.type&&"docx"!==i.name.split(".").pop()?R(j("templateDlgUploadTip")):A&&i.name!==s&&i.name.replace(/ /g,"_")!==s?R(j("templateDlgUpdateFileNameChangedErrMsg")):!A&&e?R(j("templateDlgFileNameExistsErrMsg",{existedTemplateName:e.name})):(oe(i),se(""),ne(!1),n||D(i.name),R(""),setTimeout(()=>{ue(i)},0))}},ce=e=>S.find(t=>t.name===e||t.name===e.replace(/ /g,"_")),pe=()=>{oe(""),se(""),ne(!1)},de=()=>{$(!0),K("");let e=n||{};if(A)e=S.find(e=>e.id===A),e.file=ae;else{e.file=ae,e.name=ae.name;let t=y.typeKeywords;p?t=t.concat(["Survey123","Survey123 Hub",p.id]):d&&(e.typeKeywords=t.concat([d.id]))}return e.title=v,e.snippet=w,function(e,t,i,s,r,n){const a={title:e.title,snippet:e.snippet?e.snippet:"",typeKeywords:e.typeKeywords},o=C(e,t);if(e.name||e.file){if(o&&!0!==e.noFile)return Promise.resolve(!0).then(()=>{if(e.id)return r||n?e:e.file?L(i,s,e,a,e.templateSectionSetting,e.file):L(i,s,e,a,e.templateSectionSetting);{const t=Object.assign({},a);return t.file=e.file,O(i,t,s,e.templateSectionSetting)}})}else e.noFile=!0}(e,S,p,d,h,!ee).then(e=>($(!1),K(""),A?e:(E(e.id),f(e.id)))).then(e=>{c&&c(e)}).catch(e=>{console.warn(j("templateAddErrMsg"),e),K(j("templateAddErrMsg")),$(!1)})},ue=e=>{U(!0),se(""),ne(!1);const t=e=>{U(!1),se(e)};return function(e,t,i){const s={templateFile:e,featureLayerUrl:t};return i&&(s.surveyItemId=i.id),s.templateFile.slice(0,1).arrayBuffer().catch(()=>{console.warn("This file has changed. Please select this file again.")}).then(()=>{const e=Object.assign(s,{f:"json",portalUrl:G().portalUrl,token:G().token}),t=new FormData;Object.keys(e).forEach(i=>{const s=e[i];t.append(i,s)});const i=`${k()}/featureReport/checkTemplateSyntax`;return fetch(i,{method:"POST",headers:u,body:t}).then(e=>e.json())}).then(e=>{var t;if(!e.success){const i=(null===(t=e.error)||void 0===t?void 0:t.message)||e.details&&e.details[0];console.error("failed to check the template syntax",i)}return e})}(e||ae,o,p).then(e=>{var i;if(e.success)U(!1),ne(!0);else{const s=j("checkSyntaxErrMsg",{serverSideErrMsg:(null===(i=e.error)||void 0===i?void 0:i.message)||e.details&&e.details[0]&&e.details[0].description});t(s)}}).catch(e=>{t("Failed to check the template syntax.")})},me=()=>{W(!0),q("");let e=n||{};return A&&(e=S.find(e=>e.id===A)),function(e,i,s){const r=e.id;return new Promise((e,t)=>{if(!r)throw new Error("Failed to delte report template");e(!0)}).then(e=>t.esri.restPortal.removeItem(Object.assign({id:r,owner:(null==i?void 0:i.owner)||(null==s?void 0:s.owner)},F()))).then(e=>{if(!e||e.error||!e.success)throw new Error(e.error);return r})}(e,p,d).then(e=>{W(!1),m&&m(e)}).catch(e=>{console.warn(j("templateDeleteErrMsg"),e),q(j("templateDeleteErrMsg")),W(!1),B(!1)})};return(0,e.jsxs)("div",{className:"template-editor-outter","aria-label":j("manageTempate"),css:(e=>t.css`
      .jimu-widget-setting--row {
        // padding: 0.625rem
      }
      .upload-label {
        margin-bottom: 0;
      }
      // .upload-template-btn {
      //   overflow: hidden
      //   text-overflow: ellipsis
      //   display: -webkit-box
      //   -webkit-box-orient: vertical
      //   word-break: break-word
      //   -webkit-line-clamp: 2
      // }
      .file-name-box {
        padding: 0.625rem;
        display: flex;
        align-items: center;
        // gap: 6px
        background: var(--sys-color-secondary);
        .file-name {
          overflow: hidden;
          text-overflow: ellipsis;
          display: -webkit-box;
          -webkit-box-orient: vertical;
          word-break: break-word;
          -webkit-line-clamp: 2;
        }
      }
      .existing-file-name {
        overflow: auto;
        word-wrap: break-word;
        overflow: hidden;
      }
      .upload-template-btn {
        position: relative;
      }
      .display-error-tips {
        word-break: break-word;
        margin: 0 4px;
        color: ${e.sys.color.error.main};
      }
      .display-warnning-tips {
        word-break: break-word;
        margin: 0 4px;
      }
      .check-syntax {
        cursor: pointer;
        padding-top: 0;
        padding-bottom: 0;
      }

      input.upload-template-input {
        position: absolute;
        display: block;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        opacity: 0;
     }
      .checking-syntax-status {
        display: flex;
        align-items: center;
        gap: 0.25rem;
      }
      .template-editor-outter{
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        // margin-bottom: 8px
      }`)(g),children:[n?(0,e.jsx)(r.SettingSection,{role:"group",children:(0,e.jsxs)(r.SettingRow,{flow:"wrap",className:"mb-0",children:[(0,e.jsx)("p",{className:"existing-file-name",children:n.name}),(0,e.jsx)("div",{css:(0,t.css)("position: relative;"),children:ae&&ae.size?(0,e.jsxs)("div",{className:"w-100 file-name-box",children:[(0,e.jsx)("span",{className:"file-name",children:ae.name}),(0,e.jsx)(i.Button,{className:"p-0","aria-label":j("remove"),icon:!0,type:"tertiary",onClick:()=>{pe()},children:(0,e.jsx)(_,{size:12})})]}):(0,e.jsxs)("a",{href:"javascript:;",children:[j("selectAnotherFile"),(0,e.jsx)("input",{type:"file",tabIndex:-1,"aria-hidden":"true",className:"upload-template-input",multiple:!1,accept:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",onChange:e=>{le(e)}})]})}),P?(0,e.jsx)("div",{className:"display-error-tips",children:P}):""]})}):(0,e.jsxs)(r.SettingSection,{children:[(0,e.jsxs)(r.SettingRow,{flow:"wrap",role:"radiogroup",className:"mb-4",children:[(0,e.jsxs)(i.Label,{className:"d-flex align-items-center w-100",children:[(0,e.jsx)(i.Radio,{className:"mr-2",name:"template-mode",checked:"select"===M,onChange:()=>{N("select")}}),j("selectExistTemplate")]}),(0,e.jsxs)(i.Label,{className:"d-flex align-items-center upload-label w-100",children:[(0,e.jsx)(i.Tooltip,{title:h?j(p?"notOwnerMsg":"noActions"):"",showArrow:!0,placement:"left",interactive:!0,leaveDelay:100,children:(0,e.jsx)(i.Radio,{className:"mr-2",name:"template-mode",checked:"upload"===M,disabled:h,onChange:()=>{N("upload")}})}),(0,e.jsx)(i.Tooltip,{title:h?j(p?"notOwnerMsg":"noActions"):"",showArrow:!0,placement:"left",interactive:!0,leaveDelay:100,children:(0,e.jsx)("span",{children:j("uploadNewTemplate")})})]})]}),"select"===M?(0,e.jsx)(r.SettingRow,{children:(0,e.jsxs)(i.Select,{size:"sm",className:"w-100",value:A,onChange:e=>{(e=>{E(e);const t=S.find(t=>t.id===e);D((null==t?void 0:t.title)||""),b((null==t?void 0:t.snippet)||""),te(!1),oe(t?{name:null==t?void 0:t.name}:""),se(""),ne(!1),Q("")})(e.target.value)},children:[(S||[]).length?(S||[]).map(t=>(0,e.jsx)("option",{disabled:a.includes(t),value:t.id,children:t.title},t.id)):"",(S||[]).length?"":(0,e.jsx)("option",{disabled:!0,value:"",children:j("noData")})]})}):"","upload"===M?ae?(0,e.jsxs)("div",{className:"w-100 file-name-box",children:[(0,e.jsx)("span",{className:"file-name",children:ae.name}),(0,e.jsx)(i.Button,{className:"p-0","aria-label":j("remove"),icon:!0,type:"tertiary",onClick:()=>{pe()},children:(0,e.jsx)(_,{size:12})})]}):(0,e.jsxs)(Be.Fragment,{children:[(0,e.jsxs)(i.Button,{type:"primary",className:"w-100 upload-template-btn",children:[j("selectFile"),(0,e.jsx)("input",{type:"file",className:"upload-template-input",multiple:!1,accept:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",onChange:e=>{le(e)}})]}),P?(0,e.jsx)("div",{className:"display-error-tips",children:P}):""]}):""]}),(0,e.jsxs)(r.SettingSection,{children:[(0,e.jsxs)(r.SettingRow,{flow:"wrap",label:j("name"),children:[(0,e.jsx)(i.TextInput,{"aria-label":j("name"),"aria-required":"true",disabled:h,title:j("templateNameHint"),className:"w-100",value:v,onChange:e=>{(e=>{D(e.target.value||""),C({title:e.target.value,id:A},S)?Q(""):e.target.value?Q(j("templateDlgNameExistsMsg")):Q(j("templateEmptyNameMsg"))})(e),te(!0)}}),V?(0,e.jsx)("div",{className:"display-error-tips",children:V}):""]}),(0,e.jsx)(r.SettingRow,{flow:"wrap",label:j("templateSummary"),children:(0,e.jsx)(i.TextArea,{"aria-label":j("templateSummary"),title:j("templateSummaryTip"),disabled:h,className:"w-100 summary",height:134,value:w,onChange:e=>{b(e.target.value||""),te(!0)}})}),ae?(0,e.jsxs)(r.SettingRow,{css:(0,t.css)("margin-top: 0.75rem !important;"),children:[(0,e.jsx)("i",{className:"text-break",children:j("templateLastModified")}),(0,e.jsx)("i",{className:"text-break",css:(0,t.css)("padding: 0 0.25em;"),children:t.dateUtils.formatDateValue(ae.modified,I)})]}):""]}),(0,e.jsxs)(r.SettingSection,{children:[ae&&ae.size?(0,e.jsx)(r.SettingRow,{className:"mt-0",css:(0,t.css)("flex-wrap: wrap !important;"),children:z?(0,e.jsxs)("div",{className:"text-break checking-syntax-status",children:[j("checking"),(0,e.jsx)(ft,{size:16})]}):(0,e.jsxs)(Be.Fragment,{children:[(0,e.jsxs)(i.Button,{icon:!0,type:"tertiary",className:"text-break check-syntax",onClick:()=>{ue()},children:[(0,e.jsx)("a",{href:"javascript:;",children:j("checkSyntax")}),(0,e.jsxs)("span",{css:(0,t.css)("margin: 0 0.25rem;"),children:[re&&!ie?(0,e.jsx)(jt,{size:16,color:"var(--sys-color-success-main)",css:(0,t.css)("margin: 0 6px;")}):"",ie?(0,e.jsx)(St,{size:16,color:"var(--sys-color-warning-main)",css:(0,t.css)("margin: 0 6px;")}):""]})]}),ie?(0,e.jsxs)("div",{className:"display-warnning-tips font-13 font-dark-800",children:[" ",ie," "]}):""]})}):"",(0,e.jsxs)(r.SettingRow,{flow:"wrap",css:(0,t.css)("margin-top: 12px;"),children:[(0,e.jsxs)(i.Button,{css:(0,t.css)("position: relative;"),"aria-label":j("saveTemplate"),className:"w-100 summary",disabled:!ae||!v||H||z||!!V,type:"primary",onClick:()=>{de()},children:[(0,e.jsx)("span",{css:(0,t.css)(H?"visibility: hidden":"visibility: visible;"),children:j("saveTemplate")}),H&&(0,e.jsx)(i.Loading,{type:i.LoadingType.DotsSecondary})]}),X?(0,e.jsxs)("div",{className:"display-error-tips",children:[" ",X," "]}):""]}),"select"===M&&A?(0,e.jsxs)(r.SettingRow,{flow:"wrap",css:(0,t.css)("margin-top: 12px;"),children:[(0,e.jsx)(i.Tooltip,{title:h?j(p?"notOwnerMsg":"noActions"):"",showArrow:!0,placement:"left",interactive:!0,leaveDelay:100,children:(0,e.jsxs)(i.Button,{css:(0,t.css)("position: relative;"),"aria-label":j("deleteTemplatewarningHeader"),className:"w-100 summary",disabled:(null==p?void 0:p.isCoowner)||(null==d?void 0:d.isCoowner)||Z||h,type:"primary",onClick:()=>{q(""),B(!0)},children:[j("deleteTemplatewarningHeader"),Z&&(0,e.jsx)(i.Loading,{type:i.LoadingType.DotsSecondary})]})}),J?(0,e.jsxs)("div",{className:"display-error-tips",children:[" ",J," "]}):"",(0,e.jsx)(i.AlertPopup,{title:j("deleteTemplatewarningHeader"),okLabel:j("deleteTemplate"),cancelLabel:j("cancel"),isOpen:Y,onClickOk:()=>{me()},onClickClose:()=>{B(!1)},children:j("deleteTemplateWarning")})]}):""]})]})};var bt=p(153),Ot=p.n(bt),At=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(i[s[r]]=e[s[r]])}return i};const Et=i=>{const s=window.SVG,{className:r}=i,n=At(i,["className"]),a=(0,t.classNames)("jimu-icon jimu-icon-component",r);return s?(0,e.jsx)(s,Object.assign({className:a,src:Ot()},n)):(0,e.jsx)("svg",Object.assign({className:a},n))},kt=Object.assign({},l,i.defaultMessages);var Lt;!function(e){e.outputSetting="OutputSetting",e.templateEditor="TemplateEditor"}(Lt||(Lt={}));class Ct extends t.React.PureComponent{constructor(i){super(i),this.dataSourceManager=t.DataSourceManager.getInstance(),this.supportedDsTypes=(0,t.Immutable)([n.AllDataSourceTypes.FeatureLayer,n.AllDataSourceTypes.SubtypeGroupLayer,n.AllDataSourceTypes.SubtypeSublayer]),this.state={dataSource:null,serviceItemId:"",dataSourceInvalid:!0,allowedDsIds:null,supportService2ReportRelation:!0,notSupportedEnterpriseMsg:"",featureCount:null,useSurvey:!1,surveys:[],selectedSurvey:null,selectedSurveyId:"",cache:{},errorMsg:"",errorType:"warning",showOutputSetting:!1,showTemplateEditor:!1,templateItems:[],surveyItemInfo:null,featureLayerUrl:"",serviceItemInfo:null,inputFeatureTemplate:"",allowToEdit:!0,seletedTemplateItems:[],activeTemplateIdx:null,popperFocusNode:null,editingTemplate:null,samplePrintingTemplateIds:[],reportTemplateIds:[],modalIsOpen:!1,isGeneratingSampleTemplate:!1,isGeneratingSummaryIndividualTemplate:!1,isGeneratingIndividualTemplate:!1,isGeneratingSummaryTemplate:!1,quickReferenceUrl:""},this.unmount=!1,this.closeSidePopper=e=>{const t="show"+e;if(this.state[t]){const e={};e[t]=!1,this.setState(e)}e===Lt.templateEditor&&this.setState({activeTemplateIdx:null,editingTemplate:null})},this.openSidePopper=e=>{const t="show"+e;if(!this.state[t]){const e={};e[t]=!0,this.setState(e)}},this.openTemplateEditor=(e,t=!1,i)=>{const s=Number(e);this.setState({activeTemplateIdx:s,editingTemplate:i}),this.openSidePopper(Lt.templateEditor),this.setTemplateSidePopperAnchor(e,!0)},this.onDataSourceCreated=e=>{let t;this.dataSource=e,this.setState({dataSource:e});const i=N(e),s=i.url;if(!s)return console.error("The selected data source has no url"),this.setState({featureLayerUrl:null,datasourceInvalid:!0}),void this.clearDS();s===this.state.featureLayerUrl?S(i,s).then(e=>{this.setState({featureCount:e})}):this.setState({datasourceInvalid:!0});const r=M(e);if(!r)return console.warn(this.i18n("serviceNotAvailable")),void this.clearDS();this.setState({serviceItemId:r}),x(e,r).then(i=>{i.length||console.log("This layer is not a survey's assosiate layer"),this.setState({datasourceInvalid:!1}),this.hideAlert(),this.setState({featureLayerUrl:s,surveys:i}),t=this.state.selectedSurveyId||"noSurvey";const n=i.find(e=>e.id===t);if(this.setState({selectedSurvey:n}),n&&this.setState({useSurvey:!0}),!this.props.config.inputFeatureTemplate&&!this.state.inputFeatureTemplate){const t=this.getDefaultInputFeatureTemplate(e.getLayerDefinition());this.setState({inputFeatureTemplate:t})}return T(r).then(e=>{this.setState({serviceItemInfo:e}),setTimeout(()=>{this.afterSelectedSurveyChanged({serviceItemInfo:e})},0)})})},this.useSurveyChangedHandler=e=>{const t=e&&this.state.surveys.length?this.state.surveys[0]:null;this.setState({useSurvey:e,selectedSurvey:t,selectedSurveyId:null==t?void 0:t.id}),this.props.onSettingChange({id:this.props.id,config:this.props.config.set("surveyItemId",null==t?void 0:t.id)}),setTimeout(()=>{this.afterSelectedSurveyChanged({selectedSurvey:t})},0)},this.selectedSurveyIdChanged=e=>{var t;const i=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.value;if(!this.state.useSurvey)return;const s=i?this.state.surveys.find(e=>e.id===i):null;this.setState({selectedSurvey:s,selectedSurveyId:i||""}),this.props.onSettingChange({id:this.props.id,config:this.props.config.set("surveyItemId",i||"")}),setTimeout(()=>{this.afterSelectedSurveyChanged({selectedSurvey:s})},0)},this.afterSelectedSurveyChanged=e=>{var t,i;null!=e||(e={});const s=this.state.dataSource,r=(null===(t=e.selectedSurvey)||void 0===t?void 0:t.id)||(null===(i=this.state.selectedSurvey)||void 0===i?void 0:i.id),n=e.serviceItemInfo||this.state.serviceItemInfo;let a=null;if(!this.state.supportService2ReportRelation&&!r)return;const o=this.getCache();if(o)return this.setState(o),void this.props.onSettingChange({id:this.props.id,config:this.props.config.set("reportName",o.reportName).set("reportTemplateIds",o.reportTemplateIds)});let l="",c=!1,p="";return Promise.resolve().then(()=>r?T(r).then(e=>{a=e,c=!!((null==a?void 0:a.isOwner)||(null==a?void 0:a.isAdmin)||(null==a?void 0:a.isCoowner)),l=z(this.state.featureLayerUrl,r,this.props.locale),this.setState({surveyItemInfo:a,quickReferenceUrl:l,allowToEdit:c})}):(c=!!((null==n?void 0:n.isOwner)||(null==n?void 0:n.isAdmin)||(null==n?void 0:n.isCoowner)),l=z(this.state.featureLayerUrl,null,this.props.locale),void this.setState({quickReferenceUrl:l,allowToEdit:c}))).then(()=>{p=this.getDefaultReportName(a,n,s),this.props.onSettingChange({id:this.props.id,config:this.props.config.set("reportName",p)});return S(N(this.dataSource),this.state.featureLayerUrl)}).then(e=>{this.setState({featureCount:e}),D(a,n).then(t=>{var i;this.setState({templateItems:t});let s=[];(null===(i=this.props.config.reportTemplateIds)||void 0===i?void 0:i.length)&&(s=t.filter(e=>this.props.config.reportTemplateIds.includes(e.id))),this.setState({seletedTemplateItems:s});const r=s.map(e=>e.id);this.props.onSettingChange({id:this.props.id,config:this.props.config.set("reportTemplateIds",r)});const n={surveyItemInfo:a,quickReferenceUrl:l,allowToEdit:c,featureCount:e,templateItems:t,seletedTemplateItems:s,reportName:p,reportTemplateIds:r};this.setCache(n)})})},this.setCache=e=>{var t;const i=this.state.selectedSurvey;let s=null==i?void 0:i.id;s||(s="noSurvey");const r=this.state.cache||{};null!==(t=r[s])&&void 0!==t||(r[s]={}),Object.assign(r[s],e||{}),this.setState({cache:r})},this.getCache=e=>{const t=this.state.selectedSurvey;let i=null==t?void 0:t.id;i||(i="noSurvey");const s=this.state.cache;return s[i]?e?s[i][e]:s[i]:null},this.clearCache=()=>{this.setState({cache:{}})},this.clearDS=()=>{this.dataSource=null,this.setState({dataSource:null}),this.showAlert({errorType:"warning",errorMsg:this.i18n("serviceNotAvailable")}),this.props.onSettingChange({id:this.props.id,useDataSources:null}),this.setState({featureLayerUrl:null})},this.onDataSourceChange=e=>{var i,s;if(!e)return;let r=e;(this.props.useDataSources?null===(i=this.props.useDataSources[0])||void 0===i?void 0:i.mainDataSourceId:"")!==(null===(s=e[0])||void 0===s?void 0:s.mainDataSourceId)&&(r=e.map(e=>Object.assign(Object.assign({},e),{dataSourceId:this.dataSourceManager.getDataViewDataSourceId(e.mainDataSourceId,t.CONSTANTS.SELECTION_DATA_VIEW_ID),dataViewId:t.CONSTANTS.SELECTION_DATA_VIEW_ID})),this.setState({datasourceInvalid:!0}),this.props.onSettingChange({id:this.props.id,config:this.props.config.set("surveyItemId",null)}),this.clearDS(),this.reset()),this.props.onSettingChange({id:this.props.id,useDataSources:r}),r&&r.length||this.reset()},this.reset=()=>{this.props.onSettingChange({id:this.props.id,config:{}}),this.setState({dataSource:null,dataSourceInvalid:!0,allowedDsIds:null,serviceItemId:"",supportService2ReportRelation:!0,useSurvey:!1,surveys:[],selectedSurvey:null,selectedSurveyId:"",cache:{},errorMsg:"",errorType:"warning",featureCount:null,showOutputSetting:!1,showTemplateEditor:!1,templateItems:[],reportTemplateIds:[],surveyItemInfo:null,featureLayerUrl:"",inputFeatureTemplate:"",allowToEdit:!0,seletedTemplateItems:[],activeTemplateIdx:null,popperFocusNode:null,editingTemplate:null,samplePrintingTemplateIds:[],modalIsOpen:!1,isGeneratingSampleTemplate:!1,isGeneratingSummaryIndividualTemplate:!1,isGeneratingIndividualTemplate:!1,isGeneratingSummaryTemplate:!1,quickReferenceUrl:""}),this.dataSource=null},this.getDefaultInputFeatureTemplate=e=>{if(e.displayField)return"{"+e.displayField+"}";const t=e.fields||[],i=t.find(e=>"esriFieldTypeString"===e.type);if(i)return"{"+i.name+"}";return(t.length>3?t.slice(0,4):t).map(e=>e.name).map(e=>"{"+e+"}").join(",")},this.getDefaultReportName=(e,t,i)=>{const s=i.getIdField()||"objectid";return V((null==e?void 0:e.title)||(null==t?void 0:t.title))+(s?"_OID${"+s+"}":"")},this.onClickBody=()=>{this.unmount||"warning"!==this.state.errorType||this.hideAlert()},this.onAlertClose=()=>{this.hideAlert()},this.i18n=(e,t)=>this.props.intl.formatMessage({id:e,defaultMessage:kt[e]},t),this.hideNoneHostedDs=e=>!(new RegExp(`/${t.SupportedServerTypes.FeatureService}/`,"i").test(e.url)&&t.dataSourceUtils.isAGOLHostedService(e.url)),this.onLabelChanged=(e,t)=>{const i=e+"Label";this.props.onSettingChange({id:this.props.id,config:this.props.config.set(i,t)})},this.onVisibilityChanged=(e,t)=>{const i=[].concat(this.props.config.hides||[]),s=i.indexOf(e);t?s>=0&&i.splice(s,1):s<0&&i.push(e),this.props.onSettingChange({id:this.props.id,config:this.props.config.set("hides",i)})},this.onDefaultValueChanged=(e,t)=>{this.props.onSettingChange({id:this.props.id,config:this.props.config.set(e,t)})},this.updateTemplate=e=>{var t;const i=this.state.templateItems.map(t=>t.id===e.id?e:t);this.state.templateItems.find(t=>t.id===e.id)||i.push(e);const r=this.state.seletedTemplateItems.map(t=>t.id===e.id?e:t);this.state.seletedTemplateItems.find(t=>t.id===e.id)||r.push(e);const n={templateItems:i,seletedTemplateItems:r,activeTemplateIdx:null,editingTemplate:null,showTemplateEditor:!1};this.setState(n),this.setCache(n);const a=r.map(e=>e.id);(null==a?void 0:a.length)&&a.join(",")===(null===(t=this.props.config.reportTemplateIds)||void 0===t?void 0:t.join(","))?s.builderAppSync.publishWidgetStateChangeToApp(this.props.widgetId,"templateTitleChanged",(new Date).getTime()):this.props.onSettingChange({id:this.props.id,config:this.props.config.set("reportTemplateIds",a)}),this.setCache({reportTemplateIds:a})},this.generateExamTemplate=e=>{const t={},i="isGenerating"+e+"Template";t[i]=!0,this.setState(t),function(e,t){const{surveyItemInfo:i,serviceItemInfo:s,type:r}=t||{};let n=V((null==i?void 0:i.title)||s.title)+"_sampleTemplate"+r.replace(/^\S/,e=>e.toUpperCase());return n.length>250&&(n=n.substr(0,250)),R(e,t).then(e=>(e?c.saveAs(e.slice(0,e.size,""),n+".docx"):console.error("Failed to generate sample template"),!0)).catch(e=>new Promise(t=>{let i=P(e);if(e&&500===e.status&&e.response instanceof Blob){const s=new FileReader;s.onload=()=>{const e=s.result;let r={};try{r=JSON.parse(e||"{}"),i=P(r),t(i)}catch(e){t(i)}},s.readAsText(e.response)}else t(i)}).then(e=>{console.error("Failed to generate sample template",e)}))}(this.state.featureLayerUrl,{surveyItemInfo:this.state.surveyItemInfo,serviceItemInfo:this.state.serviceItemInfo,type:e}).then(()=>{const e={};e[i]=!1,this.setState(e)})},this.printSampleTemplate=e=>{const i=N(this.dataSource),s=e.id,r=this.state.samplePrintingTemplateIds||[];r.push(s),this.setState({samplePrintingTemplateIds:[].concat(r)});const n=()=>{const e=this.state.samplePrintingTemplateIds||[],t=(this.state.samplePrintingTemplateIds||[]).indexOf(s);t>=0&&(e.splice(t,1),this.setState({samplePrintingTemplateIds:[].concat(e)}))};w(e,this.state.surveyItemInfo,i,this.props.config,this.props.locale).then(e=>{n(),e&&function(e,i){const s=G().token;if(!e||!e.resultInfo||!e.resultInfo.resultFiles)return;e.resultInfo.resultFiles.forEach((e,r)=>{const n=e.url;if(!n){const i=e.id||"",r=(0,t.getAppStore)().getState().portalUrl;return`${t.portalUrlUtils.getItemUrl(r,i)}/data?token=${s}`}r>0?setTimeout(()=>{Y(n,i)},3e3):Y(n,i)})}(e)}).catch(e=>{n(),this.showAlert({errorType:"error",errorMsg:e.message})})},this.removeTemplate=(e,t,i)=>{e&&e.stopPropagation();const s=[].concat(this.props.config.reportTemplateIds),r=this.state.seletedTemplateItems.findIndex(e=>e.id===t);if((null==s?void 0:s.length)>r){s.splice(r,1);const e=this.state.seletedTemplateItems.filter(e=>e.id!==t);this.setState({seletedTemplateItems:e}),this.setCache({seletedTemplateItems:e}),this.props.onSettingChange({id:this.props.id,config:this.props.config.set("reportTemplateIds",s)}),this.setCache({reportTemplateIds:s})}if(this.setState({activeTemplateIdx:null,editingTemplate:null,showTemplateEditor:!1}),i){if(this.state.templateItems.findIndex(e=>e.id===t)>=0){s.slice(r,1);const e=this.state.templateItems.filter(e=>e.id!==t);this.setState({templateItems:e})}}},this.setTemplateSidePopperAnchor=(e,t=!1)=>{let i;i=t?this.templateEditorPopperTrigger.current.getElementsByClassName("add-template-btn")[0]:this.templateEditorPopperTrigger.current.getElementsByClassName("jimu-tree-item__body")[e],this.setState({popperFocusNode:i})},this.onSampleTemplatesCreated=(e,t)=>{const i=t.map(e=>e.id),s={templateItems:e,seletedTemplateItems:t,reportTemplateIds:i};this.setState(s),this.setCache(s),this.props.onSettingChange({id:this.props.id,config:this.props.config.set("reportTemplateIds",i)})},this.onSampleTemplatesCreatedFailed=e=>{this.showAlert({errorType:"error",errorMsg:e.message})},this.getSurveyOptions=()=>this.state.surveys.map(t=>(0,e.jsx)("option",{value:t.id,children:t.title},t.id)),this.innerSettingButtonRef=t.React.createRef(),this.templateEditorPopperTrigger=t.React.createRef(),this.rootRef=t.React.createRef()}componentDidMount(){var e,i,r,n;this.unmount=!1,this.rootRef.current&&this.rootRef.current.addEventListener("click",this.onClickBody,!1),(null===(e=this.props.config)||void 0===e?void 0:e.inputFeatureTemplate)&&this.setState({inputFeatureTemplate:this.props.config.inputFeatureTemplate}),(null===(i=this.props.config)||void 0===i?void 0:i.surveyItemId)&&this.setState({selectedSurveyId:this.props.config.surveyItemId});const a=!t.portalUrlUtils.isAGOLDomain(this.props.portalUrl);this.setState({supportService2ReportRelation:!a||a&&U((null===(r=this.props.portalSelf)||void 0===r?void 0:r.enterpriseVersion)||"11.2","11.5.99")>=0}),null===(n=null===s.helpUtils||void 0===s.helpUtils?void 0:s.helpUtils.getWidgetHelpLink("feature-report"))||void 0===n||n.then(e=>{if(e){const t=this.i18n("notSupportedEnterpriseMsg",{thisHelpTopic:`<a href="${e}" target="blank">${this.i18n("thisHelpTopic")}</a>`});this.setState({notSupportedEnterpriseMsg:t})}})}componentWillUnmount(){this.unmount=!0,this.rootRef.current&&(this.rootRef.current.removeEventListener("click",this.onClickBody,!1),this.cancelCloseAlertTimer())}showAlert(e){this.unmount||(this.setState(e),"error"!==e.errorType&&this.startCloseAlertTimer())}hideAlert(){this.cancelCloseAlertTimer(),this.unmount||this.setState({errorMsg:""})}cancelCloseAlertTimer(){this.closeAlertTimer&&(clearTimeout(this.closeAlertTimer),this.closeAlertTimer=null)}startCloseAlertTimer(){this.cancelCloseAlertTimer(),this.closeAlertTimer=setTimeout(()=>{this.unmount||this.setState({errorMsg:""})},5e3)}render(){var s,l,c;const p={overrideItemBlockInfo:({itemBlockInfo:e},t)=>({name:a.TreeItemActionType.RenderOverrideItem,children:[{name:a.TreeItemActionType.RenderOverrideItemDroppableContainer,children:[{name:a.TreeItemActionType.RenderOverrideItemDraggableContainer,children:[{name:a.TreeItemActionType.RenderOverrideItemBody,children:[{name:a.TreeItemActionType.RenderOverrideItemMainLine,children:[{name:a.TreeItemActionType.RenderOverrideItemDragHandle},{name:a.TreeItemActionType.RenderOverrideItemIcon,autoCollapsed:!0},{name:a.TreeItemActionType.RenderOverrideItemTitle},{name:a.TreeItemActionType.RenderOverrideItemDetailToggle},{name:a.TreeItemActionType.RenderOverrideItemCommands}]}]}]}]}]})},d=this.i18n("setDataSource");let u=null;const m=this.props.useDataSources&&this.props.useDataSources[0];m&&m.dataSourceId&&(u=(0,e.jsx)(t.DataSourceComponent,{useDataSource:m,onDataSourceCreated:this.onDataSourceCreated,query:null}));const g=(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(i.Alert,{closable:!0,className:"error-alert",form:"basic",onClose:this.onAlertClose,open:this.state.errorMsg,text:this.state.errorMsg,type:this.state.errorType,withIcon:!0}),(0,e.jsxs)(r.SettingSection,{role:"group",className:m?"":"border-0",title:this.i18n("source"),"aria-label":this.i18n("source"),children:[(0,e.jsxs)(r.SettingRow,{children:[(0,e.jsx)(n.DataSourceSelector,{"aria-describedby":"serviceNotAvailable",types:this.supportedDsTypes,fromDsIds:this.state.allowedDsIds,useDataSourcesEnabled:!0,mustUseDataSource:!0,useDataSources:this.props.useDataSources,hideDs:this.hideNoneHostedDs,closeDataSourceListOnChange:!0,onChange:this.onDataSourceChange,widgetId:this.props.id}),u]}),m?(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(r.SettingRow,{role:"radiogroup",className:"w-100 survey-selector-container",children:[(0,e.jsxs)("div",{className:"w-100 align-items-center form-inline radio-item ",children:[(0,e.jsx)(i.Radio,{name:"survey-selector",className:"cursor-pointer",id:"survey-selector-none",checked:!this.state.useSurvey,"aria-checked":!this.state.useSurvey,onChange:()=>{this.useSurveyChangedHandler(!1)}}),(0,e.jsx)(i.Label,{for:"survey-selector-none",className:"cursor-pointer survey-selector-label",children:this.i18n("workWithFeatureLayer")})]}),(0,e.jsxs)("div",{className:"w-100 align-items-center form-inline radio-item ",children:[(0,e.jsx)(i.Radio,{name:"survey-selector",className:"cursor-pointer",id:"survey-selector",disabled:!this.state.surveys.length,title:this.state.surveys.length?"":this.i18n("noSurveyTip"),checked:this.state.useSurvey,"aria-checked":this.state.useSurvey,onChange:()=>{this.useSurveyChangedHandler(!0)}}),(0,e.jsx)(i.Label,{for:"survey-selector",className:"cursor-pointer survey-selector-label",title:this.state.surveys.length?"":this.i18n("noSurveyTip"),children:this.i18n("workWithSurvey")})]}),this.state.surveys.length&&this.state.useSurvey?(0,e.jsx)("div",{className:"w-100 align-items-center form-inline radio-item ",children:(0,e.jsx)(i.Select,{size:"sm",style:{width:"100%"},value:this.state.selectedSurveyId,onChange:this.selectedSurveyIdChanged,children:this.getSurveyOptions()})}):null]})}):null]}),m?null:(0,e.jsx)("div",{className:"empty-placeholder w-100",children:(0,e.jsxs)("div",{className:"empty-placeholder-inner",children:[(0,e.jsx)("div",{className:"empty-placeholder-icon",children:(0,e.jsx)(H,{size:48})}),(0,e.jsx)("div",{className:"empty-placeholder-text",id:"feature-report-blank-msg",dangerouslySetInnerHTML:{__html:this.i18n("selectDataPlaceholder",{ButtonString:d})}})]})})]}),y=(0,e.jsx)(r.SettingSection,{role:"group",className:"template-setting-outter","aria-label":this.i18n("reportTemplateTitle"),children:(0,e.jsxs)("div",{ref:this.templateEditorPopperTrigger,children:[(0,e.jsxs)(r.SettingRow,{level:1,label:this.i18n("reportTemplateTitle"),flow:"no-wrap",children:[(0,e.jsxs)(i.Button,{className:"p-0 help-btn",icon:!0,type:"tertiary",onClick:()=>{this.setState({modalIsOpen:!0})},children:[this.i18n("help"),(0,e.jsx)(Et,{})]}),(0,e.jsxs)(i.Modal,{isOpen:this.state.modalIsOpen,className:"bg-default w-75 d-flex justify-content-between",role:"dialog","aria-label":this.i18n("reportTemplateHelpTitle"),css:(I=this.props.theme,t.css`
  .template-list {
    // padding: 0.75rem;
    padding: 0.5rem;
    // background: ${I.ref.palette.neutral[300]}; //#181818;
    ul {
      list-style: none;
      padding: 0;
      margin: 0.5rem 0;
      li {
        width: 100%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin: 0.5rem 0;
        gap: 0.5rem;
        background: ${I.ref.palette.secondary[400]};
        >div {
          max-width: 100%; // calc(100% - 24px);
          display: flex;
          gap: 0.275rem;
          align-items: center;
          position:relative;
          p{
            margin:0;
          }
          span.template-label {
            margin: 0 -2px;
          }
          Button {
            min-width: 24px;
          }
        }
      }
    }
  }
  `),children:[(0,e.jsx)(i.ModalHeader,{className:"d-flex justify-content-between border-color-gray-300 py-4 font-16 font-dark-600",title:this.i18n("reportTemplateHelpTitle"),toggle:()=>{this.setState({modalIsOpen:!1})},children:this.i18n("reportTemplateHelpTitle")}),(0,e.jsx)(i.ModalBody,{children:(0,e.jsxs)("div",{className:"px-2 py-0 template-list",children:[(0,e.jsxs)("p",{className:"font-13 font-dark-600 mt-4",children:[this.i18n("reportTemplateHelpDesc"),(0,e.jsx)("a",{href:"https://doc.arcgis.com/"+(this.props.locale||"en")+"/survey123/browser/analyze-results/featurereporttemplates.htm",target:"_blank",rel:"noopener noreferrer",children:this.i18n("reportTemplateHelpLearnMore")})]}),(0,e.jsxs)("p",{className:"font-14 font-dark-800 mt-4",children:[this.i18n("quickReferencePage"),(0,e.jsx)("a",{href:this.state.quickReferenceUrl,target:"_blank",rel:"noopener noreferrer",children:(0,e.jsx)(ne,{css:(0,t.css)("margin: 0 6px")})})]}),(0,e.jsx)("p",{className:"font-14 font-dark-800 mt-4",children:this.i18n("sampleTemplate")}),(0,e.jsx)("div",{css:(0,t.css)("position:relative;"),children:(0,e.jsxs)("ul",{children:[(0,e.jsx)("li",{className:"px-2",children:(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{children:(0,e.jsx)(ce,{size:32})}),(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{children:this.i18n("individualRecordTemplate")}),(0,e.jsx)("p",{children:this.i18n("individualRecordTemplateTip")})]}),(0,e.jsx)(i.Button,{className:"p-0",icon:!0,type:"tertiary",title:this.i18n("download"),"aria-label":this.i18n("download"),disabled:this.state.isGeneratingIndividualTemplate,onClick:e=>{this.generateExamTemplate(h.Individual)},children:this.state.isGeneratingIndividualTemplate?(0,e.jsx)(ft,{size:16}):(0,e.jsx)(te,{size:16})})]})}),(0,e.jsx)("li",{className:"px-2",children:(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{children:(0,e.jsx)(me,{size:32})}),(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{children:this.i18n("summaryTemplate")}),(0,e.jsx)("p",{children:this.i18n("summaryTemplateTip")})]}),(0,e.jsx)(i.Button,{className:"p-0",icon:!0,type:"tertiary",title:this.i18n("download"),"aria-label":this.i18n("download"),disabled:this.state.isGeneratingSummaryTemplate,onClick:e=>{e.stopPropagation(),this.generateExamTemplate(h.Summary)},children:this.state.isGeneratingSummaryTemplate?(0,e.jsx)(ft,{size:16}):(0,e.jsx)(te,{size:16})})]})}),(0,e.jsx)("li",{className:"px-2",children:(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{children:(0,e.jsx)(Ie,{size:32})}),(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{children:this.i18n("combinedTemplate")}),(0,e.jsx)("p",{children:this.i18n("combinedTemplateTip")})]}),(0,e.jsx)(i.Button,{className:"p-0",icon:!0,type:"tertiary",title:this.i18n("download"),"aria-label":this.i18n("download"),disabled:this.state.isGeneratingSummaryIndividualTemplate,onClick:e=>{e.stopPropagation(),this.generateExamTemplate(h.SummaryIndividual)},children:this.state.isGeneratingSummaryIndividualTemplate?(0,e.jsx)(ft,{size:16}):(0,e.jsx)(te,{size:16})})]})})]})})]})}),(0,e.jsx)(i.ModalFooter,{children:(0,e.jsx)("div",{className:"d-flex justify-content-end mt10",children:(0,e.jsx)(i.Button,{type:"primary",className:"mr-2",onClick:()=>{this.setState({modalIsOpen:!1})},"aria-label":this.i18n("ok"),children:this.i18n("ok")})})})]})]}),(0,e.jsx)(r.SettingRow,{children:(0,e.jsx)(i.Button,{type:"primary",id:"newTemplateBtn",className:"w-100 add-template-btn",onClick:()=>{this.openTemplateEditor(this.state.seletedTemplateItems.length)},children:(0,e.jsxs)("div",{className:"w-100 px-2 text-truncate",children:[(0,e.jsx)(i.Icon,{icon:fe(),className:"mr-1",size:14}),this.i18n("newTemplate")]})})}),this.state.seletedTemplateItems.length?"":(0,e.jsx)(gt,{templates:this.state.templateItems,theme:this.props.theme,onSampleTemplatesCreated:this.onSampleTemplatesCreated,onSampleTemplatesCreatedFailed:this.onSampleTemplatesCreatedFailed,surveyItemInfo:this.state.surveyItemInfo,featureLayerUrl:this.state.featureLayerUrl,serviceItemInfo:this.state.serviceItemInfo,editDisabled:!this.state.allowToEdit}),(0,e.jsxs)(r.SettingRow,{className:"pt-0 border-0 template-list-container ",children:[(0,e.jsxs)("div",{className:"setting-ui-template-list w-100",children:[(null===(s=this.state.seletedTemplateItems)||void 0===s?void 0:s.length)?(0,e.jsx)(a.List,Object.assign({className:"setting-ui-template-list-exsiting",itemsJson:Array.from(this.state.seletedTemplateItems||[]).map((e,t)=>({itemStateDetailContent:e,itemKey:`${t}`,itemStateChecked:this.state.showTemplateEditor&&t===this.state.activeTemplateIdx,itemStateTitle:e.title})),renderOverrideItemCommands:(s,r)=>{var n;const{itemJsons:[a]}=r.props,o=a.itemStateDetailContent.id;return(0,e.jsxs)("div",{css:(0,t.css)("display: flex; align-items: center;position:relative"),className:"jimu-tree-command-list jimu-tree-item__commands ",children:[(0,e.jsxs)(i.Dropdown,{onClick:e=>{e.stopPropagation()},children:[(0,e.jsx)(i.DropdownButton,{className:"p-0",icon:!0,disabled:(this.state.samplePrintingTemplateIds||[]).indexOf(o)>=0,arrow:!1,type:"tertiary",title:this.i18n("more"),children:(this.state.samplePrintingTemplateIds||[]).indexOf(o)>=0?(0,e.jsx)(ft,{size:12}):(0,e.jsx)(Ne,{size:12,className:"group-dropdown-icon"})}),(0,e.jsxs)(i.DropdownMenu,{children:[(0,e.jsx)(i.DropdownItem,{disabled:!this.state.featureCount,className:"dropdown-item-group",onClick:e=>{e.stopPropagation(),this.printSampleTemplate(a.itemStateDetailContent)},children:(0,e.jsx)(i.Tooltip,{title:this.state.featureCount?"":(null===(n=this.state.dataSource)||void 0===n?void 0:n.dataViewId)===t.CONSTANTS.SELECTION_DATA_VIEW_ID?this.i18n("noSelectedFeature"):this.i18n("noRecordsErr"),showArrow:!0,placement:"left",interactive:!0,leaveDelay:100,children:(0,e.jsx)("div",{title:this.i18n("printSampleReportTip",{previewCount:20}),children:this.i18n("printSampleReport")})})}),(0,e.jsx)(i.DropdownItem,{className:"dropdown-item-group",children:(0,e.jsxs)("div",{css:(0,t.css)("position: relative;"),children:[this.i18n("downloadTemplate"),(0,e.jsx)("a",{css:(0,t.css)("position: absolute; display: block; width: 100%; left: 0; top: 0; bottom: 0;"),href:a.itemStateDetailContent.url,rel:"noopener noreferrer",onClick:e=>{e.stopPropagation()},download:!0,target:"_blank"})]})})]})]}),(0,e.jsx)(i.Button,{className:"p-0",icon:!0,type:"tertiary",disabled:(this.state.samplePrintingTemplateIds||[]).indexOf(o)>=0,title:this.i18n("removeTemplate"),"aria-label":this.i18n("removeTemplate"),onClick:e=>{this.removeTemplate(e,o)},children:(0,e.jsx)(_,{size:12})})]})},renderOverrideItemDetailToggle:(e,t)=>"",onClickItemBody:(e,t)=>{const{itemJsons:[i]}=t.props;this.openTemplateEditor(i.itemKey,!0,i.itemStateDetailContent)}},p)):"",(null===(l=this.state.seletedTemplateItems)||void 0===l?void 0:l.length)===this.state.activeTemplateIdx&&this.state.showTemplateEditor&&(0,e.jsx)(a.List,Object.assign({className:"setting-ui-template-list-new w-100",itemsJson:[{name:"......"}].map((e,t)=>({itemStateDetailContent:e,itemKey:`${this.state.activeTemplateIdx}`,itemStateChecked:!0,itemStateTitle:e.name,itemStateCommands:[]})),dndEnabled:!1,renderOverrideItemDetailToggle:()=>""},p))]}),(0,e.jsx)(r.SidePopper,{position:"right",title:this.i18n("manageTempate"),"aria-label":this.i18n("manageTempate"),isOpen:this.state.showTemplateEditor,toggle:()=>{this.closeSidePopper(Lt.templateEditor)},trigger:null===(c=this.templateEditorPopperTrigger)||void 0===c?void 0:c.current,backToFocusNode:this.state.popperFocusNode,children:(0,e.jsx)(wt,{featureLayerUrl:this.state.featureLayerUrl,editTemplate:this.state.editingTemplate,selectedTemplates:this.state.seletedTemplateItems,theme:this.props.theme,templates:this.state.templateItems,surveyItemInfo:this.state.surveyItemInfo,serviceItemInfo:this.state.serviceItemInfo,editDisabled:!this.state.allowToEdit,onDeleteTemplate:e=>{this.removeTemplate(null,e,!0)},onSaveTemplate:e=>{this.updateTemplate(e)}})})]})]})});var I;const j=(0,e.jsx)(r.SettingSection,{role:"group",children:(0,e.jsx)(r.SettingRow,{children:(0,e.jsx)("div",{className:"not-supported-portal-outter",dangerouslySetInnerHTML:{__html:this.state.notSupportedEnterpriseMsg}})})}),M=(0,e.jsx)("div",{className:"option-setting-outter",children:(0,e.jsxs)(r.SettingSection,{title:this.i18n("configration"),role:"group","aria-label":this.i18n("configration"),children:[(0,e.jsx)(r.SettingRow,{role:"group","aria-label":this.i18n("inputFeatures"),children:(0,e.jsx)("div",{className:"w-100 option-setting",children:(0,e.jsx)(Je,{label:this.props.config.inputFeaturesLabel,defaultLabel:this.i18n("inputFeatures"),checked:!(this.props.config.hides||[]).includes("inputFeatures")||!1,onValueChange:e=>{this.onLabelChanged("inputFeatures",e)},onCheckedChange:e=>{this.onVisibilityChanged("inputFeatures",e)},children:(0,e.jsx)("div",{children:this.state.dataSource?(0,e.jsx)(it,{dataSources:this.state.dataSource,theme:this.props.theme,value:this.state.inputFeatureTemplate,onBlur:e=>{this.props.onSettingChange({id:this.props.id,config:this.props.config.set("inputFeatureTemplate",e)})}}):""})})})}),(0,e.jsx)(r.SettingRow,{role:"group","aria-label":this.i18n("selectTemplate"),children:(0,e.jsx)("div",{className:"w-100 option-setting",children:(0,e.jsx)(Je,{label:this.props.config.selectTemplateLabel,defaultLabel:this.i18n("selectTemplate"),checked:!(this.props.config.hides||[]).includes("selectTemplate")||!1,onValueChange:e=>{this.onLabelChanged("selectTemplate",e)},onCheckedChange:e=>{this.onVisibilityChanged("selectTemplate",e)}})})}),(0,e.jsx)(r.SettingRow,{role:"group","aria-label":this.i18n("reportSettings"),children:(0,e.jsxs)("div",{className:"w-100 option-setting",children:[(0,e.jsx)(Je,{showSettingButton:!0,ref:this.innerSettingButtonRef,onSettingBtnClick:()=>{this.openSidePopper(Lt.outputSetting)},label:this.props.config.reportSettingLabel,defaultLabel:this.i18n("reportSettings"),checked:!(this.props.config.hides||[]).includes("reportSetting")||!1,onValueChange:e=>{this.onLabelChanged("reportSetting",e)},onCheckedChange:e=>{this.onVisibilityChanged("reportSetting",e)}}),(0,e.jsx)(r.SidePopper,{position:"right",title:this.i18n("reportSettings"),"aria-label":this.i18n("reportSettings"),isOpen:this.state.showOutputSetting,toggle:()=>{this.closeSidePopper(Lt.outputSetting)},trigger:this.innerSettingButtonRef.current,children:(0,e.jsx)(at,{dataSource:this.state.dataSource,fileOptionsLabel:this.props.config.fileOptionsLabel,reportNameLabel:this.props.config.reportNameLabel,saveToAGSAccountLabel:this.props.config.saveToAGSAccountLabel,outputFormatLabel:this.props.config.outputFormatLabel,theme:this.props.theme,hides:this.props.config.hides,mergeFiles:this.props.config.mergeFiles,reportName:this.props.config.reportName,outputFormat:this.props.config.outputFormat,onLabelChanged:(e,t)=>{this.onLabelChanged(e,t)},onVisibilityChanged:(e,t)=>{this.onVisibilityChanged(e,t)},onSettingValueChanged:(e,t)=>{this.onDefaultValueChanged(e,t)}})})]})}),(0,e.jsx)(r.SettingRow,{role:"group","aria-label":this.i18n("showCredits"),children:(0,e.jsx)("div",{className:"w-100 option-setting",children:(0,e.jsx)(Je,{label:this.props.config.showCreditsLabel,defaultLabel:this.i18n("showCredits"),checked:!(this.props.config.hides||[]).includes("showCredits")||!1,onValueChange:e=>{this.onLabelChanged("showCredits",e)},onCheckedChange:e=>{this.onVisibilityChanged("showCredits",e)}})})}),(0,e.jsx)(r.SettingRow,{role:"group","aria-label":this.i18n("generateReports"),children:(0,e.jsx)("div",{className:"w-100 option-setting",children:(0,e.jsx)(Je,{label:this.props.config.generateReportLabel,defaultLabel:this.i18n("generateReports"),onValueChange:e=>{this.onLabelChanged("generateReport",e)},hideSwitcher:!0})})}),(0,e.jsx)(r.SettingRow,{role:"group","aria-label":this.i18n("recentReports"),children:(0,e.jsx)("div",{className:"w-100 option-setting",children:(0,e.jsx)(Je,{label:this.props.config.recentReportsLabel,defaultLabel:this.i18n("recentReports"),onValueChange:e=>{this.onLabelChanged("recentReports",e)},hideSwitcher:!0})})})]})});return(0,e.jsxs)("div",{ref:this.rootRef,css:o(this.props.theme),className:"jimu-widget-setting widget-setting-feature-report h-100 ",children:[g,!m||this.state.datasourceInvalid?null:this.state.supportService2ReportRelation||this.state.useSurvey?y:j,!m||this.state.datasourceInvalid||!this.state.supportService2ReportRelation&&!this.state.useSurvey?null:M]})}}function zt(e){p.p=e}})(),d})())}}});