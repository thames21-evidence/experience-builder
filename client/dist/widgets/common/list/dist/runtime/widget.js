System.register(["jimu-core/emotion","jimu-core","jimu-ui/basic/sql-expression-runtime","jimu-ui","jimu-layouts/layout-runtime","jimu-theme","jimu-core/react"],function(e,t){var o={},i={},n={},s={},l={},r={},a={};return{setters:[function(e){o.jsx=e.jsx,o.jsxs=e.jsxs},function(e){i.AppMode=e.AppMode,i.BaseVersionManager=e.BaseVersionManager,i.CONSTANTS=e.CONSTANTS,i.DataRecordsSelectionChangeMessage=e.DataRecordsSelectionChangeMessage,i.DataSourceComponent=e.DataSourceComponent,i.DataSourceFilterChangeMessage=e.DataSourceFilterChangeMessage,i.DataSourceManager=e.DataSourceManager,i.DataSourceStatus=e.DataSourceStatus,i.DynamicStyleResolverComponent=e.DynamicStyleResolverComponent,i.ExpressionResolverComponent=e.ExpressionResolverComponent,i.Immutable=e.Immutable,i.LayoutItemType=e.LayoutItemType,i.LayoutType=e.LayoutType,i.LinkType=e.LinkType,i.MessageManager=e.MessageManager,i.PageMode=e.PageMode,i.React=e.React,i.ReactRedux=e.ReactRedux,i.ReactResizeDetector=e.ReactResizeDetector,i.RepeatedDataSourceProvider=e.RepeatedDataSourceProvider,i.appActions=e.appActions,i.appConfigUtils=e.appConfigUtils,i.classNames=e.classNames,i.css=e.css,i.dataSourceUtils=e.dataSourceUtils,i.defaultMessages=e.defaultMessages,i.esri=e.esri,i.focusElementInKeyboardMode=e.focusElementInKeyboardMode,i.getAppStore=e.getAppStore,i.hooks=e.hooks,i.jimuHistory=e.jimuHistory,i.lodash=e.lodash,i.polished=e.polished,i.urlUtils=e.urlUtils,i.utils=e.utils},function(e){n.SqlExpressionRuntime=e.SqlExpressionRuntime,n.updateSQLExpressionByVersion=e.updateSQLExpressionByVersion},function(e){s.Alert=e.Alert,s.Badge=e.Badge,s.Button=e.Button,s.DataActionList=e.DataActionList,s.DataActionListStyle=e.DataActionListStyle,s.DistanceUnits=e.DistanceUnits,s.Dropdown=e.Dropdown,s.DropdownButton=e.DropdownButton,s.DropdownItem=e.DropdownItem,s.DropdownMenu=e.DropdownMenu,s.Link=e.Link,s.LinkTip=e.LinkTip,s.ListGroupItem=e.ListGroupItem,s.Loading=e.Loading,s.LoadingType=e.LoadingType,s.Pagination=e.Pagination,s.Paper=e.Paper,s.Popper=e.Popper,s.TextAlignValue=e.TextAlignValue,s.TextInput=e.TextInput,s.Tooltip=e.Tooltip,s.WidgetPlaceholder=e.WidgetPlaceholder,s.defaultMessages=e.defaultMessages,s.getFocusableElements=e.getFocusableElements,s.hooks=e.hooks,s.styleUtils=e.styleUtils,s.utils=e.utils},function(e){l.LayoutEntry=e.LayoutEntry,l.LayoutItemSizeModes=e.LayoutItemSizeModes,l.searchUtils=e.searchUtils},function(e){r.getThemeModule=e.getThemeModule,r.mapping=e.mapping,r.useTheme=e.useTheme},function(e){a.Fragment=e.Fragment,a.PureComponent=e.PureComponent,a.createElement=e.createElement,a.useEffect=e.useEffect}],execute:function(){e((()=>{var e={1888:e=>{"use strict";e.exports=r},4583:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 17"><path fill="#000" fill-rule="evenodd" d="M0 12v-1.5h1V12h1.5v1H1a1 1 0 0 1-1-1M1 1h1.5v1H1v1.5H0V2a1 1 0 0 1 1-1m0 7.5H0v-3h1zM4.5 2V1h3v1zm5 0V1H11a1 1 0 0 1 1 1v1.5h-1V2zm4.813 14.02-3.535-3.535-3.536 3.535-.707-.707 3.536-3.535-3.536-3.536.707-.707 3.536 3.536 3.535-3.536.707.707-3.535 3.536 3.535 3.535z" clip-rule="evenodd"></path></svg>'},4651:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M2 7a1 1 0 1 0 0 2 1 1 0 0 0 0-2m5 1a1 1 0 1 1 2 0 1 1 0 0 1-2 0m6 0a1 1 0 1 1 2 0 1 1 0 0 1-2 0" clip-rule="evenodd"></path></svg>'},7835:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M.438 1C.196 1 0 1.224 0 1.5s.196.5.438.5h15.125c.241 0 .437-.224.437-.5s-.196-.5-.437-.5zM0 7.5c0-.276.196-.5.438-.5h15.125c.241 0 .437.224.437.5s-.196.5-.437.5H.438C.196 8 0 7.776 0 7.5M0 13.5c0-.276.196-.5.438-.5h15.125c.241 0 .437.224.437.5s-.196.5-.437.5H.438C.196 14 0 13.776 0 13.5"></path></svg>'},14321:e=>{"use strict";e.exports=s},20904:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M15.88 2.825a.5.5 0 0 0-.759-.65l-2.323 2.71-1.265-1.265a.5.5 0 1 0-.707.707l1.265 1.265a1 1 0 0 0 1.466-.056zm0 8a.5.5 0 0 0-.759-.65l-2.323 2.71-1.265-1.265a.5.5 0 1 0-.707.708l1.265 1.264a1 1 0 0 0 1.466-.056zM9 4.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1 0-1h8a.5.5 0 0 1 .5.5M8.5 13a.5.5 0 0 0 0-1h-8a.5.5 0 0 0 0 1z" clip-rule="evenodd"></path></svg>'},21935:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M7.986 1a6.99 6.99 0 0 1 5.723 2.969l-2.551-.938a.5.5 0 1 0-.345.938l4.228 1.555.163-.944.013-.005-.009-.019.6-3.471a.5.5 0 1 0-.985-.17l-.403 2.33A8 8 0 0 0 0 7.5c-.016.277.21.501.486.501a.53.53 0 0 0 .517-.5A7 7 0 0 1 7.986 1M8.015 15a6.99 6.99 0 0 1-5.724-2.969l2.551.938a.497.497 0 0 0 .642-.296.5.5 0 0 0-.297-.642L.96 10.476l-.163.944-.013.005.009.019-.6 3.471a.5.5 0 1 0 .985.17l.403-2.33A8 8 0 0 0 16 8.5a.477.477 0 0 0-.485-.501.53.53 0 0 0-.518.5A7 7 0 0 1 8.015 15"></path></svg>'},27964:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M16 4.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1 0-1h8a.5.5 0 0 1 .5.5M16 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1 0-1h8a.5.5 0 0 1 .5.5M5.146 2.12a.5.5 0 0 1 .055.705l-2.324 2.71a1 1 0 0 1-1.466.057L.146 4.327a.5.5 0 0 1 .708-.707l1.264 1.265 2.323-2.71a.5.5 0 0 1 .705-.055M5.146 10.12a.5.5 0 0 1 .055.705l-2.324 2.71a1 1 0 0 1-1.466.057L.146 12.328a.5.5 0 1 1 .708-.708l1.264 1.265 2.323-2.71a.5.5 0 0 1 .705-.055" clip-rule="evenodd"></path></svg>'},28996:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 2.125 14.334 14H1.667zm-.882-.47a1 1 0 0 1 1.765 0l6.333 11.874A1 1 0 0 1 14.334 15H1.667a1 1 0 0 1-.882-1.47zM8 4.874a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0L8.9 5.87a.905.905 0 0 0-.9-.995m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0" clip-rule="evenodd"></path></svg>'},29435:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M14.938 8A7 7 0 0 1 1.01 9H0a8.001 8.001 0 0 0 15.938-1A8 8 0 0 0 1.02 3.98L1 .702a.5.5 0 1 0-1 .006L.031 5.9l5.128-.826a.5.5 0 0 0-.16-.987L1.819 4.6A7 7 0 0 1 14.938 8"></path></svg>'},30655:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M2.146 4.653a.485.485 0 0 1 .708 0L8 10.24l5.146-5.587a.485.485 0 0 1 .708 0 .54.54 0 0 1 0 .738l-5.5 5.956a.485.485 0 0 1-.708 0l-5.5-5.956a.54.54 0 0 1 0-.738" clip-rule="evenodd"></path></svg>'},37568:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M11.347 2.146a.485.485 0 0 1 0 .708L5.76 8l5.587 5.146a.486.486 0 0 1 0 .708.54.54 0 0 1-.738 0l-5.956-5.5a.485.485 0 0 1 0-.708l5.956-5.5a.54.54 0 0 1 .738 0" clip-rule="evenodd"></path></svg>'},41496:e=>{"use strict";e.exports=l},45508:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2M6.5 7.5A.5.5 0 0 1 7 7h1.5v4.5h1a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1h1V8H7a.5.5 0 0 1-.5-.5"></path><path fill="#000" fill-rule="evenodd" d="M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14" clip-rule="evenodd"></path></svg>'},47569:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"><path fill="#000" fill-rule="evenodd" d="M18.5.995c0-.55-.43-.995-.96-.995H2.46a.94.94 0 0 0-.605.223 1.02 1.02 0 0 0-.14 1.4L6.5 7.72c.122.156.196.347.212.548l.835 10.815q.011.139.058.27a.95.95 0 0 0 1.237.582l2.112-.82a.99.99 0 0 0 .615-.797l1.325-10.062c.025-.193.105-.374.228-.52l5.141-6.087c.154-.181.238-.414.238-.655M2.5 1h14.999l-5.141 6.09-.117.153a2 2 0 0 0-.34.883l-1.325 10.062-2.035.792-.833-10.788-.02-.169a2 2 0 0 0-.402-.92L2.502 1.006z" clip-rule="evenodd"></path></svg>'},50170:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0m-1.27 4.936a6.5 6.5 0 1 1 .707-.707l4.136 4.137a.5.5 0 1 1-.707.707z" clip-rule="evenodd"></path></svg>'},51879:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"><path fill="#000" fill-rule="evenodd" d="M6 0a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm0 1H2a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1" clip-rule="evenodd"></path><path fill="#000" d="M10.5 2a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1zM10 5.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5"></path><path fill="#000" fill-rule="evenodd" d="M6 12a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2zm0 1H2a1 1 0 0 0-1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1" clip-rule="evenodd"></path><path fill="#000" d="M10 14.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5M10.5 17a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1z"></path></svg>'},52943:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M4.653 13.854a.485.485 0 0 1 0-.708L10.24 8 4.653 2.854a.485.485 0 0 1 0-.708.54.54 0 0 1 .738 0l5.956 5.5a.485.485 0 0 1 0 .708l-5.956 5.5a.54.54 0 0 1-.738 0" clip-rule="evenodd"></path></svg>'},62838:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m8.745 8 6.1 6.1a.527.527 0 1 1-.745.746L8 8.746l-6.1 6.1a.527.527 0 1 1-.746-.746l6.1-6.1-6.1-6.1a.527.527 0 0 1 .746-.746l6.1 6.1 6.1-6.1a.527.527 0 0 1 .746.746z"></path></svg>'},67386:e=>{"use strict";e.exports=o},68972:e=>{"use strict";e.exports=a},70778:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#FFF" fill-rule="nonzero" d="M2 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2m0 1a2 2 0 1 1 0-4 2 2 0 0 1 0 4m5-3a1 1 0 0 0 0 2h7a1 1 0 0 0 0-2zm0-1h7a2 2 0 1 1 0 4H7a2 2 0 1 1 0-4m0 7a1 1 0 0 0 0 2h7a1 1 0 0 0 0-2zm0-1h7a2 2 0 1 1 0 4H7a2 2 0 1 1 0-4m0 7a1 1 0 0 0 0 2h7a1 1 0 0 0 0-2zm0-1h7a2 2 0 1 1 0 4H7a2 2 0 1 1 0-4M2 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2m0 1a2 2 0 1 1 0-4 2 2 0 0 1 0 4m0 5a1 1 0 1 0 0-2 1 1 0 0 0 0 2m0 1a2 2 0 1 1 0-4 2 2 0 0 1 0 4"></path></svg>'},76117:e=>{"use strict";e.exports=n},76219:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M6 1.5a.5.5 0 1 0-1 0v12.158L1.207 9.06a.5.5 0 1 0-.76.652l4.146 5.008A.8.8 0 0 0 6 14.2zm4 13a.5.5 0 1 0 1 0V2.342l3.794 4.598a.5.5 0 1 0 .759-.652L11.407 1.28A.8.8 0 0 0 10 1.8z" clip-rule="evenodd"></path></svg>'},79244:e=>{"use strict";e.exports=i},94064:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M13.854 11.347a.486.486 0 0 1-.708 0L8 5.76l-5.146 5.587a.485.485 0 0 1-.708 0 .54.54 0 0 1 0-.738l5.5-5.956a.485.485 0 0 1 .708 0l5.5 5.956a.54.54 0 0 1 0 .738" clip-rule="evenodd"></path></svg>'},96300:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M15 7.5a.52.52 0 0 1-.516.527H2.976L6.473 11.6a.535.535 0 0 1 0 .746.51.51 0 0 1-.73 0L1 7.5l4.743-4.846a.51.51 0 0 1 .73 0 .535.535 0 0 1 0 .746L2.976 6.973h11.508c.285 0 .516.236.516.527"></path></svg>'}},t={};function c(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,c),n.exports}c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},c.d=(e,t)=>{for(var o in t)c.o(t,o)&&!c.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.p="";var d={};return c.p=window.jimuConfig.baseUrl,(()=>{"use strict";c.r(d),c.d(d,{__set_webpack_public_path__:()=>Xi,default:()=>Zi});var e,t=c(67386),o=c(79244),i=c(76117);!function(e){e.AUTO="Auto",e.CUSTOM="Custom"}(e||(e={}));const n=20,s=42;var l,r,a,u,h,p,g,f,v,m,S;!function(e){e.None="NONE",e.Arrangement="ARRANGEMENT",e.States="STATES",e.Tools="TOOLS"}(l||(l={})),function(e){e.None="NONE",e.Single="SINGLE",e.Multiple="MULTIPLE"}(r||(r={})),function(e){e.Scroll="SCROLL",e.MultiPage="MULTIPAGE"}(a||(a={})),function(e){e.Start="FLEX-START",e.Center="CENTER",e.End="FLEX-END"}(u||(u={})),function(e){e.Horizon="HORIZON",e.Vertical="VERTICAL"}(h||(h={})),function(e){e.Row="ROW",e.Column="COLUMN",e.GRID="GRID"}(p||(p={})),function(e){e.Glide="GLIDE",e.Fade="FADE",e.Float="FLOAT"}(g||(g={})),function(e){e.Hover0="HOVER0",e.Hover1="HOVER1",e.Hover2="HOVER2",e.Hover3="HOVER3"}(f||(f={})),function(e){e.Style0="STYLE0",e.Style1="STYLE1",e.Style2="STYLE2",e.Style3="STYLE3"}(v||(v={})),function(e){e.Style0="STYLE0",e.Style1="STYLE1",e.Style2="STYLE2",e.Style3="STYLE3",e.Style4="STYLE4",e.Style5="STYLE5",e.Style6="STYLE6",e.Style7="STYLE7",e.Style8="STYLE8",e.Style9="STYLE9",e.Style10="STYLE10",e.Style11="STYLE11",e.Style12="STYLE12"}(m||(m={})),function(e){e.Default="DEFAULT",e.Selected="SELECTED",e.Hover="HOVER"}(S||(S={}));var y=function(e,t,o,i){return new(o||(o=Promise))(function(n,s){function l(e){try{a(i.next(e))}catch(e){s(e)}}function r(e){try{a(i.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(l,r)}a((i=i.apply(e,t||[])).next())})};const w=function(e,t){return y(this,void 0,void 0,function*(){var e,i,n,s;let l;const r=null===(s=null===(n=null===(i=null===(e=(0,o.getAppStore)().getState())||void 0===e?void 0:e.appConfig)||void 0===i?void 0:i.widgets[t])||void 0===n?void 0:n.useDataSources)||void 0===s?void 0:s[0],a=o.DataSourceManager.getInstance();return r&&(l=a.createDataSourceByUseDataSource(Object.assign({},r,{mainDataSourceId:r.mainDataSourceId}),"localId")),yield Promise.resolve(l)})};class x extends o.BaseVersionManager{constructor(){super(...arguments),this.versions=[{version:"1.1.0",description:"",upgrader:(e,t)=>y(this,void 0,void 0,function*(){const o=e.filter;return yield w(0,t).then(t=>{let n=e;const s=o?(0,i.updateSQLExpressionByVersion)(o,"1.1.0",t):null;return n=n.set("filter",s),n},t=>e)})},{version:"1.5.0",description:"1.5.0",upgrader:(e,t)=>y(this,void 0,void 0,function*(){e.filter;return yield w(0,t).then(t=>{if(!t)return e;let o=e;if("boolean"!=typeof(null==e?void 0:e.isShowAutoRefresh)){const e=!!(i=t)&&((null==i?void 0:i.getAutoRefreshInterval())||0)>0;o=o.set("isShowAutoRefresh",e)}var i;return o},t=>e)})},{version:"1.8.0",description:"1.8.0",upgrader:(e,t)=>{let o=e;if((null==e?void 0:e.direction)&&!(null==e?void 0:e.layoutType)){const t=(null==e?void 0:e.direction)===h.Horizon?p.Column:p.Row;o=o.set("layoutType",t).set("keepAspectRatio",!1)}return o}},{version:"1.13.0",description:"1.13.0",upgrader:(e,t)=>{let o=e;if((null==e?void 0:e.searchFields)&&"string"==typeof(null==e?void 0:e.searchFields)){const t=e.searchFields.split(",")||[];o=o.set("searchFields",t)}return o}},{version:"1.16.0",description:"1.16.0",upgrader:(e,t)=>{let o=e;return(null==o?void 0:o.pageStyle)===a.MultiPage&&(o=o.set("hidePageTotal",!1)),o}},{version:"1.18.0",description:"1.18.0",upgrader:(e,t)=>(e=>{let t=e;const o=e.cardConfigs,i=o[S.Default].cardSize;return Object.keys(o).forEach(e=>{const n=o[e].cardSize;e!==S.Default&&Object.keys(n).forEach(o=>{const s=n[o],l=i[o];s&&l&&((null==s?void 0:s.width)!==(null==l?void 0:l.width)||(null==s?void 0:s.height)!==(null==l?void 0:l.height))&&(t=t.setIn(["cardConfigs",e,"cardSize",o],l))})}),t})(e)}]}}const b=new x,I={page:1,pageSize:1,dataSource:null,widgetRect:{width:n,height:n},currentCardSize:{width:n,height:n},scrollStatus:"start",isResizingCard:!1,records:[],selectedRecordsId:[],isShowEditingMask:!1,queryStatus:null,dsInfo:null,showWidgetLoading:!0,showLoading:!1,hasDsLoadedRecord:!1,needScrollToSelectedItems:!1,lastRefreshTime:null,searchText:null,showSelectionOnly:!1,filterApplied:!1,currentFilter:null,sortOptionName:null,showSortString:!1,firstItemIndexInViewport:0},C=(e,t)=>{switch(t.type){case"SET_PAGE":return Object.assign(Object.assign({},e),{page:t.value});case"SET_PAGE_SIZE":return Object.assign(Object.assign({},e),{pageSize:t.value});case"SET_DATA_SOURCE":return Object.assign(Object.assign({},e),{dataSource:t.value});case"SET_WIDGET_RECT":return Object.assign(Object.assign({},e),{widgetRect:t.value});case"SET_CURRENT_CARD_SIZE":return Object.assign(Object.assign({},e),{currentCardSize:t.value});case"SET_SCROLL_STATUS":return Object.assign(Object.assign({},e),{scrollStatus:t.value});case"SET_IS_RESIZING_CARD":return Object.assign(Object.assign({},e),{isResizingCard:t.value});case"SET_FIRST_ITEM_INDEX_IN_VIEWPORT":return Object.assign(Object.assign({},e),{firstItemIndexInViewport:t.value});case"SET_RECORDS":return Object.assign(Object.assign({},e),{records:t.value});case"SET_IS_SHOW_EDITING_MASK":return Object.assign(Object.assign({},e),{isShowEditingMask:t.value});case"SET_SEARCH_TEXT":return Object.assign(Object.assign({},e),{searchText:t.value});case"SET_SHOW_SELECTION_ONLY":return Object.assign(Object.assign({},e),{showSelectionOnly:t.value});case"SET_QUERY_STATUS":return Object.assign(Object.assign({},e),{queryStatus:t.value});case"SET_DS_INFO":return Object.assign(Object.assign({},e),{dsInfo:t.value});case"SET_FILTER_APPLIED":return Object.assign(Object.assign({},e),{filterApplied:t.value});case"SET_CURRENT_FILTRE":return Object.assign(Object.assign({},e),{currentFilter:t.value});case"SET_SORT_OPTION_NAME":return Object.assign(Object.assign({},e),{sortOptionName:t.value});case"SET_SHOW_SORT_STRING":return Object.assign(Object.assign({},e),{showSortString:t.value});case"SET_SHOW_WIDGET_LOADING":return Object.assign(Object.assign({},e),{showWidgetLoading:t.value});case"SET_HAS_DS_LOADED_RECORD":return Object.assign(Object.assign({},e),{hasDsLoadedRecord:t.value});case"SET_SHOW_LOADING":return Object.assign(Object.assign({},e),{showLoading:t.value});case"LAST_REFRESH_TIME":return Object.assign(Object.assign({},e),{lastRefreshTime:t.value});case"SET_NEED_SCROLL_TO_SELECTED_ITEM":return Object.assign(Object.assign({},e),{needScrollToSelectedItems:t.value});case"SET_SELECTED_RECORDS_ID":return Object.assign(Object.assign({},e),{selectedRecordsId:t.value});case"SET_LIST_RUNTIME_STATE":return Object.assign(Object.assign({},e),t.value);default:return e}},T=o.React.createContext(void 0),R=o.React.createContext(void 0),O=o.React.createContext(void 0),j=e=>{const{defaultState:i,children:n}=e,[s,l]=o.React.useReducer(C,i||I);return(0,t.jsx)(T.Provider,{value:s,children:(0,t.jsx)(R.Provider,{value:l,children:(0,t.jsx)(O.Provider,{value:{state:s,dispatch:l},children:n})})})},M=()=>o.React.useContext(T),E=()=>o.React.useContext(R);var D=c(14321);const L=o.utils.memoize(function(e){const{showTopTools:t,bottomToolH:i,pageStyle:n,scrollBarOpen:l,appMode:r,theme:c,isHeightAuto:d,isWidthAuto:u,listTemplateDefaultCardSize:g,layoutType:f,listLeftPadding:v}=e,m=t?s:0,S=f===p.Column?h.Horizon:h.Vertical,y=f===p.Column,w=f===p.Column?"column":"row";return o.css`
    &.list-container {
      /* position: ${d?"absolute":"relative"}; */
      position: relative;
      z-index: 0;
      overflow: hidden;
      .bottom-boundary {
        height: 2px;
        width: 2px;
        position: absolute;
        bottom: 0;
        right: 0;
        opacity: 0;
      }
      ${S===h.Horizon?`\n          margin-left: 0px;\n          height: ${d?"auto":"calc(100% - 1px)"};\n          width: ${u?"auto":"calc(100% - 0px)"};\n        `:`\n          margin-top: 0px;\n          width: ${u?"auto":"calc(100% - 1px)"};\n          height: ${d?"auto":"calc(100% - 0px)"};\n        `}
      .empty-con {
        position: absolute;
        top: 50%;
        left: 0;
        right: 0;
        z-index: 10;
        transform: translateY(-50%);
        padding-top: ${m}px;
        .jimu-icon {
          color: ${c.sys.color.warning.dark};
        }
        .discribtion {
          margin: ${o.polished.rem(9)} 0 ${o.polished.rem(8)} 0;
          font-size: ${o.polished.rem(14)};
          color: ${c.sys.color.surface.paperText}
        }
        .clear-message-action-button {
          width: ${o.polished.rem(65)};
        }
      }

      .bottom-tools {
        position: relative;
        padding-top: ${o.polished.rem(14)};
        min-height: ${o.polished.rem(40)};
        .scroll-navigator {
          .btn {
            border-radius: 50%;
          }
        }
      }
      .widget-list-link-con {
        height: ${d?"auto":`calc(100% - ${m}px - ${i}px)`} !important;
        width: ${u?"auto":"100%"} !important;
        ${k(n,y,e.mexSize,m,i)}
      }
      .widget-list-list:focus {
        outline: none;
      }
      .widget-list-list {
        & {
          padding: 0;
          position: relative;
          padding-left: ${`${v}px`};
          display: flex;
          width: ${u?"auto":"100%"} !important;
          height: ${d?"auto":"100%"} !important;
        }
        &>div {
          position: relative;
          flex: 1;
          box-sizing: content-box;
        }
        /* box-sizing: border-box; */
        ${window.jimuConfig.isInBuilder&&r===o.AppMode.Design?"overflow: hidden !important;":`overflow-${y?"y":"x"}: hidden !important;`}

        ${`flex-direction: ${w}`};
        ${d&&`min-height: ${g.height}px;`};
        ${u&&`min-width: ${g.width}px;`};
        ${d&&k(n,y,e.mexSize,m,i)}
      }
      .hide-list {
        overflow: hidden !important;
      }
      .hide-will-change {
        will-change: auto !important;
      }
      ${n!==a.Scroll||l?"":"\n          .widget-list-list::-webkit-scrollbar {\n            display: none; //Safari and Chrome\n          }\n          .widget-list-list {\n              -ms-overflow-style: none; //IE 10+\n              overflow: -moz-scrollbars-none; //Firefox\n              scrollbar-width: none; /* Firefox */\n          }\n        "}
      .placeholder-alert-con {
        position: absolute;
        bottom: ${o.polished.rem(8)};
        right: ${o.polished.rem(8)};
        z-index: 11;
      }
    }
  `});function k(e,t,o,i,n){return e===a.MultiPage?null:t?`max-width: ${o.maxWidth};`:`max-height: calc(${o.maxHeight} - ${i}px - ${n}px);`}function N(e,t,i){const{config:n,id:s,appMode:l,isHeightAuto:r,isWidthAuto:a,theme:c}=e;return o.css`
    ${"&.list-widget-"+s} {
      overflow: visible;
      background-color: transparent;
      height: ${r?"auto":"100%"};
      width: ${a?"auto":"100%"};
      .list-auto-refresh-button {
        color: inherit;
        padding: 0;
        svg {
          margin: 0;
        }
      }
      .list-with-mask {
        position: absolute;
        left: 0;
        right: 0;
        bottom: 0;
        top: 0;
        background-color: rgba(0, 0, 0, 0);
        z-index: 1;
      }
      .list-toggle-button {
        background: none;
      }
      .list-loading-con {
        min-height: ${o.polished.rem(120)};
        min-width: ${o.polished.rem(160)};
      }
      .list-error-con {
        .alert-panel-of-list {
          border-radius: 0;
          text-align: left;
          left: ${o.polished.rem(4)};
          right: ${o.polished.rem(4)};
          bottom: ${o.polished.rem(4)};
          width: auto;
        }
      }
      .refresh-loading-con {
        right: 0;
        bottom:${i?o.polished.rem(40):0};
        align-items: center;
        height: ${o.polished.rem(18)};
        .auto-refresh-loading {
          background: ${c.sys.color.surface.overlay};
          color: ${c.sys.color.surface.overlayText};
          font-size: ${o.polished.rem(12)};
          line-height: ${o.polished.rem(18)};
          padding: 0 var(--sys-spacing-1);
          .auto-refresh-string-con {
            padding: 0 ${o.polished.rem(2)};
          }
        }
        .auto-refresh-loading-with-icon {
          padding: 2px;
        }
        &.horizon-loading {
          bottom:${i?o.polished.rem(46):o.polished.rem(6)};
        }
        &.vertical-loading {
          right: ${o.polished.rem(6)};
        }
      }
      .loading-con {
        @keyframes loading {
          0% {transform: rotate(0deg); };
          100% {transform: rotate(360deg)};
        }
        width: ${o.polished.rem(16)};
        height: ${o.polished.rem(16)};
        border: 1px solid var(--sys-color-divider-secondary);
        border-radius: 50%;
        border-top: 1px solid var(--sys-color-divider-secondary);
        box-sizing: border-box;
        animation:loading 2s infinite linear;
        margin-right: ${o.polished.rem(4)};
      }
      .widget-list {
        overflow: ${window.jimuConfig.isInBuilder&&l===o.AppMode.Design?"hidden":"auto"};
        height: ${r?"auto":"100%"};
        width: ${a?"auto":"100%"};
        /* align-items: ${n.alignType};
        justify-content: ${n.alignType}; */
        ${n.direction===h.Horizon?"\n            overflow-y: hidden;\n          ":"\n            overflow-x: hidden;\n          "}
      }
      .data-count {
        left: 0;
        bottom: 0;
        background: ${c.sys.color.surface.overlay};
        color: ${c.sys.color.surface.overlayText};
        font-size: ${o.polished.rem(12)};
        line-height: ${o.polished.rem(18)};
        padding: 0 ${o.polished.rem(5)};
      }
    }

  `}function z(e){return o.css`
    & {
      padding: ${o.polished.rem(6)} ${o.polished.rem(11)};
      height: ${o.polished.rem(40)};
    }
    .list-toggle-button {
      background: none;
    }
    .list-sort-con, .list-search-icon {
      margin-right: ${o.polished.rem(4)};
    }
    .ds-tools-line {
      width: 100%;
      height: 1px;
      background-color: var(--sys-color-divider-secondary);
    }
    .ds-tools-line-blue {
      background-color: ${e.sys.color.primary.main};
    }
    .close-search {
      margin-top: ${o.polished.rem(-6)};
    }
    .list-search-div {
      svg {
        color: var(--sys-color-action-text) !important;
      }
    }
    div.list-sort-con {
      margin-left: 0;
    }
    .color-inherit {
      color: inherit !important;
    }
    .color-inherit.jimu-disabled {
      color: ${e.sys.color.action.disabled.text} !important;
    }
  `}function _(e){return o.css`
    .search-box-content {
      flex-direction: column;
      align-items: flex-start;
    }
    .color-inherit {
      color: inherit !important;
    }
    .color-inherit.jimu-disabled {
      color: ${e.sys.color.action.disabled.text} !important;
    }
  `}function P(e,t,i,n=!1){return o.css`
    .list-data-action {
      & {
        padding-left: ${o.polished.rem(4)};
      }
      &::after {
        content: '';
        position: absolute;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
        height: ${o.polished.rem(16)};
        border-left: 1px solid ${e?"var(--sys-color-divider-secondary)":"transparent"}
      }
    }
    .top-right-tools-size-0 .list-sort-con{
      max-width: 90px;
    }
    .m-left {
      margin-left: ${o.polished.rem(4)};
    }
    &.datasource-tools {
      position: relative;
      height: ${o.polished.rem(s)};
      padding: ${o.polished.rem(4)} ${o.polished.rem(4)} ${o.polished.rem(14)} ${o.polished.rem(4)};
      .list-sort-con {
        margin-right: ${o.polished.rem(4)};
      }
      .sort-fields-input {
        width: 200px;
        margin-left: 8px;
        margin-right: 16px;
      }

      .tool-row {
        height: ${28}px;
      }
      .tools-con-max-size {
        width: ${n?"calc(100% - 40px)":"100%"};
      }
      .ds-tools-line {
        width: 100%;
        height: 1px;
        margin-top: ${o.polished.rem(3)};
        background-color: ${t.sys.color.divider.secondary};
      }
      .ds-tools-line-blue {
        background-color: ${t.sys.color.info.main};
      }
      .list-search-div {
        width: calc(100% - ${i}px);
        .list-search {
          margin-bottom: -4px;
          width: 100%;
        }
      }
      .top-right-tools-size-3 {
        max-width: 73%;
      }
      .top-right-tools-size-2 {
        max-width: 65%;
      }
      .top-right-tools-size-1 {
        max-width: 55%;
      }
      .top-right-tools-size-0 {
        max-width: 85%;
      }
    }
    .tools-menu {
      color: var(--sys-color-action-text);
      margin-top: 1px;
    }
    .tools-menu:hover {
      color: ${t.sys.color.action.text};
    }
    .color-inherit {
      color: inherit !important;
    }
    .color-inherit.jimu-disabled {
      color: ${t.sys.color.action.disabled.text} !important;
    }
  `}var A=c(41496),B=c(1888);function F(e,t){return Math.abs(e-t)<1e-4}function H(e,t,o,i){if(!t||!o||!e)return!1;const n=null==e?void 0:e.haveMorePages(t,o),s=!n;let l=!1;if("unknown"===n){l=i>=(null==e?void 0:e.count)}else l=s;return l}function W(e,t,o,i){const s=$(e,t,o),l=D.utils.toLinearUnit(s.width);let r=G(D.utils.toLinearUnit(s.width),i.width+e.horizontalSpace-8);l.unit===D.DistanceUnits.PERCENTAGE&&(r=r-e.horizontalSpace>0?r-e.horizontalSpace:n);let a=G(D.utils.toLinearUnit(s.height),i.height);e.keepAspectRatio&&(null==e?void 0:e.layoutType)===p.GRID&&(null==e?void 0:e.gridItemSizeRatio)&&(a=r*(null==e?void 0:e.gridItemSizeRatio));return{width:r,height:a}}function $(e,t,o){var i;let n=null==e?void 0:e.asMutable({deep:!0}).cardConfigs[t];n&&n.cardSize||(n=null==e?void 0:e.asMutable({deep:!0}).cardConfigs[S.Default]);let s=null===(i=null==n?void 0:n.cardSize)||void 0===i?void 0:i[o];return s||(s=n.cardSize[Object.keys(n.cardSize)[0]]),s}function U(e,t,o){const i=$(e,t,o),s=D.utils.toLinearUnit(i.width);s.unit===D.DistanceUnits.PERCENTAGE&&(s.distance=s.distance-e.horizontalSpace>0?s.distance-e.horizontalSpace:n);return{width:s,height:D.utils.toLinearUnit(i.height)}}function G(e,t){return e.unit===D.DistanceUnits.PERCENTAGE?e.distance/100*t:e.distance}function V(e,t){let o=40;return e&&(o=e.clientHeight),o=t?o:0,o}function q(e,t,o){const i=o?s:0;if(!e)return 0;const n=e.height-i-t;return n<0?0:n}function K(e,t){return!(!t||e.pageStyle===a.Scroll&&!e.navigatorOpen)}function Y(e,t,o){return Q(t)||Z(e,t,o)}function Q(e){return X(e)||te(e)||oe(e)||ee(e)||J(e)||(null==e?void 0:e.showRefresh)}function Z(e,t,i){var n,s,l;const r=null===(s=null===(n=(0,o.getAppStore)())||void 0===n?void 0:n.getState())||void 0===s?void 0:s.appConfig,a=null===(l=null==r?void 0:r.widgets)||void 0===l?void 0:l[e];return(void 0===(null==a?void 0:a.enableDataAction)||(null==a?void 0:a.enableDataAction))&&function(e){return!!e&&!!e[0]}(i)&&t.isItemStyleConfirm}function X(e){if(!e.sortOpen||!e.sorts||e.sorts.length<1)return!1;const t=e.sorts;let o=!1;return t.some(e=>(e.rule&&e.rule.some(e=>(e&&e.jimuFieldName&&(o=!0),o)),o)),o}function J(e){return e.searchOpen&&!!e.searchFields}function ee(e){return e.filterOpen&&!!e.filter}function te(e){return e.showSelectedOnlyOpen&&e.cardConfigs[S.Selected].selectionMode!==r.None}function oe(e){return e.showClearSelected&&e.cardConfigs[S.Selected].selectionMode!==r.None}function ie(e,t,i){var n,s,l,r,a,c,d,u,h;if(null==t?void 0:t.background){const o=(null===(n=null==e?void 0:e.background)||void 0===n?void 0:n.asMutable({deep:!0}))||{},i=(null===(s=null==t?void 0:t.background)||void 0===s?void 0:s.asMutable({deep:!0}))||{};(null==i?void 0:i.color)&&(o.color=null==i?void 0:i.color),(null==i?void 0:i.fillType)&&(o.fillType=null==i?void 0:i.fillType),(null==i?void 0:i.image)&&(o.image=null==i?void 0:i.image),e=e.set("background",o)}if((null==e?void 0:e.textColor)||(e=e.set("textColor","var(--sys-color-surface-paper-text)")),null==t?void 0:t.borderRadius){const o=D.styleUtils.mixinBorderRadiusWithDynamicStyle(null===(l=null==t?void 0:t.borderRadius)||void 0===l?void 0:l.asMutable({deep:!0}),null===(r=null==e?void 0:e.borderRadius)||void 0===r?void 0:r.asMutable({deep:!0}));e=e.set("borderRadius",o)}if(function(e){const t=null==e?void 0:e.borderRadius;if(t){const e=null==t?void 0:t.number;return!(null==e?void 0:e.some(e=>e||0===e))}return!0}(e)){const t=function(e){var t;const o=(0,B.getThemeModule)(null==e?void 0:e.uri),i=B.mapping.whetherIsNewTheme(o),n=null===(t=e.sys.shape)||void 0===t?void 0:t.shape2,s=i?null==n?void 0:n.split("px")[0]:0;return{number:[s,s,s,s],unit:"px"}}(i);e=e.set("borderRadius",t)}if(null==t?void 0:t.border){const i=(null===(a=null==e?void 0:e.border)||void 0===a?void 0:a.color)?{border:null===(c=null==e?void 0:e.border)||void 0===c?void 0:c.asMutable({deep:!0})}:null===(d=null==e?void 0:e.border)||void 0===d?void 0:d.asMutable({deep:!0}),n=D.styleUtils.mixinBorderWithDynamicStyle(null===(u=null==t?void 0:t.border)||void 0===u?void 0:u.asMutable({deep:!0}),i);e=(0,o.Immutable)(Object.assign(Object.assign({},e),n))}if(null==e?void 0:e.border){const t="var(--sys-color-divider-secondary)",i=["border","borderLeft","borderRight","borderTop","borderBottom"];Object.keys(null==e?void 0:e.border).some(e=>i.includes(e))&&(e=(0,o.Immutable)(Object.assign(Object.assign({},e),e.border))),Object.keys(e).some(e=>i.includes(e))&&(null===(h=Object.keys(e))||void 0===h||h.forEach(o=>{if(i.includes(o)){const i=e[o];(null==i?void 0:i.color)||(e=e.setIn([o,"color"],t))}}))}return e}const ne=(e,t,i,n)=>{if(!window.jimuConfig.isInBuilder)return!1;const s=e===o.AppMode.Design;return(i||n)&&window.jimuConfig.isInBuilder&&s&&t.isItemStyleConfirm};function se(e,t){const o=e,i=Math.floor(o/t);return 0===o%t?i:i+1}function le(e){return(null==e?void 0:e.showRecordCount)?null==e?void 0:e.showRecordCount:(null==e?void 0:e.pageStyle)===a.MultiPage&&!1===(null==e?void 0:e.hidePageTotal)}const re=(e,t)=>{var i,n,s,l,r;const a=(0,o.getAppStore)().getState().appConfig,{layouts:c}=a,d=ce(e,t),u=null===(i=null==d?void 0:d[0])||void 0===i?void 0:i.layoutId,h=null===(n=null==d?void 0:d[0])||void 0===n?void 0:n.layoutItemId;return null===(r=null===(l=null===(s=null==c?void 0:c[u])||void 0===s?void 0:s.content)||void 0===l?void 0:l[h])||void 0===r?void 0:r.setting},ae=e=>Number(e)?`${e}px`:"string"!=typeof e||(null==e?void 0:e.includes("px"))||(null==e?void 0:e.includes("rem"))?e:(null==e?void 0:e.includes("%"))?"100%":void 0,ce=(e,t)=>{const i=(0,o.getAppStore)().getState().appConfig,n=A.searchUtils.getWidgetIdThatUseTheLayoutId(i,e);return A.searchUtils.getContentLayoutInfosInOneSizeMode(i,n,o.LayoutItemType.Widget,t)},de=()=>({scrollWidth:document.documentElement.scrollWidth,scrollHeight:document.documentElement.scrollHeight,clientWidth:document.documentElement.clientWidth,clientHeight:document.documentElement.clientHeight}),ue=(e,t)=>{const o=(null==e?void 0:e.layoutType)===p.Column,i=(null==e?void 0:e.layoutType)===p.GRID?null==e?void 0:e.verticalSpace:null==e?void 0:e.space,n=t.width+i,s=t.height+i;return o?n:s},he=(e,t,o)=>{let i=t&&t.width||n;i-=8;const s=o.width+(null==e?void 0:e.horizontalSpace);return Math.floor((i-o.width)/s+1)||1},pe=(e,t,o,i)=>Math.ceil(e/he(t,o,i))||1,ge=e=>{const{rowIndex:t,columnIndex:o,config:i,widgetRect:n,currentCardSize:s}=e;return t*he(i,n,s)+o},fe=(e,t,o)=>ve(e,t,o,"left"),ve=(e,t,o,i)=>{const s=t&&t.width||n,l=he(e,t,o)*(o.width+(null==e?void 0:e.horizontalSpace))-(null==e?void 0:e.horizontalSpace);let r;const a=s-l-8;switch(null==e?void 0:e.gridAlignment){case D.TextAlignValue.LEFT:r="left"===i?0:a;break;case D.TextAlignValue.RIGHT:r="left"===i?a:0;break;default:r=(s-l-8)/2}return(null==e?void 0:e.layoutType)===p.GRID&&r>0?r:0};function me(e){const{lastScrollOffset:t,config:o,currentCardSize:i,columnCount:n,completelyVisibleItem:s}=e,l=ue(o,i),r=1*t/l;let a=s?Math.ceil(r):Math.floor(r);const c=s?0:(r-a)*l,d=(null==o?void 0:o.layoutType)===p.GRID?null==o?void 0:o.verticalSpace:null==o?void 0:o.space;return a=(null==o?void 0:o.layoutType)===p.GRID?a*n:a,c>l-d&&(a=(null==o?void 0:o.layoutType)===p.GRID?a+n:a+1),a}const Se={_widgetLabel:"List",_widgetDescription:"A widget to display data in a list view.",_action_filter_label:"Filter",_layout_REGULAR_label:"Regular",_layout_DEFAULT_label:"Default",_layout_HOVER_label:"Hover",_layout_SELECTED_label:"Selected",applyTo:"Apply to {status}",listLoading:"Loading",pleaseSelect:"Please select",listNoData:"No data",selectSortFields:"Select sorting fields",clearFilter:"Clear filter",isolate:"Isolate",linkedToAnd:"Linked to {where1} and {where2}",linkedTo:"Linked to {where}",placeHolderTip:"Please select a list template.",showSelected:"Show selected",clearSelected:"Clear selected",listSorting:"Sorting",listSort:"Sort",guideStep2Title:"Template",guideStep2Content:"Click on a template and click start.",guideStep3Title:"Data",guideStep3Content:"Click on select data to add a data source.",guideStep4Title:"Add new data",guideStep4Content:"Click add new data to select a web map.",guideStep5Title:"Select data",guideStep5Content:"Click the feature layer in the select data panel and close the panel.",guideStep6Title:"Data",guideStep6Content:"Specifies the data source, allows you to filter the data and limit the number of features that appear in the list.",guideStep7Title:"Arrangement",guideStep7Content:"Click the expand icon to explore the Arrangement section. In here, it allows you to define the direction, height, spacing, and paging style for your list.",guideStep8Title:"States",guideStep8Content:"Click the expand icon to explore the available States. In this section, it provides a visual representation to communicate the state of the list items. There are three states: regular, selected, and hover. By default, the selected state is always on.",guideStep9Title:"Tools",guideStep9Content:"Click the expand icon to explore the available Tools. In here, you can include search, sort, filter, and show selected tools in your list.",guideStep10Title:"Select image",guideStep10Content:"Click the image widget to configure it in the content panel.",guideStep10Title2:"Image settings",guideStep10Content2:"Allows you to select the image source and other settings for your widget.",guideStep11Title:"Select text",guideStep11Content:"Click the text widget to add attributes in the widget toolbar.",guideStep11Title2:"Text settings",guideStep11Content2:"Provides the configurations and style, including adding dynamic content from the widget toolbar. ",guideStep12Title:"End of tour",guideStep12Content:"Add other widgets to enhance your experience.",clearSearch:"Clear search",minimize:"Minimize",topToolBack:"Back",showAllListRecords:"Show all records",listDataActionLabel:"{layer} list selection",searchResult:"Search result",describeMessage:"List item",listArea:"list area"};var ye=function(e,t,o,i){return new(o||(o=Promise))(function(n,s){function l(e){try{a(i.next(e))}catch(e){s(e)}}function r(e){try{a(i.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(l,r)}a((i=i.apply(e,t||[])).next())})};function we(e,t,o,i){var n,s;let l,r=[];if(!1===i)return r;if(t&&e&&(l=e.find(e=>e.ruleOptionName===o),l=l||e[0],(null===(s=null===(n=null==l?void 0:l.rule)||void 0===n?void 0:n[0])||void 0===s?void 0:s.jimuFieldName)||(l=void 0),l)){const e=[];l.rule.forEach(t=>{t.jimuFieldName&&e.push(`${t.jimuFieldName} ${t.order}`)}),r=e}return r}var xe=c(62838),be=c.n(xe),Ie=function(e,t){var o={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(o[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(o[i[n]]=e[i[n]])}return o};const Ce=e=>{const i=window.SVG,{className:n}=e,s=Ie(e,["className"]),l=(0,o.classNames)("jimu-icon jimu-icon-component",n);return i?(0,t.jsx)(i,Object.assign({className:l,src:be()},s)):(0,t.jsx)("svg",Object.assign({className:l},s))};var Te=c(50170),Re=c.n(Te),Oe=function(e,t){var o={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(o[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(o[i[n]]=e[i[n]])}return o};const je=e=>{const i=window.SVG,{className:n}=e,s=Oe(e,["className"]),l=(0,o.classNames)("jimu-icon jimu-icon-component",n);return i?(0,t.jsx)(i,Object.assign({className:l,src:Re()},s)):(0,t.jsx)("svg",Object.assign({className:l},s))};var Me=c(96300),Ee=c.n(Me),De=function(e,t){var o={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(o[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(o[i[n]]=e[i[n]])}return o};const Le=e=>{const i=window.SVG,{className:n}=e,s=De(e,["className"]),l=(0,o.classNames)("jimu-icon jimu-icon-component",n);return i?(0,t.jsx)(i,Object.assign({className:l,src:Ee()},s)):(0,t.jsx)("svg",Object.assign({className:l},s))},ke=new(0,o.esri.Sanitizer);class Ne extends o.React.PureComponent{constructor(e){super(e),this.handleChange=e=>{this.setState({searchText:e,isShowSuggestion:(null==e?void 0:e.length)>2},()=>{const{onSearchTextChange:t}=this.props;t&&t(e)})},this.handleSubmit=(e,t=!1)=>{const{onSubmit:o}=this.props;o&&o(e,t)},this.onKeyUp=e=>{if(!e||!e.target)return;const{isShowSuggestion:t}=this.state;if("Enter"===e.key&&(this.setState({isShowSuggestion:!1}),this.handleSubmit(e.target.value,!0)),t){const t=this.getMenuItems()||[],i=(null==t?void 0:t.length)-1;"ArrowUp"===e.key?setTimeout(()=>{(0,o.focusElementInKeyboardMode)(t[i],!0)}):"ArrowDown"===e.key&&setTimeout(()=>{(0,o.focusElementInKeyboardMode)(this.containerRef,!0),(0,o.focusElementInKeyboardMode)(t[0],!0)})}},this.onSuggestionConfirm=e=>{this.setState({searchText:e,isShowSuggestion:!1},()=>{var t;this.handleSubmit(e),null===(t=this.props)||void 0===t||t.toggleSearchBoxVisible(!0)})},this.handleClear=e=>{this.setState({searchText:""}),e.stopPropagation()},this.getStyle=()=>{const{theme:e}=this.props;return o.css`
      position: relative;
      .search-input {
        margin-bottom: 2px;
        padding-left: 3px;
        border: 0;
        background: transparent;
        height: ${o.polished.rem(26)};
        min-width: 0;
        .input-wrapper {
          color: inherit !important;
          background: transparent;
          border: none;
          padding: 0;
          height: 100%;
        }
        input::placeholder {
          color: inherit !important;
          opacity: 0.6;
        }
      }
      .search-input:focus {
        background: transparent;
      }
      .search-loading-con {
        width: 13px;
        height: 13px;
      }
      .clear-search, .search-back {
        cursor: pointer;
        padding: ${o.polished.rem(6)};
        background: none;
        border: none;
        color: ${e.sys.color.action.text};
      }
      .search-back {
        margin-left: ${o.polished.rem(-6)};
      }
      .clear-search:hover {
        background: none;
      }
    `},this.getSuggestionListStyle=()=>{const{suggestionWidth:e}=this.props;return o.css`
      & {
        max-height: ${o.polished.rem(300)};
        min-width: ${o.polished.rem(e)};
        overflow: auto;
      }
      button {
        display: block;
        width: 100%;
        text-align: left;
        border: none;
        border-radius: 0;
      }
      .suggestion-item:focus {
        background: var(--sys-color-action-hover);
        color: var(--sys-color-action-text);
      }
      button:hover {
        border: none;
      }
      .color-inherit { color: inherit !important;}
    `},this.clearSearchText=()=>{const{searchText:e}=this.state;e&&(this.handleChange(""),this.setState({isShowSuggestion:!1}))},this.getMenuItems=()=>this.containerRef?Array.prototype.slice.call(this.containerRef.querySelectorAll('[role="button"]')).filter(e=>!e.disabled):[],this.getTextInputSuffixElement=()=>{const{showLoading:e,formatMessage:o}=this.props,{searchText:i}=this.state;return(0,t.jsxs)("div",{className:"d-flex align-items-center",children:[e&&(0,t.jsx)("div",{className:"position-relative search-loading-con",children:(0,t.jsx)(D.Loading,{type:D.LoadingType.Donut,width:13,height:13})}),i&&(0,t.jsx)(D.Button,{className:"clear-search color-inherit",icon:!0,size:"sm",type:"tertiary",onClick:this.clearSearchText,title:o("clearSearch"),"aria-label":o("clearSearch"),children:(0,t.jsx)(Ce,{size:14})})]})},this.getTextInputPrefixElement=()=>{const{formatMessage:e}=this.props;return(0,t.jsx)(D.Button,{type:"tertiary",icon:!0,size:"sm",title:e("SearchLabel"),"aria-label":e("SearchLabel"),className:"color-inherit",onClick:e=>{this.handleSubmit(this.state.searchText)},children:(0,t.jsx)(je,{size:16})})},this.handlePopperKeyDown=e=>{const{isShowSuggestion:t}=this.state;if(!t)return;const i="button"===e.target.getAttribute("role");if(["Tab","ArrowUp","ArrowDown"].includes(e.key)&&((e.which>=48&&e.which<=90||"Tab"===e.key)&&e.preventDefault(),t&&i))if("Escape"===e.key)this.handleEscEvent(e);else if(["ArrowUp","ArrowDown"].includes(e.key)||["n","p"].includes(e.key)&&e.ctrlKey){const t=this.getMenuItems();let i=t.indexOf(e.target),n=!1;"ArrowUp"===e.key||"p"===e.key&&e.ctrlKey?(i=0!==i?i-1:t.length-1,n=!0):("ArrowDown"===e.key||"n"===e.key&&e.ctrlKey)&&(n=!1,i=i===t.length-1?0:i+1);const s=0===i&&!n,l=i===t.length-1&&n;clearTimeout(this.focusTimeout),this.focusTimeout=s||l?setTimeout(()=>{(0,o.focusElementInKeyboardMode)(this.searchInputRef,!0)}):setTimeout(()=>{(0,o.focusElementInKeyboardMode)(this.containerRef,!0),(0,o.focusElementInKeyboardMode)(t[i],!0)})}else if("End"===e.key){const e=this.getMenuItems();(0,o.focusElementInKeyboardMode)(e[e.length-1],!0)}else if("Home"===e.key){const e=this.getMenuItems();(0,o.focusElementInKeyboardMode)(e[0],!0)}else if(e.which>=48&&e.which<=90){const t=this.getMenuItems(),i=String.fromCharCode(e.which).toLowerCase();for(let e=0;e<t.length;e+=1){if((t[e].textContent&&t[e].textContent[0].toLowerCase())===i){(0,o.focusElementInKeyboardMode)(t[e],!0);break}}}},this.handleEscEvent=e=>{const{isShowSuggestion:t}=this.state;e.preventDefault(),this.setState({isShowSuggestion:!t}),(0,o.focusElementInKeyboardMode)(this.searchInputRef)},this.setInputRef=e=>{const{inputRef:t}=this.props;this.searchInputRef=e,t&&t(e)},this.state={searchText:e.searchText||"",isShowSuggestion:!1}}componentDidUpdate(e){var t;if(this.props.searchText!==e.searchText&&this.props.searchText!==this.state.searchText){const{searchText:e}=this.props;this.setState({searchText:e})}(null===(t=this.props)||void 0===t?void 0:t.appMode)===o.AppMode.Design&&this.state.isShowSuggestion&&this.setState({isShowSuggestion:!1,searchText:""})}render(){const{placeholder:e,className:o,showClear:i,hideSearchIcon:n,onFocus:s,onBlur:l,searchSuggestion:r,formatMessage:a,isShowBackButton:c}=this.props,{searchText:d,isShowSuggestion:u}=this.state;return(0,t.jsxs)("div",{className:"w-100",ref:e=>{this.reference=e},children:[(0,t.jsxs)("div",{css:this.getStyle(),className:`d-flex align-items-center ${o}`,children:[c&&(0,t.jsx)(D.Button,{className:"search-back color-inherit",icon:!0,size:"sm",onClick:e=>{var t;null===(t=this.props)||void 0===t||t.toggleSearchBoxVisible(!1)},type:"tertiary",title:a("topToolBack"),"aria-label":a("topToolBack"),children:(0,t.jsx)(Le,{size:20})}),(0,t.jsx)(D.TextInput,{className:"search-input flex-grow-1",ref:e=>{this.setInputRef(e)},placeholder:e,"aria-label":e,onChange:e=>{this.handleChange(e.target.value)},onBlur:l,onFocus:s,title:d||e,value:d||"",onKeyDown:e=>{this.onKeyUp(e)},prefix:!n&&!c&&this.getTextInputPrefixElement(),suffix:this.getTextInputSuffixElement()}),i&&(0,t.jsx)(D.Button,{className:"color-inherit",id:"test-focus",icon:!0,size:"sm",onClick:this.handleSubmit,"aria-label":a("clearSearch"),children:(0,t.jsx)(Ce,{size:12})})]}),(0,t.jsx)("div",{children:(0,t.jsx)(D.Popper,{css:this.getSuggestionListStyle(),placement:"bottom-start",reference:this.reference,offsetOptions:8,open:u&&(null==r?void 0:r.length)>0,autoFocus:!1,hideOptions:!1,toggle:e=>{this.setState({isShowSuggestion:!u})},children:(0,t.jsx)("div",{ref:e=>{this.containerRef=e},"aria-live":"assertive",role:"alert",onKeyDown:this.handlePopperKeyDown,children:r.map((e,o)=>{const i=ke.sanitize(e.suggestionHtml);return(0,t.jsx)(D.Button,{type:"tertiary",size:"sm",role:"button",title:null==e?void 0:e.suggestion,"aria-label":null==e?void 0:e.suggestion,className:"suggestion-item color-inherit",onClick:()=>{this.onSuggestionConfirm(e.suggestion)},children:(0,t.jsx)("div",{className:"w-100",dangerouslySetInnerHTML:{__html:i}})},o)})})})})]})}}var ze=c(76219),_e=c.n(ze),Pe=function(e,t){var o={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(o[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(o[i[n]]=e[i[n]])}return o};const Ae=e=>{const i=window.SVG,{className:n}=e,s=Pe(e,["className"]),l=(0,o.classNames)("jimu-icon jimu-icon-component",n);return i?(0,t.jsx)(i,Object.assign({className:l,src:_e()},s)):(0,t.jsx)("svg",Object.assign({className:l},s))};class Be extends o.React.PureComponent{constructor(e){super(e),this.onDropDownToggle=e=>{e.stopPropagation();const{isDropDownOpen:t,onDropDownOpenChange:o}=this.props;if(void 0!==t)o&&o(!t);else{const{isOpen:e}=this.state;this.setState({isOpen:!e})}},this.onItemClick=(e,t)=>{const{isDropDownOpen:o,onDropDownOpenChange:i}=this.props;void 0!==o?i&&i(!1):this.setState({isOpen:!1}),t.event(e,t),e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},this.onDropDownMouseClick=e=>{e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},this.getStyle=()=>{const{theme:e}=this.props;return o.css`
      & button {
        padding: 0;
      }
      .list-toggle-button {
        background: ${e.sys.color.action.default};
        border: none;
        &:hover, &[aria-expanded="true"] {
          background: ${e.sys.color.action.hover};
        }
      }
    `},this.state={isOpen:!1};const{withBuilderTheme:t}=e;this.MyDropdown=t?t(D.Dropdown):D.Dropdown,this.MyDropdownButton=t?t(D.DropdownButton):D.DropdownButton,this.MyDropdownMenu=t?t(D.DropdownMenu):D.DropdownMenu,this.MyDropdownItem=t?t(D.DropdownItem):D.DropdownItem}render(){const{items:e,toggleContent:i,toggleType:n,toggleArrow:s,menuContent:l,appMode:r,modifiers:a,toggleIsIcon:c,theme:d,isDropDownOpen:u,size:h,appendToBody:p,toggleTitle:g,direction:f,menuCss:v,className:m,showActive:S,activeLabel:y,fluid:w,activeIcon:x}=this.props;let{isOpen:b}=this.state;b=void 0===u?b:u;const{MyDropdown:I,MyDropdownButton:C,MyDropdownMenu:T,MyDropdownItem:R}=this;return(0,t.jsxs)(I,{size:h,toggle:this.onDropDownToggle,direction:f,fluid:w,isOpen:b&&r!==o.AppMode.Design,className:`my-dropdown ${m}`,css:this.getStyle(),activeIcon:x,menuRole:"listbox",children:[i&&(0,t.jsx)(C,{icon:c,title:g,size:h,type:n,className:"list-toggle-button",arrow:s,role:"combobox",children:i&&i(d)}),(0,t.jsx)(T,{appendToBody:p,modifiers:a,css:v&&v(d),referenceHiddenVisibility:!0,children:l?l(d):e&&e.asMutable().map((e,o)=>!e.hide&&(0,t.jsx)(R,{className:"no-user-select",title:e.label,active:S&&e.label===y,onClick:t=>{this.onItemClick(t,e)},children:e.label},o))})]})}}const{useEffect:Fe,useState:He,useRef:We}=o.React,{useSelector:$e}=o.ReactRedux,Ue=o.css`
  & {
    max-width: 150px;
  }
  .list-toggle-button:hover, .list-toggle-button {
    background: none !important;
  }
  .list-toggle-button {
    color: inherit !important;
  }
  .jimu-dropdown-button-content {
    color: inherit !important;
  }
  .dropdown-btn-con {
    color: inherit !important;
    padding-left: ${o.polished.rem(7)};
    padding-right: ${o.polished.rem(7)};
    svg {
      margin-right: ${o.polished.rem(4)} !important;
    }
  }
  .dropdown-btn-con:hover {
    color: var(--sys-color-primary);
  }
`,Ge=e=>{const i=(0,B.useTheme)(),n=$e(e=>{var t;return null===(t=null==e?void 0:e.appRuntimeInfo)||void 0===t?void 0:t.appMode}),s=$e(e=>null==e?void 0:e.widgetsState),l=We(null),r=We(null),a=o.hooks.useTranslation(Se,D.defaultMessages,o.defaultMessages),{handleSortOptionChange:c,sorts:d,dataSource:u,sortOptionName:h,id:p,showSortString:g}=e,[f,v]=He(null);Fe(()=>{y()},[d]),Fe(()=>{S()},[]);const m=(e,t)=>{c(null==t?void 0:t.label),S()},S=()=>{var e,t;for(const i in s)if((null===(e=s[i])||void 0===e?void 0:e.listWidget)&&(null===(t=s[i])||void 0===t?void 0:t.dsId)===(null==u?void 0:u.id)){const e=p===i;(0,o.getAppStore)().dispatch(o.appActions.widgetStatePropChange(i,"activeSort",e))}},y=()=>{const e=[];d&&d.forEach(t=>{t.rule&&t.rule.forEach(o=>{o&&o.jimuFieldName&&e.push({label:t.ruleOptionName,event:m})})}),l.current=(0,o.Immutable)(e),v((0,o.Immutable)(e))},w=o.hooks.useEventCallback(e=>{var o,i;let n;return n=g?a("listSort"):e||(null===(i=null===(o=l.current)||void 0===o?void 0:o[0])||void 0===i?void 0:i.label),r.current=n,(0,t.jsxs)("div",{className:"d-flex align-items-center dropdown-btn-con",title:n,"aria-label":n,children:[(0,t.jsx)(Ae,{}),(0,t.jsx)("span",{className:"flex-grow-1 w-100 text-truncate",children:n})]})});return(0,t.jsx)("div",{className:"list-sort-con d-flex align-items-center flex-grow-1 w-100",css:Ue,children:(0,t.jsx)(Be,{theme:i,items:f,appMode:n,toggleType:"tertiary",toggleArrow:!1,toggleContent:e=>w(h),size:"sm",showActive:!0,activeIcon:!0,activeLabel:r.current,className:"w-100"})})};var Ve=c(68972),qe=c(47569),Ke=c.n(qe),Ye=function(e,t){var o={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(o[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(o[i[n]]=e[i[n]])}return o};const Qe=e=>{const i=window.SVG,{className:n}=e,s=Ye(e,["className"]),l=(0,o.classNames)("jimu-icon jimu-icon-component",n);return i?(0,t.jsx)(i,Object.assign({className:l,src:Ke()},s)):(0,t.jsx)("svg",Object.assign({className:l},s))};var Ze=c(29435),Xe=c.n(Ze),Je=function(e,t){var o={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(o[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(o[i[n]]=e[i[n]])}return o};const et=e=>{const i=window.SVG,{className:n}=e,s=Je(e,["className"]),l=(0,o.classNames)("jimu-icon jimu-icon-component",n);return i?(0,t.jsx)(i,Object.assign({className:l,src:Xe()},s)):(0,t.jsx)("svg",Object.assign({className:l},s))},tt={boundary:document.body,fallbackPlacements:["bottom-start","right-end","top-start","left-start"]};class ot extends o.React.PureComponent{constructor(e){super(e),this.formatMessage=(e,t)=>this.props.formatMessage(e,t),this.onPopperToggle=e=>{const{filter:t}=this.props,{isOpen:i}=this.state;i||this.setState({currentFilter:t}),this.setState({isOpen:!i}),i&&(0,o.focusElementInKeyboardMode)(this.toggleRef.current)},this.onItemClick=(e,t)=>{this.closePopper(),e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},this.handleFilterChange=e=>{this.setState({currentFilter:e})},this.handleApplyClick=e=>{const{currentFilter:t}=this.state,{handleFilterApplyChange:o,handleFilterChange:i}=this.props;i(t),o(!0),this.closePopper()},this.closePopper=()=>{this.setState({isOpen:!1}),(0,o.focusElementInKeyboardMode)(this.toggleRef.current)},this.handleResetClick=e=>{const{handleFilterApplyChange:t,handleFilterChange:o}=this.props;t(!1),o(this.props.filterInConfig),this.setState({currentFilter:this.props.filterInConfig})},this.handleClearClick=e=>{const{handleFilterApplyChange:t}=this.props;t(!1),this.closePopper()},this.getPopperStyle=()=>o.css`
      & .popper-box{
        max-height: ${document.documentElement.clientHeight}px;
        overflow: auto;
      }
      .filter-button-con  {
        & {
          text-align: right;
        }
        button {
          max-width: ${o.polished.rem(92)};
          overflow: hidden;
          text-overflow: ellipsis;
          white-space: nowrap;
        }
        button svg {
          margin-right: 0 !important;
        }
        .reset-button {
          padding-left: ${o.polished.rem(5)};
          padding-right: ${o.polished.rem(5)};
        }
      }
      .clear-button, .reset-button {
        margin-left: ${o.polished.rem(8)};
      }
    `,this.toggleRef=o.React.createRef(),this.state={isOpen:!1,currentFilter:e.filter}}componentDidUpdate(e){const{filter:t,appMode:i}=this.props;t!==e.filter&&this.setState({currentFilter:t}),i!==e.appMode&&i===o.AppMode.Design&&this.setState({isOpen:!1})}render(){const{filter:e,selectedDs:n,widgetId:s,title:l,applied:r}=this.props,{isOpen:a,currentFilter:c}=this.state,d=r&&(null==e?void 0:e.sql)===(null==c?void 0:c.sql);return(0,t.jsxs)(Ve.Fragment,{children:[(0,t.jsx)(D.Badge,{dot:r,color:"primary",offset:[2,2],children:(0,t.jsx)(D.Button,{size:"sm",type:"tertiary",icon:!0,title:l,"aria-label":l,ref:this.toggleRef,onClick:this.onPopperToggle,"aria-haspopup":"dialog","aria-expanded":a,className:"color-inherit",children:(0,t.jsx)(Qe,{size:16})})}),(0,t.jsx)(D.Popper,{placement:"bottom-start",reference:this.toggleRef.current,offsetOptions:5,toggle:this.onPopperToggle,css:this.getPopperStyle(),open:a,flipOptions:tt,hideOptions:!1,children:(0,t.jsxs)("div",{style:{padding:o.polished.rem(20),width:o.polished.rem(250)},children:[(0,t.jsx)("div",{children:(0,t.jsx)(i.SqlExpressionRuntime,{widgetId:s,dataSource:n,expression:c,onChange:this.handleFilterChange})}),(0,t.jsxs)("div",{className:"w-100 mt-4 filter-button-con",children:[(0,t.jsx)(D.Button,{disabled:d,onClick:this.handleApplyClick,type:"primary",title:this.formatMessage("apply"),size:"sm",children:this.formatMessage("apply")}),(0,t.jsx)(D.Button,{disabled:!r,onClick:this.handleClearClick,title:this.formatMessage("commonModalCancel"),className:"clear-button",size:"sm",children:this.formatMessage("commonModalCancel")}),(0,t.jsx)(D.Button,{onClick:this.handleResetClick,title:this.formatMessage("resetFilters"),className:"reset-button",size:"sm",children:(0,t.jsx)(et,{size:"s"})})]})]})})]})}}var it=c(7835),nt=c.n(it),st=function(e,t){var o={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(o[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(o[i[n]]=e[i[n]])}return o};const lt=e=>{const i=window.SVG,{className:n}=e,s=st(e,["className"]),l=(0,o.classNames)("jimu-icon jimu-icon-component",n);return i?(0,t.jsx)(i,Object.assign({className:l,src:nt()},s)):(0,t.jsx)("svg",Object.assign({className:l},s))};var rt=c(27964),at=c.n(rt),ct=c(20904),dt=c.n(ct),ut=function(e,t){var o={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(o[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(o[i[n]]=e[i[n]])}return o};const ht=e=>{const i=window.SVG,{className:n}=e,s=ut(e,["className"]),l=(0,o.classNames)("jimu-icon jimu-icon-component has-rtl-svg",n);return i?(0,t.jsx)(i,Object.assign({className:l,src:at(),srcRTL:dt()},s)):(0,t.jsx)("svg",Object.assign({className:l},s))};var pt=c(4583),gt=c.n(pt),ft=function(e,t){var o={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(o[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(o[i[n]]=e[i[n]])}return o};const vt=e=>{const i=window.SVG,{className:n}=e,s=ft(e,["className"]),l=(0,o.classNames)("jimu-icon jimu-icon-component",n);return i?(0,t.jsx)(i,Object.assign({className:l,src:gt()},s)):(0,t.jsx)("svg",Object.assign({className:l},s))};var mt=c(4651),St=c.n(mt),yt=function(e,t){var o={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(o[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(o[i[n]]=e[i[n]])}return o};const wt=e=>{const i=window.SVG,{className:n}=e,s=yt(e,["className"]),l=(0,o.classNames)("jimu-icon jimu-icon-component",n);return i?(0,t.jsx)(i,Object.assign({className:l,src:St()},s)):(0,t.jsx)("svg",Object.assign({className:l},s))};var xt=c(21935),bt=c.n(xt),It=function(e,t){var o={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(o[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(o[i[n]]=e[i[n]])}return o};const Ct=e=>{const i=window.SVG,{className:n}=e,s=It(e,["className"]),l=(0,o.classNames)("jimu-icon jimu-icon-component",n);return i?(0,t.jsx)(i,Object.assign({className:l,src:bt()},s)):(0,t.jsx)("svg",Object.assign({className:l},s))},{useState:Tt,useRef:Rt,useEffect:Ot}=o.React,jt=e=>{var i;const s=Rt(null),l=Rt(null),r=Rt(null),a=Rt(null),c=Rt(null),d=(0,B.useTheme)(),u=E(),h=o.hooks.useTranslation(Se,D.defaultMessages,o.defaultMessages),p=M(),{searchText:g,dataSource:f,showSelectionOnly:v,widgetRect:m,queryStatus:S,filterApplied:y,currentFilter:w,showSortString:x,sortOptionName:b,showLoading:I}=M(),C=o.ReactRedux.useSelector(e=>null==e?void 0:e.browserSizeMode),T=o.ReactRedux.useSelector(e=>{var t;return null===(t=null==e?void 0:e.appRuntimeInfo)||void 0===t?void 0:t.appMode}),R=o.ReactRedux.useSelector(t=>{var o,i;return null===(i=null===(o=null==t?void 0:t.appConfig.widgets)||void 0===o?void 0:o[e.id])||void 0===i?void 0:i.enableDataAction}),{selectRecords:O,id:j,config:L,useDataSources:k}=e,{isEditing:N,scrollToIndex:F,handleRefreshList:H,selectRecordsAndPublishMessageAction:W,updateTopToolsContainer:$}=e,[U,G]=Tt(null),[V,q]=Tt(null),[K,Y]=Tt(null),[ie,ne]=Tt([]),[se,le]=Tt(!1),[re,ae]=Tt(!1),[ce,de]=Tt(!1),[ue,he]=Tt(!1);Ot(()=>{var e,t;u({type:"SET_SORT_OPTION_NAME",value:null===(t=null===(e=null==L?void 0:L.sorts)||void 0===e?void 0:e[0])||void 0===t?void 0:t.ruleOptionName})},[]),Ot(()=>{const e=h("listDataActionLabel",{layer:(null==f?void 0:f.getLabel())||""});q(e)},[f]),Ot(()=>{const e=Z(j,L,null==k?void 0:k.asMutable({deep:!0}));he(e)},[j,L,k,R]),Ot(()=>{le(Q(L)),pe(L),ge(L),c.current=L},[L]),Ot(()=>{Y(ue?250:175)},[ue]),Ot(()=>{G((null==m?void 0:m.width)||620)},[m]),Ot(()=>{T!==o.AppMode.Design&&(u({type:"SET_SEARCH_TEXT",value:void 0}),u({type:"SET_FILTER_APPLIED",value:void 0}))},[T]);const pe=e=>{var t;if(e.filterOpen){e.filter!==(null===(t=c.current)||void 0===t?void 0:t.filter)&&(u({type:"SET_FILTER_APPLIED",value:!1}),u({type:"SET_CURRENT_FILTRE",value:void 0}))}},ge=e=>{var t;if(e.sortOpen){e.sorts!==(null===(t=c.current)||void 0===t?void 0:t.sorts)&&(u({type:"showSortString",value:!1}),u({type:"SET_SORT_OPTION_NAME",value:void 0}))}},fe=o.hooks.useEventCallback(()=>{u({type:"SET_SHOW_SELECTION_ONLY",value:!v})}),ve=()=>{u({type:"SET_SHOW_SELECTION_ONLY",value:!1}),W([])},me=o.hooks.useEventCallback(e=>{const t=Object.assign(Object.assign({},p),{sortOptionName:e,showSortString:!1,page:1,scrollStatus:"start"});u({type:"SET_LIST_RUNTIME_STATE",value:t}),F(0)}),we=(e=!1)=>{ae(e);U<(ue?250:175)&&(clearTimeout(r.current),r.current=setTimeout(()=>{de(!0)}))},xe=e=>{""!==e&&e||Ie(void 0,!1),ne([]),clearTimeout(a.current),a.current=setTimeout(()=>{be(e)},200)},be=e=>{if((null==e?void 0:e.length)<3)return!1;(function(e,t,i){return ye(this,void 0,void 0,function*(){var n;const s={searchText:e,searchFields:(null===(n=null==t?void 0:t.searchFields)||void 0===n?void 0:n.asMutable({deep:!0}))||[],dataSource:i,exact:null==t?void 0:t.searchExact};return o.dataSourceUtils.querySuggestions(s)})})(e,L,f).then(e=>{ne(e)})},Ie=(e,t=!1)=>{(g!==e||t)&&(u({type:"SET_PAGE",value:1}),u({type:"SET_SEARCH_TEXT",value:e}),o.MessageManager.getInstance().publishMessage(new o.DataSourceFilterChangeMessage(j,[f.id])))},Ce=()=>{const e=m&&m.width||n;return e>580?"top-right-tools-size-3":e>480?"top-right-tools-size-2":e>370?"top-right-tools-size-1":"top-right-tools-size-0"},Te=e=>{u({type:"SET_CURRENT_FILTRE",value:e}),u({type:"SET_PAGE",value:1}),o.MessageManager.getInstance().publishMessage(new o.DataSourceFilterChangeMessage(j,[f.id]))},Re=e=>{u({type:"SET_FILTER_APPLIED",value:e}),o.MessageManager.getInstance().publishMessage(new o.DataSourceFilterChangeMessage(j,[f.id]))},Oe=(e,i)=>{const n=e&&e.getSelectedRecords(),s=n&&n.length>0;return(0,t.jsxs)("div",{className:(0,o.classNames)("d-flex align-items-center mr-1",Ce()),ref:e=>{l.current=e,$(e)},children:[X(L)&&(0,t.jsx)(Ge,{sortOptionName:b,dataSource:e,sorts:L.sorts,handleSortOptionChange:me,id:j,showSortString:x}),(0,t.jsxs)("div",{className:"flex-grow-1 d-flex align-items-center",children:[ee(L)&&(0,t.jsx)(ot,{filter:w||L.filter,filterInConfig:L.filter,appMode:T,applied:y,title:h("filter"),selectedDs:e,handleFilterChange:Te,handleFilterApplyChange:Re,formatMessage:h,theme:d,widgetId:j}),(null==L?void 0:L.showRefresh)&&(0,t.jsx)(D.Button,{type:"tertiary",title:h("refresh"),icon:!0,size:"sm",className:"color-inherit",onClick:()=>{H(e)},children:(0,t.jsx)(Ct,{size:16})}),te(L)&&(0,t.jsxs)(D.Button,{disabled:!s,type:"tertiary",title:h(v?"showAll":"showSelection"),icon:!0,size:"sm",className:"color-inherit",onClick:fe,children:[(0,t.jsx)(lt,{className:(0,o.classNames)({"sr-only":!v}),size:16}),(0,t.jsx)(ht,{className:(0,o.classNames)({"sr-only":v}),size:16})]}),oe(L)&&(0,t.jsx)(D.Button,{disabled:!s,type:"tertiary",title:h("clearSelection"),icon:!0,size:"sm",className:"color-inherit",onClick:ve,children:(0,t.jsx)(vt,{size:16})})]})]})},Me=(e,i)=>{const n=N||!e||i!==o.DataSourceStatus.Loaded,s=U<360?"ds-tools-line-blue":"",l=(null==L?void 0:L.searchHint)||h("search"),r=U<360&&re;return(0,t.jsx)("div",{className:"list-search-div flex-grow-1 h-100",css:_(d),children:J(L)&&(0,t.jsxs)("div",{className:"d-flex search-box-content",children:[(U>=360||re)&&(0,t.jsxs)("div",{className:"flex-grow-1 w-100",children:[(0,t.jsx)(Ne,{theme:d,placeholder:l,searchText:g,onSearchTextChange:xe,onSubmit:Ie,disabled:n,searchSuggestion:ie,suggestionWidth:U,showLoading:I,formatMessage:h,isShowBackButton:r,toggleSearchBoxVisible:we,className:"list-search",appMode:T}),(0,t.jsx)("div",{className:(0,o.classNames)("ds-tools-line",s)})]}),U<360&&!re&&(0,t.jsx)(D.Button,{type:"tertiary",icon:!0,size:"sm",onClick:e=>{we(!0)},className:"color-inherit",title:h("search"),"aria-label":h("search"),children:(0,t.jsx)(je,{size:16})})]})})},Ee=f&&ue;return(0,t.jsx)("div",{className:"datasource-tools w-100",css:P(se,d,(null===(i=l.current)||void 0===i?void 0:i.clientWidth)||0,Ee),children:(0,t.jsxs)("div",{className:"d-flex align-items-center",children:[(0,t.jsx)("div",{className:"flex-grow-1 tool-row tools-con-max-size",children:se&&(0,t.jsxs)("div",{className:"w-100",children:[U>=K&&(0,t.jsxs)("div",{className:"tool-row row1 d-flex w-100 align-items-center justify-content-between",children:[Me(f,S),(!re||U>=360)&&Oe(f)]}),U<K&&(0,t.jsxs)("div",{className:"float-right",ref:e=>{s.current=e},children:[(0,t.jsx)(D.Button,{type:"tertiary",icon:!0,size:"sm",className:"tools-menu color-inherit",title:h("guideStep9Title"),onClick:e=>{de(!ce)},children:(0,t.jsx)(wt,{size:16})}),((e,o)=>{const i=N,n=((null==m?void 0:m.width)||620)<(ue?250:175)&&ce&&!i;return(0,t.jsx)("div",{children:(0,t.jsx)(D.Popper,{placement:"bottom-start",reference:s.current,offsetOptions:[-10,0],open:n,arrowOptions:!0,hideOptions:!1,toggle:e=>{de(!n)},children:(0,t.jsxs)("div",{className:"tool-row row1 d-flex align-items-center justify-content-between",css:z(d),children:[Me(e,o),!re&&Oe(e)]})})})})(f,S)]})]})}),Ee&&(0,t.jsx)("div",{className:(0,o.classNames)("list-data-action position-relative",{"m-left":U<K}),"data-testid":"data-action",children:(0,t.jsx)(D.DataActionList,{widgetId:j,dataSets:[{dataSource:f,records:O||[],name:V,type:"selected",fields:(()=>{var e,t,i;const n=null===(e=(0,o.getAppStore)().getState())||void 0===e?void 0:e.appConfig,s=(null===(i=null===(t=null==n?void 0:n.widgets)||void 0===t?void 0:t[j])||void 0===i?void 0:i.layouts)||{};let l=Object.keys(s).map(e=>s[e][C])||[];l=Array.from(new Set(l));let r=[];l.forEach(e=>{const t=A.searchUtils.getContentsInLayoutWithRecursiveLayouts(n,e,o.LayoutItemType.Widget,C)||[];r=r.concat(t)}),r=Array.from(new Set(r));let a=[];return r.forEach(e=>{var t,o,i;const s=(null===(i=null===(o=null===(t=n.widgets[e])||void 0===t?void 0:t.useDataSources)||void 0===o?void 0:o[0])||void 0===i?void 0:i.fields)||[];a=a.concat(s)}),Array.from(new Set(a))})()}],listStyle:D.DataActionListStyle.Dropdown,buttonType:"tertiary",buttonSize:"sm"})})]})})};var Mt=c(37568),Et=c.n(Mt),Dt=function(e,t){var o={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(o[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(o[i[n]]=e[i[n]])}return o};const Lt=e=>{const i=window.SVG,{className:n}=e,s=Dt(e,["className"]),l=(0,o.classNames)("jimu-icon jimu-icon-component",n);return i?(0,t.jsx)(i,Object.assign({className:l,src:Et()},s)):(0,t.jsx)("svg",Object.assign({className:l},s))};var kt=c(94064),Nt=c.n(kt),zt=function(e,t){var o={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(o[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(o[i[n]]=e[i[n]])}return o};const _t=e=>{const i=window.SVG,{className:n}=e,s=zt(e,["className"]),l=(0,o.classNames)("jimu-icon jimu-icon-component",n);return i?(0,t.jsx)(i,Object.assign({className:l,src:Nt()},s)):(0,t.jsx)("svg",Object.assign({className:l},s))};var Pt=c(52943),At=c.n(Pt),Bt=function(e,t){var o={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(o[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(o[i[n]]=e[i[n]])}return o};const Ft=e=>{const i=window.SVG,{className:n}=e,s=Bt(e,["className"]),l=(0,o.classNames)("jimu-icon jimu-icon-component",n);return i?(0,t.jsx)(i,Object.assign({className:l,src:At()},s)):(0,t.jsx)("svg",Object.assign({className:l},s))};var Ht=c(30655),Wt=c.n(Ht),$t=function(e,t){var o={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(o[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(o[i[n]]=e[i[n]])}return o};const Ut=e=>{const i=window.SVG,{className:n}=e,s=$t(e,["className"]),l=(0,o.classNames)("jimu-icon jimu-icon-component",n);return i?(0,t.jsx)(i,Object.assign({className:l,src:Wt()},s)):(0,t.jsx)("svg",Object.assign({className:l},s))},{useState:Gt,useEffect:Vt,useRef:qt}=o.React,Kt=o.css`
  .scroll-navigator button {
    &:not(.jimu-disabled) {
      color: inherit !important;
      border-color: inherit;
    }
  }
`;function Yt(e){const i=qt(1),n=qt(null),s=qt(null),{isScrollEnd:l,hidePageTotal:r,config:c}=e,{handleScrollDown:d,handleScrollUp:u,updatePage:h}=e,g=o.hooks.useTranslation(Se,D.defaultMessages,o.defaultMessages),{page:f,scrollStatus:v,records:m,dataSource:S,dsInfo:y,pageSize:w,showLoading:x}=M(),b=E(),I=o.ReactRedux.useSelector(e=>e.appContext.isRTL),[C,T]=Gt(!1),[R,O]=Gt(0),[j,L]=Gt(0);Vt(()=>{var e;(null===(e=s.current)||void 0===e?void 0:e.id)!==(null==S?void 0:S.id)&&(i.current=1),_(S,null==y?void 0:y.status,f),P(S),A(S,null==y?void 0:y.status,c),s.current=S},[S,y,c,f]),Vt(()=>{var e,t;const o=null===(e=n.current)||void 0===e?void 0:e.pageStyle,s=(null==c?void 0:c.pageStyle)!==o,l=(null==c?void 0:c.hidePageTotal)!==(null===(t=n.current)||void 0===t?void 0:t.hidePageTotal);(s||l)&&(i.current=1),n.current=c},[c]),Vt(()=>{const e=null==m?void 0:m.length;k(S,f,w,e),N(S,j,c,f,e)},[S,w,y,m,c,j,f]);const k=(e,t,o,i)=>{const n=H(e,t,o,i),s=H(e,t+1,o,i);T(n||s)},N=(e,t,o,n,s)=>{const l=H(e,n,w,s);let r;!1===(null==o?void 0:o.hidePageTotal)?r=se(t,o.itemsPerPage):l||s<w?(i.current=n,r=n):r=n===i.current?i.current+1:i.current,O(r)},z=o.hooks.useEventCallback((e,t,o)=>{if(!e)return!1;return!H(S,i.current,o,t)&&t>=o}),_=(e,t,n)=>{t===o.DataSourceStatus.Loaded&&t&&n>i.current&&(i.current=n)},P=o.hooks.useEventCallback(e=>{const t=null==m?void 0:m.length;if(i.current<2)return;const o=H(e,i.current,w,t),n=H(e,i.current-1,w,t);o&&n&&b({type:"SET_PAGE",value:1})}),A=(e,t,i)=>{if(!le(i))return;const n=null==e?void 0:e.count;t===o.DataSourceStatus.Loaded&&null!==n&&L(n)},B=o.hooks.useEventCallback(e=>{const t=se(j,c.itemsPerPage);t&&(e<1||e>t)||h(e,!0)});return(0,t.jsxs)("div",{className:"bottom-tools w-100 d-flex align-items-center justify-content-center pl-2 pr-2",css:Kt,children:[c.pageStyle===a.MultiPage&&(0,t.jsx)(D.Pagination,{size:"sm",totalPage:R,current:f,onChangePage:B,disabled:x,showEndEllipsis:z(r,null==m?void 0:m.length,w),isLastPage:C}),c.pageStyle!==a.MultiPage&&(0,t.jsxs)("div",{className:"d-flex scroll-navigator",children:[(0,t.jsx)(D.Button,{title:g("previous"),disabled:"start"===v||(null==m?void 0:m.length)<w,type:"secondary",size:"sm",icon:!0,onClick:u,children:c.layoutType===p.Column?(0,t.jsx)(Lt,{size:12}):(0,t.jsx)(_t,{size:12})}),(0,t.jsx)(D.Button,{title:g("next"),disabled:"end"===v||l,type:"secondary",size:"sm",style:I?{marginRight:o.polished.rem(10)}:{marginLeft:o.polished.rem(10)},icon:!0,onClick:d,children:c.layoutType===p.Column?(0,t.jsx)(Ft,{}):(0,t.jsx)(Ut,{})})]})]})}function Qt(){return Qt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)({}).hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e},Qt.apply(null,arguments)}function Zt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xt(e,t){return Xt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xt(e,t)}function Jt(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Xt(e,t)}var eo=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function to(e,t){return e===t||!(!eo(e)||!eo(t))}function oo(e,t){if(e.length!==t.length)return!1;for(var o=0;o<e.length;o++)if(!to(e[o],t[o]))return!1;return!0}const io=function(e,t){var o;void 0===t&&(t=oo);var i,n=[],s=!1;return function(){for(var l=[],r=0;r<arguments.length;r++)l[r]=arguments[r];return s&&o===this&&t(l,n)||(i=e.apply(this,l),s=!0,o=this,n=l),i}};var no="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()};function so(e){cancelAnimationFrame(e.id)}function lo(e,t){var o=no();var i={id:requestAnimationFrame(function n(){no()-o>=t?e.call(null):i.id=requestAnimationFrame(n)})};return i}var ro=-1;function ao(e){if(void 0===e&&(e=!1),-1===ro||e){var t=document.createElement("div"),o=t.style;o.width="50px",o.height="50px",o.overflow="scroll",document.body.appendChild(t),ro=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return ro}var co=null;function uo(e){if(void 0===e&&(e=!1),null===co||e){var t=document.createElement("div"),o=t.style;o.width="50px",o.height="50px",o.overflow="scroll",o.direction="rtl";var i=document.createElement("div"),n=i.style;return n.width="100px",n.height="100px",t.appendChild(i),document.body.appendChild(t),t.scrollLeft>0?co="positive-descending":(t.scrollLeft=1,co=0===t.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(t),co}return co}var ho=function(e){var t=e.columnIndex;e.data;return e.rowIndex+":"+t};function po(e){var t,o=e.getColumnOffset,i=e.getColumnStartIndexForOffset,n=e.getColumnStopIndexForStartIndex,s=e.getColumnWidth,l=e.getEstimatedTotalHeight,r=e.getEstimatedTotalWidth,a=e.getOffsetForColumnAndAlignment,c=e.getOffsetForRowAndAlignment,d=e.getRowHeight,u=e.getRowOffset,h=e.getRowStartIndexForOffset,p=e.getRowStopIndexForStartIndex,g=e.initInstanceProps,f=e.shouldResetStyleCacheOnItemSizeChange,v=e.validateProps;return(t=function(e){function t(t){var i;return(i=e.call(this,t)||this)._instanceProps=g(i.props,Zt(i)),i._resetIsScrollingTimeoutId=null,i._outerRef=void 0,i.state={instance:Zt(i),isScrolling:!1,horizontalScrollDirection:"forward",scrollLeft:"number"==typeof i.props.initialScrollLeft?i.props.initialScrollLeft:0,scrollTop:"number"==typeof i.props.initialScrollTop?i.props.initialScrollTop:0,scrollUpdateWasRequested:!1,verticalScrollDirection:"forward"},i._callOnItemsRendered=void 0,i._callOnItemsRendered=io(function(e,t,o,n,s,l,r,a){return i.props.onItemsRendered({overscanColumnStartIndex:e,overscanColumnStopIndex:t,overscanRowStartIndex:o,overscanRowStopIndex:n,visibleColumnStartIndex:s,visibleColumnStopIndex:l,visibleRowStartIndex:r,visibleRowStopIndex:a})}),i._callOnScroll=void 0,i._callOnScroll=io(function(e,t,o,n,s){return i.props.onScroll({horizontalScrollDirection:o,scrollLeft:e,scrollTop:t,verticalScrollDirection:n,scrollUpdateWasRequested:s})}),i._getItemStyle=void 0,i._getItemStyle=function(e,t){var n,l=i.props,r=l.columnWidth,a=l.direction,c=l.rowHeight,h=i._getItemStyleCache(f&&r,f&&a,f&&c),p=e+":"+t;if(h.hasOwnProperty(p))n=h[p];else{var g=o(i.props,t,i._instanceProps),v="rtl"===a;h[p]=n={position:"absolute",left:v?void 0:g,right:v?g:void 0,top:u(i.props,e,i._instanceProps),height:d(i.props,e,i._instanceProps),width:s(i.props,t,i._instanceProps)}}return n},i._getItemStyleCache=void 0,i._getItemStyleCache=io(function(e,t,o){return{}}),i._onScroll=function(e){var t=e.currentTarget,o=t.clientHeight,n=t.clientWidth,s=t.scrollLeft,l=t.scrollTop,r=t.scrollHeight,a=t.scrollWidth;i.setState(function(e){if(e.scrollLeft===s&&e.scrollTop===l)return null;var t=i.props.direction,c=s;if("rtl"===t)switch(uo()){case"negative":c=-s;break;case"positive-descending":c=a-n-s}c=Math.max(0,Math.min(c,a-n));var d=Math.max(0,Math.min(l,r-o));return{isScrolling:!0,horizontalScrollDirection:e.scrollLeft<s?"forward":"backward",scrollLeft:c,scrollTop:d,verticalScrollDirection:e.scrollTop<l?"forward":"backward",scrollUpdateWasRequested:!1}},i._resetIsScrollingDebounced)},i._outerRefSetter=function(e){var t=i.props.outerRef;i._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},i._resetIsScrollingDebounced=function(){null!==i._resetIsScrollingTimeoutId&&so(i._resetIsScrollingTimeoutId),i._resetIsScrollingTimeoutId=lo(i._resetIsScrolling,150)},i._resetIsScrolling=function(){i._resetIsScrollingTimeoutId=null,i.setState({isScrolling:!1},function(){i._getItemStyleCache(-1)})},i}Jt(t,e),t.getDerivedStateFromProps=function(e,t){return go(e,t),v(e),null};var m=t.prototype;return m.scrollTo=function(e){var t=e.scrollLeft,o=e.scrollTop;void 0!==t&&(t=Math.max(0,t)),void 0!==o&&(o=Math.max(0,o)),this.setState(function(e){return void 0===t&&(t=e.scrollLeft),void 0===o&&(o=e.scrollTop),e.scrollLeft===t&&e.scrollTop===o?null:{horizontalScrollDirection:e.scrollLeft<t?"forward":"backward",scrollLeft:t,scrollTop:o,scrollUpdateWasRequested:!0,verticalScrollDirection:e.scrollTop<o?"forward":"backward"}},this._resetIsScrollingDebounced)},m.scrollToItem=function(e){var t=e.align,o=void 0===t?"auto":t,i=e.columnIndex,n=e.rowIndex,s=this.props,d=s.columnCount,u=s.height,h=s.rowCount,p=s.width,g=this.state,f=g.scrollLeft,v=g.scrollTop,m=ao();void 0!==i&&(i=Math.max(0,Math.min(i,d-1))),void 0!==n&&(n=Math.max(0,Math.min(n,h-1)));var S=l(this.props,this._instanceProps),y=r(this.props,this._instanceProps)>p?m:0,w=S>u?m:0;this.scrollTo({scrollLeft:void 0!==i?a(this.props,i,o,f,this._instanceProps,w):f,scrollTop:void 0!==n?c(this.props,n,o,v,this._instanceProps,y):v})},m.componentDidMount=function(){var e=this.props,t=e.initialScrollLeft,o=e.initialScrollTop;if(null!=this._outerRef){var i=this._outerRef;"number"==typeof t&&(i.scrollLeft=t),"number"==typeof o&&(i.scrollTop=o)}this._callPropsCallbacks()},m.componentDidUpdate=function(){var e=this.props.direction,t=this.state,o=t.scrollLeft,i=t.scrollTop;if(t.scrollUpdateWasRequested&&null!=this._outerRef){var n=this._outerRef;if("rtl"===e)switch(uo()){case"negative":n.scrollLeft=-o;break;case"positive-ascending":n.scrollLeft=o;break;default:var s=n.clientWidth,l=n.scrollWidth;n.scrollLeft=l-s-o}else n.scrollLeft=Math.max(0,o);n.scrollTop=Math.max(0,i)}this._callPropsCallbacks()},m.componentWillUnmount=function(){null!==this._resetIsScrollingTimeoutId&&so(this._resetIsScrollingTimeoutId)},m.render=function(){var e=this.props,t=e.children,o=e.className,i=e.columnCount,n=e.direction,s=e.height,a=e.innerRef,c=e.innerElementType,d=e.innerTagName,u=e.itemData,h=e.itemKey,p=void 0===h?ho:h,g=e.outerElementType,f=e.outerTagName,v=e.rowCount,m=e.style,S=e.useIsScrolling,y=e.width,w=this.state.isScrolling,x=this._getHorizontalRangeToRender(),b=x[0],I=x[1],C=this._getVerticalRangeToRender(),T=C[0],R=C[1],O=[];if(i>0&&v)for(var j=T;j<=R;j++)for(var M=b;M<=I;M++)O.push((0,Ve.createElement)(t,{columnIndex:M,data:u,isScrolling:S?w:void 0,key:p({columnIndex:M,data:u,rowIndex:j}),rowIndex:j,style:this._getItemStyle(j,M)}));var E=l(this.props,this._instanceProps),D=r(this.props,this._instanceProps);return(0,Ve.createElement)(g||f||"div",{className:o,onScroll:this._onScroll,ref:this._outerRefSetter,style:Qt({position:"relative",height:s,width:y,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:n},m)},(0,Ve.createElement)(c||d||"div",{children:O,ref:a,style:{height:E,pointerEvents:w?"none":void 0,width:D}}))},m._callPropsCallbacks=function(){var e=this.props,t=e.columnCount,o=e.onItemsRendered,i=e.onScroll,n=e.rowCount;if("function"==typeof o&&t>0&&n>0){var s=this._getHorizontalRangeToRender(),l=s[0],r=s[1],a=s[2],c=s[3],d=this._getVerticalRangeToRender(),u=d[0],h=d[1],p=d[2],g=d[3];this._callOnItemsRendered(l,r,u,h,a,c,p,g)}if("function"==typeof i){var f=this.state,v=f.horizontalScrollDirection,m=f.scrollLeft,S=f.scrollTop,y=f.scrollUpdateWasRequested,w=f.verticalScrollDirection;this._callOnScroll(m,S,v,w,y)}},m._getHorizontalRangeToRender=function(){var e=this.props,t=e.columnCount,o=e.overscanColumnCount,s=e.overscanColumnsCount,l=e.overscanCount,r=e.rowCount,a=this.state,c=a.horizontalScrollDirection,d=a.isScrolling,u=a.scrollLeft,h=o||s||l||1;if(0===t||0===r)return[0,0,0,0];var p=i(this.props,u,this._instanceProps),g=n(this.props,p,u,this._instanceProps),f=d&&"backward"!==c?1:Math.max(1,h),v=d&&"forward"!==c?1:Math.max(1,h);return[Math.max(0,p-f),Math.max(0,Math.min(t-1,g+v)),p,g]},m._getVerticalRangeToRender=function(){var e=this.props,t=e.columnCount,o=e.overscanCount,i=e.overscanRowCount,n=e.overscanRowsCount,s=e.rowCount,l=this.state,r=l.isScrolling,a=l.verticalScrollDirection,c=l.scrollTop,d=i||n||o||1;if(0===t||0===s)return[0,0,0,0];var u=h(this.props,c,this._instanceProps),g=p(this.props,u,c,this._instanceProps),f=r&&"backward"!==a?1:Math.max(1,d),v=r&&"forward"!==a?1:Math.max(1,d);return[Math.max(0,u-f),Math.max(0,Math.min(s-1,g+v)),u,g]},t}(Ve.PureComponent)).defaultProps={direction:"ltr",itemData:void 0,useIsScrolling:!1},t}var go=function(e,t){e.children,e.direction,e.height,e.innerTagName,e.outerTagName,e.overscanColumnsCount,e.overscanCount,e.overscanRowsCount,e.width,t.instance},fo=function(e,t){var o=e.rowCount,i=t.rowMetadataMap,n=t.estimatedRowHeight,s=t.lastMeasuredRowIndex,l=0;if(s>=o&&(s=o-1),s>=0){var r=i[s];l=r.offset+r.size}return l+(o-s-1)*n},vo=function(e,t){var o=e.columnCount,i=t.columnMetadataMap,n=t.estimatedColumnWidth,s=t.lastMeasuredColumnIndex,l=0;if(s>=o&&(s=o-1),s>=0){var r=i[s];l=r.offset+r.size}return l+(o-s-1)*n},mo=function(e,t,o,i){var n,s,l;if("column"===e?(n=i.columnMetadataMap,s=t.columnWidth,l=i.lastMeasuredColumnIndex):(n=i.rowMetadataMap,s=t.rowHeight,l=i.lastMeasuredRowIndex),o>l){var r=0;if(l>=0){var a=n[l];r=a.offset+a.size}for(var c=l+1;c<=o;c++){var d=s(c);n[c]={offset:r,size:d},r+=d}"column"===e?i.lastMeasuredColumnIndex=o:i.lastMeasuredRowIndex=o}return n[o]},So=function(e,t,o,i){var n,s;return"column"===e?(n=o.columnMetadataMap,s=o.lastMeasuredColumnIndex):(n=o.rowMetadataMap,s=o.lastMeasuredRowIndex),(s>0?n[s].offset:0)>=i?yo(e,t,o,s,0,i):wo(e,t,o,Math.max(0,s),i)},yo=function(e,t,o,i,n,s){for(;n<=i;){var l=n+Math.floor((i-n)/2),r=mo(e,t,l,o).offset;if(r===s)return l;r<s?n=l+1:r>s&&(i=l-1)}return n>0?n-1:0},wo=function(e,t,o,i,n){for(var s="column"===e?t.columnCount:t.rowCount,l=1;i<s&&mo(e,t,i,o).offset<n;)i+=l,l*=2;return yo(e,t,o,Math.min(i,s-1),Math.floor(i/2),n)},xo=function(e,t,o,i,n,s,l){var r="column"===e?t.width:t.height,a=mo(e,t,o,s),c="column"===e?vo(t,s):fo(t,s),d=Math.max(0,Math.min(c-r,a.offset)),u=Math.max(0,a.offset-r+l+a.size);switch("smart"===i&&(i=n>=u-r&&n<=d+r?"auto":"center"),i){case"start":return d;case"end":return u;case"center":return Math.round(u+(d-u)/2);default:return n>=u&&n<=d?n:u>d||n<u?u:d}},bo=po({getColumnOffset:function(e,t,o){return mo("column",e,t,o).offset},getColumnStartIndexForOffset:function(e,t,o){return So("column",e,o,t)},getColumnStopIndexForStartIndex:function(e,t,o,i){for(var n=e.columnCount,s=e.width,l=mo("column",e,t,i),r=o+s,a=l.offset+l.size,c=t;c<n-1&&a<r;)c++,a+=mo("column",e,c,i).size;return c},getColumnWidth:function(e,t,o){return o.columnMetadataMap[t].size},getEstimatedTotalHeight:fo,getEstimatedTotalWidth:vo,getOffsetForColumnAndAlignment:function(e,t,o,i,n,s){return xo("column",e,t,o,i,n,s)},getOffsetForRowAndAlignment:function(e,t,o,i,n,s){return xo("row",e,t,o,i,n,s)},getRowOffset:function(e,t,o){return mo("row",e,t,o).offset},getRowHeight:function(e,t,o){return o.rowMetadataMap[t].size},getRowStartIndexForOffset:function(e,t,o){return So("row",e,o,t)},getRowStopIndexForStartIndex:function(e,t,o,i){for(var n=e.rowCount,s=e.height,l=mo("row",e,t,i),r=o+s,a=l.offset+l.size,c=t;c<n-1&&a<r;)c++,a+=mo("row",e,c,i).size;return c},initInstanceProps:function(e,t){var o=e,i={columnMetadataMap:{},estimatedColumnWidth:o.estimatedColumnWidth||50,estimatedRowHeight:o.estimatedRowHeight||50,lastMeasuredColumnIndex:-1,lastMeasuredRowIndex:-1,rowMetadataMap:{}};return t.resetAfterColumnIndex=function(e,o){void 0===o&&(o=!0),t.resetAfterIndices({columnIndex:e,shouldForceUpdate:o})},t.resetAfterRowIndex=function(e,o){void 0===o&&(o=!0),t.resetAfterIndices({rowIndex:e,shouldForceUpdate:o})},t.resetAfterIndices=function(e){var o=e.columnIndex,n=e.rowIndex,s=e.shouldForceUpdate,l=void 0===s||s;"number"==typeof o&&(i.lastMeasuredColumnIndex=Math.min(i.lastMeasuredColumnIndex,o-1)),"number"==typeof n&&(i.lastMeasuredRowIndex=Math.min(i.lastMeasuredRowIndex,n-1)),t._getItemStyleCache(-1),l&&t.forceUpdate()},i},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(e){e.columnWidth,e.rowHeight}}),Io=function(e,t){return e};function Co(e){var t,o=e.getItemOffset,i=e.getEstimatedTotalSize,n=e.getItemSize,s=e.getOffsetForIndexAndAlignment,l=e.getStartIndexForOffset,r=e.getStopIndexForStartIndex,a=e.initInstanceProps,c=e.shouldResetStyleCacheOnItemSizeChange,d=e.validateProps;return t=function(e){function t(t){var i;return(i=e.call(this,t)||this)._instanceProps=a(i.props,Zt(i)),i._outerRef=void 0,i._resetIsScrollingTimeoutId=null,i.state={instance:Zt(i),isScrolling:!1,scrollDirection:"forward",scrollOffset:"number"==typeof i.props.initialScrollOffset?i.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},i._callOnItemsRendered=void 0,i._callOnItemsRendered=io(function(e,t,o,n){return i.props.onItemsRendered({overscanStartIndex:e,overscanStopIndex:t,visibleStartIndex:o,visibleStopIndex:n})}),i._callOnScroll=void 0,i._callOnScroll=io(function(e,t,o){return i.props.onScroll({scrollDirection:e,scrollOffset:t,scrollUpdateWasRequested:o})}),i._getItemStyle=void 0,i._getItemStyle=function(e){var t,s=i.props,l=s.direction,r=s.itemSize,a=s.layout,d=i._getItemStyleCache(c&&r,c&&a,c&&l);if(d.hasOwnProperty(e))t=d[e];else{var u=o(i.props,e,i._instanceProps),h=n(i.props,e,i._instanceProps),p="horizontal"===l||"horizontal"===a,g="rtl"===l,f=p?u:0;d[e]=t={position:"absolute",left:g?void 0:f,right:g?f:void 0,top:p?0:u,height:p?"100%":h,width:p?h:"100%"}}return t},i._getItemStyleCache=void 0,i._getItemStyleCache=io(function(e,t,o){return{}}),i._onScrollHorizontal=function(e){var t=e.currentTarget,o=t.clientWidth,n=t.scrollLeft,s=t.scrollWidth;i.setState(function(e){if(e.scrollOffset===n)return null;var t=i.props.direction,l=n;if("rtl"===t)switch(uo()){case"negative":l=-n;break;case"positive-descending":l=s-o-n}return l=Math.max(0,Math.min(l,s-o)),{isScrolling:!0,scrollDirection:e.scrollOffset<l?"forward":"backward",scrollOffset:l,scrollUpdateWasRequested:!1}},i._resetIsScrollingDebounced)},i._onScrollVertical=function(e){var t=e.currentTarget,o=t.clientHeight,n=t.scrollHeight,s=t.scrollTop;i.setState(function(e){if(e.scrollOffset===s)return null;var t=Math.max(0,Math.min(s,n-o));return{isScrolling:!0,scrollDirection:e.scrollOffset<t?"forward":"backward",scrollOffset:t,scrollUpdateWasRequested:!1}},i._resetIsScrollingDebounced)},i._outerRefSetter=function(e){var t=i.props.outerRef;i._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},i._resetIsScrollingDebounced=function(){null!==i._resetIsScrollingTimeoutId&&so(i._resetIsScrollingTimeoutId),i._resetIsScrollingTimeoutId=lo(i._resetIsScrolling,150)},i._resetIsScrolling=function(){i._resetIsScrollingTimeoutId=null,i.setState({isScrolling:!1},function(){i._getItemStyleCache(-1,null)})},i}Jt(t,e),t.getDerivedStateFromProps=function(e,t){return To(e,t),d(e),null};var u=t.prototype;return u.scrollTo=function(e){e=Math.max(0,e),this.setState(function(t){return t.scrollOffset===e?null:{scrollDirection:t.scrollOffset<e?"forward":"backward",scrollOffset:e,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},u.scrollToItem=function(e,t){void 0===t&&(t="auto");var o=this.props,i=o.itemCount,n=o.layout,l=this.state.scrollOffset;e=Math.max(0,Math.min(e,i-1));var r=0;if(this._outerRef){var a=this._outerRef;r="vertical"===n?a.scrollWidth>a.clientWidth?ao():0:a.scrollHeight>a.clientHeight?ao():0}this.scrollTo(s(this.props,e,t,l,this._instanceProps,r))},u.componentDidMount=function(){var e=this.props,t=e.direction,o=e.initialScrollOffset,i=e.layout;if("number"==typeof o&&null!=this._outerRef){var n=this._outerRef;"horizontal"===t||"horizontal"===i?n.scrollLeft=o:n.scrollTop=o}this._callPropsCallbacks()},u.componentDidUpdate=function(){var e=this.props,t=e.direction,o=e.layout,i=this.state,n=i.scrollOffset;if(i.scrollUpdateWasRequested&&null!=this._outerRef){var s=this._outerRef;if("horizontal"===t||"horizontal"===o)if("rtl"===t)switch(uo()){case"negative":s.scrollLeft=-n;break;case"positive-ascending":s.scrollLeft=n;break;default:var l=s.clientWidth,r=s.scrollWidth;s.scrollLeft=r-l-n}else s.scrollLeft=n;else s.scrollTop=n}this._callPropsCallbacks()},u.componentWillUnmount=function(){null!==this._resetIsScrollingTimeoutId&&so(this._resetIsScrollingTimeoutId)},u.render=function(){var e=this.props,t=e.children,o=e.className,n=e.direction,s=e.height,l=e.innerRef,r=e.innerElementType,a=e.innerTagName,c=e.itemCount,d=e.itemData,u=e.itemKey,h=void 0===u?Io:u,p=e.layout,g=e.outerElementType,f=e.outerTagName,v=e.style,m=e.useIsScrolling,S=e.width,y=this.state.isScrolling,w="horizontal"===n||"horizontal"===p,x=w?this._onScrollHorizontal:this._onScrollVertical,b=this._getRangeToRender(),I=b[0],C=b[1],T=[];if(c>0)for(var R=I;R<=C;R++)T.push((0,Ve.createElement)(t,{data:d,key:h(R,d),index:R,isScrolling:m?y:void 0,style:this._getItemStyle(R)}));var O=i(this.props,this._instanceProps);return(0,Ve.createElement)(g||f||"div",{className:o,onScroll:x,ref:this._outerRefSetter,style:Qt({position:"relative",height:s,width:S,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:n},v)},(0,Ve.createElement)(r||a||"div",{children:T,ref:l,style:{height:w?"100%":O,pointerEvents:y?"none":void 0,width:w?O:"100%"}}))},u._callPropsCallbacks=function(){if("function"==typeof this.props.onItemsRendered&&this.props.itemCount>0){var e=this._getRangeToRender(),t=e[0],o=e[1],i=e[2],n=e[3];this._callOnItemsRendered(t,o,i,n)}if("function"==typeof this.props.onScroll){var s=this.state,l=s.scrollDirection,r=s.scrollOffset,a=s.scrollUpdateWasRequested;this._callOnScroll(l,r,a)}},u._getRangeToRender=function(){var e=this.props,t=e.itemCount,o=e.overscanCount,i=this.state,n=i.isScrolling,s=i.scrollDirection,a=i.scrollOffset;if(0===t)return[0,0,0,0];var c=l(this.props,a,this._instanceProps),d=r(this.props,c,a,this._instanceProps),u=n&&"backward"!==s?1:Math.max(1,o),h=n&&"forward"!==s?1:Math.max(1,o);return[Math.max(0,c-u),Math.max(0,Math.min(t-1,d+h)),c,d]},t}(Ve.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},t}var To=function(e,t){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,t.instance},Ro=function(e,t,o){var i=e.itemSize,n=o.itemMetadataMap,s=o.lastMeasuredIndex;if(t>s){var l=0;if(s>=0){var r=n[s];l=r.offset+r.size}for(var a=s+1;a<=t;a++){var c=i(a);n[a]={offset:l,size:c},l+=c}o.lastMeasuredIndex=t}return n[t]},Oo=function(e,t,o,i,n){for(;i<=o;){var s=i+Math.floor((o-i)/2),l=Ro(e,s,t).offset;if(l===n)return s;l<n?i=s+1:l>n&&(o=s-1)}return i>0?i-1:0},jo=function(e,t,o,i){for(var n=e.itemCount,s=1;o<n&&Ro(e,o,t).offset<i;)o+=s,s*=2;return Oo(e,t,Math.min(o,n-1),Math.floor(o/2),i)},Mo=function(e,t){var o=e.itemCount,i=t.itemMetadataMap,n=t.estimatedItemSize,s=t.lastMeasuredIndex,l=0;if(s>=o&&(s=o-1),s>=0){var r=i[s];l=r.offset+r.size}return l+(o-s-1)*n},Eo=Co({getItemOffset:function(e,t,o){return Ro(e,t,o).offset},getItemSize:function(e,t,o){return o.itemMetadataMap[t].size},getEstimatedTotalSize:Mo,getOffsetForIndexAndAlignment:function(e,t,o,i,n,s){var l=e.direction,r=e.height,a=e.layout,c=e.width,d="horizontal"===l||"horizontal"===a?c:r,u=Ro(e,t,n),h=Mo(e,n),p=Math.max(0,Math.min(h-d,u.offset)),g=Math.max(0,u.offset-d+u.size+s);switch("smart"===o&&(o=i>=g-d&&i<=p+d?"auto":"center"),o){case"start":return p;case"end":return g;case"center":return Math.round(g+(p-g)/2);default:return i>=g&&i<=p?i:i<g?g:p}},getStartIndexForOffset:function(e,t,o){return function(e,t,o){var i=t.itemMetadataMap,n=t.lastMeasuredIndex;return(n>0?i[n].offset:0)>=o?Oo(e,t,n,0,o):jo(e,t,Math.max(0,n),o)}(e,o,t)},getStopIndexForStartIndex:function(e,t,o,i){for(var n=e.direction,s=e.height,l=e.itemCount,r=e.layout,a=e.width,c="horizontal"===n||"horizontal"===r?a:s,d=Ro(e,t,i),u=o+c,h=d.offset+d.size,p=t;p<l-1&&h<u;)p++,h+=Ro(e,p,i).size;return p},initInstanceProps:function(e,t){var o={itemMetadataMap:{},estimatedItemSize:e.estimatedItemSize||50,lastMeasuredIndex:-1};return t.resetAfterIndex=function(e,i){void 0===i&&(i=!0),o.lastMeasuredIndex=Math.min(o.lastMeasuredIndex,e-1),t._getItemStyleCache(-1),i&&t.forceUpdate()},o},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(e){e.itemSize}});class Do extends o.React.Component{constructor(){super(...arguments),this.shouldComponentUpdateExcept=(e,t,o,i=[])=>{let n=!1;return this.props&&Object.keys(this.props).some(t=>!o.includes(t)&&(this.props[t]!==e[t]&&(n=!0,!0))),this.state&&Object.keys(this.state).some(e=>!i.includes(e)&&(this.state[e]!==t[e]&&(n=!0,!0))),n},this.formatMessage=(e,t)=>this.props.formatMessage(e,t),this.getStyle=e=>{const{widgetId:t,config:i,appMode:n}=this.props,s=i.cardConfigs[S.Selected].selectionMode!==r.None,l=this.checkIsBackgroundTransparent(e);return o.css`
      ${"&.list-card-"+t} {
        padding: 0;
        border: 0;
        background-color: transparent;
        .list-card-content {
          width: 100%;
          height: 100%;
          overflow: hidden;
        }
      }
      .list-card-content {
        background-color: var(--sys-color-surface-paper);
      }
      .flex-row-layout {
        width: 100%;
      }
      &.surface-1 {
        border: none !important;
        background: ${l&&"none !important"};
      }
      .list-item-con {
        overflow: hidden;
      }
      ${"&.list-card-"+t}:hover {
        ${window.jimuConfig.isInBuilder&&n===o.AppMode.Design||!s?"":"cursor: pointer;"}
      }
      .card-editor-mask {
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        z-index: 100;
      }
      .jimu-link {
        text-align: left;
      }
    `}}checkIsBackgroundTransparent(e){var t,o,i,n;const{config:s}=this.props;return"rgba(0,0,0,0)"===(null===(n=null===(i=null===(o=null===(t=null==s?void 0:s.cardConfigs)||void 0===t?void 0:t[e])||void 0===o?void 0:o.backgroundStyle)||void 0===i?void 0:i.background)||void 0===n?void 0:n.color)}}class Lo extends Do{constructor(e){super(e),this.handleItemChange=e=>{const{onChange:t,active:o,record:i}=this.props;if(o){this.checkIsClickItemButtonOrA(e)||"linkClick"===e.exbEventType||t(i)}else t(i);"linkClick"===e.exbEventType&&delete e.exbEventType},this.handleContentClick=e=>{const{updateCanClickLinkWhenClickItem:t,active:o,record:i}=this.props;if(o){this.checkIsClickItemButtonOrA(e)||"linkClick"===e.exbEventType||t(i)}else t(i)},this.checkIsClickItemButtonOrA=e=>{const t=e.target;if(!t)return!1;const o=e.target&&e.target.tagName||"",i=t.closest("button")||t.closest("a");return"a"===o.toLowerCase()||"button"===o.toLowerCase()||i},this.handleItemKeyDown=e=>{"Enter"!==e.key&&" "!==e.key||this.handleItemChange(e)},this.handleLinkClick=e=>{e.stopPropagation()},this.isItemAccept=(e,t)=>{const{isEditing:i,builderSupportModules:n,widgetId:s,appMode:l}=this.props;return function(e,t,o,i,n){var s,l;if(!e)return!1;const r=null===(l=null===(s=e.manifest)||void 0===s?void 0:s.properties)||void 0===l?void 0:l.supportRepeat,a=n.jimuForBuilderLib.getAppConfigAction().appConfig,c=n.widgetModules.selectionInList;return o&&r&&(!e.layoutInfo||e.layoutInfo&&c(e.layoutInfo,i,a,!1))}(e,0,l===o.AppMode.Express?window.jimuConfig.isInBuilder:i,s,n)},this.onClickCapture=e=>{clearTimeout(this.clickCaptureTimeoutRef),e.target&&this.layoutRef.current.contains(e.target)&&(this.clickCaptureTimeoutRef=setTimeout(()=>{this.handleItemChange(e)}))},this.getLayoutAndCurrentStatus=()=>{const{active:e,layouts:t,appMode:i,isHover:n,config:s}=this.props,{cardConfigs:l}=s,a=l[S.Selected].selectionMode!==r.None,c=l[S.Hover].enable;let d=S.Default;let u;return window.jimuConfig.isInBuilder&&i===o.AppMode.Design?u=t[S.Default]:(u=t[S.Default],c&&n&&(d=S.Hover,u=null==t?void 0:t[S.Hover]),a&&e&&(d=S.Selected,u=null==t?void 0:t[S.Selected])),{currentStatus:d,layout:u}},this.getBackgroundStyle=()=>{const{active:e,appMode:t,isHover:i,config:n,dynamicStyleOfCard:s,previewDynamicStyle:l,builderStatus:a,theme:c}=this.props,{cardConfigs:d}=n,u=d[S.Selected].selectionMode!==r.None,h=d[S.Hover].enable,p=window.jimuConfig.isInBuilder;let g;return l&&a?(g=ie(d[a].backgroundStyle,null==s?void 0:s[a],c),g):(p&&t===o.AppMode.Design?g=ie(d[S.Default].backgroundStyle,null==s?void 0:s[S.Default],c):(g=ie(d[S.Default].backgroundStyle,null==s?void 0:s[S.Default],c),h&&i&&(g=ie(d[S.Hover].backgroundStyle,null==s?void 0:s[S.Hover],c)),u&&e&&(g=ie(d[S.Selected].backgroundStyle,null==s?void 0:s[S.Selected],c))),g)},this.layoutRef=o.React.createRef(),this.linkRef=o.React.createRef()}shouldComponentUpdate(e,t){let i=this.shouldComponentUpdateExcept(e,t,["listStyle"]);return i=i||!o.utils.isDeepEqual(this.props.listStyle,e.listStyle),i}render(){var i;const{active:n,widgetId:s,listStyle:l,layouts:a,appMode:c,itemIdex:d,LayoutEntry:u,config:h,className:p,handleListMouseLeave:g,handleListMouseMove:f}=this.props,{cardConfigs:v}=h,m=v[S.Selected].selectionMode!==r.None,y=window.jimuConfig.isInBuilder&&c===o.AppMode.Express,{layout:w,currentStatus:x}=this.getLayoutAndCurrentStatus(),b=this.getBackgroundStyle(),I=(null===(i=v[x])||void 0===i?void 0:i.listLayout)||e.CUSTOM,C=a[S.Default],T=I===e.AUTO?C:w,R=Object.assign({},D.styleUtils.toCSSStyle(b||{})),O=Object.assign({},D.styleUtils.toCSSStyle({borderRadius:null==b?void 0:b.borderRadius}));return(0,t.jsx)(D.ListGroupItem,{active:m&&n,css:this.getStyle(x),style:Object.assign(Object.assign({},l),O),tabIndex:0,onClickCapture:this.onClickCapture,onClick:this.handleContentClick,className:(0,o.classNames)("jimu-outline-inside",`list-card-${s}`,p),role:"option",tag:"div",onKeyDown:this.handleItemKeyDown,"aria-describedby":"describeByMessage","aria-selected":m&&n,children:(0,t.jsx)("div",{className:"list-card-content d-flex",onMouseLeave:g,onMouseMove:()=>{f(d)},style:R,children:(0,t.jsx)("div",{className:"position-relative h-100 w-100",children:(0,t.jsxs)("div",{className:"d-flex w-100 h-100 list-item-con",ref:this.layoutRef,children:[y&&(0,t.jsx)(u,{isItemAccepted:this.isItemAccept,isRepeat:!0,layouts:T,isInWidget:!0}),!y&&(0,t.jsx)(A.LayoutEntry,{layouts:T})]})})})})}}const{useRef:ko,useEffect:No,Fragment:zo}=o.React,_o=e=>{const i=ko((0,o.Immutable)({})),{id:n,cardConfig:s,useDataSources:l,dynamicStyleOfCard:r,handleDynamicStyleChange:a}=e;No(()=>{i.current=r},[r]);return(0,t.jsx)(zo,{children:(e=>Object.keys(e).filter(t=>{var o;const i=e[t],n=(null==i?void 0:i.dynamicStyleConfig)||{};return(null==i?void 0:i.enableDynamicStyle)&&(null===(o=Object.keys(n))||void 0===o?void 0:o.length)>0}))(s).map(e=>{var r;return(0,t.jsx)(o.DynamicStyleResolverComponent,{widgetId:n,useDataSources:l,dynamicStyleConfig:null===(r=s[e])||void 0===r?void 0:r.dynamicStyleConfig,onChange:t=>{((e,t)=>{const o=i.current.setIn([t],e);i.current=o,a(o)})(t,e)}},e)})})},{useEffect:Po}=o.React,Ao=e=>{const i=o.hooks.useTranslation(D.defaultMessages),{config:n,id:s,recordIndex:l,previewDynamicStyle:r,updatePreviewDynamicStyle:a}=e,{records:c,showLoading:d,currentCardSize:u}=M(),h=o.ReactRedux.useSelector(e=>{var t,o,i;return"number"==typeof(null===(i=null===(o=null===(t=null==e?void 0:e.dynamicStyleState)||void 0===t?void 0:t.previewConditionInfo)||void 0===o?void 0:o[s])||void 0===i?void 0:i.conditionId)}),p=o.ReactRedux.useSelector(e=>{var t,o,i;return null===(i=null===(o=null===(t=null==e?void 0:e.dynamicStyleState)||void 0===t?void 0:t.previewRepeatedRecordInfo)||void 0===o?void 0:o[s])||void 0===i?void 0:i.recordIndex}),g=o.ReactRedux.useSelector(e=>{var t;return null===(t=null==e?void 0:e.appRuntimeInfo)||void 0===t?void 0:t.appMode}),f=o.React.useCallback(()=>{const{isInBuilder:e}=window.jimuConfig,t=!c||c.length<1;return e&&h&&!(!d&&t)&&!r&&g!==o.AppMode.Design},[h,c,d,r,g]);Po(()=>{a(l===p&&h)},[p,l,h,a]);const v=o.css`
    .list-item-mask {
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 10;
      background-color: rgba(0, 0, 0, 0.5);
    }
    .space-mask {
      &::before, &::after{
        display: block;
        content: '';
        position: absolute;
        z-index: 10;
        background-color: rgba(0, 0, 0, 0.5);
      }
      &::before{
        top: ${u.height}px;
        left: 0;
        right: 0;
        bottom: 0;
      }
      &::after {
        top: 0;
        left: ${u.width}px;
        right: 0;
        bottom: 0;
      }
      &.space-mask-GRID::after {
        bottom: ${n.verticalSpace}px;
      }
    }
    .preview-remind {
      white-space: nowrap;
      z-index: 12;
      background-color: var(--sys-color-info-dark);
      color: var(--sys-color-info-text);
      height: 24px;
      line-height: 24px;
      font-size: 12px;
      top: ${u.height}px;
      left: 0;
      transform: translateZ(0);
    }
    .preview-remind-COLUMN {
      top: auto;
      bottom: 0;
      left: ${u.width}px;
    }
  `;return(0,t.jsxs)("div",{css:v,children:[f()&&(0,t.jsx)("div",{className:(0,o.classNames)("list-item-mask position-absolute",`list-item-mask-${null==n?void 0:n.layoutType}`)}),r&&(0,t.jsxs)(o.React.Fragment,{children:[g!==o.AppMode.Design&&(0,t.jsx)("div",{className:(0,o.classNames)("space-mask",`space-mask-${null==n?void 0:n.layoutType}`)}),(0,t.jsx)("div",{className:(0,o.classNames)("preview-remind pl-2 pr-2 position-absolute",`preview-remind-${null==n?void 0:n.layoutType}`),children:i("conditionalStylePreview")})]})]})},{useRef:Bo,useState:Fo,Fragment:Ho}=o.React;let Wo;const $o=e=>{var i,n,s;const l=o.ReactRedux.useSelector(e=>{var t;return null===(t=null==e?void 0:e.appRuntimeInfo)||void 0===t?void 0:t.appMode}),{data:r,index:a,style:c,isScrolling:d,columnIndex:u,rowIndex:h}=e,g=Bo(0),f=Bo({}),[v,m]=Fo((0,o.Immutable)({})),[S,y]=Fo({}),[w,x]=Fo(!1);if(!Wo){const{builderSupportModules:e}=(null==r?void 0:r[0])||{};Wo=null===(i=null==e?void 0:e.widgetModules)||void 0===i?void 0:i.ListCardEditor}const b=o.React.useCallback((e,t,i,n)=>{if(!(null==e?void 0:e[0]))return!1;return 0===I(e,t,i,n)&&window.jimuConfig.isInBuilder&&l===o.AppMode.Design},[l]),I=(e,t,o,i)=>{if(!(null==e?void 0:e[0]))return 0;const{config:n,widgetRect:s,currentCardSize:l}=e[0],r={rowIndex:i||0,columnIndex:o||0,config:n,widgetRect:s,currentCardSize:l};return(null==n?void 0:n.layoutType)===p.GRID?ge(r):t},C=o.React.useCallback((e,t,o,i)=>{const n=I(e,t,o,i);return(null==e?void 0:e.length)>=n+1},[]);g.current=I(r,a,u,h);const T=o.React.useMemo(()=>b(r,a,u,h),[u,r,b,a,h]),R=o.React.useMemo(()=>C(r,a,u,h),[u,r,C,a,h]),O=o.React.useMemo(()=>I(r,a,u,h),[u,r,a,h]),j=e=>{const{config:t}=e[0];let o;switch(null==t?void 0:t.layoutType){case p.Column:o={width:parseFloat(c.width)-t.space+"px",height:"100%"};break;case p.Row:o={width:"100%",height:parseFloat(c.height)-t.space+"px"};break;case p.GRID:o={height:parseFloat(c.height)-(null==t?void 0:t.verticalSpace)+"px",width:parseFloat(null==c?void 0:c.width)-(null==t?void 0:t.horizontalSpace)+"px"}}return o},M=(e,t)=>Object.assign(Object.assign({},e[g.current]),{dynamicStyleOfCard:t});(0,Ve.useEffect)(()=>{E(r)},[r,a,u,h]);const E=e=>{const t=e[g.current],o={widgetId:null==t?void 0:t.widgetId,dataSourceId:null==t?void 0:t.datasourceId,recordIndex:null==t?void 0:t.index,record:null==t?void 0:t.record},i=function(e,t){let o=!0;if(e)Object.keys(e).some(i=>t?e[i]!==t[i]&&(o=!1,!0):(o=!1,!0));else if(t)return!1;return o}(o,f.current);i||(f.current=o,y(o))},D=r[g.current];return(0,t.jsx)(Ho,{children:R&&(0,t.jsx)("div",{style:(e=>{const{config:t,recordLength:o,widgetRect:i,currentCardSize:n}=e[0];let s=c;const l=u||0,r=h||0,d=pe(o,t,i,n),g=he(t,i,n),f=o-1===a;switch(null==t?void 0:t.layoutType){case p.Column:s=Object.assign(Object.assign({},s),{width:f?parseFloat(s.width)-t.space+"px":`${parseFloat(s.width)}px`});break;case p.Row:s=Object.assign(Object.assign({},s),{height:f?parseFloat(s.height)-t.space+"px":`${parseFloat(s.height)}px`});break;case p.GRID:s=Object.assign(Object.assign({},s),{height:d===r+1?parseFloat(s.height)-(null==t?void 0:t.verticalSpace)+"px":`${parseFloat(s.height)}px`,width:g===l+1?parseFloat(null==s?void 0:s.width)-(null==t?void 0:t.horizontalSpace)+"px":`${parseFloat(null==s?void 0:s.width)}px`})}return s})(r),children:(0,t.jsx)(o.RepeatedDataSourceProvider,{data:S,children:(0,t.jsxs)(Ho,{children:[0===O&&Wo&&window.jimuConfig.isInBuilder&&(0,t.jsx)(Wo,Object.assign({},M(r,v),{listStyle:j(r),itemIdex:g.current,isScrolling:d,previewDynamicStyle:w,className:T?"":"sr-only"})),!T&&(0,t.jsx)(Lo,Object.assign({},M(r,v),{listStyle:j(r),itemIdex:g.current,isScrolling:d,previewDynamicStyle:w})),(null==D?void 0:D.record)&&(null===(n=null==D?void 0:D.config)||void 0===n?void 0:n.cardConfigs)&&(0,t.jsxs)(Ho,{children:[(0,t.jsx)(_o,{cardConfig:null===(s=null==D?void 0:D.config)||void 0===s?void 0:s.cardConfigs,id:null==D?void 0:D.widgetId,dynamicStyleOfCard:v,useDataSources:null==D?void 0:D.useDataSources,handleDynamicStyleChange:e=>{m(e)}}),(0,t.jsx)(Ao,{config:null==D?void 0:D.config,id:null==D?void 0:D.widgetId,recordIndex:g.current,previewDynamicStyle:w,updatePreviewDynamicStyle:e=>{x(e)}})]})]})})})})},{useRef:Uo,useState:Go}=o.React,Vo=e=>{var i;const{useDataSources:n,appMode:s,linkParam:l,widgetId:r,queryObject:a,children:c,role:d,changeIsCanClickLink:u}=e,h=Uo(null),p=Uo(null),g=o.React.useContext(o.jimuHistory.HistoryContext),[f,v]=Go(!1),[m,S]=Go(null),y=D.hooks.useApplyLinkResult(),w=e=>{if(u&&!u())return;const t=window.jimuConfig.isInBuilder;if(s===o.AppMode.Design&&t)return!1;const i=I(e),n=b();if(!i&&(null==l?void 0:l.linkType)&&(null==l?void 0:l.linkType)!==o.LinkType.None){const i=R(a);if(n){if(t)return x(),!1;"_self"===l.openType?window.location.href=i.linkTo.value:i.linkTo.value&&window.open(i.linkTo.value,l.openType)}else if((null==l?void 0:l.linkType)===o.LinkType.Block)h.current.click();else{if(t&&(null==l?void 0:l.linkType)===o.LinkType.PrintPreview)return x(),!1;y({evt:e,linkTo:i.linkTo,target:i.target,replace:!1,queryObject:i.queryObject})}}"linkClick"===e.exbEventType&&delete e.exbEventType},x=()=>{clearTimeout(p.current),v(!0),setTimeout(()=>{v(!1)},3e3)},b=o.React.useCallback(()=>{var e,t;let i=!1;if((null==l?void 0:l.linkType)===o.LinkType.WebAddress){const n=m||l.value;n?i=o.urlUtils.isAbsoluteUrl(n):(null===(e=null==l?void 0:l.expression)||void 0===e?void 0:e.name)&&(i=o.urlUtils.isAbsoluteUrl(null===(t=null==l?void 0:l.expression)||void 0===t?void 0:t.name))}return i},[l,m]),I=e=>{const t=e.target;return C(t,e)||C(null==t?void 0:t.parentNode,e)},C=(e,t)=>{if(!e)return!1;const o=null==e?void 0:e.getAttribute("z-index"),i=null==e?void 0:e.role,n=e&&e.tagName||"",s="button"===n.toLowerCase()||"button"===i,l="a"===n.toLowerCase()||"linkClick"===t.exbEventType,r="input"===n.toLowerCase()||"input"===i;return s||l||!!o&&o>-1||r},T=o.css`
    .list-clear-background {
      background: transparent !important;
    }
    .list-link {
      position: absolute;
      left: 0;
      top: 0;
      right: 0;
      bottom: 0;
    }
  `,R=o.React.useCallback(e=>{const t=null==l?void 0:l.openType,i={linkType:null==l?void 0:l.linkType,value:null==l?void 0:l.value};let n=e;return(null==l?void 0:l.linkType)===o.LinkType.WebAddress&&(i.value=m||(null==i?void 0:i.value),n=void 0),{queryObject:n,target:t,linkTo:i}},[l,m]),O=e=>{e.stopPropagation()},j=o.React.useCallback(()=>b()||(null==l?void 0:l.linkType)===o.LinkType.PrintPreview,[b,null==l?void 0:l.linkType]);return(0,t.jsxs)("div",{className:"w-100 h-100","aria-label":null==e?void 0:e["aria-label"],role:d,onClick:w,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||w(e)},css:T,children:[(()=>{var e;const i=R(a),n=null===(e=null==i?void 0:i.linkTo)||void 0===e?void 0:e.linkType;return n&&n!==o.LinkType.None&&(0,t.jsx)(D.Link,{className:"p-0 w-100 h-100 border-0 list-clear-background list-link",ref:h,unstyled:!0,to:i.linkTo,target:i.target,queryObject:i.queryObject,onClick:O,tabIndex:-1})})(),c,n&&(0,t.jsx)(o.ExpressionResolverComponent,{useDataSources:n,expression:null==l?void 0:l.expression,onChange:e=>{if(e.isSuccessful)S(e.value);else{S("")}},widgetId:r}),window.jimuConfig.isInBuilder&&j()&&(0,t.jsx)(D.LinkTip,{reference:null===(i=h.current)||void 0===i?void 0:i.id,open:f,href:(()=>{const e=R(a);return o.urlUtils.getHrefFromLinkTo(e.linkTo,a,g&&g.location)||""})()})]})};var qo=function(e,t){var o={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(o[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(o[i[n]]=e[i[n]])}return o};const{useRef:Ko,forwardRef:Yo,useEffect:Qo,useState:Zo,Fragment:Xo}=o.React,Jo=e=>{const i=(0,B.useTheme)(),n=o.hooks.useTranslation(Se,D.defaultMessages,o.defaultMessages),s=Ko(null),l=Ko(null),a=Ko(!0),c=Ko(null),d=Ko(null),u=Ko(null),h=Ko(!1),g=E(),{dataSource:f,records:v,currentCardSize:m,widgetRect:y,pageSize:w,showLoading:x,isShowEditingMask:b}=M(),I=o.ReactRedux.useSelector(e=>null==e?void 0:e.browserSizeMode),C=o.ReactRedux.useSelector(e=>null==e?void 0:e.queryObject),T=o.ReactRedux.useSelector(e=>{var t;return null===(t=null==e?void 0:e.appRuntimeInfo)||void 0===t?void 0:t.appMode}),R=o.ReactRedux.useSelector(e=>e.appContext.isRTL);d.current=I,u.current=T;const{useDataSources:O,listProps:j,hideCardTool:L,LayoutEntry:k}=e,{id:N,config:z,selectionIsInSelf:_,builderStatus:P,builderSupportModules:A}=j,{handleListScroll:F,handleResizeCard:H,handleListKeyUp:W,selectRecordsAndPublishMessageAction:$,resetListElement:G,toggleCardTool:V,setListOutDivRef:q,onItemsRendered:K,setListRef:Y,scrollToEndCallback:Q,getListSize:Z}=e,[X,J]=Zo(-1);Qo(()=>{clearTimeout(c.current),c.current=setTimeout(()=>{G(!0)})},[m,y,i]),Qo(()=>{J(-1)},[T]),Qo(()=>{me()},[v]);const ee=o.React.useCallback(e=>{if(!f||!e||!(null==e?void 0:e.getId))return;let t=f.getSelectedRecords()||[];if(z.cardConfigs[S.Selected].selectionMode&&z.cardConfigs[S.Selected].selectionMode!==r.None){const o=null==e?void 0:e.getId(),i=t.find(e=>e.getId()===o);z.cardConfigs[S.Selected].selectionMode===r.Single?i?($([]),g({type:"SET_SHOW_SELECTION_ONLY",value:!1})):$([e]):(t=i?t.filter(e=>e.getId()!==o):t.concat([e]),$(t))}},[z,f,g,$]),te=o.React.useCallback(e=>{if(!f||!e||!(null==e?void 0:e.getId))return;const t=f.getSelectedRecords()||[];if(z.cardConfigs[S.Selected].selectionMode&&z.cardConfigs[S.Selected].selectionMode!==r.None){const o=null==e?void 0:e.getId(),i=t.find(e=>e.getId()===o);a.current=!i}},[f,z]),oe=o.React.useCallback(e=>{const{config:t,selectionIsInSelf:o,selectionIsSelf:i}=e;return ne(T,t,i,o)},[T]),ie=o.React.useCallback(()=>{oe(j)||J(-1)},[oe,j]),se=o.hooks.useEventCallback(e=>{oe(j)||e!==X&&J(e)}),le=()=>window.jimuConfig.isInBuilder&&T===o.AppMode.Design?0:w,re=o.React.useCallback(()=>U(z,P,I),[z,P,I]),ae=o.React.useCallback(()=>{window.jimuConfig.isInBuilder&&A.widgetModules.selectSelf(N)},[A,N]),ce=o.React.useCallback(()=>{_&&ae()},[ae,_]),de=o.React.useCallback(e=>{var t,o,s;const{id:l,config:r,builderSupportModules:a,layouts:c}=e,h=(null===(o=null===(t=re())||void 0===t?void 0:t.width)||void 0===o?void 0:o.unit)===D.DistanceUnits.PERCENTAGE;return{id:l,widgetId:l,config:r,recordLength:(null==v?void 0:v.length)||0,widgetRect:y,currentCardSize:m,useDataSources:O,handleListMouseMove:se,handleListMouseLeave:ie,browserSizeMode:d.current,isRTL:R,builderSupportModules:a,interact:window.jimuConfig.isInBuilder&&(null===(s=null==a?void 0:a.widgetModules)||void 0===s?void 0:s.interact),appMode:u.current,theme:i,LayoutEntry:k,layouts:c,datasourceId:null==f?void 0:f.id,isWidthPercentage:h,formatMessage:n,selectCard:ce,handleResizeCard:H,onChange:ee,updateCanClickLinkWhenClickItem:te,toggleCardTool:V}},[k,m,null==f?void 0:f.id,re,ee,ie,se,H,R,n,null==v?void 0:v.length,ce,i,V,te,O,y]),fe=o.React.useCallback(e=>{const t=(null==z?void 0:z.horizontalSpace)||0;return((null==m?void 0:m.width)||0)+t},[m,z]),ve=o.React.useCallback(e=>{e?h.current=e:setTimeout(()=>{h.current=e},1e3),Q(e)},[Q]),me=o.React.useCallback(()=>{const e=`bottomBoundary${N}`;if(!l.current||document.getElementById(e))return;const t=document.createElement("div");t.id=e,t.className="bottom-boundary",t.setAttribute("data-testid","bottom-boundary");l.current.getElementsByTagName("div")[0].appendChild(t),function(e,t,o,i){const n=new IntersectionObserver(function(e,t){o(e[0].isIntersecting)},i||{root:t});n.observe(e)}(document.getElementById(e),l.current,ve)},[N,ve]),ye=e=>{q(e),l.current=e,me()},we=o.React.useCallback(e=>{g({type:"SET_IS_RESIZING_CARD",value:e})},[g]),xe=o.React.useCallback(e=>{"ArrowDown"===e.key&&(h.current||x)&&e.preventDefault()},[x]),be=o.React.useCallback((e,t,o,i)=>{const{config:n,selectionIsInSelf:s,selectionIsSelf:l,builderStatus:r}=t,a=(f&&n.isItemStyleConfirm?f.getSelectedRecordIds():[]).map(e=>e+"");return e&&e.map((e,c)=>{const d={hideCardTool:i,selectionIsList:l,selectionIsInList:s,isEditing:oe(t),builderStatus:r,lockItemRatio:n.lockItemRatio,changeIsResizingCard:we};return Object.assign(Object.assign(Object.assign({index:c,isHover:o===c,record:n.isItemStyleConfirm?e:void 0},de(t)),{active:!e.fake&&n.isItemStyleConfirm&&f&&a.includes(e.getId())}),d)})},[we,f,de,oe]),Ie=()=>{const e=(null==z?void 0:z.layoutType)===p.GRID?null==z?void 0:z.verticalSpace:null==z?void 0:z.space;if(s.current!==e)return s.current=e,Yo((o,i)=>{var{style:n}=o,s=qo(o,["style"]);return(0,t.jsx)("div",Object.assign({ref:i,style:Object.assign(Object.assign({},n),{height:parseFloat(n.height)-(z.layoutType===p.Column?0:e)+"px",width:parseFloat(n.width)-(z.layoutType!==p.Column?0:e)+"px"})},s))})};return(0,t.jsx)(Xo,{children:(0,t.jsx)("div",{className:"widget-list-link-con position-relative","data-testid":"listContainer",onKeyDown:xe,onKeyUp:W,children:(0,t.jsxs)(Vo,{widgetId:N,appMode:T,linkParam:z.linkParam,queryObject:C,useDataSources:O,changeIsCanClickLink:()=>a.current,role:"listbox","aria-label":n("listArea"),children:[(null==z?void 0:z.layoutType)===p.GRID&&(0,t.jsx)(bo,{className:(0,o.classNames)("widget-list-list",{"hide-list":!v||0===(null==v?void 0:v.length),"hide-will-change":b}),ref:Y,useIsScrolling:!0,outerRef:ye,direction:R?"rtl":"ltr",itemCount:v.length,overscanCount:le(),itemKey:e=>((e,t,o,i,n)=>{const{columnIndex:s,rowIndex:l}=e,r=ge({rowIndex:l,columnIndex:s,config:o,widgetRect:i,currentCardSize:n}),a=t[r];return`${(null==a?void 0:a.getId)&&(null==a?void 0:a.getId())||r+100}`})(e,v,z,y,m),columnCount:he(z,y,m),columnWidth:fe,rowCount:pe(v.length,z,y,m),rowHeight:e=>((e,t,o=0)=>Math.floor(t)+o)(0,m.height,null==z?void 0:z.verticalSpace),width:Z().width,height:Z().height,onItemsRendered:K,itemData:be(v,j,X,L),innerElementType:Ie(),onScroll:F,children:$o}),(null==z?void 0:z.layoutType)!==p.GRID&&(0,t.jsx)(Eo,{className:(0,o.classNames)("widget-list-list",{"hide-list":!v||0===(null==v?void 0:v.length),"hide-will-change":b}),ref:Y,useIsScrolling:!0,outerRef:ye,direction:R?"rtl":"ltr",role:"listbox",layout:z.layoutType===p.Column?"horizontal":"vertical",itemCount:v.length,overscanCount:le(),itemKey:e=>{const t=v[e];return`${(null==t?void 0:t.getId)&&(null==t?void 0:t.getId())||e}`},width:Z().width,height:Z().height,onItemsRendered:K,itemData:be(v,j,X,L),innerElementType:Ie(),itemSize:e=>ue(z,m),onScroll:F,children:$o})]})})})},{useEffect:ei,useState:ti,useRef:oi}=o.React,ii=e=>{const i=o.hooks.useTranslation(D.defaultMessages,o.defaultMessages),n=oi(null),{dataSource:s,dsInfo:l,widgetRect:r}=M(),[a,c]=ti(null),[d,u]=ti(null),[h,p]=ti(null);ei(()=>{clearTimeout(n.current),n.current=setTimeout(()=>{g(r,s,null==l?void 0:l.status)},100)},[r,s,l]);const g=o.hooks.useEventCallback((e,t,i)=>{var n;const s=(null==e?void 0:e.width)||620,l=s<321?s-36:s/2,r=i===o.DataSourceStatus.NotReady?0:null==t?void 0:t.count,a=i===o.DataSourceStatus.NotReady?0:null===(n=null==t?void 0:t.getSelectedRecords())||void 0===n?void 0:n.length;c(f(r)),u(f(a)),p(l)}),f=e=>e?o.utils.formatNumber(e).join(""):"0";return(0,t.jsx)("div",{className:"position-absolute data-count d-flex align-items-center",style:{maxWidth:h},children:(0,t.jsx)("div",{className:"flex-grow-1 total-count-text text-truncate",title:i("dataCount",{total:a,selected:d}),children:i("dataCount",{total:a,selected:d})})})},{useEffect:ni,useState:si}=o.React,li=e=>{const{dataSource:i,dsInfo:n,records:s}=M(),{showRecordCount:l,noDataMessage:r}=e,a=o.hooks.useTranslation(Se,D.defaultMessages),[c,d]=si(null);return ni(()=>{var e;const t=null==n?void 0:n.status;let c=null;if(l){const n=t===o.DataSourceStatus.NotReady?0:null==i?void 0:i.count,s=t===o.DataSourceStatus.NotReady?0:null===(e=null==i?void 0:i.getSelectedRecords())||void 0===e?void 0:e.length,l=a("dataCount",{total:n,selected:s});c=t===o.DataSourceStatus.Loaded?`Results updated, ${l}`:""}else{const e=(null==s?void 0:s.length)>0?"Results updated":r||a("listNoData");c=t===o.DataSourceStatus.Loaded?e:""}d(c)},[n,i,l,s,a,r]),(0,t.jsx)("div",{className:"sr-only",children:c&&(0,t.jsx)("div",{"aria-live":"assertive",role:"alert",children:c})})};var ri=c(45508),ai=c.n(ri),ci=function(e,t){var o={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(o[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(o[i[n]]=e[i[n]])}return o};const di=e=>{const i=window.SVG,{className:n}=e,s=ci(e,["className"]),l=(0,o.classNames)("jimu-icon jimu-icon-component",n);return i?(0,t.jsx)(i,Object.assign({className:l,src:ai()},s)):(0,t.jsx)("svg",Object.assign({className:l},s))},{useEffect:ui,useState:hi,useRef:pi}=o.React,gi=6e4,fi=e=>{const i=o.hooks.useTranslation(Se,D.defaultMessages,o.defaultMessages),n=pi(null),s=pi(null),l=E(),{dataSource:r,dsInfo:a,showLoading:c,widgetRect:d,lastRefreshTime:u}=M(),{config:h,appMode:g,LayoutEntry:f,showLoadingWhenConfirmSelectTemplate:v}=e,[m,S]=hi(!1),[y,w]=hi(!1),[x,b]=hi(null),[I,C]=hi(0);ui(()=>{k(h)},[h]),ui(()=>{const e=(null==d?void 0:d.width)||620;w(e<321)},[d]);const T=o.React.useCallback(e=>{l({type:"SET_SHOW_LOADING",value:e})},[l]),R=o.React.useCallback((e,t,i)=>{let n=!1;return(i||window.jimuConfig.isInBuilder&&!f||e&&t===o.DataSourceStatus.Loading)&&(n=!0),n},[f]),O=o.React.useCallback(e=>{clearTimeout(s.current),e<=0&&clearInterval(n.current),s.current=setTimeout(()=>{e>0&&b(i("lastUpdateAFewTime"))},0)},[i]),j=o.React.useCallback(e=>{const t=(new Date).getTime()-e;let o=i("lastUpdateAFewTime");return t>gi&&t<=12e4?o=i("lastUpdateAMinute"):t>12e4&&(o=i("lastUpdateTime",{updateTime:Math.floor(t/gi)})),o},[i]),L=o.React.useCallback(e=>{clearInterval(n.current),n.current=setInterval(()=>{b(j(e))},gi)},[j]),k=e=>{let t=null==e?void 0:e.isShowAutoRefresh;"boolean"!=typeof t&&(t=!0),S(t)},N=o.React.useCallback((e,t)=>{O(e),e>0&&t&&L(t)},[O,L]);return ui(()=>{const e=R(r,null==a?void 0:a.status,v);T(e);const t=(e=>(null==e?void 0:e.getAutoRefreshInterval())||0)(r);C(t)},[r,a,v,R,T]),ui(()=>(m&&m&&N(I,u),()=>{clearInterval(n.current)}),[u,I,m,N]),(0,t.jsxs)("div",{className:(0,o.classNames)("position-absolute refresh-loading-con d-flex align-items-center",((e,t)=>{const{scrollBarOpen:i,layoutType:n}=e,s=window.jimuConfig.isInBuilder&&t===o.AppMode.Design;return!i||s?"":n===p.Column?"horizon-loading":"vertical-loading"})(h,g)),children:[c&&(0,t.jsx)("div",{className:"loading-con"}),I>0&&m&&(0,t.jsxs)("div",{className:(0,o.classNames)("flex-grow-1 auto-refresh-loading",{"auto-refresh-loading-with-icon":y}),children:[y&&(0,t.jsx)(D.Tooltip,{title:x,placement:"top",children:(0,t.jsx)(D.Button,{className:"list-auto-refresh-button",type:"tertiary","aria-label":x,children:(0,t.jsx)(di,{})})}),!y&&(0,t.jsx)("div",{className:"auto-refresh-string-con",children:x})]})]})},{useEffect:vi,useState:mi,useRef:Si}=o.React,yi=e=>{const i=Si(null),n=Si(null),s=Si(0),l=Si(null),r=Si(1),c=Si(1),d=Si(null),u=Si(null),h=Si(!1),p=Si(null),g=Si(null),{useDataSources:f,id:v,config:m,activeSort:S,showLoadingWhenConfirmSelectTemplate:y,noLayoutEntry:w}=e,{updateQueryOptions:x,loadNextPageWhenListSizeOrTotalCountChange:b,updateCreateDataSourceFailed:I,scrollToSelectedItems:C,scrollToItemAfterLoadRecords:T}=e,[R,O]=mi({returnGeometry:!0}),{page:j,searchText:D,dataSource:L,showSelectionOnly:k,currentFilter:N,filterApplied:z,sortOptionName:_,pageSize:P,queryStatus:A,hasDsLoadedRecord:B,selectedRecordsId:F}=M(),H=E(),W=o.ReactRedux.useSelector(e=>{var t;return null===(t=null==e?void 0:e.appRuntimeInfo)||void 0===t?void 0:t.appMode}),$=o.React.useCallback(e=>{const t=l.current;if(e&&e[0]){const o=t&&t[0];o&&o.dataSourceId===e[0].dataSourceId||H({type:"SET_PAGE",value:1})}else u.current=void 0,H({type:"SET_DATA_SOURCE",value:void 0})},[H]),U=o.React.useCallback(e=>{let t=function(e){var t;const i={returnGeometry:!0},{sortOptionName:n,searchText:s,currentFilter:l,filterApplied:r,datasource:a,config:c,useDataSources:d,pageSize:u,page:h,activeSort:p}=e,g=d&&d[0];if(!a||!g)return i;if(!a.query)return i;const f=we(c.sorts,c.sortOpen,n,p);if(f.length>0&&(i.orderByFields=f),c.filterOpen&&r&&c.filter&&l&&l.sql&&(i.where=l.sql,i.sqlExpression=l),c.searchOpen&&c.searchFields&&s){const e=o.dataSourceUtils.getSQL(s,null===(t=c.searchFields)||void 0===t?void 0:t.asMutable({deep:!0}),a,null==c?void 0:c.searchExact);if(i.where){const t=o.dataSourceUtils.getMergedSQLExpressions([i.sqlExpression.asMutable({deep:!0}),e],a);i.where=t.sql,i.sqlExpression=(0,o.Immutable)(t)}else i.where=e.sql,i.sqlExpression=(0,o.Immutable)(e)}return u>0&&(i.page=h,i.pageSize=u),i}(e);var n,s,l;if(!(n=t,s=i.current,!!(l=u.current)&&(n=l.getRealQueryParams(n,"query"),s=l.getRealQueryParams(s,"query"),!(!n||!s)&&(delete n.page,delete n.pageSize,delete n.resultOffset,delete n.resultRecordCount,delete s.page,delete s.pageSize,delete s.resultOffset,delete s.resultRecordCount,o.utils.isDeepEqual(n,s))))&&u.current){const e=t;1!==r.current?(t=i.current,i.current=e,H({type:"SET_PAGE",value:1})):i.current=e}x(t),O(t)},[H,x]),G=o.React.useCallback(()=>{let e=!1;return(y||window.jimuConfig.isInBuilder&&w||u.current&&d.current===o.DataSourceStatus.Loading)&&(e=!0),e},[w,y]),V=o.React.useCallback((e,t)=>{var i,n;const s=!!u.current&&ne(null===(i=u.current)||void 0===i?void 0:i.id);if(!h.current&&u.current&&!s&&(null===(n=p.current)||void 0===n?void 0:n.isItemStyleConfirm))return;const l=G(),d=function(e){const{SELECTION_DATA_VIEW_ID:t}=o.CONSTANTS,{config:i,appMode:n,showSelectionOnly:s,ds:l,showLoading:r,recordSizePerPage:c,page:d}=e,u=n===o.AppMode.Design,h=function(e=3){const t={fake:!0};e=e&&e>1?e:3;const o=[];for(let i=0;i<e;i++)o.push(t);return o}(c);let p=h;const g=l&&(null==i?void 0:i.isItemStyleConfirm)?l.getSelectedRecords():null;l&&(null==i?void 0:i.isItemStyleConfirm)&&(p=(null==l?void 0:l.dataViewId)===t?i.pageStyle===a.Scroll?l.getRecordsByPage(1,c*d):l.getRecordsByPage(d,c):i.pageStyle===a.Scroll?l.getRecordsByPageWithSelection(1,c*d):l.getRecordsByPageWithSelection(d,c),p=p||[],s&&(p=g));return window.jimuConfig.isInBuilder&&u&&!r&&p.length<1&&(p=h),p}({ds:u.current,showLoading:l,showSelectionOnly:e,config:p.current,appMode:t,page:r.current,recordSizePerPage:c.current});H({type:"SET_RECORDS",value:d}),0===d.length&&H({type:"SET_SHOW_SELECTION_ONLY",value:!1}),clearTimeout(g.current),g.current=setTimeout(()=>{T(),u.current&&C(u.current)})},[H,G,C,T]),q=e=>{H({type:"SET_SORT_OPTION_NAME",value:e})},K=e=>{H({type:"SET_SHOW_SORT_STRING",value:e})},Y=o.React.useCallback(e=>{var t;const o=(null==e?void 0:e.getSelectedRecordIds())||[],i=F||[];return(null==o?void 0:o.length)!==(null==i?void 0:i.length)||(null===(t=null==o?void 0:o.filter(e=>!(null==i?void 0:i.includes(e))))||void 0===t?void 0:t.length)>0},[F]),Q=o.React.useCallback(e=>{if(L){V(k,W);const e=Y(L);e&&H({type:"SET_NEED_SCROLL_TO_SELECTED_ITEM",value:e});const t=(null==L?void 0:L.getSelectedRecordIds())||[];H({type:"SET_SELECTED_RECORDS_ID",value:t})}},[W,L,k,V,H,Y]),Z=o.hooks.useEventCallback(e=>{H({type:"SET_DATA_SOURCE",value:e}),u.current=e;const t=e.getInfo().status;t===o.DataSourceStatus.Loaded||t===o.DataSourceStatus.LoadError?ie(!0):ie(!1),I(!1),(0,o.getAppStore)().dispatch(o.appActions.widgetStatePropChange(v,"dsId",e.id))}),X=e=>{var t;if(!e)return[];let o=[];for(const i in null==e?void 0:e.widgetQueries){const n=(null===(t=e.widgetQueries[i])||void 0===t?void 0:t.orderByFields)||[];o=o.concat(n)}return Array.from(new Set(o))},J=o.hooks.useEventCallback((e,t)=>{var i;H({type:"SET_DS_INFO",value:e}),V(k,W),(e=>{if(!le(m))return;const t=null==L?void 0:L.count;e===o.DataSourceStatus.Loaded&&null!==t&&(s.current!==t&&(clearTimeout(n.current),n.current=setTimeout(()=>{H({type:"SET_PAGE",value:1})},1),b()),s.current=t)})(null==e?void 0:e.status),te(e,t);const l=u.current&&(null===(i=u.current)||void 0===i?void 0:i.getLastDataLoadTime()),r=null==e?void 0:e.lastAutoRefreshCheckTime;H({type:"LAST_REFRESH_TIME",value:ee(l,r)||null})}),ee=(e,t)=>e&&t?Math.max(e,t):t||e,te=o.hooks.useEventCallback((e,t)=>{if(!(null==m?void 0:m.sortOpen)||S||"boolean"!=typeof S)return;const o=X(e),i=X(t);if(!((e=[],t=[])=>JSON.stringify(e)!==JSON.stringify(t))(o,i))return;const n=o.filter(e=>!i.includes(e)),s=m.sorts.map(e=>{const t=we(m.sorts,!0,e.ruleOptionName,!0)[0];return{ruleOptionName:e.ruleOptionName,orderByFieldsItem:t}}),l=s.filter(e=>n.includes(e.orderByFieldsItem));(null==l?void 0:l.length)>0?(q(l[0].ruleOptionName),K(!1)):(q(null),K(!0))}),oe=o.hooks.useEventCallback((e,t)=>{e!==o.DataSourceStatus.Loaded&&e!==o.DataSourceStatus.LoadError||ie(!0),H({type:"SET_QUERY_STATUS",value:e}),d.current=e}),ie=e=>{h.current=e,H({type:"SET_HAS_DS_LOADED_RECORD",value:e})},ne=e=>{var t,i;return null===(i=null===(t=o.DataSourceManager.getInstance().getDataSource(e))||void 0===t?void 0:t.getDataSourceJson())||void 0===i?void 0:i.isOutputFromWidget};return vi(()=>{$(f),l.current=f},[f,$]),vi(()=>{r.current=j,c.current=P,p.current=m;const e={sortOptionName:_,searchText:D,currentFilter:N,filterApplied:z,datasource:u.current,config:m,pageSize:P,useDataSources:(0,o.Immutable)(f),page:j,activeSort:S};U(e)},[f,v,j,_,D,N,z,m,S,P,U]),vi(()=>{V(k,W)},[A,L,j,k,W,P,B,V]),(0,t.jsx)(o.React.Fragment,{children:(e=>!!e&&!!e[0])(f)&&(0,t.jsx)(o.DataSourceComponent,{query:R,useDataSource:f&&f[0],onDataSourceCreated:Z,onCreateDataSourceFailed:e=>{I(!0)},widgetId:v,queryCount:le(m),onDataSourceInfoChange:J,onSelectionChange:Q,onDataSourceStatusChange:oe,onQueryRequired:(e,t)=>{1!==r.current&&H({type:"SET_PAGE",value:1})},children:e.children})})},{useEffect:wi,useRef:xi}=o.React,bi=e=>{const i=xi(null),s=xi(null),l=xi(null),r=xi(!1),a=E(),{isResizingCard:c,currentCardSize:d,widgetRect:u}=M(),h=o.ReactRedux.useSelector(e=>null==e?void 0:e.browserSizeMode),{id:g,showTopTools:f,showBottomTools:v,targetRef:m,paginatorDiv:S,config:y,isScrollEnd:w,isCurrentPageLastPage:x,builderStatus:b}=e,{loadNextPageWhenListSizeOrTotalCountChange:I,resetListElement:C,updateCardToolPosition:T,setListDivSize:R,handleResizeCard:O,updateHasGetListSizeByResizeDetector:j}=e,D=o.hooks.useEventCallback((e,t)=>{j(!0);const o={width:e,height:t};if(c)return;const i=L(e,t),a=i.width<n||i.height<n,d=(o.width!==u.width||o.height!==u.height)&&0!==o.width&&0!==o.height;a&&!d||(k(i),N(o),z(o),r.current=!0,l.current&&C(),y.lockItemRatio&&(clearTimeout(s.current),s.current=setTimeout(()=>{O(i,!0,!1,!1,!0)},500)),T(),R(),!x&&w&&I())});wi(()=>{i.current=o.lodash.debounce(({width:e,height:t})=>{D(e,t)},100)},[D]);const L=o.hooks.useEventCallback((e,t)=>{const o={width:e,height:t},i=q(o,V(S,v),f),n=P(o),s=y.layoutType===p.GRID?_(o):d,r={width:s.width,height:s.height};if(l.current=!F(null==d?void 0:d.width,null==s?void 0:s.width)||!F(null==d?void 0:d.height,null==s?void 0:s.height),y.lockItemRatio&&y.layoutType!==p.GRID){const t=r.width/r.height;switch(null==y?void 0:y.layoutType){case p.Column:r.height=i,r.width=i*t,F(r.width,n.width)||(l.current=!0);break;case p.Row:r.height=e/t,r.width=e,F(r.height,n.height)||(l.current=!0)}}else switch(null==y?void 0:y.layoutType){case p.Column:r.height=i;break;case p.Row:r.width=e}return r}),k=e=>{a({type:"SET_CURRENT_CARD_SIZE",value:e}),C()},N=e=>{a({type:"SET_WIDGET_RECT",value:e})},z=e=>{(0,o.getAppStore)().dispatch(o.appActions.widgetStatePropChange(g,"widgetRect",e))},_=o.hooks.useEventCallback(e=>W(y,b,h,e)),P=o.hooks.useEventCallback(e=>r.current?d:_(e));return(0,t.jsx)(o.ReactResizeDetector,{targetRef:m,handleWidth:!0,handleHeight:!0,onResize:i.current})};var Ii=c(28996),Ci=c.n(Ii),Ti=function(e,t){var o={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(o[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(o[i[n]]=e[i[n]])}return o};const Ri=e=>{const i=window.SVG,{className:n}=e,s=Ti(e,["className"]),l=(0,o.classNames)("jimu-icon jimu-icon-component",n);return i?(0,t.jsx)(i,Object.assign({className:l,src:Ci()},s)):(0,t.jsx)("svg",Object.assign({className:l},s))},{useEffect:Oi,useState:ji,Fragment:Mi}=o.React,Ei=e=>{const i=o.hooks.useTranslation(D.defaultMessages,o.defaultMessages),{records:n,dataSource:s,dsInfo:l,showLoading:r,hasDsLoadedRecord:a}=M(),{config:c,useDataSources:d}=e,[u,h]=ji(null);Oi(()=>{var e,t,i;const n=null===o.appConfigUtils||void 0===o.appConfigUtils?void 0:o.appConfigUtils.getWidgetIdByOutputDataSource(null==d?void 0:d[0]),s=null===(e=(0,o.getAppStore)().getState())||void 0===e?void 0:e.appConfig,l=null===(i=null===(t=null==s?void 0:s.widgets)||void 0===t?void 0:t[n])||void 0===i?void 0:i.label;h(l)},[d]);const p=(null==l?void 0:l.status)===o.DataSourceStatus.NotReady&&s;return(0,t.jsxs)(Mi,{children:[!r&&(!n||n.length<1)&&(a||p)&&(0,t.jsxs)("div",{className:"empty-con text-center",children:[(0,t.jsx)(Ri,{size:16}),(0,t.jsx)("div",{className:"discribtion",children:(null==c?void 0:c.noDataMessage)||i("noData")})]}),p&&(0,t.jsx)("div",{className:"placeholder-alert-con",children:(0,t.jsx)(D.Alert,{form:"tooltip",size:"small",type:"warning",text:i("outputDataIsNotGenerated",{outputDsLabel:null==s?void 0:s.getLabel(),sourceWidgetName:u})})})]})};var Di=c(51879),Li=c.n(Di);const{useEffect:ki}=o.React,Ni=e=>{const i=o.hooks.useTranslation(Se,o.defaultMessages),n=E(),{useDataSources:s,createDataSourceFailed:l}=e,{dataSource:r,showWidgetLoading:a}=M();ki(()=>{c(r,s,l)},[r,s,l]);const c=(e,t,o)=>{t&&0!==(null==t?void 0:t.length)?e&&!o&&n({type:"SET_SHOW_WIDGET_LOADING",value:!1}):n({type:"SET_SHOW_WIDGET_LOADING",value:!1})};return(0,t.jsxs)(o.React.Fragment,{children:[a&&!l&&(0,t.jsx)("div",{className:"list-loading-con w-100 h-100",children:(0,t.jsx)("div",{className:"jimu-secondary-loading"})}),l&&(0,t.jsxs)("div",{className:"list-error-con position-relative w-100 h-100",children:[(0,t.jsx)(D.WidgetPlaceholder,{icon:Li(),name:i("_widgetLabel"),message:""}),(0,t.jsx)(D.Alert,{className:"position-absolute alert-panel-of-list",type:"warning",withIcon:!0,text:i("dataSourceCreateError")})]})]})},{useEffect:zi,useState:_i}=o.React,Pi=e=>{const{config:i,showTopTools:n,showBottomTools:l,bottomCon:r,isEditing:a}=e,{records:c,currentCardSize:d,widgetRect:u,showLoading:h}=M(),g=E(),f=o.ReactRedux.useSelector(e=>{var t;return null===(t=null==e?void 0:e.appRuntimeInfo)||void 0===t?void 0:t.appMode}),[v,m]=_i(0),[S,y]=_i(0),[w,x]=_i(0),[b,I]=_i(!1);zi(()=>{const e=C(c,h,a,f);I(e),g({type:"SET_IS_SHOW_EDITING_MASK",value:e})},[c,h,a,f,g]),zi(()=>{const e=fe(i,u,d);m(e)},[i,u,d]),zi(()=>{y(n?s:0)},[i,n]),zi(()=>{if(r&&l){const e=V(r.current,l);x(e)}else x(0)},[l,r]);const C=(e,t,i,n)=>{const{isInBuilder:s}=window.jimuConfig,l=!e||e.length<1;return s&&i&&!(!t&&l)&&n===o.AppMode.Design},T=o.css`
    &.editing-mask-con {
      &:before {
        content: '';
        position: absolute;
        left: 0;
        top: ${S}px;
        z-index: 10;
        height: ${d.height}px;
        width: ${v}px;
        background-color: rgba(0, 0, 0, 0.5);
      }
      .editing-mask-list-grid {
        position: absolute;
        left: ${d.width+v}px;
        top: ${S}px;
        right: 0;
        z-index: 10;
        height: ${d.height}px;
        background-color: rgba(0, 0, 0, 0.5);
      }
    }
    .editing-mask-list {
      position: absolute;
      top: ${(null==i?void 0:i.layoutType)!==p.Column&&(null==c?void 0:c.length)>0?d.height+S:S}px;
      left: ${(null==i?void 0:i.layoutType)===p.Column&&(null==c?void 0:c.length)>0?d.width:0}px;
      bottom: ${w}px;
      right: 0;
      z-index: 10;
      background-color: rgba(0, 0, 0, 0.5);
    }
    .editing-mask-ds-tool {
      position: absolute;
      z-index: 10;
      top: 0;
      left: 0;
      height: ${S}px;
      right: 0;
      background-color: rgba(0, 0, 0, 0.5);
    }

    .editing-mask-bottom-tool {
      position: absolute;
      z-index: 10;
      height: ${w}px;
      left: 0;
      bottom: 0;
      right: 0;
      background-color: rgba(0, 0, 0, 0.5);
    }
  `;return(0,t.jsx)(o.React.Fragment,{children:b&&(0,t.jsxs)("div",{className:"editing-mask-con",css:T,children:[n&&(0,t.jsx)("div",{className:"editing-mask-ds-tool"}),(0,t.jsx)("div",{className:"editing-mask-list"}),(null==i?void 0:i.layoutType)===p.GRID&&(0,t.jsx)("div",{className:"editing-mask-list-grid"}),l&&(0,t.jsx)("div",{className:"editing-mask-bottom-tool"})]})})},Ai=Object.assign({},Se,D.defaultMessages,o.defaultMessages);class Bi extends o.React.PureComponent{constructor(e){super(e),this.listRef=o.React.createRef(),this.isHasScrolled=!1,this.isHasRenderList=!1,this.needAutoScrollToSelectedItemWhenLoadPage=!1,this.autoScrollIndex=null,this.isScrollToNextStep=!1,this.isScrollEnd=!1,this.loadMoreDataTimeout=null,this.queryOptions=null,this.hasGetListSizeByResizeDetector=!1,this.isCurrentPageLastPage=!1,this.hideCardTool=!1,this.selectRecordTimeout=null,this.needScrollToItemsIndexAfterLoadRecords=null,this.updateSizeAndCardPositionWhenPropsChangeInBuilder=(e,t)=>{if(!window.jimuConfig.isInBuilder)return;this.updateScrollContentSize(e.config);let o=this.layoutPropertiesChange(e,t);o=this.listDivSizeChange(e,t,o),o&&this.updateCardToolPosition()},this.selectRecordsWhenConfigChange=e=>{const{config:t}=this.props;t.cardConfigs[S.Selected].selectionMode!==e.config.cardConfigs[S.Selected].selectionMode&&this.selectRecordsAndPublishMessageAction([])},this.updateCurrentCardSize=e=>{this.context.dispatch({type:"SET_CURRENT_CARD_SIZE",value:e}),this.resetListElement()},this.layoutPropertiesChange=(e,t)=>{var o,i;const{config:n,top:s,left:l}=this.props;let r=!1;if(!window.jimuConfig.isInBuilder)return!1;let a=!1;const c=this.getCardSizeNumberInConfig(),d=this.getCardSizeNumberInConfig(null==t?void 0:t.widgetRect,e);this.updateScrollContentSize(e.config);const u=s!==e.top||l!==e.left,h=(null==n?void 0:n.layoutType)!==e.config.layoutType,g=(f=d,v=c,!((m=n.layoutType)===p.Column?F(f.width,v.width):(m===p.Row||F(f.width,v.width))&&F(f.height,v.height)));var f,v,m;if((h||g||u)&&(r=!0,g?(a=!0,this.updateCurrentCardSize(c),this.resetListElement()):h&&this.handleResizeCard(this.context.state.currentCardSize,!0,!1,!1,!0)),!a){((null==n?void 0:n.layoutType)===p.GRID?F(null==n?void 0:n.horizontalSpace,null===(o=e.config)||void 0===o?void 0:o.horizontalSpace)&&F(null==n?void 0:n.verticalSpace,null===(i=e.config)||void 0===i?void 0:i.verticalSpace):F(n.space,e.config.space))&&n.layoutType===e.config.layoutType||(a=!0,this.resetListElement())}return r},this.getCardSizeNumberInConfig=(e,t)=>{t=t||this.props,e=e||this.context.state.widgetRect;const{browserSizeMode:o,builderStatus:i,config:n}=t;return W(n,i,o,e)},this.listDivSizeChange=(e,t,o)=>{var i;const{config:l,isHeightAuto:r,showBottomTools:a,showTopTools:c,paginatorDiv:d}=this.props,{listDivSize:u,createDataSourceFailed:h}=this.state,{dataSource:g}=this.context.state,f=this.getCardSizeNumberInConfig();if(!this.isHasRenderList&&!h||g&&!this.preDataSource)return o;const v=null==e?void 0:e.showBottomTools,m=null==e?void 0:e.showTopTools;if(a!==v||c!==m)if(r)o=!0;else if(l.layoutType===p.Column){let e=(null===(i=this.context.state.widgetRect)||void 0===i?void 0:i.height)||(null==u?void 0:u.clientHeight);if(e-=V(d,a)+(c?1:0)*s,e<n)return;const t={height:e,width:f.width};this.handleResizeCard(t,!0,!1,!1,!0)}return o},this.appModeChange=e=>{const{appMode:t}=this.props;e.appMode!==t&&t===o.AppMode.Design&&this.scrollToIndex(0)},this.updateScrollContentSize=e=>{const{config:t}=this.props,o=(null==t?void 0:t.layoutType)===p.GRID?F(null==t?void 0:t.horizontalSpace,null==e?void 0:e.horizontalSpace)&&F(null==t?void 0:t.verticalSpace,null==e?void 0:e.verticalSpace):F(t.space,e.space);t.layoutType===e.layoutType&&o||this.setScrollContentSize()},this.getNewAddedSelectedRecordsId=e=>{const t=this.context.state.selectedRecordsId||[],o=e.getSelectedRecordIds()||[];return null==o?void 0:o.filter(e=>!(null==t?void 0:t.includes(e)))},this.updateCreateDataSourceFailed=e=>{this.setState({createDataSourceFailed:e})},this.updateHasGetListSizeByResizeDetector=e=>{this.hasGetListSizeByResizeDetector=e},this.updateCardToolPosition=()=>{const{selectionIsSelf:e}=this.props;e&&!this.hideCardTool&&(this.setState({hideCardTool:!0}),this.hideCardTool=!0,clearTimeout(this.updateCardToolTimeout),this.updateCardToolTimeout=setTimeout(()=>{this.hideCardTool=!1,this.setState({hideCardTool:!1})},500))},this.resetListElement=(e=!0)=>{var t,o,i,n,s;this.listRef.current&&((null===(t=this.props.config)||void 0===t?void 0:t.layoutType)===p.GRID?this.resetAfterIndices():(null===(i=null===(o=this.listRef)||void 0===o?void 0:o.current)||void 0===i?void 0:i.resetAfterIndex)&&(null===(s=null===(n=this.listRef)||void 0===n?void 0:n.current)||void 0===s||s.resetAfterIndex(0,e)))},this.toggleCardTool=(e=!1)=>{this.hideCardTool=e,this.setState({hideCardTool:e})},this.resetAfterIndices=(e=!0)=>{var t,o,i,n;(null===(o=null===(t=this.listRef)||void 0===t?void 0:t.current)||void 0===o?void 0:o.resetAfterIndices)&&(null===(n=null===(i=this.listRef)||void 0===i?void 0:i.current)||void 0===n||n.resetAfterIndices({columnIndex:0,rowIndex:0,shouldForceUpdate:e}))},this.selectRecordsAndPublishMessageAction=e=>{const{dataSource:t}=this.context.state;if(t&&(o.MessageManager.getInstance().publishMessage(new o.DataRecordsSelectionChangeMessage(this.props.id,e,[t.id])),e)){const o=(null==e?void 0:e.map(e=>e.getId()))||[];this.context.dispatch({type:"SET_SELECTED_RECORDS_ID",value:o}),clearTimeout(this.selectRecordTimeout),this.selectRecordTimeout=setTimeout(()=>{t.selectRecordsByIds(e.map(e=>e.getId()))})}},this.formatMessage=(e,t)=>this.props.intl.formatMessage({id:e,defaultMessage:Ai[e]},t),this.scrollToIndex=(e,t="start")=>{const{config:o}=this.props;if(this.listRef.current)if((null==o?void 0:o.layoutType)===p.GRID){const o=this.getItemColumnCount(),i=Math.floor(e/o);this.listRef.current.scrollToItem({columnIndex:e-i*o,rowIndex:i,align:t})}else this.listRef.current.scrollToItem(e,t)},this.scrollToSelectedItems=e=>{var t;const o=e.getSelectedRecordIds();if(o&&o.length>0&&this.context.state.needScrollToSelectedItems&&(this.context.state.needScrollToSelectedItems||this.needScroll)){const i=this.getNewAddedSelectedRecordsId(e),n=(null==i?void 0:i.length)>0?i:o;let s=-1;if(null===(t=this.context.state.records)||void 0===t||t.forEach((e,t)=>{var o;const i=null===(o=null==e?void 0:e.getId)||void 0===o?void 0:o.call(e);(null==n?void 0:n.includes(i))&&(s=t)}),-1===s){const t=e.getRecords();if(t&&t.forEach((e,t)=>{var i;(null===(i=e.getId)||void 0===i?void 0:i.call(e))===o[0]&&(s=t)}),s>-1){const e=Math.ceil((s+1)/this.context.state.pageSize);this.needScroll=!0,this.updatePage(e)}}else this.scrollToIndex(s),this.needScroll=!1,this.autoScrollIndex=s,this.needAutoScrollToSelectedItemWhenLoadPage=!0,this.context.dispatch({type:"SET_NEED_SCROLL_TO_SELECTED_ITEM",value:!1})}},this.handleScrollUp=e=>{const{lastScrollOffset:t}=this,{config:o}=this.props,{currentCardSize:i}=this.context.state,n=this.getItemColumnCount();e&&(this.isScrollToNextStep=!0);const s=this.getScrollStep();let l=me({lastScrollOffset:t,config:o,currentCardSize:i,columnCount:n})-s;l<0&&(l=0),this.scrollToIndex(l,"start"),this.isScrollToNextStep=!1},this.handleScrollDown=e=>{const{lastScrollOffset:t}=this,{config:o}=this.props,{currentCardSize:i}=this.context.state,n=me({lastScrollOffset:t,config:o,currentCardSize:i,columnCount:this.getItemColumnCount()});e&&(this.isScrollToNextStep=!0);const s=this.getScrollStep(),{listVisibleStopIndex:l}=this;l+s>=this.context.state.records.length-1&&!this.isCurrentPageLastPage?(e&&(this.needScrollToItemsIndexAfterLoadRecords=n+s),this.isSwitchPage=!0,this.updatePage(this.context.state.page+1)):this.needAutoScrollToSelectedItemWhenLoadPage?this.scrollToIndex(this.autoScrollIndex):this.scrollToIndex(n+s,"start")},this.scrollToItemAfterLoadRecords=()=>{this.needScrollToItemsIndexAfterLoadRecords&&(this.scrollToIndex(this.needScrollToItemsIndexAfterLoadRecords,"start"),this.needScrollToItemsIndexAfterLoadRecords=null)},this.getScrollStep=()=>{const{scrollStep:e,layoutType:t}=this.props.config,o=this.isScrollToNextStep?e:0,i=this.getItemColumnCount();return t===p.GRID?o*i:o},this.updatePage=(e,t)=>{e!==this.context.state.page&&(t&&(this.isSwitchPage=!0),this.context.dispatch({type:"SET_PAGE",value:e}))},this.lastScrollOffset=0,this.handleListScroll=({scrollDirection:e,scrollOffset:t,scrollTop:i,scrollUpdateWasRequested:n})=>{var s,l;const{appMode:r,config:c}=this.props,d=this.listOutDivRef,{scrollStatus:u,dataSource:h}=this.context.state;if(this.lastScrollOffset=(null==c?void 0:c.layoutType)===p.GRID?i:t,!d||(null!==(l=null===(s=this.context.state.records)||void 0===s?void 0:s.length)&&void 0!==l?l:0)<1)return;const g=c.pageStyle===a.Scroll&&this.context.state.queryStatus!==o.DataSourceStatus.Loading,f=!window.jimuConfig.isInBuilder||r!==o.AppMode.Design;g&&h&&f&&(this.isHasScrolled=!0,!function(e,t){return!e||t<2}(d,this.lastScrollOffset)?"mid"!==u&&this.updateScrollStatus("mid"):"start"!==u&&this.updateScrollStatus("start")),this.updateFirstItemIndexInViewport()},this.updateFirstItemIndexInViewport=()=>{const{lastScrollOffset:e}=this,{config:t}=this.props,{currentCardSize:o}=this.context.state,i=me({lastScrollOffset:e,config:t,currentCardSize:o,columnCount:this.getItemColumnCount(),completelyVisibleItem:!0});this.context.dispatch({type:"SET_FIRST_ITEM_INDEX_IN_VIEWPORT",value:i||0})},this.updateScrollStatus=e=>{this.context.dispatch({type:"SET_SCROLL_STATUS",value:e})},this.handleResizeCard=(e,t=!1,o,i,n=!1)=>{if(t){const t=this.initNewCardSize(e),{id:o,browserSizeMode:i,config:s}=this.props,l={widgetId:o,browserSizeMode:i,newCardSize:t,widgetConfig:s};window.jimuConfig.isInBuilder&&this.props.builderSupportModules.widgetModules.handleResizeCard(l,n)}else this.updateCurrentCardSize(e),this.resetListElement(!1)},this.initNewCardSize=e=>{const{config:t,browserSizeMode:i,builderStatus:n}=this.props,{widgetRect:s}=this.context.state;return((e,t,i,n,s)=>{let l=(0,o.Immutable)(e);const r=U(t,i,n);return r.width.unit===D.DistanceUnits.PERCENTAGE&&(l=l.set("width",100*e.width/(s.width+(null==t?void 0:t.horizontalSpace)-8)+"%")),r.height.unit===D.DistanceUnits.PERCENTAGE&&(l=l.set("height",100*e.height/s.height+"%")),null==l?void 0:l.asMutable({deep:!0})})(e,t,n,i,s)},this.handleRefreshList=e=>{const{id:t,config:o}=this.props;e.load(this.queryOptions,{widgetId:t,refresh:!0}),o.showRecordCount&&e.loadCount(this.queryOptions,{widgetId:t,refresh:!0})},this.getListSize=()=>{const{widgetRect:e}=this.context.state,{id:t,config:o,useDataSources:i,paginatorDiv:s}=this.props,{dataSource:l}=this.context.state;return function(e){const{id:t,config:o,useDataSources:i,datasource:s,paginatorDiv:l,widgetRect:r}=e,a=Y(t,o,i),c=q(r,V(l,K(o,s)),a)||1;return{width:r&&r.width||n,height:c}}({id:t,datasource:l,widgetRect:e,config:o,useDataSources:null==i?void 0:i.asMutable({deep:!0}),paginatorDiv:s})},this.setListRef=e=>{this.listRef.current=e},this.handleListKeyUp=e=>{"Escape"===e.key&&this.focusInteractiveNode(!1)},this.focusInteractiveNode=(e=!1)=>{var t;const{showBottomTools:i,showTopTools:n,paginatorDiv:s}=this.props,l=e?n:i,r=e?this.jumpOutNodeOfListInTop:this.jumpOutNodeOfListInBottom;if(l){const i=e?this.topToolsContainer:s,n=null===(t=(0,D.getFocusableElements)(i))||void 0===t?void 0:t.filter(e=>!(null==e?void 0:e.disabled));(null==n?void 0:n.length)>0?(0,o.focusElementInKeyboardMode)(n[0]):(0,o.focusElementInKeyboardMode)(r)}else(0,o.focusElementInKeyboardMode)(r)},this.loadNextPageWhenListSizeOrTotalCountChange=()=>{const{config:e}=this.props;e.pageStyle===a.Scroll&&(clearTimeout(this.loadMoreDataTimeout),this.loadMoreDataTimeout=setTimeout(()=>{this.isScrollEnd&&(this.isHasScrolled=!0,this.scrollToEndCallback(!0))},500))},this.setListOutDivRef=e=>{e&&(this.listOutDivRef=e,this.setListDivSize(),this.setScrollContentSize())},this.getDsSelectRecords=()=>{const e=this.context.state.dataSource,{config:t}=this.props;let o;return e&&t.isItemStyleConfirm&&(o=e.getSelectedRecords()),o},this.getListStyle=()=>{const{config:e,appMode:t,theme:o,isHeightAuto:i,isWidthAuto:n,showBottomTools:s,showTopTools:l,paginatorDiv:r}=this.props,{currentCardSize:a,widgetRect:c}=this.context.state,d=V(r,s),u=this.getCardSizeNumberInConfig(),h={pageStyle:null==e?void 0:e.pageStyle,scrollBarOpen:null==e?void 0:e.scrollBarOpen,direction:null==e?void 0:e.direction,appMode:t,theme:o,isHeightAuto:i,isWidthAuto:n,listTemplateDefaultCardSize:u,showTopTools:l,bottomToolH:d,mexSize:this.getListMaxSize(),layoutType:null==e?void 0:e.layoutType,listLeftPadding:fe(e,c,a)};return L(h)},this.setScrollContentSize=()=>{var e;if(!this.listOutDivRef)return;const{layoutType:t}=null===(e=this.props)||void 0===e?void 0:e.config,o=this.listOutDivRef.getElementsByTagName("div")[0];t===p.Column?o.style.height="100%":o.style.width="100%"},this.scrollToEndCallback=e=>{var t,i;const{appMode:n,config:s}=this.props,l=this.listOutDivRef,{dataSource:r}=this.context.state;if(this.setState({isScrollEnd:e}),this.isScrollEnd=e,!l||(null!==(i=null===(t=this.context.state.records)||void 0===t?void 0:t.length)&&void 0!==i?i:0)<1)return;const c=s.pageStyle===a.Scroll,d=this.context.state.queryStatus!==o.DataSourceStatus.Loading,u=!window.jimuConfig.isInBuilder||n!==o.AppMode.Design&&e;c&&d&&r&&u&&this.isHasScrolled&&(this.isCurrentPageLastPage?e&&this.updateScrollStatus("end"):(this.updatePage(this.context.state.page+1),this.isSwitchPage=!0))},this.setListDivSize=()=>{const e=this.listOutDivRef,t=(null==e?void 0:e.clientWidth)||null,o=(null==e?void 0:e.clientHeight)||null;this.setState({listDivSize:{clientWidth:t,clientHeight:o}})},this.getListMaxSize=()=>{const{boundingBox:e,heightLayoutItemSizeModes:t,layoutId:i,appMode:n,pageMode:s,browserSizeMode:l}=this.props;return(e=>{var t,i,n,s,l,r,a,c,d,u,h;const{boundingBox:p,heightLayoutItemSizeModes:g,layoutId:f,appMode:v,pageMode:m,browserSizeMode:S}=e,y=de(),w=g===A.LayoutItemSizeModes.Custom&&(null==p?void 0:p.height),x=re(f,S),b="auto"===(null===(i=null===(t=null==x?void 0:x.autoProps)||void 0===t?void 0:t.width)||void 0===i?void 0:i.toLowerCase())||"auto"===(null===(n=null==x?void 0:x.widthMode)||void 0===n?void 0:n.toLowerCase()),I=(null===(l=null===(s=null==x?void 0:x.autoProps)||void 0===s?void 0:s.height)||void 0===l?void 0:l.toLowerCase)&&"auto"===(null===(a=null===(r=null==x?void 0:x.autoProps)||void 0===r?void 0:r.height)||void 0===a?void 0:a.toLowerCase())||"auto"===(null===(c=null==x?void 0:x.heightMode)||void 0===c?void 0:c.toLowerCase())||!x,C=m===o.PageMode.AutoScroll&&I?600:y.clientHeight,T=v===o.AppMode.Design?C:y.clientHeight,R=w?null==p?void 0:p.height:T,O=w&&!((null===(d=null==p?void 0:p.height)||void 0===d?void 0:d.includes)&&(null===(u=null==p?void 0:p.height)||void 0===u?void 0:u.includes("%")));let j=(0,o.Immutable)({maxWidth:y.scrollWidth,maxHeight:R,maxSizeIsBodySize:!1});const M=(0,o.getAppStore)().getState().appConfig,{layouts:E}=M,D=null===(h=E[f])||void 0===h?void 0:h.type;if(D===o.LayoutType.ColumnLayout&&b&&(j=j.set("maxWidth",y.clientWidth).set("maxSizeIsBodySize",!0)),"ROW"===D&&I&&!O){const e=v===o.AppMode.Design?C:y.clientHeight,t=v!==o.AppMode.Design;j=j.set("maxHeight",e).set("maxSizeIsBodySize",t)}return j=j.set("maxHeight",ae(j.maxHeight)),j=j.set("maxWidth",ae(j.maxWidth)),j})({boundingBox:e,heightLayoutItemSizeModes:t,layoutId:i,appMode:n,pageMode:s,browserSizeMode:l})},this.onItemsRendered=({overscanStartIndex:e,overscanStopIndex:t,visibleStartIndex:o,visibleStopIndex:i,visibleColumnStartIndex:n,visibleColumnStopIndex:s,visibleRowStartIndex:l,visibleRowStopIndex:r})=>{const{config:c}=this.props;this.listVisibleStartIndex=(null==c?void 0:c.layoutType)===p.GRID?this.getItemIndexByRowAndColumnIndex(l,n):o,this.listVisibleStopIndex=(null==c?void 0:c.layoutType)===p.GRID?this.getItemIndexByRowAndColumnIndex(r,s):i,this.needRefreshListOnListRendered&&(this.needRefreshListOnListRendered=!1,this.resetListElement()),this.isSwitchPage||(c.pageStyle===a.Scroll?this.context.state.records.length>this.listVisibleStopIndex+1&&(this.isSwitchPage=!1,this.onItemsRenderedTimeout=setTimeout(()=>{this.handleScrollDown(null),this.isScrollToNextStep&&(this.isScrollToNextStep=!1)},500)):this.isSwitchPage=!1)},this.getItemIndexByRowAndColumnIndex=(e,t)=>e*this.getItemColumnCount()+t,this.getItemColumnCount=()=>{const{config:e}=this.props,{currentCardSize:t,widgetRect:o}=this.context.state;return he(e,o,t)},this.onListContainerMouseMove=()=>{this.needAutoScrollToSelectedItemWhenLoadPage&&this.context.state.records&&(this.needAutoScrollToSelectedItemWhenLoadPage=!1)},this.updateQueryOptions=e=>{this.queryOptions=e},this.updateTopToolsContainer=e=>{this.topToolsContainer=e},this.updateBottomToolsContainer=e=>{this.bottomToolsContainer=e},this.renderContentOfListWidget=()=>{const{LayoutEntry:e,isScrollEnd:o}=this.state,{config:i,useDataSources:n,id:s,selectionIsInSelf:l,selectionIsSelf:r,appMode:a,builderStatus:c,builderSupportModules:d,layouts:u,isEditing:h,showBottomTools:p,showTopTools:g,paginatorDiv:f,setPaginatorDivRef:v}=this.props,{dataSource:m,page:S,records:y,pageSize:w}=this.context.state,x={id:s,config:i,selectionIsInSelf:l,selectionIsSelf:r,builderStatus:c,builderSupportModules:d,layouts:u};return this.isHasRenderList=!0,this.isCurrentPageLastPage=H(m,S,w,null==y?void 0:y.length),(0,t.jsxs)("div",{className:"list-container animation",css:this.getListStyle(),children:[(0,t.jsx)("div",{className:"sr-only",tabIndex:-1,ref:e=>{this.jumpOutNodeOfListInTop=e},children:this.formatMessage("pressTabToContinue")}),g&&(0,t.jsx)(jt,{id:s,useDataSources:n,config:i,isEditing:h,selectRecords:this.getDsSelectRecords(),scrollToIndex:this.scrollToIndex,handleRefreshList:this.handleRefreshList,selectRecordsAndPublishMessageAction:this.selectRecordsAndPublishMessageAction,updateTopToolsContainer:this.updateTopToolsContainer}),(0,t.jsx)(Jo,{listProps:x,LayoutEntry:e,hideCardTool:this.hideCardTool,useDataSources:n,getListSize:this.getListSize,toggleCardTool:this.toggleCardTool,handleListScroll:this.handleListScroll,setListOutDivRef:this.setListOutDivRef,handleResizeCard:this.handleResizeCard,onItemsRendered:this.onItemsRendered,setListRef:this.setListRef,scrollToEndCallback:this.scrollToEndCallback,resetListElement:this.resetListElement,selectRecordsAndPublishMessageAction:this.selectRecordsAndPublishMessageAction,handleListKeyUp:this.handleListKeyUp}),p&&(0,t.jsx)("div",{ref:e=>{v(e)},children:(0,t.jsx)(Yt,{isScrollEnd:o,config:i,hidePageTotal:null==i?void 0:i.hidePageTotal,handleScrollUp:this.handleScrollUp,handleScrollDown:this.handleScrollDown,updatePage:this.updatePage})}),(0,t.jsx)(Pi,{isEditing:ne(a,i,r,l),config:i,showTopTools:g,showBottomTools:p,bottomCon:f}),(0,t.jsx)(Ei,{config:i,useDataSources:null==n?void 0:n.asMutable({deep:!0})}),(0,t.jsx)(fi,{config:i,appMode:this.props.appMode,LayoutEntry:e,showLoadingWhenConfirmSelectTemplate:this.props.showLoadingWhenConfirmSelectTemplate}),i.showRecordCount&&(0,t.jsx)(ii,{}),(0,t.jsx)(li,{showRecordCount:i.showRecordCount,noDataMessage:null==i?void 0:i.noDataMessage}),(0,t.jsx)("div",{id:"describeByMessage",className:"sr-only",children:this.formatMessage("describeMessage")}),(0,t.jsx)("div",{className:"sr-only",tabIndex:-1,ref:e=>{this.jumpOutNodeOfListInBottom=e},children:this.formatMessage("pressTabToContinue")})]})};const i={LayoutEntry:null,showList:!0,hideCardTool:!1,showLoading:!1,listDivSize:{clientWidth:null,clientHeight:null},isScrollEnd:!1,isMount:!1,createDataSourceFailed:!1};window.jimuConfig.isInBuilder?i.LayoutEntry=this.props.builderSupportModules.LayoutEntry:i.LayoutEntry=A.LayoutEntry,this.state=i,this.handleResizeCard=this.handleResizeCard.bind(this)}componentDidMount(){this.setState({isMount:!0})}componentWillUnmount(){clearTimeout(this.updateCardToolTimeout),clearTimeout(this.setPageTimeout),clearTimeout(this.onItemsRenderedTimeout)}componentDidUpdate(e,t){const{dataSource:o}=this.context.state;this.updateSizeAndCardPositionWhenPropsChangeInBuilder(e,t),this.appModeChange(e),this.selectRecordsWhenConfigChange(e),this.preDataSource=o}render(){const{config:e,id:i,useDataSources:n,activeSort:s,builderStatus:l,showTopTools:r,showBottomTools:a,paginatorDiv:c,showLoadingWhenConfirmSelectTemplate:d}=this.props,{createDataSourceFailed:u,isMount:h,LayoutEntry:p}=this.state;return(0,t.jsxs)(o.React.Fragment,{children:[(0,t.jsxs)("div",{className:"widget-list d-flex",onMouseMove:this.onListContainerMouseMove,children:[h&&this.hasGetListSizeByResizeDetector&&!this.context.state.showWidgetLoading&&this.renderContentOfListWidget(),(0,t.jsx)(Ni,{id:i,useDataSources:n,createDataSourceFailed:u})]}),(0,t.jsx)(bi,{targetRef:this.props.listWidgetConRef,id:i,showTopTools:r,showBottomTools:a,paginatorDiv:c,config:e,builderStatus:l,isScrollEnd:this.isScrollEnd,isCurrentPageLastPage:this.isCurrentPageLastPage,resetListElement:this.resetListElement,loadNextPageWhenListSizeOrTotalCountChange:this.loadNextPageWhenListSizeOrTotalCountChange,updateCardToolPosition:this.updateCardToolPosition,setListDivSize:this.setListDivSize,handleResizeCard:this.handleResizeCard,updateHasGetListSizeByResizeDetector:this.updateHasGetListSizeByResizeDetector}),(0,t.jsx)(yi,{id:i,useDataSources:n,config:e,activeSort:s,noLayoutEntry:!p,showLoadingWhenConfirmSelectTemplate:d,updateQueryOptions:this.updateQueryOptions,scrollToSelectedItems:this.scrollToSelectedItems,updateCreateDataSourceFailed:this.updateCreateDataSourceFailed,loadNextPageWhenListSizeOrTotalCountChange:this.loadNextPageWhenListSizeOrTotalCountChange,scrollToItemAfterLoadRecords:this.scrollToItemAfterLoadRecords})]})}}Bi.contextType=O;const Fi=Bi,{useEffect:Hi,useState:Wi}=o.React,$i=e=>{const i=o.ReactRedux.useSelector(e=>null==e?void 0:e.browserSizeMode),n=o.ReactRedux.useSelector(e=>{var t;return null===(t=null==e?void 0:e.appRuntimeInfo)||void 0===t?void 0:t.appMode}),[s,l]=Wi(!1);Hi(()=>{r(e)},[e]);const r=o.hooks.useEventCallback(e=>{const{config:t,selectionIsInSelf:r,selectionIsSelf:a,builderStatus:c,layouts:d,forceShowMask:u}=e;let h=s;const p=(0,o.getAppStore)().getState().appConfig,g=window.jimuConfig.isInBuilder,f=null==p?void 0:p.layouts[A.searchUtils.findLayoutId((0,o.Immutable)(d[c]),i,p.mainSizeMode)],v=f&&f.type;h=!(!g||n===o.AppMode.Run)&&(n===o.AppMode.Express?!(t.isItemStyleConfirm||!v):u||!r&&!a||!t.isItemStyleConfirm&&v),l(h)});return(0,t.jsx)(o.React.Fragment,{children:s&&(0,t.jsx)("div",{className:"list-with-mask"})})},{useRef:Ui,useState:Gi,useEffect:Vi,Fragment:qi}=o.React,Ki=e=>{const i=o.hooks.useTranslation(Se,D.defaultMessages),s=Ui(null),l=Ui(null),r=Ui(!1),d=Ui(null),u=Ui(null),h=Ui(0),{id:g,config:f,appMode:v,selectionIsSelf:m,selectionIsInSelf:y,useDataSources:w,layouts:x,builderStatus:b,parentSize:I,browserSizeMode:C,dispatch:T,selectionStatus:R,layoutId:O,layoutItemId:j,isHeightAuto:L,isWidthAuto:k}=e,{dataSource:z,showSelectionOnly:_,widgetRect:P,currentCardSize:A,firstItemIndexInViewport:B,records:F}=M(),H=E(),U=o.ReactRedux.useSelector(e=>{var t,o;return null===(o=null===(t=null==e?void 0:e.appConfig.widgets)||void 0===t?void 0:t[g])||void 0===o?void 0:o.enableDataAction}),G=o.ReactRedux.useSelector(e=>{var t,o,i;return"number"==typeof(null===(i=null===(o=null===(t=null==e?void 0:e.dynamicStyleState)||void 0===t?void 0:t.previewConditionInfo)||void 0===o?void 0:o[g])||void 0===i?void 0:i.conditionId)}),Q=o.ReactRedux.useSelector(e=>{var t,o,i;return null===(i=null===(o=null===(t=null==e?void 0:e.dynamicStyleState)||void 0===t?void 0:t.previewRepeatedRecordInfo)||void 0===o?void 0:o[g])||void 0===i?void 0:i.needUpdateRecordIndex}),[Z,X]=Gi(!1),[J,ee]=Gi(!1),[te,oe]=Gi(!1),[ie,se]=Gi(!1);Vi(()=>{const e=re(),t=W(f,b,C,e);H({type:"SET_CURRENT_CARD_SIZE",value:t}),H({type:"SET_WIDGET_RECT",value:e})},[]),Vi(()=>{ce(v)},[v]),Vi(()=>{const e=ne(v,f,m,y);X(e)},[v,f,m,y]),Vi(()=>{h.current=B},[B]),Vi(()=>{(Z||G||Q)&&T(o.appActions.changeDynamicStylePreviewRepeatedRecordInfo(g,{recordIndex:h.current,needUpdateRecordIndex:!1}))},[Z,F,G,T,g,v,Q]),Vi(()=>{const e=K(f,z);oe(e)},[z,f]),Vi(()=>{ge(O,j,g,m)},[O,j,g,m]),Vi(()=>{const e=Y(g,f,null==w?void 0:w.asMutable({deep:!0}));ee(e)},[z,f,w,g,U]),Vi(()=>{var e,t;const o=f.itemsPerPage&&f.itemsPerPage!==(null===(e=d.current)||void 0===e?void 0:e.itemsPerPage),i=f.pageStyle&&f.pageStyle!==(null===(t=d.current)||void 0===t?void 0:t.pageStyle);(o||i)&&H({type:"SET_PAGE",value:1}),d.current=f},[f]),Vi(()=>{T(o.appActions.widgetStatePropChange(g,"selectionIsInSelf",y))},[y,g,T]),Vi(()=>{ve(C,g,I,O)},[C,g,I,O]);const le=o.hooks.useEventCallback(e=>{!window.jimuConfig.isInBuilder||v!==o.AppMode.Design||m||y||ae(e)}),re=o.hooks.useEventCallback(()=>function(e,t,o){const i=$(e,t,o),s={width:n,height:n},l=D.utils.toLinearUnit(i.width),r=D.utils.toLinearUnit(i.height);return l.unit===D.DistanceUnits.PERCENTAGE&&(s.width=50/l.distance*100),r.unit===D.DistanceUnits.PERCENTAGE&&(s.height=50/r.distance*100),s}(f,b,C)),ae=e=>{se(!0),l.current&&clearTimeout(l.current),l.current=setTimeout(()=>{se(!1)},200)},ce=o.hooks.useEventCallback(e=>{e!==o.AppMode.Design?de(S.Default):(R!==b&&(R?de(R):m||de(S.Default)),ue(!1))}),de=e=>{pe("showCardSetting",e),pe("builderStatus",e)},ue=e=>{H({type:"SET_SHOW_SELECTION_ONLY",value:_})},pe=(e,t)=>{T(o.appActions.widgetStatePropChange(g,e,t))},ge=(e,t,i,n)=>{e&&i&&t&&!r.current&&n&&(T(o.appActions.widgetStatePropChange(i,"layoutInfo",{layoutId:e,layoutItemId:t})),r.current=!0)},fe=o.React.useCallback(e=>{const{config:t,isHeightAuto:o,isWidthAuto:i,builderStatus:n,browserSizeMode:s,showBottomTools:l,showTopTools:r,widgetRect:c}=e,d={widgetRect:c,listHeight:q(c,V(u.current,l),r)||1,columnCount:(null==t?void 0:t.layoutType)===p.GRID?he(t,c,A):null,config:t,isHeightAuto:o,isWidthAuto:i,builderStatus:n,browserSizeMode:s},h=Math.max(function(e){const{widgetRect:t,columnCount:o,config:i,isHeightAuto:n,isWidthAuto:s,builderStatus:l,browserSizeMode:r}=e;let{listHeight:c}=e;const d=W(i,l,r,t);let u;if(i.pageStyle===a.Scroll){if(!t)return 0;switch(null==i?void 0:i.layoutType){case p.Row:if(0===t.height)return 0;n&&(c=document.body.scrollHeight),u=Math.ceil((c+i.space)/(d.height+i.space))+1;break;case p.Column:if(0===t.width)return 0;let e=t.width;s&&(e=document.body.scrollWidth),u=Math.ceil((e+i.space)/(d.width+i.space))+1;break;case p.GRID:if(0===t.height)return 0;n&&(c=document.body.scrollHeight),u=Math.ceil((c+(null==i?void 0:i.verticalSpace))/(d.height+i.space))*o}i.navigatorOpen&&(u=Math.max(u,i.scrollStep))}else u=i.itemsPerPage;return u}(d),1);return h},[A]),ve=(e,t,i,n)=>{const s=(0,o.getAppStore)().getState().appConfig,l=o.utils.findViewportSize(s,e),r=`div.layout[data-layoutid=${n}]`,a=document.querySelector(r),c={width:(null==a?void 0:a.clientWidth)||l.width,height:(null==a?void 0:a.clientHeight)||l.height};i&&i.height===c.height&&i.width===c.width||T(o.appActions.widgetStatePropChange(t,"parentSize",c))};return Vi(()=>{const e=fe({config:f,isHeightAuto:L,isWidthAuto:k,builderStatus:b,browserSizeMode:C,showBottomTools:te,showTopTools:J,widgetRect:P});H({type:"SET_PAGE_SIZE",value:e})},[f,L,k,b,C,te,J,P,fe,H]),(0,t.jsxs)(qi,{children:[!f.itemStyle&&(0,t.jsx)(D.WidgetPlaceholder,{name:i("_widgetLabel"),icon:c(70778),message:i("placeHolderTip")}),f.itemStyle&&(0,t.jsxs)("div",{className:(0,o.classNames)("jimu-widget","widget-list","list-widget-"+g),ref:s,css:N(e,0,te),onPointerDown:le,children:[(0,t.jsx)(Fi,Object.assign({},e,{listWidgetConRef:s,isEditing:Z,showTopTools:J,showBottomTools:te,setPaginatorDivRef:e=>{u.current=e},paginatorDiv:u.current})),(0,t.jsx)($i,{config:f,selectionIsInSelf:y,selectionIsSelf:m,builderStatus:b,forceShowMask:ie,layouts:x})]})]})},{useSelector:Yi}=o.ReactRedux,Qi=e=>{const i=o.React.useRef(null),n=Yi(t=>{const n=function(e,t){var i,n,s,l,r,a,c,d,u,h,p,g,f,v,m,y,w,x,b,I,C,T,R,O,j,M,E,D,L;const k=null==e?void 0:e.appConfig,{layouts:N,layoutId:z,layoutItemId:_,builderSupportModules:P,id:B}=t,F=null==e?void 0:e.browserSizeMode,H=(null===(n=null===(i=null==e?void 0:e.widgetsState)||void 0===i?void 0:i[t.id])||void 0===n?void 0:n.builderStatus)||S.Default;let W;if(k){const t=k&&e.appConfig.layouts&&e.appConfig.layouts[A.searchUtils.findLayoutId((0,o.Immutable)(N[H]),F,k.mainSizeMode)];W=t&&t.type}const $=null===(s=k.layouts)||void 0===s?void 0:s[z],U=null===(r=null===(l=null==$?void 0:$.content)||void 0===l?void 0:l[_])||void 0===r?void 0:r.setting,G=(null===(a=null==U?void 0:U.autoProps)||void 0===a?void 0:a.height)===A.LayoutItemSizeModes.Auto||!0===(null===(c=null==U?void 0:U.autoProps)||void 0===c?void 0:c.height),V=(null===(d=null==U?void 0:U.autoProps)||void 0===d?void 0:d.width)===A.LayoutItemSizeModes.Auto||!0===(null===(u=null==U?void 0:U.autoProps)||void 0===u?void 0:u.width);let q;if(window.jimuConfig.isInBuilder){const e=null===(f=null===(g=null===(p=null===(h=k.layouts)||void 0===h?void 0:h[z])||void 0===p?void 0:p.content)||void 0===g?void 0:g[_])||void 0===f?void 0:f.bbox;q=e&&{left:e.left,top:e.top}}const K=e&&e.appRuntimeInfo&&e.appRuntimeInfo.selection,Y=K&&(null===(v=null==P?void 0:P.widgetModules)||void 0===v?void 0:v.selectionInList(K,B,k,!1));let Q;Y&&(Q=Object.keys(N).find(e=>A.searchUtils.findLayoutId((0,o.Immutable)(N[e]),F,k.mainSizeMode)===K.layoutId));const Z=!(!K||K.layoutId!==z||K.layoutItemId!==_),X=null===(m=null==e?void 0:e.appRuntimeInfo)||void 0===m?void 0:m.currentPageId,J=null===(x=null===(w=null===(y=null==e?void 0:e.appConfig)||void 0===y?void 0:y.pages)||void 0===w?void 0:w[X])||void 0===x?void 0:x.mode;return{selectionIsSelf:Z,selectionIsInSelf:!!Y,selectionStatus:Q,appMode:null===(b=null==e?void 0:e.appRuntimeInfo)||void 0===b?void 0:b.appMode,browserSizeMode:e&&e.browserSizeMode,builderStatus:(null===(C=null===(I=e.widgetsState)||void 0===I?void 0:I[t.id])||void 0===C?void 0:C.builderStatus)||S.Default,showLoadingWhenConfirmSelectTemplate:null===(R=null===(T=null==e?void 0:e.widgetsState)||void 0===T?void 0:T[t.id])||void 0===R?void 0:R.showLoading,activeSort:null===(j=null===(O=null==e?void 0:e.widgetsState)||void 0===O?void 0:O[t.id])||void 0===j?void 0:j.activeSort,isRTL:e&&e.appContext&&e.appContext.isRTL,subLayoutType:W,left:q&&q.left,top:q&&q.top,isHeightAuto:G,isWidthAuto:V,queryObject:e.queryObject,boundingBox:null===(E=null===(M=null==$?void 0:$.content)||void 0===M?void 0:M[_])||void 0===E?void 0:E.bbox,heightLayoutItemSizeModes:null===(D=null==U?void 0:U.autoProps)||void 0===D?void 0:D.height,parentSize:(null===(L=e.widgetsState[t.id])||void 0===L?void 0:L.parentSize)||null,pageMode:J}}(t,e);return JSON.stringify(i.current)===JSON.stringify(n)?i.current:(i.current=n,n)});return(0,t.jsx)(D.Paper,{shape:"none",transparent:!0,className:"jimu-widget widget-list",children:(0,t.jsx)(j,{children:(0,t.jsx)(Ki,Object.assign({},n,e))})})};Qi.versionManager=b;const Zi=Qi;function Xi(e){c.p=e}})(),d})())}}});