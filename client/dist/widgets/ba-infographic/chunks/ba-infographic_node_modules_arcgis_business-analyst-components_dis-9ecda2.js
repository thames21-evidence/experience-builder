"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_ba-infographic_node_modules_arcgis_business-analyst-components_dis-9ecda2"],{5301:(e,t,s)=>{s.r(t),s.d(t,{arcgis_ba_search:()=>r});var o=s(982),i=s(8249),n=s(7212);class a{token;geocoderUrl;constructor(e,t){this.token=e,this.geocoderUrl=t||i.E.getUrl("geocode"),this.geocoderUrl.endsWith("/")||(this.geocoderUrl+="/")}suggest(e,t){return new Promise((s,o)=>{if(!e||!e.length)return void s([]);let n=new URLSearchParams({text:e});t?.location&&n.set("location",t.location),t?.sourceCountry&&n.set("sourceCountry",t.sourceCountry),t?.langCode&&n.set("langCode",t.langCode),this._request(this.geocoderUrl+"suggest",n,i.E.isOnlineGeocoder(this.geocoderUrl)).then(e=>{s(e.suggestions)}).catch(e=>{498===e.code?this._request(this.geocoderUrl+"suggest",n,!0).then(e=>{s(e.suggestions)}).catch(e=>{o(e)}):o(e)})})}geocode(e,t){return new Promise((s,o)=>{if(!e||!e.length)return void s([]);let n=new URLSearchParams({maxLocations:t?.maxLocations||10,singleLine:e});t?.location&&n.set("location",t.location),t?.outFields&&n.set("outFields",t.outFields),t?.magicKey&&n.set("magicKey",t.magicKey),n.set("outSR","4326"),this._request(this.geocoderUrl+"findAddressCandidates",n,i.E.isOnlineGeocoder(this.geocoderUrl)).then(e=>{s(e)}).catch(e=>{498===e.code?this._request(this.geocoderUrl+"findAddressCandidates",n,!0).then(e=>{s(e)}).catch(e=>{o(e)}):o(e)})})}geocodeUsingApi(e,t){return new Promise((s,o)=>{let n=new URLSearchParams({location:JSON.stringify({spatialReference:{wkid:4326},x:t.toString(),y:e.toString()}),outSR:"4326"});i.E.isOnlineGeocoder(this.geocoderUrl)||n.append("token",this.token);const a=e=>{const t=e?.address,s=t?.LongLabel,o=t?.Match_addr,i=t?.Address,n=o&&o.length>0?o:s&&s.length>0?s:i;return{address:i,shortAddressType:t.Addr_type,shortAddress:i,city:t.City,countryCode:t.CountryCode,postal:t.Postal,label:n,matchAddr:o}};this._request(this.geocoderUrl+"reverseGeocode",n,i.E.isOnlineGeocoder(this.geocoderUrl)).then(e=>{s(a(e))}).catch(e=>{498===e.code?this._request(this.geocoderUrl+"reverseGeocode",n,!0).then(e=>{s(a(e))}).catch(e=>{o(e)}):o(e)})})}_request(e,t,s){return new Promise((o,i)=>{s?t.delete("token"):t.set("token",this.token),t.set("f","json");let a=e+"?"+t.toString();fetch(a,{method:"GET"}).then(e=>{if(!e.ok)throw new Error(n.B.i18n("network-response-error"));return e.json()}).then(e=>{e.error?i(e.error):o(e)}).catch(e=>{i(e)})})}}const r=class{get el(){return(0,o.g)(this)}baseConfig;geocoderClient=a;baSearchKeyTimer=null;suggestionTimer=null;_suggestionStateTimer=null;labels;mapActions;_lastInputValue="";_openFirst=!1;_accordionTheme;_onChangeCallback;_onChangeQueue;_debounceTimer;_hasSetEnv=!1;_verboseLogging=!0;_geographyLevelData;_localeSettings;_searchTypeConv=["all","address","boundary"];_instanceId;_idPrefix="arcgis-ba-search-";_inputId;_idPrefixInput="ba-search-input-";_dropdownId;_idPrefixDropDown="ba-search-drop-";_dropAllid;_dropLocId;_idPrefixDropLoc="ba-search-drop-loc-";_idPrefixDropAll="ba-search-drop-all-";_dropBdyId;_idPrefixDropBdy="ba-search-drop-bdy-";_dropGroupId;_idPrefixDropGroup="ba-search-drop-group-";_suggestId;_idPrefixSuggest="ba-search-suggest-";_suggestPopoverId;_idPrefixSuggestPopover="ba-search-suggest-popover-";_suggestContentId;_idPrefixSuggestContent="ba-search-suggest-content-";_defaultHierarchy=n.U;_useLatestDefaultHierarchy=!1;_searchResponseItemData;_geographyLevels;_geographyActiveLevels=[];_geographyLevelsSource;_dbg=!1;_suggestionRequestSeq=0;_searchScopeDropDownSelected=!1;_lockSearchScope=!1;_configChangeInProgress=!1;_configForcesSingleScope=!1;constructor(e){if((0,o.r)(this,e),this.searchResults=(0,o.c)(this,"searchResults",6),this.searchCleared=(0,o.c)(this,"searchCleared",7),this.selectorPopupOpened=(0,o.c)(this,"selectorPopupOpened",6),this.selectorPopupClosed=(0,o.c)(this,"selectorPopupClosed",6),this.backgroundColor="var(--sys-color-surface-paper)",this.textColor="var(--sys-color-surface-paperText)",this.dividerColor="var(--sys-color-divider-secondary)",this.config=void 0,this.colors=void 0,this.theme=void 0,this.env=void 0,this.token=void 0,this.username=void 0,this.langCode=void 0,this.sourceCountry=void 0,this.selectedHierarchy=void 0,this.geoenrichmentUrl=void 0,this.geocodeUrl=void 0,this.nogeography=void 0,this.maxsuggestionheight=void 0,this.suggestionBottomPadding=void 0,this.showSearch=void 0,this.searchPlaceholder=void 0,this.currentSearchText=void 0,this.searchLabel=void 0,this.searchAll=void 0,this.searchAllPlaceholder=void 0,this.searchPlaceholderShort=void 0,this.searchEnterBoundary=void 0,this.searchBoundary=void 0,this.mode=void 0,this.suglite=void 0,this.initialSearchScope=void 0,this.lockSearchScopeOnInit=void 0,this.activeLevels=void 0,this.stEnv=void 0,this.stToken=void 0,this.stUsername=void 0,this.stLangCode=void 0,this.stGeoenrichmentUrl=void 0,this.stTheme=void 0,this.stSearchScope="all",this.searchQuery=null,this.suggestionResults={location:[],boundary:[]},this.stActiveLevels=void 0,this.stNoGeography=void 0,this.stMaxSuggestionHeight=void 0,this.stMode=void 0,this.stSourceCountry=void 0,this.stSuglite=void 0,this.stSuggestionBottomPadding=50,this.stSuggestContentMaxHeight=void 0,this.isSuggestionPopoverOpen=!1,this.openPopoverId=null,this._uiNonce=0,this.baseConfig=new n.a("search",this,this.onUpdateUI),n.A.announceVersion(),this.stSearchScope="all",this._onChangeQueue={},n.a.Log("SEARCH constructor"),i.E.getGeocoders(),this.langCode=this.langCode||"en-us",n.B._initialize(this.langCode),this.setLocaleStrings(),this.sourceCountry=this.sourceCountry||"US",this.selectedHierarchy=this.selectedHierarchy,this.stSearchScope="all",this.baseConfig.updateLocaleSettings({language:this.langCode,country:this.sourceCountry}),this.config){const e=JSON.parse(this.config);this.baseConfig.updateConfig(e),e?.selectedGeographyLevels&&e?.selectedGeographyLevels.length>0&&this.setActiveLevels(e.selectedGeographyLevels,!0)}this._onChangeQueue={},this.geoenrichmentUrl&&i.E.setGeoenrichmentUrl(this.geoenrichmentUrl),i.T.token?.access_token&&(this.token=this.stToken=i.T.token.access_token),i.T.setToken(this.username,this.token)}onConfigChange(e){if(this.baseConfig&&e&&n.A.hasText(e)){this._configChangeInProgress=!0;const t=JSON.parse(e);n.a.LogConfig("SEARCH config changed=",t),t&&t.config&&void 0!==t.config.useLatestDataSource&&(this._useLatestDefaultHierarchy=t.config.useLatestDataSource,this._defaultHierarchy="",i.G.getGEDefaultHierarchy(this.stSourceCountry,this.stToken).then(e=>{this._defaultHierarchy=e})),this.baseConfig.updateConfig(t),this.baseConfig?.config?.selectedGeographyLevels&&this.baseConfig?.config?.selectedGeographyLevels.length>0&&this.setActiveLevels(this.baseConfig.config.selectedGeographyLevels),this.syncSearchScopeFromConfig(!0),this._uiNonce=this._uiNonce+1,this._configChangeInProgress=!1}}calculatePopoverMaxHeight(){try{const e=n.A.queryElementById.call(this,this._inputId);if(!e){const e="number"==typeof this.stMaxSuggestionHeight?this.stMaxSuggestionHeight:Number.POSITIVE_INFINITY,t=Math.floor(.9*window.innerHeight)-(this.stSuggestionBottomPadding??50);return Math.min(t,e)+"px"}const t=e.getBoundingClientRect(),s=this.stSuggestionBottomPadding??50,o=10,i=window.innerHeight-t.bottom-s,a=t.top-o,r=i>160?i:Math.max(a,i),c="number"==typeof this.stMaxSuggestionHeight?this.stMaxSuggestionHeight:Number.POSITIVE_INFINITY,h=160,l=Math.max(h,Math.min(r,c));return`${Math.floor(l)}px`}catch{const e="number"==typeof this.stMaxSuggestionHeight?this.stMaxSuggestionHeight:Number.POSITIVE_INFINITY,t=Math.floor(.9*window.innerHeight)-(this.stSuggestionBottomPadding??50);return Math.min(t,e)+"px"}}onLocaleSettingsChanged(){this.getFilteredGeographyLevels()}parseGeographyFlag(e){return null!=typeof e&&n.A.hasText(e)&&"true"==e.trim().toLowerCase()}onNoGeographyChanged(){this.stNoGeography=this.parseGeographyFlag(this.nogeography),!1===this.stNoGeography&&(this.stSearchScope="all")}onMaxSuggestionHeightChanged(){void 0!==this.maxsuggestionheight&&n.A.hasText(this.maxsuggestionheight)?this.stMaxSuggestionHeight=parseInt(this.maxsuggestionheight):this.stMaxSuggestionHeight=void 0,n.a.Log("SEARCH max suggestion height changed to ",this.stMaxSuggestionHeight)}onSuggestionBottomPaddingChanged(){const e=void 0!==this.suggestionBottomPadding&&n.A.hasText(this.suggestionBottomPadding)?parseInt(this.suggestionBottomPadding):50;this.stSuggestionBottomPadding=isNaN(e)?50:Math.max(0,e)}onEnvChanged(){this.stEnv=this.env,i.E.setEnvironment(this.env),this.baseConfig&&this.baseConfig.updateConfig({env:this.env})}onTokenChanged(){this.stToken=this.token,this.baseConfig&&this.baseConfig.updateConfig({token:this.token}),this.token&&i.T.token&&(i.T.token.access_token=this.token)}onUsernameChanged(){this.stUsername=this.username,this.baseConfig&&this.baseConfig.updateConfig({username:this.username})}onLangCodeChanged(){this.stLangCode=this.langCode,this.baseConfig&&this.baseConfig.updateConfig({langCode:this.langCode})}onGeoenrichmentUrlChanged(){this.stGeoenrichmentUrl=this.geoenrichmentUrl,this.baseConfig&&this.baseConfig.updateConfig({geoenrichmentUrl:this.geoenrichmentUrl})}onThemeChanged(){this.stTheme=this.theme,this.baseConfig&&this.baseConfig.setTheme(this.theme)}onCountryChanged(){this.stSourceCountry=this.sourceCountry,this.baseConfig&&this.baseConfig.updateConfig({sourceCountry:this.sourceCountry})}onSearchTextChanged(){this.hideDropdown(),this.hideSuggestions();const e=n.A.queryElementById.call(this,this._inputId);e&&this.currentSearchText&&(e.value=this.currentSearchText)}onModeChanged(){this.stMode=this.mode}onSugliteChanged(){this.stSuglite=!1,void 0!==typeof this.suglite&&"true"===this.suglite&&(this.stSuglite=!0)}onActiveLevelsChanged(){this.stActiveLevels=JSON.parse(this.activeLevels)}searchResults;searchCleared;onStandardGeographyItemSelected(e){this._onSelectedGeographyItem(e.detail.item),this.hideSuggestions(),this._clearSearchText(),this.focusInput()}onStandardGeographyItemChecked(e){"other"==e.detail.itemsType&&(this.hideSuggestions(),this._clearSearchText(),this.focusInput())}async searchIsEmpty(){const e=n.A.queryElementById.call(this,this._inputId);if(!e)return!1;const t=n.A.queryElement.call(self,"input",e);if(!t)return!1;const s=t.value;return!(s&&n.A.hasText(s))}async getSearchResults(){return this._searchResponseItemData}async getConfig(){return this.baseConfig}async setLocale(e){e&&(null!=typeof e.language&&this.baseConfig.updateLocaleSettings({language:e.language}),null!=typeof e.country&&this.baseConfig.updateLocaleSettings({country:e.country}),null!=typeof e.location&&this.baseConfig.updateLocaleSettings({location:e.location}),null!=typeof e.geocodeOutFields&&this.baseConfig.updateLocaleSettings({geocodeOutFields:e.geocodeOutFields}),this.onLocaleSettingsChanged())}async getGeographyLevels(){let e=[],t=await this.getFilteredGeographyLevels();return t&&t.length>0&&t.forEach(t=>{e.push(t.name)}),e}async setActiveLevels(e,t=!1){if(t||this.resetUI(!0,!1),e)if(e.length>0){this.stActiveLevels=[...e],this._geographyActiveLevels=[];for(let t=0;t<e.length;t++){if(!e[t]||!n.A.hasText(e[t]))continue;let s=await this.levelNameIsValid(e[t]);s&&this._geographyActiveLevels.push(s)}t||this.populateSuggestions()}else this._geographyActiveLevels=[]}async setMapView(e){}async setColors(e){this.colors=e,this.baseConfig.syncConfigFromProps()}async setTheme(e){this.baseConfig.setTheme(e)}async onPropChange(e,t){this._onChangeCallback={fn:e,ctx:t}}selectorPopupOpened;selectorPopupClosed;onExternalSearchCleared(e){try{const t=e?.detail;if(!(!t||"object"==typeof t&&0===Object.keys(t).length))return;const s=this.baseConfig?.config?.baSearchType;(0===s||"0"===s||void 0===s)&&(this._lockSearchScope=!1,this._configForcesSingleScope=!1,this._searchScopeDropDownSelected=!1,this.stSearchScope="all",this._lastInputValue="",this._suggestionRequestSeq=0,this.focusInput(),this._uiNonce=this._uiNonce+1)}catch{}}_doBackspace(){const e=n.A.queryElementById.call(this,this._inputId);if(e){const t=e.shadowRoot.querySelector("input");if(t){let e=t.value;if(e&&e.length>0&&null!=t.selectionStart&&null!=t.selectionEnd){const s=t.selectionStart,o=t.selectionEnd,i=s===o?e.slice(0,s-1)+e.slice(s):e.slice(0,s)+e.slice(o);t.value=i,t.focus(),s===o?t.setSelectionRange(s-1,s-1):t.setSelectionRange(s+1,s)}}}}onUpdateUI(){this.applyStyles()}applyStyles(){if(this.baseConfig?.config?.colors&&Object.keys(this.baseConfig.config.colors).length>0){n.a.LogConfig("SEARCH applyStyles",this.baseConfig?.config?.colors);const e=n.A.queryElement.call(this,"div.baSearchOuter");if(e){const t=e.querySelectorAll("calcite-dropdown");t&&"style"in t&&t.style.setProperty("height","32px"),e.querySelectorAll("calcite-button").forEach(e=>{if(e.shadowRoot){let t=e.shadowRoot.querySelector("button");t&&"style"in t&&t.style.setProperty("height","32px")}})}}}syncSearchScopeFromConfig(e){n.a.LogConfig("SEARCH syncSearchScope",this.baseConfig.config);const t=this.baseConfig.config?.baSearchType;if(void 0===t)return;const s=1==t?"address":2==t?"boundary":"all";if(this._lockSearchScope&&"all"===s&&!this._configChangeInProgress)return void n.a.Log("SEARCH scope locked; ignoring transient revert to ALL");if("all"===s&&this._searchScopeDropDownSelected)return this._lockSearchScope=!1,this._configForcesSingleScope=!1,void n.a.Log("SEARCH config -> ALL; preserving user-selected scope:",this.stSearchScope);this._configForcesSingleScope="all"!==s;const o=this.stSearchScope!==s;this.stSearchScope=s,this._lockSearchScope=this._configForcesSingleScope,n.a.Log("SEARCH searchScope is now:",this.stSearchScope),o&&e&&(this.hideSuggestions(),this._clearSearchText(),this.focusInput())}_debug(...e){this._verboseLogging}_debounce2(e,t){const s=this;s._debounceTimer&&clearTimeout(s._debounceTimer),s._debounceTimer=setTimeout(function(){s._debounceTimer=null,e.apply(s)},t)}_onFilteredPropChanged(){this._onChangeCallback&&this._onChangeCallback.fn(this._onChangeCallback.ctx,this._onChangeQueue),this._onChangeQueue={}}setLocaleStrings(){n.B._initialize(this.langCode),this.labels={dropdownLocation:n.B.i18n("address-location-or-place"),dropdownBoundary:n.B.i18n("boundary-name"),dropdownAll:n.B.i18n("dropdown-all"),watermarkAll:n.B.i18n("all-placeholder"),watermarkLocation:n.B.i18n("enter-address-loc-or-place"),watermarkBoundary:n.B.i18n("enter-boundary-name")},this.showSearch=n.B.i18n("show-search"),this.searchPlaceholder=n.B.i18n("search-placeholder"),this.searchLabel=n.B.i18n("search-label"),this.searchAll=n.B.i18n("dropdown-all"),this.searchAllPlaceholder=n.B.i18n("all-placeholder"),this.searchPlaceholderShort=n.B.i18n("search-placeholder-short"),this.searchEnterBoundary=n.B.i18n("search-enter-boundary"),this.searchBoundary=n.B.i18n("search-boundary")}_onPropChanged(e,t){const s=this;this._onChangeQueue[e]=t,this._debounce2(()=>{s._onFilteredPropChanged.call(s)},250)}_clearSearchText(){const e=n.A.queryElementById.call(this,this._inputId);e&&(e.value=""),this.suggestionResults={location:[],boundary:[]},this.hideSuggestions()}async onClickLocationSuggestionItem(e){const t=this;!t.geocoderClient&&t.token&&(t.geocoderClient=new a(t.token)),t.geocoderClient&&(await t.geocoderClient.geocode(e.text,{magicKey:e.magicKey,outFields:t.baseConfig._localeSettings.geocodeOutFields,outSR:4326}).then(e=>{e&&(t._searchResponseItemData={context:t,type:"location",mode:t.stMode,name:e.candidates[0].attributes.PlaceName,address:e.candidates[0].attributes.Place_addr,location:{lon:e.candidates[0].location.x,lat:e.candidates[0].location.y}},t.searchResults.emit(t._searchResponseItemData),t._onPropChanged("searchResults",t._searchResponseItemData),t.resetUI(!1))}).catch(e=>{n.a.Error("arcgis-ba-search Error:",e)}),t.hideSuggestions(),t._clearSearchText(),t.focusInput())}_findGeographyLevel(e){let t;if(this._geographyLevels)for(let s=0;s<this._geographyLevels.length;s++){const o=this._geographyLevels[s];if(o.id===e){t=o;break}}return t}_onSelectedGeographyItem(e){const t=this,s=e.id,o=e.name;if(this.suggestionResults?.boundary)for(let e=0;e<this.suggestionResults.boundary.length;e++){let a=this.suggestionResults.boundary[e];if(a.attributes&&a.attributes.ObjectId==s){let e=a.attributes,s=t._findGeographyLevel(e.DataLayerID);const r=s?s.defaultGeneralization:0;i.G.requestStdGeography(e.DataLayerID,e.AreaID,{generalizationLevel:r,returnGeometry:!0,sourceCountry:t.stSourceCountry||"US",optionalCountryHierarchy:t.selectedHierarchy,langCode:t.langCode,token:t.token}).then(s=>{if(s&&s.length>0){let i=s[0];t._searchResponseItemData={context:t,type:"geography",areaName:a.attributes.AreaName,areaId:a.attributes.AreaID,geometry:i.geometry.rings,mode:t.stMode,attributes:e,title:o},t.searchResults.emit(t._searchResponseItemData),this._onPropChanged("searchResults",t._searchResponseItemData),t.resetUI(!1)}},e=>{if(n.a.Error("arcgis-ba-search Error ",e),e)throw e});break}}}async levelNameIsValid(e){if(!e||!n.A.hasText(e))return;let t=await this.getFilteredGeographyLevels();if(t&&t.length>0)for(let s=0;s<t.length;s++)if(t[s].name==e)return t[s].id}focusInput(){const e=n.A.queryElementById.call(this,this._inputId);e&&n.A.queryElement.call(this,"input",e).focus()}_loadInstances(){this._instanceId||(this._instanceId=n.E.generateId(this._idPrefix).id),this._inputId||(this._inputId=n.E.generateId(this._idPrefixInput).id),this._dropLocId||(this._dropLocId=n.E.generateId(this._idPrefixDropLoc).id),this._dropAllid||(this._dropAllid=n.E.generateId(this._idPrefixDropAll).id),this._dropBdyId||(this._dropBdyId=n.E.generateId(this._idPrefixDropBdy).id),this._dropGroupId||(this._dropGroupId=n.E.generateId(this._idPrefixDropGroup).id),this._suggestId||(this._suggestId=n.E.generateId(this._idPrefixSuggest).id),this._suggestPopoverId||(this._suggestPopoverId=n.E.generateId(this._idPrefixSuggestPopover).id),this._suggestContentId||(this._suggestContentId=n.E.generateId(this._idPrefixSuggestContent).id),this._dropdownId||(this._dropdownId=n.E.generateId(this._idPrefixDropDown).id)}getCountry(){return this.stSourceCountry||this.baseConfig._localeSettings.country}async getFilteredGeographyLevels(){let e=this,t=e.stActiveLevels&&e.stActiveLevels.length>0;if(t||!e._geographyLevels||e._geographyLevels.length<=0||e._geographyLevelsSource!=e.getCountry()){let s=e.baseConfig?.config?.selectedHierarchy;const o=e.getCountry();(!s||s.length<=0)&&(s=await i.G.getGEDefaultHierarchy(o,e.token,void 0,!0),(!s||s.length<=0)&&(s=""));try{let a=await i.G.getStandardGeographyLevels(o,e.langCode,s,e.token);if(a&&a&&a.levels&&a.levels.length>0){e._geographyLevels=[];for(let s=0;s<a.levels.length;s++){let o=a.levels[s];(!t||e.stActiveLevels&&e.stActiveLevels.length>0&&e.stActiveLevels.includes(o.name))&&o&&o.id&&o.name&&n.A.hasText(o.id)&&n.A.hasText(o.name)&&e._geographyLevels.push({id:o.id,name:o.name,show:!0,defaultGeneralization:o.defaultGeneralizationLevel})}e._geographyLevelsSource=e.getCountry()}}catch(e){console.error("arcgis-ba-search: Error getting geography levels: ",e)}}return e._geographyLevels}async componentWillLoad(){if(this.initialSearchScope){const e=this.initialSearchScope;"address"!==e&&"boundary"!==e&&"all"!==e||(this.stSearchScope=e,this._lockSearchScope=!!this.lockSearchScopeOnInit&&"all"!==e,this._searchScopeDropDownSelected=this._lockSearchScope)}this.stNoGeography=this.parseGeographyFlag(this.nogeography),this.stMaxSuggestionHeight=void 0!==this.maxsuggestionheight&&n.A.hasText(this.maxsuggestionheight)?parseInt(this.maxsuggestionheight):void 0,n.a.Log("SEARCH componentWillLoad max suggest height= ",this.stMaxSuggestionHeight),this.activeLevels&&n.A.hasText(this.activeLevels)&&(this.stActiveLevels=JSON.parse(this.activeLevels)),this.sourceCountry&&n.A.hasText(this.sourceCountry)&&(this.stSourceCountry=this.sourceCountry),!this._hasSetEnv&&this.env&&(this._hasSetEnv=!0,this.stEnv=this.env,i.E.setEnvironment(this.env)),this.geocodeUrl&&i.E.setGeocodeUrl(this.geocodeUrl),this.theme?this.baseConfig.setTheme(this.theme):this.baseConfig.setTheme("light"),this.nogeography=this.stNoGeography.toString(),this._loadInstances(),this.stMode=this.mode,this.stSuglite=!1,void 0!==typeof this.suglite&&"true"===this.suglite&&(this.stSuglite=!0),await this.getFilteredGeographyLevels()}resetUI(e,t){if(t||this.hideDropdown(),this.hideSuggestions(),!e&&this._inputId&&n.A.hasText(this._inputId)){n.A.queryElementById.call(this,this._inputId).value=""}}componentDidLoad(){const e=this,t=n.A.queryElementById.call(e,e._dropAllid);t&&(t.innerText=e.labels.dropdownAll);const s=n.A.queryElementById.call(e,e._dropLocId);s&&(s.innerText=e.labels.dropdownLocation);const o=n.A.queryElementById.call(e,e._dropBdyId);o&&(o.innerText=e.labels.dropdownBoundary);const a=(new Date).getTime();n.A.runUntilCondition(()=>{const t=n.A.queryElementById.call(e,e._inputId),s=n.A.queryElement.call(e,"input",t);return null!=t&&null!=s},a,30,1800,()=>{e._loadInstances(),e.applyCssAndThemeTo_Search(),i.T.setToken(e.username,e.token),(!e.baseConfig._localeSettings.language||e.baseConfig._localeSettings.language.length<=0||e.baseConfig._localeSettings.language!==e.langCode&&e.langCode)&&(e.baseConfig._localeSettings.language=e.langCode||"en-us",n.B._initialize(e.baseConfig._localeSettings.language),e.setLocaleStrings());const t=n.A.queryElementById.call(e,e._inputId),s=n.A.queryElement.call(e,"input",t),o=n.A.queryElementById.call(e,e._dropAllid);o&&(o.innerText=e.labels.dropdownAll);const a=n.A.queryElementById.call(e,e._dropLocId);a&&(a.innerText=e.labels.dropdownLocation);const r=n.A.queryElementById.call(e,e._dropBdyId);if(r&&(r.innerText=e.labels.dropdownBoundary),t){let s="all";switch(e.stSearchScope){case"all":s=e.labels.watermarkAll;break;case"address":s=e.labels.watermarkLocation;break;case"boundary":s=e.labels.watermarkBoundary}t.setAttribute("placeholder",s)}function c(){e.baSearchKeyTimer=null;const t=n.A.queryElementById.call(e,e._inputId);e._lastInputValue=t.value,e.populateSuggestions();let s=n.A.queryElement.call(e,"ba-accordion");s&&s.openAccordion()}function h(){if(e.baSearchKeyTimer){let t=e.baSearchKeyTimer;e.baSearchKeyTimer=null,clearTimeout(t)}e.baSearchKeyTimer=setTimeout(c,1e3)}s&&(s.addEventListener("focusin",()=>{const t=n.A.queryElementById.call(e,e._inputId).value.trim();if(t&&""!==t){const t=("address"===e.stSearchScope||"all"===e.stSearchScope)&&e.suggestionResults?.location&&e.suggestionResults.location.length>0,s=("boundary"===e.stSearchScope||"all"===e.stSearchScope)&&e.suggestionResults?.boundary&&e.suggestionResults.boundary.length>0;t||s?e.showSuggestions():e.hideSuggestions()}else e.suggestionResults={location:[],boundary:[]},e.hideSuggestions()}),s.onchange=()=>{const t=n.A.queryElementById.call(e,e._inputId).value;e._lastInputValue!=t&&(t&&t.trim().length>0?h():e.hideSuggestions()),e._lastInputValue=t},t.addEventListener("calciteInputInput",()=>{const t=n.A.queryElementById.call(e,e._inputId).value.trim();t!==e._lastInputValue&&(""===t?(e.suggestionResults={location:[],boundary:[]},e.hideSuggestions()):h(),e._lastInputValue=t)}),t.addEventListener("calciteInputClear",()=>{if(e.suggestionResults={location:[],boundary:[]},e.hideSuggestions(),e._lastInputValue="",e._configForcesSingleScope){e._lockSearchScope=!0,e._searchScopeDropDownSelected=!0;const t=e.baseConfig?.config?.baSearchType;1===t||"1"===t?(e.stSearchScope="address",e._configForcesSingleScope=!0):2!==t&&"2"!==t||(e.stSearchScope="boundary",e._configForcesSingleScope=!0)}else{const t=e.baseConfig?.config?.baSearchType;(0===t||"0"===t||void 0===t)&&(e._lockSearchScope=!1,e._configForcesSingleScope=!1,e._searchScopeDropDownSelected=!1,e.stSearchScope="all",e._uiNonce=e._uiNonce+1)}}),s.onkeyup=()=>{setTimeout(function(){e.hideDropdown(),h()},0)});let l=n.A.queryElementById.call(e,e._dropdownId);l&&l.addEventListener("calciteDropdownOpen",function(){e.resetUI(!1,!0)}),e.baseConfig&&e.baseConfig.onComponentHasRendered(),e.applyCssAndThemeTo_Suggestions(),document.addEventListener("click",this._onDocumentClickSuggestionPopover);const g=n.A.queryElement.call(e,"div.baSearchOuter",e.el);g&&(g.style.visibility="inherit")})}componentWillRender(){const e=this;try{const t=e.baseConfig.config.baSearchType;if(void 0!==t){const s=0===t||"0"===t;if(e._lockSearchScope&&s&&!e._configChangeInProgress);else{if(e._searchTypeConv[t]!=e.stSearchScope&&!e._searchScopeDropDownSelected){const t=!0;e.syncSearchScopeFromConfig(t)}}}}catch(e){n.a.Error("error: search has invalid config baSearchType",e)}}componentDidUpdate(){const e=this;e.baseConfig&&e.baseConfig.onComponentHasRendered()}disconnectedCallback(){document.removeEventListener("click",this._onDocumentClickSuggestionPopover),this._suggestionStateTimer&&(clearTimeout(this._suggestionStateTimer),this._suggestionStateTimer=null)}handleSearchScopeSelection(e){this.stSearchScope=e,this._searchScopeDropDownSelected=!0,this.suggestionResults={location:[],boundary:[]},this.focusInput()}handleLocationSelection(e,t){return t.context.onClickLocationSuggestionItem(t.item),e.preventDefault(),e.stopPropagation(),!1}renderLocationSuggestions(){const e=this,t={"margin-right":"0px"};return("address"==e.stSearchScope||"all"==e.stSearchScope)&&e.suggestionResults?.location&&e.suggestionResults.location.length>0?(0,o.h)("calcite-list",{label:"Location Suggestions",class:"no-separators"},this.suggestionResults.location.map(s=>(0,o.h)("calcite-list-item",{value:s.magicKey,label:s.text,onClick:t=>e.handleLocationSelection(t,{context:e,item:s})},(0,o.h)("calcite-icon",{style:t,icon:"pin",scale:"s",slot:"content-start"})))):null}renderBoundarySuggestions(){const e=this;if(("boundary"==e.stSearchScope||"all"==e.stSearchScope)&&e.suggestionResults?.boundary&&e.suggestionResults.boundary.length>0&&e.suggestionResults.boundary[0].attributes&&e.suggestionResults.boundary[0].attributes.DataLayerID){let t,s,o={};for(let i=0;i<e.suggestionResults.boundary.length;i++){console.log("here");try{if(t=e.suggestionResults.boundary[i],s=t.attributes.DataLayerID,n.A.hasText(s)){o[s]||(o[s]={aveScore:null,records:[]});let e="   Score:"+t.attributes.Score.toString(),i=t.attributes.CountryAbbr+"/"+t.attributes.MajorSubdivisionName+"/"+t.attributes.AreaID+e,n={id:t.attributes.ObjectId,areaId:t.attributes.AreaID,name:t.attributes.AreaName,major:t.attributes.MajorSubdivisionAbbr,subText:i,score:t.attributes.Score,isZipcode:t.attributes.DataLayerID.toLowerCase().includes("zip")};o[s].records.push(n)}}catch(e){n.a.Error("arcgis-ba-search error",e)}}let i=(new Date).getTime();return e.renderStdGeographyLevelLists(o,i)}}_getAccordionTitle(e){let t=e;if(this._geographyLevelData&&this._geographyLevelData.length>0)for(let s=0;s<this._geographyLevelData.length;s++){const o=this._geographyLevelData[s];if(o&&o.id===e&&n.A.hasText(o.name))return t=o.name,t}if(this._geographyLevels&&this._geographyLevels.length>0)for(let s=0;s<this._geographyLevels.length;s++){const o=this._geographyLevels[s];if(o&&o.id===e&&n.A.hasText(o.name))return t=o.name,t}return t}renderStdGeographyLevelAccordion(e,t,s){const i=this;if(t.records&&t.records.length>0){const n=100,a=t.records.sort(function(e,t){return null==e.score?0:null==t.score?1:t.score-e.score}).slice(0,n);let r=[];a.forEach(function(e){const t=", "+e.major,s=e.name.includes(t)?"":t,o=e.isZipcode&&("US"==i.sourceCountry||"PR"===i.sourceCountry),n=!("US"==i.sourceCountry||"PR"===i.sourceCountry),a=o||n?e.areaId+" ("+e.name+")":e.name+s;r.push({id:e.id,name:a,subText:e.subText||"",score:e.score,icon:"polygon-area"})});const c=JSON.stringify(r),h=void 0!==typeof this.stSuglite&&!1!==this.stSuglite?"true":"false",l=this._getAccordionTitle(e);return(0,o.h)("ba-accordion",{suglite:h,groupid:s,calciteicon:"polygon-area",displayname:l,content:c})}}calculateLevelAverageScores(e){let t=n.A.getKeys(e);for(let s=0;s<t.length;s++){let o=e[t[s]];if(!o.records||o.records.length<=0)o.aveScore=null;else{let e=0,t=0;o.records.forEach(function(s){e+=s.score,t++}),o.aveScore=e/t}}}renderStdGeographyLevelLists(e,t){let s=[],i=n.A.getKeys(e);if(i.length>0){this.calculateLevelAverageScores(e);let n=i.sort(function(t,s){return null==e[t].aveScore?0:null==e[s].aveScore?1:e[s].aveScore-e[t].aveScore});for(let o=0;o<n.length;o++){let i=e[n[o]];null!=i.aveScore&&s.push(this.renderStdGeographyLevelAccordion(n[o],i,t))}return s&&s.length>0?(0,o.h)("div",{class:"ba-search-boundary-types"},s):(0,o.h)("div",null)}}hideDropdown(){if(this._dropdownId){let e=n.A.queryElementById.call(this,this._dropdownId);e&&e.setAttribute("open","false")}}showDropdown(){let e=n.A.queryElementById.call(this,this._dropdownId);e&&e.setAttribute("open","true")}toggleDropdown(){let e=n.A.queryElementById.call(this,this._dropdownId);if(e){"true"==e.getAttribute("open")?this.hideDropdown():(this.hideSuggestions(),e.setAttribute("open","true"))}else this._debug("arcgis-ba-search: missing dropdown...",this._dropdownId);if(this._inputId){n.A.queryElementById.call(this,this._inputId).value=""}}toggleSuggestions(){n.A.queryElementById.call(this,this._suggestId)&&(this.isSuggestionPopoverOpen?this.hideSuggestions():this.showSuggestions())}applyCssAndThemeTo_Suggestions(){let e=this;if(this._suggestId){n.A.applyCss.call(e,[["background-color","#282828"],["color","#f4f3f3"]],{selector:"div.baSearchSuggestionsOuter"});let t=n.A.queryElementAll.call(e,"calcite-dropdown-item");t&&t.length>0&&t.forEach(function(t){let s=n.A.queryElement.call(e,"div.container",t);s&&(s.style.paddingLeft="4px")})}}applyCssAndThemeTo_Search(){const e=this;this.config&&n.A.hasText(this.config)&&!this.baseConfig.config&&this.onConfigChange(this.config),n.A.applyCss.call(e,[["paddingLeft","4px"]],{id:n.A.fixId(e._dropLocId),subSelector:"div.container"}),n.A.applyCss.call(e,[["fontSize","9pt"]],{selector:"calcite-dropdown-item",subSelector:"div.container"}),n.A.applyCss.call(e,[["minWidth","212px"]],{selector:"calcite-dropdown-group"})}adjustSuggestionsPosition(){}repositionSuggesions(e){n.a.Log("SEARCH repositionSuggestions..."),e=e||n.A.queryElementById.call(this,this._suggestId);const t=n.A.queryElementById.call(this,n.A.fixId(this._inputId)),s=t.getBoundingClientRect(),o=window.innerHeight;let i;const a=s.bottom,r=s.top;i=a+300+30>o?o-r:o-a-30,e.style.maxHeight=i<300?o-(o-r+30)+"px":i+"px",e.style.maxWidth=s.width+30+"px",a+i+30>o?(e.style.top="auto",e.style.bottom="calc(100% + 5px)"):e.style.top="";const c=n.A.queryElement.call(this,"button.calcite-input__clear-button",t);c&&(c.style.border="none",c.style.backgroundColor="transparent")}calculatePopoverWidth(){const e=n.A.queryElementById.call(this,this._inputId);if(!e)return{maxWidth:"450px",minWidth:"300px"};const t=e.getBoundingClientRect(),s=window.innerWidth,o=t.width,i=Math.max(300,o);return{maxWidth:`${Math.min(Math.max(o,450),.9*s,800)}px`,minWidth:`${i}px`}}showSuggestions(){this._suggestionStateTimer&&clearTimeout(this._suggestionStateTimer),this._suggestionStateTimer=setTimeout(()=>{if(n.a.Log("SEARCH showSuggestions= ",this.suggestionResults),!this.suggestionResults||!this.suggestionResults.location&&!this.suggestionResults.boundary)return void this.hideSuggestions();const e=("address"===this.stSearchScope||"all"===this.stSearchScope)&&this.suggestionResults?.location&&this.suggestionResults.location.length>0,t=("boundary"===this.stSearchScope||"all"===this.stSearchScope)&&this.suggestionResults?.boundary&&this.suggestionResults.boundary.length>0;if(e||t){if(this.isSuggestionPopoverOpen){const e=n.A.queryElementById.call(this,this._suggestPopoverId);if(e){const{maxWidth:t,minWidth:s}=this.calculatePopoverWidth();e.style.setProperty("--calcite-popover-max-width",t),e.style.setProperty("--calcite-popover-min-width",s)}return void(this.stSuggestContentMaxHeight=this.calculatePopoverMaxHeight())}this.isSuggestionPopoverOpen=!0,this.openPopoverId=this._suggestPopoverId,setTimeout(()=>{const e=n.A.queryElementById.call(this,this._suggestPopoverId),t=n.A.queryElementById.call(this,this._inputId);if(e&&t){e.referenceElement=t;const{maxWidth:s,minWidth:o}=this.calculatePopoverWidth();e.style.setProperty("--calcite-popover-max-width",s),e.style.setProperty("--calcite-popover-min-width",o),this.stSuggestContentMaxHeight=this.calculatePopoverMaxHeight(),window.addEventListener("resize",this._recalcPopoverMaxHeight,{passive:!0})}},10),this.selectorPopupOpened.emit()}else this.hideSuggestions()},50)}hideSuggestions(){this._suggestionStateTimer&&clearTimeout(this._suggestionStateTimer),this.isSuggestionPopoverOpen&&(this.isSuggestionPopoverOpen=!1,this.openPopoverId=null,window.removeEventListener("resize",this._recalcPopoverMaxHeight),this.selectorPopupClosed.emit())}async populateSuggestions(){const e=this;if(n.a.Log("SEARCH populate suggestions..."),!e._inputId||!n.A.hasText(e._inputId))return void e._debug("arcgis-ba-search: missing input id...",e._inputId);const t=n.A.queryElementById.call(e,e._inputId),s=t?.value?.trim()||"";e.searchQuery=s;const o=++e._suggestionRequestSeq;if(!e.searchQuery||0===e.searchQuery.length)return e.suggestionResults={location:[],boundary:[]},void e.hideSuggestions();if(e.searchQuery&&e.searchQuery.length>0){r=e.token,e.geocoderClient&&e.geocoderClient.suggest||(e.geocoderClient=new a(r)),i.E.orgGeocoders&&i.E.orgGeocoders.length>0&&i.E.geocodeUrl&&(e.geocoderClient.geocoderUrl=n.A.fixUrlEndingSlash(i.E.geocodeUrl)),e.suggestionResults={location:[],boundary:[]};const t={location:[],boundary:[]};if(e.searchQuery&&n.A.hasText(e.searchQuery)){if("address"===e.stSearchScope||"all"===e.stSearchScope)try{const i=await e.geocoderClient.suggest(e.searchQuery,{sourceCountry:e.sourceCountry,langCode:e.langCode});if(n.a.Log("SEARCH suggest query results=",i),o!==e._suggestionRequestSeq||n.A.queryElementById.call(e,e._inputId)?.value?.trim()!==s)return;i&&i.length>0?i.forEach(e=>{e.isCollection||t.location.push(e)}):"address"===e.stSearchScope&&(this._debug("arcgis-ba-search: no locations found "),e.hideSuggestions())}catch(t){o===e._suggestionRequestSeq&&(e.suggestionResults={location:[],boundary:[]}),n.a.Error("arcgis-ba-search error ",t),"address"===e.stSearchScope&&e.hideSuggestions()}if("boundary"===e.stSearchScope||"all"===e.stSearchScope){let a;if(e._geographyLevelData&&e._geographyLevelData.length>0&&(a=[],a.push(...e._geographyLevelData)),!a||a.length<=0)try{a=await e.getFilteredGeographyLevels()}catch(e){console.warn("arcgis-ba-search getFilteredGeographyLevels error",e)}if(a&&a.length>0){const r=await i.T.token.access_token,c=a.map(e=>e.id.toString());let h;try{let t=e.selectedHierarchy||e.baseConfig?.config?.selectedHierarchy;if(t&&n.A.hasText(t)||(t=await i.G.getGEDefaultHierarchy(e.stSourceCountry,r,void 0,!0)),h=await i.G.searchStdGeography(e.searchQuery,{featureLimit:1e3,geographyLayers:c,useFuzzySearch:!0,langCode:e.langCode,sourceCountry:e.stSourceCountry,optionalCountryHierarchy:t,token:r}),o!==e._suggestionRequestSeq||n.A.queryElementById.call(e,e._inputId)?.value?.trim()!==s)return}catch(t){o===e._suggestionRequestSeq&&(e.suggestionResults={location:[],boundary:[]}),-1!=t.message.indexOf("token")?n.a.Error("search: invalid token",t):n.a.Error("arcgis-ba-search error ",t)}h?.length?(e._openFirst=!0,t.boundary=h):(n.a.Warn("arcgis-ba-search Warning: No STD GEO search results"),"boundary"===e.stSearchScope&&e.hideSuggestions())}else n.a.Error("arcgis-ba-search searchStdGeography error: no geography levels selected"),e.hideSuggestions()}}if(o===e._suggestionRequestSeq&&n.A.queryElementById.call(e,e._inputId)?.value?.trim()===s){t.location.length,e.suggestionResults,t.boundary.length,e.suggestionResults;e.suggestionResults=t,e.showSuggestions()}}else e.hideSuggestions();var r}_onDocumentClickSuggestionPopover=e=>{const t=n.A.queryElementById.call(this,this._suggestPopoverId),s=n.A.queryElementById.call(this,this._inputId);if(!t||!s)return;const o=e.composedPath&&e.composedPath()||[];o.includes(t)||o.includes(s)||(this.isSuggestionPopoverOpen=!1,this.openPopoverId=null)};_recalcPopoverMaxHeight=()=>{this.isSuggestionPopoverOpen&&(this.stSuggestContentMaxHeight=this.calculatePopoverMaxHeight())};render(){const e=this;if(n.a.Log("SEARCH render",this.baseConfig.config,this.stSearchScope),e._openFirst){function a(){let t=n.A.queryElement.call(e,"ba-accordion");t&&t.openAccordion()}e._openFirst=!1,setTimeout(a,100)}null!=e.stNoGeography&&!0===e.stNoGeography&&(e.stSearchScope="address");const t=!!this.baseConfig?.config||this._uiNonce>0,s="all"===this.stSearchScope&&!this._lockSearchScope,i=t&&s?"arcgisBaSearchDropdownChooser":"arcgisBaSearchNoDropdown";return(0,o.h)("div",{key:"5b1c86b53746b53d226a6630b41bccdba1138a9b",class:"arcgis-ba-search-root"},(0,o.h)("div",{key:"ab4a275adbb59298feb24981557e9216b8e74106",class:"baSearchOuter",style:{visibility:"hidden",position:"relative"}},(0,o.h)("calcite-dropdown",{key:"564e62ebdf7e3abc04b96829daa8a0e12e281186",class:i},(0,o.h)("calcite-button",{key:"f550ea28478eb6285d8bde0ab8c4e25a385438d0",slot:"trigger",appearance:"outline-fill",kind:"neutral","icon-start":"chevron-down"}),(0,o.h)("calcite-dropdown-group",{key:"ac06cb88e9c22ac3a5ffee024ff49d2ab8b4fa76","selection-mode":"single"},(0,o.h)("calcite-dropdown-item",{key:"fd3a3dcfb3983f6369d00027dcf4bcef40d8a7af","icon-start":"analysis",tabIndex:0,onClick:()=>this.handleSearchScopeSelection("all")},this.searchAll),(0,o.h)("calcite-dropdown-item",{key:"a8c6fc49b8d8a4e11ae0c1282554b6afd1846229","icon-start":"pin",tabIndex:0,onClick:()=>this.handleSearchScopeSelection("address")},this.searchPlaceholderShort),(0,o.h)("calcite-dropdown-item",{key:"c8ec4423e7f2f8edae22a3e3fb0215f79a5ba552","icon-start":"polygon",tabIndex:0,onClick:()=>this.handleSearchScopeSelection("boundary")},this.searchBoundary," "))),(0,o.h)("calcite-input",{key:"4c855b606f2b69d67fc4d03d62a776dc47646569",id:this._inputId,class:"arcgisBaSearchInput",clearable:!0,placeholder:"address"===this.stSearchScope?this.searchPlaceholder:"all"===this.stSearchScope?this.searchAllPlaceholder:this.searchEnterBoundary}),(0,o.h)("calcite-popover",{key:"44e295062132acaee599c275a81e3954eb443d18",id:this._suggestPopoverId,open:this.isSuggestionPopoverOpen,autoClose:!0,pointerDisabled:!0,placement:"bottom-start",label:"address"===this.stSearchScope?this.searchPlaceholder:"all"===this.stSearchScope?this.searchAllPlaceholder:this.searchEnterBoundary,referenceElement:"",overlayPositioning:"fixed",style:{"--calcite-popover-max-width":"450px","--calcite-popover-min-width":"300px","--calcite-popover-max-height":"none",resize:"none",overflow:"hidden"}},(()=>{const e=("address"===this.stSearchScope||"all"===this.stSearchScope)&&this.suggestionResults?.location&&this.suggestionResults.location.length>0,t=("boundary"===this.stSearchScope||"all"===this.stSearchScope)&&this.suggestionResults?.boundary&&this.suggestionResults.boundary.length>0;return e||t?(0,o.h)("div",{id:this._suggestContentId,style:{overflowY:"auto",padding:"4px 0",minWidth:"300px",maxHeight:this.stSuggestContentMaxHeight||"60vh"}},e&&this.renderLocationSuggestions(),t&&this.renderBoundarySuggestions()):null})())))}static get watchers(){return{config:["onConfigChange"],nogeography:["onNoGeographyChanged"],maxsuggestionheight:["onMaxSuggestionHeightChanged"],suggestionBottomPadding:["onSuggestionBottomPaddingChanged"],env:["onEnvChanged"],token:["onTokenChanged"],username:["onUsernameChanged"],langCode:["onLangCodeChanged"],geoenrichmentUrl:["onGeoenrichmentUrlChanged"],theme:["onThemeChanged"],sourceCountry:["onCountryChanged"],currentSearchText:["onSearchTextChanged"],mode:["onModeChanged"],suglite:["onSugliteChanged"],activeLevels:["onActiveLevelsChanged"]}}};r.style=":host{display:block}arcgis-ba-search{width:50%;height:36px}.ba-calcite-dropdown-group{display:block;min-width:240px}.arcgisBaSearchIconButton{width:30px;height:30px}.arcgisBaSearchInputNoGeog{position:relative;left:0;width:100%;z-index:1}.arcgisBASearchOuter{position:relative}.baSearchElement{position:absolute;top:0;left:0;width:32px;height:32px;z-index:1}.baSearchMagGlass{position:absolute;top:0;right:-7px;height:calc(100% - 2px);width:32px;background-image:url(\"data:image/svg+xml,%3Csvg xmlns:svg='http://www.w3.org/2000/svg' xmlns='http://www.w3.org/2000/svg' version='1.1' x='0px' y='0px' width='28px' height='28px' viewBox='0 0 28 28' enable-background='new 0 0 28 28' xml:space='preserve'%3E%3Cpath d='M29.974,53.745c-0.034-0.165-0.307-0.782-0.402-0.923c-0.096-0.137-1.078-0.882-1.232-0.942 c-0.158-0.06-0.851-0.03-1.041-0.03l-14.906,0.033l2.392-2.447c0.085-0.086,0.173-0.184,0.259-0.27 c0.087-0.086,0.173-0.173,0.261-0.26c0.086-0.086,0.168-0.172,0.247-0.26c0.077-0.086,0.149-0.172,0.22-0.259 c0.139-0.12,0.258-0.251,0.352-0.39c0.096-0.139,0.176-0.281,0.247-0.428c0.07-0.148,0.12-0.303,0.156-0.469 c0.035-0.166,0.051-0.342,0.051-0.533c0-0.087-0.005-0.168-0.014-0.247c-0.008-0.078-0.021-0.155-0.038-0.233 c-0.018-0.077-0.039-0.156-0.065-0.234c-0.025-0.077-0.057-0.16-0.091-0.246c-0.035-0.086-0.074-0.169-0.117-0.246 c-0.043-0.078-0.092-0.156-0.143-0.234c-0.051-0.077-0.108-0.151-0.168-0.221c-0.061-0.07-0.126-0.138-0.195-0.207 c-0.139-0.121-0.281-0.225-0.429-0.312s-0.3-0.158-0.455-0.22c-0.156-0.061-0.321-0.102-0.494-0.127 c-0.172-0.025-0.354-0.035-0.546-0.035c-0.19,0-0.372,0.025-0.545,0.051c-0.173,0.025-0.337,0.092-0.494,0.152 c-0.156,0.061-0.307,0.178-0.455,0.264c-0.146,0.086-0.29,0.279-0.429,0.4L2,54.301l9.95,9.646c0.138,0.139,0.281,0.08,0.429,0.174 c0.147,0.096,0.298,0.18,0.454,0.248c0.156,0.07,0.321,0.121,0.494,0.154c0.173,0.035,0.355,0.053,0.546,0.053 c0.19,0,0.372-0.018,0.545-0.053c0.174-0.033,0.339-0.084,0.493-0.154c0.155-0.068,0.308-0.152,0.454-0.248 c0.148-0.094,0.29-0.211,0.43-0.35c0.139-0.121,0.257-0.252,0.351-0.391c0.096-0.139,0.178-0.285,0.248-0.441 c0.068-0.156,0.121-0.318,0.156-0.482c0.034-0.164,0.051-0.34,0.051-0.531c0-0.07-0.004-0.143-0.014-0.221 c-0.009-0.078-0.021-0.156-0.038-0.234c-0.018-0.076-0.04-0.154-0.064-0.232c-0.026-0.078-0.058-0.162-0.092-0.248 c-0.035-0.088-0.075-0.168-0.117-0.246c-0.043-0.078-0.091-0.15-0.143-0.223c-0.051-0.068-0.107-0.139-0.168-0.205 c-0.061-0.072-0.127-0.141-0.195-0.211c-0.07-0.084-0.143-0.174-0.221-0.258c-0.078-0.088-0.16-0.176-0.247-0.262 c-0.088-0.086-0.173-0.176-0.261-0.262c-0.085-0.088-0.172-0.18-0.259-0.266l-2.391-2.352l14.906-0.031 c0.19,0,0.883-0.059,1.041-0.121c0.154-0.061,0.742-0.436,0.882-0.559c0.139-0.121,0.528-0.676,0.598-0.832 c0.068-0.156,0.121-0.217,0.155-0.379C30.009,54.619,30.009,53.91,29.974,53.745z' style='fill:%23555;fill-opacity:1'/%3E%3Cg id='g2988' style='fill:%23555;fill-opacity:1'%3E%3Cpath d='M0.1,10.535c0-1.45,0.271-2.808,0.815-4.076c0.543-1.268,1.286-2.374,2.229-3.315c0.941-0.942,2.047-1.685,3.315-2.229 C7.727,0.372,9.085,0.1,10.535,0.1s2.808,0.271,4.076,0.815c1.269,0.543,2.374,1.286,3.315,2.229 c0.94,0.941,1.685,2.047,2.229,3.315c0.543,1.268,0.814,2.626,0.814,4.076c0,0.508-0.035,1.01-0.109,1.509 c-0.071,0.498-0.177,0.982-0.311,1.453c-0.138,0.47-0.306,0.924-0.504,1.358c-0.198,0.434-0.428,0.851-0.681,1.25l7.88,7.853 c0.221,0.219,0.381,0.471,0.491,0.762c0.108,0.291,0.163,0.586,0.163,0.883c0,0.298-0.055,0.595-0.163,0.884 c-0.11,0.291-0.271,0.543-0.491,0.76c-0.106,0.109-0.227,0.206-0.351,0.287c-0.127,0.08-0.26,0.149-0.395,0.204 c-0.137,0.054-0.275,0.095-0.422,0.124c-0.145,0.025-0.29,0.039-0.435,0.039s-0.291-0.014-0.436-0.039 c-0.146-0.029-0.291-0.07-0.434-0.124c-0.146-0.055-0.281-0.124-0.408-0.204c-0.127-0.081-0.244-0.178-0.354-0.287l-7.853-7.881 c-0.398,0.255-0.816,0.483-1.25,0.681c-0.435,0.2-0.888,0.367-1.359,0.505c-0.471,0.136-0.956,0.238-1.454,0.312 c-0.499,0.072-1,0.107-1.509,0.107c-1.448,0-2.807-0.271-4.076-0.814c-1.268-0.543-2.373-1.288-3.314-2.229 c-0.943-0.942-1.685-2.048-2.229-3.315c-0.543-1.268-0.815-2.626-0.815-4.076H0.1z M3.579,10.535c0,0.961,0.182,1.862,0.544,2.704 c0.362,0.844,0.86,1.581,1.494,2.215c0.634,0.635,1.372,1.131,2.215,1.493c0.841,0.363,1.742,0.545,2.703,0.545 s1.862-0.182,2.704-0.545c0.844-0.362,1.581-0.858,2.214-1.493c0.635-0.634,1.132-1.372,1.494-2.215 c0.363-0.841,0.545-1.743,0.545-2.704s-0.182-1.862-0.545-2.703c-0.362-0.843-0.859-1.582-1.494-2.215 c-0.633-0.634-1.371-1.132-2.214-1.494c-0.841-0.362-1.743-0.544-2.704-0.544S8.673,3.76,7.832,4.123 C6.989,4.485,6.25,4.983,5.617,5.617S4.485,6.989,4.123,7.832C3.76,8.673,3.579,9.574,3.579,10.535z' id='path2990' style='fill:%23555;fill-opacity:1'/%3E%3C/g%3E%3C/svg%3E\");background-size:18px;background-position:2px 6px;background-repeat:no-repeat;}.baSearchInput{position:absolute;top:0;left:32px;height:28px;width:100%;}.htmlSearchBounds{position:relative;top:0;left:40px;width:50%}.baSearchToggle{position:absolute;top:0;left:0;width:32px;height:32px;background-image:url(\"data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' x='0px' y='0px' viewBox='0 0 1000 1000' enable-background='new 0 0 1000 1000' xml:space='preserve'%3E%3Cg%3E%3Cpath d='M18.1,232.2l452.4,581.9c15.1,19.5,44.5,19.5,59.7,0L982,232.2c19.3-24.8,1.5-60.9-29.9-60.9H47.9C16.4,171.2-1.3,207.4,18.1,232.2z'/%3E%3C/g%3E%3C/svg%3E%0A\");background-size:12px;background-position:12px;background-repeat:no-repeat;}.baSearchDropdownTarget{position:absolute;top:-10px;left:-10px;width:42px;height:42px;z-index:3}.baSearchDropdownText{position:absolute;top:8px;left:37px}.baSearchDropdownImgLoc{position:absolute;top:6px;left:4px;width:24px;height:26px;background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cpath fill='%236F6F6F' d='M7.4688 0C5.3586 0 3 .8459 3 3.0469V12l4.5 4 4.5-4V3.047C12 .8459 9.5797 0 7.4687 0zM11 11.5508L7.5 14.662 4 11.5508v-8.504C4 1.0577 7.1138 1 7.4688 1 8.7803 1 11 1.4312 11 3.0469v8.5039zM7.5 3C6.1193 3 5 4.1193 5 5.5S6.1193 8 7.5 8 10 6.8807 10 5.5 8.8807 3 7.5 3zm0 4.125c-.896 0-1.625-.729-1.625-1.625 0-.8961.729-1.625 1.625-1.625s1.625.7289 1.625 1.625c0 .896-.729 1.625-1.625 1.625z'/%3E%3C/svg%3E\");background-size:24px;background-repeat:no-repeat}.baSearchDropdownImgBdy{position:absolute;top:6px;left:4px;width:24px;height:24px;background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 16 16'%3E%3Cpath fill='%236F6F6F' d='M2 16H1V1h1v15zM15 .5h-1v7h1v-7zm0 .5V0H1v1h14zm-5 6.4928V8h5V7h-4.5432M3.445 15.8799V15H1v1h2.2299m8.5968-8.9816h-.9945l-.112.1134c-.1064.1133-.375.4022-.4073.4598-.1172.21-.1445.5303-.1787 1.0361-.0117.168-.0628.9791-.1039 1.0621-.2607.3682-.1006.8613.0166 1.2237a1.806 1.806 0 0 1 .0264.078c-.0977.0157-.1816.047-.252.0929l-.0605-.0127c-.0068-.002-.7373-.1768-1.3828-.1768-.4082 0-.6934.0674-.876.21-.3232.2548-.501.3945-.5195.6513-.0166.2373.1289.3887.2558.5205l.0899.0957c.2217.2412.33.545.2617.7393-.0791.2275-.417.3135-.6113.3437a1.6306 1.6306 0 0 1-.2725.0235c-.3242 0-.5664-.1084-.8525-.2354-.3399-.1513-.9566-.3222-1.5338-.3398-.3095 0-.9385.25-1.0361.7265-.043.2042-.0918.5948.0596.8975.0039.0381.2027.2861-.7915 1.3555L2.4448 16h1.0748c.5275-.638.8057-1.2883.5453-1.815-.0214-.044-.04-.1885-.0127-.3555.0342-.042.2041-.124.255-.125.4072.0127.9077.1308 1.2241.2705.3193.1426.6807.3027 1.1748.3027.123 0 .2549-.0098.3975-.0312.8203-.13 1.128-.546 1.2422-.873.168-.4815.0029-1.0724-.4297-1.544l-.0176-.0186c.0322-.0254.0664-.0517.0996-.0781.001 0 .0664-.039.3408-.039.3545 0 .8496.0624 1.2334.1552.1338.0322.2373.0527.336.0527.162 0 .288-.0556.3379-.121l.1445.0038c.1816 0 .3262-.0683.4297-.203.2011-.2589.0976-.5772-.0127-.917-.0957-.291-.1358-.4678-.126-.5108.1611-.2246.2103-.8912.2513-1.484.0127-.1826.043-.6093.0752-.6826a.309.309 0 0 1 .0303-.039h2.8057v-.8008l-2.0175-.129z'/%3E%3C/svg%3E\");background-size:24px;background-repeat:no-repeat}.baSearchDropdownMenu{position:absolute;top:27px;left:6px;min-width:260px;margin:0;list-style:none;padding-left:0;z-index:4;display:none}.baSearchDropdownMenu.baSearchMenuIsVisible{display:block}.baSearchDropdownMenu li{padding:5px 10px}ul.baSearchDropdownMenu li{position:relative;height:30px;padding-top:9px;padding-bottom:0;z-index:4}.lightSuggestionOuter,.baSearchSuggestionsOuter{position:absolute;top:30px;left:0px;min-width:210px;height:auto;min-height:41px;overflow-y:none;max-height:0px;transition-property:all;transition-duration:.5s;transition-timing-function:cubic-bezier(0, 1, 0.5, 1);font-family:arial;font-size:10pt;z-index:4;overflow:none;display:none}.baSearchSuggestionsOuter{width:210px;max-width:210px;}.lightSuggestionOuter{width:100%;max-width:100%;overflow-y:auto;box-shadow:rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;top:37px;}ul.baSearchSuggestionsUl{padding-inline-start:12px;margin-block-start:8px;margin-block-end:6px;width:calc(100% - 14px)}ul.baSearchSuggestionsUl li{position:relative;display:flex;flex-direction:row;align-items:center;padding-top:4px;padding-left:1px;padding-bottom:4px;font-size:9.5pt;list-style:none;z-index:4}.baSearchSuggestionNoSub{font-size:11.5pt;}.baSearchStdGeographyInfo{font-size:8.5pt;padding-top:4px;}.baSearchStdGeographyName{font-size:11.5pt}.baSearchOuter{position:relative;width:100%;height:32px;display:flex;justify-content:left;align-items:center;}.arcgisBaSearchDropdownChooser{position:relative;width:32px;height:32px;z-index:5;padding-right:3px}.arcgisBaSearchDropdownChooser calcite-button:focus-visible{outline-offset:-1px}.arcgisBaSearchInput{flex-grow:1;height:32px;z-index:1}.arcgisBaSearchInput>input{left:1px}.arcgisBaSearchNoDropdown{display:none}.no-separators{--calcite-color-border-3:transparent}.no-separators calcite-list-item{--calcite-color-border-3:transparent}.no-separators calcite-list-item::part(container){border-block-end:0}.no-separators::part(list){border:0}.suggestion-dropdown{font-family:var(--calcite-sans-family);font-size:var(--calcite-font-size--1);line-height:1.375}.suggestion-item{transition:background-color 0.15s ease;cursor:pointer}.suggestion-item:hover{background-color:var(--calcite-color-foreground-2) !important}.suggestion-item:active{background-color:var(--calcite-color-foreground-3) !important}.baSearchOuter{position:relative;width:100%;height:32px;display:flex;justify-content:left;align-items:center}.arcgis-ba-search-root calcite-popover{--calcite-popover-max-width:none;--calcite-popover-min-width:300px;z-index:999999 !important}"}}]);