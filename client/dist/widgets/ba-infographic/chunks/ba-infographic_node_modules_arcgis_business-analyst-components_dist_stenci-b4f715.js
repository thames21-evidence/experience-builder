"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_ba-infographic_node_modules_arcgis_business-analyst-components_dist_stenci-b4f715"],{1247:(t,e,s)=>{s.r(e),s.d(e,{arcgis_infographic_modal:()=>o});var a=s(982),i=s(7212);const o=class{get el(){return(0,a.g)(this)}baseConfig;_instanceId;_idPrefix="arcgis-infographic-modal-";constructor(t){(0,a.r)(this,t),this.backgroundColor="var(--sys-color-surface-paper)",this.textColor="var(--sys-color-surface-paperText)",this.dividerColor="var(--sys-color-divider-secondary)",this.mode="light",this.modalId=void 0,this.config=void 0,this.searchResultObj=void 0,this.isOpen=!1,this.selectedReport=void 0,this.infographicOptions=void 0,this.portalUrl=void 0,this.portalOnlineGEProxy=void 0,this.selectedHierarchy=void 0,this.useLatestDataSource=void 0,this.standardInfographicID=void 0,this.stSelectedHierarchy=i.U,this.stUseLatestDataSource=void 0,this.stStandardInfographicID=void 0,this.baseConfig=new i.a("modal",this,this.onUpdateUI),this._instanceId=i.E.generateId(this._idPrefix).id}onHierarchyChanged(){this.stSelectedHierarchy=this.selectedHierarchy,this.baseConfig&&this.baseConfig.updateConfig({selectedHierarchy:this.stSelectedHierarchy})}onUseLatestChanged(){this.stUseLatestDataSource=this.useLatestDataSource,this.baseConfig&&this.baseConfig.updateConfig({useLatestDataSource:this.stUseLatestDataSource});const t=document.getElementById(this.modalId);t&&t.setAttribute("useLatestDataSource",this.useLatestDataSource)}onStandardInfographicChanged(){this.stStandardInfographicID=this.standardInfographicID,this.baseConfig&&this.baseConfig.updateConfig({standardInfographicID:this.stStandardInfographicID});const t=document.getElementById(this.modalId);t&&t.setAttribute("standardInfographicID",this.stStandardInfographicID)}onConfigChange(t,e){if(i.a.LogConfig("MODAL config change",t,e),t&&"string"==typeof t&&i.A.hasText(t)){const e=JSON.parse(t);i.a.LogConfig("BAC Modal config changing... ",e,e.username,e.token),this.baseConfig.updateConfig(e)}}async setUseLatestDataSource(t,e){this.useLatestDataSource=t,this.standardInfographicID=e,this.baseConfig?.config&&(this.baseConfig.config.useLatestDataSource=t,this.baseConfig.config.standardInfographicID=e);const s=document.getElementById(this.modalId);s&&s.setUseLatestDataSource(t,e)}onInvalidHierarchy(){this.el.style.setProperty("background-color","#f4f4f4"),this.el.style.setProperty("position","absolute"),this.el.style.setProperty("top","0"),this.el.style.setProperty("left","0"),this.el.style.setProperty("width","100%"),this.el.style.setProperty("height","100%")}onUpdateUI(){}setLocaleStrings(){}async componentWillLoad(){if(i.a.LogConfig("BAC Modal willLoad",this.config),this.config){let t="object"==typeof this.config?JSON.stringify(this.config):this.config;this.onConfigChange(t,""),this.config.selectedHierarchy&&!this.selectedHierarchy&&(this.selectedHierarchy=this.config.selectedHierarchy)}this.baseConfig&&(void 0!==this.standardInfographicID&&i.A.hasText(this.standardInfographicID)&&this.baseConfig.updateConfig({standardInfographicID:this.standardInfographicID}),void 0!==this.useLatestDataSource&&this.baseConfig.updateConfig({useLatestDataSource:this.useLatestDataSource})),this.selectedHierarchy&&this.onHierarchyChanged()}componentDidLoad(){const t=this;requestAnimationFrame(()=>{t.baseConfig&&t.baseConfig.onComponentHasRendered()})}componentDidUpdate(){this.baseConfig&&this.baseConfig.onComponentHasRendered()}render(){if(!this.searchResultObj)return;const{env:t,username:e,token:s,geoenrichmentUrl:o,sourceCountry:r,langCode:n,useLatestDataSource:h,standardInfographicID:c}=this.baseConfig.config,{name:d,address:g,type:l,attributes:f,geometry:p,geography:u,symbol:y}=this.searchResultObj;let b=d;"location"===l&&g&&g.trim()?b=g:b&&b.trim()||(b=g||d||""),i.a.Log("BAC Modal render [searchResultObj, locationName]",this.searchResultObj,b),i.a.Log("BAC Modal render [config, useLatestDataSource]",this.baseConfig.config,h,c);const C=null!=typeof this.useLatestDataSource?this.useLatestDataSource:void 0!==h&&1==h,I=void 0!==this.standardInfographicID&&i.A.hasText(this.standardInfographicID)?this.standardInfographicID:"",D=this.searchResultObj&&this.searchResultObj.lat?parseFloat(this.searchResultObj.lat).toString():"",S=this.searchResultObj&&this.searchResultObj.lon?parseFloat(this.searchResultObj.lon).toString():"";return(0,a.h)("div",{class:"arcgis-infographic-modal-root",style:{"--ba-bg":this.backgroundColor,"--ba-text":this.textColor,"--ba-divider":this.dividerColor}},(0,a.h)("arcgis-infographic",{id:this.modalId,env:t,username:e,token:s,geoenrichmentUrl:o,portalUrl:this.portalUrl,portalOnlineGEProxy:this.portalOnlineGEProxy,locationName:b,locationAttributes:f?JSON.stringify(f):"",sourceCountry:r,selectedHierarchy:this.selectedHierarchy,options:JSON.stringify(this.infographicOptions),langCode:n,reportId:this.selectedReport,reportLocation:`${S},${D}`,reportgeometry:p?JSON.stringify(p):"",reportgeography:u?JSON.stringify(u):"",useLatestDataSource:C,standardInfographicID:I,onInvalidHierarchy:()=>this.onInvalidHierarchy(),reportsymbol:y?JSON.stringify(y):""}))}static get watchers(){return{selectedHierarchy:["onHierarchyChanged"],useLatestDataSource:["onUseLatestChanged"],standardInfographicID:["onStandardInfographicChanged"],config:["onConfigChange"]}}};o.style=":host{display:block;background:var(--ba-bg, var(--sys-color-surface-paper));color:var(--ba-text, var(--sys-color-surface-paperText))}.arcgisInfographicModalDeprecated{background-color:#f4f4f4;position:absolute;top:0;left:0;width:100%;height:100%}"}}]);