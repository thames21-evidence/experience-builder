"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_ba-infographic_node_modules_arcgis_business-analyst-components_dis-687823"],{5278:(e,t,i)=>{i.d(t,{B:()=>f,I:()=>u,S:()=>h,a:()=>l,b:()=>d,c:()=>c});var s,a,r=i(982),n=i(7212),o=i(8249);!function(e){e[e.Rings=1e3]="Rings",e[e.DriveMinutes=300]="DriveMinutes",e[e.DriveMile=300]="DriveMile",e[e.DriveKm=482.8]="DriveKm",e[e.WalkMinutes=300]="WalkMinutes",e[e.WalkMile=27]="WalkMile",e[e.WalkKm=43.45]="WalkKm"}(s||(s={})),function(e){e[e.Rings=.1]="Rings",e[e.Drive=1]="Drive",e[e.Walk=1]="Walk"}(a||(a={}));const f={ring:"ring",drivetime:"drivetime",walktime:"walktime"},l={minutes:"minutes",kilometers:"kilometers",miles:"miles"},h={search:"Search",buffers:"Buffers",infographics:"Infographics"},c=class{get el(){return(0,r.g)(this)}baseConfig;_instanceId;_idPrefix="search-step-";_searchId;_idPrefixSearch="search-step-comp-";_localeSettings;_dbg=!1;constructor(e){(0,r.r)(this,e),this.searchResultObjChanged=(0,r.c)(this,"searchResultObjChanged",6),this.drawPointClickSearchStep=(0,r.c)(this,"drawPointClickSearchStep",6),this.drawPolygonClickSearchStep=(0,r.c)(this,"drawPolygonClickSearchStep",6),this.config=void 0,this.theme=void 0,this.selectedFeatureResult=void 0,this.env=void 0,this.token=void 0,this.username=void 0,this.langCode=void 0,this.sourceCountry=void 0,this.geoenrichmentUrl=void 0,this.geocodeUrl=void 0,this.stepId=void 0,this.searchResultString=void 0,this.stTheme=void 0,this.stEnv=void 0,this.stToken=void 0,this.searchResultObj=void 0,this.baseConfig=new n.a("search-step",this,this.onUpdateUI)}onConfigChange(e,t){if(n.a.LogConfig("SEARCH-STEP config update",e,t),e&&"string"==typeof e&&n.A.hasText(e)){const t=JSON.parse(e);n.a.Log("SEARCH-STEP searchType",t.baSearchType),this.baseConfig.updateConfig(t)}}onTokenChanged(){this.stToken=this.token;const e=this.token,t=this.baseConfig?.config?.username;e&&n.A.hasText(e)&&t&&n.A.hasText(t)&&o.T.setToken(t,e),this.baseConfig&&this.baseConfig.updateConfig({token:this.token})}onEnvChanged(){this.stEnv=this.env,o.E.setEnvironment(this.env),this.baseConfig&&this.baseConfig.updateConfig({env:this.env})}onThemeChanged(){this.stTheme=this.theme,this.baseConfig.setTheme(this.theme)}searchResultObjChanged;drawPointClickSearchStep;drawPolygonClickSearchStep;searchResultsEventHandler(e){this.onSiteObjectChanged({origin:"basearch",data:e})}async setActiveLevels(e){if(this._searchId&&!n.A.hasText(this._searchId)){e&&0!==e.length||(e=[]);const t=n.A.queryElementById.call(this,this._searchId);t&&t.setActiveLevels(e)}}setLocaleStrings(){}_loadInstances(){this._instanceId||(this._instanceId=n.E.generateId(this._idPrefix).id),this._searchId||(this._searchId=n.E.generateId(this._idPrefixSearch).id)}onsearchResultChange(e){n.a.Log("search-step Selected Feature Result changed:",e),this.onSiteObjectChanged({origin:"selectedFeatureResult",data:JSON.parse(e)})}onUpdateUI(){}async componentWillLoad(){n.a.Log("search-step willLoad"),this.config&&this.onConfigChange(this.config,""),this.theme?this.baseConfig.setTheme(this.theme):this.baseConfig.setTheme("light"),this._loadInstances()}componentDidUpdate(){n.a.LogConfig("SEARCH-STEP didUpdate",this.baseConfig.config),this.baseConfig&&this.baseConfig.onComponentHasRendered()}componentDidLoad(){const e=this;requestAnimationFrame(()=>{e._loadInstances(),n.a.LogConfig("SEARCH-STEP did load",e.baseConfig.hasSubComponents(),e._searchId),e.baseConfig&&e.baseConfig.onComponentHasRendered()})}isLocationType(e){return"string"==typeof e&&(e&&("location"===e?.toLowerCase()||"point"===e?.toLowerCase()))}clearSearchResult(){this.baseConfig&&this.baseConfig.updateConfig({searchResultObj:{}}),this.searchResultObj={},this.searchResultString="",this.searchResultObjChanged.emit({})}onSiteObjectChanged(e){if(n.a.Log("SEARCH-STEP onSiteObjectChanged",e),e&&e.data&&("basearch"===e.origin||"selectedFeatureResult"===e.origin)){const t=e.data;let i={};if("selectedFeatureResult"===e.origin)i=t.detail?t.detail:{};else if("location"===t.detail?.type)i={type:"location",name:t.detail.name,address:t.detail.address,lat:t.detail.location?.lat||t.detail.lat,lon:t.detail.location?.lon||t.detail.lon};else if("geography"===t.detail.type){const e={type:"polygon",rings:t.detail.geometry,spatial:{wkid:4326},latitude:34.055561,longitude:-117.182602};i={type:"geography",name:t.detail.title,areaId:t.detail.areaId,geography:{sourceCountry:t.detail.attributes.CountryAbbr,levelId:t.detail.attributes.DataLayerID,hierarchy:t.detail.attributes.Hierarchy,id:t.detail.areaId,attributes:t.detail.attributes},geometry:e}}this.searchResultObj=i,this.searchResultString="";const s=i.name&&n.A.hasText(i.name)?i.name:i.displayName||null,a=i.address&&n.A.hasText(i.address)?i.address:null;this.isLocationType(i.type)?a?this.searchResultString=a:s&&(this.searchResultString=s):this.searchResultString=s||"","selectedFeatureResult"!==e.origin&&this.searchResultObjChanged.emit(i)}}_getToken(){let e=o.T.token?.access_token;return e||(e=this.token),e}render(){const e=this.username,t=this.env,i=this._getToken(),s=this.geoenrichmentUrl,a=this.baseConfig.config.sourceCountry||this.baseConfig._localeSettings.country,o=this.langCode,f=this.baseConfig?.config?.baSearchType,l=2==f?"boundary":1==f?"address":"all",h="all"!==l;return(0,r.h)("div",{key:"460dde262db0e54d91ea412303cb1a383c8c07c3"},n.A.isEmptyObject(this.searchResultObj)?(0,r.h)("div",null,(0,r.h)("div",{class:"flex-grid"},this.baseConfig.config.workflowDisplayIntroText&&(0,r.h)("div",{class:"col arcgisSearchStepDescription"},this.baseConfig.config.workflowIntroText)),(0,r.h)("arcgis-ba-search",{id:this._searchId,config:this.baseConfig.getConfigString(),style:{width:"calc(100% - 3px)"},username:e,env:t,token:i,geoenrichmentUrl:s,geocodeUrl:this.geocodeUrl,sourceCountry:a,langCode:o,suglite:"true",initialSearchScope:l,lockSearchScopeOnInit:h}),(0,r.h)("div",null,(0,r.h)("slot",{name:"draw-components"}))):(0,r.h)("div",{class:"d-flex selectedSearchResultRowWF"},(0,r.h)("div",{class:"d-flex selectedSearchResultWF"},(0,r.h)("div",{class:"d-flex search-result-icon"},(0,r.h)("calcite-icon",{scale:"m",icon:this.isLocationType(this.searchResultObj.type)?"pin":"polygon"})),(0,r.h)("div",{class:"d-flex search-result-string"},this.searchResultString),(0,r.h)("div",{class:"d-flex close-icon",onClick:()=>{this.clearSearchResult()}},(0,r.h)("calcite-icon",{scale:"m",icon:"x",id:"clearSearch-button"})),(0,r.h)("calcite-tooltip",{label:n.B.i18n("clear-search"),"reference-element":"clearSearch-button"},(0,r.h)("span",null,n.B.i18n("clear-search"))))))}static get watchers(){return{config:["onConfigChange"],token:["onTokenChanged"],env:["onEnvChanged"],theme:["onThemeChanged"],selectedFeatureResult:["onsearchResultChange"]}}};c.style=":host{display:block}.arcgisSearchStepDescription{margin-bottom:8px;font-size:var(--calcite-font-size--2, 1em)}.selectedSearchResultRowWF{position:absolute;width:100%;overflow:visible;flex:1 1 auto;align-items:stretch;max-width:100%;background-color:var(--calcite-color-foreground-3);color:var(--calcite-color-text-1);z-index:9;position:relative}.selectedSearchResultButton{--calcite-button-background-color:var(--calcite-color-foreground-2, #f3f3f3);--calcite-button-border-color:var(--calcite-color-border-input, #949494);width:100%;text-align:left;cursor:default}.selectedSearchResultButton:disabled{opacity:1;--calcite-button-text-color:var(--calcite-color-text-1, #151515)}.clearSearchAction{position:absolute;top:50%;right:8px;transform:translateY(-50%);z-index:10;cursor:pointer}.selectedSearchResultWF{width:100%;padding:7px 10px;font-size:var(--calcite-font-size--1, 1.15em);display:flex;align-items:center;}.close-icon{margin-left:auto;cursor:pointer}.d-flex{display:flex;align-items:center}.search-result-string{padding-left:5px}";const d=class{get el(){return(0,r.g)(this)}baseConfig;_instanceId;_settingsId;_idPrefix="buffers-step-";_idSettingsPrefix="buffers-step-settings-";_localeSettings;_dbg=!1;constructor(e){(0,r.r)(this,e),this.bufferTypeChanged=(0,r.c)(this,"bufferTypeChanged",7),this.bufferValsChanged=(0,r.c)(this,"bufferValsChanged",7),this.bufferUnitChanged=(0,r.c)(this,"bufferUnitChanged",7),this.displayDrivetimeOptionsChanged=(0,r.c)(this,"displayDrivetimeOptionsChanged",7),this.routingUtilityUrl=void 0,this.config=void 0,this.colors=void 0,this.theme=void 0,this.langCode=void 0,this.stepId=void 0,this.env=void 0,this.currentBufferType=f.ring,this.stTheme=void 0,this.minBuffer=void 0,this.maxBuffer=void 0,this.stEnv=void 0,this.displayDrivetimeOptions=!1,this.bufferData={[f.ring]:{bufferVals:[1,3,5],bufferUnit:"miles"},[f.drivetime]:{bufferVals:[5,10,15],bufferUnit:"minutes"},[f.walktime]:{bufferVals:[5,10,15],bufferUnit:"minutes"}},this.baseConfig=new n.a("buffers-step",this,this.onUpdateUI)}onConfigChange(e,t){if(n.a.LogConfig("BUFFER-STEP config change",e,t),e&&"string"==typeof e&&n.A.hasText(e)){const i=JSON.parse(e),s=t&&n.A.hasText(t)?JSON.parse(t):null;this.baseConfig.updateConfig(i),s&&!this._isBufferDataChanged(i,s)||this._setBufferDataFromConfig()}}onEnvChanged(){this.stEnv=this.env,o.E.setEnvironment(this.env),this.baseConfig&&this.baseConfig.updateConfig({env:this.env})}onThemeChanged(){this.stTheme=this.theme,this.baseConfig.setTheme(this.theme)}onBufferTypeChange(){this.minBuffer=this.getMinBuffer(),this.maxBuffer=this.getMaxBuffer()}bufferTypeChanged;bufferValsChanged;bufferUnitChanged;displayDrivetimeOptionsChanged;setLocaleStrings(){}_loadInstances(){this._instanceId||(this._instanceId=n.E.generateId(this._idPrefix).id),this._settingsId||(this._idSettingsPrefix=n.E.generateId(this._idSettingsPrefix).id)}_isBufferDataChanged(e,t){return e.workflowRingsBuffer1!==t.workflowRingsBuffer1||e.workflowRingsBuffer2!==t.workflowRingsBuffer2||e.workflowRingsBuffer3!==t.workflowRingsBuffer3||e.workflowRingsBufferUnit!==t.workflowRingsBufferUnit||e.workflowAvailableBufferRings!==t.workflowAvailableBufferRings||(e.workflowDrivetimeBuffer1!==t.workflowDrivetimeBuffer1||e.workflowDrivetimeBuffer2!==t.workflowDrivetimeBuffer2||e.workflowDrivetimeBuffer3!==t.workflowDrivetimeBuffer3||e.workflowDrivetimeBufferUnit!==t.workflowDrivetimeBufferUnit||e.workflowAvailableBufferDrivetime!==t.workflowAvailableBufferDrivetime||(e.workflowWalktimeBuffer1!==t.workflowWalktimeBuffer1||e.workflowWalktimeBuffer2!==t.workflowWalktimeBuffer2||e.workflowWalktimeBuffer3!==t.workflowWalktimeBuffer3||e.workflowWalktimeBufferUnit!==t.workflowWalktimeBufferUnit||e.workflowAvailableBufferWalktime!==t.workflowAvailableBufferWalktime||e.displayDrivetimeOptions!==t.displayDrivetimeOptions))}_setBufferDataFromConfig(){const e=this.baseConfig?.config;e&&(this.bufferData[f.ring]={bufferVals:[e.workflowRingsBuffer1,e.workflowRingsBuffer2,e.workflowRingsBuffer3],bufferUnit:e.workflowRingsBufferUnit},this.bufferData[f.drivetime]={bufferVals:[e.workflowDrivetimeBuffer1,e.workflowDrivetimeBuffer2,e.workflowDrivetimeBuffer3],bufferUnit:e.workflowDrivetimeBufferUnit},this.bufferData[f.walktime]={bufferVals:[e.workflowWalktimeBuffer1,e.workflowWalktimeBuffer2,e.workflowWalktimeBuffer3],bufferUnit:e.workflowWalktimeBufferUnit},this.currentBufferType!==f.ring||e.workflowAvailableBufferRings?this.currentBufferType!==f.drivetime||e.workflowAvailableBufferDrivetime?this.currentBufferType!==f.walktime||e.workflowAvailableBufferWalktime||(e.workflowAvailableBufferRings?this.currentBufferType=f.ring:this.currentBufferType=f.drivetime):e.workflowAvailableBufferRings?this.currentBufferType=f.ring:this.currentBufferType=f.walktime:e.workflowAvailableBufferDrivetime?this.currentBufferType=f.drivetime:this.currentBufferType=f.walktime,this.displayDrivetimeOptions=e.displayDrivetimeOptions,this.displayDrivetimeOptionsChanged.emit(this.displayDrivetimeOptions),this.bufferTypeChanged.emit(this.currentBufferType),this.bufferValsChanged.emit(this.bufferData[this.currentBufferType].bufferVals),this.bufferUnitChanged.emit(this.bufferData[this.currentBufferType].bufferUnit))}onUpdateUI(){}async componentWillLoad(){this.config&&this.onConfigChange(this.config,""),this.theme?this.baseConfig.setTheme(this.theme):this.baseConfig.setTheme("light"),this.minBuffer=this.getMinBuffer(),this.maxBuffer=this.getMaxBuffer(),this._loadInstances()}componentDidUpdate(){this.baseConfig&&this.baseConfig.onComponentHasRendered()}componentDidLoad(){const e=this;requestAnimationFrame(()=>{e._loadInstances(),e.baseConfig&&e.baseConfig.onComponentHasRendered()})}cleanArray(e){let t=[];for(let i=0;i<e.length;i++)isNaN(e[i])||t.push(e[i]);return t}handleBufferValsChange(e,t){const{bufferData:i,currentBufferType:s,minBuffer:a}=this,r=i[s].bufferVals;n.a.Log("buffers-step data, vals",i,r);const o=r.reduce((e,t)=>isNaN(t)?e+1:e,0);n.a.Log("buffers-step  null values",o),null!==t&&(r[e]=t),3===o&&(r[0]=a),this.bufferValsChanged.emit(this.cleanArray(r))}handleBufferUnitChange(e){this.bufferData[this.currentBufferType].bufferUnit=e,this.bufferUnitChanged.emit(e),this.maxBuffer=this.getMaxBuffer(),n.a.Log("buffers-step  maxBuffer",this.maxBuffer)}handleTabClick(e){this.currentBufferType=e,this.bufferTypeChanged.emit(e),this.bufferValsChanged.emit(this.bufferData[e].bufferVals),this.bufferUnitChanged.emit(this.bufferData[e].bufferUnit)}getMaxBuffer(){const{bufferData:e,currentBufferType:t}=this,i=e[t]?.bufferUnit;switch(t){case f.ring:return s.Rings;case f.drivetime:if(i===l.minutes)return s.DriveMinutes;if(i===l.miles)return s.DriveMile;if(i===l.kilometers)return s.DriveKm;break;case f.walktime:if(i===l.minutes)return s.WalkMinutes;if(i===l.miles)return s.WalkMile;if(i===l.kilometers)return s.WalkKm;break;default:return 300}return 300}getMinBuffer(){switch(this.currentBufferType){case f.ring:return a.Rings;case f.drivetime:return a.Drive;case f.walktime:return a.Walk;default:return 1}}enforceMinMaxValues(e,t,i,s){let a=parseFloat(e.target.value);isNaN(a)||(a<t?a=t:a>i&&(a=i)),e.target.value=a,this.handleBufferValsChange(s,a)}getCalciteTab(e,t,i){n.B._initialize(this.langCode);const s=this.baseConfig.config.showIncrementButtons?"vertical":"none";return(0,r.h)("div",null,(0,r.h)("div",{class:"row",style:{display:"flex",alignItems:"left",margin:"8px 0px"}},t),(0,r.h)("div",{class:"flex-grid-fourths"},Array(3).fill(null).map((e,t)=>{const a=this.maxBuffer<this.bufferData[i].bufferVals[t]?this.maxBuffer:isNaN(this.bufferData[i].bufferVals[t])?null:this.bufferData[i].bufferVals[t];return(0,r.h)("div",{class:"col"},(0,r.h)("calcite-input-number",{numberButtonType:s,max:this.maxBuffer,min:this.minBuffer,value:a?.toString(),onCalciteInputNumberInput:e=>{const i=e.target,s=parseFloat(i.value);s>=this.minBuffer&&s<=this.maxBuffer&&this.handleBufferValsChange(t,s)},onCalciteInputNumberChange:e=>{const i=e.target,s=parseFloat(i.value),{bufferData:a,currentBufferType:r,minBuffer:n}=this,o=a[r].bufferVals,f=o.filter(e=>isNaN(e)).length;isNaN(s)&&2===f&&(o[0]=n),this.enforceMinMaxValues(e,this.minBuffer,this.maxBuffer,t)}}))}),(0,r.h)("div",{class:"col"},(0,r.h)("calcite-select",{label:"",onCalciteSelectChange:e=>{const t=e.target.value;this.handleBufferUnitChange(t)}},"time"===e&&(0,r.h)("calcite-option",{value:"minutes",selected:"minutes"===this.bufferData[i].bufferUnit},n.B.i18n("minutes")),(0,r.h)("calcite-option",{value:"miles",selected:"miles"===this.bufferData[i].bufferUnit},n.B.i18n("milesLowercase")),(0,r.h)("calcite-option",{value:"kilometers",selected:"kilometers"===this.bufferData[i].bufferUnit},n.B.i18n("kilometerAbbreviation"))))),this.currentBufferType===f.drivetime&&this.displayDrivetimeOptions&&(0,r.h)("buffer-drivetime-settings",{id:this._settingsId,style:{paddingTop:"20px"},class:"wf-buffer-drivetime-settings",config:this.baseConfig.getConfigString(),token:this.baseConfig.config.token,env:this.stEnv,routingUtilityUrl:this.routingUtilityUrl}))}render(){const e=this.baseConfig.config?this.baseConfig.config.workflowIntroTextBuffers:"";return n.B._initialize(this.langCode),(0,r.h)("div",{key:"65a0d4e50825c5fbc6b71abdf71af7d9ebbc0398"},(0,r.h)("div",{key:"25a21529aa7d4d7f76ec02b9dd667e71a706aaf2",class:"flex-grid"},this.baseConfig.config.workflowIntroTextBuffersCheckbox&&(0,r.h)("div",{key:"2b38b2bcedb09e36fd183a771186813c7d4cea6b",class:"arcgisBuffersStepDescription"},e)),(0,r.h)("div",{key:"777febbf86870e5984796cd6e9a3b0a4fe47003a",class:"flex-grid"},(0,r.h)("div",{key:"642a7077e530c79d91bf32575247419cbb6ba690",class:"col"},(0,r.h)("div",{key:"46a1c11b8733cbb9a0a7f50265e8c182e5af443c",class:"row",style:{display:"flex",alignItems:"left",margin:"8px 0px"}},n.B.i18n("buffer-type-label")),(0,r.h)("div",{key:"d12482288e86c25f174118ce1a883035a17a63b3",class:"segmented-control"},(0,r.h)("calcite-segmented-control",{key:"d91b584f3eab8d56023f4386a8c0c75ef05ee1a1",required:!0,width:"full",onCalciteSegmentedControlChange:e=>{this.handleTabClick(e.target.value)}},this.baseConfig.config.workflowAvailableBufferRings&&(0,r.h)("calcite-segmented-control-item",{key:"11f21519b69bccdaec1bc5df828a2a5095b64313",value:f.ring,checked:this.currentBufferType===f.ring},n.B.i18n("rings")),this.baseConfig.config.workflowAvailableBufferDrivetime&&(0,r.h)("calcite-segmented-control-item",{key:"417f62bd48dc03e5ef210a79778a36b939b1da2c",value:f.drivetime,checked:this.currentBufferType===f.drivetime},n.B.i18n("drivetime")),this.baseConfig.config.workflowAvailableBufferWalktime&&(0,r.h)("calcite-segmented-control-item",{key:"9d56b8dbcbc91fed0bfd2f0ea4b7b727f69c5ef3",value:f.walktime,checked:this.currentBufferType===f.walktime},n.B.i18n("walktime")))),this.baseConfig.config.workflowAvailableBufferRings&&(0,r.h)("div",{key:"1afd37687977891de83c29883a002315d7c0ab7d",id:this._instanceId+"rings-container",style:{display:this.currentBufferType===f.ring?"block":"none"}},this.getCalciteTab("radius",n.B.i18n("radius"),f.ring)),this.baseConfig.config.workflowAvailableBufferDrivetime&&(0,r.h)("div",{key:"dfde5aba27cb97ecf61ec916f006798da868663e",id:this._instanceId+"dt-container",style:{display:this.currentBufferType===f.drivetime?"block":"none"}},this.getCalciteTab("time",n.B.i18n("time"),f.drivetime)),this.baseConfig.config.workflowAvailableBufferWalktime&&(0,r.h)("div",{key:"a95b627f29c563dc278c4885c0dab3beb235cba3",id:this._instanceId+"wt-container",style:{display:this.currentBufferType===f.walktime?"block":"none"}},this.getCalciteTab("time",n.B.i18n("time"),f.walktime)))))}static get watchers(){return{config:["onConfigChange"],env:["onEnvChanged"],theme:["onThemeChanged"],currentBufferType:["onBufferTypeChange"]}}};d.style=":host{display:block}.flex-grid{display:flex}.flex-grid .col{flex:1;padding-inline:unset}.flex-grid-fourths{display:flex;min-width:275px}.flex-grid-fourths .col{padding:0 3px;box-sizing:border-box}.flex-grid-fourths .col:first-child{padding-left:0}.flex-grid-fourths .col:nth-child(4){min-width:110px;width:110px;padding-right:0}@media (max-width: 400px){.flex-grid,.flex-grid-fourths{display:block}.flex-grid .col,.flex-grid-fourths .col{width:100%;margin:0 0 5px 0;padding:0}}.arcgisBuffersStepDescription{margin-bottom:12px;font-size:var(--calcite-font-size--2, 1em)}.wf-drivetime-settings-selector{position:relative;width:calc(100% - 10px);height:40px}.wf-buffer-drivetime-settings{width:46%;min-width:240px;margin-top:20px;padding-top:0 !important;}";const u=class{get el(){return(0,r.g)(this)}baseConfig;_instanceId;_idPrefix="infographics-step-";_reportsId;_idPrefixReports="infographics-step-comp-";_reportsContId;_idPrefixReportsCont="infographics-report-cont-";_localeSettings;constructor(e){(0,r.r)(this,e),this.config=void 0,this.colors=void 0,this.theme=void 0,this.stepId=void 0,this.selectedReport=void 0,this.portalOnlineGEProxy=void 0,this.defaultReport=void 0,this.stDefaultReport=void 0,this.stTheme=void 0,n.a.LogConfig("INFOGRAPHIC-STEP constructor -------------------"),this.baseConfig=new n.a("infographics-step",this,this.onUpdateUI)}onConfigChange(e,t){if(n.a.LogConfig("INFOGRAPHIC-STEP config change",e,t),e&&"string"==typeof e&&n.A.hasText(e)){const t=JSON.parse(e);this.baseConfig.updateConfig(t),t&&t.defaultReport&&t.defaultReport.id&&t.defaultReport.name&&this.setDefaultReport(t.defaultReport)}}onDefaultReportChanged(){if(n.a.Log("INFO-STEP updating defaultReport",this.defaultReport),"string"==typeof this.defaultReport){if(this.defaultReport&&n.A.hasText(this.defaultReport)){const e=JSON.parse(this.defaultReport);e&&e.id&&e.name?this.stDefaultReport=e:this.stDefaultReport=void 0}}else void 0===this.defaultReport?this.stDefaultReport=void 0:this.defaultReport?.id&&this.defaultReport?.name&&n.A.hasText(this.defaultReport?.id)&&n.A.hasText(this.defaultReport?.name)?this.stDefaultReport=this.defaultReport:this.stDefaultReport=void 0;this.updateChildrenDefaultReport(this.stDefaultReport)}updateChildrenDefaultReport(e){if(this._reportsId){const t=n.A.queryElementById.call(this,this._reportsId);t&&t.setDefaultReport(e)}}async setDefaultReport(e){n.a.Log("infographics-step setDefaultReport",e),e&&e.id&&n.A.hasText(e.id)&&e.name&&n.A.hasText(e.name)?(this.stDefaultReport=e,this.updateChildrenDefaultReport(this.stDefaultReport)):(this.stDefaultReport=void 0,this.updateChildrenDefaultReport(void 0))}onThemeChanged(){this.stTheme=this.theme,this.baseConfig.setTheme(this.theme)}setLocaleStrings(){}_loadInstances(){this._instanceId||(this._instanceId=n.E.generateId(this._idPrefix).id),this._reportsId||(this._reportsId=n.E.generateId(this._idPrefixReports).id),this._reportsContId||(this._reportsContId=n.E.generateId(this._idPrefixReportsCont).id)}onUpdateUI(){this.applyStyles()}applyStyles(){if(this.baseConfig?.config?.colors&&Object.keys(this.baseConfig.config.colors).length>0){const e=n.A.queryElement.call(this.el,"arcgis-infographic-selector");if(e&&e.shadowRoot){const t=e.shadowRoot.querySelector("div.infographicSelectorOuter");t&&"style"in t&&t.style.setProperty("z-index","2003")}}}async componentWillLoad(){n.a.Log("INFOGRAPHICS-STEP willLoad"),this.config&&"string"==typeof this.config&&this.onConfigChange(this.config,""),this.defaultReport&&n.A.hasText(this.defaultReport)&&(this.stDefaultReport=JSON.parse(this.defaultReport)),this._loadInstances()}componentDidLoad(){const e=this;requestAnimationFrame(()=>{n.a.Log("INFOGRAPHICS-STEP didUpdate"),e._loadInstances();const t=e._reportsId?e.el.shadowRoot?.querySelector(`#${e._reportsId}`):null;if(t){const i=e.baseConfig.config;t.initialize(i.username,i.token,i.env,i.sourceCountry,i.langCode,JSON.stringify(i.reportList))}e.baseConfig&&e.baseConfig.onComponentHasRendered()})}componentDidUpdate(){this.baseConfig&&this.baseConfig.onComponentHasRendered()}render(){const e=this.baseConfig.config.username,t=this.baseConfig.config.env,i=this.baseConfig.config.token,s=this.baseConfig.config.geoenrichmentUrl,a=this.baseConfig.config.selectedCountry,n=this.baseConfig.config.selectedHierarchy,o=this.baseConfig.config.reportList,f=this.baseConfig.config.langCode,l=this.baseConfig.config.workflowIntroTextReportCheckbox,h=this.baseConfig.config.workflowIntroTextReports,c={env:t,username:e,token:i,geoenrichmentUrl:s,sourceCountry:a,selectedHierarchy:n,langCode:f,selectedReportId:this.selectedReport,reportList:JSON.stringify(o),_parentConfigId:this.baseConfig.configInstanceId},d=JSON.stringify(c);return(0,r.h)(r.H,{key:"455f2dbe6577a9c7d70def03e94127233af92a12"},(0,r.h)("div",{key:"8b3cf23c1adf5a55d7ea1bb9fef820bf5491ac12",class:"flex-grid"},l&&(0,r.h)("div",{key:"3a4a8f2b1922ab07d02f312e4f300000611ea163",class:"arcgisInfographicsStepDescription"},h)),(0,r.h)("div",{key:"fd496e85f3da4d7a42c8b89cd6e4249aaee8370a",class:"flex-grid"},(0,r.h)("div",{key:"4301be409e1282cd4b92df31e965ffa0948d2964",class:"col",id:this._reportsContId},(0,r.h)("div",{key:"16b0f5e3de21e01f4a3472491ec26a773f562705",class:"tree-container"},(0,r.h)("arcgis-infographic-selector",{key:"6996e44dd96401b7b0aae474bf9767ef60167b6c",id:this._reportsId,portalOnlineGEProxy:this.portalOnlineGEProxy,config:d,class:"wf-infographic-selector"})))))}static get watchers(){return{config:["onConfigChange"],defaultReport:["onDefaultReportChanged"],theme:["onThemeChanged"]}}};u.style=":host{display:block}.flex-grid{display:flex}.flex-grid .col{flex:1}.wf-infographic-selector{position:absolute;width:calc(100% - 10px);height:40px}.arcgisInfographicsStepDescription{margin-bottom:8px;font-size:var(--calcite-font-size--2, 1em)}"}}]);