"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_ba-infographic_node_modules_arcgis_business-analyst-components_dis-fb02f9"],{5399:(t,e,n)=>{n.r(e),n.d(e,{ba_accordion:()=>s});var i=n(982),o=n(7212);const s=class{get el(){return(0,i.g)(this)}debugContent=[];_instanceId;_instanceIconId;_instanceContentId;ignoreClick=0;_idPrefix="ba-accordion-";_idItemPrefix="ba-item-";_idIconPrefix="ba-accordion-icon-";_idContentPrefix="ba-content-";_isReport=!1;_dbg=!1;constructor(t){(0,i.r)(this,t),this.accordionOpened=(0,i.c)(this,"accordionOpened",7),this.accordionWillOpen=(0,i.c)(this,"accordionWillOpen",7),this.accordionItemClicked=(0,i.c)(this,"accordionItemClicked",7),this.accordionItemsChecked=(0,i.c)(this,"accordionItemsChecked",7),this.hideOnEmpty="true",this.displayCount=!0,this.displayname=void 0,this.isOpen=!1,this.content=void 0,this.groupid=void 0,this.contentInline="true",this.calciteicon=void 0,this.selectedId=void 0,this.showCheckboxes=void 0,this.langCode=void 0,this.sourceCountry=void 0,this.suglite=void 0,this.reportsGroupId=void 0,this._counter=void 0,this.showDebug=void 0,this.stLangCode=void 0,this.stSourceCountry="US",this.stContent=void 0,this.stDisplayName=void 0,this.stGroupId=void 0,this.stContentInline=void 0,this.stShowCheckboxes=void 0,this.stIsOpen=void 0,this._stCount=void 0,this.stColorTheme=void 0,this.stSelectedId=void 0,this.stSuglite=void 0,this.stTimestamp=void 0,this.defaultReport=void 0,this.stDefaultReport=void 0,this.langCode="en-us",this.sourceCountry="US"}onDefaultReportChanged(){if(o.a.Log("ACCORDION updating defaultReport",this.defaultReport),"string"==typeof this.defaultReport){if(this.defaultReport&&o.A.hasText(this.defaultReport)){const t=JSON.parse(this.defaultReport);t&&t.id&&t.name?this.stDefaultReport=t:this.stDefaultReport=void 0}}else void 0===this.defaultReport?this.stDefaultReport=void 0:this.defaultReport?.id&&this.defaultReport?.name&&o.A.hasText(this.defaultReport?.id)&&o.A.hasText(this.defaultReport?.name)?this.stDefaultReport=this.defaultReport:this.stDefaultReport=void 0}async setDefaultReport(t){o.a.Log("ACCORDION setDefaultReport",t),t&&t.id&&o.A.hasText(t.id)&&t.name&&o.A.hasText(t.name)?this.stDefaultReport=t:this.stDefaultReport=void 0}async setSelectedId(t){this.selectedId=t,this.stSelectedId=t}onSourceCountryChanged(){this.stSourceCountry=this.sourceCountry}onIsOpenChanged(){this.stIsOpen=this.isOpen,this.stIsOpen&&this.showContent()}onSugliteChanged(){this.stSuglite=!1,void 0!==typeof this.suglite&&"true"===this.suglite&&(this.stSuglite=!0)}onContentChanged(){try{this.content&&o.A.hasText(this.content)&&(this.stContent=JSON.parse(this.content))}catch(t){o.a.Error("ba-accordion content error",t)}}onAccordionTextChanged(){this.stDisplayName=this.displayname}onSelectedIdChanged(){this.stSelectedId=this.selectedId}onGroupIdChanged(){this.stGroupId=this.groupid}onContentInlineChanged(){this.stContentInline="true"==this.contentInline}accordionCheckboxChanged(){this.stShowCheckboxes=this.showCheckboxes}accordionOpened;accordionWillOpen;accordionItemClicked;accordionItemsChecked;accordionOpenedEventHandler(t){let e=t.detail.groupid,n=t.detail.instanceId;null!=n&&n!=this._instanceId&&null!=e&&(!this.stGroupId&&this.groupid&&(this.stGroupId=this.groupid),this.stGroupId&&this.stGroupId==e&&this.closeAccordion(null))}async openAccordion(){}async setShowCheckbox(t){this.stShowCheckboxes=t}async setColorTheme(t){t&&o.A.hasText(t)&&this.el&&(this.stColorTheme=t.trim().toLowerCase())}componentWillLoad(){if(o.a.Log("ACCORDION: will load"),this.stLangCode=this.langCode,this.stSourceCountry=this.sourceCountry,this.stShowCheckboxes=this.showCheckboxes,this.stIsOpen=this.isOpen,this.defaultReport&&o.A.hasText(this.defaultReport)&&(this.stDefaultReport=JSON.parse(this.defaultReport)),this._instanceId||(this._instanceId=o.E.generateId(this._idPrefix).id),this._instanceContentId||(this._instanceContentId=o.E.generateId(this._idContentPrefix).id),this._instanceIconId||(this._instanceIconId=o.E.generateId(this._idIconPrefix).id),this.stSuglite=!1,void 0!==typeof this.suglite&&"true"===this.suglite&&(this.stSuglite=!0),(!this.stDisplayName||this.stDisplayName.length<=0)&&(this.displayname&&this.displayname.length>0?this.stDisplayName=this.displayname:this.stDisplayName="?"),!this.stGroupId&&this.groupid&&(this.stGroupId=this.groupid),!this.stContentInline&&this.contentInline&&(this.stContentInline="true"==this.contentInline),!this.stContent&&this.content&&o.A.hasText(this.content))try{this.stContent=JSON.parse(this.content)}catch(t){this.stContent={}}this.stSelectedId=this.selectedId}componentDidLoad(){const t=this;requestAnimationFrame(()=>{t.el&&t.el.addEventListener("click",e=>{t.onClickAccordion.call(t,e)})})}componentDidRender(){}toggleCheckState=(t,e)=>{if(t&&t.length>0&&e)for(let n=0;n<t.length;n++)if(t[n].id===e){const e=t[n].isChecked;return t[n].isChecked=!e,!e}return!1};onCheckboxChanged(t){if(o.a.Log("ACCORDION: onCheckboxChanged"),Array.isArray(this.stContent)){this.stContent=this.stContent.map(e=>e.id===t?{...e,isChecked:!e.isChecked}:e);const e=this.stContent.find(e=>e.id===t);this.accordionItemsChecked.emit({accordion:this,reports:[{id:t,isChecked:e?.isChecked}]}),this.updateCheckboxes()}return!1}closeAccordion(t){let e=t?t.elem:o.A.queryElementById.call(this,this._instanceId),n=t?t.content:o.A.queryElementById.call(this,this._instanceContentId),i=t?t.icon:o.A.queryElementById.call(this,this._instanceIconId);e.classList.remove("accordion__active"),n.style.maxHeight=null,i.setAttribute("icon-end","caret-down"),this.hideContent(n)}isDefaultId(t){let e=!1;if(null!=this.stDefaultReport){e=this.stDefaultReport.id==t}return e}showContent(t){t||(t=o.A.queryElementById.call(this,this._instanceContentId)),t&&t.classList.contains("ba-content-hidden")&&(t.classList.remove("ba-content-hidden"),this.accordionOpened.emit({accordion:this,groupid:this.stGroupId,instanceId:this._instanceId}),this.isOpen=this.stIsOpen=!0)}hideContent(t){t||(t=o.A.queryElementById.call(this,this._instanceContentId)),t.classList.contains("ba-content-hidden")||(t.classList.add("ba-content-hidden"),this.isOpen=this.stIsOpen=!1)}onClickAccordionItem(t,e,n){if(this.stShowCheckboxes){const t=n.id,e=this.toggleCheckState(this.stContent,t);this.notifyCheckedItems(e,t),this.updateCheckboxes()}else{const t=JSON.parse(this.content);if(t){const e=t.findIndex(function(t){return t.id==n.id});if(e>=0){const i=t[e].reportID;i&&(n.reportID=i)}}this.accordionItemClicked.emit({context:e,item:n})}return t.stopPropagation(),t.preventDefault(),!1}onClickAccordion(t){if(t.target.classList.contains("ba-target-check"))return!1;if(this.ignoreClick>0)return this.ignoreClick--,!1;const e=t.currentTarget,n=o.A.queryElementById.call(this,this._instanceContentId),i=o.A.queryElementById.call(this,this._instanceIconId);if(n)if(n.style.maxHeight)this.stIsOpen||this.closeAccordion({elem:e,content:n,icon:i});else{function s(){n.style.overflow="auto"}e.classList.add("accordion__active"),n.style.maxHeight="100%",i.setAttribute("icon-end","caret-up"),this.showContent(n),setTimeout(s,500)}return!0}_getContent(){if(!this.stContent)if(this.content)this.stContent=JSON.parse(this.content);else if(!this.showDebug){let t=o.A.queryElementById.call(this,this._instanceId);if(t){let e=t.getAttribute("content");e&&e.length>0&&(this.content=e,this.stContent=JSON.parse(this.content))}}return this.stContent}_getContentItem(t){for(let e=0;e<this.stContent.length;e++){let n=this.stContent[e];if(n.id==t)return n}return null}_setContentItem(t,e,n){for(let i=0;i<this.stContent.length;i++){if(this.stContent.stContenttent[i].id==t){this.stContent[i][e]=n;break}}}_toggleContentItem(t,e){let n=this._getContentItem(t);if(n){const i=!n[e];this._setContentItem(t,e,i)}}updateCheckboxes(){this.stTimestamp=(new Date).getTime()}notifyCheckedItems(t,e){const n=!e||!o.A.hasText(e),i=this.el.shadowRoot?.querySelectorAll("calcite-checkbox[data-group]");if(i){const s=[];for(let c=0;c<i.length;c++){const r=i[c];let a=r.checked;const d=r.id;if(d&&o.A.hasText(d)){(n||e==d)&&(a=t);const i={id:d,isChecked:a};s.push(i)}}s.length>0&&this.accordionItemsChecked.emit({accordion:this,reports:s})}}onCheckAllChanged=t=>{const e=t.target.checked;if(Array.isArray(this.stContent)){this.stContent=this.stContent.map(t=>({...t,isChecked:e}));const t=this.stContent.map(t=>({id:t.id,isChecked:e}));this.accordionItemsChecked.emit({accordion:this,reports:t}),this.updateCheckboxes()}};getAccordion(){try{const t=this;let e=t._getContent();const n=t.stDisplayName,o=t.calciteicon||"",s={"text-decoration":"underline"};if(t.stShowCheckboxes){let o=!1,c=!1;if(t.stContent?.length>0){const e=t.stContent.filter(t=>t.isChecked).length;o=e===t.stContent.length,c=e>0&&e<t.stContent.length}const r={width:"16px",height:"16px",position:"relative",left:"5px",top:"2px","padding-inline-start":"5px"},a={margin:"-4px 0px 0px -4px",width:"15px",height:"13px"};return(0,i.h)("calcite-accordion",{appearance:"solid","icon-position":"end"},(0,i.h)("calcite-accordion-item",{heading:n},(0,i.h)("calcite-checkbox",{slot:"actions-start",style:r,name:"Select All",value:"all",checked:o,indeterminate:c,onCalciteCheckboxChange:t.onCheckAllChanged}),(0,i.h)("calcite-list",{class:"no-separators",label:""},e?e.map(({id:e,name:n,subText:o})=>{const c=e+"-acc-item",r=this.isDefaultId(e)?s:"";return(0,i.h)("calcite-list-item",{id:c,label:n,value:e,description:o||"",style:"string"==typeof r?{textDecoration:r}:r},(0,i.h)("calcite-checkbox",{style:a,name:n,"data-group":t.reportsGroupId,value:e,id:e,slot:"actions-start",checked:t.stContent&&t.stContent.some(t=>t.id===e&&t.isChecked),onCalciteCheckboxChange:()=>t.onCheckboxChanged(e)}))}):"")))}{const s={whiteSpace:"wrap",overflowX:"hidden","padding-inline-start":"5px"},c={whiteSpace:"wrap",overflowX:"hidden","text-decoration":"underline"},r=!(!t.isOpen&&!e.some(e=>e.id===t.stSelectedId));return(0,i.h)("calcite-accordion",{appearance:"solid","icon-position":"end"},e?(0,i.h)("calcite-accordion-item",{"icon-start":o,heading:n,expanded:r},(0,i.h)("calcite-list",{label:"",class:"no-separators"},e?e.map(({id:e,name:n})=>{const o=this.isDefaultId(e)||this.stSelectedId===e?c:s;return(0,i.h)("calcite-list-item",{style:o,value:e,label:n,onClick:i=>t.onClickAccordionItem(i,t,{id:e,name:n})})}):"")):"")}}catch(t){o.a.Error("ba-accordion",t)}}render(){if(this._getContent())return this._isReport=this.el.classList.contains("reportList"),o.a.Log("ACCORDION RENDER def rep=",this.stDefaultReport,this.displayname),this.getAccordion()}static get watchers(){return{defaultReport:["onDefaultReportChanged"],sourceCountry:["onSourceCountryChanged"],isOpen:["onIsOpenChanged"],suglite:["onSugliteChanged"],content:["onContentChanged"],displayname:["onAccordionTextChanged"],selectedId:["onSelectedIdChanged"],groupid:["onGroupIdChanged"],contentInline:["onContentInlineChanged"],showCheckboxes:["accordionCheckboxChanged"]}}};s.style=":host{display:block}calcite-accordion{--calcite-color-border-1:transparent;--calcite-color-border-2:transparent;--calcite-color-border-3:transparent;border:none !important}calcite-accordion-item{--calcite-color-border-1:transparent;--calcite-color-border-2:transparent;--calcite-color-border-3:transparent;border:none !important}calcite-accordion-item::part(header){border:none !important;border-bottom:none !important}calcite-accordion-item::part(content){border:none !important}calcite-list{--calcite-color-border-1:transparent;--calcite-color-border-2:transparent;--calcite-color-border-3:transparent;border:none !important}calcite-list-item{--calcite-color-border-1:transparent;--calcite-color-border-2:transparent;--calcite-color-border-3:transparent;border:none !important;border-bottom:none !important;margin-block-end:unset !important;--tw-shadow:unset !important;--tw-shadow-colored:unset !important;box-shadow:unset !important}.no-separators{--calcite-color-border-1:transparent;--calcite-color-border-2:transparent;--calcite-color-border-3:transparent;border:none !important}.no-separators calcite-list-item{--calcite-color-border-1:transparent;--calcite-color-border-2:transparent;--calcite-color-border-3:transparent;border:none !important}.no-separators calcite-list-item::part(container){border:none !important;border-block-end:0 !important;border-bottom:none !important}.no-separators::part(list){border:none !important}"}}]);