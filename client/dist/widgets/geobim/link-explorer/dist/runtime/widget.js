System.register(["jimu-core/emotion","jimu-core","jimu-ui","widgets/shared-code/geobim"],function(e,t){var n={},i={},o={},l={};return{setters:[function(e){n.Fragment=e.Fragment,n.jsx=e.jsx,n.jsxs=e.jsxs},function(e){i.React=e.React,i.ReactRedux=e.ReactRedux,i.css=e.css},function(e){o.Alert=e.Alert,o.Loading=e.Loading,o.Paper=e.Paper,o.Typography=e.Typography,o.WidgetPlaceholder=e.WidgetPlaceholder},function(e){l.ApsLogIn=e.ApsLogIn,l.ExBThemeSpacing=e.ExBThemeSpacing,l.GeoBIMProvider=e.GeoBIMProvider,l.UserTypeNotPermissible=e.UserTypeNotPermissible,l.areFeatureDocumentLinksEqual=e.areFeatureDocumentLinksEqual,l.areRecordArraysEqual=e.areRecordArraysEqual,l.defaultSharedMessages=e.defaultSharedMessages,l.geoBIMWidgetContainerStyle=e.geoBIMWidgetContainerStyle,l.getFeatureTitle=e.getFeatureTitle,l.loadingContainerStyle=e.loadingContainerStyle,l.modelViewerDisabledSelector=e.modelViewerDisabledSelector,l.selectionWarningStyle=e.selectionWarningStyle,l.setModelViewerLinkedDocument=e.setModelViewerLinkedDocument,l.useGeoBIM=e.useGeoBIM,l.useLinks=e.useLinks,l.useMultipleSelectionWarning=e.useMultipleSelectionWarning,l.useSharedMessages=e.useSharedMessages,l.widgetHeaderStyle=e.widgetHeaderStyle}],execute:function(){e((()=>{var e={14321:e=>{"use strict";e.exports=o},38512:e=>{"use strict";e.exports=l},67386:e=>{"use strict";e.exports=n},79244:e=>{"use strict";e.exports=i},91186:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" id="icons" viewBox="0 0 20 20"><path d="m11.781 1.223-6.334 2.79A.75.75 0 0 0 5 4.696V9.66a3.8 3.8 0 0 1 1-.649V5.235l5.647 2.483.353.155v7.907l-1.69-.743c-.044.048-.077.104-.124.15l-.615.616 2.929 1.29 7.5-3.298v-.616l-5.564-2.068L20 8.665v-.59l-2.137-.94-1.074.62 1.397.615L13 10.648V7.873l7-3.078v-.59L12.5.907zm6.317 12.316L13 15.78v-4.13zM12.5 7l-1.289-.567-3.821-1.68a.277.277 0 0 1 0-.506l4.024-1.77L12.5 2l5.686 2.5zM4.105 18.016c.368.147.757.232 1.156.258l-.993.994a2.5 2.5 0 0 1-3.536-3.536l.824-.823 1.176-1.177a2.483 2.483 0 0 1 3.664.155l-.708.708a1.493 1.493 0 0 0-2.249-.156l-1.176 1.177-.824.824a1.502 1.502 0 0 0 2.122 2.12zm5.163-3.748-2 2a2.484 2.484 0 0 1-3.626-.11l.707-.708a1.49 1.49 0 0 0 2.212.11l2-2a1.49 1.49 0 0 0 .401-1.385c-.004-.021-.013-.04-.019-.062a1.5 1.5 0 0 0-.089-.247l-.02-.039a1.5 1.5 0 0 0-.154-.242l-.01-.012a1.6 1.6 0 0 0-.22-.224 1.486 1.486 0 0 0-2.01.09l-.55.55a3.7 3.7 0 0 0-1.152-.262l.994-.995a2.48 2.48 0 0 1 3.425-.09q.195.17.349.379.142.193.247.412.01.02.021.04.089.199.141.415c.008.028.02.055.027.084a2.492 2.492 0 0 1-.674 2.296" style="fill:currentColor;stroke-width:0"></path></svg>'}},t={};function s(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,s),o.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.p="";var r={};return s.p=window.jimuConfig.baseUrl,(()=>{"use strict";s.r(r),s.d(r,{__set_webpack_public_path__:()=>L,default:()=>b});var e=s(67386),t=s(79244),n=s(14321),i=s(38512);const o={_widgetLabel:"Link Explorer",_widgetDescription:"A widget to display linked Autodesk Construction Cloud documents of features in web maps and web scenes.",widgetTitle:"Link Explorer",geobim_logInText:" to your Autodesk account to view linked documents.",noFeatureTitle:"(No Feature Name)",geobim_multipleFeatures:"Multiple feature selection is currently not supported by the Link Explorer widget. Please select a single feature and continue.",noDocuments:"No linked documents to display.",noDocumentAccount:"(No Account Name)",noDocumentProject:"(No Project Name)"};var l=s(91186),a=s.n(l);const{useMemo:c,useCallback:u,useState:d}=t.React,{useDispatch:g,useSelector:m}=t.ReactRedux,p=e=>{const n=e.sys.spacing(i.ExBThemeSpacing.Two);return(0,t.css)({label:"documentLinkListItem",padding:n,borderBottom:`solid 1px ${e.sys.color.divider.primary}`,cursor:"pointer",textDecoration:"underline",color:e.sys.color.action.text,backgroundColor:e.sys.color.action.default,transition:"background-color 0.3s ease-in-out, text-decoration-color 0.3s ease-in-out",textDecorationColor:"transparent","&:hover":{textDecorationColor:"inherit"},"&:focus":{borderLeft:`solid 3px ${e.sys.color.action.selected.default}`,paddingLeft:`calc(${n} - 3px)`,outline:"0px !important"}})},x=e=>(0,t.css)({label:"documentTitle",fontWeight:e.sys.typography.fontWeightBold}),y=e=>(0,t.css)({label:"documentInfo",fontWeight:e.sys.typography.fontWeightLight}),f=e=>(0,t.css)({label:"noDocumentsMessage",flexBasis:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:e.sys.color.surface.paperHint}),h=o=>{const{theme:l,config:s,i18nMessage:r}=o,{modelViewerWidgetId:a}=s,{setDocumentSelection:h,linkExplorerTitle:v,featureDocumentLinks:b,linksLoading:L,linksInitialized:S,multipleFeatureSelectionWarning:k,cancelMultipleFeatureSelectionWarning:j}=((e,t)=>{var n;const o=m(t=>(0,i.modelViewerDisabledSelector)(e,t)),{selectedFeatures:l,geoBIMLoading:s}=(0,i.useGeoBIM)(),{featureDocumentLinks:r,linksLoading:a,linksInitialized:p}=(0,i.useLinks)(),{multipleFeatureSelectionWarning:x,cancelMultipleFeatureSelectionWarning:y}=(0,i.useMultipleSelectionWarning)(l,!0),f=g(),[h,v]=d(null),[b,L]=d([]),[S,k]=d(null);if((0,i.areFeatureDocumentLinksEqual)(r,S)||null===r&&!x||k(r),!(0,i.areRecordArraysEqual)(b,l))if(L(l),1===l.length){const e=l[0].feature;if(null!=e.layer){const o=null!==(n=(0,i.getFeatureTitle)(e))&&void 0!==n?n:t("noFeatureTitle"),l=e.layer.title,s=o===l||null==l?o:`${l}: ${o}`;h!==s&&v(s)}}else l.length>1&&null!==h&&v(null);const j=c(()=>p&&!s&&null!==h?h:t("widgetTitle"),[s,t,p,h]),M=u((t,n)=>{null==e||""===e||o||(0,i.setModelViewerLinkedDocument)(e,t,n,f)},[e,o,f]);return c(()=>({setDocumentSelection:M,linkExplorerTitle:j,featureDocumentLinks:S,linksLoading:a,linksInitialized:p,multipleFeatureSelectionWarning:x,cancelMultipleFeatureSelectionWarning:y}),[M,j,S,a,p,x,y])})(a,r),{apsAuthenticated:M,selectionUpdating:w,geoBIMLoading:I,userHasPermission:T,geoBIMInitialized:D}=(0,i.useGeoBIM)(),W=L||!S||w||I,F=!T&&D,P=(e,t)=>{h(e,t)},_=()=>{if(null==b||0===b.documents.length)return[(0,e.jsx)("div",{css:f(l),children:r("noDocuments")},"no-documents")];return b.documents.map(t=>{var n,i,o,s;const a=`${null!==(i=null===(n=t.attributes)||void 0===n?void 0:n.accountName)&&void 0!==i?i:r("noDocumentAccount")} - ${null!==(s=null===(o=t.attributes)||void 0===o?void 0:o.projectName)&&void 0!==s?s:r("noDocumentProject")}`;return(0,e.jsxs)("div",{tabIndex:0,css:p(l),onClick:()=>{var e;P(t,null!==(e=b.feature.bimIds)&&void 0!==e?e:null)},onKeyUp:e=>{var n;"Enter"===e.key&&P(t,null!==(n=b.feature.bimIds)&&void 0!==n?n:null)},children:[(0,e.jsx)("div",{css:x(l),children:t.displayName}),(0,e.jsx)("div",{css:y(l),children:a})]},t.fileName)})};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{css:(0,i.geoBIMWidgetContainerStyle)(l),children:[(0,e.jsx)("div",{css:(0,i.widgetHeaderStyle)(l),children:(0,e.jsx)(n.Typography,{variant:"title1",color:"overlayText",children:v})}),F&&(0,e.jsx)(i.UserTypeNotPermissible,{userTypeNotPermissibleLinkText:r("geobim_userTypeLink"),userTypeNotPermissibleText:r("geobim_userTypeNote",{widget_name:r("widgetTitle")}),theme:l}),!M&&!F&&(0,e.jsx)(i.ApsLogIn,{logInLinkText:r("geobim_logInLink"),loginMessageFirstLine:r("geobim_logInText"),loginMessageSecondLine:r("geobim_logInTip"),theme:l}),M&&!F&&(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{css:(0,t.css)({label:"documentLinkList",flexBasis:"100%",display:"flex",flexDirection:"column",alignItems:"stretch",justifyContent:"flex-start",overflowY:"auto",position:"relative"}),children:[W&&(0,e.jsx)("div",{css:(0,i.loadingContainerStyle)(l),children:(0,e.jsx)(n.Loading,{})},"documents-loading"),!W&&_(),k&&!W&&(0,e.jsx)("div",{css:(0,i.selectionWarningStyle)(l),children:(0,e.jsx)(n.Alert,{text:r("geobim_multipleFeatures"),"aria-live":"polite",closable:!0,open:k,onClose:()=>{j()},size:"medium",type:"warning",withIcon:!0})})]})})]})})},{useCallback:v}=t.React,b=t=>{const{useMapWidgetIds:l,intl:s,theme:r,widgetId:c,config:u,manifest:d}=t,{translateMessage:g}=(0,i.useSharedMessages)(s,d.translatedLocales),m=v((e,t)=>{const n=Object.assign(Object.assign({},i.defaultSharedMessages.default),o);return g(e,n,t)},[g]),p=null==l?void 0:l[0],x=!!p;return(0,e.jsxs)(n.Paper,{shape:"none",className:"jimu-widget widget-link-explorer",children:[!x&&(0,e.jsx)(n.WidgetPlaceholder,{icon:a(),name:m("widgetTitle")}),x&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(i.GeoBIMProvider,{mapWidgetId:p,widgetId:c,children:(0,e.jsx)(h,{i18nMessage:m,theme:r,config:u})})})]})};function L(e){s.p=e}})(),r})())}}});